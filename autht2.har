{
  "log": {
    "version": "1.2",
    "creator": {
      "name": "WebInspector",
      "version": "537.36"
    },
    "pages": [
      {
        "startedDateTime": "2025-10-16T22:13:29.440Z",
        "id": "page_2",
        "title": "https://privaseeai.net/auth/github",
        "pageTimings": {
          "onContentLoad": 761.2550000048941,
          "onLoad": 761.4259999973001
        }
      }
    ],
    "entries": [
      {
        "_connectionId": "330314",
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "signIn",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 22222,
                "columnNumber": 3030
              },
              {
                "functionName": "onClick",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 22222,
                "columnNumber": 6012
              },
              {
                "functionName": "sA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 9836
              },
              {
                "functionName": "oA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 9993
              },
              {
                "functionName": "iA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 10050
              },
              {
                "functionName": "yS",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 31418
              },
              {
                "functionName": "xS",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 31838
              },
              {
                "functionName": "",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 37044
              },
              {
                "functionName": "qx",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 39,
                "columnNumber": 37418
              },
              {
                "functionName": "kv",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 8972
              },
              {
                "functionName": "qy",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 33131
              },
              {
                "functionName": "Ey",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 17365
              },
              {
                "functionName": "SA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 17149
              }
            ]
          }
        },
        "_priority": "VeryHigh",
        "_resourceType": "document",
        "cache": {},
        "connection": "443",
        "pageref": "page_2",
        "request": {
          "method": "GET",
          "url": "https://privaseeai.net/auth/github",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "privaseeai.net"
            },
            {
              "name": "Referer",
              "value": "https://privaseeai.net/?error=auth_failed"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "document"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "navigate"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-Fetch-User",
              "value": "?1"
            },
            {
              "name": "Upgrade-Insecure-Requests",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"macOS\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 907,
          "bodySize": 0
        },
        "response": {
          "status": 302,
          "statusText": "Found",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Content-Length",
              "value": "192"
            },
            {
              "name": "Content-Security-Policy",
              "value": "frame-ancestors 'none'"
            },
            {
              "name": "Content-Type",
              "value": "text/html; charset=utf-8"
            },
            {
              "name": "Date",
              "value": "Thu, 16 Oct 2025 22:13:29 GMT"
            },
            {
              "name": "Location",
              "value": "https://github.com/login/oauth/authorize?client_id=Ov23liphTXcKC33CrLIE&redirect_uri=https://privaseeai.net/auth/github/callback&scope=read:user,user:email"
            },
            {
              "name": "Vary",
              "value": "Accept"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 0,
            "mimeType": "text/html",
            "compression": 0
          },
          "redirectURL": "https://github.com/login/oauth/authorize?client_id=Ov23liphTXcKC33CrLIE&redirect_uri=https://privaseeai.net/auth/github/callback&scope=read:user,user:email",
          "headersSize": 373,
          "bodySize": 0,
          "_transferSize": 373,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "20.119.128.21",
        "startedDateTime": "2025-10-16T22:13:29.438Z",
        "time": 133.0900000029942,
        "timings": {
          "blocked": 2.674999998391606,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.18699999999999994,
          "wait": 129.6530000063954,
          "receive": 0.574999998207204,
          "_blocked_queueing": 2.122999998391606,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_connectionId": "330339",
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "signIn",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 22222,
                "columnNumber": 3030
              },
              {
                "functionName": "onClick",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 22222,
                "columnNumber": 6012
              },
              {
                "functionName": "sA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 9836
              },
              {
                "functionName": "oA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 9993
              },
              {
                "functionName": "iA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 10050
              },
              {
                "functionName": "yS",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 31418
              },
              {
                "functionName": "xS",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 31838
              },
              {
                "functionName": "",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 37044
              },
              {
                "functionName": "qx",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 39,
                "columnNumber": 37418
              },
              {
                "functionName": "kv",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 8972
              },
              {
                "functionName": "qy",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 33131
              },
              {
                "functionName": "Ey",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 17365
              },
              {
                "functionName": "SA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 17149
              }
            ]
          }
        },
        "_priority": "VeryHigh",
        "_resourceType": "document",
        "cache": {},
        "connection": "443",
        "pageref": "page_2",
        "request": {
          "method": "GET",
          "url": "https://github.com/login/oauth/authorize?client_id=Ov23liphTXcKC33CrLIE&redirect_uri=https://privaseeai.net/auth/github/callback&scope=read:user,user:email",
          "httpVersion": "http/2.0",
          "headers": [
            {
              "name": ":authority",
              "value": "github.com"
            },
            {
              "name": ":method",
              "value": "GET"
            },
            {
              "name": ":path",
              "value": "/login/oauth/authorize?client_id=Ov23liphTXcKC33CrLIE&redirect_uri=https://privaseeai.net/auth/github/callback&scope=read:user,user:email"
            },
            {
              "name": ":scheme",
              "value": "https"
            },
            {
              "name": "accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"
            },
            {
              "name": "accept-encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "accept-language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "priority",
              "value": "u=0, i"
            },
            {
              "name": "referer",
              "value": "https://privaseeai.net/"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"macOS\""
            },
            {
              "name": "sec-fetch-dest",
              "value": "document"
            },
            {
              "name": "sec-fetch-mode",
              "value": "navigate"
            },
            {
              "name": "sec-fetch-site",
              "value": "cross-site"
            },
            {
              "name": "sec-fetch-user",
              "value": "?1"
            },
            {
              "name": "upgrade-insecure-requests",
              "value": "1"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"
            }
          ],
          "queryString": [
            {
              "name": "client_id",
              "value": "Ov23liphTXcKC33CrLIE"
            },
            {
              "name": "redirect_uri",
              "value": "https://privaseeai.net/auth/github/callback"
            },
            {
              "name": "scope",
              "value": "read:user,user:email"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 302,
          "statusText": "",
          "httpVersion": "http/2.0",
          "headers": [
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "content-length",
              "value": "0"
            },
            {
              "name": "content-security-policy",
              "value": "default-src 'none'; base-uri 'self'; child-src github.githubassets.com github.com/assets-cdn/worker/ github.com/assets/ gist.github.com/assets-cdn/worker/; connect-src 'self' uploads.github.com www.githubstatus.com collector.github.com raw.githubusercontent.com api.github.com github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com *.rel.tunnels.api.visualstudio.com wss://*.rel.tunnels.api.visualstudio.com github.githubassets.com objects-origin.githubusercontent.com copilot-proxy.githubusercontent.com proxy.individual.githubcopilot.com proxy.business.githubcopilot.com proxy.enterprise.githubcopilot.com *.actions.githubusercontent.com wss://*.actions.githubusercontent.com productionresultssa0.blob.core.windows.net/ productionresultssa1.blob.core.windows.net/ productionresultssa2.blob.core.windows.net/ productionresultssa3.blob.core.windows.net/ productionresultssa4.blob.core.windows.net/ productionresultssa5.blob.core.windows.net/ productionresultssa6.blob.core.windows.net/ productionresultssa7.blob.core.windows.net/ productionresultssa8.blob.core.windows.net/ productionresultssa9.blob.core.windows.net/ productionresultssa10.blob.core.windows.net/ productionresultssa11.blob.core.windows.net/ productionresultssa12.blob.core.windows.net/ productionresultssa13.blob.core.windows.net/ productionresultssa14.blob.core.windows.net/ productionresultssa15.blob.core.windows.net/ productionresultssa16.blob.core.windows.net/ productionresultssa17.blob.core.windows.net/ productionresultssa18.blob.core.windows.net/ productionresultssa19.blob.core.windows.net/ github-production-repository-image-32fea6.s3.amazonaws.com github-production-release-asset-2e65be.s3.amazonaws.com insights.github.com wss://alive.github.com wss://alive-staging.github.com api.githubcopilot.com api.individual.githubcopilot.com api.business.githubcopilot.com api.enterprise.githubcopilot.com; font-src github.githubassets.com; form-action 'self' github.com gist.github.com copilot-workspace.githubnext.com objects-origin.githubusercontent.com; frame-ancestors 'self'; frame-src viewscreen.githubusercontent.com notebooks.githubusercontent.com; img-src 'self' data: blob: github.githubassets.com media.githubusercontent.com camo.githubusercontent.com identicons.github.com avatars.githubusercontent.com private-avatars.githubusercontent.com github-cloud.s3.amazonaws.com objects.githubusercontent.com release-assets.githubusercontent.com secured-user-images.githubusercontent.com/ user-images.githubusercontent.com/ private-user-images.githubusercontent.com opengraph.githubassets.com marketplace-screenshots.githubusercontent.com/ copilotprodattachments.blob.core.windows.net/github-production-copilot-attachments/ github-production-user-asset-6210df.s3.amazonaws.com customer-stories-feed.github.com spotlights-feed.github.com objects-origin.githubusercontent.com *.githubusercontent.com; manifest-src 'self'; media-src github.com user-images.githubusercontent.com/ secured-user-images.githubusercontent.com/ private-user-images.githubusercontent.com github-production-user-asset-6210df.s3.amazonaws.com gist.github.com; script-src github.githubassets.com; style-src 'unsafe-inline' github.githubassets.com; upgrade-insecure-requests; worker-src github.githubassets.com github.com/assets-cdn/worker/ github.com/assets/ gist.github.com/assets-cdn/worker/"
            },
            {
              "name": "content-type",
              "value": "text/html; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Thu, 16 Oct 2025 22:13:29 GMT"
            },
            {
              "name": "location",
              "value": "https://privaseeai.net/auth/github/callback?code=61f62f2a158b44357412"
            },
            {
              "name": "referrer-policy",
              "value": "origin-when-cross-origin, strict-origin-when-cross-origin"
            },
            {
              "name": "server",
              "value": "github.com"
            },
            {
              "name": "strict-transport-security",
              "value": "max-age=31536000; includeSubdomains; preload"
            },
            {
              "name": "vary",
              "value": "X-Fetch-Nonce, X-PJAX, X-PJAX-Container, Turbo-Visit, Turbo-Frame, X-Requested-With,Accept-Encoding, Accept, X-Requested-With"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "x-frame-options",
              "value": "sameorigin"
            },
            {
              "name": "x-github-request-id",
              "value": "DE1A:1AB972:38FF81:4AB3AB:68F16DF7"
            },
            {
              "name": "x-xss-protection",
              "value": "0"
            }
          ],
          "cookies": [],
          "content": {
            "size": 0,
            "mimeType": "text/html"
          },
          "redirectURL": "https://privaseeai.net/auth/github/callback?code=61f62f2a158b44357412",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 3565,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "140.82.113.4",
        "startedDateTime": "2025-10-16T22:13:29.571Z",
        "time": 387.7949999878183,
        "timings": {
          "blocked": 1.1619999962169678,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.13,
          "wait": 381.7770000069439,
          "receive": 4.725999984657392,
          "_blocked_queueing": 0.9129999962169677,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_connectionId": "330314",
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "signIn",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 22222,
                "columnNumber": 3030
              },
              {
                "functionName": "onClick",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 22222,
                "columnNumber": 6012
              },
              {
                "functionName": "sA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 9836
              },
              {
                "functionName": "oA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 9993
              },
              {
                "functionName": "iA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 10050
              },
              {
                "functionName": "yS",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 31418
              },
              {
                "functionName": "xS",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 31838
              },
              {
                "functionName": "",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 37044
              },
              {
                "functionName": "qx",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 39,
                "columnNumber": 37418
              },
              {
                "functionName": "kv",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 8972
              },
              {
                "functionName": "qy",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 33131
              },
              {
                "functionName": "Ey",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 17365
              },
              {
                "functionName": "SA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 17149
              }
            ]
          }
        },
        "_priority": "VeryHigh",
        "_resourceType": "document",
        "cache": {},
        "connection": "443",
        "pageref": "page_2",
        "request": {
          "method": "GET",
          "url": "https://privaseeai.net/auth/github/callback?code=61f62f2a158b44357412",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "privaseeai.net"
            },
            {
              "name": "Referer",
              "value": "https://privaseeai.net/"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "document"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "navigate"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "cross-site"
            },
            {
              "name": "Sec-Fetch-User",
              "value": "?1"
            },
            {
              "name": "Upgrade-Insecure-Requests",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"macOS\""
            }
          ],
          "queryString": [
            {
              "name": "code",
              "value": "61f62f2a158b44357412"
            }
          ],
          "cookies": [],
          "headersSize": 923,
          "bodySize": 0
        },
        "response": {
          "status": 302,
          "statusText": "Found",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Content-Length",
              "value": "48"
            },
            {
              "name": "Content-Security-Policy",
              "value": "frame-ancestors 'none'"
            },
            {
              "name": "Content-Type",
              "value": "text/html; charset=utf-8"
            },
            {
              "name": "Date",
              "value": "Thu, 16 Oct 2025 22:13:30 GMT"
            },
            {
              "name": "Location",
              "value": "/?error=auth_failed"
            },
            {
              "name": "Vary",
              "value": "Accept"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 0,
            "mimeType": "text/html",
            "compression": 0
          },
          "redirectURL": "/?error=auth_failed",
          "headersSize": 236,
          "bodySize": 0,
          "_transferSize": 236,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "20.119.128.21",
        "startedDateTime": "2025-10-16T22:13:29.958Z",
        "time": 168.855000010808,
        "timings": {
          "blocked": 2.6820000033183025,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.09499999999999997,
          "wait": 163.4659999963492,
          "receive": 2.6120000111404806,
          "_blocked_queueing": 2.2880000033183023,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_fromCache": "disk",
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "signIn",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 22222,
                "columnNumber": 3030
              },
              {
                "functionName": "onClick",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 22222,
                "columnNumber": 6012
              },
              {
                "functionName": "sA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 9836
              },
              {
                "functionName": "oA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 9993
              },
              {
                "functionName": "iA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 10050
              },
              {
                "functionName": "yS",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 31418
              },
              {
                "functionName": "xS",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 31838
              },
              {
                "functionName": "",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 37044
              },
              {
                "functionName": "qx",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 39,
                "columnNumber": 37418
              },
              {
                "functionName": "kv",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 8972
              },
              {
                "functionName": "qy",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 33131
              },
              {
                "functionName": "Ey",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 17365
              },
              {
                "functionName": "SA",
                "scriptId": "26",
                "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
                "lineNumber": 36,
                "columnNumber": 17149
              }
            ]
          }
        },
        "_priority": "VeryHigh",
        "_resourceType": "document",
        "cache": {},
        "pageref": "page_2",
        "request": {
          "method": "GET",
          "url": "https://privaseeai.net/?error=auth_failed",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Referer",
              "value": "https://privaseeai.net/"
            },
            {
              "name": "Upgrade-Insecure-Requests",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"macOS\""
            }
          ],
          "queryString": [
            {
              "name": "error",
              "value": "auth_failed"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            },
            {
              "name": "Cache-Control",
              "value": "public, max-age=0"
            },
            {
              "name": "Content-Length",
              "value": "1488"
            },
            {
              "name": "Content-Security-Policy",
              "value": "frame-ancestors 'none'"
            },
            {
              "name": "Content-Type",
              "value": "text/html; charset=UTF-8"
            },
            {
              "name": "Date",
              "value": "Thu, 16 Oct 2025 22:13:06 GMT"
            },
            {
              "name": "ETag",
              "value": "W/\"5d0-199ef09d4d8\""
            },
            {
              "name": "Last-Modified",
              "value": "Thu, 16 Oct 2025 22:00:23 GMT"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 1488,
            "mimeType": "text/html",
            "text": "<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/vite.svg\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <meta name=\"theme-color\" content=\"#000000\" />\n    <meta name=\"description\" content=\"AI-powered home security monitoring with TensorFlow.js\" />\n    \n    <!-- PWA Meta Tags -->\n    <link rel=\"apple-touch-icon\" href=\"/apple-touch-icon.png\" />\n    <link rel=\"manifest\" href=\"/manifest.json\" />\n    \n    <!-- Security and Privacy -->\n    <meta http-equiv=\"Content-Security-Policy\" content=\"\n      default-src 'self' https://github.com https://api.github.com;\n      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net;\n      style-src 'self' 'unsafe-inline';\n      img-src 'self' data: blob:;\n      media-src 'self' blob:;\n      connect-src 'self' https://*.blob.core.windows.net https://tfhub.dev https://storage.googleapis.com https://cdn.jsdelivr.net https://github.com https://api.github.com;\n      worker-src 'self' blob:;\n      form-action 'self' https://github.com;\n    \">\n    \n    <title>Home Security App</title>\n    <script type=\"module\" crossorigin src=\"/assets/index-6BPdfQg-.js\"></script>\n    <link rel=\"stylesheet\" crossorigin href=\"/assets/index-DanV3IS7.css\">\n  <link rel=\"manifest\" href=\"/manifest.webmanifest\"><script id=\"vite-plugin-pwa:register-sw\" src=\"/registerSW.js\"></script></head>\n  <body>\n    <div id=\"root\"></div>\n  </body>\n</html>"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 0,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_responseCacheStorageCacheName": "workbox-precache-v2-https://privaseeai.net/",
          "_serviceWorkerResponseSource": "cache-storage"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-10-16T22:13:30.127Z",
        "time": 5.608999999822117,
        "timings": {
          "blocked": 1.0319999997280538,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0,
          "wait": 1.457999999214895,
          "receive": 3.1190000008791685,
          "_blocked_queueing": 0.5579999997280538,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": 0.474,
          "_workerRespondWithSettled": 1.686
        }
      },
      {
        "_fromCache": "disk",
        "_initiator": {
          "type": "parser",
          "url": "https://privaseeai.net/?error=auth_failed",
          "lineNumber": 26
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "pageref": "page_2",
        "request": {
          "method": "GET",
          "url": "https://privaseeai.net/assets/index-6BPdfQg-.js",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Origin",
              "value": "https://privaseeai.net"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"macOS\""
            },
            {
              "name": "Referer",
              "value": "https://privaseeai.net/?error=auth_failed"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "public, max-age=0"
            },
            {
              "name": "ETag",
              "value": "W/\"1fdc61-199eebe1250\""
            },
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            },
            {
              "name": "Content-Length",
              "value": "2088033"
            },
            {
              "name": "Date",
              "value": "Thu, 16 Oct 2025 20:47:42 GMT"
            },
            {
              "name": "Content-Type",
              "value": "application/javascript; charset=UTF-8"
            },
            {
              "name": "Last-Modified",
              "value": "Thu, 16 Oct 2025 20:37:38 GMT"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 2088033,
            "mimeType": "application/javascript",
            "text": "dmFyIFFfPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgWl89KG4sZSx0KT0+ZSBpbiBuP1FfKG4sZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOm5bZV09dDt2YXIgRG49KG4sZSx0KT0+Wl8obix0eXBlb2YgZSE9InN5bWJvbCI/ZSsiIjplLHQpO2Z1bmN0aW9uIEpfKG4sZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IHM9ZVt0XTtpZih0eXBlb2YgcyE9InN0cmluZyImJiFBcnJheS5pc0FycmF5KHMpKXtmb3IoY29uc3QgciBpbiBzKWlmKHIhPT0iZGVmYXVsdCImJiEociBpbiBuKSl7Y29uc3Qgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHMscik7byYmT2JqZWN0LmRlZmluZVByb3BlcnR5KG4scixvLmdldD9vOntlbnVtZXJhYmxlOiEwLGdldDooKT0+c1tyXX0pfX19cmV0dXJuIE9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKX0oZnVuY3Rpb24oKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKS5yZWxMaXN0O2lmKGUmJmUuc3VwcG9ydHMmJmUuc3VwcG9ydHMoIm1vZHVsZXByZWxvYWQiKSlyZXR1cm47Zm9yKGNvbnN0IHIgb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGlua1tyZWw9Im1vZHVsZXByZWxvYWQiXScpKXMocik7bmV3IE11dGF0aW9uT2JzZXJ2ZXIocj0+e2Zvcihjb25zdCBvIG9mIHIpaWYoby50eXBlPT09ImNoaWxkTGlzdCIpZm9yKGNvbnN0IGkgb2Ygby5hZGRlZE5vZGVzKWkudGFnTmFtZT09PSJMSU5LIiYmaS5yZWw9PT0ibW9kdWxlcHJlbG9hZCImJnMoaSl9KS5vYnNlcnZlKGRvY3VtZW50LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pO2Z1bmN0aW9uIHQocil7Y29uc3Qgbz17fTtyZXR1cm4gci5pbnRlZ3JpdHkmJihvLmludGVncml0eT1yLmludGVncml0eSksci5yZWZlcnJlclBvbGljeSYmKG8ucmVmZXJyZXJQb2xpY3k9ci5yZWZlcnJlclBvbGljeSksci5jcm9zc09yaWdpbj09PSJ1c2UtY3JlZGVudGlhbHMiP28uY3JlZGVudGlhbHM9ImluY2x1ZGUiOnIuY3Jvc3NPcmlnaW49PT0iYW5vbnltb3VzIj9vLmNyZWRlbnRpYWxzPSJvbWl0IjpvLmNyZWRlbnRpYWxzPSJzYW1lLW9yaWdpbiIsb31mdW5jdGlvbiBzKHIpe2lmKHIuZXApcmV0dXJuO3IuZXA9ITA7Y29uc3Qgbz10KHIpO2ZldGNoKHIuaHJlZixvKX19KSgpO2Z1bmN0aW9uIE4xKG4pe3JldHVybiBuJiZuLl9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLCJkZWZhdWx0Iik/bi5kZWZhdWx0Om59ZnVuY3Rpb24gazEobil7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sIl9fZXNNb2R1bGUiKSlyZXR1cm4gbjt2YXIgZT1uLmRlZmF1bHQ7aWYodHlwZW9mIGU9PSJmdW5jdGlvbiIpe3ZhciB0PWZ1bmN0aW9uIHMoKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHM/UmVmbGVjdC5jb25zdHJ1Y3QoZSxhcmd1bWVudHMsdGhpcy5jb25zdHJ1Y3Rvcik6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3QucHJvdG90eXBlPWUucHJvdG90eXBlfWVsc2UgdD17fTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLE9iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24ocyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLHMpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHMsci5nZXQ/cjp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbltzXX19KX0pLHR9dmFyIHMwPXtleHBvcnRzOnt9fSx3Yz17fSxyMD17ZXhwb3J0czp7fX0sZXQ9e30sbms7ZnVuY3Rpb24gZU8oKXtpZihuaylyZXR1cm4gZXQ7bms9MTsvKioKICogQGxpY2Vuc2UgUmVhY3QKICogcmVhY3QucHJvZHVjdGlvbi5taW4uanMKICoKICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAqL3ZhciBuPVN5bWJvbC5mb3IoInJlYWN0LmVsZW1lbnQiKSxlPVN5bWJvbC5mb3IoInJlYWN0LnBvcnRhbCIpLHQ9U3ltYm9sLmZvcigicmVhY3QuZnJhZ21lbnQiKSxzPVN5bWJvbC5mb3IoInJlYWN0LnN0cmljdF9tb2RlIikscj1TeW1ib2wuZm9yKCJyZWFjdC5wcm9maWxlciIpLG89U3ltYm9sLmZvcigicmVhY3QucHJvdmlkZXIiKSxpPVN5bWJvbC5mb3IoInJlYWN0LmNvbnRleHQiKSxhPVN5bWJvbC5mb3IoInJlYWN0LmZvcndhcmRfcmVmIiksbD1TeW1ib2wuZm9yKCJyZWFjdC5zdXNwZW5zZSIpLGM9U3ltYm9sLmZvcigicmVhY3QubWVtbyIpLGg9U3ltYm9sLmZvcigicmVhY3QubGF6eSIpLHA9U3ltYm9sLml0ZXJhdG9yO2Z1bmN0aW9uIGYoQil7cmV0dXJuIEI9PT1udWxsfHx0eXBlb2YgQiE9Im9iamVjdCI/bnVsbDooQj1wJiZCW3BdfHxCWyJAQGl0ZXJhdG9yIl0sdHlwZW9mIEI9PSJmdW5jdGlvbiI/QjpudWxsKX12YXIgZz17aXNNb3VudGVkOmZ1bmN0aW9uKCl7cmV0dXJuITF9LGVucXVldWVGb3JjZVVwZGF0ZTpmdW5jdGlvbigpe30sZW5xdWV1ZVJlcGxhY2VTdGF0ZTpmdW5jdGlvbigpe30sZW5xdWV1ZVNldFN0YXRlOmZ1bmN0aW9uKCl7fX0seT1PYmplY3QuYXNzaWduLHc9e307ZnVuY3Rpb24gYihCLEgsaWUpe3RoaXMucHJvcHM9Qix0aGlzLmNvbnRleHQ9SCx0aGlzLnJlZnM9dyx0aGlzLnVwZGF0ZXI9aWV8fGd9Yi5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudD17fSxiLnByb3RvdHlwZS5zZXRTdGF0ZT1mdW5jdGlvbihCLEgpe2lmKHR5cGVvZiBCIT0ib2JqZWN0IiYmdHlwZW9mIEIhPSJmdW5jdGlvbiImJkIhPW51bGwpdGhyb3cgRXJyb3IoInNldFN0YXRlKC4uLik6IHRha2VzIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMgdG8gdXBkYXRlIG9yIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzLiIpO3RoaXMudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUodGhpcyxCLEgsInNldFN0YXRlIil9LGIucHJvdG90eXBlLmZvcmNlVXBkYXRlPWZ1bmN0aW9uKEIpe3RoaXMudXBkYXRlci5lbnF1ZXVlRm9yY2VVcGRhdGUodGhpcyxCLCJmb3JjZVVwZGF0ZSIpfTtmdW5jdGlvbiB2KCl7fXYucHJvdG90eXBlPWIucHJvdG90eXBlO2Z1bmN0aW9uIFMoQixILGllKXt0aGlzLnByb3BzPUIsdGhpcy5jb250ZXh0PUgsdGhpcy5yZWZzPXcsdGhpcy51cGRhdGVyPWllfHxnfXZhciAkPVMucHJvdG90eXBlPW5ldyB2OyQuY29uc3RydWN0b3I9Uyx5KCQsYi5wcm90b3R5cGUpLCQuaXNQdXJlUmVhY3RDb21wb25lbnQ9ITA7dmFyIGs9QXJyYXkuaXNBcnJheSxUPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksRD17Y3VycmVudDpudWxsfSxMPXtrZXk6ITAscmVmOiEwLF9fc2VsZjohMCxfX3NvdXJjZTohMH07ZnVuY3Rpb24geihCLEgsaWUpe3ZhciBwZSxkZT17fSxmZT1udWxsLHdlPW51bGw7aWYoSCE9bnVsbClmb3IocGUgaW4gSC5yZWYhPT12b2lkIDAmJih3ZT1ILnJlZiksSC5rZXkhPT12b2lkIDAmJihmZT0iIitILmtleSksSClULmNhbGwoSCxwZSkmJiFMLmhhc093blByb3BlcnR5KHBlKSYmKGRlW3BlXT1IW3BlXSk7dmFyIHZlPWFyZ3VtZW50cy5sZW5ndGgtMjtpZih2ZT09PTEpZGUuY2hpbGRyZW49aWU7ZWxzZSBpZigxPHZlKXtmb3IodmFyIGtlPUFycmF5KHZlKSxMZT0wO0xlPHZlO0xlKyspa2VbTGVdPWFyZ3VtZW50c1tMZSsyXTtkZS5jaGlsZHJlbj1rZX1pZihCJiZCLmRlZmF1bHRQcm9wcylmb3IocGUgaW4gdmU9Qi5kZWZhdWx0UHJvcHMsdmUpZGVbcGVdPT09dm9pZCAwJiYoZGVbcGVdPXZlW3BlXSk7cmV0dXJueyQkdHlwZW9mOm4sdHlwZTpCLGtleTpmZSxyZWY6d2UscHJvcHM6ZGUsX293bmVyOkQuY3VycmVudH19ZnVuY3Rpb24gRihCLEgpe3JldHVybnskJHR5cGVvZjpuLHR5cGU6Qi50eXBlLGtleTpILHJlZjpCLnJlZixwcm9wczpCLnByb3BzLF9vd25lcjpCLl9vd25lcn19ZnVuY3Rpb24gXyhCKXtyZXR1cm4gdHlwZW9mIEI9PSJvYmplY3QiJiZCIT09bnVsbCYmQi4kJHR5cGVvZj09PW59ZnVuY3Rpb24gRShCKXt2YXIgSD17Ij0iOiI9MCIsIjoiOiI9MiJ9O3JldHVybiIkIitCLnJlcGxhY2UoL1s9Ol0vZyxmdW5jdGlvbihpZSl7cmV0dXJuIEhbaWVdfSl9dmFyIE09L1wvKy9nO2Z1bmN0aW9uIFUoQixIKXtyZXR1cm4gdHlwZW9mIEI9PSJvYmplY3QiJiZCIT09bnVsbCYmQi5rZXkhPW51bGw/RSgiIitCLmtleSk6SC50b1N0cmluZygzNil9ZnVuY3Rpb24gWShCLEgsaWUscGUsZGUpe3ZhciBmZT10eXBlb2YgQjsoZmU9PT0idW5kZWZpbmVkInx8ZmU9PT0iYm9vbGVhbiIpJiYoQj1udWxsKTt2YXIgd2U9ITE7aWYoQj09PW51bGwpd2U9ITA7ZWxzZSBzd2l0Y2goZmUpe2Nhc2Uic3RyaW5nIjpjYXNlIm51bWJlciI6d2U9ITA7YnJlYWs7Y2FzZSJvYmplY3QiOnN3aXRjaChCLiQkdHlwZW9mKXtjYXNlIG46Y2FzZSBlOndlPSEwfX1pZih3ZSlyZXR1cm4gd2U9QixkZT1kZSh3ZSksQj1wZT09PSIiPyIuIitVKHdlLDApOnBlLGsoZGUpPyhpZT0iIixCIT1udWxsJiYoaWU9Qi5yZXBsYWNlKE0sIiQmLyIpKyIvIiksWShkZSxILGllLCIiLGZ1bmN0aW9uKExlKXtyZXR1cm4gTGV9KSk6ZGUhPW51bGwmJihfKGRlKSYmKGRlPUYoZGUsaWUrKCFkZS5rZXl8fHdlJiZ3ZS5rZXk9PT1kZS5rZXk/IiI6KCIiK2RlLmtleSkucmVwbGFjZShNLCIkJi8iKSsiLyIpK0IpKSxILnB1c2goZGUpKSwxO2lmKHdlPTAscGU9cGU9PT0iIj8iLiI6cGUrIjoiLGsoQikpZm9yKHZhciB2ZT0wO3ZlPEIubGVuZ3RoO3ZlKyspe2ZlPUJbdmVdO3ZhciBrZT1wZStVKGZlLHZlKTt3ZSs9WShmZSxILGllLGtlLGRlKX1lbHNlIGlmKGtlPWYoQiksdHlwZW9mIGtlPT0iZnVuY3Rpb24iKWZvcihCPWtlLmNhbGwoQiksdmU9MDshKGZlPUIubmV4dCgpKS5kb25lOylmZT1mZS52YWx1ZSxrZT1wZStVKGZlLHZlKyspLHdlKz1ZKGZlLEgsaWUsa2UsZGUpO2Vsc2UgaWYoZmU9PT0ib2JqZWN0Iil0aHJvdyBIPVN0cmluZyhCKSxFcnJvcigiT2JqZWN0cyBhcmUgbm90IHZhbGlkIGFzIGEgUmVhY3QgY2hpbGQgKGZvdW5kOiAiKyhIPT09IltvYmplY3QgT2JqZWN0XSI/Im9iamVjdCB3aXRoIGtleXMgeyIrT2JqZWN0LmtleXMoQikuam9pbigiLCAiKSsifSI6SCkrIikuIElmIHlvdSBtZWFudCB0byByZW5kZXIgYSBjb2xsZWN0aW9uIG9mIGNoaWxkcmVuLCB1c2UgYW4gYXJyYXkgaW5zdGVhZC4iKTtyZXR1cm4gd2V9ZnVuY3Rpb24gUShCLEgsaWUpe2lmKEI9PW51bGwpcmV0dXJuIEI7dmFyIHBlPVtdLGRlPTA7cmV0dXJuIFkoQixwZSwiIiwiIixmdW5jdGlvbihmZSl7cmV0dXJuIEguY2FsbChpZSxmZSxkZSsrKX0pLHBlfWZ1bmN0aW9uIG5lKEIpe2lmKEIuX3N0YXR1cz09PS0xKXt2YXIgSD1CLl9yZXN1bHQ7SD1IKCksSC50aGVuKGZ1bmN0aW9uKGllKXsoQi5fc3RhdHVzPT09MHx8Qi5fc3RhdHVzPT09LTEpJiYoQi5fc3RhdHVzPTEsQi5fcmVzdWx0PWllKX0sZnVuY3Rpb24oaWUpeyhCLl9zdGF0dXM9PT0wfHxCLl9zdGF0dXM9PT0tMSkmJihCLl9zdGF0dXM9MixCLl9yZXN1bHQ9aWUpfSksQi5fc3RhdHVzPT09LTEmJihCLl9zdGF0dXM9MCxCLl9yZXN1bHQ9SCl9aWYoQi5fc3RhdHVzPT09MSlyZXR1cm4gQi5fcmVzdWx0LmRlZmF1bHQ7dGhyb3cgQi5fcmVzdWx0fXZhciBzZT17Y3VycmVudDpudWxsfSxWPXt0cmFuc2l0aW9uOm51bGx9LEs9e1JlYWN0Q3VycmVudERpc3BhdGNoZXI6c2UsUmVhY3RDdXJyZW50QmF0Y2hDb25maWc6VixSZWFjdEN1cnJlbnRPd25lcjpEfTtmdW5jdGlvbiBxKCl7dGhyb3cgRXJyb3IoImFjdCguLi4pIGlzIG5vdCBzdXBwb3J0ZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMgb2YgUmVhY3QuIil9cmV0dXJuIGV0LkNoaWxkcmVuPXttYXA6USxmb3JFYWNoOmZ1bmN0aW9uKEIsSCxpZSl7UShCLGZ1bmN0aW9uKCl7SC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGllKX0sY291bnQ6ZnVuY3Rpb24oQil7dmFyIEg9MDtyZXR1cm4gUShCLGZ1bmN0aW9uKCl7SCsrfSksSH0sdG9BcnJheTpmdW5jdGlvbihCKXtyZXR1cm4gUShCLGZ1bmN0aW9uKEgpe3JldHVybiBIfSl8fFtdfSxvbmx5OmZ1bmN0aW9uKEIpe2lmKCFfKEIpKXRocm93IEVycm9yKCJSZWFjdC5DaGlsZHJlbi5vbmx5IGV4cGVjdGVkIHRvIHJlY2VpdmUgYSBzaW5nbGUgUmVhY3QgZWxlbWVudCBjaGlsZC4iKTtyZXR1cm4gQn19LGV0LkNvbXBvbmVudD1iLGV0LkZyYWdtZW50PXQsZXQuUHJvZmlsZXI9cixldC5QdXJlQ29tcG9uZW50PVMsZXQuU3RyaWN0TW9kZT1zLGV0LlN1c3BlbnNlPWwsZXQuX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQ9SyxldC5hY3Q9cSxldC5jbG9uZUVsZW1lbnQ9ZnVuY3Rpb24oQixILGllKXtpZihCPT1udWxsKXRocm93IEVycm9yKCJSZWFjdC5jbG9uZUVsZW1lbnQoLi4uKTogVGhlIGFyZ3VtZW50IG11c3QgYmUgYSBSZWFjdCBlbGVtZW50LCBidXQgeW91IHBhc3NlZCAiK0IrIi4iKTt2YXIgcGU9eSh7fSxCLnByb3BzKSxkZT1CLmtleSxmZT1CLnJlZix3ZT1CLl9vd25lcjtpZihIIT1udWxsKXtpZihILnJlZiE9PXZvaWQgMCYmKGZlPUgucmVmLHdlPUQuY3VycmVudCksSC5rZXkhPT12b2lkIDAmJihkZT0iIitILmtleSksQi50eXBlJiZCLnR5cGUuZGVmYXVsdFByb3BzKXZhciB2ZT1CLnR5cGUuZGVmYXVsdFByb3BzO2ZvcihrZSBpbiBIKVQuY2FsbChILGtlKSYmIUwuaGFzT3duUHJvcGVydHkoa2UpJiYocGVba2VdPUhba2VdPT09dm9pZCAwJiZ2ZSE9PXZvaWQgMD92ZVtrZV06SFtrZV0pfXZhciBrZT1hcmd1bWVudHMubGVuZ3RoLTI7aWYoa2U9PT0xKXBlLmNoaWxkcmVuPWllO2Vsc2UgaWYoMTxrZSl7dmU9QXJyYXkoa2UpO2Zvcih2YXIgTGU9MDtMZTxrZTtMZSsrKXZlW0xlXT1hcmd1bWVudHNbTGUrMl07cGUuY2hpbGRyZW49dmV9cmV0dXJueyQkdHlwZW9mOm4sdHlwZTpCLnR5cGUsa2V5OmRlLHJlZjpmZSxwcm9wczpwZSxfb3duZXI6d2V9fSxldC5jcmVhdGVDb250ZXh0PWZ1bmN0aW9uKEIpe3JldHVybiBCPXskJHR5cGVvZjppLF9jdXJyZW50VmFsdWU6QixfY3VycmVudFZhbHVlMjpCLF90aHJlYWRDb3VudDowLFByb3ZpZGVyOm51bGwsQ29uc3VtZXI6bnVsbCxfZGVmYXVsdFZhbHVlOm51bGwsX2dsb2JhbE5hbWU6bnVsbH0sQi5Qcm92aWRlcj17JCR0eXBlb2Y6byxfY29udGV4dDpCfSxCLkNvbnN1bWVyPUJ9LGV0LmNyZWF0ZUVsZW1lbnQ9eixldC5jcmVhdGVGYWN0b3J5PWZ1bmN0aW9uKEIpe3ZhciBIPXouYmluZChudWxsLEIpO3JldHVybiBILnR5cGU9QixIfSxldC5jcmVhdGVSZWY9ZnVuY3Rpb24oKXtyZXR1cm57Y3VycmVudDpudWxsfX0sZXQuZm9yd2FyZFJlZj1mdW5jdGlvbihCKXtyZXR1cm57JCR0eXBlb2Y6YSxyZW5kZXI6Qn19LGV0LmlzVmFsaWRFbGVtZW50PV8sZXQubGF6eT1mdW5jdGlvbihCKXtyZXR1cm57JCR0eXBlb2Y6aCxfcGF5bG9hZDp7X3N0YXR1czotMSxfcmVzdWx0OkJ9LF9pbml0Om5lfX0sZXQubWVtbz1mdW5jdGlvbihCLEgpe3JldHVybnskJHR5cGVvZjpjLHR5cGU6Qixjb21wYXJlOkg9PT12b2lkIDA/bnVsbDpIfX0sZXQuc3RhcnRUcmFuc2l0aW9uPWZ1bmN0aW9uKEIpe3ZhciBIPVYudHJhbnNpdGlvbjtWLnRyYW5zaXRpb249e307dHJ5e0IoKX1maW5hbGx5e1YudHJhbnNpdGlvbj1IfX0sZXQudW5zdGFibGVfYWN0PXEsZXQudXNlQ2FsbGJhY2s9ZnVuY3Rpb24oQixIKXtyZXR1cm4gc2UuY3VycmVudC51c2VDYWxsYmFjayhCLEgpfSxldC51c2VDb250ZXh0PWZ1bmN0aW9uKEIpe3JldHVybiBzZS5jdXJyZW50LnVzZUNvbnRleHQoQil9LGV0LnVzZURlYnVnVmFsdWU9ZnVuY3Rpb24oKXt9LGV0LnVzZURlZmVycmVkVmFsdWU9ZnVuY3Rpb24oQil7cmV0dXJuIHNlLmN1cnJlbnQudXNlRGVmZXJyZWRWYWx1ZShCKX0sZXQudXNlRWZmZWN0PWZ1bmN0aW9uKEIsSCl7cmV0dXJuIHNlLmN1cnJlbnQudXNlRWZmZWN0KEIsSCl9LGV0LnVzZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIHNlLmN1cnJlbnQudXNlSWQoKX0sZXQudXNlSW1wZXJhdGl2ZUhhbmRsZT1mdW5jdGlvbihCLEgsaWUpe3JldHVybiBzZS5jdXJyZW50LnVzZUltcGVyYXRpdmVIYW5kbGUoQixILGllKX0sZXQudXNlSW5zZXJ0aW9uRWZmZWN0PWZ1bmN0aW9uKEIsSCl7cmV0dXJuIHNlLmN1cnJlbnQudXNlSW5zZXJ0aW9uRWZmZWN0KEIsSCl9LGV0LnVzZUxheW91dEVmZmVjdD1mdW5jdGlvbihCLEgpe3JldHVybiBzZS5jdXJyZW50LnVzZUxheW91dEVmZmVjdChCLEgpfSxldC51c2VNZW1vPWZ1bmN0aW9uKEIsSCl7cmV0dXJuIHNlLmN1cnJlbnQudXNlTWVtbyhCLEgpfSxldC51c2VSZWR1Y2VyPWZ1bmN0aW9uKEIsSCxpZSl7cmV0dXJuIHNlLmN1cnJlbnQudXNlUmVkdWNlcihCLEgsaWUpfSxldC51c2VSZWY9ZnVuY3Rpb24oQil7cmV0dXJuIHNlLmN1cnJlbnQudXNlUmVmKEIpfSxldC51c2VTdGF0ZT1mdW5jdGlvbihCKXtyZXR1cm4gc2UuY3VycmVudC51c2VTdGF0ZShCKX0sZXQudXNlU3luY0V4dGVybmFsU3RvcmU9ZnVuY3Rpb24oQixILGllKXtyZXR1cm4gc2UuY3VycmVudC51c2VTeW5jRXh0ZXJuYWxTdG9yZShCLEgsaWUpfSxldC51c2VUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHNlLmN1cnJlbnQudXNlVHJhbnNpdGlvbigpfSxldC52ZXJzaW9uPSIxOC4zLjEiLGV0fXZhciBzaztmdW5jdGlvbiBDMSgpe3JldHVybiBza3x8KHNrPTEscjAuZXhwb3J0cz1lTygpKSxyMC5leHBvcnRzfS8qKgogKiBAbGljZW5zZSBSZWFjdAogKiByZWFjdC1qc3gtcnVudGltZS5wcm9kdWN0aW9uLm1pbi5qcwogKgogKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy4KICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICovdmFyIHJrO2Z1bmN0aW9uIHRPKCl7aWYocmspcmV0dXJuIHdjO3JrPTE7dmFyIG49QzEoKSxlPVN5bWJvbC5mb3IoInJlYWN0LmVsZW1lbnQiKSx0PVN5bWJvbC5mb3IoInJlYWN0LmZyYWdtZW50Iikscz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHI9bi5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRC5SZWFjdEN1cnJlbnRPd25lcixvPXtrZXk6ITAscmVmOiEwLF9fc2VsZjohMCxfX3NvdXJjZTohMH07ZnVuY3Rpb24gaShhLGwsYyl7dmFyIGgscD17fSxmPW51bGwsZz1udWxsO2MhPT12b2lkIDAmJihmPSIiK2MpLGwua2V5IT09dm9pZCAwJiYoZj0iIitsLmtleSksbC5yZWYhPT12b2lkIDAmJihnPWwucmVmKTtmb3IoaCBpbiBsKXMuY2FsbChsLGgpJiYhby5oYXNPd25Qcm9wZXJ0eShoKSYmKHBbaF09bFtoXSk7aWYoYSYmYS5kZWZhdWx0UHJvcHMpZm9yKGggaW4gbD1hLmRlZmF1bHRQcm9wcyxsKXBbaF09PT12b2lkIDAmJihwW2hdPWxbaF0pO3JldHVybnskJHR5cGVvZjplLHR5cGU6YSxrZXk6ZixyZWY6Zyxwcm9wczpwLF9vd25lcjpyLmN1cnJlbnR9fXJldHVybiB3Yy5GcmFnbWVudD10LHdjLmpzeD1pLHdjLmpzeHM9aSx3Y312YXIgb2s7ZnVuY3Rpb24gbk8oKXtyZXR1cm4gb2t8fChvaz0xLHMwLmV4cG9ydHM9dE8oKSksczAuZXhwb3J0c312YXIgUD1uTygpLFVlPUMxKCk7Y29uc3Qgc089TjEoVWUpO3ZhciBxcD17fSxvMD17ZXhwb3J0czp7fX0sZnM9e30saTA9e2V4cG9ydHM6e319LGEwPXt9Oy8qKgogKiBAbGljZW5zZSBSZWFjdAogKiBzY2hlZHVsZXIucHJvZHVjdGlvbi5taW4uanMKICoKICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAqL3ZhciBpaztmdW5jdGlvbiByTygpe3JldHVybiBpa3x8KGlrPTEsKGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGUoVixLKXt2YXIgcT1WLmxlbmd0aDtWLnB1c2goSyk7ZTpmb3IoOzA8cTspe3ZhciBCPXEtMT4+PjEsSD1WW0JdO2lmKDA8cihILEspKVZbQl09SyxWW3FdPUgscT1CO2Vsc2UgYnJlYWsgZX19ZnVuY3Rpb24gdChWKXtyZXR1cm4gVi5sZW5ndGg9PT0wP251bGw6VlswXX1mdW5jdGlvbiBzKFYpe2lmKFYubGVuZ3RoPT09MClyZXR1cm4gbnVsbDt2YXIgSz1WWzBdLHE9Vi5wb3AoKTtpZihxIT09Syl7VlswXT1xO2U6Zm9yKHZhciBCPTAsSD1WLmxlbmd0aCxpZT1IPj4+MTtCPGllOyl7dmFyIHBlPTIqKEIrMSktMSxkZT1WW3BlXSxmZT1wZSsxLHdlPVZbZmVdO2lmKDA+cihkZSxxKSlmZTxIJiYwPnIod2UsZGUpPyhWW0JdPXdlLFZbZmVdPXEsQj1mZSk6KFZbQl09ZGUsVltwZV09cSxCPXBlKTtlbHNlIGlmKGZlPEgmJjA+cih3ZSxxKSlWW0JdPXdlLFZbZmVdPXEsQj1mZTtlbHNlIGJyZWFrIGV9fXJldHVybiBLfWZ1bmN0aW9uIHIoVixLKXt2YXIgcT1WLnNvcnRJbmRleC1LLnNvcnRJbmRleDtyZXR1cm4gcSE9PTA/cTpWLmlkLUsuaWR9aWYodHlwZW9mIHBlcmZvcm1hbmNlPT0ib2JqZWN0IiYmdHlwZW9mIHBlcmZvcm1hbmNlLm5vdz09ImZ1bmN0aW9uIil7dmFyIG89cGVyZm9ybWFuY2U7bi51bnN0YWJsZV9ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gby5ub3coKX19ZWxzZXt2YXIgaT1EYXRlLGE9aS5ub3coKTtuLnVuc3RhYmxlX25vdz1mdW5jdGlvbigpe3JldHVybiBpLm5vdygpLWF9fXZhciBsPVtdLGM9W10saD0xLHA9bnVsbCxmPTMsZz0hMSx5PSExLHc9ITEsYj10eXBlb2Ygc2V0VGltZW91dD09ImZ1bmN0aW9uIj9zZXRUaW1lb3V0Om51bGwsdj10eXBlb2YgY2xlYXJUaW1lb3V0PT0iZnVuY3Rpb24iP2NsZWFyVGltZW91dDpudWxsLFM9dHlwZW9mIHNldEltbWVkaWF0ZTwidSI/c2V0SW1tZWRpYXRlOm51bGw7dHlwZW9mIG5hdmlnYXRvcjwidSImJm5hdmlnYXRvci5zY2hlZHVsaW5nIT09dm9pZCAwJiZuYXZpZ2F0b3Iuc2NoZWR1bGluZy5pc0lucHV0UGVuZGluZyE9PXZvaWQgMCYmbmF2aWdhdG9yLnNjaGVkdWxpbmcuaXNJbnB1dFBlbmRpbmcuYmluZChuYXZpZ2F0b3Iuc2NoZWR1bGluZyk7ZnVuY3Rpb24gJChWKXtmb3IodmFyIEs9dChjKTtLIT09bnVsbDspe2lmKEsuY2FsbGJhY2s9PT1udWxsKXMoYyk7ZWxzZSBpZihLLnN0YXJ0VGltZTw9VilzKGMpLEsuc29ydEluZGV4PUsuZXhwaXJhdGlvblRpbWUsZShsLEspO2Vsc2UgYnJlYWs7Sz10KGMpfX1mdW5jdGlvbiBrKFYpe2lmKHc9ITEsJChWKSwheSlpZih0KGwpIT09bnVsbCl5PSEwLG5lKFQpO2Vsc2V7dmFyIEs9dChjKTtLIT09bnVsbCYmc2UoayxLLnN0YXJ0VGltZS1WKX19ZnVuY3Rpb24gVChWLEspe3k9ITEsdyYmKHc9ITEsdih6KSx6PS0xKSxnPSEwO3ZhciBxPWY7dHJ5e2ZvcigkKEspLHA9dChsKTtwIT09bnVsbCYmKCEocC5leHBpcmF0aW9uVGltZT5LKXx8ViYmIUUoKSk7KXt2YXIgQj1wLmNhbGxiYWNrO2lmKHR5cGVvZiBCPT0iZnVuY3Rpb24iKXtwLmNhbGxiYWNrPW51bGwsZj1wLnByaW9yaXR5TGV2ZWw7dmFyIEg9QihwLmV4cGlyYXRpb25UaW1lPD1LKTtLPW4udW5zdGFibGVfbm93KCksdHlwZW9mIEg9PSJmdW5jdGlvbiI/cC5jYWxsYmFjaz1IOnA9PT10KGwpJiZzKGwpLCQoSyl9ZWxzZSBzKGwpO3A9dChsKX1pZihwIT09bnVsbCl2YXIgaWU9ITA7ZWxzZXt2YXIgcGU9dChjKTtwZSE9PW51bGwmJnNlKGsscGUuc3RhcnRUaW1lLUspLGllPSExfXJldHVybiBpZX1maW5hbGx5e3A9bnVsbCxmPXEsZz0hMX19dmFyIEQ9ITEsTD1udWxsLHo9LTEsRj01LF89LTE7ZnVuY3Rpb24gRSgpe3JldHVybiEobi51bnN0YWJsZV9ub3coKS1fPEYpfWZ1bmN0aW9uIE0oKXtpZihMIT09bnVsbCl7dmFyIFY9bi51bnN0YWJsZV9ub3coKTtfPVY7dmFyIEs9ITA7dHJ5e0s9TCghMCxWKX1maW5hbGx5e0s/VSgpOihEPSExLEw9bnVsbCl9fWVsc2UgRD0hMX12YXIgVTtpZih0eXBlb2YgUz09ImZ1bmN0aW9uIilVPWZ1bmN0aW9uKCl7UyhNKX07ZWxzZSBpZih0eXBlb2YgTWVzc2FnZUNoYW5uZWw8InUiKXt2YXIgWT1uZXcgTWVzc2FnZUNoYW5uZWwsUT1ZLnBvcnQyO1kucG9ydDEub25tZXNzYWdlPU0sVT1mdW5jdGlvbigpe1EucG9zdE1lc3NhZ2UobnVsbCl9fWVsc2UgVT1mdW5jdGlvbigpe2IoTSwwKX07ZnVuY3Rpb24gbmUoVil7TD1WLER8fChEPSEwLFUoKSl9ZnVuY3Rpb24gc2UoVixLKXt6PWIoZnVuY3Rpb24oKXtWKG4udW5zdGFibGVfbm93KCkpfSxLKX1uLnVuc3RhYmxlX0lkbGVQcmlvcml0eT01LG4udW5zdGFibGVfSW1tZWRpYXRlUHJpb3JpdHk9MSxuLnVuc3RhYmxlX0xvd1ByaW9yaXR5PTQsbi51bnN0YWJsZV9Ob3JtYWxQcmlvcml0eT0zLG4udW5zdGFibGVfUHJvZmlsaW5nPW51bGwsbi51bnN0YWJsZV9Vc2VyQmxvY2tpbmdQcmlvcml0eT0yLG4udW5zdGFibGVfY2FuY2VsQ2FsbGJhY2s9ZnVuY3Rpb24oVil7Vi5jYWxsYmFjaz1udWxsfSxuLnVuc3RhYmxlX2NvbnRpbnVlRXhlY3V0aW9uPWZ1bmN0aW9uKCl7eXx8Z3x8KHk9ITAsbmUoVCkpfSxuLnVuc3RhYmxlX2ZvcmNlRnJhbWVSYXRlPWZ1bmN0aW9uKFYpezA+Vnx8MTI1PFY/Y29uc29sZS5lcnJvcigiZm9yY2VGcmFtZVJhdGUgdGFrZXMgYSBwb3NpdGl2ZSBpbnQgYmV0d2VlbiAwIGFuZCAxMjUsIGZvcmNpbmcgZnJhbWUgcmF0ZXMgaGlnaGVyIHRoYW4gMTI1IGZwcyBpcyBub3Qgc3VwcG9ydGVkIik6Rj0wPFY/TWF0aC5mbG9vcigxZTMvVik6NX0sbi51bnN0YWJsZV9nZXRDdXJyZW50UHJpb3JpdHlMZXZlbD1mdW5jdGlvbigpe3JldHVybiBmfSxuLnVuc3RhYmxlX2dldEZpcnN0Q2FsbGJhY2tOb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHQobCl9LG4udW5zdGFibGVfbmV4dD1mdW5jdGlvbihWKXtzd2l0Y2goZil7Y2FzZSAxOmNhc2UgMjpjYXNlIDM6dmFyIEs9MzticmVhaztkZWZhdWx0Oks9Zn12YXIgcT1mO2Y9Szt0cnl7cmV0dXJuIFYoKX1maW5hbGx5e2Y9cX19LG4udW5zdGFibGVfcGF1c2VFeGVjdXRpb249ZnVuY3Rpb24oKXt9LG4udW5zdGFibGVfcmVxdWVzdFBhaW50PWZ1bmN0aW9uKCl7fSxuLnVuc3RhYmxlX3J1bldpdGhQcmlvcml0eT1mdW5jdGlvbihWLEspe3N3aXRjaChWKXtjYXNlIDE6Y2FzZSAyOmNhc2UgMzpjYXNlIDQ6Y2FzZSA1OmJyZWFrO2RlZmF1bHQ6Vj0zfXZhciBxPWY7Zj1WO3RyeXtyZXR1cm4gSygpfWZpbmFsbHl7Zj1xfX0sbi51bnN0YWJsZV9zY2hlZHVsZUNhbGxiYWNrPWZ1bmN0aW9uKFYsSyxxKXt2YXIgQj1uLnVuc3RhYmxlX25vdygpO3N3aXRjaCh0eXBlb2YgcT09Im9iamVjdCImJnEhPT1udWxsPyhxPXEuZGVsYXkscT10eXBlb2YgcT09Im51bWJlciImJjA8cT9CK3E6Qik6cT1CLFYpe2Nhc2UgMTp2YXIgSD0tMTticmVhaztjYXNlIDI6SD0yNTA7YnJlYWs7Y2FzZSA1Okg9MTA3Mzc0MTgyMzticmVhaztjYXNlIDQ6SD0xZTQ7YnJlYWs7ZGVmYXVsdDpIPTVlM31yZXR1cm4gSD1xK0gsVj17aWQ6aCsrLGNhbGxiYWNrOksscHJpb3JpdHlMZXZlbDpWLHN0YXJ0VGltZTpxLGV4cGlyYXRpb25UaW1lOkgsc29ydEluZGV4Oi0xfSxxPkI/KFYuc29ydEluZGV4PXEsZShjLFYpLHQobCk9PT1udWxsJiZWPT09dChjKSYmKHc/KHYoeiksej0tMSk6dz0hMCxzZShrLHEtQikpKTooVi5zb3J0SW5kZXg9SCxlKGwsVikseXx8Z3x8KHk9ITAsbmUoVCkpKSxWfSxuLnVuc3RhYmxlX3Nob3VsZFlpZWxkPUUsbi51bnN0YWJsZV93cmFwQ2FsbGJhY2s9ZnVuY3Rpb24oVil7dmFyIEs9ZjtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcT1mO2Y9Szt0cnl7cmV0dXJuIFYuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZpbmFsbHl7Zj1xfX19fSkoYTApKSxhMH12YXIgYWs7ZnVuY3Rpb24gb08oKXtyZXR1cm4gYWt8fChhaz0xLGkwLmV4cG9ydHM9ck8oKSksaTAuZXhwb3J0c30vKioKICogQGxpY2Vuc2UgUmVhY3QKICogcmVhY3QtZG9tLnByb2R1Y3Rpb24ubWluLmpzCiAqCiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLgogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi92YXIgbGs7ZnVuY3Rpb24gaU8oKXtpZihsaylyZXR1cm4gZnM7bGs9MTt2YXIgbj1DMSgpLGU9b08oKTtmdW5jdGlvbiB0KHUpe2Zvcih2YXIgZD0iaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2Vycm9yLWRlY29kZXIuaHRtbD9pbnZhcmlhbnQ9Iit1LG09MTttPGFyZ3VtZW50cy5sZW5ndGg7bSsrKWQrPSImYXJnc1tdPSIrZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3VtZW50c1ttXSk7cmV0dXJuIk1pbmlmaWVkIFJlYWN0IGVycm9yICMiK3UrIjsgdmlzaXQgIitkKyIgZm9yIHRoZSBmdWxsIG1lc3NhZ2Ugb3IgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50IGZvciBmdWxsIGVycm9ycyBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLiJ9dmFyIHM9bmV3IFNldCxyPXt9O2Z1bmN0aW9uIG8odSxkKXtpKHUsZCksaSh1KyJDYXB0dXJlIixkKX1mdW5jdGlvbiBpKHUsZCl7Zm9yKHJbdV09ZCx1PTA7dTxkLmxlbmd0aDt1Kyspcy5hZGQoZFt1XSl9dmFyIGE9ISh0eXBlb2Ygd2luZG93PiJ1Inx8dHlwZW9mIHdpbmRvdy5kb2N1bWVudD4idSJ8fHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudD4idSIpLGw9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxjPS9eWzpBLVpfYS16XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMkZGXHUwMzcwLVx1MDM3RFx1MDM3Ri1cdTFGRkZcdTIwMEMtXHUyMDBEXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkRdWzpBLVpfYS16XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMkZGXHUwMzcwLVx1MDM3RFx1MDM3Ri1cdTFGRkZcdTIwMEMtXHUyMDBEXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkRcLS4wLTlcdTAwQjdcdTAzMDAtXHUwMzZGXHUyMDNGLVx1MjA0MF0qJC8saD17fSxwPXt9O2Z1bmN0aW9uIGYodSl7cmV0dXJuIGwuY2FsbChwLHUpPyEwOmwuY2FsbChoLHUpPyExOmMudGVzdCh1KT9wW3VdPSEwOihoW3VdPSEwLCExKX1mdW5jdGlvbiBnKHUsZCxtLHgpe2lmKG0hPT1udWxsJiZtLnR5cGU9PT0wKXJldHVybiExO3N3aXRjaCh0eXBlb2YgZCl7Y2FzZSJmdW5jdGlvbiI6Y2FzZSJzeW1ib2wiOnJldHVybiEwO2Nhc2UiYm9vbGVhbiI6cmV0dXJuIHg/ITE6bSE9PW51bGw/IW0uYWNjZXB0c0Jvb2xlYW5zOih1PXUudG9Mb3dlckNhc2UoKS5zbGljZSgwLDUpLHUhPT0iZGF0YS0iJiZ1IT09ImFyaWEtIik7ZGVmYXVsdDpyZXR1cm4hMX19ZnVuY3Rpb24geSh1LGQsbSx4KXtpZihkPT09bnVsbHx8dHlwZW9mIGQ+InUifHxnKHUsZCxtLHgpKXJldHVybiEwO2lmKHgpcmV0dXJuITE7aWYobSE9PW51bGwpc3dpdGNoKG0udHlwZSl7Y2FzZSAzOnJldHVybiFkO2Nhc2UgNDpyZXR1cm4gZD09PSExO2Nhc2UgNTpyZXR1cm4gaXNOYU4oZCk7Y2FzZSA2OnJldHVybiBpc05hTihkKXx8MT5kfXJldHVybiExfWZ1bmN0aW9uIHcodSxkLG0seCxOLEMsUil7dGhpcy5hY2NlcHRzQm9vbGVhbnM9ZD09PTJ8fGQ9PT0zfHxkPT09NCx0aGlzLmF0dHJpYnV0ZU5hbWU9eCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1OLHRoaXMubXVzdFVzZVByb3BlcnR5PW0sdGhpcy5wcm9wZXJ0eU5hbWU9dSx0aGlzLnR5cGU9ZCx0aGlzLnNhbml0aXplVVJMPUMsdGhpcy5yZW1vdmVFbXB0eVN0cmluZz1SfXZhciBiPXt9OyJjaGlsZHJlbiBkYW5nZXJvdXNseVNldElubmVySFRNTCBkZWZhdWx0VmFsdWUgZGVmYXVsdENoZWNrZWQgaW5uZXJIVE1MIHN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyBzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmcgc3R5bGUiLnNwbGl0KCIgIikuZm9yRWFjaChmdW5jdGlvbih1KXtiW3VdPW5ldyB3KHUsMCwhMSx1LG51bGwsITEsITEpfSksW1siYWNjZXB0Q2hhcnNldCIsImFjY2VwdC1jaGFyc2V0Il0sWyJjbGFzc05hbWUiLCJjbGFzcyJdLFsiaHRtbEZvciIsImZvciJdLFsiaHR0cEVxdWl2IiwiaHR0cC1lcXVpdiJdXS5mb3JFYWNoKGZ1bmN0aW9uKHUpe3ZhciBkPXVbMF07YltkXT1uZXcgdyhkLDEsITEsdVsxXSxudWxsLCExLCExKX0pLFsiY29udGVudEVkaXRhYmxlIiwiZHJhZ2dhYmxlIiwic3BlbGxDaGVjayIsInZhbHVlIl0uZm9yRWFjaChmdW5jdGlvbih1KXtiW3VdPW5ldyB3KHUsMiwhMSx1LnRvTG93ZXJDYXNlKCksbnVsbCwhMSwhMSl9KSxbImF1dG9SZXZlcnNlIiwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZCIsImZvY3VzYWJsZSIsInByZXNlcnZlQWxwaGEiXS5mb3JFYWNoKGZ1bmN0aW9uKHUpe2JbdV09bmV3IHcodSwyLCExLHUsbnVsbCwhMSwhMSl9KSwiYWxsb3dGdWxsU2NyZWVuIGFzeW5jIGF1dG9Gb2N1cyBhdXRvUGxheSBjb250cm9scyBkZWZhdWx0IGRlZmVyIGRpc2FibGVkIGRpc2FibGVQaWN0dXJlSW5QaWN0dXJlIGRpc2FibGVSZW1vdGVQbGF5YmFjayBmb3JtTm9WYWxpZGF0ZSBoaWRkZW4gbG9vcCBub01vZHVsZSBub1ZhbGlkYXRlIG9wZW4gcGxheXNJbmxpbmUgcmVhZE9ubHkgcmVxdWlyZWQgcmV2ZXJzZWQgc2NvcGVkIHNlYW1sZXNzIGl0ZW1TY29wZSIuc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKHUpe2JbdV09bmV3IHcodSwzLCExLHUudG9Mb3dlckNhc2UoKSxudWxsLCExLCExKX0pLFsiY2hlY2tlZCIsIm11bHRpcGxlIiwibXV0ZWQiLCJzZWxlY3RlZCJdLmZvckVhY2goZnVuY3Rpb24odSl7Ylt1XT1uZXcgdyh1LDMsITAsdSxudWxsLCExLCExKX0pLFsiY2FwdHVyZSIsImRvd25sb2FkIl0uZm9yRWFjaChmdW5jdGlvbih1KXtiW3VdPW5ldyB3KHUsNCwhMSx1LG51bGwsITEsITEpfSksWyJjb2xzIiwicm93cyIsInNpemUiLCJzcGFuIl0uZm9yRWFjaChmdW5jdGlvbih1KXtiW3VdPW5ldyB3KHUsNiwhMSx1LG51bGwsITEsITEpfSksWyJyb3dTcGFuIiwic3RhcnQiXS5mb3JFYWNoKGZ1bmN0aW9uKHUpe2JbdV09bmV3IHcodSw1LCExLHUudG9Mb3dlckNhc2UoKSxudWxsLCExLCExKX0pO3ZhciB2PS9bXC06XShbYS16XSkvZztmdW5jdGlvbiBTKHUpe3JldHVybiB1WzFdLnRvVXBwZXJDYXNlKCl9ImFjY2VudC1oZWlnaHQgYWxpZ25tZW50LWJhc2VsaW5lIGFyYWJpYy1mb3JtIGJhc2VsaW5lLXNoaWZ0IGNhcC1oZWlnaHQgY2xpcC1wYXRoIGNsaXAtcnVsZSBjb2xvci1pbnRlcnBvbGF0aW9uIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyBjb2xvci1wcm9maWxlIGNvbG9yLXJlbmRlcmluZyBkb21pbmFudC1iYXNlbGluZSBlbmFibGUtYmFja2dyb3VuZCBmaWxsLW9wYWNpdHkgZmlsbC1ydWxlIGZsb29kLWNvbG9yIGZsb29kLW9wYWNpdHkgZm9udC1mYW1pbHkgZm9udC1zaXplIGZvbnQtc2l6ZS1hZGp1c3QgZm9udC1zdHJldGNoIGZvbnQtc3R5bGUgZm9udC12YXJpYW50IGZvbnQtd2VpZ2h0IGdseXBoLW5hbWUgZ2x5cGgtb3JpZW50YXRpb24taG9yaXpvbnRhbCBnbHlwaC1vcmllbnRhdGlvbi12ZXJ0aWNhbCBob3Jpei1hZHYteCBob3Jpei1vcmlnaW4teCBpbWFnZS1yZW5kZXJpbmcgbGV0dGVyLXNwYWNpbmcgbGlnaHRpbmctY29sb3IgbWFya2VyLWVuZCBtYXJrZXItbWlkIG1hcmtlci1zdGFydCBvdmVybGluZS1wb3NpdGlvbiBvdmVybGluZS10aGlja25lc3MgcGFpbnQtb3JkZXIgcGFub3NlLTEgcG9pbnRlci1ldmVudHMgcmVuZGVyaW5nLWludGVudCBzaGFwZS1yZW5kZXJpbmcgc3RvcC1jb2xvciBzdG9wLW9wYWNpdHkgc3RyaWtldGhyb3VnaC1wb3NpdGlvbiBzdHJpa2V0aHJvdWdoLXRoaWNrbmVzcyBzdHJva2UtZGFzaGFycmF5IHN0cm9rZS1kYXNob2Zmc2V0IHN0cm9rZS1saW5lY2FwIHN0cm9rZS1saW5lam9pbiBzdHJva2UtbWl0ZXJsaW1pdCBzdHJva2Utb3BhY2l0eSBzdHJva2Utd2lkdGggdGV4dC1hbmNob3IgdGV4dC1kZWNvcmF0aW9uIHRleHQtcmVuZGVyaW5nIHVuZGVybGluZS1wb3NpdGlvbiB1bmRlcmxpbmUtdGhpY2tuZXNzIHVuaWNvZGUtYmlkaSB1bmljb2RlLXJhbmdlIHVuaXRzLXBlci1lbSB2LWFscGhhYmV0aWMgdi1oYW5naW5nIHYtaWRlb2dyYXBoaWMgdi1tYXRoZW1hdGljYWwgdmVjdG9yLWVmZmVjdCB2ZXJ0LWFkdi15IHZlcnQtb3JpZ2luLXggdmVydC1vcmlnaW4teSB3b3JkLXNwYWNpbmcgd3JpdGluZy1tb2RlIHhtbG5zOnhsaW5rIHgtaGVpZ2h0Ii5zcGxpdCgiICIpLmZvckVhY2goZnVuY3Rpb24odSl7dmFyIGQ9dS5yZXBsYWNlKHYsUyk7YltkXT1uZXcgdyhkLDEsITEsdSxudWxsLCExLCExKX0pLCJ4bGluazphY3R1YXRlIHhsaW5rOmFyY3JvbGUgeGxpbms6cm9sZSB4bGluazpzaG93IHhsaW5rOnRpdGxlIHhsaW5rOnR5cGUiLnNwbGl0KCIgIikuZm9yRWFjaChmdW5jdGlvbih1KXt2YXIgZD11LnJlcGxhY2UodixTKTtiW2RdPW5ldyB3KGQsMSwhMSx1LCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwhMSwhMSl9KSxbInhtbDpiYXNlIiwieG1sOmxhbmciLCJ4bWw6c3BhY2UiXS5mb3JFYWNoKGZ1bmN0aW9uKHUpe3ZhciBkPXUucmVwbGFjZSh2LFMpO2JbZF09bmV3IHcoZCwxLCExLHUsImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSIsITEsITEpfSksWyJ0YWJJbmRleCIsImNyb3NzT3JpZ2luIl0uZm9yRWFjaChmdW5jdGlvbih1KXtiW3VdPW5ldyB3KHUsMSwhMSx1LnRvTG93ZXJDYXNlKCksbnVsbCwhMSwhMSl9KSxiLnhsaW5rSHJlZj1uZXcgdygieGxpbmtIcmVmIiwxLCExLCJ4bGluazpocmVmIiwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsITAsITEpLFsic3JjIiwiaHJlZiIsImFjdGlvbiIsImZvcm1BY3Rpb24iXS5mb3JFYWNoKGZ1bmN0aW9uKHUpe2JbdV09bmV3IHcodSwxLCExLHUudG9Mb3dlckNhc2UoKSxudWxsLCEwLCEwKX0pO2Z1bmN0aW9uICQodSxkLG0seCl7dmFyIE49Yi5oYXNPd25Qcm9wZXJ0eShkKT9iW2RdOm51bGw7KE4hPT1udWxsP04udHlwZSE9PTA6eHx8ISgyPGQubGVuZ3RoKXx8ZFswXSE9PSJvIiYmZFswXSE9PSJPInx8ZFsxXSE9PSJuIiYmZFsxXSE9PSJOIikmJih5KGQsbSxOLHgpJiYobT1udWxsKSx4fHxOPT09bnVsbD9mKGQpJiYobT09PW51bGw/dS5yZW1vdmVBdHRyaWJ1dGUoZCk6dS5zZXRBdHRyaWJ1dGUoZCwiIittKSk6Ti5tdXN0VXNlUHJvcGVydHk/dVtOLnByb3BlcnR5TmFtZV09bT09PW51bGw/Ti50eXBlPT09Mz8hMToiIjptOihkPU4uYXR0cmlidXRlTmFtZSx4PU4uYXR0cmlidXRlTmFtZXNwYWNlLG09PT1udWxsP3UucmVtb3ZlQXR0cmlidXRlKGQpOihOPU4udHlwZSxtPU49PT0zfHxOPT09NCYmbT09PSEwPyIiOiIiK20seD91LnNldEF0dHJpYnV0ZU5TKHgsZCxtKTp1LnNldEF0dHJpYnV0ZShkLG0pKSkpfXZhciBrPW4uX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQsVD1TeW1ib2wuZm9yKCJyZWFjdC5lbGVtZW50IiksRD1TeW1ib2wuZm9yKCJyZWFjdC5wb3J0YWwiKSxMPVN5bWJvbC5mb3IoInJlYWN0LmZyYWdtZW50Iiksej1TeW1ib2wuZm9yKCJyZWFjdC5zdHJpY3RfbW9kZSIpLEY9U3ltYm9sLmZvcigicmVhY3QucHJvZmlsZXIiKSxfPVN5bWJvbC5mb3IoInJlYWN0LnByb3ZpZGVyIiksRT1TeW1ib2wuZm9yKCJyZWFjdC5jb250ZXh0IiksTT1TeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpLFU9U3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2UiKSxZPVN5bWJvbC5mb3IoInJlYWN0LnN1c3BlbnNlX2xpc3QiKSxRPVN5bWJvbC5mb3IoInJlYWN0Lm1lbW8iKSxuZT1TeW1ib2wuZm9yKCJyZWFjdC5sYXp5Iiksc2U9U3ltYm9sLmZvcigicmVhY3Qub2Zmc2NyZWVuIiksVj1TeW1ib2wuaXRlcmF0b3I7ZnVuY3Rpb24gSyh1KXtyZXR1cm4gdT09PW51bGx8fHR5cGVvZiB1IT0ib2JqZWN0Ij9udWxsOih1PVYmJnVbVl18fHVbIkBAaXRlcmF0b3IiXSx0eXBlb2YgdT09ImZ1bmN0aW9uIj91Om51bGwpfXZhciBxPU9iamVjdC5hc3NpZ24sQjtmdW5jdGlvbiBIKHUpe2lmKEI9PT12b2lkIDApdHJ5e3Rocm93IEVycm9yKCl9Y2F0Y2gobSl7dmFyIGQ9bS5zdGFjay50cmltKCkubWF0Y2goL1xuKCAqKGF0ICk/KS8pO0I9ZCYmZFsxXXx8IiJ9cmV0dXJuYApgK0IrdX12YXIgaWU9ITE7ZnVuY3Rpb24gcGUodSxkKXtpZighdXx8aWUpcmV0dXJuIiI7aWU9ITA7dmFyIG09RXJyb3IucHJlcGFyZVN0YWNrVHJhY2U7RXJyb3IucHJlcGFyZVN0YWNrVHJhY2U9dm9pZCAwO3RyeXtpZihkKWlmKGQ9ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZC5wcm90b3R5cGUsInByb3BzIix7c2V0OmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoKX19KSx0eXBlb2YgUmVmbGVjdD09Im9iamVjdCImJlJlZmxlY3QuY29uc3RydWN0KXt0cnl7UmVmbGVjdC5jb25zdHJ1Y3QoZCxbXSl9Y2F0Y2godWUpe3ZhciB4PXVlfVJlZmxlY3QuY29uc3RydWN0KHUsW10sZCl9ZWxzZXt0cnl7ZC5jYWxsKCl9Y2F0Y2godWUpe3g9dWV9dS5jYWxsKGQucHJvdG90eXBlKX1lbHNle3RyeXt0aHJvdyBFcnJvcigpfWNhdGNoKHVlKXt4PXVlfXUoKX19Y2F0Y2godWUpe2lmKHVlJiZ4JiZ0eXBlb2YgdWUuc3RhY2s9PSJzdHJpbmciKXtmb3IodmFyIE49dWUuc3RhY2suc3BsaXQoYApgKSxDPXguc3RhY2suc3BsaXQoYApgKSxSPU4ubGVuZ3RoLTEsVz1DLmxlbmd0aC0xOzE8PVImJjA8PVcmJk5bUl0hPT1DW1ddOylXLS07Zm9yKDsxPD1SJiYwPD1XO1ItLSxXLS0paWYoTltSXSE9PUNbV10pe2lmKFIhPT0xfHxXIT09MSlkbyBpZihSLS0sVy0tLDA+V3x8TltSXSE9PUNbV10pe3ZhciBaPWAKYCtOW1JdLnJlcGxhY2UoIiBhdCBuZXcgIiwiIGF0ICIpO3JldHVybiB1LmRpc3BsYXlOYW1lJiZaLmluY2x1ZGVzKCI8YW5vbnltb3VzPiIpJiYoWj1aLnJlcGxhY2UoIjxhbm9ueW1vdXM+Iix1LmRpc3BsYXlOYW1lKSksWn13aGlsZSgxPD1SJiYwPD1XKTticmVha319fWZpbmFsbHl7aWU9ITEsRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U9bX1yZXR1cm4odT11P3UuZGlzcGxheU5hbWV8fHUubmFtZToiIik/SCh1KToiIn1mdW5jdGlvbiBkZSh1KXtzd2l0Y2godS50YWcpe2Nhc2UgNTpyZXR1cm4gSCh1LnR5cGUpO2Nhc2UgMTY6cmV0dXJuIEgoIkxhenkiKTtjYXNlIDEzOnJldHVybiBIKCJTdXNwZW5zZSIpO2Nhc2UgMTk6cmV0dXJuIEgoIlN1c3BlbnNlTGlzdCIpO2Nhc2UgMDpjYXNlIDI6Y2FzZSAxNTpyZXR1cm4gdT1wZSh1LnR5cGUsITEpLHU7Y2FzZSAxMTpyZXR1cm4gdT1wZSh1LnR5cGUucmVuZGVyLCExKSx1O2Nhc2UgMTpyZXR1cm4gdT1wZSh1LnR5cGUsITApLHU7ZGVmYXVsdDpyZXR1cm4iIn19ZnVuY3Rpb24gZmUodSl7aWYodT09bnVsbClyZXR1cm4gbnVsbDtpZih0eXBlb2YgdT09ImZ1bmN0aW9uIilyZXR1cm4gdS5kaXNwbGF5TmFtZXx8dS5uYW1lfHxudWxsO2lmKHR5cGVvZiB1PT0ic3RyaW5nIilyZXR1cm4gdTtzd2l0Y2godSl7Y2FzZSBMOnJldHVybiJGcmFnbWVudCI7Y2FzZSBEOnJldHVybiJQb3J0YWwiO2Nhc2UgRjpyZXR1cm4iUHJvZmlsZXIiO2Nhc2UgejpyZXR1cm4iU3RyaWN0TW9kZSI7Y2FzZSBVOnJldHVybiJTdXNwZW5zZSI7Y2FzZSBZOnJldHVybiJTdXNwZW5zZUxpc3QifWlmKHR5cGVvZiB1PT0ib2JqZWN0Iilzd2l0Y2godS4kJHR5cGVvZil7Y2FzZSBFOnJldHVybih1LmRpc3BsYXlOYW1lfHwiQ29udGV4dCIpKyIuQ29uc3VtZXIiO2Nhc2UgXzpyZXR1cm4odS5fY29udGV4dC5kaXNwbGF5TmFtZXx8IkNvbnRleHQiKSsiLlByb3ZpZGVyIjtjYXNlIE06dmFyIGQ9dS5yZW5kZXI7cmV0dXJuIHU9dS5kaXNwbGF5TmFtZSx1fHwodT1kLmRpc3BsYXlOYW1lfHxkLm5hbWV8fCIiLHU9dSE9PSIiPyJGb3J3YXJkUmVmKCIrdSsiKSI6IkZvcndhcmRSZWYiKSx1O2Nhc2UgUTpyZXR1cm4gZD11LmRpc3BsYXlOYW1lfHxudWxsLGQhPT1udWxsP2Q6ZmUodS50eXBlKXx8Ik1lbW8iO2Nhc2UgbmU6ZD11Ll9wYXlsb2FkLHU9dS5faW5pdDt0cnl7cmV0dXJuIGZlKHUoZCkpfWNhdGNoe319cmV0dXJuIG51bGx9ZnVuY3Rpb24gd2UodSl7dmFyIGQ9dS50eXBlO3N3aXRjaCh1LnRhZyl7Y2FzZSAyNDpyZXR1cm4iQ2FjaGUiO2Nhc2UgOTpyZXR1cm4oZC5kaXNwbGF5TmFtZXx8IkNvbnRleHQiKSsiLkNvbnN1bWVyIjtjYXNlIDEwOnJldHVybihkLl9jb250ZXh0LmRpc3BsYXlOYW1lfHwiQ29udGV4dCIpKyIuUHJvdmlkZXIiO2Nhc2UgMTg6cmV0dXJuIkRlaHlkcmF0ZWRGcmFnbWVudCI7Y2FzZSAxMTpyZXR1cm4gdT1kLnJlbmRlcix1PXUuZGlzcGxheU5hbWV8fHUubmFtZXx8IiIsZC5kaXNwbGF5TmFtZXx8KHUhPT0iIj8iRm9yd2FyZFJlZigiK3UrIikiOiJGb3J3YXJkUmVmIik7Y2FzZSA3OnJldHVybiJGcmFnbWVudCI7Y2FzZSA1OnJldHVybiBkO2Nhc2UgNDpyZXR1cm4iUG9ydGFsIjtjYXNlIDM6cmV0dXJuIlJvb3QiO2Nhc2UgNjpyZXR1cm4iVGV4dCI7Y2FzZSAxNjpyZXR1cm4gZmUoZCk7Y2FzZSA4OnJldHVybiBkPT09ej8iU3RyaWN0TW9kZSI6Ik1vZGUiO2Nhc2UgMjI6cmV0dXJuIk9mZnNjcmVlbiI7Y2FzZSAxMjpyZXR1cm4iUHJvZmlsZXIiO2Nhc2UgMjE6cmV0dXJuIlNjb3BlIjtjYXNlIDEzOnJldHVybiJTdXNwZW5zZSI7Y2FzZSAxOTpyZXR1cm4iU3VzcGVuc2VMaXN0IjtjYXNlIDI1OnJldHVybiJUcmFjaW5nTWFya2VyIjtjYXNlIDE6Y2FzZSAwOmNhc2UgMTc6Y2FzZSAyOmNhc2UgMTQ6Y2FzZSAxNTppZih0eXBlb2YgZD09ImZ1bmN0aW9uIilyZXR1cm4gZC5kaXNwbGF5TmFtZXx8ZC5uYW1lfHxudWxsO2lmKHR5cGVvZiBkPT0ic3RyaW5nIilyZXR1cm4gZH1yZXR1cm4gbnVsbH1mdW5jdGlvbiB2ZSh1KXtzd2l0Y2godHlwZW9mIHUpe2Nhc2UiYm9vbGVhbiI6Y2FzZSJudW1iZXIiOmNhc2Uic3RyaW5nIjpjYXNlInVuZGVmaW5lZCI6cmV0dXJuIHU7Y2FzZSJvYmplY3QiOnJldHVybiB1O2RlZmF1bHQ6cmV0dXJuIiJ9fWZ1bmN0aW9uIGtlKHUpe3ZhciBkPXUudHlwZTtyZXR1cm4odT11Lm5vZGVOYW1lKSYmdS50b0xvd2VyQ2FzZSgpPT09ImlucHV0IiYmKGQ9PT0iY2hlY2tib3gifHxkPT09InJhZGlvIil9ZnVuY3Rpb24gTGUodSl7dmFyIGQ9a2UodSk/ImNoZWNrZWQiOiJ2YWx1ZSIsbT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHUuY29uc3RydWN0b3IucHJvdG90eXBlLGQpLHg9IiIrdVtkXTtpZighdS5oYXNPd25Qcm9wZXJ0eShkKSYmdHlwZW9mIG08InUiJiZ0eXBlb2YgbS5nZXQ9PSJmdW5jdGlvbiImJnR5cGVvZiBtLnNldD09ImZ1bmN0aW9uIil7dmFyIE49bS5nZXQsQz1tLnNldDtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHUsZCx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBOLmNhbGwodGhpcyl9LHNldDpmdW5jdGlvbihSKXt4PSIiK1IsQy5jYWxsKHRoaXMsUil9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHUsZCx7ZW51bWVyYWJsZTptLmVudW1lcmFibGV9KSx7Z2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4geH0sc2V0VmFsdWU6ZnVuY3Rpb24oUil7eD0iIitSfSxzdG9wVHJhY2tpbmc6ZnVuY3Rpb24oKXt1Ll92YWx1ZVRyYWNrZXI9bnVsbCxkZWxldGUgdVtkXX19fX1mdW5jdGlvbiBXZSh1KXt1Ll92YWx1ZVRyYWNrZXJ8fCh1Ll92YWx1ZVRyYWNrZXI9TGUodSkpfWZ1bmN0aW9uIG50KHUpe2lmKCF1KXJldHVybiExO3ZhciBkPXUuX3ZhbHVlVHJhY2tlcjtpZighZClyZXR1cm4hMDt2YXIgbT1kLmdldFZhbHVlKCkseD0iIjtyZXR1cm4gdSYmKHg9a2UodSk/dS5jaGVja2VkPyJ0cnVlIjoiZmFsc2UiOnUudmFsdWUpLHU9eCx1IT09bT8oZC5zZXRWYWx1ZSh1KSwhMCk6ITF9ZnVuY3Rpb24gb3QodSl7aWYodT11fHwodHlwZW9mIGRvY3VtZW50PCJ1Ij9kb2N1bWVudDp2b2lkIDApLHR5cGVvZiB1PiJ1IilyZXR1cm4gbnVsbDt0cnl7cmV0dXJuIHUuYWN0aXZlRWxlbWVudHx8dS5ib2R5fWNhdGNoe3JldHVybiB1LmJvZHl9fWZ1bmN0aW9uIGh0KHUsZCl7dmFyIG09ZC5jaGVja2VkO3JldHVybiBxKHt9LGQse2RlZmF1bHRDaGVja2VkOnZvaWQgMCxkZWZhdWx0VmFsdWU6dm9pZCAwLHZhbHVlOnZvaWQgMCxjaGVja2VkOm0/P3UuX3dyYXBwZXJTdGF0ZS5pbml0aWFsQ2hlY2tlZH0pfWZ1bmN0aW9uIHB0KHUsZCl7dmFyIG09ZC5kZWZhdWx0VmFsdWU9PW51bGw/IiI6ZC5kZWZhdWx0VmFsdWUseD1kLmNoZWNrZWQhPW51bGw/ZC5jaGVja2VkOmQuZGVmYXVsdENoZWNrZWQ7bT12ZShkLnZhbHVlIT1udWxsP2QudmFsdWU6bSksdS5fd3JhcHBlclN0YXRlPXtpbml0aWFsQ2hlY2tlZDp4LGluaXRpYWxWYWx1ZTptLGNvbnRyb2xsZWQ6ZC50eXBlPT09ImNoZWNrYm94Inx8ZC50eXBlPT09InJhZGlvIj9kLmNoZWNrZWQhPW51bGw6ZC52YWx1ZSE9bnVsbH19ZnVuY3Rpb24gdXQodSxkKXtkPWQuY2hlY2tlZCxkIT1udWxsJiYkKHUsImNoZWNrZWQiLGQsITEpfWZ1bmN0aW9uIGJ0KHUsZCl7dXQodSxkKTt2YXIgbT12ZShkLnZhbHVlKSx4PWQudHlwZTtpZihtIT1udWxsKXg9PT0ibnVtYmVyIj8obT09PTAmJnUudmFsdWU9PT0iInx8dS52YWx1ZSE9bSkmJih1LnZhbHVlPSIiK20pOnUudmFsdWUhPT0iIittJiYodS52YWx1ZT0iIittKTtlbHNlIGlmKHg9PT0ic3VibWl0Inx8eD09PSJyZXNldCIpe3UucmVtb3ZlQXR0cmlidXRlKCJ2YWx1ZSIpO3JldHVybn1kLmhhc093blByb3BlcnR5KCJ2YWx1ZSIpP0NzKHUsZC50eXBlLG0pOmQuaGFzT3duUHJvcGVydHkoImRlZmF1bHRWYWx1ZSIpJiZDcyh1LGQudHlwZSx2ZShkLmRlZmF1bHRWYWx1ZSkpLGQuY2hlY2tlZD09bnVsbCYmZC5kZWZhdWx0Q2hlY2tlZCE9bnVsbCYmKHUuZGVmYXVsdENoZWNrZWQ9ISFkLmRlZmF1bHRDaGVja2VkKX1mdW5jdGlvbiB3dCh1LGQsbSl7aWYoZC5oYXNPd25Qcm9wZXJ0eSgidmFsdWUiKXx8ZC5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdFZhbHVlIikpe3ZhciB4PWQudHlwZTtpZighKHghPT0ic3VibWl0IiYmeCE9PSJyZXNldCJ8fGQudmFsdWUhPT12b2lkIDAmJmQudmFsdWUhPT1udWxsKSlyZXR1cm47ZD0iIit1Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlLG18fGQ9PT11LnZhbHVlfHwodS52YWx1ZT1kKSx1LmRlZmF1bHRWYWx1ZT1kfW09dS5uYW1lLG0hPT0iIiYmKHUubmFtZT0iIiksdS5kZWZhdWx0Q2hlY2tlZD0hIXUuX3dyYXBwZXJTdGF0ZS5pbml0aWFsQ2hlY2tlZCxtIT09IiImJih1Lm5hbWU9bSl9ZnVuY3Rpb24gQ3ModSxkLG0peyhkIT09Im51bWJlciJ8fG90KHUub3duZXJEb2N1bWVudCkhPT11KSYmKG09PW51bGw/dS5kZWZhdWx0VmFsdWU9IiIrdS5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZTp1LmRlZmF1bHRWYWx1ZSE9PSIiK20mJih1LmRlZmF1bHRWYWx1ZT0iIittKSl9dmFyIFJ0PUFycmF5LmlzQXJyYXk7ZnVuY3Rpb24gWG4odSxkLG0seCl7aWYodT11Lm9wdGlvbnMsZCl7ZD17fTtmb3IodmFyIE49MDtOPG0ubGVuZ3RoO04rKylkWyIkIittW05dXT0hMDtmb3IobT0wO208dS5sZW5ndGg7bSsrKU49ZC5oYXNPd25Qcm9wZXJ0eSgiJCIrdVttXS52YWx1ZSksdVttXS5zZWxlY3RlZCE9PU4mJih1W21dLnNlbGVjdGVkPU4pLE4mJngmJih1W21dLmRlZmF1bHRTZWxlY3RlZD0hMCl9ZWxzZXtmb3IobT0iIit2ZShtKSxkPW51bGwsTj0wO048dS5sZW5ndGg7TisrKXtpZih1W05dLnZhbHVlPT09bSl7dVtOXS5zZWxlY3RlZD0hMCx4JiYodVtOXS5kZWZhdWx0U2VsZWN0ZWQ9ITApO3JldHVybn1kIT09bnVsbHx8dVtOXS5kaXNhYmxlZHx8KGQ9dVtOXSl9ZCE9PW51bGwmJihkLnNlbGVjdGVkPSEwKX19ZnVuY3Rpb24gVG4odSxkKXtpZihkLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIT1udWxsKXRocm93IEVycm9yKHQoOTEpKTtyZXR1cm4gcSh7fSxkLHt2YWx1ZTp2b2lkIDAsZGVmYXVsdFZhbHVlOnZvaWQgMCxjaGlsZHJlbjoiIit1Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlfSl9ZnVuY3Rpb24gRXIodSxkKXt2YXIgbT1kLnZhbHVlO2lmKG09PW51bGwpe2lmKG09ZC5jaGlsZHJlbixkPWQuZGVmYXVsdFZhbHVlLG0hPW51bGwpe2lmKGQhPW51bGwpdGhyb3cgRXJyb3IodCg5MikpO2lmKFJ0KG0pKXtpZigxPG0ubGVuZ3RoKXRocm93IEVycm9yKHQoOTMpKTttPW1bMF19ZD1tfWQ9PW51bGwmJihkPSIiKSxtPWR9dS5fd3JhcHBlclN0YXRlPXtpbml0aWFsVmFsdWU6dmUobSl9fWZ1bmN0aW9uIGxzKHUsZCl7dmFyIG09dmUoZC52YWx1ZSkseD12ZShkLmRlZmF1bHRWYWx1ZSk7bSE9bnVsbCYmKG09IiIrbSxtIT09dS52YWx1ZSYmKHUudmFsdWU9bSksZC5kZWZhdWx0VmFsdWU9PW51bGwmJnUuZGVmYXVsdFZhbHVlIT09bSYmKHUuZGVmYXVsdFZhbHVlPW0pKSx4IT1udWxsJiYodS5kZWZhdWx0VmFsdWU9IiIreCl9ZnVuY3Rpb24gQnModSl7dmFyIGQ9dS50ZXh0Q29udGVudDtkPT09dS5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSYmZCE9PSIiJiZkIT09bnVsbCYmKHUudmFsdWU9ZCl9ZnVuY3Rpb24gb3IodSl7c3dpdGNoKHUpe2Nhc2Uic3ZnIjpyZXR1cm4iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciO2Nhc2UibWF0aCI6cmV0dXJuImh0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwiO2RlZmF1bHQ6cmV0dXJuImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwifX1mdW5jdGlvbiBWcyh1LGQpe3JldHVybiB1PT1udWxsfHx1PT09Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiP29yKGQpOnU9PT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciJiZkPT09ImZvcmVpZ25PYmplY3QiPyJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIjp1fXZhciAkcyxSbz0oZnVuY3Rpb24odSl7cmV0dXJuIHR5cGVvZiBNU0FwcDwidSImJk1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uP2Z1bmN0aW9uKGQsbSx4LE4pe01TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKGZ1bmN0aW9uKCl7cmV0dXJuIHUoZCxtLHgsTil9KX06dX0pKGZ1bmN0aW9uKHUsZCl7aWYodS5uYW1lc3BhY2VVUkkhPT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcifHwiaW5uZXJIVE1MImluIHUpdS5pbm5lckhUTUw9ZDtlbHNle2Zvcigkcz0kc3x8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksJHMuaW5uZXJIVE1MPSI8c3ZnPiIrZC52YWx1ZU9mKCkudG9TdHJpbmcoKSsiPC9zdmc+IixkPSRzLmZpcnN0Q2hpbGQ7dS5maXJzdENoaWxkOyl1LnJlbW92ZUNoaWxkKHUuZmlyc3RDaGlsZCk7Zm9yKDtkLmZpcnN0Q2hpbGQ7KXUuYXBwZW5kQ2hpbGQoZC5maXJzdENoaWxkKX19KTtmdW5jdGlvbiBKcih1LGQpe2lmKGQpe3ZhciBtPXUuZmlyc3RDaGlsZDtpZihtJiZtPT09dS5sYXN0Q2hpbGQmJm0ubm9kZVR5cGU9PT0zKXttLm5vZGVWYWx1ZT1kO3JldHVybn19dS50ZXh0Q29udGVudD1kfXZhciBlbz17YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsYXNwZWN0UmF0aW86ITAsYm9yZGVySW1hZ2VPdXRzZXQ6ITAsYm9yZGVySW1hZ2VTbGljZTohMCxib3JkZXJJbWFnZVdpZHRoOiEwLGJveEZsZXg6ITAsYm94RmxleEdyb3VwOiEwLGJveE9yZGluYWxHcm91cDohMCxjb2x1bW5Db3VudDohMCxjb2x1bW5zOiEwLGZsZXg6ITAsZmxleEdyb3c6ITAsZmxleFBvc2l0aXZlOiEwLGZsZXhTaHJpbms6ITAsZmxleE5lZ2F0aXZlOiEwLGZsZXhPcmRlcjohMCxncmlkQXJlYTohMCxncmlkUm93OiEwLGdyaWRSb3dFbmQ6ITAsZ3JpZFJvd1NwYW46ITAsZ3JpZFJvd1N0YXJ0OiEwLGdyaWRDb2x1bW46ITAsZ3JpZENvbHVtbkVuZDohMCxncmlkQ29sdW1uU3BhbjohMCxncmlkQ29sdW1uU3RhcnQ6ITAsZm9udFdlaWdodDohMCxsaW5lQ2xhbXA6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsdGFiU2l6ZTohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITAsZmlsbE9wYWNpdHk6ITAsZmxvb2RPcGFjaXR5OiEwLHN0b3BPcGFjaXR5OiEwLHN0cm9rZURhc2hhcnJheTohMCxzdHJva2VEYXNob2Zmc2V0OiEwLHN0cm9rZU1pdGVybGltaXQ6ITAsc3Ryb2tlT3BhY2l0eTohMCxzdHJva2VXaWR0aDohMH0scHk9WyJXZWJraXQiLCJtcyIsIk1veiIsIk8iXTtPYmplY3Qua2V5cyhlbykuZm9yRWFjaChmdW5jdGlvbih1KXtweS5mb3JFYWNoKGZ1bmN0aW9uKGQpe2Q9ZCt1LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Uuc3Vic3RyaW5nKDEpLGVvW2RdPWVvW3VdfSl9KTtmdW5jdGlvbiBJaSh1LGQsbSl7cmV0dXJuIGQ9PW51bGx8fHR5cGVvZiBkPT0iYm9vbGVhbiJ8fGQ9PT0iIj8iIjptfHx0eXBlb2YgZCE9Im51bWJlciJ8fGQ9PT0wfHxlby5oYXNPd25Qcm9wZXJ0eSh1KSYmZW9bdV0/KCIiK2QpLnRyaW0oKTpkKyJweCJ9ZnVuY3Rpb24gTWgodSxkKXt1PXUuc3R5bGU7Zm9yKHZhciBtIGluIGQpaWYoZC5oYXNPd25Qcm9wZXJ0eShtKSl7dmFyIHg9bS5pbmRleE9mKCItLSIpPT09MCxOPUlpKG0sZFttXSx4KTttPT09ImZsb2F0IiYmKG09ImNzc0Zsb2F0IikseD91LnNldFByb3BlcnR5KG0sTik6dVttXT1OfX12YXIgZnk9cSh7bWVudWl0ZW06ITB9LHthcmVhOiEwLGJhc2U6ITAsYnI6ITAsY29sOiEwLGVtYmVkOiEwLGhyOiEwLGltZzohMCxpbnB1dDohMCxrZXlnZW46ITAsbGluazohMCxtZXRhOiEwLHBhcmFtOiEwLHNvdXJjZTohMCx0cmFjazohMCx3YnI6ITB9KTtmdW5jdGlvbiBteSh1LGQpe2lmKGQpe2lmKGZ5W3VdJiYoZC5jaGlsZHJlbiE9bnVsbHx8ZC5kYW5nZXJvdXNseVNldElubmVySFRNTCE9bnVsbCkpdGhyb3cgRXJyb3IodCgxMzcsdSkpO2lmKGQuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwhPW51bGwpe2lmKGQuY2hpbGRyZW4hPW51bGwpdGhyb3cgRXJyb3IodCg2MCkpO2lmKHR5cGVvZiBkLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIT0ib2JqZWN0Inx8ISgiX19odG1sImluIGQuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpKXRocm93IEVycm9yKHQoNjEpKX1pZihkLnN0eWxlIT1udWxsJiZ0eXBlb2YgZC5zdHlsZSE9Im9iamVjdCIpdGhyb3cgRXJyb3IodCg2MikpfX1mdW5jdGlvbiBneSh1LGQpe2lmKHUuaW5kZXhPZigiLSIpPT09LTEpcmV0dXJuIHR5cGVvZiBkLmlzPT0ic3RyaW5nIjtzd2l0Y2godSl7Y2FzZSJhbm5vdGF0aW9uLXhtbCI6Y2FzZSJjb2xvci1wcm9maWxlIjpjYXNlImZvbnQtZmFjZSI6Y2FzZSJmb250LWZhY2Utc3JjIjpjYXNlImZvbnQtZmFjZS11cmkiOmNhc2UiZm9udC1mYWNlLWZvcm1hdCI6Y2FzZSJmb250LWZhY2UtbmFtZSI6Y2FzZSJtaXNzaW5nLWdseXBoIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiEwfX12YXIgeXk9bnVsbDtmdW5jdGlvbiB4eSh1KXtyZXR1cm4gdT11LnRhcmdldHx8dS5zcmNFbGVtZW50fHx3aW5kb3csdS5jb3JyZXNwb25kaW5nVXNlRWxlbWVudCYmKHU9dS5jb3JyZXNwb25kaW5nVXNlRWxlbWVudCksdS5ub2RlVHlwZT09PTM/dS5wYXJlbnROb2RlOnV9dmFyIGJ5PW51bGwsX2E9bnVsbCxPYT1udWxsO2Z1bmN0aW9uIGJ2KHUpe2lmKHU9b2ModSkpe2lmKHR5cGVvZiBieSE9ImZ1bmN0aW9uIil0aHJvdyBFcnJvcih0KDI4MCkpO3ZhciBkPXUuc3RhdGVOb2RlO2QmJihkPWxwKGQpLGJ5KHUuc3RhdGVOb2RlLHUudHlwZSxkKSl9fWZ1bmN0aW9uIHd2KHUpe19hP09hP09hLnB1c2godSk6T2E9W3VdOl9hPXV9ZnVuY3Rpb24gdnYoKXtpZihfYSl7dmFyIHU9X2EsZD1PYTtpZihPYT1fYT1udWxsLGJ2KHUpLGQpZm9yKHU9MDt1PGQubGVuZ3RoO3UrKylidihkW3VdKX19ZnVuY3Rpb24gU3YodSxkKXtyZXR1cm4gdShkKX1mdW5jdGlvbiBOdigpe312YXIgd3k9ITE7ZnVuY3Rpb24ga3YodSxkLG0pe2lmKHd5KXJldHVybiB1KGQsbSk7d3k9ITA7dHJ5e3JldHVybiBTdih1LGQsbSl9ZmluYWxseXt3eT0hMSwoX2EhPT1udWxsfHxPYSE9PW51bGwpJiYoTnYoKSx2digpKX19ZnVuY3Rpb24genUodSxkKXt2YXIgbT11LnN0YXRlTm9kZTtpZihtPT09bnVsbClyZXR1cm4gbnVsbDt2YXIgeD1scChtKTtpZih4PT09bnVsbClyZXR1cm4gbnVsbDttPXhbZF07ZTpzd2l0Y2goZCl7Y2FzZSJvbkNsaWNrIjpjYXNlIm9uQ2xpY2tDYXB0dXJlIjpjYXNlIm9uRG91YmxlQ2xpY2siOmNhc2Uib25Eb3VibGVDbGlja0NhcHR1cmUiOmNhc2Uib25Nb3VzZURvd24iOmNhc2Uib25Nb3VzZURvd25DYXB0dXJlIjpjYXNlIm9uTW91c2VNb3ZlIjpjYXNlIm9uTW91c2VNb3ZlQ2FwdHVyZSI6Y2FzZSJvbk1vdXNlVXAiOmNhc2Uib25Nb3VzZVVwQ2FwdHVyZSI6Y2FzZSJvbk1vdXNlRW50ZXIiOih4PSF4LmRpc2FibGVkKXx8KHU9dS50eXBlLHg9ISh1PT09ImJ1dHRvbiJ8fHU9PT0iaW5wdXQifHx1PT09InNlbGVjdCJ8fHU9PT0idGV4dGFyZWEiKSksdT0heDticmVhayBlO2RlZmF1bHQ6dT0hMX1pZih1KXJldHVybiBudWxsO2lmKG0mJnR5cGVvZiBtIT0iZnVuY3Rpb24iKXRocm93IEVycm9yKHQoMjMxLGQsdHlwZW9mIG0pKTtyZXR1cm4gbX12YXIgdnk9ITE7aWYoYSl0cnl7dmFyIE11PXt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShNdSwicGFzc2l2ZSIse2dldDpmdW5jdGlvbigpe3Z5PSEwfX0pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ0ZXN0IixNdSxNdSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInRlc3QiLE11LE11KX1jYXRjaHt2eT0hMX1mdW5jdGlvbiBzQSh1LGQsbSx4LE4sQyxSLFcsWil7dmFyIHVlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywzKTt0cnl7ZC5hcHBseShtLHVlKX1jYXRjaCh4ZSl7dGhpcy5vbkVycm9yKHhlKX19dmFyIEJ1PSExLEJoPW51bGwsVmg9ITEsU3k9bnVsbCxyQT17b25FcnJvcjpmdW5jdGlvbih1KXtCdT0hMCxCaD11fX07ZnVuY3Rpb24gb0EodSxkLG0seCxOLEMsUixXLFope0J1PSExLEJoPW51bGwsc0EuYXBwbHkockEsYXJndW1lbnRzKX1mdW5jdGlvbiBpQSh1LGQsbSx4LE4sQyxSLFcsWil7aWYob0EuYXBwbHkodGhpcyxhcmd1bWVudHMpLEJ1KXtpZihCdSl7dmFyIHVlPUJoO0J1PSExLEJoPW51bGx9ZWxzZSB0aHJvdyBFcnJvcih0KDE5OCkpO1ZofHwoVmg9ITAsU3k9dWUpfX1mdW5jdGlvbiBUaSh1KXt2YXIgZD11LG09dTtpZih1LmFsdGVybmF0ZSlmb3IoO2QucmV0dXJuOylkPWQucmV0dXJuO2Vsc2V7dT1kO2RvIGQ9dSwoZC5mbGFncyY0MDk4KSE9PTAmJihtPWQucmV0dXJuKSx1PWQucmV0dXJuO3doaWxlKHUpfXJldHVybiBkLnRhZz09PTM/bTpudWxsfWZ1bmN0aW9uIEN2KHUpe2lmKHUudGFnPT09MTMpe3ZhciBkPXUubWVtb2l6ZWRTdGF0ZTtpZihkPT09bnVsbCYmKHU9dS5hbHRlcm5hdGUsdSE9PW51bGwmJihkPXUubWVtb2l6ZWRTdGF0ZSkpLGQhPT1udWxsKXJldHVybiBkLmRlaHlkcmF0ZWR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gJHYodSl7aWYoVGkodSkhPT11KXRocm93IEVycm9yKHQoMTg4KSl9ZnVuY3Rpb24gYUEodSl7dmFyIGQ9dS5hbHRlcm5hdGU7aWYoIWQpe2lmKGQ9VGkodSksZD09PW51bGwpdGhyb3cgRXJyb3IodCgxODgpKTtyZXR1cm4gZCE9PXU/bnVsbDp1fWZvcih2YXIgbT11LHg9ZDs7KXt2YXIgTj1tLnJldHVybjtpZihOPT09bnVsbClicmVhazt2YXIgQz1OLmFsdGVybmF0ZTtpZihDPT09bnVsbCl7aWYoeD1OLnJldHVybix4IT09bnVsbCl7bT14O2NvbnRpbnVlfWJyZWFrfWlmKE4uY2hpbGQ9PT1DLmNoaWxkKXtmb3IoQz1OLmNoaWxkO0M7KXtpZihDPT09bSlyZXR1cm4gJHYoTiksdTtpZihDPT09eClyZXR1cm4gJHYoTiksZDtDPUMuc2libGluZ310aHJvdyBFcnJvcih0KDE4OCkpfWlmKG0ucmV0dXJuIT09eC5yZXR1cm4pbT1OLHg9QztlbHNle2Zvcih2YXIgUj0hMSxXPU4uY2hpbGQ7Vzspe2lmKFc9PT1tKXtSPSEwLG09Tix4PUM7YnJlYWt9aWYoVz09PXgpe1I9ITAseD1OLG09QzticmVha31XPVcuc2libGluZ31pZighUil7Zm9yKFc9Qy5jaGlsZDtXOyl7aWYoVz09PW0pe1I9ITAsbT1DLHg9TjticmVha31pZihXPT09eCl7Uj0hMCx4PUMsbT1OO2JyZWFrfVc9Vy5zaWJsaW5nfWlmKCFSKXRocm93IEVycm9yKHQoMTg5KSl9fWlmKG0uYWx0ZXJuYXRlIT09eCl0aHJvdyBFcnJvcih0KDE5MCkpfWlmKG0udGFnIT09Myl0aHJvdyBFcnJvcih0KDE4OCkpO3JldHVybiBtLnN0YXRlTm9kZS5jdXJyZW50PT09bT91OmR9ZnVuY3Rpb24gSXYodSl7cmV0dXJuIHU9YUEodSksdSE9PW51bGw/VHYodSk6bnVsbH1mdW5jdGlvbiBUdih1KXtpZih1LnRhZz09PTV8fHUudGFnPT09NilyZXR1cm4gdTtmb3IodT11LmNoaWxkO3UhPT1udWxsOyl7dmFyIGQ9VHYodSk7aWYoZCE9PW51bGwpcmV0dXJuIGQ7dT11LnNpYmxpbmd9cmV0dXJuIG51bGx9dmFyIEV2PWUudW5zdGFibGVfc2NoZWR1bGVDYWxsYmFjayxSdj1lLnVuc3RhYmxlX2NhbmNlbENhbGxiYWNrLGxBPWUudW5zdGFibGVfc2hvdWxkWWllbGQsdUE9ZS51bnN0YWJsZV9yZXF1ZXN0UGFpbnQscXQ9ZS51bnN0YWJsZV9ub3csY0E9ZS51bnN0YWJsZV9nZXRDdXJyZW50UHJpb3JpdHlMZXZlbCxOeT1lLnVuc3RhYmxlX0ltbWVkaWF0ZVByaW9yaXR5LER2PWUudW5zdGFibGVfVXNlckJsb2NraW5nUHJpb3JpdHksV2g9ZS51bnN0YWJsZV9Ob3JtYWxQcmlvcml0eSxkQT1lLnVuc3RhYmxlX0xvd1ByaW9yaXR5LEF2PWUudW5zdGFibGVfSWRsZVByaW9yaXR5LFVoPW51bGwsUnI9bnVsbDtmdW5jdGlvbiBoQSh1KXtpZihSciYmdHlwZW9mIFJyLm9uQ29tbWl0RmliZXJSb290PT0iZnVuY3Rpb24iKXRyeXtSci5vbkNvbW1pdEZpYmVyUm9vdChVaCx1LHZvaWQgMCwodS5jdXJyZW50LmZsYWdzJjEyOCk9PT0xMjgpfWNhdGNoe319dmFyIGlyPU1hdGguY2x6MzI/TWF0aC5jbHozMjptQSxwQT1NYXRoLmxvZyxmQT1NYXRoLkxOMjtmdW5jdGlvbiBtQSh1KXtyZXR1cm4gdT4+Pj0wLHU9PT0wPzMyOjMxLShwQSh1KS9mQXwwKXwwfXZhciBqaD02NCxHaD00MTk0MzA0O2Z1bmN0aW9uIFZ1KHUpe3N3aXRjaCh1Ji11KXtjYXNlIDE6cmV0dXJuIDE7Y2FzZSAyOnJldHVybiAyO2Nhc2UgNDpyZXR1cm4gNDtjYXNlIDg6cmV0dXJuIDg7Y2FzZSAxNjpyZXR1cm4gMTY7Y2FzZSAzMjpyZXR1cm4gMzI7Y2FzZSA2NDpjYXNlIDEyODpjYXNlIDI1NjpjYXNlIDUxMjpjYXNlIDEwMjQ6Y2FzZSAyMDQ4OmNhc2UgNDA5NjpjYXNlIDgxOTI6Y2FzZSAxNjM4NDpjYXNlIDMyNzY4OmNhc2UgNjU1MzY6Y2FzZSAxMzEwNzI6Y2FzZSAyNjIxNDQ6Y2FzZSA1MjQyODg6Y2FzZSAxMDQ4NTc2OmNhc2UgMjA5NzE1MjpyZXR1cm4gdSY0MTk0MjQwO2Nhc2UgNDE5NDMwNDpjYXNlIDgzODg2MDg6Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOmNhc2UgNjcxMDg4NjQ6cmV0dXJuIHUmMTMwMDIzNDI0O2Nhc2UgMTM0MjE3NzI4OnJldHVybiAxMzQyMTc3Mjg7Y2FzZSAyNjg0MzU0NTY6cmV0dXJuIDI2ODQzNTQ1NjtjYXNlIDUzNjg3MDkxMjpyZXR1cm4gNTM2ODcwOTEyO2Nhc2UgMTA3Mzc0MTgyNDpyZXR1cm4gMTA3Mzc0MTgyNDtkZWZhdWx0OnJldHVybiB1fX1mdW5jdGlvbiBIaCh1LGQpe3ZhciBtPXUucGVuZGluZ0xhbmVzO2lmKG09PT0wKXJldHVybiAwO3ZhciB4PTAsTj11LnN1c3BlbmRlZExhbmVzLEM9dS5waW5nZWRMYW5lcyxSPW0mMjY4NDM1NDU1O2lmKFIhPT0wKXt2YXIgVz1SJn5OO1chPT0wP3g9VnUoVyk6KEMmPVIsQyE9PTAmJih4PVZ1KEMpKSl9ZWxzZSBSPW0mfk4sUiE9PTA/eD1WdShSKTpDIT09MCYmKHg9VnUoQykpO2lmKHg9PT0wKXJldHVybiAwO2lmKGQhPT0wJiZkIT09eCYmKGQmTik9PT0wJiYoTj14Ji14LEM9ZCYtZCxOPj1DfHxOPT09MTYmJihDJjQxOTQyNDApIT09MCkpcmV0dXJuIGQ7aWYoKHgmNCkhPT0wJiYoeHw9bSYxNiksZD11LmVudGFuZ2xlZExhbmVzLGQhPT0wKWZvcih1PXUuZW50YW5nbGVtZW50cyxkJj14OzA8ZDspbT0zMS1pcihkKSxOPTE8PG0seHw9dVttXSxkJj1+TjtyZXR1cm4geH1mdW5jdGlvbiBnQSh1LGQpe3N3aXRjaCh1KXtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpyZXR1cm4gZCsyNTA7Y2FzZSA4OmNhc2UgMTY6Y2FzZSAzMjpjYXNlIDY0OmNhc2UgMTI4OmNhc2UgMjU2OmNhc2UgNTEyOmNhc2UgMTAyNDpjYXNlIDIwNDg6Y2FzZSA0MDk2OmNhc2UgODE5MjpjYXNlIDE2Mzg0OmNhc2UgMzI3Njg6Y2FzZSA2NTUzNjpjYXNlIDEzMTA3MjpjYXNlIDI2MjE0NDpjYXNlIDUyNDI4ODpjYXNlIDEwNDg1NzY6Y2FzZSAyMDk3MTUyOnJldHVybiBkKzVlMztjYXNlIDQxOTQzMDQ6Y2FzZSA4Mzg4NjA4OmNhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpjYXNlIDY3MTA4ODY0OnJldHVybi0xO2Nhc2UgMTM0MjE3NzI4OmNhc2UgMjY4NDM1NDU2OmNhc2UgNTM2ODcwOTEyOmNhc2UgMTA3Mzc0MTgyNDpyZXR1cm4tMTtkZWZhdWx0OnJldHVybi0xfX1mdW5jdGlvbiB5QSh1LGQpe2Zvcih2YXIgbT11LnN1c3BlbmRlZExhbmVzLHg9dS5waW5nZWRMYW5lcyxOPXUuZXhwaXJhdGlvblRpbWVzLEM9dS5wZW5kaW5nTGFuZXM7MDxDOyl7dmFyIFI9MzEtaXIoQyksVz0xPDxSLFo9TltSXTtaPT09LTE/KChXJm0pPT09MHx8KFcmeCkhPT0wKSYmKE5bUl09Z0EoVyxkKSk6Wjw9ZCYmKHUuZXhwaXJlZExhbmVzfD1XKSxDJj1+V319ZnVuY3Rpb24ga3kodSl7cmV0dXJuIHU9dS5wZW5kaW5nTGFuZXMmLTEwNzM3NDE4MjUsdSE9PTA/dTp1JjEwNzM3NDE4MjQ/MTA3Mzc0MTgyNDowfWZ1bmN0aW9uIF92KCl7dmFyIHU9amg7cmV0dXJuIGpoPDw9MSwoamgmNDE5NDI0MCk9PT0wJiYoamg9NjQpLHV9ZnVuY3Rpb24gQ3kodSl7Zm9yKHZhciBkPVtdLG09MDszMT5tO20rKylkLnB1c2godSk7cmV0dXJuIGR9ZnVuY3Rpb24gV3UodSxkLG0pe3UucGVuZGluZ0xhbmVzfD1kLGQhPT01MzY4NzA5MTImJih1LnN1c3BlbmRlZExhbmVzPTAsdS5waW5nZWRMYW5lcz0wKSx1PXUuZXZlbnRUaW1lcyxkPTMxLWlyKGQpLHVbZF09bX1mdW5jdGlvbiB4QSh1LGQpe3ZhciBtPXUucGVuZGluZ0xhbmVzJn5kO3UucGVuZGluZ0xhbmVzPWQsdS5zdXNwZW5kZWRMYW5lcz0wLHUucGluZ2VkTGFuZXM9MCx1LmV4cGlyZWRMYW5lcyY9ZCx1Lm11dGFibGVSZWFkTGFuZXMmPWQsdS5lbnRhbmdsZWRMYW5lcyY9ZCxkPXUuZW50YW5nbGVtZW50czt2YXIgeD11LmV2ZW50VGltZXM7Zm9yKHU9dS5leHBpcmF0aW9uVGltZXM7MDxtOyl7dmFyIE49MzEtaXIobSksQz0xPDxOO2RbTl09MCx4W05dPS0xLHVbTl09LTEsbSY9fkN9fWZ1bmN0aW9uICR5KHUsZCl7dmFyIG09dS5lbnRhbmdsZWRMYW5lc3w9ZDtmb3IodT11LmVudGFuZ2xlbWVudHM7bTspe3ZhciB4PTMxLWlyKG0pLE49MTw8eDtOJmR8dVt4XSZkJiYodVt4XXw9ZCksbSY9fk59fXZhciBndD0wO2Z1bmN0aW9uIE92KHUpe3JldHVybiB1Jj0tdSwxPHU/NDx1Pyh1JjI2ODQzNTQ1NSkhPT0wPzE2OjUzNjg3MDkxMjo0OjF9dmFyIEZ2LEl5LEx2LFB2LHp2LFR5PSExLHFoPVtdLERvPW51bGwsQW89bnVsbCxfbz1udWxsLFV1PW5ldyBNYXAsanU9bmV3IE1hcCxPbz1bXSxiQT0ibW91c2Vkb3duIG1vdXNldXAgdG91Y2hjYW5jZWwgdG91Y2hlbmQgdG91Y2hzdGFydCBhdXhjbGljayBkYmxjbGljayBwb2ludGVyY2FuY2VsIHBvaW50ZXJkb3duIHBvaW50ZXJ1cCBkcmFnZW5kIGRyYWdzdGFydCBkcm9wIGNvbXBvc2l0aW9uZW5kIGNvbXBvc2l0aW9uc3RhcnQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBpbnB1dCB0ZXh0SW5wdXQgY29weSBjdXQgcGFzdGUgY2xpY2sgY2hhbmdlIGNvbnRleHRtZW51IHJlc2V0IHN1Ym1pdCIuc3BsaXQoIiAiKTtmdW5jdGlvbiBNdih1LGQpe3N3aXRjaCh1KXtjYXNlImZvY3VzaW4iOmNhc2UiZm9jdXNvdXQiOkRvPW51bGw7YnJlYWs7Y2FzZSJkcmFnZW50ZXIiOmNhc2UiZHJhZ2xlYXZlIjpBbz1udWxsO2JyZWFrO2Nhc2UibW91c2VvdmVyIjpjYXNlIm1vdXNlb3V0Ijpfbz1udWxsO2JyZWFrO2Nhc2UicG9pbnRlcm92ZXIiOmNhc2UicG9pbnRlcm91dCI6VXUuZGVsZXRlKGQucG9pbnRlcklkKTticmVhaztjYXNlImdvdHBvaW50ZXJjYXB0dXJlIjpjYXNlImxvc3Rwb2ludGVyY2FwdHVyZSI6anUuZGVsZXRlKGQucG9pbnRlcklkKX19ZnVuY3Rpb24gR3UodSxkLG0seCxOLEMpe3JldHVybiB1PT09bnVsbHx8dS5uYXRpdmVFdmVudCE9PUM/KHU9e2Jsb2NrZWRPbjpkLGRvbUV2ZW50TmFtZTptLGV2ZW50U3lzdGVtRmxhZ3M6eCxuYXRpdmVFdmVudDpDLHRhcmdldENvbnRhaW5lcnM6W05dfSxkIT09bnVsbCYmKGQ9b2MoZCksZCE9PW51bGwmJkl5KGQpKSx1KToodS5ldmVudFN5c3RlbUZsYWdzfD14LGQ9dS50YXJnZXRDb250YWluZXJzLE4hPT1udWxsJiZkLmluZGV4T2YoTik9PT0tMSYmZC5wdXNoKE4pLHUpfWZ1bmN0aW9uIHdBKHUsZCxtLHgsTil7c3dpdGNoKGQpe2Nhc2UiZm9jdXNpbiI6cmV0dXJuIERvPUd1KERvLHUsZCxtLHgsTiksITA7Y2FzZSJkcmFnZW50ZXIiOnJldHVybiBBbz1HdShBbyx1LGQsbSx4LE4pLCEwO2Nhc2UibW91c2VvdmVyIjpyZXR1cm4gX289R3UoX28sdSxkLG0seCxOKSwhMDtjYXNlInBvaW50ZXJvdmVyIjp2YXIgQz1OLnBvaW50ZXJJZDtyZXR1cm4gVXUuc2V0KEMsR3UoVXUuZ2V0KEMpfHxudWxsLHUsZCxtLHgsTikpLCEwO2Nhc2UiZ290cG9pbnRlcmNhcHR1cmUiOnJldHVybiBDPU4ucG9pbnRlcklkLGp1LnNldChDLEd1KGp1LmdldChDKXx8bnVsbCx1LGQsbSx4LE4pKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBCdih1KXt2YXIgZD1FaSh1LnRhcmdldCk7aWYoZCE9PW51bGwpe3ZhciBtPVRpKGQpO2lmKG0hPT1udWxsKXtpZihkPW0udGFnLGQ9PT0xMyl7aWYoZD1DdihtKSxkIT09bnVsbCl7dS5ibG9ja2VkT249ZCx6dih1LnByaW9yaXR5LGZ1bmN0aW9uKCl7THYobSl9KTtyZXR1cm59fWVsc2UgaWYoZD09PTMmJm0uc3RhdGVOb2RlLmN1cnJlbnQubWVtb2l6ZWRTdGF0ZS5pc0RlaHlkcmF0ZWQpe3UuYmxvY2tlZE9uPW0udGFnPT09Mz9tLnN0YXRlTm9kZS5jb250YWluZXJJbmZvOm51bGw7cmV0dXJufX19dS5ibG9ja2VkT249bnVsbH1mdW5jdGlvbiBLaCh1KXtpZih1LmJsb2NrZWRPbiE9PW51bGwpcmV0dXJuITE7Zm9yKHZhciBkPXUudGFyZ2V0Q29udGFpbmVyczswPGQubGVuZ3RoOyl7dmFyIG09UnkodS5kb21FdmVudE5hbWUsdS5ldmVudFN5c3RlbUZsYWdzLGRbMF0sdS5uYXRpdmVFdmVudCk7aWYobT09PW51bGwpe209dS5uYXRpdmVFdmVudDt2YXIgeD1uZXcgbS5jb25zdHJ1Y3RvcihtLnR5cGUsbSk7eXk9eCxtLnRhcmdldC5kaXNwYXRjaEV2ZW50KHgpLHl5PW51bGx9ZWxzZSByZXR1cm4gZD1vYyhtKSxkIT09bnVsbCYmSXkoZCksdS5ibG9ja2VkT249bSwhMTtkLnNoaWZ0KCl9cmV0dXJuITB9ZnVuY3Rpb24gVnYodSxkLG0pe0toKHUpJiZtLmRlbGV0ZShkKX1mdW5jdGlvbiB2QSgpe1R5PSExLERvIT09bnVsbCYmS2goRG8pJiYoRG89bnVsbCksQW8hPT1udWxsJiZLaChBbykmJihBbz1udWxsKSxfbyE9PW51bGwmJktoKF9vKSYmKF9vPW51bGwpLFV1LmZvckVhY2goVnYpLGp1LmZvckVhY2goVnYpfWZ1bmN0aW9uIEh1KHUsZCl7dS5ibG9ja2VkT249PT1kJiYodS5ibG9ja2VkT249bnVsbCxUeXx8KFR5PSEwLGUudW5zdGFibGVfc2NoZWR1bGVDYWxsYmFjayhlLnVuc3RhYmxlX05vcm1hbFByaW9yaXR5LHZBKSkpfWZ1bmN0aW9uIHF1KHUpe2Z1bmN0aW9uIGQoTil7cmV0dXJuIEh1KE4sdSl9aWYoMDxxaC5sZW5ndGgpe0h1KHFoWzBdLHUpO2Zvcih2YXIgbT0xO208cWgubGVuZ3RoO20rKyl7dmFyIHg9cWhbbV07eC5ibG9ja2VkT249PT11JiYoeC5ibG9ja2VkT249bnVsbCl9fWZvcihEbyE9PW51bGwmJkh1KERvLHUpLEFvIT09bnVsbCYmSHUoQW8sdSksX28hPT1udWxsJiZIdShfbyx1KSxVdS5mb3JFYWNoKGQpLGp1LmZvckVhY2goZCksbT0wO208T28ubGVuZ3RoO20rKyl4PU9vW21dLHguYmxvY2tlZE9uPT09dSYmKHguYmxvY2tlZE9uPW51bGwpO2Zvcig7MDxPby5sZW5ndGgmJihtPU9vWzBdLG0uYmxvY2tlZE9uPT09bnVsbCk7KUJ2KG0pLG0uYmxvY2tlZE9uPT09bnVsbCYmT28uc2hpZnQoKX12YXIgRmE9ay5SZWFjdEN1cnJlbnRCYXRjaENvbmZpZyxYaD0hMDtmdW5jdGlvbiBTQSh1LGQsbSx4KXt2YXIgTj1ndCxDPUZhLnRyYW5zaXRpb247RmEudHJhbnNpdGlvbj1udWxsO3RyeXtndD0xLEV5KHUsZCxtLHgpfWZpbmFsbHl7Z3Q9TixGYS50cmFuc2l0aW9uPUN9fWZ1bmN0aW9uIE5BKHUsZCxtLHgpe3ZhciBOPWd0LEM9RmEudHJhbnNpdGlvbjtGYS50cmFuc2l0aW9uPW51bGw7dHJ5e2d0PTQsRXkodSxkLG0seCl9ZmluYWxseXtndD1OLEZhLnRyYW5zaXRpb249Q319ZnVuY3Rpb24gRXkodSxkLG0seCl7aWYoWGgpe3ZhciBOPVJ5KHUsZCxtLHgpO2lmKE49PT1udWxsKXF5KHUsZCx4LFloLG0pLE12KHUseCk7ZWxzZSBpZih3QShOLHUsZCxtLHgpKXguc3RvcFByb3BhZ2F0aW9uKCk7ZWxzZSBpZihNdih1LHgpLGQmNCYmLTE8YkEuaW5kZXhPZih1KSl7Zm9yKDtOIT09bnVsbDspe3ZhciBDPW9jKE4pO2lmKEMhPT1udWxsJiZGdihDKSxDPVJ5KHUsZCxtLHgpLEM9PT1udWxsJiZxeSh1LGQseCxZaCxtKSxDPT09TilicmVhaztOPUN9TiE9PW51bGwmJnguc3RvcFByb3BhZ2F0aW9uKCl9ZWxzZSBxeSh1LGQseCxudWxsLG0pfX12YXIgWWg9bnVsbDtmdW5jdGlvbiBSeSh1LGQsbSx4KXtpZihZaD1udWxsLHU9eHkoeCksdT1FaSh1KSx1IT09bnVsbClpZihkPVRpKHUpLGQ9PT1udWxsKXU9bnVsbDtlbHNlIGlmKG09ZC50YWcsbT09PTEzKXtpZih1PUN2KGQpLHUhPT1udWxsKXJldHVybiB1O3U9bnVsbH1lbHNlIGlmKG09PT0zKXtpZihkLnN0YXRlTm9kZS5jdXJyZW50Lm1lbW9pemVkU3RhdGUuaXNEZWh5ZHJhdGVkKXJldHVybiBkLnRhZz09PTM/ZC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbzpudWxsO3U9bnVsbH1lbHNlIGQhPT11JiYodT1udWxsKTtyZXR1cm4gWWg9dSxudWxsfWZ1bmN0aW9uIFd2KHUpe3N3aXRjaCh1KXtjYXNlImNhbmNlbCI6Y2FzZSJjbGljayI6Y2FzZSJjbG9zZSI6Y2FzZSJjb250ZXh0bWVudSI6Y2FzZSJjb3B5IjpjYXNlImN1dCI6Y2FzZSJhdXhjbGljayI6Y2FzZSJkYmxjbGljayI6Y2FzZSJkcmFnZW5kIjpjYXNlImRyYWdzdGFydCI6Y2FzZSJkcm9wIjpjYXNlImZvY3VzaW4iOmNhc2UiZm9jdXNvdXQiOmNhc2UiaW5wdXQiOmNhc2UiaW52YWxpZCI6Y2FzZSJrZXlkb3duIjpjYXNlImtleXByZXNzIjpjYXNlImtleXVwIjpjYXNlIm1vdXNlZG93biI6Y2FzZSJtb3VzZXVwIjpjYXNlInBhc3RlIjpjYXNlInBhdXNlIjpjYXNlInBsYXkiOmNhc2UicG9pbnRlcmNhbmNlbCI6Y2FzZSJwb2ludGVyZG93biI6Y2FzZSJwb2ludGVydXAiOmNhc2UicmF0ZWNoYW5nZSI6Y2FzZSJyZXNldCI6Y2FzZSJyZXNpemUiOmNhc2Uic2Vla2VkIjpjYXNlInN1Ym1pdCI6Y2FzZSJ0b3VjaGNhbmNlbCI6Y2FzZSJ0b3VjaGVuZCI6Y2FzZSJ0b3VjaHN0YXJ0IjpjYXNlInZvbHVtZWNoYW5nZSI6Y2FzZSJjaGFuZ2UiOmNhc2Uic2VsZWN0aW9uY2hhbmdlIjpjYXNlInRleHRJbnB1dCI6Y2FzZSJjb21wb3NpdGlvbnN0YXJ0IjpjYXNlImNvbXBvc2l0aW9uZW5kIjpjYXNlImNvbXBvc2l0aW9udXBkYXRlIjpjYXNlImJlZm9yZWJsdXIiOmNhc2UiYWZ0ZXJibHVyIjpjYXNlImJlZm9yZWlucHV0IjpjYXNlImJsdXIiOmNhc2UiZnVsbHNjcmVlbmNoYW5nZSI6Y2FzZSJmb2N1cyI6Y2FzZSJoYXNoY2hhbmdlIjpjYXNlInBvcHN0YXRlIjpjYXNlInNlbGVjdCI6Y2FzZSJzZWxlY3RzdGFydCI6cmV0dXJuIDE7Y2FzZSJkcmFnIjpjYXNlImRyYWdlbnRlciI6Y2FzZSJkcmFnZXhpdCI6Y2FzZSJkcmFnbGVhdmUiOmNhc2UiZHJhZ292ZXIiOmNhc2UibW91c2Vtb3ZlIjpjYXNlIm1vdXNlb3V0IjpjYXNlIm1vdXNlb3ZlciI6Y2FzZSJwb2ludGVybW92ZSI6Y2FzZSJwb2ludGVyb3V0IjpjYXNlInBvaW50ZXJvdmVyIjpjYXNlInNjcm9sbCI6Y2FzZSJ0b2dnbGUiOmNhc2UidG91Y2htb3ZlIjpjYXNlIndoZWVsIjpjYXNlIm1vdXNlZW50ZXIiOmNhc2UibW91c2VsZWF2ZSI6Y2FzZSJwb2ludGVyZW50ZXIiOmNhc2UicG9pbnRlcmxlYXZlIjpyZXR1cm4gNDtjYXNlIm1lc3NhZ2UiOnN3aXRjaChjQSgpKXtjYXNlIE55OnJldHVybiAxO2Nhc2UgRHY6cmV0dXJuIDQ7Y2FzZSBXaDpjYXNlIGRBOnJldHVybiAxNjtjYXNlIEF2OnJldHVybiA1MzY4NzA5MTI7ZGVmYXVsdDpyZXR1cm4gMTZ9ZGVmYXVsdDpyZXR1cm4gMTZ9fXZhciBGbz1udWxsLER5PW51bGwsUWg9bnVsbDtmdW5jdGlvbiBVdigpe2lmKFFoKXJldHVybiBRaDt2YXIgdSxkPUR5LG09ZC5sZW5ndGgseCxOPSJ2YWx1ZSJpbiBGbz9Gby52YWx1ZTpGby50ZXh0Q29udGVudCxDPU4ubGVuZ3RoO2Zvcih1PTA7dTxtJiZkW3VdPT09Tlt1XTt1KyspO3ZhciBSPW0tdTtmb3IoeD0xO3g8PVImJmRbbS14XT09PU5bQy14XTt4KyspO3JldHVybiBRaD1OLnNsaWNlKHUsMTx4PzEteDp2b2lkIDApfWZ1bmN0aW9uIFpoKHUpe3ZhciBkPXUua2V5Q29kZTtyZXR1cm4iY2hhckNvZGUiaW4gdT8odT11LmNoYXJDb2RlLHU9PT0wJiZkPT09MTMmJih1PTEzKSk6dT1kLHU9PT0xMCYmKHU9MTMpLDMyPD11fHx1PT09MTM/dTowfWZ1bmN0aW9uIEpoKCl7cmV0dXJuITB9ZnVuY3Rpb24ganYoKXtyZXR1cm4hMX1mdW5jdGlvbiBJcyh1KXtmdW5jdGlvbiBkKG0seCxOLEMsUil7dGhpcy5fcmVhY3ROYW1lPW0sdGhpcy5fdGFyZ2V0SW5zdD1OLHRoaXMudHlwZT14LHRoaXMubmF0aXZlRXZlbnQ9Qyx0aGlzLnRhcmdldD1SLHRoaXMuY3VycmVudFRhcmdldD1udWxsO2Zvcih2YXIgVyBpbiB1KXUuaGFzT3duUHJvcGVydHkoVykmJihtPXVbV10sdGhpc1tXXT1tP20oQyk6Q1tXXSk7cmV0dXJuIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPShDLmRlZmF1bHRQcmV2ZW50ZWQhPW51bGw/Qy5kZWZhdWx0UHJldmVudGVkOkMucmV0dXJuVmFsdWU9PT0hMSk/Smg6anYsdGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1qdix0aGlzfXJldHVybiBxKGQucHJvdG90eXBlLHtwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMDt2YXIgbT10aGlzLm5hdGl2ZUV2ZW50O20mJihtLnByZXZlbnREZWZhdWx0P20ucHJldmVudERlZmF1bHQoKTp0eXBlb2YgbS5yZXR1cm5WYWx1ZSE9InVua25vd24iJiYobS5yZXR1cm5WYWx1ZT0hMSksdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9SmgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgbT10aGlzLm5hdGl2ZUV2ZW50O20mJihtLnN0b3BQcm9wYWdhdGlvbj9tLnN0b3BQcm9wYWdhdGlvbigpOnR5cGVvZiBtLmNhbmNlbEJ1YmJsZSE9InVua25vd24iJiYobS5jYW5jZWxCdWJibGU9ITApLHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9SmgpfSxwZXJzaXN0OmZ1bmN0aW9uKCl7fSxpc1BlcnNpc3RlbnQ6Smh9KSxkfXZhciBMYT17ZXZlbnRQaGFzZTowLGJ1YmJsZXM6MCxjYW5jZWxhYmxlOjAsdGltZVN0YW1wOmZ1bmN0aW9uKHUpe3JldHVybiB1LnRpbWVTdGFtcHx8RGF0ZS5ub3coKX0sZGVmYXVsdFByZXZlbnRlZDowLGlzVHJ1c3RlZDowfSxBeT1JcyhMYSksS3U9cSh7fSxMYSx7dmlldzowLGRldGFpbDowfSksa0E9SXMoS3UpLF95LE95LFh1LGVwPXEoe30sS3Use3NjcmVlblg6MCxzY3JlZW5ZOjAsY2xpZW50WDowLGNsaWVudFk6MCxwYWdlWDowLHBhZ2VZOjAsY3RybEtleTowLHNoaWZ0S2V5OjAsYWx0S2V5OjAsbWV0YUtleTowLGdldE1vZGlmaWVyU3RhdGU6THksYnV0dG9uOjAsYnV0dG9uczowLHJlbGF0ZWRUYXJnZXQ6ZnVuY3Rpb24odSl7cmV0dXJuIHUucmVsYXRlZFRhcmdldD09PXZvaWQgMD91LmZyb21FbGVtZW50PT09dS5zcmNFbGVtZW50P3UudG9FbGVtZW50OnUuZnJvbUVsZW1lbnQ6dS5yZWxhdGVkVGFyZ2V0fSxtb3ZlbWVudFg6ZnVuY3Rpb24odSl7cmV0dXJuIm1vdmVtZW50WCJpbiB1P3UubW92ZW1lbnRYOih1IT09WHUmJihYdSYmdS50eXBlPT09Im1vdXNlbW92ZSI/KF95PXUuc2NyZWVuWC1YdS5zY3JlZW5YLE95PXUuc2NyZWVuWS1YdS5zY3JlZW5ZKTpPeT1feT0wLFh1PXUpLF95KX0sbW92ZW1lbnRZOmZ1bmN0aW9uKHUpe3JldHVybiJtb3ZlbWVudFkiaW4gdT91Lm1vdmVtZW50WTpPeX19KSxHdj1JcyhlcCksQ0E9cSh7fSxlcCx7ZGF0YVRyYW5zZmVyOjB9KSwkQT1JcyhDQSksSUE9cSh7fSxLdSx7cmVsYXRlZFRhcmdldDowfSksRnk9SXMoSUEpLFRBPXEoe30sTGEse2FuaW1hdGlvbk5hbWU6MCxlbGFwc2VkVGltZTowLHBzZXVkb0VsZW1lbnQ6MH0pLEVBPUlzKFRBKSxSQT1xKHt9LExhLHtjbGlwYm9hcmREYXRhOmZ1bmN0aW9uKHUpe3JldHVybiJjbGlwYm9hcmREYXRhImluIHU/dS5jbGlwYm9hcmREYXRhOndpbmRvdy5jbGlwYm9hcmREYXRhfX0pLERBPUlzKFJBKSxBQT1xKHt9LExhLHtkYXRhOjB9KSxIdj1JcyhBQSksX0E9e0VzYzoiRXNjYXBlIixTcGFjZWJhcjoiICIsTGVmdDoiQXJyb3dMZWZ0IixVcDoiQXJyb3dVcCIsUmlnaHQ6IkFycm93UmlnaHQiLERvd246IkFycm93RG93biIsRGVsOiJEZWxldGUiLFdpbjoiT1MiLE1lbnU6IkNvbnRleHRNZW51IixBcHBzOiJDb250ZXh0TWVudSIsU2Nyb2xsOiJTY3JvbGxMb2NrIixNb3pQcmludGFibGVLZXk6IlVuaWRlbnRpZmllZCJ9LE9BPXs4OiJCYWNrc3BhY2UiLDk6IlRhYiIsMTI6IkNsZWFyIiwxMzoiRW50ZXIiLDE2OiJTaGlmdCIsMTc6IkNvbnRyb2wiLDE4OiJBbHQiLDE5OiJQYXVzZSIsMjA6IkNhcHNMb2NrIiwyNzoiRXNjYXBlIiwzMjoiICIsMzM6IlBhZ2VVcCIsMzQ6IlBhZ2VEb3duIiwzNToiRW5kIiwzNjoiSG9tZSIsMzc6IkFycm93TGVmdCIsMzg6IkFycm93VXAiLDM5OiJBcnJvd1JpZ2h0Iiw0MDoiQXJyb3dEb3duIiw0NToiSW5zZXJ0Iiw0NjoiRGVsZXRlIiwxMTI6IkYxIiwxMTM6IkYyIiwxMTQ6IkYzIiwxMTU6IkY0IiwxMTY6IkY1IiwxMTc6IkY2IiwxMTg6IkY3IiwxMTk6IkY4IiwxMjA6IkY5IiwxMjE6IkYxMCIsMTIyOiJGMTEiLDEyMzoiRjEyIiwxNDQ6Ik51bUxvY2siLDE0NToiU2Nyb2xsTG9jayIsMjI0OiJNZXRhIn0sRkE9e0FsdDoiYWx0S2V5IixDb250cm9sOiJjdHJsS2V5IixNZXRhOiJtZXRhS2V5IixTaGlmdDoic2hpZnRLZXkifTtmdW5jdGlvbiBMQSh1KXt2YXIgZD10aGlzLm5hdGl2ZUV2ZW50O3JldHVybiBkLmdldE1vZGlmaWVyU3RhdGU/ZC5nZXRNb2RpZmllclN0YXRlKHUpOih1PUZBW3VdKT8hIWRbdV06ITF9ZnVuY3Rpb24gTHkoKXtyZXR1cm4gTEF9dmFyIFBBPXEoe30sS3Use2tleTpmdW5jdGlvbih1KXtpZih1LmtleSl7dmFyIGQ9X0FbdS5rZXldfHx1LmtleTtpZihkIT09IlVuaWRlbnRpZmllZCIpcmV0dXJuIGR9cmV0dXJuIHUudHlwZT09PSJrZXlwcmVzcyI/KHU9WmgodSksdT09PTEzPyJFbnRlciI6U3RyaW5nLmZyb21DaGFyQ29kZSh1KSk6dS50eXBlPT09ImtleWRvd24ifHx1LnR5cGU9PT0ia2V5dXAiP09BW3Uua2V5Q29kZV18fCJVbmlkZW50aWZpZWQiOiIifSxjb2RlOjAsbG9jYXRpb246MCxjdHJsS2V5OjAsc2hpZnRLZXk6MCxhbHRLZXk6MCxtZXRhS2V5OjAscmVwZWF0OjAsbG9jYWxlOjAsZ2V0TW9kaWZpZXJTdGF0ZTpMeSxjaGFyQ29kZTpmdW5jdGlvbih1KXtyZXR1cm4gdS50eXBlPT09ImtleXByZXNzIj9aaCh1KTowfSxrZXlDb2RlOmZ1bmN0aW9uKHUpe3JldHVybiB1LnR5cGU9PT0ia2V5ZG93biJ8fHUudHlwZT09PSJrZXl1cCI/dS5rZXlDb2RlOjB9LHdoaWNoOmZ1bmN0aW9uKHUpe3JldHVybiB1LnR5cGU9PT0ia2V5cHJlc3MiP1poKHUpOnUudHlwZT09PSJrZXlkb3duInx8dS50eXBlPT09ImtleXVwIj91LmtleUNvZGU6MH19KSx6QT1JcyhQQSksTUE9cSh7fSxlcCx7cG9pbnRlcklkOjAsd2lkdGg6MCxoZWlnaHQ6MCxwcmVzc3VyZTowLHRhbmdlbnRpYWxQcmVzc3VyZTowLHRpbHRYOjAsdGlsdFk6MCx0d2lzdDowLHBvaW50ZXJUeXBlOjAsaXNQcmltYXJ5OjB9KSxxdj1JcyhNQSksQkE9cSh7fSxLdSx7dG91Y2hlczowLHRhcmdldFRvdWNoZXM6MCxjaGFuZ2VkVG91Y2hlczowLGFsdEtleTowLG1ldGFLZXk6MCxjdHJsS2V5OjAsc2hpZnRLZXk6MCxnZXRNb2RpZmllclN0YXRlOkx5fSksVkE9SXMoQkEpLFdBPXEoe30sTGEse3Byb3BlcnR5TmFtZTowLGVsYXBzZWRUaW1lOjAscHNldWRvRWxlbWVudDowfSksVUE9SXMoV0EpLGpBPXEoe30sZXAse2RlbHRhWDpmdW5jdGlvbih1KXtyZXR1cm4iZGVsdGFYImluIHU/dS5kZWx0YVg6IndoZWVsRGVsdGFYImluIHU/LXUud2hlZWxEZWx0YVg6MH0sZGVsdGFZOmZ1bmN0aW9uKHUpe3JldHVybiJkZWx0YVkiaW4gdT91LmRlbHRhWToid2hlZWxEZWx0YVkiaW4gdT8tdS53aGVlbERlbHRhWToid2hlZWxEZWx0YSJpbiB1Py11LndoZWVsRGVsdGE6MH0sZGVsdGFaOjAsZGVsdGFNb2RlOjB9KSxHQT1JcyhqQSksSEE9WzksMTMsMjcsMzJdLFB5PWEmJiJDb21wb3NpdGlvbkV2ZW50ImluIHdpbmRvdyxZdT1udWxsO2EmJiJkb2N1bWVudE1vZGUiaW4gZG9jdW1lbnQmJihZdT1kb2N1bWVudC5kb2N1bWVudE1vZGUpO3ZhciBxQT1hJiYiVGV4dEV2ZW50ImluIHdpbmRvdyYmIVl1LEt2PWEmJighUHl8fFl1JiY4PFl1JiYxMT49WXUpLFh2PSIgIixZdj0hMTtmdW5jdGlvbiBRdih1LGQpe3N3aXRjaCh1KXtjYXNlImtleXVwIjpyZXR1cm4gSEEuaW5kZXhPZihkLmtleUNvZGUpIT09LTE7Y2FzZSJrZXlkb3duIjpyZXR1cm4gZC5rZXlDb2RlIT09MjI5O2Nhc2Uia2V5cHJlc3MiOmNhc2UibW91c2Vkb3duIjpjYXNlImZvY3Vzb3V0IjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX1mdW5jdGlvbiBadih1KXtyZXR1cm4gdT11LmRldGFpbCx0eXBlb2YgdT09Im9iamVjdCImJiJkYXRhImluIHU/dS5kYXRhOm51bGx9dmFyIFBhPSExO2Z1bmN0aW9uIEtBKHUsZCl7c3dpdGNoKHUpe2Nhc2UiY29tcG9zaXRpb25lbmQiOnJldHVybiBadihkKTtjYXNlImtleXByZXNzIjpyZXR1cm4gZC53aGljaCE9PTMyP251bGw6KFl2PSEwLFh2KTtjYXNlInRleHRJbnB1dCI6cmV0dXJuIHU9ZC5kYXRhLHU9PT1YdiYmWXY/bnVsbDp1O2RlZmF1bHQ6cmV0dXJuIG51bGx9fWZ1bmN0aW9uIFhBKHUsZCl7aWYoUGEpcmV0dXJuIHU9PT0iY29tcG9zaXRpb25lbmQifHwhUHkmJlF2KHUsZCk/KHU9VXYoKSxRaD1EeT1Gbz1udWxsLFBhPSExLHUpOm51bGw7c3dpdGNoKHUpe2Nhc2UicGFzdGUiOnJldHVybiBudWxsO2Nhc2Uia2V5cHJlc3MiOmlmKCEoZC5jdHJsS2V5fHxkLmFsdEtleXx8ZC5tZXRhS2V5KXx8ZC5jdHJsS2V5JiZkLmFsdEtleSl7aWYoZC5jaGFyJiYxPGQuY2hhci5sZW5ndGgpcmV0dXJuIGQuY2hhcjtpZihkLndoaWNoKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGQud2hpY2gpfXJldHVybiBudWxsO2Nhc2UiY29tcG9zaXRpb25lbmQiOnJldHVybiBLdiYmZC5sb2NhbGUhPT0ia28iP251bGw6ZC5kYXRhO2RlZmF1bHQ6cmV0dXJuIG51bGx9fXZhciBZQT17Y29sb3I6ITAsZGF0ZTohMCxkYXRldGltZTohMCwiZGF0ZXRpbWUtbG9jYWwiOiEwLGVtYWlsOiEwLG1vbnRoOiEwLG51bWJlcjohMCxwYXNzd29yZDohMCxyYW5nZTohMCxzZWFyY2g6ITAsdGVsOiEwLHRleHQ6ITAsdGltZTohMCx1cmw6ITAsd2VlazohMH07ZnVuY3Rpb24gSnYodSl7dmFyIGQ9dSYmdS5ub2RlTmFtZSYmdS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiBkPT09ImlucHV0Ij8hIVlBW3UudHlwZV06ZD09PSJ0ZXh0YXJlYSJ9ZnVuY3Rpb24gZVModSxkLG0seCl7d3YoeCksZD1vcChkLCJvbkNoYW5nZSIpLDA8ZC5sZW5ndGgmJihtPW5ldyBBeSgib25DaGFuZ2UiLCJjaGFuZ2UiLG51bGwsbSx4KSx1LnB1c2goe2V2ZW50Om0sbGlzdGVuZXJzOmR9KSl9dmFyIFF1PW51bGwsWnU9bnVsbDtmdW5jdGlvbiBRQSh1KXt4Uyh1LDApfWZ1bmN0aW9uIHRwKHUpe3ZhciBkPVdhKHUpO2lmKG50KGQpKXJldHVybiB1fWZ1bmN0aW9uIFpBKHUsZCl7aWYodT09PSJjaGFuZ2UiKXJldHVybiBkfXZhciB0Uz0hMTtpZihhKXt2YXIgenk7aWYoYSl7dmFyIE15PSJvbmlucHV0ImluIGRvY3VtZW50O2lmKCFNeSl7dmFyIG5TPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO25TLnNldEF0dHJpYnV0ZSgib25pbnB1dCIsInJldHVybjsiKSxNeT10eXBlb2YgblMub25pbnB1dD09ImZ1bmN0aW9uIn16eT1NeX1lbHNlIHp5PSExO3RTPXp5JiYoIWRvY3VtZW50LmRvY3VtZW50TW9kZXx8OTxkb2N1bWVudC5kb2N1bWVudE1vZGUpfWZ1bmN0aW9uIHNTKCl7UXUmJihRdS5kZXRhY2hFdmVudCgib25wcm9wZXJ0eWNoYW5nZSIsclMpLFp1PVF1PW51bGwpfWZ1bmN0aW9uIHJTKHUpe2lmKHUucHJvcGVydHlOYW1lPT09InZhbHVlIiYmdHAoWnUpKXt2YXIgZD1bXTtlUyhkLFp1LHUseHkodSkpLGt2KFFBLGQpfX1mdW5jdGlvbiBKQSh1LGQsbSl7dT09PSJmb2N1c2luIj8oc1MoKSxRdT1kLFp1PW0sUXUuYXR0YWNoRXZlbnQoIm9ucHJvcGVydHljaGFuZ2UiLHJTKSk6dT09PSJmb2N1c291dCImJnNTKCl9ZnVuY3Rpb24gZV8odSl7aWYodT09PSJzZWxlY3Rpb25jaGFuZ2UifHx1PT09ImtleXVwInx8dT09PSJrZXlkb3duIilyZXR1cm4gdHAoWnUpfWZ1bmN0aW9uIHRfKHUsZCl7aWYodT09PSJjbGljayIpcmV0dXJuIHRwKGQpfWZ1bmN0aW9uIG5fKHUsZCl7aWYodT09PSJpbnB1dCJ8fHU9PT0iY2hhbmdlIilyZXR1cm4gdHAoZCl9ZnVuY3Rpb24gc18odSxkKXtyZXR1cm4gdT09PWQmJih1IT09MHx8MS91PT09MS9kKXx8dSE9PXUmJmQhPT1kfXZhciBhcj10eXBlb2YgT2JqZWN0LmlzPT0iZnVuY3Rpb24iP09iamVjdC5pczpzXztmdW5jdGlvbiBKdSh1LGQpe2lmKGFyKHUsZCkpcmV0dXJuITA7aWYodHlwZW9mIHUhPSJvYmplY3QifHx1PT09bnVsbHx8dHlwZW9mIGQhPSJvYmplY3QifHxkPT09bnVsbClyZXR1cm4hMTt2YXIgbT1PYmplY3Qua2V5cyh1KSx4PU9iamVjdC5rZXlzKGQpO2lmKG0ubGVuZ3RoIT09eC5sZW5ndGgpcmV0dXJuITE7Zm9yKHg9MDt4PG0ubGVuZ3RoO3grKyl7dmFyIE49bVt4XTtpZighbC5jYWxsKGQsTil8fCFhcih1W05dLGRbTl0pKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIG9TKHUpe2Zvcig7dSYmdS5maXJzdENoaWxkOyl1PXUuZmlyc3RDaGlsZDtyZXR1cm4gdX1mdW5jdGlvbiBpUyh1LGQpe3ZhciBtPW9TKHUpO3U9MDtmb3IodmFyIHg7bTspe2lmKG0ubm9kZVR5cGU9PT0zKXtpZih4PXUrbS50ZXh0Q29udGVudC5sZW5ndGgsdTw9ZCYmeD49ZClyZXR1cm57bm9kZTptLG9mZnNldDpkLXV9O3U9eH1lOntmb3IoO207KXtpZihtLm5leHRTaWJsaW5nKXttPW0ubmV4dFNpYmxpbmc7YnJlYWsgZX1tPW0ucGFyZW50Tm9kZX1tPXZvaWQgMH1tPW9TKG0pfX1mdW5jdGlvbiBhUyh1LGQpe3JldHVybiB1JiZkP3U9PT1kPyEwOnUmJnUubm9kZVR5cGU9PT0zPyExOmQmJmQubm9kZVR5cGU9PT0zP2FTKHUsZC5wYXJlbnROb2RlKToiY29udGFpbnMiaW4gdT91LmNvbnRhaW5zKGQpOnUuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ISEodS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSYxNik6ITE6ITF9ZnVuY3Rpb24gbFMoKXtmb3IodmFyIHU9d2luZG93LGQ9b3QoKTtkIGluc3RhbmNlb2YgdS5IVE1MSUZyYW1lRWxlbWVudDspe3RyeXt2YXIgbT10eXBlb2YgZC5jb250ZW50V2luZG93LmxvY2F0aW9uLmhyZWY9PSJzdHJpbmcifWNhdGNoe209ITF9aWYobSl1PWQuY29udGVudFdpbmRvdztlbHNlIGJyZWFrO2Q9b3QodS5kb2N1bWVudCl9cmV0dXJuIGR9ZnVuY3Rpb24gQnkodSl7dmFyIGQ9dSYmdS5ub2RlTmFtZSYmdS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiBkJiYoZD09PSJpbnB1dCImJih1LnR5cGU9PT0idGV4dCJ8fHUudHlwZT09PSJzZWFyY2gifHx1LnR5cGU9PT0idGVsInx8dS50eXBlPT09InVybCJ8fHUudHlwZT09PSJwYXNzd29yZCIpfHxkPT09InRleHRhcmVhInx8dS5jb250ZW50RWRpdGFibGU9PT0idHJ1ZSIpfWZ1bmN0aW9uIHJfKHUpe3ZhciBkPWxTKCksbT11LmZvY3VzZWRFbGVtLHg9dS5zZWxlY3Rpb25SYW5nZTtpZihkIT09bSYmbSYmbS5vd25lckRvY3VtZW50JiZhUyhtLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG0pKXtpZih4IT09bnVsbCYmQnkobSkpe2lmKGQ9eC5zdGFydCx1PXguZW5kLHU9PT12b2lkIDAmJih1PWQpLCJzZWxlY3Rpb25TdGFydCJpbiBtKW0uc2VsZWN0aW9uU3RhcnQ9ZCxtLnNlbGVjdGlvbkVuZD1NYXRoLm1pbih1LG0udmFsdWUubGVuZ3RoKTtlbHNlIGlmKHU9KGQ9bS5vd25lckRvY3VtZW50fHxkb2N1bWVudCkmJmQuZGVmYXVsdFZpZXd8fHdpbmRvdyx1LmdldFNlbGVjdGlvbil7dT11LmdldFNlbGVjdGlvbigpO3ZhciBOPW0udGV4dENvbnRlbnQubGVuZ3RoLEM9TWF0aC5taW4oeC5zdGFydCxOKTt4PXguZW5kPT09dm9pZCAwP0M6TWF0aC5taW4oeC5lbmQsTiksIXUuZXh0ZW5kJiZDPngmJihOPXgseD1DLEM9TiksTj1pUyhtLEMpO3ZhciBSPWlTKG0seCk7TiYmUiYmKHUucmFuZ2VDb3VudCE9PTF8fHUuYW5jaG9yTm9kZSE9PU4ubm9kZXx8dS5hbmNob3JPZmZzZXQhPT1OLm9mZnNldHx8dS5mb2N1c05vZGUhPT1SLm5vZGV8fHUuZm9jdXNPZmZzZXQhPT1SLm9mZnNldCkmJihkPWQuY3JlYXRlUmFuZ2UoKSxkLnNldFN0YXJ0KE4ubm9kZSxOLm9mZnNldCksdS5yZW1vdmVBbGxSYW5nZXMoKSxDPng/KHUuYWRkUmFuZ2UoZCksdS5leHRlbmQoUi5ub2RlLFIub2Zmc2V0KSk6KGQuc2V0RW5kKFIubm9kZSxSLm9mZnNldCksdS5hZGRSYW5nZShkKSkpfX1mb3IoZD1bXSx1PW07dT11LnBhcmVudE5vZGU7KXUubm9kZVR5cGU9PT0xJiZkLnB1c2goe2VsZW1lbnQ6dSxsZWZ0OnUuc2Nyb2xsTGVmdCx0b3A6dS5zY3JvbGxUb3B9KTtmb3IodHlwZW9mIG0uZm9jdXM9PSJmdW5jdGlvbiImJm0uZm9jdXMoKSxtPTA7bTxkLmxlbmd0aDttKyspdT1kW21dLHUuZWxlbWVudC5zY3JvbGxMZWZ0PXUubGVmdCx1LmVsZW1lbnQuc2Nyb2xsVG9wPXUudG9wfX12YXIgb189YSYmImRvY3VtZW50TW9kZSJpbiBkb2N1bWVudCYmMTE+PWRvY3VtZW50LmRvY3VtZW50TW9kZSx6YT1udWxsLFZ5PW51bGwsZWM9bnVsbCxXeT0hMTtmdW5jdGlvbiB1Uyh1LGQsbSl7dmFyIHg9bS53aW5kb3c9PT1tP20uZG9jdW1lbnQ6bS5ub2RlVHlwZT09PTk/bTptLm93bmVyRG9jdW1lbnQ7V3l8fHphPT1udWxsfHx6YSE9PW90KHgpfHwoeD16YSwic2VsZWN0aW9uU3RhcnQiaW4geCYmQnkoeCk/eD17c3RhcnQ6eC5zZWxlY3Rpb25TdGFydCxlbmQ6eC5zZWxlY3Rpb25FbmR9Oih4PSh4Lm93bmVyRG9jdW1lbnQmJngub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlld3x8d2luZG93KS5nZXRTZWxlY3Rpb24oKSx4PXthbmNob3JOb2RlOnguYW5jaG9yTm9kZSxhbmNob3JPZmZzZXQ6eC5hbmNob3JPZmZzZXQsZm9jdXNOb2RlOnguZm9jdXNOb2RlLGZvY3VzT2Zmc2V0OnguZm9jdXNPZmZzZXR9KSxlYyYmSnUoZWMseCl8fChlYz14LHg9b3AoVnksIm9uU2VsZWN0IiksMDx4Lmxlbmd0aCYmKGQ9bmV3IEF5KCJvblNlbGVjdCIsInNlbGVjdCIsbnVsbCxkLG0pLHUucHVzaCh7ZXZlbnQ6ZCxsaXN0ZW5lcnM6eH0pLGQudGFyZ2V0PXphKSkpfWZ1bmN0aW9uIG5wKHUsZCl7dmFyIG09e307cmV0dXJuIG1bdS50b0xvd2VyQ2FzZSgpXT1kLnRvTG93ZXJDYXNlKCksbVsiV2Via2l0Iit1XT0id2Via2l0IitkLG1bIk1veiIrdV09Im1veiIrZCxtfXZhciBNYT17YW5pbWF0aW9uZW5kOm5wKCJBbmltYXRpb24iLCJBbmltYXRpb25FbmQiKSxhbmltYXRpb25pdGVyYXRpb246bnAoIkFuaW1hdGlvbiIsIkFuaW1hdGlvbkl0ZXJhdGlvbiIpLGFuaW1hdGlvbnN0YXJ0Om5wKCJBbmltYXRpb24iLCJBbmltYXRpb25TdGFydCIpLHRyYW5zaXRpb25lbmQ6bnAoIlRyYW5zaXRpb24iLCJUcmFuc2l0aW9uRW5kIil9LFV5PXt9LGNTPXt9O2EmJihjUz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSwiQW5pbWF0aW9uRXZlbnQiaW4gd2luZG93fHwoZGVsZXRlIE1hLmFuaW1hdGlvbmVuZC5hbmltYXRpb24sZGVsZXRlIE1hLmFuaW1hdGlvbml0ZXJhdGlvbi5hbmltYXRpb24sZGVsZXRlIE1hLmFuaW1hdGlvbnN0YXJ0LmFuaW1hdGlvbiksIlRyYW5zaXRpb25FdmVudCJpbiB3aW5kb3d8fGRlbGV0ZSBNYS50cmFuc2l0aW9uZW5kLnRyYW5zaXRpb24pO2Z1bmN0aW9uIHNwKHUpe2lmKFV5W3VdKXJldHVybiBVeVt1XTtpZighTWFbdV0pcmV0dXJuIHU7dmFyIGQ9TWFbdV0sbTtmb3IobSBpbiBkKWlmKGQuaGFzT3duUHJvcGVydHkobSkmJm0gaW4gY1MpcmV0dXJuIFV5W3VdPWRbbV07cmV0dXJuIHV9dmFyIGRTPXNwKCJhbmltYXRpb25lbmQiKSxoUz1zcCgiYW5pbWF0aW9uaXRlcmF0aW9uIikscFM9c3AoImFuaW1hdGlvbnN0YXJ0IiksZlM9c3AoInRyYW5zaXRpb25lbmQiKSxtUz1uZXcgTWFwLGdTPSJhYm9ydCBhdXhDbGljayBjYW5jZWwgY2FuUGxheSBjYW5QbGF5VGhyb3VnaCBjbGljayBjbG9zZSBjb250ZXh0TWVudSBjb3B5IGN1dCBkcmFnIGRyYWdFbmQgZHJhZ0VudGVyIGRyYWdFeGl0IGRyYWdMZWF2ZSBkcmFnT3ZlciBkcmFnU3RhcnQgZHJvcCBkdXJhdGlvbkNoYW5nZSBlbXB0aWVkIGVuY3J5cHRlZCBlbmRlZCBlcnJvciBnb3RQb2ludGVyQ2FwdHVyZSBpbnB1dCBpbnZhbGlkIGtleURvd24ga2V5UHJlc3Mga2V5VXAgbG9hZCBsb2FkZWREYXRhIGxvYWRlZE1ldGFkYXRhIGxvYWRTdGFydCBsb3N0UG9pbnRlckNhcHR1cmUgbW91c2VEb3duIG1vdXNlTW92ZSBtb3VzZU91dCBtb3VzZU92ZXIgbW91c2VVcCBwYXN0ZSBwYXVzZSBwbGF5IHBsYXlpbmcgcG9pbnRlckNhbmNlbCBwb2ludGVyRG93biBwb2ludGVyTW92ZSBwb2ludGVyT3V0IHBvaW50ZXJPdmVyIHBvaW50ZXJVcCBwcm9ncmVzcyByYXRlQ2hhbmdlIHJlc2V0IHJlc2l6ZSBzZWVrZWQgc2Vla2luZyBzdGFsbGVkIHN1Ym1pdCBzdXNwZW5kIHRpbWVVcGRhdGUgdG91Y2hDYW5jZWwgdG91Y2hFbmQgdG91Y2hTdGFydCB2b2x1bWVDaGFuZ2Ugc2Nyb2xsIHRvZ2dsZSB0b3VjaE1vdmUgd2FpdGluZyB3aGVlbCIuc3BsaXQoIiAiKTtmdW5jdGlvbiBMbyh1LGQpe21TLnNldCh1LGQpLG8oZCxbdV0pfWZvcih2YXIgank9MDtqeTxnUy5sZW5ndGg7ankrKyl7dmFyIEd5PWdTW2p5XSxpXz1HeS50b0xvd2VyQ2FzZSgpLGFfPUd5WzBdLnRvVXBwZXJDYXNlKCkrR3kuc2xpY2UoMSk7TG8oaV8sIm9uIithXyl9TG8oZFMsIm9uQW5pbWF0aW9uRW5kIiksTG8oaFMsIm9uQW5pbWF0aW9uSXRlcmF0aW9uIiksTG8ocFMsIm9uQW5pbWF0aW9uU3RhcnQiKSxMbygiZGJsY2xpY2siLCJvbkRvdWJsZUNsaWNrIiksTG8oImZvY3VzaW4iLCJvbkZvY3VzIiksTG8oImZvY3Vzb3V0Iiwib25CbHVyIiksTG8oZlMsIm9uVHJhbnNpdGlvbkVuZCIpLGkoIm9uTW91c2VFbnRlciIsWyJtb3VzZW91dCIsIm1vdXNlb3ZlciJdKSxpKCJvbk1vdXNlTGVhdmUiLFsibW91c2VvdXQiLCJtb3VzZW92ZXIiXSksaSgib25Qb2ludGVyRW50ZXIiLFsicG9pbnRlcm91dCIsInBvaW50ZXJvdmVyIl0pLGkoIm9uUG9pbnRlckxlYXZlIixbInBvaW50ZXJvdXQiLCJwb2ludGVyb3ZlciJdKSxvKCJvbkNoYW5nZSIsImNoYW5nZSBjbGljayBmb2N1c2luIGZvY3Vzb3V0IGlucHV0IGtleWRvd24ga2V5dXAgc2VsZWN0aW9uY2hhbmdlIi5zcGxpdCgiICIpKSxvKCJvblNlbGVjdCIsImZvY3Vzb3V0IGNvbnRleHRtZW51IGRyYWdlbmQgZm9jdXNpbiBrZXlkb3duIGtleXVwIG1vdXNlZG93biBtb3VzZXVwIHNlbGVjdGlvbmNoYW5nZSIuc3BsaXQoIiAiKSksbygib25CZWZvcmVJbnB1dCIsWyJjb21wb3NpdGlvbmVuZCIsImtleXByZXNzIiwidGV4dElucHV0IiwicGFzdGUiXSksbygib25Db21wb3NpdGlvbkVuZCIsImNvbXBvc2l0aW9uZW5kIGZvY3Vzb3V0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgbW91c2Vkb3duIi5zcGxpdCgiICIpKSxvKCJvbkNvbXBvc2l0aW9uU3RhcnQiLCJjb21wb3NpdGlvbnN0YXJ0IGZvY3Vzb3V0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgbW91c2Vkb3duIi5zcGxpdCgiICIpKSxvKCJvbkNvbXBvc2l0aW9uVXBkYXRlIiwiY29tcG9zaXRpb251cGRhdGUgZm9jdXNvdXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBtb3VzZWRvd24iLnNwbGl0KCIgIikpO3ZhciB0Yz0iYWJvcnQgY2FucGxheSBjYW5wbGF5dGhyb3VnaCBkdXJhdGlvbmNoYW5nZSBlbXB0aWVkIGVuY3J5cHRlZCBlbmRlZCBlcnJvciBsb2FkZWRkYXRhIGxvYWRlZG1ldGFkYXRhIGxvYWRzdGFydCBwYXVzZSBwbGF5IHBsYXlpbmcgcHJvZ3Jlc3MgcmF0ZWNoYW5nZSByZXNpemUgc2Vla2VkIHNlZWtpbmcgc3RhbGxlZCBzdXNwZW5kIHRpbWV1cGRhdGUgdm9sdW1lY2hhbmdlIHdhaXRpbmciLnNwbGl0KCIgIiksbF89bmV3IFNldCgiY2FuY2VsIGNsb3NlIGludmFsaWQgbG9hZCBzY3JvbGwgdG9nZ2xlIi5zcGxpdCgiICIpLmNvbmNhdCh0YykpO2Z1bmN0aW9uIHlTKHUsZCxtKXt2YXIgeD11LnR5cGV8fCJ1bmtub3duLWV2ZW50Ijt1LmN1cnJlbnRUYXJnZXQ9bSxpQSh4LGQsdm9pZCAwLHUpLHUuY3VycmVudFRhcmdldD1udWxsfWZ1bmN0aW9uIHhTKHUsZCl7ZD0oZCY0KSE9PTA7Zm9yKHZhciBtPTA7bTx1Lmxlbmd0aDttKyspe3ZhciB4PXVbbV0sTj14LmV2ZW50O3g9eC5saXN0ZW5lcnM7ZTp7dmFyIEM9dm9pZCAwO2lmKGQpZm9yKHZhciBSPXgubGVuZ3RoLTE7MDw9UjtSLS0pe3ZhciBXPXhbUl0sWj1XLmluc3RhbmNlLHVlPVcuY3VycmVudFRhcmdldDtpZihXPVcubGlzdGVuZXIsWiE9PUMmJk4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKSlicmVhayBlO3lTKE4sVyx1ZSksQz1afWVsc2UgZm9yKFI9MDtSPHgubGVuZ3RoO1IrKyl7aWYoVz14W1JdLFo9Vy5pbnN0YW5jZSx1ZT1XLmN1cnJlbnRUYXJnZXQsVz1XLmxpc3RlbmVyLFohPT1DJiZOLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYnJlYWsgZTt5UyhOLFcsdWUpLEM9Wn19fWlmKFZoKXRocm93IHU9U3ksVmg9ITEsU3k9bnVsbCx1fWZ1bmN0aW9uICR0KHUsZCl7dmFyIG09ZFtKeV07bT09PXZvaWQgMCYmKG09ZFtKeV09bmV3IFNldCk7dmFyIHg9dSsiX19idWJibGUiO20uaGFzKHgpfHwoYlMoZCx1LDIsITEpLG0uYWRkKHgpKX1mdW5jdGlvbiBIeSh1LGQsbSl7dmFyIHg9MDtkJiYoeHw9NCksYlMobSx1LHgsZCl9dmFyIHJwPSJfcmVhY3RMaXN0ZW5pbmciK01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO2Z1bmN0aW9uIG5jKHUpe2lmKCF1W3JwXSl7dVtycF09ITAscy5mb3JFYWNoKGZ1bmN0aW9uKG0pe20hPT0ic2VsZWN0aW9uY2hhbmdlIiYmKGxfLmhhcyhtKXx8SHkobSwhMSx1KSxIeShtLCEwLHUpKX0pO3ZhciBkPXUubm9kZVR5cGU9PT05P3U6dS5vd25lckRvY3VtZW50O2Q9PT1udWxsfHxkW3JwXXx8KGRbcnBdPSEwLEh5KCJzZWxlY3Rpb25jaGFuZ2UiLCExLGQpKX19ZnVuY3Rpb24gYlModSxkLG0seCl7c3dpdGNoKFd2KGQpKXtjYXNlIDE6dmFyIE49U0E7YnJlYWs7Y2FzZSA0Ok49TkE7YnJlYWs7ZGVmYXVsdDpOPUV5fW09Ti5iaW5kKG51bGwsZCxtLHUpLE49dm9pZCAwLCF2eXx8ZCE9PSJ0b3VjaHN0YXJ0IiYmZCE9PSJ0b3VjaG1vdmUiJiZkIT09IndoZWVsInx8KE49ITApLHg/TiE9PXZvaWQgMD91LmFkZEV2ZW50TGlzdGVuZXIoZCxtLHtjYXB0dXJlOiEwLHBhc3NpdmU6Tn0pOnUuYWRkRXZlbnRMaXN0ZW5lcihkLG0sITApOk4hPT12b2lkIDA/dS5hZGRFdmVudExpc3RlbmVyKGQsbSx7cGFzc2l2ZTpOfSk6dS5hZGRFdmVudExpc3RlbmVyKGQsbSwhMSl9ZnVuY3Rpb24gcXkodSxkLG0seCxOKXt2YXIgQz14O2lmKChkJjEpPT09MCYmKGQmMik9PT0wJiZ4IT09bnVsbCllOmZvcig7Oyl7aWYoeD09PW51bGwpcmV0dXJuO3ZhciBSPXgudGFnO2lmKFI9PT0zfHxSPT09NCl7dmFyIFc9eC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbztpZihXPT09Tnx8Vy5ub2RlVHlwZT09PTgmJlcucGFyZW50Tm9kZT09PU4pYnJlYWs7aWYoUj09PTQpZm9yKFI9eC5yZXR1cm47UiE9PW51bGw7KXt2YXIgWj1SLnRhZztpZigoWj09PTN8fFo9PT00KSYmKFo9Ui5zdGF0ZU5vZGUuY29udGFpbmVySW5mbyxaPT09Tnx8Wi5ub2RlVHlwZT09PTgmJloucGFyZW50Tm9kZT09PU4pKXJldHVybjtSPVIucmV0dXJufWZvcig7VyE9PW51bGw7KXtpZihSPUVpKFcpLFI9PT1udWxsKXJldHVybjtpZihaPVIudGFnLFo9PT01fHxaPT09Nil7eD1DPVI7Y29udGludWUgZX1XPVcucGFyZW50Tm9kZX19eD14LnJldHVybn1rdihmdW5jdGlvbigpe3ZhciB1ZT1DLHhlPXh5KG0pLGJlPVtdO2U6e3ZhciB5ZT1tUy5nZXQodSk7aWYoeWUhPT12b2lkIDApe3ZhciBUZT1BeSxBZT11O3N3aXRjaCh1KXtjYXNlImtleXByZXNzIjppZihaaChtKT09PTApYnJlYWsgZTtjYXNlImtleWRvd24iOmNhc2Uia2V5dXAiOlRlPXpBO2JyZWFrO2Nhc2UiZm9jdXNpbiI6QWU9ImZvY3VzIixUZT1GeTticmVhaztjYXNlImZvY3Vzb3V0IjpBZT0iYmx1ciIsVGU9Rnk7YnJlYWs7Y2FzZSJiZWZvcmVibHVyIjpjYXNlImFmdGVyYmx1ciI6VGU9Rnk7YnJlYWs7Y2FzZSJjbGljayI6aWYobS5idXR0b249PT0yKWJyZWFrIGU7Y2FzZSJhdXhjbGljayI6Y2FzZSJkYmxjbGljayI6Y2FzZSJtb3VzZWRvd24iOmNhc2UibW91c2Vtb3ZlIjpjYXNlIm1vdXNldXAiOmNhc2UibW91c2VvdXQiOmNhc2UibW91c2VvdmVyIjpjYXNlImNvbnRleHRtZW51IjpUZT1HdjticmVhaztjYXNlImRyYWciOmNhc2UiZHJhZ2VuZCI6Y2FzZSJkcmFnZW50ZXIiOmNhc2UiZHJhZ2V4aXQiOmNhc2UiZHJhZ2xlYXZlIjpjYXNlImRyYWdvdmVyIjpjYXNlImRyYWdzdGFydCI6Y2FzZSJkcm9wIjpUZT0kQTticmVhaztjYXNlInRvdWNoY2FuY2VsIjpjYXNlInRvdWNoZW5kIjpjYXNlInRvdWNobW92ZSI6Y2FzZSJ0b3VjaHN0YXJ0IjpUZT1WQTticmVhaztjYXNlIGRTOmNhc2UgaFM6Y2FzZSBwUzpUZT1FQTticmVhaztjYXNlIGZTOlRlPVVBO2JyZWFrO2Nhc2Uic2Nyb2xsIjpUZT1rQTticmVhaztjYXNlIndoZWVsIjpUZT1HQTticmVhaztjYXNlImNvcHkiOmNhc2UiY3V0IjpjYXNlInBhc3RlIjpUZT1EQTticmVhaztjYXNlImdvdHBvaW50ZXJjYXB0dXJlIjpjYXNlImxvc3Rwb2ludGVyY2FwdHVyZSI6Y2FzZSJwb2ludGVyY2FuY2VsIjpjYXNlInBvaW50ZXJkb3duIjpjYXNlInBvaW50ZXJtb3ZlIjpjYXNlInBvaW50ZXJvdXQiOmNhc2UicG9pbnRlcm92ZXIiOmNhc2UicG9pbnRlcnVwIjpUZT1xdn12YXIgRmU9KGQmNCkhPT0wLEt0PSFGZSYmdT09PSJzY3JvbGwiLGFlPUZlP3llIT09bnVsbD95ZSsiQ2FwdHVyZSI6bnVsbDp5ZTtGZT1bXTtmb3IodmFyIHRlPXVlLGxlO3RlIT09bnVsbDspe2xlPXRlO3ZhciBTZT1sZS5zdGF0ZU5vZGU7aWYobGUudGFnPT09NSYmU2UhPT1udWxsJiYobGU9U2UsYWUhPT1udWxsJiYoU2U9enUodGUsYWUpLFNlIT1udWxsJiZGZS5wdXNoKHNjKHRlLFNlLGxlKSkpKSxLdClicmVhazt0ZT10ZS5yZXR1cm59MDxGZS5sZW5ndGgmJih5ZT1uZXcgVGUoeWUsQWUsbnVsbCxtLHhlKSxiZS5wdXNoKHtldmVudDp5ZSxsaXN0ZW5lcnM6RmV9KSl9fWlmKChkJjcpPT09MCl7ZTp7aWYoeWU9dT09PSJtb3VzZW92ZXIifHx1PT09InBvaW50ZXJvdmVyIixUZT11PT09Im1vdXNlb3V0Inx8dT09PSJwb2ludGVyb3V0Iix5ZSYmbSE9PXl5JiYoQWU9bS5yZWxhdGVkVGFyZ2V0fHxtLmZyb21FbGVtZW50KSYmKEVpKEFlKXx8QWVbdG9dKSlicmVhayBlO2lmKChUZXx8eWUpJiYoeWU9eGUud2luZG93PT09eGU/eGU6KHllPXhlLm93bmVyRG9jdW1lbnQpP3llLmRlZmF1bHRWaWV3fHx5ZS5wYXJlbnRXaW5kb3c6d2luZG93LFRlPyhBZT1tLnJlbGF0ZWRUYXJnZXR8fG0udG9FbGVtZW50LFRlPXVlLEFlPUFlP0VpKEFlKTpudWxsLEFlIT09bnVsbCYmKEt0PVRpKEFlKSxBZSE9PUt0fHxBZS50YWchPT01JiZBZS50YWchPT02KSYmKEFlPW51bGwpKTooVGU9bnVsbCxBZT11ZSksVGUhPT1BZSkpe2lmKEZlPUd2LFNlPSJvbk1vdXNlTGVhdmUiLGFlPSJvbk1vdXNlRW50ZXIiLHRlPSJtb3VzZSIsKHU9PT0icG9pbnRlcm91dCJ8fHU9PT0icG9pbnRlcm92ZXIiKSYmKEZlPXF2LFNlPSJvblBvaW50ZXJMZWF2ZSIsYWU9Im9uUG9pbnRlckVudGVyIix0ZT0icG9pbnRlciIpLEt0PVRlPT1udWxsP3llOldhKFRlKSxsZT1BZT09bnVsbD95ZTpXYShBZSkseWU9bmV3IEZlKFNlLHRlKyJsZWF2ZSIsVGUsbSx4ZSkseWUudGFyZ2V0PUt0LHllLnJlbGF0ZWRUYXJnZXQ9bGUsU2U9bnVsbCxFaSh4ZSk9PT11ZSYmKEZlPW5ldyBGZShhZSx0ZSsiZW50ZXIiLEFlLG0seGUpLEZlLnRhcmdldD1sZSxGZS5yZWxhdGVkVGFyZ2V0PUt0LFNlPUZlKSxLdD1TZSxUZSYmQWUpdDp7Zm9yKEZlPVRlLGFlPUFlLHRlPTAsbGU9RmU7bGU7bGU9QmEobGUpKXRlKys7Zm9yKGxlPTAsU2U9YWU7U2U7U2U9QmEoU2UpKWxlKys7Zm9yKDswPHRlLWxlOylGZT1CYShGZSksdGUtLTtmb3IoOzA8bGUtdGU7KWFlPUJhKGFlKSxsZS0tO2Zvcig7dGUtLTspe2lmKEZlPT09YWV8fGFlIT09bnVsbCYmRmU9PT1hZS5hbHRlcm5hdGUpYnJlYWsgdDtGZT1CYShGZSksYWU9QmEoYWUpfUZlPW51bGx9ZWxzZSBGZT1udWxsO1RlIT09bnVsbCYmd1MoYmUseWUsVGUsRmUsITEpLEFlIT09bnVsbCYmS3QhPT1udWxsJiZ3UyhiZSxLdCxBZSxGZSwhMCl9fWU6e2lmKHllPXVlP1dhKHVlKTp3aW5kb3csVGU9eWUubm9kZU5hbWUmJnllLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksVGU9PT0ic2VsZWN0Inx8VGU9PT0iaW5wdXQiJiZ5ZS50eXBlPT09ImZpbGUiKXZhciBQZT1aQTtlbHNlIGlmKEp2KHllKSlpZih0UylQZT1uXztlbHNle1BlPWVfO3ZhciBCZT1KQX1lbHNlKFRlPXllLm5vZGVOYW1lKSYmVGUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCImJih5ZS50eXBlPT09ImNoZWNrYm94Inx8eWUudHlwZT09PSJyYWRpbyIpJiYoUGU9dF8pO2lmKFBlJiYoUGU9UGUodSx1ZSkpKXtlUyhiZSxQZSxtLHhlKTticmVhayBlfUJlJiZCZSh1LHllLHVlKSx1PT09ImZvY3Vzb3V0IiYmKEJlPXllLl93cmFwcGVyU3RhdGUpJiZCZS5jb250cm9sbGVkJiZ5ZS50eXBlPT09Im51bWJlciImJkNzKHllLCJudW1iZXIiLHllLnZhbHVlKX1zd2l0Y2goQmU9dWU/V2EodWUpOndpbmRvdyx1KXtjYXNlImZvY3VzaW4iOihKdihCZSl8fEJlLmNvbnRlbnRFZGl0YWJsZT09PSJ0cnVlIikmJih6YT1CZSxWeT11ZSxlYz1udWxsKTticmVhaztjYXNlImZvY3Vzb3V0IjplYz1WeT16YT1udWxsO2JyZWFrO2Nhc2UibW91c2Vkb3duIjpXeT0hMDticmVhaztjYXNlImNvbnRleHRtZW51IjpjYXNlIm1vdXNldXAiOmNhc2UiZHJhZ2VuZCI6V3k9ITEsdVMoYmUsbSx4ZSk7YnJlYWs7Y2FzZSJzZWxlY3Rpb25jaGFuZ2UiOmlmKG9fKWJyZWFrO2Nhc2Uia2V5ZG93biI6Y2FzZSJrZXl1cCI6dVMoYmUsbSx4ZSl9dmFyIFZlO2lmKFB5KWU6e3N3aXRjaCh1KXtjYXNlImNvbXBvc2l0aW9uc3RhcnQiOnZhciBHZT0ib25Db21wb3NpdGlvblN0YXJ0IjticmVhayBlO2Nhc2UiY29tcG9zaXRpb25lbmQiOkdlPSJvbkNvbXBvc2l0aW9uRW5kIjticmVhayBlO2Nhc2UiY29tcG9zaXRpb251cGRhdGUiOkdlPSJvbkNvbXBvc2l0aW9uVXBkYXRlIjticmVhayBlfUdlPXZvaWQgMH1lbHNlIFBhP1F2KHUsbSkmJihHZT0ib25Db21wb3NpdGlvbkVuZCIpOnU9PT0ia2V5ZG93biImJm0ua2V5Q29kZT09PTIyOSYmKEdlPSJvbkNvbXBvc2l0aW9uU3RhcnQiKTtHZSYmKEt2JiZtLmxvY2FsZSE9PSJrbyImJihQYXx8R2UhPT0ib25Db21wb3NpdGlvblN0YXJ0Ij9HZT09PSJvbkNvbXBvc2l0aW9uRW5kIiYmUGEmJihWZT1VdigpKTooRm89eGUsRHk9InZhbHVlImluIEZvP0ZvLnZhbHVlOkZvLnRleHRDb250ZW50LFBhPSEwKSksQmU9b3AodWUsR2UpLDA8QmUubGVuZ3RoJiYoR2U9bmV3IEh2KEdlLHUsbnVsbCxtLHhlKSxiZS5wdXNoKHtldmVudDpHZSxsaXN0ZW5lcnM6QmV9KSxWZT9HZS5kYXRhPVZlOihWZT1adihtKSxWZSE9PW51bGwmJihHZS5kYXRhPVZlKSkpKSwoVmU9cUE/S0EodSxtKTpYQSh1LG0pKSYmKHVlPW9wKHVlLCJvbkJlZm9yZUlucHV0IiksMDx1ZS5sZW5ndGgmJih4ZT1uZXcgSHYoIm9uQmVmb3JlSW5wdXQiLCJiZWZvcmVpbnB1dCIsbnVsbCxtLHhlKSxiZS5wdXNoKHtldmVudDp4ZSxsaXN0ZW5lcnM6dWV9KSx4ZS5kYXRhPVZlKSl9eFMoYmUsZCl9KX1mdW5jdGlvbiBzYyh1LGQsbSl7cmV0dXJue2luc3RhbmNlOnUsbGlzdGVuZXI6ZCxjdXJyZW50VGFyZ2V0Om19fWZ1bmN0aW9uIG9wKHUsZCl7Zm9yKHZhciBtPWQrIkNhcHR1cmUiLHg9W107dSE9PW51bGw7KXt2YXIgTj11LEM9Ti5zdGF0ZU5vZGU7Ti50YWc9PT01JiZDIT09bnVsbCYmKE49QyxDPXp1KHUsbSksQyE9bnVsbCYmeC51bnNoaWZ0KHNjKHUsQyxOKSksQz16dSh1LGQpLEMhPW51bGwmJngucHVzaChzYyh1LEMsTikpKSx1PXUucmV0dXJufXJldHVybiB4fWZ1bmN0aW9uIEJhKHUpe2lmKHU9PT1udWxsKXJldHVybiBudWxsO2RvIHU9dS5yZXR1cm47d2hpbGUodSYmdS50YWchPT01KTtyZXR1cm4gdXx8bnVsbH1mdW5jdGlvbiB3Uyh1LGQsbSx4LE4pe2Zvcih2YXIgQz1kLl9yZWFjdE5hbWUsUj1bXTttIT09bnVsbCYmbSE9PXg7KXt2YXIgVz1tLFo9Vy5hbHRlcm5hdGUsdWU9Vy5zdGF0ZU5vZGU7aWYoWiE9PW51bGwmJlo9PT14KWJyZWFrO1cudGFnPT09NSYmdWUhPT1udWxsJiYoVz11ZSxOPyhaPXp1KG0sQyksWiE9bnVsbCYmUi51bnNoaWZ0KHNjKG0sWixXKSkpOk58fChaPXp1KG0sQyksWiE9bnVsbCYmUi5wdXNoKHNjKG0sWixXKSkpKSxtPW0ucmV0dXJufVIubGVuZ3RoIT09MCYmdS5wdXNoKHtldmVudDpkLGxpc3RlbmVyczpSfSl9dmFyIHVfPS9cclxuPy9nLGNfPS9cdTAwMDB8XHVGRkZEL2c7ZnVuY3Rpb24gdlModSl7cmV0dXJuKHR5cGVvZiB1PT0ic3RyaW5nIj91OiIiK3UpLnJlcGxhY2UodV8sYApgKS5yZXBsYWNlKGNfLCIiKX1mdW5jdGlvbiBpcCh1LGQsbSl7aWYoZD12UyhkKSx2Uyh1KSE9PWQmJm0pdGhyb3cgRXJyb3IodCg0MjUpKX1mdW5jdGlvbiBhcCgpe312YXIgS3k9bnVsbCxYeT1udWxsO2Z1bmN0aW9uIFl5KHUsZCl7cmV0dXJuIHU9PT0idGV4dGFyZWEifHx1PT09Im5vc2NyaXB0Inx8dHlwZW9mIGQuY2hpbGRyZW49PSJzdHJpbmcifHx0eXBlb2YgZC5jaGlsZHJlbj09Im51bWJlciJ8fHR5cGVvZiBkLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPT0ib2JqZWN0IiYmZC5kYW5nZXJvdXNseVNldElubmVySFRNTCE9PW51bGwmJmQuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwuX19odG1sIT1udWxsfXZhciBReT10eXBlb2Ygc2V0VGltZW91dD09ImZ1bmN0aW9uIj9zZXRUaW1lb3V0OnZvaWQgMCxkXz10eXBlb2YgY2xlYXJUaW1lb3V0PT0iZnVuY3Rpb24iP2NsZWFyVGltZW91dDp2b2lkIDAsU1M9dHlwZW9mIFByb21pc2U9PSJmdW5jdGlvbiI/UHJvbWlzZTp2b2lkIDAsaF89dHlwZW9mIHF1ZXVlTWljcm90YXNrPT0iZnVuY3Rpb24iP3F1ZXVlTWljcm90YXNrOnR5cGVvZiBTUzwidSI/ZnVuY3Rpb24odSl7cmV0dXJuIFNTLnJlc29sdmUobnVsbCkudGhlbih1KS5jYXRjaChwXyl9OlF5O2Z1bmN0aW9uIHBfKHUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyB1fSl9ZnVuY3Rpb24gWnkodSxkKXt2YXIgbT1kLHg9MDtkb3t2YXIgTj1tLm5leHRTaWJsaW5nO2lmKHUucmVtb3ZlQ2hpbGQobSksTiYmTi5ub2RlVHlwZT09PTgpaWYobT1OLmRhdGEsbT09PSIvJCIpe2lmKHg9PT0wKXt1LnJlbW92ZUNoaWxkKE4pLHF1KGQpO3JldHVybn14LS19ZWxzZSBtIT09IiQiJiZtIT09IiQ/IiYmbSE9PSIkISJ8fHgrKzttPU59d2hpbGUobSk7cXUoZCl9ZnVuY3Rpb24gUG8odSl7Zm9yKDt1IT1udWxsO3U9dS5uZXh0U2libGluZyl7dmFyIGQ9dS5ub2RlVHlwZTtpZihkPT09MXx8ZD09PTMpYnJlYWs7aWYoZD09PTgpe2lmKGQ9dS5kYXRhLGQ9PT0iJCJ8fGQ9PT0iJCEifHxkPT09IiQ/IilicmVhaztpZihkPT09Ii8kIilyZXR1cm4gbnVsbH19cmV0dXJuIHV9ZnVuY3Rpb24gTlModSl7dT11LnByZXZpb3VzU2libGluZztmb3IodmFyIGQ9MDt1Oyl7aWYodS5ub2RlVHlwZT09PTgpe3ZhciBtPXUuZGF0YTtpZihtPT09IiQifHxtPT09IiQhInx8bT09PSIkPyIpe2lmKGQ9PT0wKXJldHVybiB1O2QtLX1lbHNlIG09PT0iLyQiJiZkKyt9dT11LnByZXZpb3VzU2libGluZ31yZXR1cm4gbnVsbH12YXIgVmE9TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiksRHI9Il9fcmVhY3RGaWJlciQiK1ZhLHJjPSJfX3JlYWN0UHJvcHMkIitWYSx0bz0iX19yZWFjdENvbnRhaW5lciQiK1ZhLEp5PSJfX3JlYWN0RXZlbnRzJCIrVmEsZl89Il9fcmVhY3RMaXN0ZW5lcnMkIitWYSxtXz0iX19yZWFjdEhhbmRsZXMkIitWYTtmdW5jdGlvbiBFaSh1KXt2YXIgZD11W0RyXTtpZihkKXJldHVybiBkO2Zvcih2YXIgbT11LnBhcmVudE5vZGU7bTspe2lmKGQ9bVt0b118fG1bRHJdKXtpZihtPWQuYWx0ZXJuYXRlLGQuY2hpbGQhPT1udWxsfHxtIT09bnVsbCYmbS5jaGlsZCE9PW51bGwpZm9yKHU9TlModSk7dSE9PW51bGw7KXtpZihtPXVbRHJdKXJldHVybiBtO3U9TlModSl9cmV0dXJuIGR9dT1tLG09dS5wYXJlbnROb2RlfXJldHVybiBudWxsfWZ1bmN0aW9uIG9jKHUpe3JldHVybiB1PXVbRHJdfHx1W3RvXSwhdXx8dS50YWchPT01JiZ1LnRhZyE9PTYmJnUudGFnIT09MTMmJnUudGFnIT09Mz9udWxsOnV9ZnVuY3Rpb24gV2EodSl7aWYodS50YWc9PT01fHx1LnRhZz09PTYpcmV0dXJuIHUuc3RhdGVOb2RlO3Rocm93IEVycm9yKHQoMzMpKX1mdW5jdGlvbiBscCh1KXtyZXR1cm4gdVtyY118fG51bGx9dmFyIGV4PVtdLFVhPS0xO2Z1bmN0aW9uIHpvKHUpe3JldHVybntjdXJyZW50OnV9fWZ1bmN0aW9uIEl0KHUpezA+VWF8fCh1LmN1cnJlbnQ9ZXhbVWFdLGV4W1VhXT1udWxsLFVhLS0pfWZ1bmN0aW9uIEN0KHUsZCl7VWErKyxleFtVYV09dS5jdXJyZW50LHUuY3VycmVudD1kfXZhciBNbz17fSxQbj16byhNbyksdXM9em8oITEpLFJpPU1vO2Z1bmN0aW9uIGphKHUsZCl7dmFyIG09dS50eXBlLmNvbnRleHRUeXBlcztpZighbSlyZXR1cm4gTW87dmFyIHg9dS5zdGF0ZU5vZGU7aWYoeCYmeC5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZFVubWFza2VkQ2hpbGRDb250ZXh0PT09ZClyZXR1cm4geC5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZE1hc2tlZENoaWxkQ29udGV4dDt2YXIgTj17fSxDO2ZvcihDIGluIG0pTltDXT1kW0NdO3JldHVybiB4JiYodT11LnN0YXRlTm9kZSx1Ll9fcmVhY3RJbnRlcm5hbE1lbW9pemVkVW5tYXNrZWRDaGlsZENvbnRleHQ9ZCx1Ll9fcmVhY3RJbnRlcm5hbE1lbW9pemVkTWFza2VkQ2hpbGRDb250ZXh0PU4pLE59ZnVuY3Rpb24gY3ModSl7cmV0dXJuIHU9dS5jaGlsZENvbnRleHRUeXBlcyx1IT1udWxsfWZ1bmN0aW9uIHVwKCl7SXQodXMpLEl0KFBuKX1mdW5jdGlvbiBrUyh1LGQsbSl7aWYoUG4uY3VycmVudCE9PU1vKXRocm93IEVycm9yKHQoMTY4KSk7Q3QoUG4sZCksQ3QodXMsbSl9ZnVuY3Rpb24gQ1ModSxkLG0pe3ZhciB4PXUuc3RhdGVOb2RlO2lmKGQ9ZC5jaGlsZENvbnRleHRUeXBlcyx0eXBlb2YgeC5nZXRDaGlsZENvbnRleHQhPSJmdW5jdGlvbiIpcmV0dXJuIG07eD14LmdldENoaWxkQ29udGV4dCgpO2Zvcih2YXIgTiBpbiB4KWlmKCEoTiBpbiBkKSl0aHJvdyBFcnJvcih0KDEwOCx3ZSh1KXx8IlVua25vd24iLE4pKTtyZXR1cm4gcSh7fSxtLHgpfWZ1bmN0aW9uIGNwKHUpe3JldHVybiB1PSh1PXUuc3RhdGVOb2RlKSYmdS5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZE1lcmdlZENoaWxkQ29udGV4dHx8TW8sUmk9UG4uY3VycmVudCxDdChQbix1KSxDdCh1cyx1cy5jdXJyZW50KSwhMH1mdW5jdGlvbiAkUyh1LGQsbSl7dmFyIHg9dS5zdGF0ZU5vZGU7aWYoIXgpdGhyb3cgRXJyb3IodCgxNjkpKTttPyh1PUNTKHUsZCxSaSkseC5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZE1lcmdlZENoaWxkQ29udGV4dD11LEl0KHVzKSxJdChQbiksQ3QoUG4sdSkpOkl0KHVzKSxDdCh1cyxtKX12YXIgbm89bnVsbCxkcD0hMSx0eD0hMTtmdW5jdGlvbiBJUyh1KXtubz09PW51bGw/bm89W3VdOm5vLnB1c2godSl9ZnVuY3Rpb24gZ18odSl7ZHA9ITAsSVModSl9ZnVuY3Rpb24gQm8oKXtpZighdHgmJm5vIT09bnVsbCl7dHg9ITA7dmFyIHU9MCxkPWd0O3RyeXt2YXIgbT1ubztmb3IoZ3Q9MTt1PG0ubGVuZ3RoO3UrKyl7dmFyIHg9bVt1XTtkbyB4PXgoITApO3doaWxlKHghPT1udWxsKX1ubz1udWxsLGRwPSExfWNhdGNoKE4pe3Rocm93IG5vIT09bnVsbCYmKG5vPW5vLnNsaWNlKHUrMSkpLEV2KE55LEJvKSxOfWZpbmFsbHl7Z3Q9ZCx0eD0hMX19cmV0dXJuIG51bGx9dmFyIEdhPVtdLEhhPTAsaHA9bnVsbCxwcD0wLFdzPVtdLFVzPTAsRGk9bnVsbCxzbz0xLHJvPSIiO2Z1bmN0aW9uIEFpKHUsZCl7R2FbSGErK109cHAsR2FbSGErK109aHAsaHA9dSxwcD1kfWZ1bmN0aW9uIFRTKHUsZCxtKXtXc1tVcysrXT1zbyxXc1tVcysrXT1ybyxXc1tVcysrXT1EaSxEaT11O3ZhciB4PXNvO3U9cm87dmFyIE49MzItaXIoeCktMTt4Jj1+KDE8PE4pLG0rPTE7dmFyIEM9MzItaXIoZCkrTjtpZigzMDxDKXt2YXIgUj1OLU4lNTtDPSh4JigxPDxSKS0xKS50b1N0cmluZygzMikseD4+PVIsTi09Uixzbz0xPDwzMi1pcihkKStOfG08PE58eCxybz1DK3V9ZWxzZSBzbz0xPDxDfG08PE58eCxybz11fWZ1bmN0aW9uIG54KHUpe3UucmV0dXJuIT09bnVsbCYmKEFpKHUsMSksVFModSwxLDApKX1mdW5jdGlvbiBzeCh1KXtmb3IoO3U9PT1ocDspaHA9R2FbLS1IYV0sR2FbSGFdPW51bGwscHA9R2FbLS1IYV0sR2FbSGFdPW51bGw7Zm9yKDt1PT09RGk7KURpPVdzWy0tVXNdLFdzW1VzXT1udWxsLHJvPVdzWy0tVXNdLFdzW1VzXT1udWxsLHNvPVdzWy0tVXNdLFdzW1VzXT1udWxsfXZhciBUcz1udWxsLEVzPW51bGwsRHQ9ITEsbHI9bnVsbDtmdW5jdGlvbiBFUyh1LGQpe3ZhciBtPXFzKDUsbnVsbCxudWxsLDApO20uZWxlbWVudFR5cGU9IkRFTEVURUQiLG0uc3RhdGVOb2RlPWQsbS5yZXR1cm49dSxkPXUuZGVsZXRpb25zLGQ9PT1udWxsPyh1LmRlbGV0aW9ucz1bbV0sdS5mbGFnc3w9MTYpOmQucHVzaChtKX1mdW5jdGlvbiBSUyh1LGQpe3N3aXRjaCh1LnRhZyl7Y2FzZSA1OnZhciBtPXUudHlwZTtyZXR1cm4gZD1kLm5vZGVUeXBlIT09MXx8bS50b0xvd2VyQ2FzZSgpIT09ZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP251bGw6ZCxkIT09bnVsbD8odS5zdGF0ZU5vZGU9ZCxUcz11LEVzPVBvKGQuZmlyc3RDaGlsZCksITApOiExO2Nhc2UgNjpyZXR1cm4gZD11LnBlbmRpbmdQcm9wcz09PSIifHxkLm5vZGVUeXBlIT09Mz9udWxsOmQsZCE9PW51bGw/KHUuc3RhdGVOb2RlPWQsVHM9dSxFcz1udWxsLCEwKTohMTtjYXNlIDEzOnJldHVybiBkPWQubm9kZVR5cGUhPT04P251bGw6ZCxkIT09bnVsbD8obT1EaSE9PW51bGw/e2lkOnNvLG92ZXJmbG93OnJvfTpudWxsLHUubWVtb2l6ZWRTdGF0ZT17ZGVoeWRyYXRlZDpkLHRyZWVDb250ZXh0Om0scmV0cnlMYW5lOjEwNzM3NDE4MjR9LG09cXMoMTgsbnVsbCxudWxsLDApLG0uc3RhdGVOb2RlPWQsbS5yZXR1cm49dSx1LmNoaWxkPW0sVHM9dSxFcz1udWxsLCEwKTohMTtkZWZhdWx0OnJldHVybiExfX1mdW5jdGlvbiByeCh1KXtyZXR1cm4odS5tb2RlJjEpIT09MCYmKHUuZmxhZ3MmMTI4KT09PTB9ZnVuY3Rpb24gb3godSl7aWYoRHQpe3ZhciBkPUVzO2lmKGQpe3ZhciBtPWQ7aWYoIVJTKHUsZCkpe2lmKHJ4KHUpKXRocm93IEVycm9yKHQoNDE4KSk7ZD1QbyhtLm5leHRTaWJsaW5nKTt2YXIgeD1UcztkJiZSUyh1LGQpP0VTKHgsbSk6KHUuZmxhZ3M9dS5mbGFncyYtNDA5N3wyLER0PSExLFRzPXUpfX1lbHNle2lmKHJ4KHUpKXRocm93IEVycm9yKHQoNDE4KSk7dS5mbGFncz11LmZsYWdzJi00MDk3fDIsRHQ9ITEsVHM9dX19fWZ1bmN0aW9uIERTKHUpe2Zvcih1PXUucmV0dXJuO3UhPT1udWxsJiZ1LnRhZyE9PTUmJnUudGFnIT09MyYmdS50YWchPT0xMzspdT11LnJldHVybjtUcz11fWZ1bmN0aW9uIGZwKHUpe2lmKHUhPT1UcylyZXR1cm4hMTtpZighRHQpcmV0dXJuIERTKHUpLER0PSEwLCExO3ZhciBkO2lmKChkPXUudGFnIT09MykmJiEoZD11LnRhZyE9PTUpJiYoZD11LnR5cGUsZD1kIT09ImhlYWQiJiZkIT09ImJvZHkiJiYhWXkodS50eXBlLHUubWVtb2l6ZWRQcm9wcykpLGQmJihkPUVzKSl7aWYocngodSkpdGhyb3cgQVMoKSxFcnJvcih0KDQxOCkpO2Zvcig7ZDspRVModSxkKSxkPVBvKGQubmV4dFNpYmxpbmcpfWlmKERTKHUpLHUudGFnPT09MTMpe2lmKHU9dS5tZW1vaXplZFN0YXRlLHU9dSE9PW51bGw/dS5kZWh5ZHJhdGVkOm51bGwsIXUpdGhyb3cgRXJyb3IodCgzMTcpKTtlOntmb3IodT11Lm5leHRTaWJsaW5nLGQ9MDt1Oyl7aWYodS5ub2RlVHlwZT09PTgpe3ZhciBtPXUuZGF0YTtpZihtPT09Ii8kIil7aWYoZD09PTApe0VzPVBvKHUubmV4dFNpYmxpbmcpO2JyZWFrIGV9ZC0tfWVsc2UgbSE9PSIkIiYmbSE9PSIkISImJm0hPT0iJD8ifHxkKyt9dT11Lm5leHRTaWJsaW5nfUVzPW51bGx9fWVsc2UgRXM9VHM/UG8odS5zdGF0ZU5vZGUubmV4dFNpYmxpbmcpOm51bGw7cmV0dXJuITB9ZnVuY3Rpb24gQVMoKXtmb3IodmFyIHU9RXM7dTspdT1Qbyh1Lm5leHRTaWJsaW5nKX1mdW5jdGlvbiBxYSgpe0VzPVRzPW51bGwsRHQ9ITF9ZnVuY3Rpb24gaXgodSl7bHI9PT1udWxsP2xyPVt1XTpsci5wdXNoKHUpfXZhciB5Xz1rLlJlYWN0Q3VycmVudEJhdGNoQ29uZmlnO2Z1bmN0aW9uIGljKHUsZCxtKXtpZih1PW0ucmVmLHUhPT1udWxsJiZ0eXBlb2YgdSE9ImZ1bmN0aW9uIiYmdHlwZW9mIHUhPSJvYmplY3QiKXtpZihtLl9vd25lcil7aWYobT1tLl9vd25lcixtKXtpZihtLnRhZyE9PTEpdGhyb3cgRXJyb3IodCgzMDkpKTt2YXIgeD1tLnN0YXRlTm9kZX1pZigheCl0aHJvdyBFcnJvcih0KDE0Nyx1KSk7dmFyIE49eCxDPSIiK3U7cmV0dXJuIGQhPT1udWxsJiZkLnJlZiE9PW51bGwmJnR5cGVvZiBkLnJlZj09ImZ1bmN0aW9uIiYmZC5yZWYuX3N0cmluZ1JlZj09PUM/ZC5yZWY6KGQ9ZnVuY3Rpb24oUil7dmFyIFc9Ti5yZWZzO1I9PT1udWxsP2RlbGV0ZSBXW0NdOldbQ109Un0sZC5fc3RyaW5nUmVmPUMsZCl9aWYodHlwZW9mIHUhPSJzdHJpbmciKXRocm93IEVycm9yKHQoMjg0KSk7aWYoIW0uX293bmVyKXRocm93IEVycm9yKHQoMjkwLHUpKX1yZXR1cm4gdX1mdW5jdGlvbiBtcCh1LGQpe3Rocm93IHU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGQpLEVycm9yKHQoMzEsdT09PSJbb2JqZWN0IE9iamVjdF0iPyJvYmplY3Qgd2l0aCBrZXlzIHsiK09iamVjdC5rZXlzKGQpLmpvaW4oIiwgIikrIn0iOnUpKX1mdW5jdGlvbiBfUyh1KXt2YXIgZD11Ll9pbml0O3JldHVybiBkKHUuX3BheWxvYWQpfWZ1bmN0aW9uIE9TKHUpe2Z1bmN0aW9uIGQoYWUsdGUpe2lmKHUpe3ZhciBsZT1hZS5kZWxldGlvbnM7bGU9PT1udWxsPyhhZS5kZWxldGlvbnM9W3RlXSxhZS5mbGFnc3w9MTYpOmxlLnB1c2godGUpfX1mdW5jdGlvbiBtKGFlLHRlKXtpZighdSlyZXR1cm4gbnVsbDtmb3IoO3RlIT09bnVsbDspZChhZSx0ZSksdGU9dGUuc2libGluZztyZXR1cm4gbnVsbH1mdW5jdGlvbiB4KGFlLHRlKXtmb3IoYWU9bmV3IE1hcDt0ZSE9PW51bGw7KXRlLmtleSE9PW51bGw/YWUuc2V0KHRlLmtleSx0ZSk6YWUuc2V0KHRlLmluZGV4LHRlKSx0ZT10ZS5zaWJsaW5nO3JldHVybiBhZX1mdW5jdGlvbiBOKGFlLHRlKXtyZXR1cm4gYWU9S28oYWUsdGUpLGFlLmluZGV4PTAsYWUuc2libGluZz1udWxsLGFlfWZ1bmN0aW9uIEMoYWUsdGUsbGUpe3JldHVybiBhZS5pbmRleD1sZSx1PyhsZT1hZS5hbHRlcm5hdGUsbGUhPT1udWxsPyhsZT1sZS5pbmRleCxsZTx0ZT8oYWUuZmxhZ3N8PTIsdGUpOmxlKTooYWUuZmxhZ3N8PTIsdGUpKTooYWUuZmxhZ3N8PTEwNDg1NzYsdGUpfWZ1bmN0aW9uIFIoYWUpe3JldHVybiB1JiZhZS5hbHRlcm5hdGU9PT1udWxsJiYoYWUuZmxhZ3N8PTIpLGFlfWZ1bmN0aW9uIFcoYWUsdGUsbGUsU2Upe3JldHVybiB0ZT09PW51bGx8fHRlLnRhZyE9PTY/KHRlPVF4KGxlLGFlLm1vZGUsU2UpLHRlLnJldHVybj1hZSx0ZSk6KHRlPU4odGUsbGUpLHRlLnJldHVybj1hZSx0ZSl9ZnVuY3Rpb24gWihhZSx0ZSxsZSxTZSl7dmFyIFBlPWxlLnR5cGU7cmV0dXJuIFBlPT09TD94ZShhZSx0ZSxsZS5wcm9wcy5jaGlsZHJlbixTZSxsZS5rZXkpOnRlIT09bnVsbCYmKHRlLmVsZW1lbnRUeXBlPT09UGV8fHR5cGVvZiBQZT09Im9iamVjdCImJlBlIT09bnVsbCYmUGUuJCR0eXBlb2Y9PT1uZSYmX1MoUGUpPT09dGUudHlwZSk/KFNlPU4odGUsbGUucHJvcHMpLFNlLnJlZj1pYyhhZSx0ZSxsZSksU2UucmV0dXJuPWFlLFNlKTooU2U9TXAobGUudHlwZSxsZS5rZXksbGUucHJvcHMsbnVsbCxhZS5tb2RlLFNlKSxTZS5yZWY9aWMoYWUsdGUsbGUpLFNlLnJldHVybj1hZSxTZSl9ZnVuY3Rpb24gdWUoYWUsdGUsbGUsU2Upe3JldHVybiB0ZT09PW51bGx8fHRlLnRhZyE9PTR8fHRlLnN0YXRlTm9kZS5jb250YWluZXJJbmZvIT09bGUuY29udGFpbmVySW5mb3x8dGUuc3RhdGVOb2RlLmltcGxlbWVudGF0aW9uIT09bGUuaW1wbGVtZW50YXRpb24/KHRlPVp4KGxlLGFlLm1vZGUsU2UpLHRlLnJldHVybj1hZSx0ZSk6KHRlPU4odGUsbGUuY2hpbGRyZW58fFtdKSx0ZS5yZXR1cm49YWUsdGUpfWZ1bmN0aW9uIHhlKGFlLHRlLGxlLFNlLFBlKXtyZXR1cm4gdGU9PT1udWxsfHx0ZS50YWchPT03Pyh0ZT1CaShsZSxhZS5tb2RlLFNlLFBlKSx0ZS5yZXR1cm49YWUsdGUpOih0ZT1OKHRlLGxlKSx0ZS5yZXR1cm49YWUsdGUpfWZ1bmN0aW9uIGJlKGFlLHRlLGxlKXtpZih0eXBlb2YgdGU9PSJzdHJpbmciJiZ0ZSE9PSIifHx0eXBlb2YgdGU9PSJudW1iZXIiKXJldHVybiB0ZT1ReCgiIit0ZSxhZS5tb2RlLGxlKSx0ZS5yZXR1cm49YWUsdGU7aWYodHlwZW9mIHRlPT0ib2JqZWN0IiYmdGUhPT1udWxsKXtzd2l0Y2godGUuJCR0eXBlb2Ype2Nhc2UgVDpyZXR1cm4gbGU9TXAodGUudHlwZSx0ZS5rZXksdGUucHJvcHMsbnVsbCxhZS5tb2RlLGxlKSxsZS5yZWY9aWMoYWUsbnVsbCx0ZSksbGUucmV0dXJuPWFlLGxlO2Nhc2UgRDpyZXR1cm4gdGU9WngodGUsYWUubW9kZSxsZSksdGUucmV0dXJuPWFlLHRlO2Nhc2UgbmU6dmFyIFNlPXRlLl9pbml0O3JldHVybiBiZShhZSxTZSh0ZS5fcGF5bG9hZCksbGUpfWlmKFJ0KHRlKXx8Syh0ZSkpcmV0dXJuIHRlPUJpKHRlLGFlLm1vZGUsbGUsbnVsbCksdGUucmV0dXJuPWFlLHRlO21wKGFlLHRlKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiB5ZShhZSx0ZSxsZSxTZSl7dmFyIFBlPXRlIT09bnVsbD90ZS5rZXk6bnVsbDtpZih0eXBlb2YgbGU9PSJzdHJpbmciJiZsZSE9PSIifHx0eXBlb2YgbGU9PSJudW1iZXIiKXJldHVybiBQZSE9PW51bGw/bnVsbDpXKGFlLHRlLCIiK2xlLFNlKTtpZih0eXBlb2YgbGU9PSJvYmplY3QiJiZsZSE9PW51bGwpe3N3aXRjaChsZS4kJHR5cGVvZil7Y2FzZSBUOnJldHVybiBsZS5rZXk9PT1QZT9aKGFlLHRlLGxlLFNlKTpudWxsO2Nhc2UgRDpyZXR1cm4gbGUua2V5PT09UGU/dWUoYWUsdGUsbGUsU2UpOm51bGw7Y2FzZSBuZTpyZXR1cm4gUGU9bGUuX2luaXQseWUoYWUsdGUsUGUobGUuX3BheWxvYWQpLFNlKX1pZihSdChsZSl8fEsobGUpKXJldHVybiBQZSE9PW51bGw/bnVsbDp4ZShhZSx0ZSxsZSxTZSxudWxsKTttcChhZSxsZSl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gVGUoYWUsdGUsbGUsU2UsUGUpe2lmKHR5cGVvZiBTZT09InN0cmluZyImJlNlIT09IiJ8fHR5cGVvZiBTZT09Im51bWJlciIpcmV0dXJuIGFlPWFlLmdldChsZSl8fG51bGwsVyh0ZSxhZSwiIitTZSxQZSk7aWYodHlwZW9mIFNlPT0ib2JqZWN0IiYmU2UhPT1udWxsKXtzd2l0Y2goU2UuJCR0eXBlb2Ype2Nhc2UgVDpyZXR1cm4gYWU9YWUuZ2V0KFNlLmtleT09PW51bGw/bGU6U2Uua2V5KXx8bnVsbCxaKHRlLGFlLFNlLFBlKTtjYXNlIEQ6cmV0dXJuIGFlPWFlLmdldChTZS5rZXk9PT1udWxsP2xlOlNlLmtleSl8fG51bGwsdWUodGUsYWUsU2UsUGUpO2Nhc2UgbmU6dmFyIEJlPVNlLl9pbml0O3JldHVybiBUZShhZSx0ZSxsZSxCZShTZS5fcGF5bG9hZCksUGUpfWlmKFJ0KFNlKXx8SyhTZSkpcmV0dXJuIGFlPWFlLmdldChsZSl8fG51bGwseGUodGUsYWUsU2UsUGUsbnVsbCk7bXAodGUsU2UpfXJldHVybiBudWxsfWZ1bmN0aW9uIEFlKGFlLHRlLGxlLFNlKXtmb3IodmFyIFBlPW51bGwsQmU9bnVsbCxWZT10ZSxHZT10ZT0wLHhuPW51bGw7VmUhPT1udWxsJiZHZTxsZS5sZW5ndGg7R2UrKyl7VmUuaW5kZXg+R2U/KHhuPVZlLFZlPW51bGwpOnhuPVZlLnNpYmxpbmc7dmFyIGN0PXllKGFlLFZlLGxlW0dlXSxTZSk7aWYoY3Q9PT1udWxsKXtWZT09PW51bGwmJihWZT14bik7YnJlYWt9dSYmVmUmJmN0LmFsdGVybmF0ZT09PW51bGwmJmQoYWUsVmUpLHRlPUMoY3QsdGUsR2UpLEJlPT09bnVsbD9QZT1jdDpCZS5zaWJsaW5nPWN0LEJlPWN0LFZlPXhufWlmKEdlPT09bGUubGVuZ3RoKXJldHVybiBtKGFlLFZlKSxEdCYmQWkoYWUsR2UpLFBlO2lmKFZlPT09bnVsbCl7Zm9yKDtHZTxsZS5sZW5ndGg7R2UrKylWZT1iZShhZSxsZVtHZV0sU2UpLFZlIT09bnVsbCYmKHRlPUMoVmUsdGUsR2UpLEJlPT09bnVsbD9QZT1WZTpCZS5zaWJsaW5nPVZlLEJlPVZlKTtyZXR1cm4gRHQmJkFpKGFlLEdlKSxQZX1mb3IoVmU9eChhZSxWZSk7R2U8bGUubGVuZ3RoO0dlKyspeG49VGUoVmUsYWUsR2UsbGVbR2VdLFNlKSx4biE9PW51bGwmJih1JiZ4bi5hbHRlcm5hdGUhPT1udWxsJiZWZS5kZWxldGUoeG4ua2V5PT09bnVsbD9HZTp4bi5rZXkpLHRlPUMoeG4sdGUsR2UpLEJlPT09bnVsbD9QZT14bjpCZS5zaWJsaW5nPXhuLEJlPXhuKTtyZXR1cm4gdSYmVmUuZm9yRWFjaChmdW5jdGlvbihYbyl7cmV0dXJuIGQoYWUsWG8pfSksRHQmJkFpKGFlLEdlKSxQZX1mdW5jdGlvbiBGZShhZSx0ZSxsZSxTZSl7dmFyIFBlPUsobGUpO2lmKHR5cGVvZiBQZSE9ImZ1bmN0aW9uIil0aHJvdyBFcnJvcih0KDE1MCkpO2lmKGxlPVBlLmNhbGwobGUpLGxlPT1udWxsKXRocm93IEVycm9yKHQoMTUxKSk7Zm9yKHZhciBCZT1QZT1udWxsLFZlPXRlLEdlPXRlPTAseG49bnVsbCxjdD1sZS5uZXh0KCk7VmUhPT1udWxsJiYhY3QuZG9uZTtHZSsrLGN0PWxlLm5leHQoKSl7VmUuaW5kZXg+R2U/KHhuPVZlLFZlPW51bGwpOnhuPVZlLnNpYmxpbmc7dmFyIFhvPXllKGFlLFZlLGN0LnZhbHVlLFNlKTtpZihYbz09PW51bGwpe1ZlPT09bnVsbCYmKFZlPXhuKTticmVha311JiZWZSYmWG8uYWx0ZXJuYXRlPT09bnVsbCYmZChhZSxWZSksdGU9QyhYbyx0ZSxHZSksQmU9PT1udWxsP1BlPVhvOkJlLnNpYmxpbmc9WG8sQmU9WG8sVmU9eG59aWYoY3QuZG9uZSlyZXR1cm4gbShhZSxWZSksRHQmJkFpKGFlLEdlKSxQZTtpZihWZT09PW51bGwpe2Zvcig7IWN0LmRvbmU7R2UrKyxjdD1sZS5uZXh0KCkpY3Q9YmUoYWUsY3QudmFsdWUsU2UpLGN0IT09bnVsbCYmKHRlPUMoY3QsdGUsR2UpLEJlPT09bnVsbD9QZT1jdDpCZS5zaWJsaW5nPWN0LEJlPWN0KTtyZXR1cm4gRHQmJkFpKGFlLEdlKSxQZX1mb3IoVmU9eChhZSxWZSk7IWN0LmRvbmU7R2UrKyxjdD1sZS5uZXh0KCkpY3Q9VGUoVmUsYWUsR2UsY3QudmFsdWUsU2UpLGN0IT09bnVsbCYmKHUmJmN0LmFsdGVybmF0ZSE9PW51bGwmJlZlLmRlbGV0ZShjdC5rZXk9PT1udWxsP0dlOmN0LmtleSksdGU9QyhjdCx0ZSxHZSksQmU9PT1udWxsP1BlPWN0OkJlLnNpYmxpbmc9Y3QsQmU9Y3QpO3JldHVybiB1JiZWZS5mb3JFYWNoKGZ1bmN0aW9uKFlfKXtyZXR1cm4gZChhZSxZXyl9KSxEdCYmQWkoYWUsR2UpLFBlfWZ1bmN0aW9uIEt0KGFlLHRlLGxlLFNlKXtpZih0eXBlb2YgbGU9PSJvYmplY3QiJiZsZSE9PW51bGwmJmxlLnR5cGU9PT1MJiZsZS5rZXk9PT1udWxsJiYobGU9bGUucHJvcHMuY2hpbGRyZW4pLHR5cGVvZiBsZT09Im9iamVjdCImJmxlIT09bnVsbCl7c3dpdGNoKGxlLiQkdHlwZW9mKXtjYXNlIFQ6ZTp7Zm9yKHZhciBQZT1sZS5rZXksQmU9dGU7QmUhPT1udWxsOyl7aWYoQmUua2V5PT09UGUpe2lmKFBlPWxlLnR5cGUsUGU9PT1MKXtpZihCZS50YWc9PT03KXttKGFlLEJlLnNpYmxpbmcpLHRlPU4oQmUsbGUucHJvcHMuY2hpbGRyZW4pLHRlLnJldHVybj1hZSxhZT10ZTticmVhayBlfX1lbHNlIGlmKEJlLmVsZW1lbnRUeXBlPT09UGV8fHR5cGVvZiBQZT09Im9iamVjdCImJlBlIT09bnVsbCYmUGUuJCR0eXBlb2Y9PT1uZSYmX1MoUGUpPT09QmUudHlwZSl7bShhZSxCZS5zaWJsaW5nKSx0ZT1OKEJlLGxlLnByb3BzKSx0ZS5yZWY9aWMoYWUsQmUsbGUpLHRlLnJldHVybj1hZSxhZT10ZTticmVhayBlfW0oYWUsQmUpO2JyZWFrfWVsc2UgZChhZSxCZSk7QmU9QmUuc2libGluZ31sZS50eXBlPT09TD8odGU9QmkobGUucHJvcHMuY2hpbGRyZW4sYWUubW9kZSxTZSxsZS5rZXkpLHRlLnJldHVybj1hZSxhZT10ZSk6KFNlPU1wKGxlLnR5cGUsbGUua2V5LGxlLnByb3BzLG51bGwsYWUubW9kZSxTZSksU2UucmVmPWljKGFlLHRlLGxlKSxTZS5yZXR1cm49YWUsYWU9U2UpfXJldHVybiBSKGFlKTtjYXNlIEQ6ZTp7Zm9yKEJlPWxlLmtleTt0ZSE9PW51bGw7KXtpZih0ZS5rZXk9PT1CZSlpZih0ZS50YWc9PT00JiZ0ZS5zdGF0ZU5vZGUuY29udGFpbmVySW5mbz09PWxlLmNvbnRhaW5lckluZm8mJnRlLnN0YXRlTm9kZS5pbXBsZW1lbnRhdGlvbj09PWxlLmltcGxlbWVudGF0aW9uKXttKGFlLHRlLnNpYmxpbmcpLHRlPU4odGUsbGUuY2hpbGRyZW58fFtdKSx0ZS5yZXR1cm49YWUsYWU9dGU7YnJlYWsgZX1lbHNle20oYWUsdGUpO2JyZWFrfWVsc2UgZChhZSx0ZSk7dGU9dGUuc2libGluZ310ZT1aeChsZSxhZS5tb2RlLFNlKSx0ZS5yZXR1cm49YWUsYWU9dGV9cmV0dXJuIFIoYWUpO2Nhc2UgbmU6cmV0dXJuIEJlPWxlLl9pbml0LEt0KGFlLHRlLEJlKGxlLl9wYXlsb2FkKSxTZSl9aWYoUnQobGUpKXJldHVybiBBZShhZSx0ZSxsZSxTZSk7aWYoSyhsZSkpcmV0dXJuIEZlKGFlLHRlLGxlLFNlKTttcChhZSxsZSl9cmV0dXJuIHR5cGVvZiBsZT09InN0cmluZyImJmxlIT09IiJ8fHR5cGVvZiBsZT09Im51bWJlciI/KGxlPSIiK2xlLHRlIT09bnVsbCYmdGUudGFnPT09Nj8obShhZSx0ZS5zaWJsaW5nKSx0ZT1OKHRlLGxlKSx0ZS5yZXR1cm49YWUsYWU9dGUpOihtKGFlLHRlKSx0ZT1ReChsZSxhZS5tb2RlLFNlKSx0ZS5yZXR1cm49YWUsYWU9dGUpLFIoYWUpKTptKGFlLHRlKX1yZXR1cm4gS3R9dmFyIEthPU9TKCEwKSxGUz1PUyghMSksZ3A9em8obnVsbCkseXA9bnVsbCxYYT1udWxsLGF4PW51bGw7ZnVuY3Rpb24gbHgoKXtheD1YYT15cD1udWxsfWZ1bmN0aW9uIHV4KHUpe3ZhciBkPWdwLmN1cnJlbnQ7SXQoZ3ApLHUuX2N1cnJlbnRWYWx1ZT1kfWZ1bmN0aW9uIGN4KHUsZCxtKXtmb3IoO3UhPT1udWxsOyl7dmFyIHg9dS5hbHRlcm5hdGU7aWYoKHUuY2hpbGRMYW5lcyZkKSE9PWQ/KHUuY2hpbGRMYW5lc3w9ZCx4IT09bnVsbCYmKHguY2hpbGRMYW5lc3w9ZCkpOnghPT1udWxsJiYoeC5jaGlsZExhbmVzJmQpIT09ZCYmKHguY2hpbGRMYW5lc3w9ZCksdT09PW0pYnJlYWs7dT11LnJldHVybn19ZnVuY3Rpb24gWWEodSxkKXt5cD11LGF4PVhhPW51bGwsdT11LmRlcGVuZGVuY2llcyx1IT09bnVsbCYmdS5maXJzdENvbnRleHQhPT1udWxsJiYoKHUubGFuZXMmZCkhPT0wJiYoZHM9ITApLHUuZmlyc3RDb250ZXh0PW51bGwpfWZ1bmN0aW9uIGpzKHUpe3ZhciBkPXUuX2N1cnJlbnRWYWx1ZTtpZihheCE9PXUpaWYodT17Y29udGV4dDp1LG1lbW9pemVkVmFsdWU6ZCxuZXh0Om51bGx9LFhhPT09bnVsbCl7aWYoeXA9PT1udWxsKXRocm93IEVycm9yKHQoMzA4KSk7WGE9dSx5cC5kZXBlbmRlbmNpZXM9e2xhbmVzOjAsZmlyc3RDb250ZXh0OnV9fWVsc2UgWGE9WGEubmV4dD11O3JldHVybiBkfXZhciBfaT1udWxsO2Z1bmN0aW9uIGR4KHUpe19pPT09bnVsbD9faT1bdV06X2kucHVzaCh1KX1mdW5jdGlvbiBMUyh1LGQsbSx4KXt2YXIgTj1kLmludGVybGVhdmVkO3JldHVybiBOPT09bnVsbD8obS5uZXh0PW0sZHgoZCkpOihtLm5leHQ9Ti5uZXh0LE4ubmV4dD1tKSxkLmludGVybGVhdmVkPW0sb28odSx4KX1mdW5jdGlvbiBvbyh1LGQpe3UubGFuZXN8PWQ7dmFyIG09dS5hbHRlcm5hdGU7Zm9yKG0hPT1udWxsJiYobS5sYW5lc3w9ZCksbT11LHU9dS5yZXR1cm47dSE9PW51bGw7KXUuY2hpbGRMYW5lc3w9ZCxtPXUuYWx0ZXJuYXRlLG0hPT1udWxsJiYobS5jaGlsZExhbmVzfD1kKSxtPXUsdT11LnJldHVybjtyZXR1cm4gbS50YWc9PT0zP20uc3RhdGVOb2RlOm51bGx9dmFyIFZvPSExO2Z1bmN0aW9uIGh4KHUpe3UudXBkYXRlUXVldWU9e2Jhc2VTdGF0ZTp1Lm1lbW9pemVkU3RhdGUsZmlyc3RCYXNlVXBkYXRlOm51bGwsbGFzdEJhc2VVcGRhdGU6bnVsbCxzaGFyZWQ6e3BlbmRpbmc6bnVsbCxpbnRlcmxlYXZlZDpudWxsLGxhbmVzOjB9LGVmZmVjdHM6bnVsbH19ZnVuY3Rpb24gUFModSxkKXt1PXUudXBkYXRlUXVldWUsZC51cGRhdGVRdWV1ZT09PXUmJihkLnVwZGF0ZVF1ZXVlPXtiYXNlU3RhdGU6dS5iYXNlU3RhdGUsZmlyc3RCYXNlVXBkYXRlOnUuZmlyc3RCYXNlVXBkYXRlLGxhc3RCYXNlVXBkYXRlOnUubGFzdEJhc2VVcGRhdGUsc2hhcmVkOnUuc2hhcmVkLGVmZmVjdHM6dS5lZmZlY3RzfSl9ZnVuY3Rpb24gaW8odSxkKXtyZXR1cm57ZXZlbnRUaW1lOnUsbGFuZTpkLHRhZzowLHBheWxvYWQ6bnVsbCxjYWxsYmFjazpudWxsLG5leHQ6bnVsbH19ZnVuY3Rpb24gV28odSxkLG0pe3ZhciB4PXUudXBkYXRlUXVldWU7aWYoeD09PW51bGwpcmV0dXJuIG51bGw7aWYoeD14LnNoYXJlZCwobHQmMikhPT0wKXt2YXIgTj14LnBlbmRpbmc7cmV0dXJuIE49PT1udWxsP2QubmV4dD1kOihkLm5leHQ9Ti5uZXh0LE4ubmV4dD1kKSx4LnBlbmRpbmc9ZCxvbyh1LG0pfXJldHVybiBOPXguaW50ZXJsZWF2ZWQsTj09PW51bGw/KGQubmV4dD1kLGR4KHgpKTooZC5uZXh0PU4ubmV4dCxOLm5leHQ9ZCkseC5pbnRlcmxlYXZlZD1kLG9vKHUsbSl9ZnVuY3Rpb24geHAodSxkLG0pe2lmKGQ9ZC51cGRhdGVRdWV1ZSxkIT09bnVsbCYmKGQ9ZC5zaGFyZWQsKG0mNDE5NDI0MCkhPT0wKSl7dmFyIHg9ZC5sYW5lczt4Jj11LnBlbmRpbmdMYW5lcyxtfD14LGQubGFuZXM9bSwkeSh1LG0pfX1mdW5jdGlvbiB6Uyh1LGQpe3ZhciBtPXUudXBkYXRlUXVldWUseD11LmFsdGVybmF0ZTtpZih4IT09bnVsbCYmKHg9eC51cGRhdGVRdWV1ZSxtPT09eCkpe3ZhciBOPW51bGwsQz1udWxsO2lmKG09bS5maXJzdEJhc2VVcGRhdGUsbSE9PW51bGwpe2Rve3ZhciBSPXtldmVudFRpbWU6bS5ldmVudFRpbWUsbGFuZTptLmxhbmUsdGFnOm0udGFnLHBheWxvYWQ6bS5wYXlsb2FkLGNhbGxiYWNrOm0uY2FsbGJhY2ssbmV4dDpudWxsfTtDPT09bnVsbD9OPUM9UjpDPUMubmV4dD1SLG09bS5uZXh0fXdoaWxlKG0hPT1udWxsKTtDPT09bnVsbD9OPUM9ZDpDPUMubmV4dD1kfWVsc2UgTj1DPWQ7bT17YmFzZVN0YXRlOnguYmFzZVN0YXRlLGZpcnN0QmFzZVVwZGF0ZTpOLGxhc3RCYXNlVXBkYXRlOkMsc2hhcmVkOnguc2hhcmVkLGVmZmVjdHM6eC5lZmZlY3RzfSx1LnVwZGF0ZVF1ZXVlPW07cmV0dXJufXU9bS5sYXN0QmFzZVVwZGF0ZSx1PT09bnVsbD9tLmZpcnN0QmFzZVVwZGF0ZT1kOnUubmV4dD1kLG0ubGFzdEJhc2VVcGRhdGU9ZH1mdW5jdGlvbiBicCh1LGQsbSx4KXt2YXIgTj11LnVwZGF0ZVF1ZXVlO1ZvPSExO3ZhciBDPU4uZmlyc3RCYXNlVXBkYXRlLFI9Ti5sYXN0QmFzZVVwZGF0ZSxXPU4uc2hhcmVkLnBlbmRpbmc7aWYoVyE9PW51bGwpe04uc2hhcmVkLnBlbmRpbmc9bnVsbDt2YXIgWj1XLHVlPVoubmV4dDtaLm5leHQ9bnVsbCxSPT09bnVsbD9DPXVlOlIubmV4dD11ZSxSPVo7dmFyIHhlPXUuYWx0ZXJuYXRlO3hlIT09bnVsbCYmKHhlPXhlLnVwZGF0ZVF1ZXVlLFc9eGUubGFzdEJhc2VVcGRhdGUsVyE9PVImJihXPT09bnVsbD94ZS5maXJzdEJhc2VVcGRhdGU9dWU6Vy5uZXh0PXVlLHhlLmxhc3RCYXNlVXBkYXRlPVopKX1pZihDIT09bnVsbCl7dmFyIGJlPU4uYmFzZVN0YXRlO1I9MCx4ZT11ZT1aPW51bGwsVz1DO2Rve3ZhciB5ZT1XLmxhbmUsVGU9Vy5ldmVudFRpbWU7aWYoKHgmeWUpPT09eWUpe3hlIT09bnVsbCYmKHhlPXhlLm5leHQ9e2V2ZW50VGltZTpUZSxsYW5lOjAsdGFnOlcudGFnLHBheWxvYWQ6Vy5wYXlsb2FkLGNhbGxiYWNrOlcuY2FsbGJhY2ssbmV4dDpudWxsfSk7ZTp7dmFyIEFlPXUsRmU9Vztzd2l0Y2goeWU9ZCxUZT1tLEZlLnRhZyl7Y2FzZSAxOmlmKEFlPUZlLnBheWxvYWQsdHlwZW9mIEFlPT0iZnVuY3Rpb24iKXtiZT1BZS5jYWxsKFRlLGJlLHllKTticmVhayBlfWJlPUFlO2JyZWFrIGU7Y2FzZSAzOkFlLmZsYWdzPUFlLmZsYWdzJi02NTUzN3wxMjg7Y2FzZSAwOmlmKEFlPUZlLnBheWxvYWQseWU9dHlwZW9mIEFlPT0iZnVuY3Rpb24iP0FlLmNhbGwoVGUsYmUseWUpOkFlLHllPT1udWxsKWJyZWFrIGU7YmU9cSh7fSxiZSx5ZSk7YnJlYWsgZTtjYXNlIDI6Vm89ITB9fVcuY2FsbGJhY2shPT1udWxsJiZXLmxhbmUhPT0wJiYodS5mbGFnc3w9NjQseWU9Ti5lZmZlY3RzLHllPT09bnVsbD9OLmVmZmVjdHM9W1ddOnllLnB1c2goVykpfWVsc2UgVGU9e2V2ZW50VGltZTpUZSxsYW5lOnllLHRhZzpXLnRhZyxwYXlsb2FkOlcucGF5bG9hZCxjYWxsYmFjazpXLmNhbGxiYWNrLG5leHQ6bnVsbH0seGU9PT1udWxsPyh1ZT14ZT1UZSxaPWJlKTp4ZT14ZS5uZXh0PVRlLFJ8PXllO2lmKFc9Vy5uZXh0LFc9PT1udWxsKXtpZihXPU4uc2hhcmVkLnBlbmRpbmcsVz09PW51bGwpYnJlYWs7eWU9VyxXPXllLm5leHQseWUubmV4dD1udWxsLE4ubGFzdEJhc2VVcGRhdGU9eWUsTi5zaGFyZWQucGVuZGluZz1udWxsfX13aGlsZSghMCk7aWYoeGU9PT1udWxsJiYoWj1iZSksTi5iYXNlU3RhdGU9WixOLmZpcnN0QmFzZVVwZGF0ZT11ZSxOLmxhc3RCYXNlVXBkYXRlPXhlLGQ9Ti5zaGFyZWQuaW50ZXJsZWF2ZWQsZCE9PW51bGwpe049ZDtkbyBSfD1OLmxhbmUsTj1OLm5leHQ7d2hpbGUoTiE9PWQpfWVsc2UgQz09PW51bGwmJihOLnNoYXJlZC5sYW5lcz0wKTtMaXw9Uix1LmxhbmVzPVIsdS5tZW1vaXplZFN0YXRlPWJlfX1mdW5jdGlvbiBNUyh1LGQsbSl7aWYodT1kLmVmZmVjdHMsZC5lZmZlY3RzPW51bGwsdSE9PW51bGwpZm9yKGQ9MDtkPHUubGVuZ3RoO2QrKyl7dmFyIHg9dVtkXSxOPXguY2FsbGJhY2s7aWYoTiE9PW51bGwpe2lmKHguY2FsbGJhY2s9bnVsbCx4PW0sdHlwZW9mIE4hPSJmdW5jdGlvbiIpdGhyb3cgRXJyb3IodCgxOTEsTikpO04uY2FsbCh4KX19fXZhciBhYz17fSxBcj16byhhYyksbGM9em8oYWMpLHVjPXpvKGFjKTtmdW5jdGlvbiBPaSh1KXtpZih1PT09YWMpdGhyb3cgRXJyb3IodCgxNzQpKTtyZXR1cm4gdX1mdW5jdGlvbiBweCh1LGQpe3N3aXRjaChDdCh1YyxkKSxDdChsYyx1KSxDdChBcixhYyksdT1kLm5vZGVUeXBlLHUpe2Nhc2UgOTpjYXNlIDExOmQ9KGQ9ZC5kb2N1bWVudEVsZW1lbnQpP2QubmFtZXNwYWNlVVJJOlZzKG51bGwsIiIpO2JyZWFrO2RlZmF1bHQ6dT11PT09OD9kLnBhcmVudE5vZGU6ZCxkPXUubmFtZXNwYWNlVVJJfHxudWxsLHU9dS50YWdOYW1lLGQ9VnMoZCx1KX1JdChBciksQ3QoQXIsZCl9ZnVuY3Rpb24gUWEoKXtJdChBciksSXQobGMpLEl0KHVjKX1mdW5jdGlvbiBCUyh1KXtPaSh1Yy5jdXJyZW50KTt2YXIgZD1PaShBci5jdXJyZW50KSxtPVZzKGQsdS50eXBlKTtkIT09bSYmKEN0KGxjLHUpLEN0KEFyLG0pKX1mdW5jdGlvbiBmeCh1KXtsYy5jdXJyZW50PT09dSYmKEl0KEFyKSxJdChsYykpfXZhciBQdD16bygwKTtmdW5jdGlvbiB3cCh1KXtmb3IodmFyIGQ9dTtkIT09bnVsbDspe2lmKGQudGFnPT09MTMpe3ZhciBtPWQubWVtb2l6ZWRTdGF0ZTtpZihtIT09bnVsbCYmKG09bS5kZWh5ZHJhdGVkLG09PT1udWxsfHxtLmRhdGE9PT0iJD8ifHxtLmRhdGE9PT0iJCEiKSlyZXR1cm4gZH1lbHNlIGlmKGQudGFnPT09MTkmJmQubWVtb2l6ZWRQcm9wcy5yZXZlYWxPcmRlciE9PXZvaWQgMCl7aWYoKGQuZmxhZ3MmMTI4KSE9PTApcmV0dXJuIGR9ZWxzZSBpZihkLmNoaWxkIT09bnVsbCl7ZC5jaGlsZC5yZXR1cm49ZCxkPWQuY2hpbGQ7Y29udGludWV9aWYoZD09PXUpYnJlYWs7Zm9yKDtkLnNpYmxpbmc9PT1udWxsOyl7aWYoZC5yZXR1cm49PT1udWxsfHxkLnJldHVybj09PXUpcmV0dXJuIG51bGw7ZD1kLnJldHVybn1kLnNpYmxpbmcucmV0dXJuPWQucmV0dXJuLGQ9ZC5zaWJsaW5nfXJldHVybiBudWxsfXZhciBteD1bXTtmdW5jdGlvbiBneCgpe2Zvcih2YXIgdT0wO3U8bXgubGVuZ3RoO3UrKylteFt1XS5fd29ya0luUHJvZ3Jlc3NWZXJzaW9uUHJpbWFyeT1udWxsO214Lmxlbmd0aD0wfXZhciB2cD1rLlJlYWN0Q3VycmVudERpc3BhdGNoZXIseXg9ay5SZWFjdEN1cnJlbnRCYXRjaENvbmZpZyxGaT0wLHp0PW51bGwsYW49bnVsbCxnbj1udWxsLFNwPSExLGNjPSExLGRjPTAseF89MDtmdW5jdGlvbiB6bigpe3Rocm93IEVycm9yKHQoMzIxKSl9ZnVuY3Rpb24geHgodSxkKXtpZihkPT09bnVsbClyZXR1cm4hMTtmb3IodmFyIG09MDttPGQubGVuZ3RoJiZtPHUubGVuZ3RoO20rKylpZighYXIodVttXSxkW21dKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBieCh1LGQsbSx4LE4sQyl7aWYoRmk9Qyx6dD1kLGQubWVtb2l6ZWRTdGF0ZT1udWxsLGQudXBkYXRlUXVldWU9bnVsbCxkLmxhbmVzPTAsdnAuY3VycmVudD11PT09bnVsbHx8dS5tZW1vaXplZFN0YXRlPT09bnVsbD9TXzpOXyx1PW0oeCxOKSxjYyl7Qz0wO2Rve2lmKGNjPSExLGRjPTAsMjU8PUMpdGhyb3cgRXJyb3IodCgzMDEpKTtDKz0xLGduPWFuPW51bGwsZC51cGRhdGVRdWV1ZT1udWxsLHZwLmN1cnJlbnQ9a18sdT1tKHgsTil9d2hpbGUoY2MpfWlmKHZwLmN1cnJlbnQ9Q3AsZD1hbiE9PW51bGwmJmFuLm5leHQhPT1udWxsLEZpPTAsZ249YW49enQ9bnVsbCxTcD0hMSxkKXRocm93IEVycm9yKHQoMzAwKSk7cmV0dXJuIHV9ZnVuY3Rpb24gd3goKXt2YXIgdT1kYyE9PTA7cmV0dXJuIGRjPTAsdX1mdW5jdGlvbiBfcigpe3ZhciB1PXttZW1vaXplZFN0YXRlOm51bGwsYmFzZVN0YXRlOm51bGwsYmFzZVF1ZXVlOm51bGwscXVldWU6bnVsbCxuZXh0Om51bGx9O3JldHVybiBnbj09PW51bGw/enQubWVtb2l6ZWRTdGF0ZT1nbj11OmduPWduLm5leHQ9dSxnbn1mdW5jdGlvbiBHcygpe2lmKGFuPT09bnVsbCl7dmFyIHU9enQuYWx0ZXJuYXRlO3U9dSE9PW51bGw/dS5tZW1vaXplZFN0YXRlOm51bGx9ZWxzZSB1PWFuLm5leHQ7dmFyIGQ9Z249PT1udWxsP3p0Lm1lbW9pemVkU3RhdGU6Z24ubmV4dDtpZihkIT09bnVsbClnbj1kLGFuPXU7ZWxzZXtpZih1PT09bnVsbCl0aHJvdyBFcnJvcih0KDMxMCkpO2FuPXUsdT17bWVtb2l6ZWRTdGF0ZTphbi5tZW1vaXplZFN0YXRlLGJhc2VTdGF0ZTphbi5iYXNlU3RhdGUsYmFzZVF1ZXVlOmFuLmJhc2VRdWV1ZSxxdWV1ZTphbi5xdWV1ZSxuZXh0Om51bGx9LGduPT09bnVsbD96dC5tZW1vaXplZFN0YXRlPWduPXU6Z249Z24ubmV4dD11fXJldHVybiBnbn1mdW5jdGlvbiBoYyh1LGQpe3JldHVybiB0eXBlb2YgZD09ImZ1bmN0aW9uIj9kKHUpOmR9ZnVuY3Rpb24gdngodSl7dmFyIGQ9R3MoKSxtPWQucXVldWU7aWYobT09PW51bGwpdGhyb3cgRXJyb3IodCgzMTEpKTttLmxhc3RSZW5kZXJlZFJlZHVjZXI9dTt2YXIgeD1hbixOPXguYmFzZVF1ZXVlLEM9bS5wZW5kaW5nO2lmKEMhPT1udWxsKXtpZihOIT09bnVsbCl7dmFyIFI9Ti5uZXh0O04ubmV4dD1DLm5leHQsQy5uZXh0PVJ9eC5iYXNlUXVldWU9Tj1DLG0ucGVuZGluZz1udWxsfWlmKE4hPT1udWxsKXtDPU4ubmV4dCx4PXguYmFzZVN0YXRlO3ZhciBXPVI9bnVsbCxaPW51bGwsdWU9Qztkb3t2YXIgeGU9dWUubGFuZTtpZigoRmkmeGUpPT09eGUpWiE9PW51bGwmJihaPVoubmV4dD17bGFuZTowLGFjdGlvbjp1ZS5hY3Rpb24saGFzRWFnZXJTdGF0ZTp1ZS5oYXNFYWdlclN0YXRlLGVhZ2VyU3RhdGU6dWUuZWFnZXJTdGF0ZSxuZXh0Om51bGx9KSx4PXVlLmhhc0VhZ2VyU3RhdGU/dWUuZWFnZXJTdGF0ZTp1KHgsdWUuYWN0aW9uKTtlbHNle3ZhciBiZT17bGFuZTp4ZSxhY3Rpb246dWUuYWN0aW9uLGhhc0VhZ2VyU3RhdGU6dWUuaGFzRWFnZXJTdGF0ZSxlYWdlclN0YXRlOnVlLmVhZ2VyU3RhdGUsbmV4dDpudWxsfTtaPT09bnVsbD8oVz1aPWJlLFI9eCk6Wj1aLm5leHQ9YmUsenQubGFuZXN8PXhlLExpfD14ZX11ZT11ZS5uZXh0fXdoaWxlKHVlIT09bnVsbCYmdWUhPT1DKTtaPT09bnVsbD9SPXg6Wi5uZXh0PVcsYXIoeCxkLm1lbW9pemVkU3RhdGUpfHwoZHM9ITApLGQubWVtb2l6ZWRTdGF0ZT14LGQuYmFzZVN0YXRlPVIsZC5iYXNlUXVldWU9WixtLmxhc3RSZW5kZXJlZFN0YXRlPXh9aWYodT1tLmludGVybGVhdmVkLHUhPT1udWxsKXtOPXU7ZG8gQz1OLmxhbmUsenQubGFuZXN8PUMsTGl8PUMsTj1OLm5leHQ7d2hpbGUoTiE9PXUpfWVsc2UgTj09PW51bGwmJihtLmxhbmVzPTApO3JldHVybltkLm1lbW9pemVkU3RhdGUsbS5kaXNwYXRjaF19ZnVuY3Rpb24gU3godSl7dmFyIGQ9R3MoKSxtPWQucXVldWU7aWYobT09PW51bGwpdGhyb3cgRXJyb3IodCgzMTEpKTttLmxhc3RSZW5kZXJlZFJlZHVjZXI9dTt2YXIgeD1tLmRpc3BhdGNoLE49bS5wZW5kaW5nLEM9ZC5tZW1vaXplZFN0YXRlO2lmKE4hPT1udWxsKXttLnBlbmRpbmc9bnVsbDt2YXIgUj1OPU4ubmV4dDtkbyBDPXUoQyxSLmFjdGlvbiksUj1SLm5leHQ7d2hpbGUoUiE9PU4pO2FyKEMsZC5tZW1vaXplZFN0YXRlKXx8KGRzPSEwKSxkLm1lbW9pemVkU3RhdGU9QyxkLmJhc2VRdWV1ZT09PW51bGwmJihkLmJhc2VTdGF0ZT1DKSxtLmxhc3RSZW5kZXJlZFN0YXRlPUN9cmV0dXJuW0MseF19ZnVuY3Rpb24gVlMoKXt9ZnVuY3Rpb24gV1ModSxkKXt2YXIgbT16dCx4PUdzKCksTj1kKCksQz0hYXIoeC5tZW1vaXplZFN0YXRlLE4pO2lmKEMmJih4Lm1lbW9pemVkU3RhdGU9Tixkcz0hMCkseD14LnF1ZXVlLE54KEdTLmJpbmQobnVsbCxtLHgsdSksW3VdKSx4LmdldFNuYXBzaG90IT09ZHx8Q3x8Z24hPT1udWxsJiZnbi5tZW1vaXplZFN0YXRlLnRhZyYxKXtpZihtLmZsYWdzfD0yMDQ4LHBjKDksalMuYmluZChudWxsLG0seCxOLGQpLHZvaWQgMCxudWxsKSx5bj09PW51bGwpdGhyb3cgRXJyb3IodCgzNDkpKTsoRmkmMzApIT09MHx8VVMobSxkLE4pfXJldHVybiBOfWZ1bmN0aW9uIFVTKHUsZCxtKXt1LmZsYWdzfD0xNjM4NCx1PXtnZXRTbmFwc2hvdDpkLHZhbHVlOm19LGQ9enQudXBkYXRlUXVldWUsZD09PW51bGw/KGQ9e2xhc3RFZmZlY3Q6bnVsbCxzdG9yZXM6bnVsbH0senQudXBkYXRlUXVldWU9ZCxkLnN0b3Jlcz1bdV0pOihtPWQuc3RvcmVzLG09PT1udWxsP2Quc3RvcmVzPVt1XTptLnB1c2godSkpfWZ1bmN0aW9uIGpTKHUsZCxtLHgpe2QudmFsdWU9bSxkLmdldFNuYXBzaG90PXgsSFMoZCkmJnFTKHUpfWZ1bmN0aW9uIEdTKHUsZCxtKXtyZXR1cm4gbShmdW5jdGlvbigpe0hTKGQpJiZxUyh1KX0pfWZ1bmN0aW9uIEhTKHUpe3ZhciBkPXUuZ2V0U25hcHNob3Q7dT11LnZhbHVlO3RyeXt2YXIgbT1kKCk7cmV0dXJuIWFyKHUsbSl9Y2F0Y2h7cmV0dXJuITB9fWZ1bmN0aW9uIHFTKHUpe3ZhciBkPW9vKHUsMSk7ZCE9PW51bGwmJmhyKGQsdSwxLC0xKX1mdW5jdGlvbiBLUyh1KXt2YXIgZD1fcigpO3JldHVybiB0eXBlb2YgdT09ImZ1bmN0aW9uIiYmKHU9dSgpKSxkLm1lbW9pemVkU3RhdGU9ZC5iYXNlU3RhdGU9dSx1PXtwZW5kaW5nOm51bGwsaW50ZXJsZWF2ZWQ6bnVsbCxsYW5lczowLGRpc3BhdGNoOm51bGwsbGFzdFJlbmRlcmVkUmVkdWNlcjpoYyxsYXN0UmVuZGVyZWRTdGF0ZTp1fSxkLnF1ZXVlPXUsdT11LmRpc3BhdGNoPXZfLmJpbmQobnVsbCx6dCx1KSxbZC5tZW1vaXplZFN0YXRlLHVdfWZ1bmN0aW9uIHBjKHUsZCxtLHgpe3JldHVybiB1PXt0YWc6dSxjcmVhdGU6ZCxkZXN0cm95Om0sZGVwczp4LG5leHQ6bnVsbH0sZD16dC51cGRhdGVRdWV1ZSxkPT09bnVsbD8oZD17bGFzdEVmZmVjdDpudWxsLHN0b3JlczpudWxsfSx6dC51cGRhdGVRdWV1ZT1kLGQubGFzdEVmZmVjdD11Lm5leHQ9dSk6KG09ZC5sYXN0RWZmZWN0LG09PT1udWxsP2QubGFzdEVmZmVjdD11Lm5leHQ9dTooeD1tLm5leHQsbS5uZXh0PXUsdS5uZXh0PXgsZC5sYXN0RWZmZWN0PXUpKSx1fWZ1bmN0aW9uIFhTKCl7cmV0dXJuIEdzKCkubWVtb2l6ZWRTdGF0ZX1mdW5jdGlvbiBOcCh1LGQsbSx4KXt2YXIgTj1fcigpO3p0LmZsYWdzfD11LE4ubWVtb2l6ZWRTdGF0ZT1wYygxfGQsbSx2b2lkIDAseD09PXZvaWQgMD9udWxsOngpfWZ1bmN0aW9uIGtwKHUsZCxtLHgpe3ZhciBOPUdzKCk7eD14PT09dm9pZCAwP251bGw6eDt2YXIgQz12b2lkIDA7aWYoYW4hPT1udWxsKXt2YXIgUj1hbi5tZW1vaXplZFN0YXRlO2lmKEM9Ui5kZXN0cm95LHghPT1udWxsJiZ4eCh4LFIuZGVwcykpe04ubWVtb2l6ZWRTdGF0ZT1wYyhkLG0sQyx4KTtyZXR1cm59fXp0LmZsYWdzfD11LE4ubWVtb2l6ZWRTdGF0ZT1wYygxfGQsbSxDLHgpfWZ1bmN0aW9uIFlTKHUsZCl7cmV0dXJuIE5wKDgzOTA2NTYsOCx1LGQpfWZ1bmN0aW9uIE54KHUsZCl7cmV0dXJuIGtwKDIwNDgsOCx1LGQpfWZ1bmN0aW9uIFFTKHUsZCl7cmV0dXJuIGtwKDQsMix1LGQpfWZ1bmN0aW9uIFpTKHUsZCl7cmV0dXJuIGtwKDQsNCx1LGQpfWZ1bmN0aW9uIEpTKHUsZCl7aWYodHlwZW9mIGQ9PSJmdW5jdGlvbiIpcmV0dXJuIHU9dSgpLGQodSksZnVuY3Rpb24oKXtkKG51bGwpfTtpZihkIT1udWxsKXJldHVybiB1PXUoKSxkLmN1cnJlbnQ9dSxmdW5jdGlvbigpe2QuY3VycmVudD1udWxsfX1mdW5jdGlvbiBlTih1LGQsbSl7cmV0dXJuIG09bSE9bnVsbD9tLmNvbmNhdChbdV0pOm51bGwsa3AoNCw0LEpTLmJpbmQobnVsbCxkLHUpLG0pfWZ1bmN0aW9uIGt4KCl7fWZ1bmN0aW9uIHROKHUsZCl7dmFyIG09R3MoKTtkPWQ9PT12b2lkIDA/bnVsbDpkO3ZhciB4PW0ubWVtb2l6ZWRTdGF0ZTtyZXR1cm4geCE9PW51bGwmJmQhPT1udWxsJiZ4eChkLHhbMV0pP3hbMF06KG0ubWVtb2l6ZWRTdGF0ZT1bdSxkXSx1KX1mdW5jdGlvbiBuTih1LGQpe3ZhciBtPUdzKCk7ZD1kPT09dm9pZCAwP251bGw6ZDt2YXIgeD1tLm1lbW9pemVkU3RhdGU7cmV0dXJuIHghPT1udWxsJiZkIT09bnVsbCYmeHgoZCx4WzFdKT94WzBdOih1PXUoKSxtLm1lbW9pemVkU3RhdGU9W3UsZF0sdSl9ZnVuY3Rpb24gc04odSxkLG0pe3JldHVybihGaSYyMSk9PT0wPyh1LmJhc2VTdGF0ZSYmKHUuYmFzZVN0YXRlPSExLGRzPSEwKSx1Lm1lbW9pemVkU3RhdGU9bSk6KGFyKG0sZCl8fChtPV92KCksenQubGFuZXN8PW0sTGl8PW0sdS5iYXNlU3RhdGU9ITApLGQpfWZ1bmN0aW9uIGJfKHUsZCl7dmFyIG09Z3Q7Z3Q9bSE9PTAmJjQ+bT9tOjQsdSghMCk7dmFyIHg9eXgudHJhbnNpdGlvbjt5eC50cmFuc2l0aW9uPXt9O3RyeXt1KCExKSxkKCl9ZmluYWxseXtndD1tLHl4LnRyYW5zaXRpb249eH19ZnVuY3Rpb24gck4oKXtyZXR1cm4gR3MoKS5tZW1vaXplZFN0YXRlfWZ1bmN0aW9uIHdfKHUsZCxtKXt2YXIgeD1Ibyh1KTtpZihtPXtsYW5lOngsYWN0aW9uOm0saGFzRWFnZXJTdGF0ZTohMSxlYWdlclN0YXRlOm51bGwsbmV4dDpudWxsfSxvTih1KSlpTihkLG0pO2Vsc2UgaWYobT1MUyh1LGQsbSx4KSxtIT09bnVsbCl7dmFyIE49UW4oKTtocihtLHUseCxOKSxhTihtLGQseCl9fWZ1bmN0aW9uIHZfKHUsZCxtKXt2YXIgeD1Ibyh1KSxOPXtsYW5lOngsYWN0aW9uOm0saGFzRWFnZXJTdGF0ZTohMSxlYWdlclN0YXRlOm51bGwsbmV4dDpudWxsfTtpZihvTih1KSlpTihkLE4pO2Vsc2V7dmFyIEM9dS5hbHRlcm5hdGU7aWYodS5sYW5lcz09PTAmJihDPT09bnVsbHx8Qy5sYW5lcz09PTApJiYoQz1kLmxhc3RSZW5kZXJlZFJlZHVjZXIsQyE9PW51bGwpKXRyeXt2YXIgUj1kLmxhc3RSZW5kZXJlZFN0YXRlLFc9QyhSLG0pO2lmKE4uaGFzRWFnZXJTdGF0ZT0hMCxOLmVhZ2VyU3RhdGU9VyxhcihXLFIpKXt2YXIgWj1kLmludGVybGVhdmVkO1o9PT1udWxsPyhOLm5leHQ9TixkeChkKSk6KE4ubmV4dD1aLm5leHQsWi5uZXh0PU4pLGQuaW50ZXJsZWF2ZWQ9TjtyZXR1cm59fWNhdGNoe31maW5hbGx5e31tPUxTKHUsZCxOLHgpLG0hPT1udWxsJiYoTj1RbigpLGhyKG0sdSx4LE4pLGFOKG0sZCx4KSl9fWZ1bmN0aW9uIG9OKHUpe3ZhciBkPXUuYWx0ZXJuYXRlO3JldHVybiB1PT09enR8fGQhPT1udWxsJiZkPT09enR9ZnVuY3Rpb24gaU4odSxkKXtjYz1TcD0hMDt2YXIgbT11LnBlbmRpbmc7bT09PW51bGw/ZC5uZXh0PWQ6KGQubmV4dD1tLm5leHQsbS5uZXh0PWQpLHUucGVuZGluZz1kfWZ1bmN0aW9uIGFOKHUsZCxtKXtpZigobSY0MTk0MjQwKSE9PTApe3ZhciB4PWQubGFuZXM7eCY9dS5wZW5kaW5nTGFuZXMsbXw9eCxkLmxhbmVzPW0sJHkodSxtKX19dmFyIENwPXtyZWFkQ29udGV4dDpqcyx1c2VDYWxsYmFjazp6bix1c2VDb250ZXh0OnpuLHVzZUVmZmVjdDp6bix1c2VJbXBlcmF0aXZlSGFuZGxlOnpuLHVzZUluc2VydGlvbkVmZmVjdDp6bix1c2VMYXlvdXRFZmZlY3Q6em4sdXNlTWVtbzp6bix1c2VSZWR1Y2VyOnpuLHVzZVJlZjp6bix1c2VTdGF0ZTp6bix1c2VEZWJ1Z1ZhbHVlOnpuLHVzZURlZmVycmVkVmFsdWU6em4sdXNlVHJhbnNpdGlvbjp6bix1c2VNdXRhYmxlU291cmNlOnpuLHVzZVN5bmNFeHRlcm5hbFN0b3JlOnpuLHVzZUlkOnpuLHVuc3RhYmxlX2lzTmV3UmVjb25jaWxlcjohMX0sU189e3JlYWRDb250ZXh0OmpzLHVzZUNhbGxiYWNrOmZ1bmN0aW9uKHUsZCl7cmV0dXJuIF9yKCkubWVtb2l6ZWRTdGF0ZT1bdSxkPT09dm9pZCAwP251bGw6ZF0sdX0sdXNlQ29udGV4dDpqcyx1c2VFZmZlY3Q6WVMsdXNlSW1wZXJhdGl2ZUhhbmRsZTpmdW5jdGlvbih1LGQsbSl7cmV0dXJuIG09bSE9bnVsbD9tLmNvbmNhdChbdV0pOm51bGwsTnAoNDE5NDMwOCw0LEpTLmJpbmQobnVsbCxkLHUpLG0pfSx1c2VMYXlvdXRFZmZlY3Q6ZnVuY3Rpb24odSxkKXtyZXR1cm4gTnAoNDE5NDMwOCw0LHUsZCl9LHVzZUluc2VydGlvbkVmZmVjdDpmdW5jdGlvbih1LGQpe3JldHVybiBOcCg0LDIsdSxkKX0sdXNlTWVtbzpmdW5jdGlvbih1LGQpe3ZhciBtPV9yKCk7cmV0dXJuIGQ9ZD09PXZvaWQgMD9udWxsOmQsdT11KCksbS5tZW1vaXplZFN0YXRlPVt1LGRdLHV9LHVzZVJlZHVjZXI6ZnVuY3Rpb24odSxkLG0pe3ZhciB4PV9yKCk7cmV0dXJuIGQ9bSE9PXZvaWQgMD9tKGQpOmQseC5tZW1vaXplZFN0YXRlPXguYmFzZVN0YXRlPWQsdT17cGVuZGluZzpudWxsLGludGVybGVhdmVkOm51bGwsbGFuZXM6MCxkaXNwYXRjaDpudWxsLGxhc3RSZW5kZXJlZFJlZHVjZXI6dSxsYXN0UmVuZGVyZWRTdGF0ZTpkfSx4LnF1ZXVlPXUsdT11LmRpc3BhdGNoPXdfLmJpbmQobnVsbCx6dCx1KSxbeC5tZW1vaXplZFN0YXRlLHVdfSx1c2VSZWY6ZnVuY3Rpb24odSl7dmFyIGQ9X3IoKTtyZXR1cm4gdT17Y3VycmVudDp1fSxkLm1lbW9pemVkU3RhdGU9dX0sdXNlU3RhdGU6S1MsdXNlRGVidWdWYWx1ZTpreCx1c2VEZWZlcnJlZFZhbHVlOmZ1bmN0aW9uKHUpe3JldHVybiBfcigpLm1lbW9pemVkU3RhdGU9dX0sdXNlVHJhbnNpdGlvbjpmdW5jdGlvbigpe3ZhciB1PUtTKCExKSxkPXVbMF07cmV0dXJuIHU9Yl8uYmluZChudWxsLHVbMV0pLF9yKCkubWVtb2l6ZWRTdGF0ZT11LFtkLHVdfSx1c2VNdXRhYmxlU291cmNlOmZ1bmN0aW9uKCl7fSx1c2VTeW5jRXh0ZXJuYWxTdG9yZTpmdW5jdGlvbih1LGQsbSl7dmFyIHg9enQsTj1fcigpO2lmKER0KXtpZihtPT09dm9pZCAwKXRocm93IEVycm9yKHQoNDA3KSk7bT1tKCl9ZWxzZXtpZihtPWQoKSx5bj09PW51bGwpdGhyb3cgRXJyb3IodCgzNDkpKTsoRmkmMzApIT09MHx8VVMoeCxkLG0pfU4ubWVtb2l6ZWRTdGF0ZT1tO3ZhciBDPXt2YWx1ZTptLGdldFNuYXBzaG90OmR9O3JldHVybiBOLnF1ZXVlPUMsWVMoR1MuYmluZChudWxsLHgsQyx1KSxbdV0pLHguZmxhZ3N8PTIwNDgscGMoOSxqUy5iaW5kKG51bGwseCxDLG0sZCksdm9pZCAwLG51bGwpLG19LHVzZUlkOmZ1bmN0aW9uKCl7dmFyIHU9X3IoKSxkPXluLmlkZW50aWZpZXJQcmVmaXg7aWYoRHQpe3ZhciBtPXJvLHg9c287bT0oeCZ+KDE8PDMyLWlyKHgpLTEpKS50b1N0cmluZygzMikrbSxkPSI6IitkKyJSIittLG09ZGMrKywwPG0mJihkKz0iSCIrbS50b1N0cmluZygzMikpLGQrPSI6In1lbHNlIG09eF8rKyxkPSI6IitkKyJyIittLnRvU3RyaW5nKDMyKSsiOiI7cmV0dXJuIHUubWVtb2l6ZWRTdGF0ZT1kfSx1bnN0YWJsZV9pc05ld1JlY29uY2lsZXI6ITF9LE5fPXtyZWFkQ29udGV4dDpqcyx1c2VDYWxsYmFjazp0Tix1c2VDb250ZXh0OmpzLHVzZUVmZmVjdDpOeCx1c2VJbXBlcmF0aXZlSGFuZGxlOmVOLHVzZUluc2VydGlvbkVmZmVjdDpRUyx1c2VMYXlvdXRFZmZlY3Q6WlMsdXNlTWVtbzpuTix1c2VSZWR1Y2VyOnZ4LHVzZVJlZjpYUyx1c2VTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB2eChoYyl9LHVzZURlYnVnVmFsdWU6a3gsdXNlRGVmZXJyZWRWYWx1ZTpmdW5jdGlvbih1KXt2YXIgZD1HcygpO3JldHVybiBzTihkLGFuLm1lbW9pemVkU3RhdGUsdSl9LHVzZVRyYW5zaXRpb246ZnVuY3Rpb24oKXt2YXIgdT12eChoYylbMF0sZD1HcygpLm1lbW9pemVkU3RhdGU7cmV0dXJuW3UsZF19LHVzZU11dGFibGVTb3VyY2U6VlMsdXNlU3luY0V4dGVybmFsU3RvcmU6V1MsdXNlSWQ6ck4sdW5zdGFibGVfaXNOZXdSZWNvbmNpbGVyOiExfSxrXz17cmVhZENvbnRleHQ6anMsdXNlQ2FsbGJhY2s6dE4sdXNlQ29udGV4dDpqcyx1c2VFZmZlY3Q6TngsdXNlSW1wZXJhdGl2ZUhhbmRsZTplTix1c2VJbnNlcnRpb25FZmZlY3Q6UVMsdXNlTGF5b3V0RWZmZWN0OlpTLHVzZU1lbW86bk4sdXNlUmVkdWNlcjpTeCx1c2VSZWY6WFMsdXNlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gU3goaGMpfSx1c2VEZWJ1Z1ZhbHVlOmt4LHVzZURlZmVycmVkVmFsdWU6ZnVuY3Rpb24odSl7dmFyIGQ9R3MoKTtyZXR1cm4gYW49PT1udWxsP2QubWVtb2l6ZWRTdGF0ZT11OnNOKGQsYW4ubWVtb2l6ZWRTdGF0ZSx1KX0sdXNlVHJhbnNpdGlvbjpmdW5jdGlvbigpe3ZhciB1PVN4KGhjKVswXSxkPUdzKCkubWVtb2l6ZWRTdGF0ZTtyZXR1cm5bdSxkXX0sdXNlTXV0YWJsZVNvdXJjZTpWUyx1c2VTeW5jRXh0ZXJuYWxTdG9yZTpXUyx1c2VJZDpyTix1bnN0YWJsZV9pc05ld1JlY29uY2lsZXI6ITF9O2Z1bmN0aW9uIHVyKHUsZCl7aWYodSYmdS5kZWZhdWx0UHJvcHMpe2Q9cSh7fSxkKSx1PXUuZGVmYXVsdFByb3BzO2Zvcih2YXIgbSBpbiB1KWRbbV09PT12b2lkIDAmJihkW21dPXVbbV0pO3JldHVybiBkfXJldHVybiBkfWZ1bmN0aW9uIEN4KHUsZCxtLHgpe2Q9dS5tZW1vaXplZFN0YXRlLG09bSh4LGQpLG09bT09bnVsbD9kOnEoe30sZCxtKSx1Lm1lbW9pemVkU3RhdGU9bSx1LmxhbmVzPT09MCYmKHUudXBkYXRlUXVldWUuYmFzZVN0YXRlPW0pfXZhciAkcD17aXNNb3VudGVkOmZ1bmN0aW9uKHUpe3JldHVybih1PXUuX3JlYWN0SW50ZXJuYWxzKT9UaSh1KT09PXU6ITF9LGVucXVldWVTZXRTdGF0ZTpmdW5jdGlvbih1LGQsbSl7dT11Ll9yZWFjdEludGVybmFsczt2YXIgeD1RbigpLE49SG8odSksQz1pbyh4LE4pO0MucGF5bG9hZD1kLG0hPW51bGwmJihDLmNhbGxiYWNrPW0pLGQ9V28odSxDLE4pLGQhPT1udWxsJiYoaHIoZCx1LE4seCkseHAoZCx1LE4pKX0sZW5xdWV1ZVJlcGxhY2VTdGF0ZTpmdW5jdGlvbih1LGQsbSl7dT11Ll9yZWFjdEludGVybmFsczt2YXIgeD1RbigpLE49SG8odSksQz1pbyh4LE4pO0MudGFnPTEsQy5wYXlsb2FkPWQsbSE9bnVsbCYmKEMuY2FsbGJhY2s9bSksZD1Xbyh1LEMsTiksZCE9PW51bGwmJihocihkLHUsTix4KSx4cChkLHUsTikpfSxlbnF1ZXVlRm9yY2VVcGRhdGU6ZnVuY3Rpb24odSxkKXt1PXUuX3JlYWN0SW50ZXJuYWxzO3ZhciBtPVFuKCkseD1Ibyh1KSxOPWlvKG0seCk7Ti50YWc9MixkIT1udWxsJiYoTi5jYWxsYmFjaz1kKSxkPVdvKHUsTix4KSxkIT09bnVsbCYmKGhyKGQsdSx4LG0pLHhwKGQsdSx4KSl9fTtmdW5jdGlvbiBsTih1LGQsbSx4LE4sQyxSKXtyZXR1cm4gdT11LnN0YXRlTm9kZSx0eXBlb2YgdS5zaG91bGRDb21wb25lbnRVcGRhdGU9PSJmdW5jdGlvbiI/dS5zaG91bGRDb21wb25lbnRVcGRhdGUoeCxDLFIpOmQucHJvdG90eXBlJiZkLnByb3RvdHlwZS5pc1B1cmVSZWFjdENvbXBvbmVudD8hSnUobSx4KXx8IUp1KE4sQyk6ITB9ZnVuY3Rpb24gdU4odSxkLG0pe3ZhciB4PSExLE49TW8sQz1kLmNvbnRleHRUeXBlO3JldHVybiB0eXBlb2YgQz09Im9iamVjdCImJkMhPT1udWxsP0M9anMoQyk6KE49Y3MoZCk/Umk6UG4uY3VycmVudCx4PWQuY29udGV4dFR5cGVzLEM9KHg9eCE9bnVsbCk/amEodSxOKTpNbyksZD1uZXcgZChtLEMpLHUubWVtb2l6ZWRTdGF0ZT1kLnN0YXRlIT09bnVsbCYmZC5zdGF0ZSE9PXZvaWQgMD9kLnN0YXRlOm51bGwsZC51cGRhdGVyPSRwLHUuc3RhdGVOb2RlPWQsZC5fcmVhY3RJbnRlcm5hbHM9dSx4JiYodT11LnN0YXRlTm9kZSx1Ll9fcmVhY3RJbnRlcm5hbE1lbW9pemVkVW5tYXNrZWRDaGlsZENvbnRleHQ9Tix1Ll9fcmVhY3RJbnRlcm5hbE1lbW9pemVkTWFza2VkQ2hpbGRDb250ZXh0PUMpLGR9ZnVuY3Rpb24gY04odSxkLG0seCl7dT1kLnN0YXRlLHR5cGVvZiBkLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM9PSJmdW5jdGlvbiImJmQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhtLHgpLHR5cGVvZiBkLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzPT0iZnVuY3Rpb24iJiZkLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG0seCksZC5zdGF0ZSE9PXUmJiRwLmVucXVldWVSZXBsYWNlU3RhdGUoZCxkLnN0YXRlLG51bGwpfWZ1bmN0aW9uICR4KHUsZCxtLHgpe3ZhciBOPXUuc3RhdGVOb2RlO04ucHJvcHM9bSxOLnN0YXRlPXUubWVtb2l6ZWRTdGF0ZSxOLnJlZnM9e30saHgodSk7dmFyIEM9ZC5jb250ZXh0VHlwZTt0eXBlb2YgQz09Im9iamVjdCImJkMhPT1udWxsP04uY29udGV4dD1qcyhDKTooQz1jcyhkKT9SaTpQbi5jdXJyZW50LE4uY29udGV4dD1qYSh1LEMpKSxOLnN0YXRlPXUubWVtb2l6ZWRTdGF0ZSxDPWQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzLHR5cGVvZiBDPT0iZnVuY3Rpb24iJiYoQ3godSxkLEMsbSksTi5zdGF0ZT11Lm1lbW9pemVkU3RhdGUpLHR5cGVvZiBkLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcz09ImZ1bmN0aW9uInx8dHlwZW9mIE4uZ2V0U25hcHNob3RCZWZvcmVVcGRhdGU9PSJmdW5jdGlvbiJ8fHR5cGVvZiBOLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQhPSJmdW5jdGlvbiImJnR5cGVvZiBOLmNvbXBvbmVudFdpbGxNb3VudCE9ImZ1bmN0aW9uInx8KGQ9Ti5zdGF0ZSx0eXBlb2YgTi5jb21wb25lbnRXaWxsTW91bnQ9PSJmdW5jdGlvbiImJk4uY29tcG9uZW50V2lsbE1vdW50KCksdHlwZW9mIE4uVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudD09ImZ1bmN0aW9uIiYmTi5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCksZCE9PU4uc3RhdGUmJiRwLmVucXVldWVSZXBsYWNlU3RhdGUoTixOLnN0YXRlLG51bGwpLGJwKHUsbSxOLHgpLE4uc3RhdGU9dS5tZW1vaXplZFN0YXRlKSx0eXBlb2YgTi5jb21wb25lbnREaWRNb3VudD09ImZ1bmN0aW9uIiYmKHUuZmxhZ3N8PTQxOTQzMDgpfWZ1bmN0aW9uIFphKHUsZCl7dHJ5e3ZhciBtPSIiLHg9ZDtkbyBtKz1kZSh4KSx4PXgucmV0dXJuO3doaWxlKHgpO3ZhciBOPW19Y2F0Y2goQyl7Tj1gCkVycm9yIGdlbmVyYXRpbmcgc3RhY2s6IGArQy5tZXNzYWdlK2AKYCtDLnN0YWNrfXJldHVybnt2YWx1ZTp1LHNvdXJjZTpkLHN0YWNrOk4sZGlnZXN0Om51bGx9fWZ1bmN0aW9uIEl4KHUsZCxtKXtyZXR1cm57dmFsdWU6dSxzb3VyY2U6bnVsbCxzdGFjazptPz9udWxsLGRpZ2VzdDpkPz9udWxsfX1mdW5jdGlvbiBUeCh1LGQpe3RyeXtjb25zb2xlLmVycm9yKGQudmFsdWUpfWNhdGNoKG0pe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBtfSl9fXZhciBDXz10eXBlb2YgV2Vha01hcD09ImZ1bmN0aW9uIj9XZWFrTWFwOk1hcDtmdW5jdGlvbiBkTih1LGQsbSl7bT1pbygtMSxtKSxtLnRhZz0zLG0ucGF5bG9hZD17ZWxlbWVudDpudWxsfTt2YXIgeD1kLnZhbHVlO3JldHVybiBtLmNhbGxiYWNrPWZ1bmN0aW9uKCl7X3B8fChfcD0hMCxVeD14KSxUeCh1LGQpfSxtfWZ1bmN0aW9uIGhOKHUsZCxtKXttPWlvKC0xLG0pLG0udGFnPTM7dmFyIHg9dS50eXBlLmdldERlcml2ZWRTdGF0ZUZyb21FcnJvcjtpZih0eXBlb2YgeD09ImZ1bmN0aW9uIil7dmFyIE49ZC52YWx1ZTttLnBheWxvYWQ9ZnVuY3Rpb24oKXtyZXR1cm4geChOKX0sbS5jYWxsYmFjaz1mdW5jdGlvbigpe1R4KHUsZCl9fXZhciBDPXUuc3RhdGVOb2RlO3JldHVybiBDIT09bnVsbCYmdHlwZW9mIEMuY29tcG9uZW50RGlkQ2F0Y2g9PSJmdW5jdGlvbiImJihtLmNhbGxiYWNrPWZ1bmN0aW9uKCl7VHgodSxkKSx0eXBlb2YgeCE9ImZ1bmN0aW9uIiYmKGpvPT09bnVsbD9qbz1uZXcgU2V0KFt0aGlzXSk6am8uYWRkKHRoaXMpKTt2YXIgUj1kLnN0YWNrO3RoaXMuY29tcG9uZW50RGlkQ2F0Y2goZC52YWx1ZSx7Y29tcG9uZW50U3RhY2s6UiE9PW51bGw/UjoiIn0pfSksbX1mdW5jdGlvbiBwTih1LGQsbSl7dmFyIHg9dS5waW5nQ2FjaGU7aWYoeD09PW51bGwpe3g9dS5waW5nQ2FjaGU9bmV3IENfO3ZhciBOPW5ldyBTZXQ7eC5zZXQoZCxOKX1lbHNlIE49eC5nZXQoZCksTj09PXZvaWQgMCYmKE49bmV3IFNldCx4LnNldChkLE4pKTtOLmhhcyhtKXx8KE4uYWRkKG0pLHU9TV8uYmluZChudWxsLHUsZCxtKSxkLnRoZW4odSx1KSl9ZnVuY3Rpb24gZk4odSl7ZG97dmFyIGQ7aWYoKGQ9dS50YWc9PT0xMykmJihkPXUubWVtb2l6ZWRTdGF0ZSxkPWQhPT1udWxsP2QuZGVoeWRyYXRlZCE9PW51bGw6ITApLGQpcmV0dXJuIHU7dT11LnJldHVybn13aGlsZSh1IT09bnVsbCk7cmV0dXJuIG51bGx9ZnVuY3Rpb24gbU4odSxkLG0seCxOKXtyZXR1cm4odS5tb2RlJjEpPT09MD8odT09PWQ/dS5mbGFnc3w9NjU1MzY6KHUuZmxhZ3N8PTEyOCxtLmZsYWdzfD0xMzEwNzIsbS5mbGFncyY9LTUyODA1LG0udGFnPT09MSYmKG0uYWx0ZXJuYXRlPT09bnVsbD9tLnRhZz0xNzooZD1pbygtMSwxKSxkLnRhZz0yLFdvKG0sZCwxKSkpLG0ubGFuZXN8PTEpLHUpOih1LmZsYWdzfD02NTUzNix1LmxhbmVzPU4sdSl9dmFyICRfPWsuUmVhY3RDdXJyZW50T3duZXIsZHM9ITE7ZnVuY3Rpb24gWW4odSxkLG0seCl7ZC5jaGlsZD11PT09bnVsbD9GUyhkLG51bGwsbSx4KTpLYShkLHUuY2hpbGQsbSx4KX1mdW5jdGlvbiBnTih1LGQsbSx4LE4pe209bS5yZW5kZXI7dmFyIEM9ZC5yZWY7cmV0dXJuIFlhKGQsTikseD1ieCh1LGQsbSx4LEMsTiksbT13eCgpLHUhPT1udWxsJiYhZHM/KGQudXBkYXRlUXVldWU9dS51cGRhdGVRdWV1ZSxkLmZsYWdzJj0tMjA1Myx1LmxhbmVzJj1+Tixhbyh1LGQsTikpOihEdCYmbSYmbngoZCksZC5mbGFnc3w9MSxZbih1LGQseCxOKSxkLmNoaWxkKX1mdW5jdGlvbiB5Tih1LGQsbSx4LE4pe2lmKHU9PT1udWxsKXt2YXIgQz1tLnR5cGU7cmV0dXJuIHR5cGVvZiBDPT0iZnVuY3Rpb24iJiYhWXgoQykmJkMuZGVmYXVsdFByb3BzPT09dm9pZCAwJiZtLmNvbXBhcmU9PT1udWxsJiZtLmRlZmF1bHRQcm9wcz09PXZvaWQgMD8oZC50YWc9MTUsZC50eXBlPUMseE4odSxkLEMseCxOKSk6KHU9TXAobS50eXBlLG51bGwseCxkLGQubW9kZSxOKSx1LnJlZj1kLnJlZix1LnJldHVybj1kLGQuY2hpbGQ9dSl9aWYoQz11LmNoaWxkLCh1LmxhbmVzJk4pPT09MCl7dmFyIFI9Qy5tZW1vaXplZFByb3BzO2lmKG09bS5jb21wYXJlLG09bSE9PW51bGw/bTpKdSxtKFIseCkmJnUucmVmPT09ZC5yZWYpcmV0dXJuIGFvKHUsZCxOKX1yZXR1cm4gZC5mbGFnc3w9MSx1PUtvKEMseCksdS5yZWY9ZC5yZWYsdS5yZXR1cm49ZCxkLmNoaWxkPXV9ZnVuY3Rpb24geE4odSxkLG0seCxOKXtpZih1IT09bnVsbCl7dmFyIEM9dS5tZW1vaXplZFByb3BzO2lmKEp1KEMseCkmJnUucmVmPT09ZC5yZWYpaWYoZHM9ITEsZC5wZW5kaW5nUHJvcHM9eD1DLCh1LmxhbmVzJk4pIT09MCkodS5mbGFncyYxMzEwNzIpIT09MCYmKGRzPSEwKTtlbHNlIHJldHVybiBkLmxhbmVzPXUubGFuZXMsYW8odSxkLE4pfXJldHVybiBFeCh1LGQsbSx4LE4pfWZ1bmN0aW9uIGJOKHUsZCxtKXt2YXIgeD1kLnBlbmRpbmdQcm9wcyxOPXguY2hpbGRyZW4sQz11IT09bnVsbD91Lm1lbW9pemVkU3RhdGU6bnVsbDtpZih4Lm1vZGU9PT0iaGlkZGVuIilpZigoZC5tb2RlJjEpPT09MClkLm1lbW9pemVkU3RhdGU9e2Jhc2VMYW5lczowLGNhY2hlUG9vbDpudWxsLHRyYW5zaXRpb25zOm51bGx9LEN0KGVsLFJzKSxSc3w9bTtlbHNle2lmKChtJjEwNzM3NDE4MjQpPT09MClyZXR1cm4gdT1DIT09bnVsbD9DLmJhc2VMYW5lc3xtOm0sZC5sYW5lcz1kLmNoaWxkTGFuZXM9MTA3Mzc0MTgyNCxkLm1lbW9pemVkU3RhdGU9e2Jhc2VMYW5lczp1LGNhY2hlUG9vbDpudWxsLHRyYW5zaXRpb25zOm51bGx9LGQudXBkYXRlUXVldWU9bnVsbCxDdChlbCxScyksUnN8PXUsbnVsbDtkLm1lbW9pemVkU3RhdGU9e2Jhc2VMYW5lczowLGNhY2hlUG9vbDpudWxsLHRyYW5zaXRpb25zOm51bGx9LHg9QyE9PW51bGw/Qy5iYXNlTGFuZXM6bSxDdChlbCxScyksUnN8PXh9ZWxzZSBDIT09bnVsbD8oeD1DLmJhc2VMYW5lc3xtLGQubWVtb2l6ZWRTdGF0ZT1udWxsKTp4PW0sQ3QoZWwsUnMpLFJzfD14O3JldHVybiBZbih1LGQsTixtKSxkLmNoaWxkfWZ1bmN0aW9uIHdOKHUsZCl7dmFyIG09ZC5yZWY7KHU9PT1udWxsJiZtIT09bnVsbHx8dSE9PW51bGwmJnUucmVmIT09bSkmJihkLmZsYWdzfD01MTIsZC5mbGFnc3w9MjA5NzE1Mil9ZnVuY3Rpb24gRXgodSxkLG0seCxOKXt2YXIgQz1jcyhtKT9SaTpQbi5jdXJyZW50O3JldHVybiBDPWphKGQsQyksWWEoZCxOKSxtPWJ4KHUsZCxtLHgsQyxOKSx4PXd4KCksdSE9PW51bGwmJiFkcz8oZC51cGRhdGVRdWV1ZT11LnVwZGF0ZVF1ZXVlLGQuZmxhZ3MmPS0yMDUzLHUubGFuZXMmPX5OLGFvKHUsZCxOKSk6KER0JiZ4JiZueChkKSxkLmZsYWdzfD0xLFluKHUsZCxtLE4pLGQuY2hpbGQpfWZ1bmN0aW9uIHZOKHUsZCxtLHgsTil7aWYoY3MobSkpe3ZhciBDPSEwO2NwKGQpfWVsc2UgQz0hMTtpZihZYShkLE4pLGQuc3RhdGVOb2RlPT09bnVsbClUcCh1LGQpLHVOKGQsbSx4KSwkeChkLG0seCxOKSx4PSEwO2Vsc2UgaWYodT09PW51bGwpe3ZhciBSPWQuc3RhdGVOb2RlLFc9ZC5tZW1vaXplZFByb3BzO1IucHJvcHM9Vzt2YXIgWj1SLmNvbnRleHQsdWU9bS5jb250ZXh0VHlwZTt0eXBlb2YgdWU9PSJvYmplY3QiJiZ1ZSE9PW51bGw/dWU9anModWUpOih1ZT1jcyhtKT9SaTpQbi5jdXJyZW50LHVlPWphKGQsdWUpKTt2YXIgeGU9bS5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMsYmU9dHlwZW9mIHhlPT0iZnVuY3Rpb24ifHx0eXBlb2YgUi5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZT09ImZ1bmN0aW9uIjtiZXx8dHlwZW9mIFIuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMhPSJmdW5jdGlvbiImJnR5cGVvZiBSLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMhPSJmdW5jdGlvbiJ8fChXIT09eHx8WiE9PXVlKSYmY04oZCxSLHgsdWUpLFZvPSExO3ZhciB5ZT1kLm1lbW9pemVkU3RhdGU7Ui5zdGF0ZT15ZSxicChkLHgsUixOKSxaPWQubWVtb2l6ZWRTdGF0ZSxXIT09eHx8eWUhPT1afHx1cy5jdXJyZW50fHxWbz8odHlwZW9mIHhlPT0iZnVuY3Rpb24iJiYoQ3goZCxtLHhlLHgpLFo9ZC5tZW1vaXplZFN0YXRlKSwoVz1Wb3x8bE4oZCxtLFcseCx5ZSxaLHVlKSk/KGJlfHx0eXBlb2YgUi5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50IT0iZnVuY3Rpb24iJiZ0eXBlb2YgUi5jb21wb25lbnRXaWxsTW91bnQhPSJmdW5jdGlvbiJ8fCh0eXBlb2YgUi5jb21wb25lbnRXaWxsTW91bnQ9PSJmdW5jdGlvbiImJlIuY29tcG9uZW50V2lsbE1vdW50KCksdHlwZW9mIFIuVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudD09ImZ1bmN0aW9uIiYmUi5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCkpLHR5cGVvZiBSLmNvbXBvbmVudERpZE1vdW50PT0iZnVuY3Rpb24iJiYoZC5mbGFnc3w9NDE5NDMwOCkpOih0eXBlb2YgUi5jb21wb25lbnREaWRNb3VudD09ImZ1bmN0aW9uIiYmKGQuZmxhZ3N8PTQxOTQzMDgpLGQubWVtb2l6ZWRQcm9wcz14LGQubWVtb2l6ZWRTdGF0ZT1aKSxSLnByb3BzPXgsUi5zdGF0ZT1aLFIuY29udGV4dD11ZSx4PVcpOih0eXBlb2YgUi5jb21wb25lbnREaWRNb3VudD09ImZ1bmN0aW9uIiYmKGQuZmxhZ3N8PTQxOTQzMDgpLHg9ITEpfWVsc2V7Uj1kLnN0YXRlTm9kZSxQUyh1LGQpLFc9ZC5tZW1vaXplZFByb3BzLHVlPWQudHlwZT09PWQuZWxlbWVudFR5cGU/Vzp1cihkLnR5cGUsVyksUi5wcm9wcz11ZSxiZT1kLnBlbmRpbmdQcm9wcyx5ZT1SLmNvbnRleHQsWj1tLmNvbnRleHRUeXBlLHR5cGVvZiBaPT0ib2JqZWN0IiYmWiE9PW51bGw/Wj1qcyhaKTooWj1jcyhtKT9SaTpQbi5jdXJyZW50LFo9amEoZCxaKSk7dmFyIFRlPW0uZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzOyh4ZT10eXBlb2YgVGU9PSJmdW5jdGlvbiJ8fHR5cGVvZiBSLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlPT0iZnVuY3Rpb24iKXx8dHlwZW9mIFIuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMhPSJmdW5jdGlvbiImJnR5cGVvZiBSLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMhPSJmdW5jdGlvbiJ8fChXIT09YmV8fHllIT09WikmJmNOKGQsUix4LFopLFZvPSExLHllPWQubWVtb2l6ZWRTdGF0ZSxSLnN0YXRlPXllLGJwKGQseCxSLE4pO3ZhciBBZT1kLm1lbW9pemVkU3RhdGU7VyE9PWJlfHx5ZSE9PUFlfHx1cy5jdXJyZW50fHxWbz8odHlwZW9mIFRlPT0iZnVuY3Rpb24iJiYoQ3goZCxtLFRlLHgpLEFlPWQubWVtb2l6ZWRTdGF0ZSksKHVlPVZvfHxsTihkLG0sdWUseCx5ZSxBZSxaKXx8ITEpPyh4ZXx8dHlwZW9mIFIuVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUhPSJmdW5jdGlvbiImJnR5cGVvZiBSLmNvbXBvbmVudFdpbGxVcGRhdGUhPSJmdW5jdGlvbiJ8fCh0eXBlb2YgUi5jb21wb25lbnRXaWxsVXBkYXRlPT0iZnVuY3Rpb24iJiZSLmNvbXBvbmVudFdpbGxVcGRhdGUoeCxBZSxaKSx0eXBlb2YgUi5VTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZT09ImZ1bmN0aW9uIiYmUi5VTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZSh4LEFlLFopKSx0eXBlb2YgUi5jb21wb25lbnREaWRVcGRhdGU9PSJmdW5jdGlvbiImJihkLmZsYWdzfD00KSx0eXBlb2YgUi5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZT09ImZ1bmN0aW9uIiYmKGQuZmxhZ3N8PTEwMjQpKToodHlwZW9mIFIuY29tcG9uZW50RGlkVXBkYXRlIT0iZnVuY3Rpb24ifHxXPT09dS5tZW1vaXplZFByb3BzJiZ5ZT09PXUubWVtb2l6ZWRTdGF0ZXx8KGQuZmxhZ3N8PTQpLHR5cGVvZiBSLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlIT0iZnVuY3Rpb24ifHxXPT09dS5tZW1vaXplZFByb3BzJiZ5ZT09PXUubWVtb2l6ZWRTdGF0ZXx8KGQuZmxhZ3N8PTEwMjQpLGQubWVtb2l6ZWRQcm9wcz14LGQubWVtb2l6ZWRTdGF0ZT1BZSksUi5wcm9wcz14LFIuc3RhdGU9QWUsUi5jb250ZXh0PVoseD11ZSk6KHR5cGVvZiBSLmNvbXBvbmVudERpZFVwZGF0ZSE9ImZ1bmN0aW9uInx8Vz09PXUubWVtb2l6ZWRQcm9wcyYmeWU9PT11Lm1lbW9pemVkU3RhdGV8fChkLmZsYWdzfD00KSx0eXBlb2YgUi5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSE9ImZ1bmN0aW9uInx8Vz09PXUubWVtb2l6ZWRQcm9wcyYmeWU9PT11Lm1lbW9pemVkU3RhdGV8fChkLmZsYWdzfD0xMDI0KSx4PSExKX1yZXR1cm4gUngodSxkLG0seCxDLE4pfWZ1bmN0aW9uIFJ4KHUsZCxtLHgsTixDKXt3Tih1LGQpO3ZhciBSPShkLmZsYWdzJjEyOCkhPT0wO2lmKCF4JiYhUilyZXR1cm4gTiYmJFMoZCxtLCExKSxhbyh1LGQsQyk7eD1kLnN0YXRlTm9kZSwkXy5jdXJyZW50PWQ7dmFyIFc9UiYmdHlwZW9mIG0uZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yIT0iZnVuY3Rpb24iP251bGw6eC5yZW5kZXIoKTtyZXR1cm4gZC5mbGFnc3w9MSx1IT09bnVsbCYmUj8oZC5jaGlsZD1LYShkLHUuY2hpbGQsbnVsbCxDKSxkLmNoaWxkPUthKGQsbnVsbCxXLEMpKTpZbih1LGQsVyxDKSxkLm1lbW9pemVkU3RhdGU9eC5zdGF0ZSxOJiYkUyhkLG0sITApLGQuY2hpbGR9ZnVuY3Rpb24gU04odSl7dmFyIGQ9dS5zdGF0ZU5vZGU7ZC5wZW5kaW5nQ29udGV4dD9rUyh1LGQucGVuZGluZ0NvbnRleHQsZC5wZW5kaW5nQ29udGV4dCE9PWQuY29udGV4dCk6ZC5jb250ZXh0JiZrUyh1LGQuY29udGV4dCwhMSkscHgodSxkLmNvbnRhaW5lckluZm8pfWZ1bmN0aW9uIE5OKHUsZCxtLHgsTil7cmV0dXJuIHFhKCksaXgoTiksZC5mbGFnc3w9MjU2LFluKHUsZCxtLHgpLGQuY2hpbGR9dmFyIER4PXtkZWh5ZHJhdGVkOm51bGwsdHJlZUNvbnRleHQ6bnVsbCxyZXRyeUxhbmU6MH07ZnVuY3Rpb24gQXgodSl7cmV0dXJue2Jhc2VMYW5lczp1LGNhY2hlUG9vbDpudWxsLHRyYW5zaXRpb25zOm51bGx9fWZ1bmN0aW9uIGtOKHUsZCxtKXt2YXIgeD1kLnBlbmRpbmdQcm9wcyxOPVB0LmN1cnJlbnQsQz0hMSxSPShkLmZsYWdzJjEyOCkhPT0wLFc7aWYoKFc9Uil8fChXPXUhPT1udWxsJiZ1Lm1lbW9pemVkU3RhdGU9PT1udWxsPyExOihOJjIpIT09MCksVz8oQz0hMCxkLmZsYWdzJj0tMTI5KToodT09PW51bGx8fHUubWVtb2l6ZWRTdGF0ZSE9PW51bGwpJiYoTnw9MSksQ3QoUHQsTiYxKSx1PT09bnVsbClyZXR1cm4gb3goZCksdT1kLm1lbW9pemVkU3RhdGUsdSE9PW51bGwmJih1PXUuZGVoeWRyYXRlZCx1IT09bnVsbCk/KChkLm1vZGUmMSk9PT0wP2QubGFuZXM9MTp1LmRhdGE9PT0iJCEiP2QubGFuZXM9ODpkLmxhbmVzPTEwNzM3NDE4MjQsbnVsbCk6KFI9eC5jaGlsZHJlbix1PXguZmFsbGJhY2ssQz8oeD1kLm1vZGUsQz1kLmNoaWxkLFI9e21vZGU6ImhpZGRlbiIsY2hpbGRyZW46Un0sKHgmMSk9PT0wJiZDIT09bnVsbD8oQy5jaGlsZExhbmVzPTAsQy5wZW5kaW5nUHJvcHM9Uik6Qz1CcChSLHgsMCxudWxsKSx1PUJpKHUseCxtLG51bGwpLEMucmV0dXJuPWQsdS5yZXR1cm49ZCxDLnNpYmxpbmc9dSxkLmNoaWxkPUMsZC5jaGlsZC5tZW1vaXplZFN0YXRlPUF4KG0pLGQubWVtb2l6ZWRTdGF0ZT1EeCx1KTpfeChkLFIpKTtpZihOPXUubWVtb2l6ZWRTdGF0ZSxOIT09bnVsbCYmKFc9Ti5kZWh5ZHJhdGVkLFchPT1udWxsKSlyZXR1cm4gSV8odSxkLFIseCxXLE4sbSk7aWYoQyl7Qz14LmZhbGxiYWNrLFI9ZC5tb2RlLE49dS5jaGlsZCxXPU4uc2libGluZzt2YXIgWj17bW9kZToiaGlkZGVuIixjaGlsZHJlbjp4LmNoaWxkcmVufTtyZXR1cm4oUiYxKT09PTAmJmQuY2hpbGQhPT1OPyh4PWQuY2hpbGQseC5jaGlsZExhbmVzPTAseC5wZW5kaW5nUHJvcHM9WixkLmRlbGV0aW9ucz1udWxsKTooeD1LbyhOLFopLHguc3VidHJlZUZsYWdzPU4uc3VidHJlZUZsYWdzJjE0NjgwMDY0KSxXIT09bnVsbD9DPUtvKFcsQyk6KEM9QmkoQyxSLG0sbnVsbCksQy5mbGFnc3w9MiksQy5yZXR1cm49ZCx4LnJldHVybj1kLHguc2libGluZz1DLGQuY2hpbGQ9eCx4PUMsQz1kLmNoaWxkLFI9dS5jaGlsZC5tZW1vaXplZFN0YXRlLFI9Uj09PW51bGw/QXgobSk6e2Jhc2VMYW5lczpSLmJhc2VMYW5lc3xtLGNhY2hlUG9vbDpudWxsLHRyYW5zaXRpb25zOlIudHJhbnNpdGlvbnN9LEMubWVtb2l6ZWRTdGF0ZT1SLEMuY2hpbGRMYW5lcz11LmNoaWxkTGFuZXMmfm0sZC5tZW1vaXplZFN0YXRlPUR4LHh9cmV0dXJuIEM9dS5jaGlsZCx1PUMuc2libGluZyx4PUtvKEMse21vZGU6InZpc2libGUiLGNoaWxkcmVuOnguY2hpbGRyZW59KSwoZC5tb2RlJjEpPT09MCYmKHgubGFuZXM9bSkseC5yZXR1cm49ZCx4LnNpYmxpbmc9bnVsbCx1IT09bnVsbCYmKG09ZC5kZWxldGlvbnMsbT09PW51bGw/KGQuZGVsZXRpb25zPVt1XSxkLmZsYWdzfD0xNik6bS5wdXNoKHUpKSxkLmNoaWxkPXgsZC5tZW1vaXplZFN0YXRlPW51bGwseH1mdW5jdGlvbiBfeCh1LGQpe3JldHVybiBkPUJwKHttb2RlOiJ2aXNpYmxlIixjaGlsZHJlbjpkfSx1Lm1vZGUsMCxudWxsKSxkLnJldHVybj11LHUuY2hpbGQ9ZH1mdW5jdGlvbiBJcCh1LGQsbSx4KXtyZXR1cm4geCE9PW51bGwmJml4KHgpLEthKGQsdS5jaGlsZCxudWxsLG0pLHU9X3goZCxkLnBlbmRpbmdQcm9wcy5jaGlsZHJlbiksdS5mbGFnc3w9MixkLm1lbW9pemVkU3RhdGU9bnVsbCx1fWZ1bmN0aW9uIElfKHUsZCxtLHgsTixDLFIpe2lmKG0pcmV0dXJuIGQuZmxhZ3MmMjU2PyhkLmZsYWdzJj0tMjU3LHg9SXgoRXJyb3IodCg0MjIpKSksSXAodSxkLFIseCkpOmQubWVtb2l6ZWRTdGF0ZSE9PW51bGw/KGQuY2hpbGQ9dS5jaGlsZCxkLmZsYWdzfD0xMjgsbnVsbCk6KEM9eC5mYWxsYmFjayxOPWQubW9kZSx4PUJwKHttb2RlOiJ2aXNpYmxlIixjaGlsZHJlbjp4LmNoaWxkcmVufSxOLDAsbnVsbCksQz1CaShDLE4sUixudWxsKSxDLmZsYWdzfD0yLHgucmV0dXJuPWQsQy5yZXR1cm49ZCx4LnNpYmxpbmc9QyxkLmNoaWxkPXgsKGQubW9kZSYxKSE9PTAmJkthKGQsdS5jaGlsZCxudWxsLFIpLGQuY2hpbGQubWVtb2l6ZWRTdGF0ZT1BeChSKSxkLm1lbW9pemVkU3RhdGU9RHgsQyk7aWYoKGQubW9kZSYxKT09PTApcmV0dXJuIElwKHUsZCxSLG51bGwpO2lmKE4uZGF0YT09PSIkISIpe2lmKHg9Ti5uZXh0U2libGluZyYmTi5uZXh0U2libGluZy5kYXRhc2V0LHgpdmFyIFc9eC5kZ3N0O3JldHVybiB4PVcsQz1FcnJvcih0KDQxOSkpLHg9SXgoQyx4LHZvaWQgMCksSXAodSxkLFIseCl9aWYoVz0oUiZ1LmNoaWxkTGFuZXMpIT09MCxkc3x8Vyl7aWYoeD15bix4IT09bnVsbCl7c3dpdGNoKFImLVIpe2Nhc2UgNDpOPTI7YnJlYWs7Y2FzZSAxNjpOPTg7YnJlYWs7Y2FzZSA2NDpjYXNlIDEyODpjYXNlIDI1NjpjYXNlIDUxMjpjYXNlIDEwMjQ6Y2FzZSAyMDQ4OmNhc2UgNDA5NjpjYXNlIDgxOTI6Y2FzZSAxNjM4NDpjYXNlIDMyNzY4OmNhc2UgNjU1MzY6Y2FzZSAxMzEwNzI6Y2FzZSAyNjIxNDQ6Y2FzZSA1MjQyODg6Y2FzZSAxMDQ4NTc2OmNhc2UgMjA5NzE1MjpjYXNlIDQxOTQzMDQ6Y2FzZSA4Mzg4NjA4OmNhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpjYXNlIDY3MTA4ODY0Ok49MzI7YnJlYWs7Y2FzZSA1MzY4NzA5MTI6Tj0yNjg0MzU0NTY7YnJlYWs7ZGVmYXVsdDpOPTB9Tj0oTiYoeC5zdXNwZW5kZWRMYW5lc3xSKSkhPT0wPzA6TixOIT09MCYmTiE9PUMucmV0cnlMYW5lJiYoQy5yZXRyeUxhbmU9Tixvbyh1LE4pLGhyKHgsdSxOLC0xKSl9cmV0dXJuIFh4KCkseD1JeChFcnJvcih0KDQyMSkpKSxJcCh1LGQsUix4KX1yZXR1cm4gTi5kYXRhPT09IiQ/Ij8oZC5mbGFnc3w9MTI4LGQuY2hpbGQ9dS5jaGlsZCxkPUJfLmJpbmQobnVsbCx1KSxOLl9yZWFjdFJldHJ5PWQsbnVsbCk6KHU9Qy50cmVlQ29udGV4dCxFcz1QbyhOLm5leHRTaWJsaW5nKSxUcz1kLER0PSEwLGxyPW51bGwsdSE9PW51bGwmJihXc1tVcysrXT1zbyxXc1tVcysrXT1ybyxXc1tVcysrXT1EaSxzbz11LmlkLHJvPXUub3ZlcmZsb3csRGk9ZCksZD1feChkLHguY2hpbGRyZW4pLGQuZmxhZ3N8PTQwOTYsZCl9ZnVuY3Rpb24gQ04odSxkLG0pe3UubGFuZXN8PWQ7dmFyIHg9dS5hbHRlcm5hdGU7eCE9PW51bGwmJih4LmxhbmVzfD1kKSxjeCh1LnJldHVybixkLG0pfWZ1bmN0aW9uIE94KHUsZCxtLHgsTil7dmFyIEM9dS5tZW1vaXplZFN0YXRlO0M9PT1udWxsP3UubWVtb2l6ZWRTdGF0ZT17aXNCYWNrd2FyZHM6ZCxyZW5kZXJpbmc6bnVsbCxyZW5kZXJpbmdTdGFydFRpbWU6MCxsYXN0OngsdGFpbDptLHRhaWxNb2RlOk59OihDLmlzQmFja3dhcmRzPWQsQy5yZW5kZXJpbmc9bnVsbCxDLnJlbmRlcmluZ1N0YXJ0VGltZT0wLEMubGFzdD14LEMudGFpbD1tLEMudGFpbE1vZGU9Til9ZnVuY3Rpb24gJE4odSxkLG0pe3ZhciB4PWQucGVuZGluZ1Byb3BzLE49eC5yZXZlYWxPcmRlcixDPXgudGFpbDtpZihZbih1LGQseC5jaGlsZHJlbixtKSx4PVB0LmN1cnJlbnQsKHgmMikhPT0wKXg9eCYxfDIsZC5mbGFnc3w9MTI4O2Vsc2V7aWYodSE9PW51bGwmJih1LmZsYWdzJjEyOCkhPT0wKWU6Zm9yKHU9ZC5jaGlsZDt1IT09bnVsbDspe2lmKHUudGFnPT09MTMpdS5tZW1vaXplZFN0YXRlIT09bnVsbCYmQ04odSxtLGQpO2Vsc2UgaWYodS50YWc9PT0xOSlDTih1LG0sZCk7ZWxzZSBpZih1LmNoaWxkIT09bnVsbCl7dS5jaGlsZC5yZXR1cm49dSx1PXUuY2hpbGQ7Y29udGludWV9aWYodT09PWQpYnJlYWsgZTtmb3IoO3Uuc2libGluZz09PW51bGw7KXtpZih1LnJldHVybj09PW51bGx8fHUucmV0dXJuPT09ZClicmVhayBlO3U9dS5yZXR1cm59dS5zaWJsaW5nLnJldHVybj11LnJldHVybix1PXUuc2libGluZ314Jj0xfWlmKEN0KFB0LHgpLChkLm1vZGUmMSk9PT0wKWQubWVtb2l6ZWRTdGF0ZT1udWxsO2Vsc2Ugc3dpdGNoKE4pe2Nhc2UiZm9yd2FyZHMiOmZvcihtPWQuY2hpbGQsTj1udWxsO20hPT1udWxsOyl1PW0uYWx0ZXJuYXRlLHUhPT1udWxsJiZ3cCh1KT09PW51bGwmJihOPW0pLG09bS5zaWJsaW5nO209TixtPT09bnVsbD8oTj1kLmNoaWxkLGQuY2hpbGQ9bnVsbCk6KE49bS5zaWJsaW5nLG0uc2libGluZz1udWxsKSxPeChkLCExLE4sbSxDKTticmVhaztjYXNlImJhY2t3YXJkcyI6Zm9yKG09bnVsbCxOPWQuY2hpbGQsZC5jaGlsZD1udWxsO04hPT1udWxsOyl7aWYodT1OLmFsdGVybmF0ZSx1IT09bnVsbCYmd3AodSk9PT1udWxsKXtkLmNoaWxkPU47YnJlYWt9dT1OLnNpYmxpbmcsTi5zaWJsaW5nPW0sbT1OLE49dX1PeChkLCEwLG0sbnVsbCxDKTticmVhaztjYXNlInRvZ2V0aGVyIjpPeChkLCExLG51bGwsbnVsbCx2b2lkIDApO2JyZWFrO2RlZmF1bHQ6ZC5tZW1vaXplZFN0YXRlPW51bGx9cmV0dXJuIGQuY2hpbGR9ZnVuY3Rpb24gVHAodSxkKXsoZC5tb2RlJjEpPT09MCYmdSE9PW51bGwmJih1LmFsdGVybmF0ZT1udWxsLGQuYWx0ZXJuYXRlPW51bGwsZC5mbGFnc3w9Mil9ZnVuY3Rpb24gYW8odSxkLG0pe2lmKHUhPT1udWxsJiYoZC5kZXBlbmRlbmNpZXM9dS5kZXBlbmRlbmNpZXMpLExpfD1kLmxhbmVzLChtJmQuY2hpbGRMYW5lcyk9PT0wKXJldHVybiBudWxsO2lmKHUhPT1udWxsJiZkLmNoaWxkIT09dS5jaGlsZCl0aHJvdyBFcnJvcih0KDE1MykpO2lmKGQuY2hpbGQhPT1udWxsKXtmb3IodT1kLmNoaWxkLG09S28odSx1LnBlbmRpbmdQcm9wcyksZC5jaGlsZD1tLG0ucmV0dXJuPWQ7dS5zaWJsaW5nIT09bnVsbDspdT11LnNpYmxpbmcsbT1tLnNpYmxpbmc9S28odSx1LnBlbmRpbmdQcm9wcyksbS5yZXR1cm49ZDttLnNpYmxpbmc9bnVsbH1yZXR1cm4gZC5jaGlsZH1mdW5jdGlvbiBUXyh1LGQsbSl7c3dpdGNoKGQudGFnKXtjYXNlIDM6U04oZCkscWEoKTticmVhaztjYXNlIDU6QlMoZCk7YnJlYWs7Y2FzZSAxOmNzKGQudHlwZSkmJmNwKGQpO2JyZWFrO2Nhc2UgNDpweChkLGQuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8pO2JyZWFrO2Nhc2UgMTA6dmFyIHg9ZC50eXBlLl9jb250ZXh0LE49ZC5tZW1vaXplZFByb3BzLnZhbHVlO0N0KGdwLHguX2N1cnJlbnRWYWx1ZSkseC5fY3VycmVudFZhbHVlPU47YnJlYWs7Y2FzZSAxMzppZih4PWQubWVtb2l6ZWRTdGF0ZSx4IT09bnVsbClyZXR1cm4geC5kZWh5ZHJhdGVkIT09bnVsbD8oQ3QoUHQsUHQuY3VycmVudCYxKSxkLmZsYWdzfD0xMjgsbnVsbCk6KG0mZC5jaGlsZC5jaGlsZExhbmVzKSE9PTA/a04odSxkLG0pOihDdChQdCxQdC5jdXJyZW50JjEpLHU9YW8odSxkLG0pLHUhPT1udWxsP3Uuc2libGluZzpudWxsKTtDdChQdCxQdC5jdXJyZW50JjEpO2JyZWFrO2Nhc2UgMTk6aWYoeD0obSZkLmNoaWxkTGFuZXMpIT09MCwodS5mbGFncyYxMjgpIT09MCl7aWYoeClyZXR1cm4gJE4odSxkLG0pO2QuZmxhZ3N8PTEyOH1pZihOPWQubWVtb2l6ZWRTdGF0ZSxOIT09bnVsbCYmKE4ucmVuZGVyaW5nPW51bGwsTi50YWlsPW51bGwsTi5sYXN0RWZmZWN0PW51bGwpLEN0KFB0LFB0LmN1cnJlbnQpLHgpYnJlYWs7cmV0dXJuIG51bGw7Y2FzZSAyMjpjYXNlIDIzOnJldHVybiBkLmxhbmVzPTAsYk4odSxkLG0pfXJldHVybiBhbyh1LGQsbSl9dmFyIElOLEZ4LFROLEVOO0lOPWZ1bmN0aW9uKHUsZCl7Zm9yKHZhciBtPWQuY2hpbGQ7bSE9PW51bGw7KXtpZihtLnRhZz09PTV8fG0udGFnPT09Nil1LmFwcGVuZENoaWxkKG0uc3RhdGVOb2RlKTtlbHNlIGlmKG0udGFnIT09NCYmbS5jaGlsZCE9PW51bGwpe20uY2hpbGQucmV0dXJuPW0sbT1tLmNoaWxkO2NvbnRpbnVlfWlmKG09PT1kKWJyZWFrO2Zvcig7bS5zaWJsaW5nPT09bnVsbDspe2lmKG0ucmV0dXJuPT09bnVsbHx8bS5yZXR1cm49PT1kKXJldHVybjttPW0ucmV0dXJufW0uc2libGluZy5yZXR1cm49bS5yZXR1cm4sbT1tLnNpYmxpbmd9fSxGeD1mdW5jdGlvbigpe30sVE49ZnVuY3Rpb24odSxkLG0seCl7dmFyIE49dS5tZW1vaXplZFByb3BzO2lmKE4hPT14KXt1PWQuc3RhdGVOb2RlLE9pKEFyLmN1cnJlbnQpO3ZhciBDPW51bGw7c3dpdGNoKG0pe2Nhc2UiaW5wdXQiOk49aHQodSxOKSx4PWh0KHUseCksQz1bXTticmVhaztjYXNlInNlbGVjdCI6Tj1xKHt9LE4se3ZhbHVlOnZvaWQgMH0pLHg9cSh7fSx4LHt2YWx1ZTp2b2lkIDB9KSxDPVtdO2JyZWFrO2Nhc2UidGV4dGFyZWEiOk49VG4odSxOKSx4PVRuKHUseCksQz1bXTticmVhaztkZWZhdWx0OnR5cGVvZiBOLm9uQ2xpY2shPSJmdW5jdGlvbiImJnR5cGVvZiB4Lm9uQ2xpY2s9PSJmdW5jdGlvbiImJih1Lm9uY2xpY2s9YXApfW15KG0seCk7dmFyIFI7bT1udWxsO2Zvcih1ZSBpbiBOKWlmKCF4Lmhhc093blByb3BlcnR5KHVlKSYmTi5oYXNPd25Qcm9wZXJ0eSh1ZSkmJk5bdWVdIT1udWxsKWlmKHVlPT09InN0eWxlIil7dmFyIFc9Tlt1ZV07Zm9yKFIgaW4gVylXLmhhc093blByb3BlcnR5KFIpJiYobXx8KG09e30pLG1bUl09IiIpfWVsc2UgdWUhPT0iZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiJiZ1ZSE9PSJjaGlsZHJlbiImJnVlIT09InN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyImJnVlIT09InN1cHByZXNzSHlkcmF0aW9uV2FybmluZyImJnVlIT09ImF1dG9Gb2N1cyImJihyLmhhc093blByb3BlcnR5KHVlKT9DfHwoQz1bXSk6KEM9Q3x8W10pLnB1c2godWUsbnVsbCkpO2Zvcih1ZSBpbiB4KXt2YXIgWj14W3VlXTtpZihXPU4/Llt1ZV0seC5oYXNPd25Qcm9wZXJ0eSh1ZSkmJlohPT1XJiYoWiE9bnVsbHx8VyE9bnVsbCkpaWYodWU9PT0ic3R5bGUiKWlmKFcpe2ZvcihSIGluIFcpIVcuaGFzT3duUHJvcGVydHkoUil8fFomJlouaGFzT3duUHJvcGVydHkoUil8fChtfHwobT17fSksbVtSXT0iIik7Zm9yKFIgaW4gWilaLmhhc093blByb3BlcnR5KFIpJiZXW1JdIT09WltSXSYmKG18fChtPXt9KSxtW1JdPVpbUl0pfWVsc2UgbXx8KEN8fChDPVtdKSxDLnB1c2godWUsbSkpLG09WjtlbHNlIHVlPT09ImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIj8oWj1aP1ouX19odG1sOnZvaWQgMCxXPVc/Vy5fX2h0bWw6dm9pZCAwLFohPW51bGwmJlchPT1aJiYoQz1DfHxbXSkucHVzaCh1ZSxaKSk6dWU9PT0iY2hpbGRyZW4iP3R5cGVvZiBaIT0ic3RyaW5nIiYmdHlwZW9mIFohPSJudW1iZXIifHwoQz1DfHxbXSkucHVzaCh1ZSwiIitaKTp1ZSE9PSJzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmciJiZ1ZSE9PSJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciJiYoci5oYXNPd25Qcm9wZXJ0eSh1ZSk/KFohPW51bGwmJnVlPT09Im9uU2Nyb2xsIiYmJHQoInNjcm9sbCIsdSksQ3x8Vz09PVp8fChDPVtdKSk6KEM9Q3x8W10pLnB1c2godWUsWikpfW0mJihDPUN8fFtdKS5wdXNoKCJzdHlsZSIsbSk7dmFyIHVlPUM7KGQudXBkYXRlUXVldWU9dWUpJiYoZC5mbGFnc3w9NCl9fSxFTj1mdW5jdGlvbih1LGQsbSx4KXttIT09eCYmKGQuZmxhZ3N8PTQpfTtmdW5jdGlvbiBmYyh1LGQpe2lmKCFEdClzd2l0Y2godS50YWlsTW9kZSl7Y2FzZSJoaWRkZW4iOmQ9dS50YWlsO2Zvcih2YXIgbT1udWxsO2QhPT1udWxsOylkLmFsdGVybmF0ZSE9PW51bGwmJihtPWQpLGQ9ZC5zaWJsaW5nO209PT1udWxsP3UudGFpbD1udWxsOm0uc2libGluZz1udWxsO2JyZWFrO2Nhc2UiY29sbGFwc2VkIjptPXUudGFpbDtmb3IodmFyIHg9bnVsbDttIT09bnVsbDspbS5hbHRlcm5hdGUhPT1udWxsJiYoeD1tKSxtPW0uc2libGluZzt4PT09bnVsbD9kfHx1LnRhaWw9PT1udWxsP3UudGFpbD1udWxsOnUudGFpbC5zaWJsaW5nPW51bGw6eC5zaWJsaW5nPW51bGx9fWZ1bmN0aW9uIE1uKHUpe3ZhciBkPXUuYWx0ZXJuYXRlIT09bnVsbCYmdS5hbHRlcm5hdGUuY2hpbGQ9PT11LmNoaWxkLG09MCx4PTA7aWYoZClmb3IodmFyIE49dS5jaGlsZDtOIT09bnVsbDspbXw9Ti5sYW5lc3xOLmNoaWxkTGFuZXMseHw9Ti5zdWJ0cmVlRmxhZ3MmMTQ2ODAwNjQseHw9Ti5mbGFncyYxNDY4MDA2NCxOLnJldHVybj11LE49Ti5zaWJsaW5nO2Vsc2UgZm9yKE49dS5jaGlsZDtOIT09bnVsbDspbXw9Ti5sYW5lc3xOLmNoaWxkTGFuZXMseHw9Ti5zdWJ0cmVlRmxhZ3MseHw9Ti5mbGFncyxOLnJldHVybj11LE49Ti5zaWJsaW5nO3JldHVybiB1LnN1YnRyZWVGbGFnc3w9eCx1LmNoaWxkTGFuZXM9bSxkfWZ1bmN0aW9uIEVfKHUsZCxtKXt2YXIgeD1kLnBlbmRpbmdQcm9wcztzd2l0Y2goc3goZCksZC50YWcpe2Nhc2UgMjpjYXNlIDE2OmNhc2UgMTU6Y2FzZSAwOmNhc2UgMTE6Y2FzZSA3OmNhc2UgODpjYXNlIDEyOmNhc2UgOTpjYXNlIDE0OnJldHVybiBNbihkKSxudWxsO2Nhc2UgMTpyZXR1cm4gY3MoZC50eXBlKSYmdXAoKSxNbihkKSxudWxsO2Nhc2UgMzpyZXR1cm4geD1kLnN0YXRlTm9kZSxRYSgpLEl0KHVzKSxJdChQbiksZ3goKSx4LnBlbmRpbmdDb250ZXh0JiYoeC5jb250ZXh0PXgucGVuZGluZ0NvbnRleHQseC5wZW5kaW5nQ29udGV4dD1udWxsKSwodT09PW51bGx8fHUuY2hpbGQ9PT1udWxsKSYmKGZwKGQpP2QuZmxhZ3N8PTQ6dT09PW51bGx8fHUubWVtb2l6ZWRTdGF0ZS5pc0RlaHlkcmF0ZWQmJihkLmZsYWdzJjI1Nik9PT0wfHwoZC5mbGFnc3w9MTAyNCxsciE9PW51bGwmJihIeChsciksbHI9bnVsbCkpKSxGeCh1LGQpLE1uKGQpLG51bGw7Y2FzZSA1OmZ4KGQpO3ZhciBOPU9pKHVjLmN1cnJlbnQpO2lmKG09ZC50eXBlLHUhPT1udWxsJiZkLnN0YXRlTm9kZSE9bnVsbClUTih1LGQsbSx4LE4pLHUucmVmIT09ZC5yZWYmJihkLmZsYWdzfD01MTIsZC5mbGFnc3w9MjA5NzE1Mik7ZWxzZXtpZigheCl7aWYoZC5zdGF0ZU5vZGU9PT1udWxsKXRocm93IEVycm9yKHQoMTY2KSk7cmV0dXJuIE1uKGQpLG51bGx9aWYodT1PaShBci5jdXJyZW50KSxmcChkKSl7eD1kLnN0YXRlTm9kZSxtPWQudHlwZTt2YXIgQz1kLm1lbW9pemVkUHJvcHM7c3dpdGNoKHhbRHJdPWQseFtyY109Qyx1PShkLm1vZGUmMSkhPT0wLG0pe2Nhc2UiZGlhbG9nIjokdCgiY2FuY2VsIix4KSwkdCgiY2xvc2UiLHgpO2JyZWFrO2Nhc2UiaWZyYW1lIjpjYXNlIm9iamVjdCI6Y2FzZSJlbWJlZCI6JHQoImxvYWQiLHgpO2JyZWFrO2Nhc2UidmlkZW8iOmNhc2UiYXVkaW8iOmZvcihOPTA7Tjx0Yy5sZW5ndGg7TisrKSR0KHRjW05dLHgpO2JyZWFrO2Nhc2Uic291cmNlIjokdCgiZXJyb3IiLHgpO2JyZWFrO2Nhc2UiaW1nIjpjYXNlImltYWdlIjpjYXNlImxpbmsiOiR0KCJlcnJvciIseCksJHQoImxvYWQiLHgpO2JyZWFrO2Nhc2UiZGV0YWlscyI6JHQoInRvZ2dsZSIseCk7YnJlYWs7Y2FzZSJpbnB1dCI6cHQoeCxDKSwkdCgiaW52YWxpZCIseCk7YnJlYWs7Y2FzZSJzZWxlY3QiOnguX3dyYXBwZXJTdGF0ZT17d2FzTXVsdGlwbGU6ISFDLm11bHRpcGxlfSwkdCgiaW52YWxpZCIseCk7YnJlYWs7Y2FzZSJ0ZXh0YXJlYSI6RXIoeCxDKSwkdCgiaW52YWxpZCIseCl9bXkobSxDKSxOPW51bGw7Zm9yKHZhciBSIGluIEMpaWYoQy5oYXNPd25Qcm9wZXJ0eShSKSl7dmFyIFc9Q1tSXTtSPT09ImNoaWxkcmVuIj90eXBlb2YgVz09InN0cmluZyI/eC50ZXh0Q29udGVudCE9PVcmJihDLnN1cHByZXNzSHlkcmF0aW9uV2FybmluZyE9PSEwJiZpcCh4LnRleHRDb250ZW50LFcsdSksTj1bImNoaWxkcmVuIixXXSk6dHlwZW9mIFc9PSJudW1iZXIiJiZ4LnRleHRDb250ZW50IT09IiIrVyYmKEMuc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIT09ITAmJmlwKHgudGV4dENvbnRlbnQsVyx1KSxOPVsiY2hpbGRyZW4iLCIiK1ddKTpyLmhhc093blByb3BlcnR5KFIpJiZXIT1udWxsJiZSPT09Im9uU2Nyb2xsIiYmJHQoInNjcm9sbCIseCl9c3dpdGNoKG0pe2Nhc2UiaW5wdXQiOldlKHgpLHd0KHgsQywhMCk7YnJlYWs7Y2FzZSJ0ZXh0YXJlYSI6V2UoeCksQnMoeCk7YnJlYWs7Y2FzZSJzZWxlY3QiOmNhc2Uib3B0aW9uIjpicmVhaztkZWZhdWx0OnR5cGVvZiBDLm9uQ2xpY2s9PSJmdW5jdGlvbiImJih4Lm9uY2xpY2s9YXApfXg9TixkLnVwZGF0ZVF1ZXVlPXgseCE9PW51bGwmJihkLmZsYWdzfD00KX1lbHNle1I9Ti5ub2RlVHlwZT09PTk/TjpOLm93bmVyRG9jdW1lbnQsdT09PSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiYmKHU9b3IobSkpLHU9PT0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI/bT09PSJzY3JpcHQiPyh1PVIuY3JlYXRlRWxlbWVudCgiZGl2IiksdS5pbm5lckhUTUw9IjxzY3JpcHQ+PFwvc2NyaXB0PiIsdT11LnJlbW92ZUNoaWxkKHUuZmlyc3RDaGlsZCkpOnR5cGVvZiB4LmlzPT0ic3RyaW5nIj91PVIuY3JlYXRlRWxlbWVudChtLHtpczp4LmlzfSk6KHU9Ui5jcmVhdGVFbGVtZW50KG0pLG09PT0ic2VsZWN0IiYmKFI9dSx4Lm11bHRpcGxlP1IubXVsdGlwbGU9ITA6eC5zaXplJiYoUi5zaXplPXguc2l6ZSkpKTp1PVIuY3JlYXRlRWxlbWVudE5TKHUsbSksdVtEcl09ZCx1W3JjXT14LElOKHUsZCwhMSwhMSksZC5zdGF0ZU5vZGU9dTtlOntzd2l0Y2goUj1neShtLHgpLG0pe2Nhc2UiZGlhbG9nIjokdCgiY2FuY2VsIix1KSwkdCgiY2xvc2UiLHUpLE49eDticmVhaztjYXNlImlmcmFtZSI6Y2FzZSJvYmplY3QiOmNhc2UiZW1iZWQiOiR0KCJsb2FkIix1KSxOPXg7YnJlYWs7Y2FzZSJ2aWRlbyI6Y2FzZSJhdWRpbyI6Zm9yKE49MDtOPHRjLmxlbmd0aDtOKyspJHQodGNbTl0sdSk7Tj14O2JyZWFrO2Nhc2Uic291cmNlIjokdCgiZXJyb3IiLHUpLE49eDticmVhaztjYXNlImltZyI6Y2FzZSJpbWFnZSI6Y2FzZSJsaW5rIjokdCgiZXJyb3IiLHUpLCR0KCJsb2FkIix1KSxOPXg7YnJlYWs7Y2FzZSJkZXRhaWxzIjokdCgidG9nZ2xlIix1KSxOPXg7YnJlYWs7Y2FzZSJpbnB1dCI6cHQodSx4KSxOPWh0KHUseCksJHQoImludmFsaWQiLHUpO2JyZWFrO2Nhc2Uib3B0aW9uIjpOPXg7YnJlYWs7Y2FzZSJzZWxlY3QiOnUuX3dyYXBwZXJTdGF0ZT17d2FzTXVsdGlwbGU6ISF4Lm11bHRpcGxlfSxOPXEoe30seCx7dmFsdWU6dm9pZCAwfSksJHQoImludmFsaWQiLHUpO2JyZWFrO2Nhc2UidGV4dGFyZWEiOkVyKHUseCksTj1Ubih1LHgpLCR0KCJpbnZhbGlkIix1KTticmVhaztkZWZhdWx0Ok49eH1teShtLE4pLFc9Tjtmb3IoQyBpbiBXKWlmKFcuaGFzT3duUHJvcGVydHkoQykpe3ZhciBaPVdbQ107Qz09PSJzdHlsZSI/TWgodSxaKTpDPT09ImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIj8oWj1aP1ouX19odG1sOnZvaWQgMCxaIT1udWxsJiZSbyh1LFopKTpDPT09ImNoaWxkcmVuIj90eXBlb2YgWj09InN0cmluZyI/KG0hPT0idGV4dGFyZWEifHxaIT09IiIpJiZKcih1LFopOnR5cGVvZiBaPT0ibnVtYmVyIiYmSnIodSwiIitaKTpDIT09InN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyImJkMhPT0ic3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIiYmQyE9PSJhdXRvRm9jdXMiJiYoci5oYXNPd25Qcm9wZXJ0eShDKT9aIT1udWxsJiZDPT09Im9uU2Nyb2xsIiYmJHQoInNjcm9sbCIsdSk6WiE9bnVsbCYmJCh1LEMsWixSKSl9c3dpdGNoKG0pe2Nhc2UiaW5wdXQiOldlKHUpLHd0KHUseCwhMSk7YnJlYWs7Y2FzZSJ0ZXh0YXJlYSI6V2UodSksQnModSk7YnJlYWs7Y2FzZSJvcHRpb24iOngudmFsdWUhPW51bGwmJnUuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIrdmUoeC52YWx1ZSkpO2JyZWFrO2Nhc2Uic2VsZWN0Ijp1Lm11bHRpcGxlPSEheC5tdWx0aXBsZSxDPXgudmFsdWUsQyE9bnVsbD9Ybih1LCEheC5tdWx0aXBsZSxDLCExKTp4LmRlZmF1bHRWYWx1ZSE9bnVsbCYmWG4odSwhIXgubXVsdGlwbGUseC5kZWZhdWx0VmFsdWUsITApO2JyZWFrO2RlZmF1bHQ6dHlwZW9mIE4ub25DbGljaz09ImZ1bmN0aW9uIiYmKHUub25jbGljaz1hcCl9c3dpdGNoKG0pe2Nhc2UiYnV0dG9uIjpjYXNlImlucHV0IjpjYXNlInNlbGVjdCI6Y2FzZSJ0ZXh0YXJlYSI6eD0hIXguYXV0b0ZvY3VzO2JyZWFrIGU7Y2FzZSJpbWciOng9ITA7YnJlYWsgZTtkZWZhdWx0Ong9ITF9fXgmJihkLmZsYWdzfD00KX1kLnJlZiE9PW51bGwmJihkLmZsYWdzfD01MTIsZC5mbGFnc3w9MjA5NzE1Mil9cmV0dXJuIE1uKGQpLG51bGw7Y2FzZSA2OmlmKHUmJmQuc3RhdGVOb2RlIT1udWxsKUVOKHUsZCx1Lm1lbW9pemVkUHJvcHMseCk7ZWxzZXtpZih0eXBlb2YgeCE9InN0cmluZyImJmQuc3RhdGVOb2RlPT09bnVsbCl0aHJvdyBFcnJvcih0KDE2NikpO2lmKG09T2kodWMuY3VycmVudCksT2koQXIuY3VycmVudCksZnAoZCkpe2lmKHg9ZC5zdGF0ZU5vZGUsbT1kLm1lbW9pemVkUHJvcHMseFtEcl09ZCwoQz14Lm5vZGVWYWx1ZSE9PW0pJiYodT1Ucyx1IT09bnVsbCkpc3dpdGNoKHUudGFnKXtjYXNlIDM6aXAoeC5ub2RlVmFsdWUsbSwodS5tb2RlJjEpIT09MCk7YnJlYWs7Y2FzZSA1OnUubWVtb2l6ZWRQcm9wcy5zdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmchPT0hMCYmaXAoeC5ub2RlVmFsdWUsbSwodS5tb2RlJjEpIT09MCl9QyYmKGQuZmxhZ3N8PTQpfWVsc2UgeD0obS5ub2RlVHlwZT09PTk/bTptLm93bmVyRG9jdW1lbnQpLmNyZWF0ZVRleHROb2RlKHgpLHhbRHJdPWQsZC5zdGF0ZU5vZGU9eH1yZXR1cm4gTW4oZCksbnVsbDtjYXNlIDEzOmlmKEl0KFB0KSx4PWQubWVtb2l6ZWRTdGF0ZSx1PT09bnVsbHx8dS5tZW1vaXplZFN0YXRlIT09bnVsbCYmdS5tZW1vaXplZFN0YXRlLmRlaHlkcmF0ZWQhPT1udWxsKXtpZihEdCYmRXMhPT1udWxsJiYoZC5tb2RlJjEpIT09MCYmKGQuZmxhZ3MmMTI4KT09PTApQVMoKSxxYSgpLGQuZmxhZ3N8PTk4NTYwLEM9ITE7ZWxzZSBpZihDPWZwKGQpLHghPT1udWxsJiZ4LmRlaHlkcmF0ZWQhPT1udWxsKXtpZih1PT09bnVsbCl7aWYoIUMpdGhyb3cgRXJyb3IodCgzMTgpKTtpZihDPWQubWVtb2l6ZWRTdGF0ZSxDPUMhPT1udWxsP0MuZGVoeWRyYXRlZDpudWxsLCFDKXRocm93IEVycm9yKHQoMzE3KSk7Q1tEcl09ZH1lbHNlIHFhKCksKGQuZmxhZ3MmMTI4KT09PTAmJihkLm1lbW9pemVkU3RhdGU9bnVsbCksZC5mbGFnc3w9NDtNbihkKSxDPSExfWVsc2UgbHIhPT1udWxsJiYoSHgobHIpLGxyPW51bGwpLEM9ITA7aWYoIUMpcmV0dXJuIGQuZmxhZ3MmNjU1MzY/ZDpudWxsfXJldHVybihkLmZsYWdzJjEyOCkhPT0wPyhkLmxhbmVzPW0sZCk6KHg9eCE9PW51bGwseCE9PSh1IT09bnVsbCYmdS5tZW1vaXplZFN0YXRlIT09bnVsbCkmJngmJihkLmNoaWxkLmZsYWdzfD04MTkyLChkLm1vZGUmMSkhPT0wJiYodT09PW51bGx8fChQdC5jdXJyZW50JjEpIT09MD9sbj09PTAmJihsbj0zKTpYeCgpKSksZC51cGRhdGVRdWV1ZSE9PW51bGwmJihkLmZsYWdzfD00KSxNbihkKSxudWxsKTtjYXNlIDQ6cmV0dXJuIFFhKCksRngodSxkKSx1PT09bnVsbCYmbmMoZC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbyksTW4oZCksbnVsbDtjYXNlIDEwOnJldHVybiB1eChkLnR5cGUuX2NvbnRleHQpLE1uKGQpLG51bGw7Y2FzZSAxNzpyZXR1cm4gY3MoZC50eXBlKSYmdXAoKSxNbihkKSxudWxsO2Nhc2UgMTk6aWYoSXQoUHQpLEM9ZC5tZW1vaXplZFN0YXRlLEM9PT1udWxsKXJldHVybiBNbihkKSxudWxsO2lmKHg9KGQuZmxhZ3MmMTI4KSE9PTAsUj1DLnJlbmRlcmluZyxSPT09bnVsbClpZih4KWZjKEMsITEpO2Vsc2V7aWYobG4hPT0wfHx1IT09bnVsbCYmKHUuZmxhZ3MmMTI4KSE9PTApZm9yKHU9ZC5jaGlsZDt1IT09bnVsbDspe2lmKFI9d3AodSksUiE9PW51bGwpe2ZvcihkLmZsYWdzfD0xMjgsZmMoQywhMSkseD1SLnVwZGF0ZVF1ZXVlLHghPT1udWxsJiYoZC51cGRhdGVRdWV1ZT14LGQuZmxhZ3N8PTQpLGQuc3VidHJlZUZsYWdzPTAseD1tLG09ZC5jaGlsZDttIT09bnVsbDspQz1tLHU9eCxDLmZsYWdzJj0xNDY4MDA2NixSPUMuYWx0ZXJuYXRlLFI9PT1udWxsPyhDLmNoaWxkTGFuZXM9MCxDLmxhbmVzPXUsQy5jaGlsZD1udWxsLEMuc3VidHJlZUZsYWdzPTAsQy5tZW1vaXplZFByb3BzPW51bGwsQy5tZW1vaXplZFN0YXRlPW51bGwsQy51cGRhdGVRdWV1ZT1udWxsLEMuZGVwZW5kZW5jaWVzPW51bGwsQy5zdGF0ZU5vZGU9bnVsbCk6KEMuY2hpbGRMYW5lcz1SLmNoaWxkTGFuZXMsQy5sYW5lcz1SLmxhbmVzLEMuY2hpbGQ9Ui5jaGlsZCxDLnN1YnRyZWVGbGFncz0wLEMuZGVsZXRpb25zPW51bGwsQy5tZW1vaXplZFByb3BzPVIubWVtb2l6ZWRQcm9wcyxDLm1lbW9pemVkU3RhdGU9Ui5tZW1vaXplZFN0YXRlLEMudXBkYXRlUXVldWU9Ui51cGRhdGVRdWV1ZSxDLnR5cGU9Ui50eXBlLHU9Ui5kZXBlbmRlbmNpZXMsQy5kZXBlbmRlbmNpZXM9dT09PW51bGw/bnVsbDp7bGFuZXM6dS5sYW5lcyxmaXJzdENvbnRleHQ6dS5maXJzdENvbnRleHR9KSxtPW0uc2libGluZztyZXR1cm4gQ3QoUHQsUHQuY3VycmVudCYxfDIpLGQuY2hpbGR9dT11LnNpYmxpbmd9Qy50YWlsIT09bnVsbCYmcXQoKT50bCYmKGQuZmxhZ3N8PTEyOCx4PSEwLGZjKEMsITEpLGQubGFuZXM9NDE5NDMwNCl9ZWxzZXtpZigheClpZih1PXdwKFIpLHUhPT1udWxsKXtpZihkLmZsYWdzfD0xMjgseD0hMCxtPXUudXBkYXRlUXVldWUsbSE9PW51bGwmJihkLnVwZGF0ZVF1ZXVlPW0sZC5mbGFnc3w9NCksZmMoQywhMCksQy50YWlsPT09bnVsbCYmQy50YWlsTW9kZT09PSJoaWRkZW4iJiYhUi5hbHRlcm5hdGUmJiFEdClyZXR1cm4gTW4oZCksbnVsbH1lbHNlIDIqcXQoKS1DLnJlbmRlcmluZ1N0YXJ0VGltZT50bCYmbSE9PTEwNzM3NDE4MjQmJihkLmZsYWdzfD0xMjgseD0hMCxmYyhDLCExKSxkLmxhbmVzPTQxOTQzMDQpO0MuaXNCYWNrd2FyZHM/KFIuc2libGluZz1kLmNoaWxkLGQuY2hpbGQ9Uik6KG09Qy5sYXN0LG0hPT1udWxsP20uc2libGluZz1SOmQuY2hpbGQ9UixDLmxhc3Q9Uil9cmV0dXJuIEMudGFpbCE9PW51bGw/KGQ9Qy50YWlsLEMucmVuZGVyaW5nPWQsQy50YWlsPWQuc2libGluZyxDLnJlbmRlcmluZ1N0YXJ0VGltZT1xdCgpLGQuc2libGluZz1udWxsLG09UHQuY3VycmVudCxDdChQdCx4P20mMXwyOm0mMSksZCk6KE1uKGQpLG51bGwpO2Nhc2UgMjI6Y2FzZSAyMzpyZXR1cm4gS3goKSx4PWQubWVtb2l6ZWRTdGF0ZSE9PW51bGwsdSE9PW51bGwmJnUubWVtb2l6ZWRTdGF0ZSE9PW51bGwhPT14JiYoZC5mbGFnc3w9ODE5MikseCYmKGQubW9kZSYxKSE9PTA/KFJzJjEwNzM3NDE4MjQpIT09MCYmKE1uKGQpLGQuc3VidHJlZUZsYWdzJjYmJihkLmZsYWdzfD04MTkyKSk6TW4oZCksbnVsbDtjYXNlIDI0OnJldHVybiBudWxsO2Nhc2UgMjU6cmV0dXJuIG51bGx9dGhyb3cgRXJyb3IodCgxNTYsZC50YWcpKX1mdW5jdGlvbiBSXyh1LGQpe3N3aXRjaChzeChkKSxkLnRhZyl7Y2FzZSAxOnJldHVybiBjcyhkLnR5cGUpJiZ1cCgpLHU9ZC5mbGFncyx1JjY1NTM2PyhkLmZsYWdzPXUmLTY1NTM3fDEyOCxkKTpudWxsO2Nhc2UgMzpyZXR1cm4gUWEoKSxJdCh1cyksSXQoUG4pLGd4KCksdT1kLmZsYWdzLCh1JjY1NTM2KSE9PTAmJih1JjEyOCk9PT0wPyhkLmZsYWdzPXUmLTY1NTM3fDEyOCxkKTpudWxsO2Nhc2UgNTpyZXR1cm4gZngoZCksbnVsbDtjYXNlIDEzOmlmKEl0KFB0KSx1PWQubWVtb2l6ZWRTdGF0ZSx1IT09bnVsbCYmdS5kZWh5ZHJhdGVkIT09bnVsbCl7aWYoZC5hbHRlcm5hdGU9PT1udWxsKXRocm93IEVycm9yKHQoMzQwKSk7cWEoKX1yZXR1cm4gdT1kLmZsYWdzLHUmNjU1MzY/KGQuZmxhZ3M9dSYtNjU1Mzd8MTI4LGQpOm51bGw7Y2FzZSAxOTpyZXR1cm4gSXQoUHQpLG51bGw7Y2FzZSA0OnJldHVybiBRYSgpLG51bGw7Y2FzZSAxMDpyZXR1cm4gdXgoZC50eXBlLl9jb250ZXh0KSxudWxsO2Nhc2UgMjI6Y2FzZSAyMzpyZXR1cm4gS3goKSxudWxsO2Nhc2UgMjQ6cmV0dXJuIG51bGw7ZGVmYXVsdDpyZXR1cm4gbnVsbH19dmFyIEVwPSExLEJuPSExLERfPXR5cGVvZiBXZWFrU2V0PT0iZnVuY3Rpb24iP1dlYWtTZXQ6U2V0LEVlPW51bGw7ZnVuY3Rpb24gSmEodSxkKXt2YXIgbT11LnJlZjtpZihtIT09bnVsbClpZih0eXBlb2YgbT09ImZ1bmN0aW9uIil0cnl7bShudWxsKX1jYXRjaCh4KXtCdCh1LGQseCl9ZWxzZSBtLmN1cnJlbnQ9bnVsbH1mdW5jdGlvbiBMeCh1LGQsbSl7dHJ5e20oKX1jYXRjaCh4KXtCdCh1LGQseCl9fXZhciBSTj0hMTtmdW5jdGlvbiBBXyh1LGQpe2lmKEt5PVhoLHU9bFMoKSxCeSh1KSl7aWYoInNlbGVjdGlvblN0YXJ0ImluIHUpdmFyIG09e3N0YXJ0OnUuc2VsZWN0aW9uU3RhcnQsZW5kOnUuc2VsZWN0aW9uRW5kfTtlbHNlIGU6e209KG09dS5vd25lckRvY3VtZW50KSYmbS5kZWZhdWx0Vmlld3x8d2luZG93O3ZhciB4PW0uZ2V0U2VsZWN0aW9uJiZtLmdldFNlbGVjdGlvbigpO2lmKHgmJngucmFuZ2VDb3VudCE9PTApe209eC5hbmNob3JOb2RlO3ZhciBOPXguYW5jaG9yT2Zmc2V0LEM9eC5mb2N1c05vZGU7eD14LmZvY3VzT2Zmc2V0O3RyeXttLm5vZGVUeXBlLEMubm9kZVR5cGV9Y2F0Y2h7bT1udWxsO2JyZWFrIGV9dmFyIFI9MCxXPS0xLFo9LTEsdWU9MCx4ZT0wLGJlPXUseWU9bnVsbDt0OmZvcig7Oyl7Zm9yKHZhciBUZTtiZSE9PW18fE4hPT0wJiZiZS5ub2RlVHlwZSE9PTN8fChXPVIrTiksYmUhPT1DfHx4IT09MCYmYmUubm9kZVR5cGUhPT0zfHwoWj1SK3gpLGJlLm5vZGVUeXBlPT09MyYmKFIrPWJlLm5vZGVWYWx1ZS5sZW5ndGgpLChUZT1iZS5maXJzdENoaWxkKSE9PW51bGw7KXllPWJlLGJlPVRlO2Zvcig7Oyl7aWYoYmU9PT11KWJyZWFrIHQ7aWYoeWU9PT1tJiYrK3VlPT09TiYmKFc9UikseWU9PT1DJiYrK3hlPT09eCYmKFo9UiksKFRlPWJlLm5leHRTaWJsaW5nKSE9PW51bGwpYnJlYWs7YmU9eWUseWU9YmUucGFyZW50Tm9kZX1iZT1UZX1tPVc9PT0tMXx8Wj09PS0xP251bGw6e3N0YXJ0OlcsZW5kOlp9fWVsc2UgbT1udWxsfW09bXx8e3N0YXJ0OjAsZW5kOjB9fWVsc2UgbT1udWxsO2ZvcihYeT17Zm9jdXNlZEVsZW06dSxzZWxlY3Rpb25SYW5nZTptfSxYaD0hMSxFZT1kO0VlIT09bnVsbDspaWYoZD1FZSx1PWQuY2hpbGQsKGQuc3VidHJlZUZsYWdzJjEwMjgpIT09MCYmdSE9PW51bGwpdS5yZXR1cm49ZCxFZT11O2Vsc2UgZm9yKDtFZSE9PW51bGw7KXtkPUVlO3RyeXt2YXIgQWU9ZC5hbHRlcm5hdGU7aWYoKGQuZmxhZ3MmMTAyNCkhPT0wKXN3aXRjaChkLnRhZyl7Y2FzZSAwOmNhc2UgMTE6Y2FzZSAxNTpicmVhaztjYXNlIDE6aWYoQWUhPT1udWxsKXt2YXIgRmU9QWUubWVtb2l6ZWRQcm9wcyxLdD1BZS5tZW1vaXplZFN0YXRlLGFlPWQuc3RhdGVOb2RlLHRlPWFlLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlKGQuZWxlbWVudFR5cGU9PT1kLnR5cGU/RmU6dXIoZC50eXBlLEZlKSxLdCk7YWUuX19yZWFjdEludGVybmFsU25hcHNob3RCZWZvcmVVcGRhdGU9dGV9YnJlYWs7Y2FzZSAzOnZhciBsZT1kLnN0YXRlTm9kZS5jb250YWluZXJJbmZvO2xlLm5vZGVUeXBlPT09MT9sZS50ZXh0Q29udGVudD0iIjpsZS5ub2RlVHlwZT09PTkmJmxlLmRvY3VtZW50RWxlbWVudCYmbGUucmVtb3ZlQ2hpbGQobGUuZG9jdW1lbnRFbGVtZW50KTticmVhaztjYXNlIDU6Y2FzZSA2OmNhc2UgNDpjYXNlIDE3OmJyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IodCgxNjMpKX19Y2F0Y2goU2Upe0J0KGQsZC5yZXR1cm4sU2UpfWlmKHU9ZC5zaWJsaW5nLHUhPT1udWxsKXt1LnJldHVybj1kLnJldHVybixFZT11O2JyZWFrfUVlPWQucmV0dXJufXJldHVybiBBZT1STixSTj0hMSxBZX1mdW5jdGlvbiBtYyh1LGQsbSl7dmFyIHg9ZC51cGRhdGVRdWV1ZTtpZih4PXghPT1udWxsP3gubGFzdEVmZmVjdDpudWxsLHghPT1udWxsKXt2YXIgTj14PXgubmV4dDtkb3tpZigoTi50YWcmdSk9PT11KXt2YXIgQz1OLmRlc3Ryb3k7Ti5kZXN0cm95PXZvaWQgMCxDIT09dm9pZCAwJiZMeChkLG0sQyl9Tj1OLm5leHR9d2hpbGUoTiE9PXgpfX1mdW5jdGlvbiBScCh1LGQpe2lmKGQ9ZC51cGRhdGVRdWV1ZSxkPWQhPT1udWxsP2QubGFzdEVmZmVjdDpudWxsLGQhPT1udWxsKXt2YXIgbT1kPWQubmV4dDtkb3tpZigobS50YWcmdSk9PT11KXt2YXIgeD1tLmNyZWF0ZTttLmRlc3Ryb3k9eCgpfW09bS5uZXh0fXdoaWxlKG0hPT1kKX19ZnVuY3Rpb24gUHgodSl7dmFyIGQ9dS5yZWY7aWYoZCE9PW51bGwpe3ZhciBtPXUuc3RhdGVOb2RlO3N3aXRjaCh1LnRhZyl7Y2FzZSA1OnU9bTticmVhaztkZWZhdWx0OnU9bX10eXBlb2YgZD09ImZ1bmN0aW9uIj9kKHUpOmQuY3VycmVudD11fX1mdW5jdGlvbiBETih1KXt2YXIgZD11LmFsdGVybmF0ZTtkIT09bnVsbCYmKHUuYWx0ZXJuYXRlPW51bGwsRE4oZCkpLHUuY2hpbGQ9bnVsbCx1LmRlbGV0aW9ucz1udWxsLHUuc2libGluZz1udWxsLHUudGFnPT09NSYmKGQ9dS5zdGF0ZU5vZGUsZCE9PW51bGwmJihkZWxldGUgZFtEcl0sZGVsZXRlIGRbcmNdLGRlbGV0ZSBkW0p5XSxkZWxldGUgZFtmX10sZGVsZXRlIGRbbV9dKSksdS5zdGF0ZU5vZGU9bnVsbCx1LnJldHVybj1udWxsLHUuZGVwZW5kZW5jaWVzPW51bGwsdS5tZW1vaXplZFByb3BzPW51bGwsdS5tZW1vaXplZFN0YXRlPW51bGwsdS5wZW5kaW5nUHJvcHM9bnVsbCx1LnN0YXRlTm9kZT1udWxsLHUudXBkYXRlUXVldWU9bnVsbH1mdW5jdGlvbiBBTih1KXtyZXR1cm4gdS50YWc9PT01fHx1LnRhZz09PTN8fHUudGFnPT09NH1mdW5jdGlvbiBfTih1KXtlOmZvcig7Oyl7Zm9yKDt1LnNpYmxpbmc9PT1udWxsOyl7aWYodS5yZXR1cm49PT1udWxsfHxBTih1LnJldHVybikpcmV0dXJuIG51bGw7dT11LnJldHVybn1mb3IodS5zaWJsaW5nLnJldHVybj11LnJldHVybix1PXUuc2libGluZzt1LnRhZyE9PTUmJnUudGFnIT09NiYmdS50YWchPT0xODspe2lmKHUuZmxhZ3MmMnx8dS5jaGlsZD09PW51bGx8fHUudGFnPT09NCljb250aW51ZSBlO3UuY2hpbGQucmV0dXJuPXUsdT11LmNoaWxkfWlmKCEodS5mbGFncyYyKSlyZXR1cm4gdS5zdGF0ZU5vZGV9fWZ1bmN0aW9uIHp4KHUsZCxtKXt2YXIgeD11LnRhZztpZih4PT09NXx8eD09PTYpdT11LnN0YXRlTm9kZSxkP20ubm9kZVR5cGU9PT04P20ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodSxkKTptLmluc2VydEJlZm9yZSh1LGQpOihtLm5vZGVUeXBlPT09OD8oZD1tLnBhcmVudE5vZGUsZC5pbnNlcnRCZWZvcmUodSxtKSk6KGQ9bSxkLmFwcGVuZENoaWxkKHUpKSxtPW0uX3JlYWN0Um9vdENvbnRhaW5lcixtIT1udWxsfHxkLm9uY2xpY2shPT1udWxsfHwoZC5vbmNsaWNrPWFwKSk7ZWxzZSBpZih4IT09NCYmKHU9dS5jaGlsZCx1IT09bnVsbCkpZm9yKHp4KHUsZCxtKSx1PXUuc2libGluZzt1IT09bnVsbDspengodSxkLG0pLHU9dS5zaWJsaW5nfWZ1bmN0aW9uIE14KHUsZCxtKXt2YXIgeD11LnRhZztpZih4PT09NXx8eD09PTYpdT11LnN0YXRlTm9kZSxkP20uaW5zZXJ0QmVmb3JlKHUsZCk6bS5hcHBlbmRDaGlsZCh1KTtlbHNlIGlmKHghPT00JiYodT11LmNoaWxkLHUhPT1udWxsKSlmb3IoTXgodSxkLG0pLHU9dS5zaWJsaW5nO3UhPT1udWxsOylNeCh1LGQsbSksdT11LnNpYmxpbmd9dmFyIEVuPW51bGwsY3I9ITE7ZnVuY3Rpb24gVW8odSxkLG0pe2ZvcihtPW0uY2hpbGQ7bSE9PW51bGw7KU9OKHUsZCxtKSxtPW0uc2libGluZ31mdW5jdGlvbiBPTih1LGQsbSl7aWYoUnImJnR5cGVvZiBSci5vbkNvbW1pdEZpYmVyVW5tb3VudD09ImZ1bmN0aW9uIil0cnl7UnIub25Db21taXRGaWJlclVubW91bnQoVWgsbSl9Y2F0Y2h7fXN3aXRjaChtLnRhZyl7Y2FzZSA1OkJufHxKYShtLGQpO2Nhc2UgNjp2YXIgeD1FbixOPWNyO0VuPW51bGwsVW8odSxkLG0pLEVuPXgsY3I9TixFbiE9PW51bGwmJihjcj8odT1FbixtPW0uc3RhdGVOb2RlLHUubm9kZVR5cGU9PT04P3UucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtKTp1LnJlbW92ZUNoaWxkKG0pKTpFbi5yZW1vdmVDaGlsZChtLnN0YXRlTm9kZSkpO2JyZWFrO2Nhc2UgMTg6RW4hPT1udWxsJiYoY3I/KHU9RW4sbT1tLnN0YXRlTm9kZSx1Lm5vZGVUeXBlPT09OD9aeSh1LnBhcmVudE5vZGUsbSk6dS5ub2RlVHlwZT09PTEmJlp5KHUsbSkscXUodSkpOlp5KEVuLG0uc3RhdGVOb2RlKSk7YnJlYWs7Y2FzZSA0Ong9RW4sTj1jcixFbj1tLnN0YXRlTm9kZS5jb250YWluZXJJbmZvLGNyPSEwLFVvKHUsZCxtKSxFbj14LGNyPU47YnJlYWs7Y2FzZSAwOmNhc2UgMTE6Y2FzZSAxNDpjYXNlIDE1OmlmKCFCbiYmKHg9bS51cGRhdGVRdWV1ZSx4IT09bnVsbCYmKHg9eC5sYXN0RWZmZWN0LHghPT1udWxsKSkpe049eD14Lm5leHQ7ZG97dmFyIEM9TixSPUMuZGVzdHJveTtDPUMudGFnLFIhPT12b2lkIDAmJigoQyYyKSE9PTB8fChDJjQpIT09MCkmJkx4KG0sZCxSKSxOPU4ubmV4dH13aGlsZShOIT09eCl9VW8odSxkLG0pO2JyZWFrO2Nhc2UgMTppZighQm4mJihKYShtLGQpLHg9bS5zdGF0ZU5vZGUsdHlwZW9mIHguY29tcG9uZW50V2lsbFVubW91bnQ9PSJmdW5jdGlvbiIpKXRyeXt4LnByb3BzPW0ubWVtb2l6ZWRQcm9wcyx4LnN0YXRlPW0ubWVtb2l6ZWRTdGF0ZSx4LmNvbXBvbmVudFdpbGxVbm1vdW50KCl9Y2F0Y2goVyl7QnQobSxkLFcpfVVvKHUsZCxtKTticmVhaztjYXNlIDIxOlVvKHUsZCxtKTticmVhaztjYXNlIDIyOm0ubW9kZSYxPyhCbj0oeD1Cbil8fG0ubWVtb2l6ZWRTdGF0ZSE9PW51bGwsVW8odSxkLG0pLEJuPXgpOlVvKHUsZCxtKTticmVhaztkZWZhdWx0OlVvKHUsZCxtKX19ZnVuY3Rpb24gRk4odSl7dmFyIGQ9dS51cGRhdGVRdWV1ZTtpZihkIT09bnVsbCl7dS51cGRhdGVRdWV1ZT1udWxsO3ZhciBtPXUuc3RhdGVOb2RlO209PT1udWxsJiYobT11LnN0YXRlTm9kZT1uZXcgRF8pLGQuZm9yRWFjaChmdW5jdGlvbih4KXt2YXIgTj1WXy5iaW5kKG51bGwsdSx4KTttLmhhcyh4KXx8KG0uYWRkKHgpLHgudGhlbihOLE4pKX0pfX1mdW5jdGlvbiBkcih1LGQpe3ZhciBtPWQuZGVsZXRpb25zO2lmKG0hPT1udWxsKWZvcih2YXIgeD0wO3g8bS5sZW5ndGg7eCsrKXt2YXIgTj1tW3hdO3RyeXt2YXIgQz11LFI9ZCxXPVI7ZTpmb3IoO1chPT1udWxsOyl7c3dpdGNoKFcudGFnKXtjYXNlIDU6RW49Vy5zdGF0ZU5vZGUsY3I9ITE7YnJlYWsgZTtjYXNlIDM6RW49Vy5zdGF0ZU5vZGUuY29udGFpbmVySW5mbyxjcj0hMDticmVhayBlO2Nhc2UgNDpFbj1XLnN0YXRlTm9kZS5jb250YWluZXJJbmZvLGNyPSEwO2JyZWFrIGV9Vz1XLnJldHVybn1pZihFbj09PW51bGwpdGhyb3cgRXJyb3IodCgxNjApKTtPTihDLFIsTiksRW49bnVsbCxjcj0hMTt2YXIgWj1OLmFsdGVybmF0ZTtaIT09bnVsbCYmKFoucmV0dXJuPW51bGwpLE4ucmV0dXJuPW51bGx9Y2F0Y2godWUpe0J0KE4sZCx1ZSl9fWlmKGQuc3VidHJlZUZsYWdzJjEyODU0KWZvcihkPWQuY2hpbGQ7ZCE9PW51bGw7KUxOKGQsdSksZD1kLnNpYmxpbmd9ZnVuY3Rpb24gTE4odSxkKXt2YXIgbT11LmFsdGVybmF0ZSx4PXUuZmxhZ3M7c3dpdGNoKHUudGFnKXtjYXNlIDA6Y2FzZSAxMTpjYXNlIDE0OmNhc2UgMTU6aWYoZHIoZCx1KSxPcih1KSx4JjQpe3RyeXttYygzLHUsdS5yZXR1cm4pLFJwKDMsdSl9Y2F0Y2goRmUpe0J0KHUsdS5yZXR1cm4sRmUpfXRyeXttYyg1LHUsdS5yZXR1cm4pfWNhdGNoKEZlKXtCdCh1LHUucmV0dXJuLEZlKX19YnJlYWs7Y2FzZSAxOmRyKGQsdSksT3IodSkseCY1MTImJm0hPT1udWxsJiZKYShtLG0ucmV0dXJuKTticmVhaztjYXNlIDU6aWYoZHIoZCx1KSxPcih1KSx4JjUxMiYmbSE9PW51bGwmJkphKG0sbS5yZXR1cm4pLHUuZmxhZ3MmMzIpe3ZhciBOPXUuc3RhdGVOb2RlO3RyeXtKcihOLCIiKX1jYXRjaChGZSl7QnQodSx1LnJldHVybixGZSl9fWlmKHgmNCYmKE49dS5zdGF0ZU5vZGUsTiE9bnVsbCkpe3ZhciBDPXUubWVtb2l6ZWRQcm9wcyxSPW0hPT1udWxsP20ubWVtb2l6ZWRQcm9wczpDLFc9dS50eXBlLFo9dS51cGRhdGVRdWV1ZTtpZih1LnVwZGF0ZVF1ZXVlPW51bGwsWiE9PW51bGwpdHJ5e1c9PT0iaW5wdXQiJiZDLnR5cGU9PT0icmFkaW8iJiZDLm5hbWUhPW51bGwmJnV0KE4sQyksZ3koVyxSKTt2YXIgdWU9Z3koVyxDKTtmb3IoUj0wO1I8Wi5sZW5ndGg7Uis9Mil7dmFyIHhlPVpbUl0sYmU9WltSKzFdO3hlPT09InN0eWxlIj9NaChOLGJlKTp4ZT09PSJkYW5nZXJvdXNseVNldElubmVySFRNTCI/Um8oTixiZSk6eGU9PT0iY2hpbGRyZW4iP0pyKE4sYmUpOiQoTix4ZSxiZSx1ZSl9c3dpdGNoKFcpe2Nhc2UiaW5wdXQiOmJ0KE4sQyk7YnJlYWs7Y2FzZSJ0ZXh0YXJlYSI6bHMoTixDKTticmVhaztjYXNlInNlbGVjdCI6dmFyIHllPU4uX3dyYXBwZXJTdGF0ZS53YXNNdWx0aXBsZTtOLl93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGU9ISFDLm11bHRpcGxlO3ZhciBUZT1DLnZhbHVlO1RlIT1udWxsP1huKE4sISFDLm11bHRpcGxlLFRlLCExKTp5ZSE9PSEhQy5tdWx0aXBsZSYmKEMuZGVmYXVsdFZhbHVlIT1udWxsP1huKE4sISFDLm11bHRpcGxlLEMuZGVmYXVsdFZhbHVlLCEwKTpYbihOLCEhQy5tdWx0aXBsZSxDLm11bHRpcGxlP1tdOiIiLCExKSl9TltyY109Q31jYXRjaChGZSl7QnQodSx1LnJldHVybixGZSl9fWJyZWFrO2Nhc2UgNjppZihkcihkLHUpLE9yKHUpLHgmNCl7aWYodS5zdGF0ZU5vZGU9PT1udWxsKXRocm93IEVycm9yKHQoMTYyKSk7Tj11LnN0YXRlTm9kZSxDPXUubWVtb2l6ZWRQcm9wczt0cnl7Ti5ub2RlVmFsdWU9Q31jYXRjaChGZSl7QnQodSx1LnJldHVybixGZSl9fWJyZWFrO2Nhc2UgMzppZihkcihkLHUpLE9yKHUpLHgmNCYmbSE9PW51bGwmJm0ubWVtb2l6ZWRTdGF0ZS5pc0RlaHlkcmF0ZWQpdHJ5e3F1KGQuY29udGFpbmVySW5mbyl9Y2F0Y2goRmUpe0J0KHUsdS5yZXR1cm4sRmUpfWJyZWFrO2Nhc2UgNDpkcihkLHUpLE9yKHUpO2JyZWFrO2Nhc2UgMTM6ZHIoZCx1KSxPcih1KSxOPXUuY2hpbGQsTi5mbGFncyY4MTkyJiYoQz1OLm1lbW9pemVkU3RhdGUhPT1udWxsLE4uc3RhdGVOb2RlLmlzSGlkZGVuPUMsIUN8fE4uYWx0ZXJuYXRlIT09bnVsbCYmTi5hbHRlcm5hdGUubWVtb2l6ZWRTdGF0ZSE9PW51bGx8fChXeD1xdCgpKSkseCY0JiZGTih1KTticmVhaztjYXNlIDIyOmlmKHhlPW0hPT1udWxsJiZtLm1lbW9pemVkU3RhdGUhPT1udWxsLHUubW9kZSYxPyhCbj0odWU9Qm4pfHx4ZSxkcihkLHUpLEJuPXVlKTpkcihkLHUpLE9yKHUpLHgmODE5Mil7aWYodWU9dS5tZW1vaXplZFN0YXRlIT09bnVsbCwodS5zdGF0ZU5vZGUuaXNIaWRkZW49dWUpJiYheGUmJih1Lm1vZGUmMSkhPT0wKWZvcihFZT11LHhlPXUuY2hpbGQ7eGUhPT1udWxsOyl7Zm9yKGJlPUVlPXhlO0VlIT09bnVsbDspe3N3aXRjaCh5ZT1FZSxUZT15ZS5jaGlsZCx5ZS50YWcpe2Nhc2UgMDpjYXNlIDExOmNhc2UgMTQ6Y2FzZSAxNTptYyg0LHllLHllLnJldHVybik7YnJlYWs7Y2FzZSAxOkphKHllLHllLnJldHVybik7dmFyIEFlPXllLnN0YXRlTm9kZTtpZih0eXBlb2YgQWUuY29tcG9uZW50V2lsbFVubW91bnQ9PSJmdW5jdGlvbiIpe3g9eWUsbT15ZS5yZXR1cm47dHJ5e2Q9eCxBZS5wcm9wcz1kLm1lbW9pemVkUHJvcHMsQWUuc3RhdGU9ZC5tZW1vaXplZFN0YXRlLEFlLmNvbXBvbmVudFdpbGxVbm1vdW50KCl9Y2F0Y2goRmUpe0J0KHgsbSxGZSl9fWJyZWFrO2Nhc2UgNTpKYSh5ZSx5ZS5yZXR1cm4pO2JyZWFrO2Nhc2UgMjI6aWYoeWUubWVtb2l6ZWRTdGF0ZSE9PW51bGwpe01OKGJlKTtjb250aW51ZX19VGUhPT1udWxsPyhUZS5yZXR1cm49eWUsRWU9VGUpOk1OKGJlKX14ZT14ZS5zaWJsaW5nfWU6Zm9yKHhlPW51bGwsYmU9dTs7KXtpZihiZS50YWc9PT01KXtpZih4ZT09PW51bGwpe3hlPWJlO3RyeXtOPWJlLnN0YXRlTm9kZSx1ZT8oQz1OLnN0eWxlLHR5cGVvZiBDLnNldFByb3BlcnR5PT0iZnVuY3Rpb24iP0Muc2V0UHJvcGVydHkoImRpc3BsYXkiLCJub25lIiwiaW1wb3J0YW50Iik6Qy5kaXNwbGF5PSJub25lIik6KFc9YmUuc3RhdGVOb2RlLFo9YmUubWVtb2l6ZWRQcm9wcy5zdHlsZSxSPVohPW51bGwmJlouaGFzT3duUHJvcGVydHkoImRpc3BsYXkiKT9aLmRpc3BsYXk6bnVsbCxXLnN0eWxlLmRpc3BsYXk9SWkoImRpc3BsYXkiLFIpKX1jYXRjaChGZSl7QnQodSx1LnJldHVybixGZSl9fX1lbHNlIGlmKGJlLnRhZz09PTYpe2lmKHhlPT09bnVsbCl0cnl7YmUuc3RhdGVOb2RlLm5vZGVWYWx1ZT11ZT8iIjpiZS5tZW1vaXplZFByb3BzfWNhdGNoKEZlKXtCdCh1LHUucmV0dXJuLEZlKX19ZWxzZSBpZigoYmUudGFnIT09MjImJmJlLnRhZyE9PTIzfHxiZS5tZW1vaXplZFN0YXRlPT09bnVsbHx8YmU9PT11KSYmYmUuY2hpbGQhPT1udWxsKXtiZS5jaGlsZC5yZXR1cm49YmUsYmU9YmUuY2hpbGQ7Y29udGludWV9aWYoYmU9PT11KWJyZWFrIGU7Zm9yKDtiZS5zaWJsaW5nPT09bnVsbDspe2lmKGJlLnJldHVybj09PW51bGx8fGJlLnJldHVybj09PXUpYnJlYWsgZTt4ZT09PWJlJiYoeGU9bnVsbCksYmU9YmUucmV0dXJufXhlPT09YmUmJih4ZT1udWxsKSxiZS5zaWJsaW5nLnJldHVybj1iZS5yZXR1cm4sYmU9YmUuc2libGluZ319YnJlYWs7Y2FzZSAxOTpkcihkLHUpLE9yKHUpLHgmNCYmRk4odSk7YnJlYWs7Y2FzZSAyMTpicmVhaztkZWZhdWx0OmRyKGQsdSksT3IodSl9fWZ1bmN0aW9uIE9yKHUpe3ZhciBkPXUuZmxhZ3M7aWYoZCYyKXt0cnl7ZTp7Zm9yKHZhciBtPXUucmV0dXJuO20hPT1udWxsOyl7aWYoQU4obSkpe3ZhciB4PW07YnJlYWsgZX1tPW0ucmV0dXJufXRocm93IEVycm9yKHQoMTYwKSl9c3dpdGNoKHgudGFnKXtjYXNlIDU6dmFyIE49eC5zdGF0ZU5vZGU7eC5mbGFncyYzMiYmKEpyKE4sIiIpLHguZmxhZ3MmPS0zMyk7dmFyIEM9X04odSk7TXgodSxDLE4pO2JyZWFrO2Nhc2UgMzpjYXNlIDQ6dmFyIFI9eC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbyxXPV9OKHUpO3p4KHUsVyxSKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKHQoMTYxKSl9fWNhdGNoKFope0J0KHUsdS5yZXR1cm4sWil9dS5mbGFncyY9LTN9ZCY0MDk2JiYodS5mbGFncyY9LTQwOTcpfWZ1bmN0aW9uIF9fKHUsZCxtKXtFZT11LFBOKHUpfWZ1bmN0aW9uIFBOKHUsZCxtKXtmb3IodmFyIHg9KHUubW9kZSYxKSE9PTA7RWUhPT1udWxsOyl7dmFyIE49RWUsQz1OLmNoaWxkO2lmKE4udGFnPT09MjImJngpe3ZhciBSPU4ubWVtb2l6ZWRTdGF0ZSE9PW51bGx8fEVwO2lmKCFSKXt2YXIgVz1OLmFsdGVybmF0ZSxaPVchPT1udWxsJiZXLm1lbW9pemVkU3RhdGUhPT1udWxsfHxCbjtXPUVwO3ZhciB1ZT1CbjtpZihFcD1SLChCbj1aKSYmIXVlKWZvcihFZT1OO0VlIT09bnVsbDspUj1FZSxaPVIuY2hpbGQsUi50YWc9PT0yMiYmUi5tZW1vaXplZFN0YXRlIT09bnVsbD9CTihOKTpaIT09bnVsbD8oWi5yZXR1cm49UixFZT1aKTpCTihOKTtmb3IoO0MhPT1udWxsOylFZT1DLFBOKEMpLEM9Qy5zaWJsaW5nO0VlPU4sRXA9VyxCbj11ZX16Tih1KX1lbHNlKE4uc3VidHJlZUZsYWdzJjg3NzIpIT09MCYmQyE9PW51bGw/KEMucmV0dXJuPU4sRWU9Qyk6ek4odSl9fWZ1bmN0aW9uIHpOKHUpe2Zvcig7RWUhPT1udWxsOyl7dmFyIGQ9RWU7aWYoKGQuZmxhZ3MmODc3MikhPT0wKXt2YXIgbT1kLmFsdGVybmF0ZTt0cnl7aWYoKGQuZmxhZ3MmODc3MikhPT0wKXN3aXRjaChkLnRhZyl7Y2FzZSAwOmNhc2UgMTE6Y2FzZSAxNTpCbnx8UnAoNSxkKTticmVhaztjYXNlIDE6dmFyIHg9ZC5zdGF0ZU5vZGU7aWYoZC5mbGFncyY0JiYhQm4paWYobT09PW51bGwpeC5jb21wb25lbnREaWRNb3VudCgpO2Vsc2V7dmFyIE49ZC5lbGVtZW50VHlwZT09PWQudHlwZT9tLm1lbW9pemVkUHJvcHM6dXIoZC50eXBlLG0ubWVtb2l6ZWRQcm9wcyk7eC5jb21wb25lbnREaWRVcGRhdGUoTixtLm1lbW9pemVkU3RhdGUseC5fX3JlYWN0SW50ZXJuYWxTbmFwc2hvdEJlZm9yZVVwZGF0ZSl9dmFyIEM9ZC51cGRhdGVRdWV1ZTtDIT09bnVsbCYmTVMoZCxDLHgpO2JyZWFrO2Nhc2UgMzp2YXIgUj1kLnVwZGF0ZVF1ZXVlO2lmKFIhPT1udWxsKXtpZihtPW51bGwsZC5jaGlsZCE9PW51bGwpc3dpdGNoKGQuY2hpbGQudGFnKXtjYXNlIDU6bT1kLmNoaWxkLnN0YXRlTm9kZTticmVhaztjYXNlIDE6bT1kLmNoaWxkLnN0YXRlTm9kZX1NUyhkLFIsbSl9YnJlYWs7Y2FzZSA1OnZhciBXPWQuc3RhdGVOb2RlO2lmKG09PT1udWxsJiZkLmZsYWdzJjQpe209Vzt2YXIgWj1kLm1lbW9pemVkUHJvcHM7c3dpdGNoKGQudHlwZSl7Y2FzZSJidXR0b24iOmNhc2UiaW5wdXQiOmNhc2Uic2VsZWN0IjpjYXNlInRleHRhcmVhIjpaLmF1dG9Gb2N1cyYmbS5mb2N1cygpO2JyZWFrO2Nhc2UiaW1nIjpaLnNyYyYmKG0uc3JjPVouc3JjKX19YnJlYWs7Y2FzZSA2OmJyZWFrO2Nhc2UgNDpicmVhaztjYXNlIDEyOmJyZWFrO2Nhc2UgMTM6aWYoZC5tZW1vaXplZFN0YXRlPT09bnVsbCl7dmFyIHVlPWQuYWx0ZXJuYXRlO2lmKHVlIT09bnVsbCl7dmFyIHhlPXVlLm1lbW9pemVkU3RhdGU7aWYoeGUhPT1udWxsKXt2YXIgYmU9eGUuZGVoeWRyYXRlZDtiZSE9PW51bGwmJnF1KGJlKX19fWJyZWFrO2Nhc2UgMTk6Y2FzZSAxNzpjYXNlIDIxOmNhc2UgMjI6Y2FzZSAyMzpjYXNlIDI1OmJyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IodCgxNjMpKX1Cbnx8ZC5mbGFncyY1MTImJlB4KGQpfWNhdGNoKHllKXtCdChkLGQucmV0dXJuLHllKX19aWYoZD09PXUpe0VlPW51bGw7YnJlYWt9aWYobT1kLnNpYmxpbmcsbSE9PW51bGwpe20ucmV0dXJuPWQucmV0dXJuLEVlPW07YnJlYWt9RWU9ZC5yZXR1cm59fWZ1bmN0aW9uIE1OKHUpe2Zvcig7RWUhPT1udWxsOyl7dmFyIGQ9RWU7aWYoZD09PXUpe0VlPW51bGw7YnJlYWt9dmFyIG09ZC5zaWJsaW5nO2lmKG0hPT1udWxsKXttLnJldHVybj1kLnJldHVybixFZT1tO2JyZWFrfUVlPWQucmV0dXJufX1mdW5jdGlvbiBCTih1KXtmb3IoO0VlIT09bnVsbDspe3ZhciBkPUVlO3RyeXtzd2l0Y2goZC50YWcpe2Nhc2UgMDpjYXNlIDExOmNhc2UgMTU6dmFyIG09ZC5yZXR1cm47dHJ5e1JwKDQsZCl9Y2F0Y2goWil7QnQoZCxtLFopfWJyZWFrO2Nhc2UgMTp2YXIgeD1kLnN0YXRlTm9kZTtpZih0eXBlb2YgeC5jb21wb25lbnREaWRNb3VudD09ImZ1bmN0aW9uIil7dmFyIE49ZC5yZXR1cm47dHJ5e3guY29tcG9uZW50RGlkTW91bnQoKX1jYXRjaChaKXtCdChkLE4sWil9fXZhciBDPWQucmV0dXJuO3RyeXtQeChkKX1jYXRjaChaKXtCdChkLEMsWil9YnJlYWs7Y2FzZSA1OnZhciBSPWQucmV0dXJuO3RyeXtQeChkKX1jYXRjaChaKXtCdChkLFIsWil9fX1jYXRjaChaKXtCdChkLGQucmV0dXJuLFopfWlmKGQ9PT11KXtFZT1udWxsO2JyZWFrfXZhciBXPWQuc2libGluZztpZihXIT09bnVsbCl7Vy5yZXR1cm49ZC5yZXR1cm4sRWU9VzticmVha31FZT1kLnJldHVybn19dmFyIE9fPU1hdGguY2VpbCxEcD1rLlJlYWN0Q3VycmVudERpc3BhdGNoZXIsQng9ay5SZWFjdEN1cnJlbnRPd25lcixIcz1rLlJlYWN0Q3VycmVudEJhdGNoQ29uZmlnLGx0PTAseW49bnVsbCxKdD1udWxsLFJuPTAsUnM9MCxlbD16bygwKSxsbj0wLGdjPW51bGwsTGk9MCxBcD0wLFZ4PTAseWM9bnVsbCxocz1udWxsLFd4PTAsdGw9MS8wLGxvPW51bGwsX3A9ITEsVXg9bnVsbCxqbz1udWxsLE9wPSExLEdvPW51bGwsRnA9MCx4Yz0wLGp4PW51bGwsTHA9LTEsUHA9MDtmdW5jdGlvbiBRbigpe3JldHVybihsdCY2KSE9PTA/cXQoKTpMcCE9PS0xP0xwOkxwPXF0KCl9ZnVuY3Rpb24gSG8odSl7cmV0dXJuKHUubW9kZSYxKT09PTA/MToobHQmMikhPT0wJiZSbiE9PTA/Um4mLVJuOnlfLnRyYW5zaXRpb24hPT1udWxsPyhQcD09PTAmJihQcD1fdigpKSxQcCk6KHU9Z3QsdSE9PTB8fCh1PXdpbmRvdy5ldmVudCx1PXU9PT12b2lkIDA/MTY6V3YodS50eXBlKSksdSl9ZnVuY3Rpb24gaHIodSxkLG0seCl7aWYoNTA8eGMpdGhyb3cgeGM9MCxqeD1udWxsLEVycm9yKHQoMTg1KSk7V3UodSxtLHgpLCgobHQmMik9PT0wfHx1IT09eW4pJiYodT09PXluJiYoKGx0JjIpPT09MCYmKEFwfD1tKSxsbj09PTQmJnFvKHUsUm4pKSxwcyh1LHgpLG09PT0xJiZsdD09PTAmJihkLm1vZGUmMSk9PT0wJiYodGw9cXQoKSs1MDAsZHAmJkJvKCkpKX1mdW5jdGlvbiBwcyh1LGQpe3ZhciBtPXUuY2FsbGJhY2tOb2RlO3lBKHUsZCk7dmFyIHg9SGgodSx1PT09eW4/Um46MCk7aWYoeD09PTApbSE9PW51bGwmJlJ2KG0pLHUuY2FsbGJhY2tOb2RlPW51bGwsdS5jYWxsYmFja1ByaW9yaXR5PTA7ZWxzZSBpZihkPXgmLXgsdS5jYWxsYmFja1ByaW9yaXR5IT09ZCl7aWYobSE9bnVsbCYmUnYobSksZD09PTEpdS50YWc9PT0wP2dfKFdOLmJpbmQobnVsbCx1KSk6SVMoV04uYmluZChudWxsLHUpKSxoXyhmdW5jdGlvbigpeyhsdCY2KT09PTAmJkJvKCl9KSxtPW51bGw7ZWxzZXtzd2l0Y2goT3YoeCkpe2Nhc2UgMTptPU55O2JyZWFrO2Nhc2UgNDptPUR2O2JyZWFrO2Nhc2UgMTY6bT1XaDticmVhaztjYXNlIDUzNjg3MDkxMjptPUF2O2JyZWFrO2RlZmF1bHQ6bT1XaH1tPVlOKG0sVk4uYmluZChudWxsLHUpKX11LmNhbGxiYWNrUHJpb3JpdHk9ZCx1LmNhbGxiYWNrTm9kZT1tfX1mdW5jdGlvbiBWTih1LGQpe2lmKExwPS0xLFBwPTAsKGx0JjYpIT09MCl0aHJvdyBFcnJvcih0KDMyNykpO3ZhciBtPXUuY2FsbGJhY2tOb2RlO2lmKG5sKCkmJnUuY2FsbGJhY2tOb2RlIT09bSlyZXR1cm4gbnVsbDt2YXIgeD1IaCh1LHU9PT15bj9SbjowKTtpZih4PT09MClyZXR1cm4gbnVsbDtpZigoeCYzMCkhPT0wfHwoeCZ1LmV4cGlyZWRMYW5lcykhPT0wfHxkKWQ9enAodSx4KTtlbHNle2Q9eDt2YXIgTj1sdDtsdHw9Mjt2YXIgQz1qTigpOyh5biE9PXV8fFJuIT09ZCkmJihsbz1udWxsLHRsPXF0KCkrNTAwLHppKHUsZCkpO2RvIHRyeXtQXygpO2JyZWFrfWNhdGNoKFcpe1VOKHUsVyl9d2hpbGUoITApO2x4KCksRHAuY3VycmVudD1DLGx0PU4sSnQhPT1udWxsP2Q9MDooeW49bnVsbCxSbj0wLGQ9bG4pfWlmKGQhPT0wKXtpZihkPT09MiYmKE49a3kodSksTiE9PTAmJih4PU4sZD1HeCh1LE4pKSksZD09PTEpdGhyb3cgbT1nYyx6aSh1LDApLHFvKHUseCkscHModSxxdCgpKSxtO2lmKGQ9PT02KXFvKHUseCk7ZWxzZXtpZihOPXUuY3VycmVudC5hbHRlcm5hdGUsKHgmMzApPT09MCYmIUZfKE4pJiYoZD16cCh1LHgpLGQ9PT0yJiYoQz1reSh1KSxDIT09MCYmKHg9QyxkPUd4KHUsQykpKSxkPT09MSkpdGhyb3cgbT1nYyx6aSh1LDApLHFvKHUseCkscHModSxxdCgpKSxtO3N3aXRjaCh1LmZpbmlzaGVkV29yaz1OLHUuZmluaXNoZWRMYW5lcz14LGQpe2Nhc2UgMDpjYXNlIDE6dGhyb3cgRXJyb3IodCgzNDUpKTtjYXNlIDI6TWkodSxocyxsbyk7YnJlYWs7Y2FzZSAzOmlmKHFvKHUseCksKHgmMTMwMDIzNDI0KT09PXgmJihkPVd4KzUwMC1xdCgpLDEwPGQpKXtpZihIaCh1LDApIT09MClicmVhaztpZihOPXUuc3VzcGVuZGVkTGFuZXMsKE4meCkhPT14KXtRbigpLHUucGluZ2VkTGFuZXN8PXUuc3VzcGVuZGVkTGFuZXMmTjticmVha311LnRpbWVvdXRIYW5kbGU9UXkoTWkuYmluZChudWxsLHUsaHMsbG8pLGQpO2JyZWFrfU1pKHUsaHMsbG8pO2JyZWFrO2Nhc2UgNDppZihxbyh1LHgpLCh4JjQxOTQyNDApPT09eClicmVhaztmb3IoZD11LmV2ZW50VGltZXMsTj0tMTswPHg7KXt2YXIgUj0zMS1pcih4KTtDPTE8PFIsUj1kW1JdLFI+TiYmKE49UikseCY9fkN9aWYoeD1OLHg9cXQoKS14LHg9KDEyMD54PzEyMDo0ODA+eD80ODA6MTA4MD54PzEwODA6MTkyMD54PzE5MjA6M2UzPng/M2UzOjQzMjA+eD80MzIwOjE5NjAqT18oeC8xOTYwKSkteCwxMDx4KXt1LnRpbWVvdXRIYW5kbGU9UXkoTWkuYmluZChudWxsLHUsaHMsbG8pLHgpO2JyZWFrfU1pKHUsaHMsbG8pO2JyZWFrO2Nhc2UgNTpNaSh1LGhzLGxvKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKHQoMzI5KSl9fX1yZXR1cm4gcHModSxxdCgpKSx1LmNhbGxiYWNrTm9kZT09PW0/Vk4uYmluZChudWxsLHUpOm51bGx9ZnVuY3Rpb24gR3godSxkKXt2YXIgbT15YztyZXR1cm4gdS5jdXJyZW50Lm1lbW9pemVkU3RhdGUuaXNEZWh5ZHJhdGVkJiYoemkodSxkKS5mbGFnc3w9MjU2KSx1PXpwKHUsZCksdSE9PTImJihkPWhzLGhzPW0sZCE9PW51bGwmJkh4KGQpKSx1fWZ1bmN0aW9uIEh4KHUpe2hzPT09bnVsbD9ocz11OmhzLnB1c2guYXBwbHkoaHMsdSl9ZnVuY3Rpb24gRl8odSl7Zm9yKHZhciBkPXU7Oyl7aWYoZC5mbGFncyYxNjM4NCl7dmFyIG09ZC51cGRhdGVRdWV1ZTtpZihtIT09bnVsbCYmKG09bS5zdG9yZXMsbSE9PW51bGwpKWZvcih2YXIgeD0wO3g8bS5sZW5ndGg7eCsrKXt2YXIgTj1tW3hdLEM9Ti5nZXRTbmFwc2hvdDtOPU4udmFsdWU7dHJ5e2lmKCFhcihDKCksTikpcmV0dXJuITF9Y2F0Y2h7cmV0dXJuITF9fX1pZihtPWQuY2hpbGQsZC5zdWJ0cmVlRmxhZ3MmMTYzODQmJm0hPT1udWxsKW0ucmV0dXJuPWQsZD1tO2Vsc2V7aWYoZD09PXUpYnJlYWs7Zm9yKDtkLnNpYmxpbmc9PT1udWxsOyl7aWYoZC5yZXR1cm49PT1udWxsfHxkLnJldHVybj09PXUpcmV0dXJuITA7ZD1kLnJldHVybn1kLnNpYmxpbmcucmV0dXJuPWQucmV0dXJuLGQ9ZC5zaWJsaW5nfX1yZXR1cm4hMH1mdW5jdGlvbiBxbyh1LGQpe2ZvcihkJj1+VngsZCY9fkFwLHUuc3VzcGVuZGVkTGFuZXN8PWQsdS5waW5nZWRMYW5lcyY9fmQsdT11LmV4cGlyYXRpb25UaW1lczswPGQ7KXt2YXIgbT0zMS1pcihkKSx4PTE8PG07dVttXT0tMSxkJj1+eH19ZnVuY3Rpb24gV04odSl7aWYoKGx0JjYpIT09MCl0aHJvdyBFcnJvcih0KDMyNykpO25sKCk7dmFyIGQ9SGgodSwwKTtpZigoZCYxKT09PTApcmV0dXJuIHBzKHUscXQoKSksbnVsbDt2YXIgbT16cCh1LGQpO2lmKHUudGFnIT09MCYmbT09PTIpe3ZhciB4PWt5KHUpO3ghPT0wJiYoZD14LG09R3godSx4KSl9aWYobT09PTEpdGhyb3cgbT1nYyx6aSh1LDApLHFvKHUsZCkscHModSxxdCgpKSxtO2lmKG09PT02KXRocm93IEVycm9yKHQoMzQ1KSk7cmV0dXJuIHUuZmluaXNoZWRXb3JrPXUuY3VycmVudC5hbHRlcm5hdGUsdS5maW5pc2hlZExhbmVzPWQsTWkodSxocyxsbykscHModSxxdCgpKSxudWxsfWZ1bmN0aW9uIHF4KHUsZCl7dmFyIG09bHQ7bHR8PTE7dHJ5e3JldHVybiB1KGQpfWZpbmFsbHl7bHQ9bSxsdD09PTAmJih0bD1xdCgpKzUwMCxkcCYmQm8oKSl9fWZ1bmN0aW9uIFBpKHUpe0dvIT09bnVsbCYmR28udGFnPT09MCYmKGx0JjYpPT09MCYmbmwoKTt2YXIgZD1sdDtsdHw9MTt2YXIgbT1Icy50cmFuc2l0aW9uLHg9Z3Q7dHJ5e2lmKEhzLnRyYW5zaXRpb249bnVsbCxndD0xLHUpcmV0dXJuIHUoKX1maW5hbGx5e2d0PXgsSHMudHJhbnNpdGlvbj1tLGx0PWQsKGx0JjYpPT09MCYmQm8oKX19ZnVuY3Rpb24gS3goKXtScz1lbC5jdXJyZW50LEl0KGVsKX1mdW5jdGlvbiB6aSh1LGQpe3UuZmluaXNoZWRXb3JrPW51bGwsdS5maW5pc2hlZExhbmVzPTA7dmFyIG09dS50aW1lb3V0SGFuZGxlO2lmKG0hPT0tMSYmKHUudGltZW91dEhhbmRsZT0tMSxkXyhtKSksSnQhPT1udWxsKWZvcihtPUp0LnJldHVybjttIT09bnVsbDspe3ZhciB4PW07c3dpdGNoKHN4KHgpLHgudGFnKXtjYXNlIDE6eD14LnR5cGUuY2hpbGRDb250ZXh0VHlwZXMseCE9bnVsbCYmdXAoKTticmVhaztjYXNlIDM6UWEoKSxJdCh1cyksSXQoUG4pLGd4KCk7YnJlYWs7Y2FzZSA1OmZ4KHgpO2JyZWFrO2Nhc2UgNDpRYSgpO2JyZWFrO2Nhc2UgMTM6SXQoUHQpO2JyZWFrO2Nhc2UgMTk6SXQoUHQpO2JyZWFrO2Nhc2UgMTA6dXgoeC50eXBlLl9jb250ZXh0KTticmVhaztjYXNlIDIyOmNhc2UgMjM6S3goKX1tPW0ucmV0dXJufWlmKHluPXUsSnQ9dT1Lbyh1LmN1cnJlbnQsbnVsbCksUm49UnM9ZCxsbj0wLGdjPW51bGwsVng9QXA9TGk9MCxocz15Yz1udWxsLF9pIT09bnVsbCl7Zm9yKGQ9MDtkPF9pLmxlbmd0aDtkKyspaWYobT1faVtkXSx4PW0uaW50ZXJsZWF2ZWQseCE9PW51bGwpe20uaW50ZXJsZWF2ZWQ9bnVsbDt2YXIgTj14Lm5leHQsQz1tLnBlbmRpbmc7aWYoQyE9PW51bGwpe3ZhciBSPUMubmV4dDtDLm5leHQ9Tix4Lm5leHQ9Un1tLnBlbmRpbmc9eH1faT1udWxsfXJldHVybiB1fWZ1bmN0aW9uIFVOKHUsZCl7ZG97dmFyIG09SnQ7dHJ5e2lmKGx4KCksdnAuY3VycmVudD1DcCxTcCl7Zm9yKHZhciB4PXp0Lm1lbW9pemVkU3RhdGU7eCE9PW51bGw7KXt2YXIgTj14LnF1ZXVlO04hPT1udWxsJiYoTi5wZW5kaW5nPW51bGwpLHg9eC5uZXh0fVNwPSExfWlmKEZpPTAsZ249YW49enQ9bnVsbCxjYz0hMSxkYz0wLEJ4LmN1cnJlbnQ9bnVsbCxtPT09bnVsbHx8bS5yZXR1cm49PT1udWxsKXtsbj0xLGdjPWQsSnQ9bnVsbDticmVha31lOnt2YXIgQz11LFI9bS5yZXR1cm4sVz1tLFo9ZDtpZihkPVJuLFcuZmxhZ3N8PTMyNzY4LFohPT1udWxsJiZ0eXBlb2YgWj09Im9iamVjdCImJnR5cGVvZiBaLnRoZW49PSJmdW5jdGlvbiIpe3ZhciB1ZT1aLHhlPVcsYmU9eGUudGFnO2lmKCh4ZS5tb2RlJjEpPT09MCYmKGJlPT09MHx8YmU9PT0xMXx8YmU9PT0xNSkpe3ZhciB5ZT14ZS5hbHRlcm5hdGU7eWU/KHhlLnVwZGF0ZVF1ZXVlPXllLnVwZGF0ZVF1ZXVlLHhlLm1lbW9pemVkU3RhdGU9eWUubWVtb2l6ZWRTdGF0ZSx4ZS5sYW5lcz15ZS5sYW5lcyk6KHhlLnVwZGF0ZVF1ZXVlPW51bGwseGUubWVtb2l6ZWRTdGF0ZT1udWxsKX12YXIgVGU9Zk4oUik7aWYoVGUhPT1udWxsKXtUZS5mbGFncyY9LTI1NyxtTihUZSxSLFcsQyxkKSxUZS5tb2RlJjEmJnBOKEMsdWUsZCksZD1UZSxaPXVlO3ZhciBBZT1kLnVwZGF0ZVF1ZXVlO2lmKEFlPT09bnVsbCl7dmFyIEZlPW5ldyBTZXQ7RmUuYWRkKFopLGQudXBkYXRlUXVldWU9RmV9ZWxzZSBBZS5hZGQoWik7YnJlYWsgZX1lbHNle2lmKChkJjEpPT09MCl7cE4oQyx1ZSxkKSxYeCgpO2JyZWFrIGV9Wj1FcnJvcih0KDQyNikpfX1lbHNlIGlmKER0JiZXLm1vZGUmMSl7dmFyIEt0PWZOKFIpO2lmKEt0IT09bnVsbCl7KEt0LmZsYWdzJjY1NTM2KT09PTAmJihLdC5mbGFnc3w9MjU2KSxtTihLdCxSLFcsQyxkKSxpeChaYShaLFcpKTticmVhayBlfX1DPVo9WmEoWixXKSxsbiE9PTQmJihsbj0yKSx5Yz09PW51bGw/eWM9W0NdOnljLnB1c2goQyksQz1SO2Rve3N3aXRjaChDLnRhZyl7Y2FzZSAzOkMuZmxhZ3N8PTY1NTM2LGQmPS1kLEMubGFuZXN8PWQ7dmFyIGFlPWROKEMsWixkKTt6UyhDLGFlKTticmVhayBlO2Nhc2UgMTpXPVo7dmFyIHRlPUMudHlwZSxsZT1DLnN0YXRlTm9kZTtpZigoQy5mbGFncyYxMjgpPT09MCYmKHR5cGVvZiB0ZS5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I9PSJmdW5jdGlvbiJ8fGxlIT09bnVsbCYmdHlwZW9mIGxlLmNvbXBvbmVudERpZENhdGNoPT0iZnVuY3Rpb24iJiYoam89PT1udWxsfHwham8uaGFzKGxlKSkpKXtDLmZsYWdzfD02NTUzNixkJj0tZCxDLmxhbmVzfD1kO3ZhciBTZT1oTihDLFcsZCk7elMoQyxTZSk7YnJlYWsgZX19Qz1DLnJldHVybn13aGlsZShDIT09bnVsbCl9SE4obSl9Y2F0Y2goUGUpe2Q9UGUsSnQ9PT1tJiZtIT09bnVsbCYmKEp0PW09bS5yZXR1cm4pO2NvbnRpbnVlfWJyZWFrfXdoaWxlKCEwKX1mdW5jdGlvbiBqTigpe3ZhciB1PURwLmN1cnJlbnQ7cmV0dXJuIERwLmN1cnJlbnQ9Q3AsdT09PW51bGw/Q3A6dX1mdW5jdGlvbiBYeCgpeyhsbj09PTB8fGxuPT09M3x8bG49PT0yKSYmKGxuPTQpLHluPT09bnVsbHx8KExpJjI2ODQzNTQ1NSk9PT0wJiYoQXAmMjY4NDM1NDU1KT09PTB8fHFvKHluLFJuKX1mdW5jdGlvbiB6cCh1LGQpe3ZhciBtPWx0O2x0fD0yO3ZhciB4PWpOKCk7KHluIT09dXx8Um4hPT1kKSYmKGxvPW51bGwsemkodSxkKSk7ZG8gdHJ5e0xfKCk7YnJlYWt9Y2F0Y2goTil7VU4odSxOKX13aGlsZSghMCk7aWYobHgoKSxsdD1tLERwLmN1cnJlbnQ9eCxKdCE9PW51bGwpdGhyb3cgRXJyb3IodCgyNjEpKTtyZXR1cm4geW49bnVsbCxSbj0wLGxufWZ1bmN0aW9uIExfKCl7Zm9yKDtKdCE9PW51bGw7KUdOKEp0KX1mdW5jdGlvbiBQXygpe2Zvcig7SnQhPT1udWxsJiYhbEEoKTspR04oSnQpfWZ1bmN0aW9uIEdOKHUpe3ZhciBkPVhOKHUuYWx0ZXJuYXRlLHUsUnMpO3UubWVtb2l6ZWRQcm9wcz11LnBlbmRpbmdQcm9wcyxkPT09bnVsbD9ITih1KTpKdD1kLEJ4LmN1cnJlbnQ9bnVsbH1mdW5jdGlvbiBITih1KXt2YXIgZD11O2Rve3ZhciBtPWQuYWx0ZXJuYXRlO2lmKHU9ZC5yZXR1cm4sKGQuZmxhZ3MmMzI3NjgpPT09MCl7aWYobT1FXyhtLGQsUnMpLG0hPT1udWxsKXtKdD1tO3JldHVybn19ZWxzZXtpZihtPVJfKG0sZCksbSE9PW51bGwpe20uZmxhZ3MmPTMyNzY3LEp0PW07cmV0dXJufWlmKHUhPT1udWxsKXUuZmxhZ3N8PTMyNzY4LHUuc3VidHJlZUZsYWdzPTAsdS5kZWxldGlvbnM9bnVsbDtlbHNle2xuPTYsSnQ9bnVsbDtyZXR1cm59fWlmKGQ9ZC5zaWJsaW5nLGQhPT1udWxsKXtKdD1kO3JldHVybn1KdD1kPXV9d2hpbGUoZCE9PW51bGwpO2xuPT09MCYmKGxuPTUpfWZ1bmN0aW9uIE1pKHUsZCxtKXt2YXIgeD1ndCxOPUhzLnRyYW5zaXRpb247dHJ5e0hzLnRyYW5zaXRpb249bnVsbCxndD0xLHpfKHUsZCxtLHgpfWZpbmFsbHl7SHMudHJhbnNpdGlvbj1OLGd0PXh9cmV0dXJuIG51bGx9ZnVuY3Rpb24gel8odSxkLG0seCl7ZG8gbmwoKTt3aGlsZShHbyE9PW51bGwpO2lmKChsdCY2KSE9PTApdGhyb3cgRXJyb3IodCgzMjcpKTttPXUuZmluaXNoZWRXb3JrO3ZhciBOPXUuZmluaXNoZWRMYW5lcztpZihtPT09bnVsbClyZXR1cm4gbnVsbDtpZih1LmZpbmlzaGVkV29yaz1udWxsLHUuZmluaXNoZWRMYW5lcz0wLG09PT11LmN1cnJlbnQpdGhyb3cgRXJyb3IodCgxNzcpKTt1LmNhbGxiYWNrTm9kZT1udWxsLHUuY2FsbGJhY2tQcmlvcml0eT0wO3ZhciBDPW0ubGFuZXN8bS5jaGlsZExhbmVzO2lmKHhBKHUsQyksdT09PXluJiYoSnQ9eW49bnVsbCxSbj0wKSwobS5zdWJ0cmVlRmxhZ3MmMjA2NCk9PT0wJiYobS5mbGFncyYyMDY0KT09PTB8fE9wfHwoT3A9ITAsWU4oV2gsZnVuY3Rpb24oKXtyZXR1cm4gbmwoKSxudWxsfSkpLEM9KG0uZmxhZ3MmMTU5OTApIT09MCwobS5zdWJ0cmVlRmxhZ3MmMTU5OTApIT09MHx8Qyl7Qz1Icy50cmFuc2l0aW9uLEhzLnRyYW5zaXRpb249bnVsbDt2YXIgUj1ndDtndD0xO3ZhciBXPWx0O2x0fD00LEJ4LmN1cnJlbnQ9bnVsbCxBXyh1LG0pLExOKG0sdSkscl8oWHkpLFhoPSEhS3ksWHk9S3k9bnVsbCx1LmN1cnJlbnQ9bSxfXyhtKSx1QSgpLGx0PVcsZ3Q9UixIcy50cmFuc2l0aW9uPUN9ZWxzZSB1LmN1cnJlbnQ9bTtpZihPcCYmKE9wPSExLEdvPXUsRnA9TiksQz11LnBlbmRpbmdMYW5lcyxDPT09MCYmKGpvPW51bGwpLGhBKG0uc3RhdGVOb2RlKSxwcyh1LHF0KCkpLGQhPT1udWxsKWZvcih4PXUub25SZWNvdmVyYWJsZUVycm9yLG09MDttPGQubGVuZ3RoO20rKylOPWRbbV0seChOLnZhbHVlLHtjb21wb25lbnRTdGFjazpOLnN0YWNrLGRpZ2VzdDpOLmRpZ2VzdH0pO2lmKF9wKXRocm93IF9wPSExLHU9VXgsVXg9bnVsbCx1O3JldHVybihGcCYxKSE9PTAmJnUudGFnIT09MCYmbmwoKSxDPXUucGVuZGluZ0xhbmVzLChDJjEpIT09MD91PT09ang/eGMrKzooeGM9MCxqeD11KTp4Yz0wLEJvKCksbnVsbH1mdW5jdGlvbiBubCgpe2lmKEdvIT09bnVsbCl7dmFyIHU9T3YoRnApLGQ9SHMudHJhbnNpdGlvbixtPWd0O3RyeXtpZihIcy50cmFuc2l0aW9uPW51bGwsZ3Q9MTY+dT8xNjp1LEdvPT09bnVsbCl2YXIgeD0hMTtlbHNle2lmKHU9R28sR289bnVsbCxGcD0wLChsdCY2KSE9PTApdGhyb3cgRXJyb3IodCgzMzEpKTt2YXIgTj1sdDtmb3IobHR8PTQsRWU9dS5jdXJyZW50O0VlIT09bnVsbDspe3ZhciBDPUVlLFI9Qy5jaGlsZDtpZigoRWUuZmxhZ3MmMTYpIT09MCl7dmFyIFc9Qy5kZWxldGlvbnM7aWYoVyE9PW51bGwpe2Zvcih2YXIgWj0wO1o8Vy5sZW5ndGg7WisrKXt2YXIgdWU9V1taXTtmb3IoRWU9dWU7RWUhPT1udWxsOyl7dmFyIHhlPUVlO3N3aXRjaCh4ZS50YWcpe2Nhc2UgMDpjYXNlIDExOmNhc2UgMTU6bWMoOCx4ZSxDKX12YXIgYmU9eGUuY2hpbGQ7aWYoYmUhPT1udWxsKWJlLnJldHVybj14ZSxFZT1iZTtlbHNlIGZvcig7RWUhPT1udWxsOyl7eGU9RWU7dmFyIHllPXhlLnNpYmxpbmcsVGU9eGUucmV0dXJuO2lmKEROKHhlKSx4ZT09PXVlKXtFZT1udWxsO2JyZWFrfWlmKHllIT09bnVsbCl7eWUucmV0dXJuPVRlLEVlPXllO2JyZWFrfUVlPVRlfX19dmFyIEFlPUMuYWx0ZXJuYXRlO2lmKEFlIT09bnVsbCl7dmFyIEZlPUFlLmNoaWxkO2lmKEZlIT09bnVsbCl7QWUuY2hpbGQ9bnVsbDtkb3t2YXIgS3Q9RmUuc2libGluZztGZS5zaWJsaW5nPW51bGwsRmU9S3R9d2hpbGUoRmUhPT1udWxsKX19RWU9Q319aWYoKEMuc3VidHJlZUZsYWdzJjIwNjQpIT09MCYmUiE9PW51bGwpUi5yZXR1cm49QyxFZT1SO2Vsc2UgZTpmb3IoO0VlIT09bnVsbDspe2lmKEM9RWUsKEMuZmxhZ3MmMjA0OCkhPT0wKXN3aXRjaChDLnRhZyl7Y2FzZSAwOmNhc2UgMTE6Y2FzZSAxNTptYyg5LEMsQy5yZXR1cm4pfXZhciBhZT1DLnNpYmxpbmc7aWYoYWUhPT1udWxsKXthZS5yZXR1cm49Qy5yZXR1cm4sRWU9YWU7YnJlYWsgZX1FZT1DLnJldHVybn19dmFyIHRlPXUuY3VycmVudDtmb3IoRWU9dGU7RWUhPT1udWxsOyl7Uj1FZTt2YXIgbGU9Ui5jaGlsZDtpZigoUi5zdWJ0cmVlRmxhZ3MmMjA2NCkhPT0wJiZsZSE9PW51bGwpbGUucmV0dXJuPVIsRWU9bGU7ZWxzZSBlOmZvcihSPXRlO0VlIT09bnVsbDspe2lmKFc9RWUsKFcuZmxhZ3MmMjA0OCkhPT0wKXRyeXtzd2l0Y2goVy50YWcpe2Nhc2UgMDpjYXNlIDExOmNhc2UgMTU6UnAoOSxXKX19Y2F0Y2goUGUpe0J0KFcsVy5yZXR1cm4sUGUpfWlmKFc9PT1SKXtFZT1udWxsO2JyZWFrIGV9dmFyIFNlPVcuc2libGluZztpZihTZSE9PW51bGwpe1NlLnJldHVybj1XLnJldHVybixFZT1TZTticmVhayBlfUVlPVcucmV0dXJufX1pZihsdD1OLEJvKCksUnImJnR5cGVvZiBSci5vblBvc3RDb21taXRGaWJlclJvb3Q9PSJmdW5jdGlvbiIpdHJ5e1JyLm9uUG9zdENvbW1pdEZpYmVyUm9vdChVaCx1KX1jYXRjaHt9eD0hMH1yZXR1cm4geH1maW5hbGx5e2d0PW0sSHMudHJhbnNpdGlvbj1kfX1yZXR1cm4hMX1mdW5jdGlvbiBxTih1LGQsbSl7ZD1aYShtLGQpLGQ9ZE4odSxkLDEpLHU9V28odSxkLDEpLGQ9UW4oKSx1IT09bnVsbCYmKFd1KHUsMSxkKSxwcyh1LGQpKX1mdW5jdGlvbiBCdCh1LGQsbSl7aWYodS50YWc9PT0zKXFOKHUsdSxtKTtlbHNlIGZvcig7ZCE9PW51bGw7KXtpZihkLnRhZz09PTMpe3FOKGQsdSxtKTticmVha31lbHNlIGlmKGQudGFnPT09MSl7dmFyIHg9ZC5zdGF0ZU5vZGU7aWYodHlwZW9mIGQudHlwZS5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I9PSJmdW5jdGlvbiJ8fHR5cGVvZiB4LmNvbXBvbmVudERpZENhdGNoPT0iZnVuY3Rpb24iJiYoam89PT1udWxsfHwham8uaGFzKHgpKSl7dT1aYShtLHUpLHU9aE4oZCx1LDEpLGQ9V28oZCx1LDEpLHU9UW4oKSxkIT09bnVsbCYmKFd1KGQsMSx1KSxwcyhkLHUpKTticmVha319ZD1kLnJldHVybn19ZnVuY3Rpb24gTV8odSxkLG0pe3ZhciB4PXUucGluZ0NhY2hlO3ghPT1udWxsJiZ4LmRlbGV0ZShkKSxkPVFuKCksdS5waW5nZWRMYW5lc3w9dS5zdXNwZW5kZWRMYW5lcyZtLHluPT09dSYmKFJuJm0pPT09bSYmKGxuPT09NHx8bG49PT0zJiYoUm4mMTMwMDIzNDI0KT09PVJuJiY1MDA+cXQoKS1XeD96aSh1LDApOlZ4fD1tKSxwcyh1LGQpfWZ1bmN0aW9uIEtOKHUsZCl7ZD09PTAmJigodS5tb2RlJjEpPT09MD9kPTE6KGQ9R2gsR2g8PD0xLChHaCYxMzAwMjM0MjQpPT09MCYmKEdoPTQxOTQzMDQpKSk7dmFyIG09UW4oKTt1PW9vKHUsZCksdSE9PW51bGwmJihXdSh1LGQsbSkscHModSxtKSl9ZnVuY3Rpb24gQl8odSl7dmFyIGQ9dS5tZW1vaXplZFN0YXRlLG09MDtkIT09bnVsbCYmKG09ZC5yZXRyeUxhbmUpLEtOKHUsbSl9ZnVuY3Rpb24gVl8odSxkKXt2YXIgbT0wO3N3aXRjaCh1LnRhZyl7Y2FzZSAxMzp2YXIgeD11LnN0YXRlTm9kZSxOPXUubWVtb2l6ZWRTdGF0ZTtOIT09bnVsbCYmKG09Ti5yZXRyeUxhbmUpO2JyZWFrO2Nhc2UgMTk6eD11LnN0YXRlTm9kZTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKHQoMzE0KSl9eCE9PW51bGwmJnguZGVsZXRlKGQpLEtOKHUsbSl9dmFyIFhOO1hOPWZ1bmN0aW9uKHUsZCxtKXtpZih1IT09bnVsbClpZih1Lm1lbW9pemVkUHJvcHMhPT1kLnBlbmRpbmdQcm9wc3x8dXMuY3VycmVudClkcz0hMDtlbHNle2lmKCh1LmxhbmVzJm0pPT09MCYmKGQuZmxhZ3MmMTI4KT09PTApcmV0dXJuIGRzPSExLFRfKHUsZCxtKTtkcz0odS5mbGFncyYxMzEwNzIpIT09MH1lbHNlIGRzPSExLER0JiYoZC5mbGFncyYxMDQ4NTc2KSE9PTAmJlRTKGQscHAsZC5pbmRleCk7c3dpdGNoKGQubGFuZXM9MCxkLnRhZyl7Y2FzZSAyOnZhciB4PWQudHlwZTtUcCh1LGQpLHU9ZC5wZW5kaW5nUHJvcHM7dmFyIE49amEoZCxQbi5jdXJyZW50KTtZYShkLG0pLE49YngobnVsbCxkLHgsdSxOLG0pO3ZhciBDPXd4KCk7cmV0dXJuIGQuZmxhZ3N8PTEsdHlwZW9mIE49PSJvYmplY3QiJiZOIT09bnVsbCYmdHlwZW9mIE4ucmVuZGVyPT0iZnVuY3Rpb24iJiZOLiQkdHlwZW9mPT09dm9pZCAwPyhkLnRhZz0xLGQubWVtb2l6ZWRTdGF0ZT1udWxsLGQudXBkYXRlUXVldWU9bnVsbCxjcyh4KT8oQz0hMCxjcChkKSk6Qz0hMSxkLm1lbW9pemVkU3RhdGU9Ti5zdGF0ZSE9PW51bGwmJk4uc3RhdGUhPT12b2lkIDA/Ti5zdGF0ZTpudWxsLGh4KGQpLE4udXBkYXRlcj0kcCxkLnN0YXRlTm9kZT1OLE4uX3JlYWN0SW50ZXJuYWxzPWQsJHgoZCx4LHUsbSksZD1SeChudWxsLGQseCwhMCxDLG0pKTooZC50YWc9MCxEdCYmQyYmbngoZCksWW4obnVsbCxkLE4sbSksZD1kLmNoaWxkKSxkO2Nhc2UgMTY6eD1kLmVsZW1lbnRUeXBlO2U6e3N3aXRjaChUcCh1LGQpLHU9ZC5wZW5kaW5nUHJvcHMsTj14Ll9pbml0LHg9Tih4Ll9wYXlsb2FkKSxkLnR5cGU9eCxOPWQudGFnPVVfKHgpLHU9dXIoeCx1KSxOKXtjYXNlIDA6ZD1FeChudWxsLGQseCx1LG0pO2JyZWFrIGU7Y2FzZSAxOmQ9dk4obnVsbCxkLHgsdSxtKTticmVhayBlO2Nhc2UgMTE6ZD1nTihudWxsLGQseCx1LG0pO2JyZWFrIGU7Y2FzZSAxNDpkPXlOKG51bGwsZCx4LHVyKHgudHlwZSx1KSxtKTticmVhayBlfXRocm93IEVycm9yKHQoMzA2LHgsIiIpKX1yZXR1cm4gZDtjYXNlIDA6cmV0dXJuIHg9ZC50eXBlLE49ZC5wZW5kaW5nUHJvcHMsTj1kLmVsZW1lbnRUeXBlPT09eD9OOnVyKHgsTiksRXgodSxkLHgsTixtKTtjYXNlIDE6cmV0dXJuIHg9ZC50eXBlLE49ZC5wZW5kaW5nUHJvcHMsTj1kLmVsZW1lbnRUeXBlPT09eD9OOnVyKHgsTiksdk4odSxkLHgsTixtKTtjYXNlIDM6ZTp7aWYoU04oZCksdT09PW51bGwpdGhyb3cgRXJyb3IodCgzODcpKTt4PWQucGVuZGluZ1Byb3BzLEM9ZC5tZW1vaXplZFN0YXRlLE49Qy5lbGVtZW50LFBTKHUsZCksYnAoZCx4LG51bGwsbSk7dmFyIFI9ZC5tZW1vaXplZFN0YXRlO2lmKHg9Ui5lbGVtZW50LEMuaXNEZWh5ZHJhdGVkKWlmKEM9e2VsZW1lbnQ6eCxpc0RlaHlkcmF0ZWQ6ITEsY2FjaGU6Ui5jYWNoZSxwZW5kaW5nU3VzcGVuc2VCb3VuZGFyaWVzOlIucGVuZGluZ1N1c3BlbnNlQm91bmRhcmllcyx0cmFuc2l0aW9uczpSLnRyYW5zaXRpb25zfSxkLnVwZGF0ZVF1ZXVlLmJhc2VTdGF0ZT1DLGQubWVtb2l6ZWRTdGF0ZT1DLGQuZmxhZ3MmMjU2KXtOPVphKEVycm9yKHQoNDIzKSksZCksZD1OTih1LGQseCxtLE4pO2JyZWFrIGV9ZWxzZSBpZih4IT09Til7Tj1aYShFcnJvcih0KDQyNCkpLGQpLGQ9Tk4odSxkLHgsbSxOKTticmVhayBlfWVsc2UgZm9yKEVzPVBvKGQuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8uZmlyc3RDaGlsZCksVHM9ZCxEdD0hMCxscj1udWxsLG09RlMoZCxudWxsLHgsbSksZC5jaGlsZD1tO207KW0uZmxhZ3M9bS5mbGFncyYtM3w0MDk2LG09bS5zaWJsaW5nO2Vsc2V7aWYocWEoKSx4PT09Til7ZD1hbyh1LGQsbSk7YnJlYWsgZX1Zbih1LGQseCxtKX1kPWQuY2hpbGR9cmV0dXJuIGQ7Y2FzZSA1OnJldHVybiBCUyhkKSx1PT09bnVsbCYmb3goZCkseD1kLnR5cGUsTj1kLnBlbmRpbmdQcm9wcyxDPXUhPT1udWxsP3UubWVtb2l6ZWRQcm9wczpudWxsLFI9Ti5jaGlsZHJlbixZeSh4LE4pP1I9bnVsbDpDIT09bnVsbCYmWXkoeCxDKSYmKGQuZmxhZ3N8PTMyKSx3Tih1LGQpLFluKHUsZCxSLG0pLGQuY2hpbGQ7Y2FzZSA2OnJldHVybiB1PT09bnVsbCYmb3goZCksbnVsbDtjYXNlIDEzOnJldHVybiBrTih1LGQsbSk7Y2FzZSA0OnJldHVybiBweChkLGQuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8pLHg9ZC5wZW5kaW5nUHJvcHMsdT09PW51bGw/ZC5jaGlsZD1LYShkLG51bGwseCxtKTpZbih1LGQseCxtKSxkLmNoaWxkO2Nhc2UgMTE6cmV0dXJuIHg9ZC50eXBlLE49ZC5wZW5kaW5nUHJvcHMsTj1kLmVsZW1lbnRUeXBlPT09eD9OOnVyKHgsTiksZ04odSxkLHgsTixtKTtjYXNlIDc6cmV0dXJuIFluKHUsZCxkLnBlbmRpbmdQcm9wcyxtKSxkLmNoaWxkO2Nhc2UgODpyZXR1cm4gWW4odSxkLGQucGVuZGluZ1Byb3BzLmNoaWxkcmVuLG0pLGQuY2hpbGQ7Y2FzZSAxMjpyZXR1cm4gWW4odSxkLGQucGVuZGluZ1Byb3BzLmNoaWxkcmVuLG0pLGQuY2hpbGQ7Y2FzZSAxMDplOntpZih4PWQudHlwZS5fY29udGV4dCxOPWQucGVuZGluZ1Byb3BzLEM9ZC5tZW1vaXplZFByb3BzLFI9Ti52YWx1ZSxDdChncCx4Ll9jdXJyZW50VmFsdWUpLHguX2N1cnJlbnRWYWx1ZT1SLEMhPT1udWxsKWlmKGFyKEMudmFsdWUsUikpe2lmKEMuY2hpbGRyZW49PT1OLmNoaWxkcmVuJiYhdXMuY3VycmVudCl7ZD1hbyh1LGQsbSk7YnJlYWsgZX19ZWxzZSBmb3IoQz1kLmNoaWxkLEMhPT1udWxsJiYoQy5yZXR1cm49ZCk7QyE9PW51bGw7KXt2YXIgVz1DLmRlcGVuZGVuY2llcztpZihXIT09bnVsbCl7Uj1DLmNoaWxkO2Zvcih2YXIgWj1XLmZpcnN0Q29udGV4dDtaIT09bnVsbDspe2lmKFouY29udGV4dD09PXgpe2lmKEMudGFnPT09MSl7Wj1pbygtMSxtJi1tKSxaLnRhZz0yO3ZhciB1ZT1DLnVwZGF0ZVF1ZXVlO2lmKHVlIT09bnVsbCl7dWU9dWUuc2hhcmVkO3ZhciB4ZT11ZS5wZW5kaW5nO3hlPT09bnVsbD9aLm5leHQ9WjooWi5uZXh0PXhlLm5leHQseGUubmV4dD1aKSx1ZS5wZW5kaW5nPVp9fUMubGFuZXN8PW0sWj1DLmFsdGVybmF0ZSxaIT09bnVsbCYmKFoubGFuZXN8PW0pLGN4KEMucmV0dXJuLG0sZCksVy5sYW5lc3w9bTticmVha31aPVoubmV4dH19ZWxzZSBpZihDLnRhZz09PTEwKVI9Qy50eXBlPT09ZC50eXBlP251bGw6Qy5jaGlsZDtlbHNlIGlmKEMudGFnPT09MTgpe2lmKFI9Qy5yZXR1cm4sUj09PW51bGwpdGhyb3cgRXJyb3IodCgzNDEpKTtSLmxhbmVzfD1tLFc9Ui5hbHRlcm5hdGUsVyE9PW51bGwmJihXLmxhbmVzfD1tKSxjeChSLG0sZCksUj1DLnNpYmxpbmd9ZWxzZSBSPUMuY2hpbGQ7aWYoUiE9PW51bGwpUi5yZXR1cm49QztlbHNlIGZvcihSPUM7UiE9PW51bGw7KXtpZihSPT09ZCl7Uj1udWxsO2JyZWFrfWlmKEM9Ui5zaWJsaW5nLEMhPT1udWxsKXtDLnJldHVybj1SLnJldHVybixSPUM7YnJlYWt9Uj1SLnJldHVybn1DPVJ9WW4odSxkLE4uY2hpbGRyZW4sbSksZD1kLmNoaWxkfXJldHVybiBkO2Nhc2UgOTpyZXR1cm4gTj1kLnR5cGUseD1kLnBlbmRpbmdQcm9wcy5jaGlsZHJlbixZYShkLG0pLE49anMoTikseD14KE4pLGQuZmxhZ3N8PTEsWW4odSxkLHgsbSksZC5jaGlsZDtjYXNlIDE0OnJldHVybiB4PWQudHlwZSxOPXVyKHgsZC5wZW5kaW5nUHJvcHMpLE49dXIoeC50eXBlLE4pLHlOKHUsZCx4LE4sbSk7Y2FzZSAxNTpyZXR1cm4geE4odSxkLGQudHlwZSxkLnBlbmRpbmdQcm9wcyxtKTtjYXNlIDE3OnJldHVybiB4PWQudHlwZSxOPWQucGVuZGluZ1Byb3BzLE49ZC5lbGVtZW50VHlwZT09PXg/Tjp1cih4LE4pLFRwKHUsZCksZC50YWc9MSxjcyh4KT8odT0hMCxjcChkKSk6dT0hMSxZYShkLG0pLHVOKGQseCxOKSwkeChkLHgsTixtKSxSeChudWxsLGQseCwhMCx1LG0pO2Nhc2UgMTk6cmV0dXJuICROKHUsZCxtKTtjYXNlIDIyOnJldHVybiBiTih1LGQsbSl9dGhyb3cgRXJyb3IodCgxNTYsZC50YWcpKX07ZnVuY3Rpb24gWU4odSxkKXtyZXR1cm4gRXYodSxkKX1mdW5jdGlvbiBXXyh1LGQsbSx4KXt0aGlzLnRhZz11LHRoaXMua2V5PW0sdGhpcy5zaWJsaW5nPXRoaXMuY2hpbGQ9dGhpcy5yZXR1cm49dGhpcy5zdGF0ZU5vZGU9dGhpcy50eXBlPXRoaXMuZWxlbWVudFR5cGU9bnVsbCx0aGlzLmluZGV4PTAsdGhpcy5yZWY9bnVsbCx0aGlzLnBlbmRpbmdQcm9wcz1kLHRoaXMuZGVwZW5kZW5jaWVzPXRoaXMubWVtb2l6ZWRTdGF0ZT10aGlzLnVwZGF0ZVF1ZXVlPXRoaXMubWVtb2l6ZWRQcm9wcz1udWxsLHRoaXMubW9kZT14LHRoaXMuc3VidHJlZUZsYWdzPXRoaXMuZmxhZ3M9MCx0aGlzLmRlbGV0aW9ucz1udWxsLHRoaXMuY2hpbGRMYW5lcz10aGlzLmxhbmVzPTAsdGhpcy5hbHRlcm5hdGU9bnVsbH1mdW5jdGlvbiBxcyh1LGQsbSx4KXtyZXR1cm4gbmV3IFdfKHUsZCxtLHgpfWZ1bmN0aW9uIFl4KHUpe3JldHVybiB1PXUucHJvdG90eXBlLCEoIXV8fCF1LmlzUmVhY3RDb21wb25lbnQpfWZ1bmN0aW9uIFVfKHUpe2lmKHR5cGVvZiB1PT0iZnVuY3Rpb24iKXJldHVybiBZeCh1KT8xOjA7aWYodSE9bnVsbCl7aWYodT11LiQkdHlwZW9mLHU9PT1NKXJldHVybiAxMTtpZih1PT09USlyZXR1cm4gMTR9cmV0dXJuIDJ9ZnVuY3Rpb24gS28odSxkKXt2YXIgbT11LmFsdGVybmF0ZTtyZXR1cm4gbT09PW51bGw/KG09cXModS50YWcsZCx1LmtleSx1Lm1vZGUpLG0uZWxlbWVudFR5cGU9dS5lbGVtZW50VHlwZSxtLnR5cGU9dS50eXBlLG0uc3RhdGVOb2RlPXUuc3RhdGVOb2RlLG0uYWx0ZXJuYXRlPXUsdS5hbHRlcm5hdGU9bSk6KG0ucGVuZGluZ1Byb3BzPWQsbS50eXBlPXUudHlwZSxtLmZsYWdzPTAsbS5zdWJ0cmVlRmxhZ3M9MCxtLmRlbGV0aW9ucz1udWxsKSxtLmZsYWdzPXUuZmxhZ3MmMTQ2ODAwNjQsbS5jaGlsZExhbmVzPXUuY2hpbGRMYW5lcyxtLmxhbmVzPXUubGFuZXMsbS5jaGlsZD11LmNoaWxkLG0ubWVtb2l6ZWRQcm9wcz11Lm1lbW9pemVkUHJvcHMsbS5tZW1vaXplZFN0YXRlPXUubWVtb2l6ZWRTdGF0ZSxtLnVwZGF0ZVF1ZXVlPXUudXBkYXRlUXVldWUsZD11LmRlcGVuZGVuY2llcyxtLmRlcGVuZGVuY2llcz1kPT09bnVsbD9udWxsOntsYW5lczpkLmxhbmVzLGZpcnN0Q29udGV4dDpkLmZpcnN0Q29udGV4dH0sbS5zaWJsaW5nPXUuc2libGluZyxtLmluZGV4PXUuaW5kZXgsbS5yZWY9dS5yZWYsbX1mdW5jdGlvbiBNcCh1LGQsbSx4LE4sQyl7dmFyIFI9MjtpZih4PXUsdHlwZW9mIHU9PSJmdW5jdGlvbiIpWXgodSkmJihSPTEpO2Vsc2UgaWYodHlwZW9mIHU9PSJzdHJpbmciKVI9NTtlbHNlIGU6c3dpdGNoKHUpe2Nhc2UgTDpyZXR1cm4gQmkobS5jaGlsZHJlbixOLEMsZCk7Y2FzZSB6OlI9OCxOfD04O2JyZWFrO2Nhc2UgRjpyZXR1cm4gdT1xcygxMixtLGQsTnwyKSx1LmVsZW1lbnRUeXBlPUYsdS5sYW5lcz1DLHU7Y2FzZSBVOnJldHVybiB1PXFzKDEzLG0sZCxOKSx1LmVsZW1lbnRUeXBlPVUsdS5sYW5lcz1DLHU7Y2FzZSBZOnJldHVybiB1PXFzKDE5LG0sZCxOKSx1LmVsZW1lbnRUeXBlPVksdS5sYW5lcz1DLHU7Y2FzZSBzZTpyZXR1cm4gQnAobSxOLEMsZCk7ZGVmYXVsdDppZih0eXBlb2YgdT09Im9iamVjdCImJnUhPT1udWxsKXN3aXRjaCh1LiQkdHlwZW9mKXtjYXNlIF86Uj0xMDticmVhayBlO2Nhc2UgRTpSPTk7YnJlYWsgZTtjYXNlIE06Uj0xMTticmVhayBlO2Nhc2UgUTpSPTE0O2JyZWFrIGU7Y2FzZSBuZTpSPTE2LHg9bnVsbDticmVhayBlfXRocm93IEVycm9yKHQoMTMwLHU9PW51bGw/dTp0eXBlb2YgdSwiIikpfXJldHVybiBkPXFzKFIsbSxkLE4pLGQuZWxlbWVudFR5cGU9dSxkLnR5cGU9eCxkLmxhbmVzPUMsZH1mdW5jdGlvbiBCaSh1LGQsbSx4KXtyZXR1cm4gdT1xcyg3LHUseCxkKSx1LmxhbmVzPW0sdX1mdW5jdGlvbiBCcCh1LGQsbSx4KXtyZXR1cm4gdT1xcygyMix1LHgsZCksdS5lbGVtZW50VHlwZT1zZSx1LmxhbmVzPW0sdS5zdGF0ZU5vZGU9e2lzSGlkZGVuOiExfSx1fWZ1bmN0aW9uIFF4KHUsZCxtKXtyZXR1cm4gdT1xcyg2LHUsbnVsbCxkKSx1LmxhbmVzPW0sdX1mdW5jdGlvbiBaeCh1LGQsbSl7cmV0dXJuIGQ9cXMoNCx1LmNoaWxkcmVuIT09bnVsbD91LmNoaWxkcmVuOltdLHUua2V5LGQpLGQubGFuZXM9bSxkLnN0YXRlTm9kZT17Y29udGFpbmVySW5mbzp1LmNvbnRhaW5lckluZm8scGVuZGluZ0NoaWxkcmVuOm51bGwsaW1wbGVtZW50YXRpb246dS5pbXBsZW1lbnRhdGlvbn0sZH1mdW5jdGlvbiBqXyh1LGQsbSx4LE4pe3RoaXMudGFnPWQsdGhpcy5jb250YWluZXJJbmZvPXUsdGhpcy5maW5pc2hlZFdvcms9dGhpcy5waW5nQ2FjaGU9dGhpcy5jdXJyZW50PXRoaXMucGVuZGluZ0NoaWxkcmVuPW51bGwsdGhpcy50aW1lb3V0SGFuZGxlPS0xLHRoaXMuY2FsbGJhY2tOb2RlPXRoaXMucGVuZGluZ0NvbnRleHQ9dGhpcy5jb250ZXh0PW51bGwsdGhpcy5jYWxsYmFja1ByaW9yaXR5PTAsdGhpcy5ldmVudFRpbWVzPUN5KDApLHRoaXMuZXhwaXJhdGlvblRpbWVzPUN5KC0xKSx0aGlzLmVudGFuZ2xlZExhbmVzPXRoaXMuZmluaXNoZWRMYW5lcz10aGlzLm11dGFibGVSZWFkTGFuZXM9dGhpcy5leHBpcmVkTGFuZXM9dGhpcy5waW5nZWRMYW5lcz10aGlzLnN1c3BlbmRlZExhbmVzPXRoaXMucGVuZGluZ0xhbmVzPTAsdGhpcy5lbnRhbmdsZW1lbnRzPUN5KDApLHRoaXMuaWRlbnRpZmllclByZWZpeD14LHRoaXMub25SZWNvdmVyYWJsZUVycm9yPU4sdGhpcy5tdXRhYmxlU291cmNlRWFnZXJIeWRyYXRpb25EYXRhPW51bGx9ZnVuY3Rpb24gSngodSxkLG0seCxOLEMsUixXLFope3JldHVybiB1PW5ldyBqXyh1LGQsbSxXLFopLGQ9PT0xPyhkPTEsQz09PSEwJiYoZHw9OCkpOmQ9MCxDPXFzKDMsbnVsbCxudWxsLGQpLHUuY3VycmVudD1DLEMuc3RhdGVOb2RlPXUsQy5tZW1vaXplZFN0YXRlPXtlbGVtZW50OngsaXNEZWh5ZHJhdGVkOm0sY2FjaGU6bnVsbCx0cmFuc2l0aW9uczpudWxsLHBlbmRpbmdTdXNwZW5zZUJvdW5kYXJpZXM6bnVsbH0saHgoQyksdX1mdW5jdGlvbiBHXyh1LGQsbSl7dmFyIHg9Mzxhcmd1bWVudHMubGVuZ3RoJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOm51bGw7cmV0dXJueyQkdHlwZW9mOkQsa2V5Ong9PW51bGw/bnVsbDoiIit4LGNoaWxkcmVuOnUsY29udGFpbmVySW5mbzpkLGltcGxlbWVudGF0aW9uOm19fWZ1bmN0aW9uIFFOKHUpe2lmKCF1KXJldHVybiBNbzt1PXUuX3JlYWN0SW50ZXJuYWxzO2U6e2lmKFRpKHUpIT09dXx8dS50YWchPT0xKXRocm93IEVycm9yKHQoMTcwKSk7dmFyIGQ9dTtkb3tzd2l0Y2goZC50YWcpe2Nhc2UgMzpkPWQuc3RhdGVOb2RlLmNvbnRleHQ7YnJlYWsgZTtjYXNlIDE6aWYoY3MoZC50eXBlKSl7ZD1kLnN0YXRlTm9kZS5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZE1lcmdlZENoaWxkQ29udGV4dDticmVhayBlfX1kPWQucmV0dXJufXdoaWxlKGQhPT1udWxsKTt0aHJvdyBFcnJvcih0KDE3MSkpfWlmKHUudGFnPT09MSl7dmFyIG09dS50eXBlO2lmKGNzKG0pKXJldHVybiBDUyh1LG0sZCl9cmV0dXJuIGR9ZnVuY3Rpb24gWk4odSxkLG0seCxOLEMsUixXLFope3JldHVybiB1PUp4KG0seCwhMCx1LE4sQyxSLFcsWiksdS5jb250ZXh0PVFOKG51bGwpLG09dS5jdXJyZW50LHg9UW4oKSxOPUhvKG0pLEM9aW8oeCxOKSxDLmNhbGxiYWNrPWQ/P251bGwsV28obSxDLE4pLHUuY3VycmVudC5sYW5lcz1OLFd1KHUsTix4KSxwcyh1LHgpLHV9ZnVuY3Rpb24gVnAodSxkLG0seCl7dmFyIE49ZC5jdXJyZW50LEM9UW4oKSxSPUhvKE4pO3JldHVybiBtPVFOKG0pLGQuY29udGV4dD09PW51bGw/ZC5jb250ZXh0PW06ZC5wZW5kaW5nQ29udGV4dD1tLGQ9aW8oQyxSKSxkLnBheWxvYWQ9e2VsZW1lbnQ6dX0seD14PT09dm9pZCAwP251bGw6eCx4IT09bnVsbCYmKGQuY2FsbGJhY2s9eCksdT1XbyhOLGQsUiksdSE9PW51bGwmJihocih1LE4sUixDKSx4cCh1LE4sUikpLFJ9ZnVuY3Rpb24gV3AodSl7aWYodT11LmN1cnJlbnQsIXUuY2hpbGQpcmV0dXJuIG51bGw7c3dpdGNoKHUuY2hpbGQudGFnKXtjYXNlIDU6cmV0dXJuIHUuY2hpbGQuc3RhdGVOb2RlO2RlZmF1bHQ6cmV0dXJuIHUuY2hpbGQuc3RhdGVOb2RlfX1mdW5jdGlvbiBKTih1LGQpe2lmKHU9dS5tZW1vaXplZFN0YXRlLHUhPT1udWxsJiZ1LmRlaHlkcmF0ZWQhPT1udWxsKXt2YXIgbT11LnJldHJ5TGFuZTt1LnJldHJ5TGFuZT1tIT09MCYmbTxkP206ZH19ZnVuY3Rpb24gZTAodSxkKXtKTih1LGQpLCh1PXUuYWx0ZXJuYXRlKSYmSk4odSxkKX1mdW5jdGlvbiBIXygpe3JldHVybiBudWxsfXZhciBlaz10eXBlb2YgcmVwb3J0RXJyb3I9PSJmdW5jdGlvbiI/cmVwb3J0RXJyb3I6ZnVuY3Rpb24odSl7Y29uc29sZS5lcnJvcih1KX07ZnVuY3Rpb24gdDAodSl7dGhpcy5faW50ZXJuYWxSb290PXV9VXAucHJvdG90eXBlLnJlbmRlcj10MC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHUpe3ZhciBkPXRoaXMuX2ludGVybmFsUm9vdDtpZihkPT09bnVsbCl0aHJvdyBFcnJvcih0KDQwOSkpO1ZwKHUsZCxudWxsLG51bGwpfSxVcC5wcm90b3R5cGUudW5tb3VudD10MC5wcm90b3R5cGUudW5tb3VudD1mdW5jdGlvbigpe3ZhciB1PXRoaXMuX2ludGVybmFsUm9vdDtpZih1IT09bnVsbCl7dGhpcy5faW50ZXJuYWxSb290PW51bGw7dmFyIGQ9dS5jb250YWluZXJJbmZvO1BpKGZ1bmN0aW9uKCl7VnAobnVsbCx1LG51bGwsbnVsbCl9KSxkW3RvXT1udWxsfX07ZnVuY3Rpb24gVXAodSl7dGhpcy5faW50ZXJuYWxSb290PXV9VXAucHJvdG90eXBlLnVuc3RhYmxlX3NjaGVkdWxlSHlkcmF0aW9uPWZ1bmN0aW9uKHUpe2lmKHUpe3ZhciBkPVB2KCk7dT17YmxvY2tlZE9uOm51bGwsdGFyZ2V0OnUscHJpb3JpdHk6ZH07Zm9yKHZhciBtPTA7bTxPby5sZW5ndGgmJmQhPT0wJiZkPE9vW21dLnByaW9yaXR5O20rKyk7T28uc3BsaWNlKG0sMCx1KSxtPT09MCYmQnYodSl9fTtmdW5jdGlvbiBuMCh1KXtyZXR1cm4hKCF1fHx1Lm5vZGVUeXBlIT09MSYmdS5ub2RlVHlwZSE9PTkmJnUubm9kZVR5cGUhPT0xMSl9ZnVuY3Rpb24ganAodSl7cmV0dXJuISghdXx8dS5ub2RlVHlwZSE9PTEmJnUubm9kZVR5cGUhPT05JiZ1Lm5vZGVUeXBlIT09MTEmJih1Lm5vZGVUeXBlIT09OHx8dS5ub2RlVmFsdWUhPT0iIHJlYWN0LW1vdW50LXBvaW50LXVuc3RhYmxlICIpKX1mdW5jdGlvbiB0aygpe31mdW5jdGlvbiBxXyh1LGQsbSx4LE4pe2lmKE4pe2lmKHR5cGVvZiB4PT0iZnVuY3Rpb24iKXt2YXIgQz14O3g9ZnVuY3Rpb24oKXt2YXIgdWU9V3AoUik7Qy5jYWxsKHVlKX19dmFyIFI9Wk4oZCx4LHUsMCxudWxsLCExLCExLCIiLHRrKTtyZXR1cm4gdS5fcmVhY3RSb290Q29udGFpbmVyPVIsdVt0b109Ui5jdXJyZW50LG5jKHUubm9kZVR5cGU9PT04P3UucGFyZW50Tm9kZTp1KSxQaSgpLFJ9Zm9yKDtOPXUubGFzdENoaWxkOyl1LnJlbW92ZUNoaWxkKE4pO2lmKHR5cGVvZiB4PT0iZnVuY3Rpb24iKXt2YXIgVz14O3g9ZnVuY3Rpb24oKXt2YXIgdWU9V3AoWik7Vy5jYWxsKHVlKX19dmFyIFo9SngodSwwLCExLG51bGwsbnVsbCwhMSwhMSwiIix0ayk7cmV0dXJuIHUuX3JlYWN0Um9vdENvbnRhaW5lcj1aLHVbdG9dPVouY3VycmVudCxuYyh1Lm5vZGVUeXBlPT09OD91LnBhcmVudE5vZGU6dSksUGkoZnVuY3Rpb24oKXtWcChkLFosbSx4KX0pLFp9ZnVuY3Rpb24gR3AodSxkLG0seCxOKXt2YXIgQz1tLl9yZWFjdFJvb3RDb250YWluZXI7aWYoQyl7dmFyIFI9QztpZih0eXBlb2YgTj09ImZ1bmN0aW9uIil7dmFyIFc9TjtOPWZ1bmN0aW9uKCl7dmFyIFo9V3AoUik7Vy5jYWxsKFopfX1WcChkLFIsdSxOKX1lbHNlIFI9cV8obSxkLHUsTix4KTtyZXR1cm4gV3AoUil9RnY9ZnVuY3Rpb24odSl7c3dpdGNoKHUudGFnKXtjYXNlIDM6dmFyIGQ9dS5zdGF0ZU5vZGU7aWYoZC5jdXJyZW50Lm1lbW9pemVkU3RhdGUuaXNEZWh5ZHJhdGVkKXt2YXIgbT1WdShkLnBlbmRpbmdMYW5lcyk7bSE9PTAmJigkeShkLG18MSkscHMoZCxxdCgpKSwobHQmNik9PT0wJiYodGw9cXQoKSs1MDAsQm8oKSkpfWJyZWFrO2Nhc2UgMTM6UGkoZnVuY3Rpb24oKXt2YXIgeD1vbyh1LDEpO2lmKHghPT1udWxsKXt2YXIgTj1RbigpO2hyKHgsdSwxLE4pfX0pLGUwKHUsMSl9fSxJeT1mdW5jdGlvbih1KXtpZih1LnRhZz09PTEzKXt2YXIgZD1vbyh1LDEzNDIxNzcyOCk7aWYoZCE9PW51bGwpe3ZhciBtPVFuKCk7aHIoZCx1LDEzNDIxNzcyOCxtKX1lMCh1LDEzNDIxNzcyOCl9fSxMdj1mdW5jdGlvbih1KXtpZih1LnRhZz09PTEzKXt2YXIgZD1Ibyh1KSxtPW9vKHUsZCk7aWYobSE9PW51bGwpe3ZhciB4PVFuKCk7aHIobSx1LGQseCl9ZTAodSxkKX19LFB2PWZ1bmN0aW9uKCl7cmV0dXJuIGd0fSx6dj1mdW5jdGlvbih1LGQpe3ZhciBtPWd0O3RyeXtyZXR1cm4gZ3Q9dSxkKCl9ZmluYWxseXtndD1tfX0sYnk9ZnVuY3Rpb24odSxkLG0pe3N3aXRjaChkKXtjYXNlImlucHV0IjppZihidCh1LG0pLGQ9bS5uYW1lLG0udHlwZT09PSJyYWRpbyImJmQhPW51bGwpe2ZvcihtPXU7bS5wYXJlbnROb2RlOyltPW0ucGFyZW50Tm9kZTtmb3IobT1tLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWU9IitKU09OLnN0cmluZ2lmeSgiIitkKSsnXVt0eXBlPSJyYWRpbyJdJyksZD0wO2Q8bS5sZW5ndGg7ZCsrKXt2YXIgeD1tW2RdO2lmKHghPT11JiZ4LmZvcm09PT11LmZvcm0pe3ZhciBOPWxwKHgpO2lmKCFOKXRocm93IEVycm9yKHQoOTApKTtudCh4KSxidCh4LE4pfX19YnJlYWs7Y2FzZSJ0ZXh0YXJlYSI6bHModSxtKTticmVhaztjYXNlInNlbGVjdCI6ZD1tLnZhbHVlLGQhPW51bGwmJlhuKHUsISFtLm11bHRpcGxlLGQsITEpfX0sU3Y9cXgsTnY9UGk7dmFyIEtfPXt1c2luZ0NsaWVudEVudHJ5UG9pbnQ6ITEsRXZlbnRzOltvYyxXYSxscCx3dix2dixxeF19LGJjPXtmaW5kRmliZXJCeUhvc3RJbnN0YW5jZTpFaSxidW5kbGVUeXBlOjAsdmVyc2lvbjoiMTguMy4xIixyZW5kZXJlclBhY2thZ2VOYW1lOiJyZWFjdC1kb20ifSxYXz17YnVuZGxlVHlwZTpiYy5idW5kbGVUeXBlLHZlcnNpb246YmMudmVyc2lvbixyZW5kZXJlclBhY2thZ2VOYW1lOmJjLnJlbmRlcmVyUGFja2FnZU5hbWUscmVuZGVyZXJDb25maWc6YmMucmVuZGVyZXJDb25maWcsb3ZlcnJpZGVIb29rU3RhdGU6bnVsbCxvdmVycmlkZUhvb2tTdGF0ZURlbGV0ZVBhdGg6bnVsbCxvdmVycmlkZUhvb2tTdGF0ZVJlbmFtZVBhdGg6bnVsbCxvdmVycmlkZVByb3BzOm51bGwsb3ZlcnJpZGVQcm9wc0RlbGV0ZVBhdGg6bnVsbCxvdmVycmlkZVByb3BzUmVuYW1lUGF0aDpudWxsLHNldEVycm9ySGFuZGxlcjpudWxsLHNldFN1c3BlbnNlSGFuZGxlcjpudWxsLHNjaGVkdWxlVXBkYXRlOm51bGwsY3VycmVudERpc3BhdGNoZXJSZWY6ay5SZWFjdEN1cnJlbnREaXNwYXRjaGVyLGZpbmRIb3N0SW5zdGFuY2VCeUZpYmVyOmZ1bmN0aW9uKHUpe3JldHVybiB1PUl2KHUpLHU9PT1udWxsP251bGw6dS5zdGF0ZU5vZGV9LGZpbmRGaWJlckJ5SG9zdEluc3RhbmNlOmJjLmZpbmRGaWJlckJ5SG9zdEluc3RhbmNlfHxIXyxmaW5kSG9zdEluc3RhbmNlc0ZvclJlZnJlc2g6bnVsbCxzY2hlZHVsZVJlZnJlc2g6bnVsbCxzY2hlZHVsZVJvb3Q6bnVsbCxzZXRSZWZyZXNoSGFuZGxlcjpudWxsLGdldEN1cnJlbnRGaWJlcjpudWxsLHJlY29uY2lsZXJWZXJzaW9uOiIxOC4zLjEtbmV4dC1mMTMzOGY4MDgwLTIwMjQwNDI2In07aWYodHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXzwidSIpe3ZhciBIcD1fX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX187aWYoIUhwLmlzRGlzYWJsZWQmJkhwLnN1cHBvcnRzRmliZXIpdHJ5e1VoPUhwLmluamVjdChYXyksUnI9SHB9Y2F0Y2h7fX1yZXR1cm4gZnMuX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQ9S18sZnMuY3JlYXRlUG9ydGFsPWZ1bmN0aW9uKHUsZCl7dmFyIG09Mjxhcmd1bWVudHMubGVuZ3RoJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOm51bGw7aWYoIW4wKGQpKXRocm93IEVycm9yKHQoMjAwKSk7cmV0dXJuIEdfKHUsZCxudWxsLG0pfSxmcy5jcmVhdGVSb290PWZ1bmN0aW9uKHUsZCl7aWYoIW4wKHUpKXRocm93IEVycm9yKHQoMjk5KSk7dmFyIG09ITEseD0iIixOPWVrO3JldHVybiBkIT1udWxsJiYoZC51bnN0YWJsZV9zdHJpY3RNb2RlPT09ITAmJihtPSEwKSxkLmlkZW50aWZpZXJQcmVmaXghPT12b2lkIDAmJih4PWQuaWRlbnRpZmllclByZWZpeCksZC5vblJlY292ZXJhYmxlRXJyb3IhPT12b2lkIDAmJihOPWQub25SZWNvdmVyYWJsZUVycm9yKSksZD1KeCh1LDEsITEsbnVsbCxudWxsLG0sITEseCxOKSx1W3RvXT1kLmN1cnJlbnQsbmModS5ub2RlVHlwZT09PTg/dS5wYXJlbnROb2RlOnUpLG5ldyB0MChkKX0sZnMuZmluZERPTU5vZGU9ZnVuY3Rpb24odSl7aWYodT09bnVsbClyZXR1cm4gbnVsbDtpZih1Lm5vZGVUeXBlPT09MSlyZXR1cm4gdTt2YXIgZD11Ll9yZWFjdEludGVybmFscztpZihkPT09dm9pZCAwKXRocm93IHR5cGVvZiB1LnJlbmRlcj09ImZ1bmN0aW9uIj9FcnJvcih0KDE4OCkpOih1PU9iamVjdC5rZXlzKHUpLmpvaW4oIiwiKSxFcnJvcih0KDI2OCx1KSkpO3JldHVybiB1PUl2KGQpLHU9dT09PW51bGw/bnVsbDp1LnN0YXRlTm9kZSx1fSxmcy5mbHVzaFN5bmM9ZnVuY3Rpb24odSl7cmV0dXJuIFBpKHUpfSxmcy5oeWRyYXRlPWZ1bmN0aW9uKHUsZCxtKXtpZighanAoZCkpdGhyb3cgRXJyb3IodCgyMDApKTtyZXR1cm4gR3AobnVsbCx1LGQsITAsbSl9LGZzLmh5ZHJhdGVSb290PWZ1bmN0aW9uKHUsZCxtKXtpZighbjAodSkpdGhyb3cgRXJyb3IodCg0MDUpKTt2YXIgeD1tIT1udWxsJiZtLmh5ZHJhdGVkU291cmNlc3x8bnVsbCxOPSExLEM9IiIsUj1laztpZihtIT1udWxsJiYobS51bnN0YWJsZV9zdHJpY3RNb2RlPT09ITAmJihOPSEwKSxtLmlkZW50aWZpZXJQcmVmaXghPT12b2lkIDAmJihDPW0uaWRlbnRpZmllclByZWZpeCksbS5vblJlY292ZXJhYmxlRXJyb3IhPT12b2lkIDAmJihSPW0ub25SZWNvdmVyYWJsZUVycm9yKSksZD1aTihkLG51bGwsdSwxLG0/P251bGwsTiwhMSxDLFIpLHVbdG9dPWQuY3VycmVudCxuYyh1KSx4KWZvcih1PTA7dTx4Lmxlbmd0aDt1KyspbT14W3VdLE49bS5fZ2V0VmVyc2lvbixOPU4obS5fc291cmNlKSxkLm11dGFibGVTb3VyY2VFYWdlckh5ZHJhdGlvbkRhdGE9PW51bGw/ZC5tdXRhYmxlU291cmNlRWFnZXJIeWRyYXRpb25EYXRhPVttLE5dOmQubXV0YWJsZVNvdXJjZUVhZ2VySHlkcmF0aW9uRGF0YS5wdXNoKG0sTik7cmV0dXJuIG5ldyBVcChkKX0sZnMucmVuZGVyPWZ1bmN0aW9uKHUsZCxtKXtpZighanAoZCkpdGhyb3cgRXJyb3IodCgyMDApKTtyZXR1cm4gR3AobnVsbCx1LGQsITEsbSl9LGZzLnVubW91bnRDb21wb25lbnRBdE5vZGU9ZnVuY3Rpb24odSl7aWYoIWpwKHUpKXRocm93IEVycm9yKHQoNDApKTtyZXR1cm4gdS5fcmVhY3RSb290Q29udGFpbmVyPyhQaShmdW5jdGlvbigpe0dwKG51bGwsbnVsbCx1LCExLGZ1bmN0aW9uKCl7dS5fcmVhY3RSb290Q29udGFpbmVyPW51bGwsdVt0b109bnVsbH0pfSksITApOiExfSxmcy51bnN0YWJsZV9iYXRjaGVkVXBkYXRlcz1xeCxmcy51bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcj1mdW5jdGlvbih1LGQsbSx4KXtpZighanAobSkpdGhyb3cgRXJyb3IodCgyMDApKTtpZih1PT1udWxsfHx1Ll9yZWFjdEludGVybmFscz09PXZvaWQgMCl0aHJvdyBFcnJvcih0KDM4KSk7cmV0dXJuIEdwKHUsZCxtLCExLHgpfSxmcy52ZXJzaW9uPSIxOC4zLjEtbmV4dC1mMTMzOGY4MDgwLTIwMjQwNDI2Iixmc312YXIgdWs7ZnVuY3Rpb24gYU8oKXtpZih1aylyZXR1cm4gbzAuZXhwb3J0czt1az0xO2Z1bmN0aW9uIG4oKXtpZighKHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18+InUifHx0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLmNoZWNrRENFIT0iZnVuY3Rpb24iKSl0cnl7X19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLmNoZWNrRENFKG4pfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9fXJldHVybiBuKCksbzAuZXhwb3J0cz1pTygpLG8wLmV4cG9ydHN9dmFyIGNrO2Z1bmN0aW9uIGxPKCl7aWYoY2spcmV0dXJuIHFwO2NrPTE7dmFyIG49YU8oKTtyZXR1cm4gcXAuY3JlYXRlUm9vdD1uLmNyZWF0ZVJvb3QscXAuaHlkcmF0ZVJvb3Q9bi5oeWRyYXRlUm9vdCxxcH12YXIgdU89bE8oKTtjb25zdCBjTz1OMSh1Tyk7LyoqCiAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC41NDUuMCAtIElTQwogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS4KICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAqL2NvbnN0IGRPPW49Pm4ucmVwbGFjZSgvKFthLXowLTldKShbQS1aXSkvZywiJDEtJDIiKS50b0xvd2VyQ2FzZSgpLGhPPW49Pm4ucmVwbGFjZSgvXihbQS1aXSl8W1xzLV9dKyhcdykvZywoZSx0LHMpPT5zP3MudG9VcHBlckNhc2UoKTp0LnRvTG93ZXJDYXNlKCkpLGRrPW49Pntjb25zdCBlPWhPKG4pO3JldHVybiBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSl9LHQkPSguLi5uKT0+bi5maWx0ZXIoKGUsdCxzKT0+ISFlJiZlLnRyaW0oKSE9PSIiJiZzLmluZGV4T2YoZSk9PT10KS5qb2luKCIgIikudHJpbSgpLHBPPW49Pntmb3IoY29uc3QgZSBpbiBuKWlmKGUuc3RhcnRzV2l0aCgiYXJpYS0iKXx8ZT09PSJyb2xlInx8ZT09PSJ0aXRsZSIpcmV0dXJuITB9Oy8qKgogKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNTQ1LjAgLSBJU0MKICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuCiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi92YXIgZk89e3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsd2lkdGg6MjQsaGVpZ2h0OjI0LHZpZXdCb3g6IjAgMCAyNCAyNCIsZmlsbDoibm9uZSIsc3Ryb2tlOiJjdXJyZW50Q29sb3IiLHN0cm9rZVdpZHRoOjIsc3Ryb2tlTGluZWNhcDoicm91bmQiLHN0cm9rZUxpbmVqb2luOiJyb3VuZCJ9Oy8qKgogKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNTQ1LjAgLSBJU0MKICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuCiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi9jb25zdCBtTz1VZS5mb3J3YXJkUmVmKCh7Y29sb3I6bj0iY3VycmVudENvbG9yIixzaXplOmU9MjQsc3Ryb2tlV2lkdGg6dD0yLGFic29sdXRlU3Ryb2tlV2lkdGg6cyxjbGFzc05hbWU6cj0iIixjaGlsZHJlbjpvLGljb25Ob2RlOmksLi4uYX0sbCk9PlVlLmNyZWF0ZUVsZW1lbnQoInN2ZyIse3JlZjpsLC4uLmZPLHdpZHRoOmUsaGVpZ2h0OmUsc3Ryb2tlOm4sc3Ryb2tlV2lkdGg6cz9OdW1iZXIodCkqMjQvTnVtYmVyKGUpOnQsY2xhc3NOYW1lOnQkKCJsdWNpZGUiLHIpLC4uLiFvJiYhcE8oYSkmJnsiYXJpYS1oaWRkZW4iOiJ0cnVlIn0sLi4uYX0sWy4uLmkubWFwKChbYyxoXSk9PlVlLmNyZWF0ZUVsZW1lbnQoYyxoKSksLi4uQXJyYXkuaXNBcnJheShvKT9vOltvXV0pKTsvKioKICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjU0NS4wIC0gSVNDCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLgogKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICovY29uc3QgT249KG4sZSk9Pntjb25zdCB0PVVlLmZvcndhcmRSZWYoKHtjbGFzc05hbWU6cywuLi5yfSxvKT0+VWUuY3JlYXRlRWxlbWVudChtTyx7cmVmOm8saWNvbk5vZGU6ZSxjbGFzc05hbWU6dCQoYGx1Y2lkZS0ke2RPKGRrKG4pKX1gLGBsdWNpZGUtJHtufWAscyksLi4ucn0pKTtyZXR1cm4gdC5kaXNwbGF5TmFtZT1kayhuKSx0fTsvKioKICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjU0NS4wIC0gSVNDCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLgogKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICovY29uc3QgZ089W1sicGF0aCIse2Q6Ik0xMC4yNjggMjFhMiAyIDAgMCAwIDMuNDY0IDAiLGtleToidnd2YnQ5In1dLFsicGF0aCIse2Q6Ik0zLjI2MiAxNS4zMjZBMSAxIDAgMCAwIDQgMTdoMTZhMSAxIDAgMCAwIC43NC0xLjY3M0MxOS40MSAxMy45NTYgMTggMTIuNDk5IDE4IDhBNiA2IDAgMCAwIDYgOGMwIDQuNDk5LTEuNDExIDUuOTU2LTIuNzM4IDcuMzI2IixrZXk6IjExZzl2aSJ9XV0seU89T24oImJlbGwiLGdPKTsvKioKICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjU0NS4wIC0gSVNDCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLgogKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICovY29uc3QgeE89W1sicGF0aCIse2Q6Ik0xMy45OTcgNGEyIDIgMCAwIDEgMS43NiAxLjA1bC40ODYuOUEyIDIgMCAwIDAgMTguMDAzIDdIMjBhMiAyIDAgMCAxIDIgMnY5YTIgMiAwIDAgMS0yIDJINGEyIDIgMCAwIDEtMi0yVjlhMiAyIDAgMCAxIDItMmgxLjk5N2EyIDIgMCAwIDAgMS43NTktMS4wNDhsLjQ4OS0uOTA0QTIgMiAwIDAgMSAxMC4wMDQgNHoiLGtleToiMTh1NmdnIn1dLFsiY2lyY2xlIix7Y3g6IjEyIixjeToiMTMiLHI6IjMiLGtleToiMXZnM2V1In1dXSxiTz1PbigiY2FtZXJhIix4Tyk7LyoqCiAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC41NDUuMCAtIElTQwogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS4KICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAqL2NvbnN0IHdPPVtbInBhdGgiLHtkOiJtNiA5IDYgNiA2LTYiLGtleToicXJ1bnNsIn1dXSx2Tz1PbigiY2hldnJvbi1kb3duIix3Tyk7LyoqCiAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC41NDUuMCAtIElTQwogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS4KICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAqL2NvbnN0IFNPPVtbInBhdGgiLHtkOiJtMTggMTUtNi02LTYgNiIsa2V5OiIxNTN1ZHoifV1dLE5PPU9uKCJjaGV2cm9uLXVwIixTTyk7LyoqCiAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC41NDUuMCAtIElTQwogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS4KICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAqL2NvbnN0IGtPPVtbInBhdGgiLHtkOiJNMTIgNnY2bDQgMiIsa2V5OiJtbWs3eWcifV0sWyJjaXJjbGUiLHtjeDoiMTIiLGN5OiIxMiIscjoiMTAiLGtleToiMW1nbGF5In1dXSxDTz1PbigiY2xvY2siLGtPKTsvKioKICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjU0NS4wIC0gSVNDCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLgogKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICovY29uc3QgJE89W1sicGF0aCIse2Q6Ik0yLjA2MiAxMi4zNDhhMSAxIDAgMCAxIDAtLjY5NiAxMC43NSAxMC43NSAwIDAgMSAxOS44NzYgMCAxIDEgMCAwIDEgMCAuNjk2IDEwLjc1IDEwLjc1IDAgMCAxLTE5Ljg3NiAwIixrZXk6IjFuY2xjMCJ9XSxbImNpcmNsZSIse2N4OiIxMiIsY3k6IjEyIixyOiIzIixrZXk6IjF2N3pyZCJ9XV0sY2Y9T24oImV5ZSIsJE8pOy8qKgogKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNTQ1LjAgLSBJU0MKICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuCiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi9jb25zdCBJTz1bWyJyZWN0Iix7d2lkdGg6IjE4IixoZWlnaHQ6IjE4Iix4OiIzIix5OiIzIixyeDoiMiIscnk6IjIiLGtleToiMW0zYWduIn1dLFsiY2lyY2xlIix7Y3g6IjkiLGN5OiI5IixyOiIyIixrZXk6ImFmMWYwZyJ9XSxbInBhdGgiLHtkOiJtMjEgMTUtMy4wODYtMy4wODZhMiAyIDAgMCAwLTIuODI4IDBMNiAyMSIsa2V5OiIxeG1udDcifV1dLFRPPU9uKCJpbWFnZSIsSU8pOy8qKgogKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNTQ1LjAgLSBJU0MKICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuCiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi9jb25zdCBFTz1bWyJjaXJjbGUiLHtjeDoiMTIiLGN5OiIxMiIscjoiMTAiLGtleToiMW1nbGF5In1dLFsicGF0aCIse2Q6Ik0xMiAxNnYtNCIsa2V5OiIxZHRpZnUifV0sWyJwYXRoIix7ZDoiTTEyIDhoLjAxIixrZXk6ImU5Ym9pMyJ9XV0sUk89T24oImluZm8iLEVPKTsvKioKICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjU0NS4wIC0gSVNDCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLgogKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICovY29uc3QgRE89W1sicGF0aCIse2Q6Ik01IDVhMiAyIDAgMCAxIDMuMDA4LTEuNzI4bDExLjk5NyA2Ljk5OGEyIDIgMCAwIDEgLjAwMyAzLjQ1OGwtMTIgN0EyIDIgMCAwIDEgNSAxOXoiLGtleToiMTBpa2YxIn1dXSxBTz1PbigicGxheSIsRE8pOy8qKgogKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNTQ1LjAgLSBJU0MKICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuCiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi9jb25zdCBfTz1bWyJwYXRoIix7ZDoiTTMgMTJhOSA5IDAgMSAwIDktOSA5Ljc1IDkuNzUgMCAwIDAtNi43NCAyLjc0TDMgOCIsa2V5OiIxMzU3ZTMifV0sWyJwYXRoIix7ZDoiTTMgM3Y1aDUiLGtleToiMXhocThhIn1dXSxPTz1Pbigicm90YXRlLWNjdyIsX08pOy8qKgogKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNTQ1LjAgLSBJU0MKICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuCiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi9jb25zdCBGTz1bWyJwYXRoIix7ZDoiTTE1LjIgM2EyIDIgMCAwIDEgMS40LjZsMy44IDMuOGEyIDIgMCAwIDEgLjYgMS40VjE5YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0yVjVhMiAyIDAgMCAxIDItMnoiLGtleToiMWM4NDc2In1dLFsicGF0aCIse2Q6Ik0xNyAyMXYtN2ExIDEgMCAwIDAtMS0xSDhhMSAxIDAgMCAwLTEgMXY3IixrZXk6IjF5ZHRvcyJ9XSxbInBhdGgiLHtkOiJNNyAzdjRhMSAxIDAgMCAwIDEgMWg3IixrZXk6InQ1MXU3MyJ9XV0sTE89T24oInNhdmUiLEZPKTsvKioKICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjU0NS4wIC0gSVNDCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLgogKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICovY29uc3QgUE89W1sicGF0aCIse2Q6Ik05LjY3MSA0LjEzNmEyLjM0IDIuMzQgMCAwIDEgNC42NTkgMCAyLjM0IDIuMzQgMCAwIDAgMy4zMTkgMS45MTUgMi4zNCAyLjM0IDAgMCAxIDIuMzMgNC4wMzMgMi4zNCAyLjM0IDAgMCAwIDAgMy44MzEgMi4zNCAyLjM0IDAgMCAxLTIuMzMgNC4wMzMgMi4zNCAyLjM0IDAgMCAwLTMuMzE5IDEuOTE1IDIuMzQgMi4zNCAwIDAgMS00LjY1OSAwIDIuMzQgMi4zNCAwIDAgMC0zLjMyLTEuOTE1IDIuMzQgMi4zNCAwIDAgMS0yLjMzLTQuMDMzIDIuMzQgMi4zNCAwIDAgMCAwLTMuODMxQTIuMzQgMi4zNCAwIDAgMSA2LjM1IDYuMDUxYTIuMzQgMi4zNCAwIDAgMCAzLjMxOS0xLjkxNSIsa2V5OiIxaTVlY3cifV0sWyJjaXJjbGUiLHtjeDoiMTIiLGN5OiIxMiIscjoiMyIsa2V5OiIxdjd6cmQifV1dLHpPPU9uKCJzZXR0aW5ncyIsUE8pOy8qKgogKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNTQ1LjAgLSBJU0MKICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuCiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi9jb25zdCBNTz1bWyJwYXRoIix7ZDoiTTIwIDEzYzAgNS0zLjUgNy41LTcuNjYgOC45NWExIDEgMCAwIDEtLjY3LS4wMUM3LjUgMjAuNSA0IDE4IDQgMTNWNmExIDEgMCAwIDEgMS0xYzIgMCA0LjUtMS4yIDYuMjQtMi43MmExLjE3IDEuMTcgMCAwIDEgMS41MiAwQzE0LjUxIDMuODEgMTcgNSAxOSA1YTEgMSAwIDAgMSAxIDF6IixrZXk6Im9lbDQxeSJ9XV0sbiQ9T24oInNoaWVsZCIsTU8pOy8qKgogKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNTQ1LjAgLSBJU0MKICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuCiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi9jb25zdCBCTz1bWyJwYXRoIix7ZDoiTTEwIDExdjYiLGtleToibmNvMG9tIn1dLFsicGF0aCIse2Q6Ik0xNCAxMXY2IixrZXk6Im91dHYxdSJ9XSxbInBhdGgiLHtkOiJNMTkgNnYxNGEyIDIgMCAwIDEtMiAySDdhMiAyIDAgMCAxLTItMlY2IixrZXk6Im1peXRyYyJ9XSxbInBhdGgiLHtkOiJNMyA2aDE4IixrZXk6ImQwd20waiJ9XSxbInBhdGgiLHtkOiJNOCA2VjRhMiAyIDAgMCAxIDItMmg0YTIgMiAwIDAgMSAyIDJ2MiIsa2V5OiJlNzkxamkifV1dLFZPPU9uKCJ0cmFzaC0yIixCTyk7LyoqCiAqIEBsaWNlbnNlIGx1Y2lkZS1yZWFjdCB2MC41NDUuMCAtIElTQwogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBJU0MgbGljZW5zZS4KICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAqL2NvbnN0IFdPPVtbInBhdGgiLHtkOiJtMjEuNzMgMTgtOC0xNGEyIDIgMCAwIDAtMy40OCAwbC04IDE0QTIgMiAwIDAgMCA0IDIxaDE2YTIgMiAwIDAgMCAxLjczLTMiLGtleToid21vZW5xIn1dLFsicGF0aCIse2Q6Ik0xMiA5djQiLGtleToianV6cHU3In1dLFsicGF0aCIse2Q6Ik0xMiAxN2guMDEiLGtleToicDMycDA1In1dXSxhbD1PbigidHJpYW5nbGUtYWxlcnQiLFdPKTsvKioKICogQGxpY2Vuc2UgbHVjaWRlLXJlYWN0IHYwLjU0NS4wIC0gSVNDCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIElTQyBsaWNlbnNlLgogKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICovY29uc3QgVU89W1sicGF0aCIse2Q6Ik0xOCA2IDYgMTgiLGtleToiMWJsNWY4In1dLFsicGF0aCIse2Q6Im02IDYgMTIgMTIiLGtleToiZDhiazZ2In1dXSxqTz1PbigieCIsVU8pOy8qKgogKiBAbGljZW5zZSBsdWNpZGUtcmVhY3QgdjAuNTQ1LjAgLSBJU0MKICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuCiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi9jb25zdCBHTz1bWyJwYXRoIix7ZDoiTTQgMTRhMSAxIDAgMCAxLS43OC0xLjYzbDkuOS0xMC4yYS41LjUgMCAwIDEgLjg2LjQ2bC0xLjkyIDYuMDJBMSAxIDAgMCAwIDEzIDEwaDdhMSAxIDAgMCAxIC43OCAxLjYzbC05LjkgMTAuMmEuNS41IDAgMCAxLS44Ni0uNDZsMS45Mi02LjAyQTEgMSAwIDAgMCAxMSAxNHoiLGtleToiMXhxMmRiIn1dXSxITz1PbigiemFwIixHTyk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgcU89MWUtNyxLTz0xZS00O2NsYXNzICQxe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5iYWNrZW5kPWUsdGhpcy5kYXRhTW92ZXI9dCx0aGlzLmRhdGE9bmV3IFdlYWtNYXAsdGhpcy5kYXRhSWRzQ291bnQ9MH1nZXQoZSl7cmV0dXJuIHRoaXMuZGF0YS5oYXMoZSl8fHRoaXMuZGF0YU1vdmVyLm1vdmVEYXRhKHRoaXMuYmFja2VuZCxlKSx0aGlzLmRhdGEuZ2V0KGUpfXNldChlLHQpe3RoaXMuZGF0YUlkc0NvdW50KyssdGhpcy5kYXRhLnNldChlLHQpfWhhcyhlKXtyZXR1cm4gdGhpcy5kYXRhLmhhcyhlKX1kZWxldGUoZSl7cmV0dXJuIHRoaXMuZGF0YUlkc0NvdW50LS0sdGhpcy5kYXRhLmRlbGV0ZShlKX1udW1EYXRhSWRzKCl7cmV0dXJuIHRoaXMuZGF0YUlkc0NvdW50fX1jbGFzcyBaZntyZWZDb3VudChlKXtyZXR1cm4gbXMoInJlZkNvdW50Iil9aW5jUmVmKGUpe3JldHVybiBtcygiaW5jUmVmIil9dGltZXJBdmFpbGFibGUoKXtyZXR1cm4hMH10aW1lKGUpe3JldHVybiBtcygidGltZSIpfXJlYWQoZSl7cmV0dXJuIG1zKCJyZWFkIil9cmVhZFN5bmMoZSl7cmV0dXJuIG1zKCJyZWFkU3luYyIpfXJlYWRUb0dQVShlLHQpe3JldHVybiBtcygicmVhZFRvR1BVIil9bnVtRGF0YUlkcygpe3JldHVybiBtcygibnVtRGF0YUlkcyIpfWRpc3Bvc2VEYXRhKGUsdCl7cmV0dXJuIG1zKCJkaXNwb3NlRGF0YSIpfXdyaXRlKGUsdCxzKXtyZXR1cm4gbXMoIndyaXRlIil9bW92ZShlLHQscyxyLG8pe3JldHVybiBtcygibW92ZSIpfWNyZWF0ZVRlbnNvckZyb21HUFVEYXRhKGUsdCxzKXtyZXR1cm4gbXMoImNyZWF0ZVRlbnNvckZyb21HUFVEYXRhIil9bWVtb3J5KCl7cmV0dXJuIG1zKCJtZW1vcnkiKX1mbG9hdFByZWNpc2lvbigpe3JldHVybiBtcygiZmxvYXRQcmVjaXNpb24iKX1lcHNpbG9uKCl7cmV0dXJuIHRoaXMuZmxvYXRQcmVjaXNpb24oKT09PTMyP3FPOktPfWRpc3Bvc2UoKXtyZXR1cm4gbXMoImRpc3Bvc2UiKX19ZnVuY3Rpb24gbXMobil7dGhyb3cgbmV3IEVycm9yKGAnJHtufScgbm90IHlldCBpbXBsZW1lbnRlZCBvciBub3QgZm91bmQgaW4gdGhlIHJlZ2lzdHJ5LiBUaGlzIGtlcm5lbCBtYXkgbm90IGJlIHN1cHBvcnRlZCBieSB0aGUgdGZqcyBiYWNrZW5kIHlvdSBoYXZlIGNob3NlbmApfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEkxKG4pe2xldCBlPW4ubGVuZ3RoLHQ9MDtmb3IoO2U+MDspdD1NYXRoLnJhbmRvbSgpKmV8MCxlLS0scG8obixlLHQpfWZ1bmN0aW9uIFhPKG4sZSl7aWYobi5sZW5ndGghPT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoYEFycmF5IHNpemVzIG11c3QgbWF0Y2ggdG8gYmUgc2h1ZmZsZWQgdG9nZXRoZXIgRmlyc3QgYXJyYXkgbGVuZ3RoIHdhcyAke24ubGVuZ3RofVNlY29uZCBhcnJheSBsZW5ndGggd2FzICR7ZS5sZW5ndGh9YCk7bGV0IHQ9bi5sZW5ndGgscz0wO2Zvcig7dD4wOylzPU1hdGgucmFuZG9tKCkqdHwwLHQtLSxwbyhuLHQscykscG8oZSx0LHMpfWZ1bmN0aW9uIHJpKG4sZSx0KXtyZXR1cm4gTWF0aC5tYXgobixNYXRoLm1pbihlLHQpKX1mdW5jdGlvbiBKZihuKXtyZXR1cm4gbiUyPT09MD9uOm4rMX1mdW5jdGlvbiBwbyhuLGUsdCl7Y29uc3Qgcz1uW2VdO25bZV09blt0XSxuW3RdPXN9ZnVuY3Rpb24gcyQobil7bGV0IGU9MDtmb3IobGV0IHQ9MDt0PG4ubGVuZ3RoO3QrKyllKz1uW3RdO3JldHVybiBlfWZ1bmN0aW9uIFlPKG4sZSl7Y29uc3QgdD1NYXRoLnJhbmRvbSgpO3JldHVybiBlKnQrKDEtdCkqbn1mdW5jdGlvbiBRTyhuLGUpe2xldCB0PTA7Zm9yKGxldCBzPTA7czxuLmxlbmd0aDtzKyspe2NvbnN0IHI9TnVtYmVyKG5bc10pLU51bWJlcihlW3NdKTt0Kz1yKnJ9cmV0dXJuIHR9ZnVuY3Rpb24gQShuLGUpe2lmKCFuKXRocm93IG5ldyBFcnJvcih0eXBlb2YgZT09InN0cmluZyI/ZTplKCkpfWZ1bmN0aW9uIE5uKG4sZSx0PSIiKXtBKEplKG4sZSksKCk9PnQrYCBTaGFwZXMgJHtufSBhbmQgJHtlfSBtdXN0IG1hdGNoYCl9ZnVuY3Rpb24gYmEobil7QShuIT1udWxsLCgpPT4iVGhlIGlucHV0IHRvIHRoZSB0ZW5zb3IgY29uc3RydWN0b3IgbXVzdCBiZSBhIG5vbi1udWxsIHZhbHVlLiIpfWZ1bmN0aW9uIGNlKG4pe2lmKG4ubGVuZ3RoPT09MClyZXR1cm4gMTtsZXQgZT1uWzBdO2ZvcihsZXQgdD0xO3Q8bi5sZW5ndGg7dCsrKWUqPW5bdF07cmV0dXJuIGV9ZnVuY3Rpb24gWk8obil7cmV0dXJuIG4ubGVuZ3RoPT09MH1mdW5jdGlvbiByJChuLGUpe2lmKG49PT1lKXJldHVybiEwO2lmKG49PW51bGx8fGU9PW51bGx8fG4ubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDt0KyspaWYoblt0XSE9PW51bGwmJmVbdF0hPT1udWxsJiZuW3RdIT09ZVt0XSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBKZShuLGUpe2lmKG49PT1lKXJldHVybiEwO2lmKG49PW51bGx8fGU9PW51bGx8fG4ubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDt0KyspaWYoblt0XSE9PWVbdF0pcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcmEobil7cmV0dXJuIG4lMT09PTB9ZnVuY3Rpb24gSk8obil7aWYoTWF0aC50YW5oIT1udWxsKXJldHVybiBNYXRoLnRhbmgobik7aWYobj09PTEvMClyZXR1cm4gMTtpZihuPT09LTEvMClyZXR1cm4tMTt7Y29uc3QgZT1NYXRoLmV4cCgyKm4pO3JldHVybihlLTEpLyhlKzEpfX1mdW5jdGlvbiBTZihuKXtjb25zdCBlPU1hdGguY2VpbChNYXRoLnNxcnQobikpO3JldHVybltlLE1hdGguY2VpbChuL2UpXX1mdW5jdGlvbiBlRihuKXtjb25zdCBlPW5ldyBVaW50MzJBcnJheShuKTtmb3IobGV0IHQ9MDt0PG47Kyt0KWVbdF09dDtyZXR1cm4gSTEoZSksZX1mdW5jdGlvbiBKaShuLGUpe3JldHVybiBlPD1uLmxlbmd0aD9uOm4rIiAiLnJlcGVhdChlLW4ubGVuZ3RoKX1mdW5jdGlvbiBFMChuLGU9cj0+MCx0LHMpe3JldHVybiBuZXcgUHJvbWlzZSgocixvKT0+e2xldCBpPTA7Y29uc3QgYT0oKT0+e2lmKG4oKSl7cigpO3JldHVybn1pKys7Y29uc3QgbD1lKGkpO2lmKHQhPW51bGwmJmk+PXQpe28oKTtyZXR1cm59cyE9bnVsbD9zKGEsbCk6c2V0VGltZW91dChhLGwpfTthKCl9KX1mdW5jdGlvbiBUMShuLGUpe2xldCB0PTEscz0tMTtmb3IobGV0IG89MDtvPG4ubGVuZ3RoOysrbylpZihuW29dPj0wKXQqPW5bb107ZWxzZSBpZihuW29dPT09LTEpe2lmKHMhPT0tMSl0aHJvdyBFcnJvcihgU2hhcGVzIGNhbiBvbmx5IGhhdmUgMSBpbXBsaWNpdCBzaXplLiBGb3VuZCAtMSBhdCBkaW0gJHtzfSBhbmQgZGltICR7b31gKTtzPW99ZWxzZSBpZihuW29dPDApdGhyb3cgRXJyb3IoYFNoYXBlcyBjYW4gbm90IGJlIDwgMC4gRm91bmQgJHtuW29dfSBhdCBkaW0gJHtvfWApO2lmKHM9PT0tMSl7aWYoZT4wJiZlIT09dCl0aHJvdyBFcnJvcihgU2l6ZSgke2V9KSBtdXN0IG1hdGNoIHRoZSBwcm9kdWN0IG9mIHNoYXBlICR7bn1gKTtyZXR1cm4gbn1pZih0PT09MCl0aHJvdyBFcnJvcihgQ2Fubm90IGluZmVyIHRoZSBtaXNzaW5nIHNpemUgaW4gWyR7bn1dIHdoZW4gdGhlcmUgYXJlIDAgZWxlbWVudHNgKTtpZihlJXQhPT0wKXRocm93IEVycm9yKGBUaGUgaW1wbGljaXQgc2hhcGUgY2FuJ3QgYmUgYSBmcmFjdGlvbmFsIG51bWJlci4gR290ICR7ZX0gLyAke3R9YCk7Y29uc3Qgcj1uLnNsaWNlKCk7cmV0dXJuIHJbc109ZS90LHJ9ZnVuY3Rpb24gUWUobixlKXtjb25zdCB0PWUubGVuZ3RoO3JldHVybiBuPW49PW51bGw/ZS5tYXAoKHMscik9PnIpOltdLmNvbmNhdChuKSxBKG4uZXZlcnkocz0+cz49LXQmJnM8dCksKCk9PmBBbGwgdmFsdWVzIGluIGF4aXMgcGFyYW0gbXVzdCBiZSBpbiByYW5nZSBbLSR7dH0sICR7dH0pIGJ1dCBnb3QgYXhpcyAke259YCksQShuLmV2ZXJ5KHM9PnJhKHMpKSwoKT0+YEFsbCB2YWx1ZXMgaW4gYXhpcyBwYXJhbSBtdXN0IGJlIGludGVnZXJzIGJ1dCBnb3QgYXhpcyAke259YCksbi5tYXAocz0+czwwP3QrczpzKX1mdW5jdGlvbiB2byhuLGUpe2NvbnN0IHQ9W10scz1bXSxyPWUhPW51bGwmJkFycmF5LmlzQXJyYXkoZSkmJmUubGVuZ3RoPT09MCxvPWU9PW51bGx8fHI/bnVsbDpRZShlLG4pLnNvcnQoKTtsZXQgaT0wO2ZvcihsZXQgYT0wO2E8bi5sZW5ndGg7KythKXtpZihvIT1udWxsKXtpZihvW2ldPT09YSYmblthXSE9PTEpdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBzcXVlZXplIGF4aXMgJHthfSBzaW5jZSBpdHMgZGltICcke25bYV19JyBpcyBub3QgMWApOyhvW2ldPT1udWxsfHxvW2ldPmEpJiZuW2FdPT09MSYmKHQucHVzaChuW2FdKSxzLnB1c2goYSkpLG9baV08PWEmJmkrK31uW2FdIT09MSYmKHQucHVzaChuW2FdKSxzLnB1c2goYSkpfXJldHVybntuZXdTaGFwZTp0LGtlcHREaW1zOnN9fWZ1bmN0aW9uIGhuKG4sZSl7cmV0dXJuIE10KG4sZSl9ZnVuY3Rpb24gTXQobixlKXtsZXQgdD1udWxsO2lmKG49PW51bGx8fG49PT0iZmxvYXQzMiIpdD1uZXcgRmxvYXQzMkFycmF5KGUpO2Vsc2UgaWYobj09PSJpbnQzMiIpdD1uZXcgSW50MzJBcnJheShlKTtlbHNlIGlmKG49PT0iYm9vbCIpdD1uZXcgVWludDhBcnJheShlKTtlbHNlIGlmKG49PT0ic3RyaW5nIil0PW5ldyBBcnJheShlKTtlbHNlIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBkYXRhIHR5cGUgJHtufWApO3JldHVybiB0fWZ1bmN0aW9uIG8kKG4sZSl7Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDt0Kyspe2NvbnN0IHM9blt0XTtpZihpc05hTihzKXx8IWlzRmluaXRlKHMpKXRocm93IEVycm9yKGBBIHRlbnNvciBvZiB0eXBlICR7ZX0gYmVpbmcgdXBsb2FkZWQgY29udGFpbnMgJHtzfS5gKX19ZnVuY3Rpb24gaSQobil7cmV0dXJuIG49PT0iYm9vbCJ8fG49PT0iY29tcGxleDY0Inx8bj09PSJmbG9hdDMyInx8bj09PSJpbnQzMiJ8fG49PT0ic3RyaW5nIn1mdW5jdGlvbiBFMShuLGUpe3JldHVybiEoZT09PSJjb21wbGV4NjQifHxlPT09ImZsb2F0MzIiJiZuIT09ImNvbXBsZXg2NCJ8fGU9PT0iaW50MzIiJiZuIT09ImZsb2F0MzIiJiZuIT09ImNvbXBsZXg2NCJ8fGU9PT0iYm9vbCImJm49PT0iYm9vbCIpfWZ1bmN0aW9uIF9jKG4pe2lmKG49PT0iZmxvYXQzMiJ8fG49PT0iaW50MzIiKXJldHVybiA0O2lmKG49PT0iY29tcGxleDY0IilyZXR1cm4gODtpZihuPT09ImJvb2wiKXJldHVybiAxO3Rocm93IG5ldyBFcnJvcihgVW5rbm93biBkdHlwZSAke259YCl9ZnVuY3Rpb24gYSQobil7aWYobj09bnVsbClyZXR1cm4gMDtsZXQgZT0wO3JldHVybiBuLmZvckVhY2godD0+ZSs9dC5sZW5ndGgpLGV9ZnVuY3Rpb24genIobil7cmV0dXJuIHR5cGVvZiBuPT0ic3RyaW5nInx8biBpbnN0YW5jZW9mIFN0cmluZ31mdW5jdGlvbiBsJChuKXtyZXR1cm4gdHlwZW9mIG49PSJib29sZWFuIn1mdW5jdGlvbiBOZihuKXtyZXR1cm4gdHlwZW9mIG49PSJudW1iZXIifWZ1bmN0aW9uIHdhKG4pe3JldHVybiBBcnJheS5pc0FycmF5KG4pP3dhKG5bMF0pOm4gaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXk/ImZsb2F0MzIiOm4gaW5zdGFuY2VvZiBJbnQzMkFycmF5fHxuIGluc3RhbmNlb2YgVWludDhBcnJheXx8biBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5PyJpbnQzMiI6TmYobik/ImZsb2F0MzIiOnpyKG4pPyJzdHJpbmciOmwkKG4pPyJib29sIjoiZmxvYXQzMiJ9ZnVuY3Rpb24gb2kobil7cmV0dXJuISEobiYmbi5jb25zdHJ1Y3RvciYmbi5jYWxsJiZuLmFwcGx5KX1mdW5jdGlvbiBrZihuLGUpe2ZvcihsZXQgdD1lO3Q8bjsrK3QpaWYobiV0PT09MClyZXR1cm4gdDtyZXR1cm4gbn1mdW5jdGlvbiB6ZShuKXtjb25zdCBlPW4ubGVuZ3RoO2lmKGU8MilyZXR1cm5bXTtjb25zdCB0PW5ldyBBcnJheShlLTEpO3RbZS0yXT1uW2UtMV07Zm9yKGxldCBzPWUtMztzPj0wOy0tcyl0W3NdPXRbcysxXSpuW3MrMV07cmV0dXJuIHR9ZnVuY3Rpb24gdSQobixlLHQscz0hMSl7Y29uc3Qgcj1uZXcgQXJyYXk7aWYoZS5sZW5ndGg9PT0xKXtjb25zdCBvPWVbMF0qKHM/MjoxKTtmb3IobGV0IGk9MDtpPG87aSsrKXJbaV09dFtuK2ldfWVsc2V7Y29uc3Qgbz1lWzBdLGk9ZS5zbGljZSgxKSxhPWkucmVkdWNlKChsLGMpPT5sKmMpKihzPzI6MSk7Zm9yKGxldCBsPTA7bDxvO2wrKylyW2xdPXUkKG4rbCphLGksdCxzKX1yZXR1cm4gcn1mdW5jdGlvbiBGcyhuLGUsdD0hMSl7aWYobi5sZW5ndGg9PT0wKXJldHVybiBlWzBdO2NvbnN0IHM9bi5yZWR1Y2UoKHIsbyk9PnIqbykqKHQ/MjoxKTtpZihzPT09MClyZXR1cm5bXTtpZihzIT09ZS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBbJHtufV0gZG9lcyBub3QgbWF0Y2ggdGhlIGlucHV0IHNpemUgJHtlLmxlbmd0aH0ke3Q/IiBmb3IgYSBjb21wbGV4IHRlbnNvciI6IiJ9LmApO3JldHVybiB1JCgwLG4sZSx0KX1mdW5jdGlvbiBjJChuLGUpe2lmKEFycmF5LmlzQXJyYXkobikpcmV0dXJuIG47aWYoZT09PSJmbG9hdDMyIilyZXR1cm4gbiBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheT9uOm5ldyBGbG9hdDMyQXJyYXkobik7aWYoZT09PSJpbnQzMiIpcmV0dXJuIG4gaW5zdGFuY2VvZiBJbnQzMkFycmF5P246bmV3IEludDMyQXJyYXkobik7aWYoZT09PSJib29sInx8ZT09PSJzdHJpbmciKXJldHVybiBVaW50OEFycmF5LmZyb20obmV3IEludDMyQXJyYXkobikpO3Rocm93IG5ldyBFcnJvcihgVW5rbm93biBkdHlwZSAke2V9YCl9ZnVuY3Rpb24gZW0obixlKXtjb25zdCB0PVNuKG4sZSk7Zm9yKGxldCBzPTA7czx0Lmxlbmd0aDtzKyspdFtzXT0xO3JldHVybiB0fWZ1bmN0aW9uIFNuKG4sZSl7aWYoZT09bnVsbHx8ZT09PSJmbG9hdDMyInx8ZT09PSJjb21wbGV4NjQiKXJldHVybiBuZXcgRmxvYXQzMkFycmF5KG4pO2lmKGU9PT0iaW50MzIiKXJldHVybiBuZXcgSW50MzJBcnJheShuKTtpZihlPT09ImJvb2wiKXJldHVybiBuZXcgVWludDhBcnJheShuKTt0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZGF0YSB0eXBlICR7ZX1gKX1mdW5jdGlvbiBSMShuLGUpe2NvbnN0IHQ9bi5yZWR1Y2UoKHMscik9PnMqciwxKTtpZihlPT1udWxsfHxlPT09ImZsb2F0MzIiKXJldHVybiBGcyhuLG5ldyBGbG9hdDMyQXJyYXkodCkpO2lmKGU9PT0iaW50MzIiKXJldHVybiBGcyhuLG5ldyBJbnQzMkFycmF5KHQpKTtpZihlPT09ImJvb2wiKXJldHVybiBGcyhuLG5ldyBVaW50OEFycmF5KHQpKTt0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZGF0YSB0eXBlICR7ZX1gKX1mdW5jdGlvbiBrcyhuKXtuLmZvckVhY2goZT0+e0EoTnVtYmVyLmlzSW50ZWdlcihlKSYmZT49MCwoKT0+YFRlbnNvciBtdXN0IGhhdmUgYSBzaGFwZSBjb21wcmlzZWQgb2YgcG9zaXRpdmUgaW50ZWdlcnMgYnV0IGdvdCBzaGFwZSBbJHtufV0uYCl9KX1mdW5jdGlvbiBicihuLGUsdCl7aWYoZT09PTApcmV0dXJuIDA7aWYoZT09PTEpcmV0dXJuIG5bMF07bGV0IHM9bltuLmxlbmd0aC0xXTtmb3IobGV0IHI9MDtyPG4ubGVuZ3RoLTE7KytyKXMrPXRbcl0qbltyXTtyZXR1cm4gc31mdW5jdGlvbiB2YShuLGUsdCl7aWYoZT09PTApcmV0dXJuW107aWYoZT09PTEpcmV0dXJuW25dO2NvbnN0IHM9bmV3IEFycmF5KGUpO2ZvcihsZXQgcj0wO3I8cy5sZW5ndGgtMTsrK3Ipc1tyXT1NYXRoLmZsb29yKG4vdFtyXSksbi09c1tyXSp0W3JdO3JldHVybiBzW3MubGVuZ3RoLTFdPW4sc31mdW5jdGlvbiBpaShuKXtyZXR1cm4gbiYmbi50aGVuJiZ0eXBlb2Ygbi50aGVuPT0iZnVuY3Rpb24ifS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGhrPSJ0ZmpzZmxhZ3MiO2NsYXNzIGQke2NvbnN0cnVjdG9yKGUpe3RoaXMuZ2xvYmFsPWUsdGhpcy5mbGFncz17fSx0aGlzLmZsYWdSZWdpc3RyeT17fSx0aGlzLnVybEZsYWdzPXt9LHRoaXMuZ2V0UXVlcnlQYXJhbXM9dEYsdGhpcy5wb3B1bGF0ZVVSTEZsYWdzKCl9c2V0UGxhdGZvcm0oZSx0KXt0aGlzLnBsYXRmb3JtIT1udWxsJiYob2UoKS5nZXRCb29sKCJJU19URVNUIil8fG9lKCkuZ2V0Qm9vbCgiUFJPRCIpfHxjb25zb2xlLndhcm4oYFBsYXRmb3JtICR7dGhpcy5wbGF0Zm9ybU5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gc2V0LiBPdmVyd3JpdGluZyB0aGUgcGxhdGZvcm0gd2l0aCAke2V9LmApKSx0aGlzLnBsYXRmb3JtTmFtZT1lLHRoaXMucGxhdGZvcm09dH1yZWdpc3RlckZsYWcoZSx0LHMpe2lmKHRoaXMuZmxhZ1JlZ2lzdHJ5W2VdPXtldmFsdWF0aW9uRm46dCxzZXRIb29rOnN9LHRoaXMudXJsRmxhZ3NbZV0hPW51bGwpe2NvbnN0IHI9dGhpcy51cmxGbGFnc1tlXTtvZSgpLmdldEJvb2woIklTX1RFU1QiKXx8b2UoKS5nZXRCb29sKCJQUk9EIil8fGNvbnNvbGUud2FybihgU2V0dGluZyBmZWF0dXJlIG92ZXJyaWRlIGZyb20gVVJMICR7ZX06ICR7cn0uYCksdGhpcy5zZXQoZSxyKX19YXN5bmMgZ2V0QXN5bmMoZSl7cmV0dXJuIGUgaW4gdGhpcy5mbGFncz90aGlzLmZsYWdzW2VdOih0aGlzLmZsYWdzW2VdPWF3YWl0IHRoaXMuZXZhbHVhdGVGbGFnKGUpLHRoaXMuZmxhZ3NbZV0pfWdldChlKXtpZihlIGluIHRoaXMuZmxhZ3MpcmV0dXJuIHRoaXMuZmxhZ3NbZV07Y29uc3QgdD10aGlzLmV2YWx1YXRlRmxhZyhlKTtpZihpaSh0KSl0aHJvdyBuZXcgRXJyb3IoYEZsYWcgJHtlfSBjYW5ub3QgYmUgc3luY2hyb25vdXNseSBldmFsdWF0ZWQuIFBsZWFzZSB1c2UgZ2V0QXN5bmMoKSBpbnN0ZWFkLmApO3JldHVybiB0aGlzLmZsYWdzW2VdPXQsdGhpcy5mbGFnc1tlXX1nZXROdW1iZXIoZSl7cmV0dXJuIHRoaXMuZ2V0KGUpfWdldEJvb2woZSl7cmV0dXJuIHRoaXMuZ2V0KGUpfWdldFN0cmluZyhlKXtyZXR1cm4gdGhpcy5nZXQoZSl9Z2V0RmxhZ3MoKXtyZXR1cm4gdGhpcy5mbGFnc31nZXQgZmVhdHVyZXMoKXtyZXR1cm4gdGhpcy5mbGFnc31zZXQoZSx0KXtpZih0aGlzLmZsYWdSZWdpc3RyeVtlXT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzZXQgZmxhZyAke2V9IGFzIGl0IGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLmApO3RoaXMuZmxhZ3NbZV09dCx0aGlzLmZsYWdSZWdpc3RyeVtlXS5zZXRIb29rIT1udWxsJiZ0aGlzLmZsYWdSZWdpc3RyeVtlXS5zZXRIb29rKHQpfWV2YWx1YXRlRmxhZyhlKXtpZih0aGlzLmZsYWdSZWdpc3RyeVtlXT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBldmFsdWF0ZSBmbGFnICcke2V9Jzogbm8gZXZhbHVhdGlvbiBmdW5jdGlvbiBmb3VuZC5gKTtyZXR1cm4gdGhpcy5mbGFnUmVnaXN0cnlbZV0uZXZhbHVhdGlvbkZuKCl9c2V0RmxhZ3MoZSl7dGhpcy5mbGFncz1PYmplY3QuYXNzaWduKHt9LGUpfXJlc2V0KCl7dGhpcy5mbGFncz17fSx0aGlzLnVybEZsYWdzPXt9LHRoaXMucG9wdWxhdGVVUkxGbGFncygpfXBvcHVsYXRlVVJMRmxhZ3MoKXtpZih0eXBlb2YgdGhpcy5nbG9iYWw+InUifHx0eXBlb2YgdGhpcy5nbG9iYWwubG9jYXRpb24+InUifHx0eXBlb2YgdGhpcy5nbG9iYWwubG9jYXRpb24uc2VhcmNoPiJ1IilyZXR1cm47Y29uc3QgZT10aGlzLmdldFF1ZXJ5UGFyYW1zKHRoaXMuZ2xvYmFsLmxvY2F0aW9uLnNlYXJjaCk7aGsgaW4gZSYmZVtoa10uc3BsaXQoIiwiKS5mb3JFYWNoKHM9Pntjb25zdFtyLG9dPXMuc3BsaXQoIjoiKTt0aGlzLnVybEZsYWdzW3JdPXNGKHIsbyl9KX19ZnVuY3Rpb24gdEYobil7Y29uc3QgZT17fTtyZXR1cm4gbi5yZXBsYWNlKC9bPyZdKFtePT8mXSspKD86PShbXiZdKikpPy9nLCh0LC4uLnMpPT4obkYoZSxzWzBdLHNbMV0pLHMuam9pbigiPSIpKSksZX1mdW5jdGlvbiBuRihuLGUsdCl7bltkZWNvZGVVUklDb21wb25lbnQoZSldPWRlY29kZVVSSUNvbXBvbmVudCh0fHwiIil9ZnVuY3Rpb24gc0YobixlKXtjb25zdCB0PWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gdD09PSJ0cnVlInx8dD09PSJmYWxzZSI/dD09PSJ0cnVlIjpgJHsrdH1gPT09dD8rdDplfWZ1bmN0aW9uIG9lKCl7cmV0dXJuIEQxfWxldCBEMT1udWxsO2Z1bmN0aW9uIHJGKG4pe0QxPW59LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovbGV0IGwwO2Z1bmN0aW9uIGgkKCl7aWYobDA9PW51bGwpe2xldCBuO2lmKHR5cGVvZiB3aW5kb3c8InUiKW49d2luZG93O2Vsc2UgaWYodHlwZW9mIGdsb2JhbFRoaXM8InUiKW49Z2xvYmFsVGhpcztlbHNlIGlmKHR5cGVvZiBwcm9jZXNzPCJ1IiluPXByb2Nlc3M7ZWxzZSBpZih0eXBlb2Ygc2VsZjwidSIpbj1zZWxmO2Vsc2UgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCBhIGdsb2JhbCBvYmplY3QiKTtsMD1ufXJldHVybiBsMH1mdW5jdGlvbiBvRigpe2NvbnN0IG49aCQoKTtyZXR1cm4gbi5fdGZHbG9iYWxzPT1udWxsJiYobi5fdGZHbG9iYWxzPW5ldyBNYXApLG4uX3RmR2xvYmFsc31mdW5jdGlvbiBBMShuLGUpe2NvbnN0IHQ9b0YoKTtpZih0LmhhcyhuKSlyZXR1cm4gdC5nZXQobik7e2NvbnN0IHM9ZSgpO3JldHVybiB0LnNldChuLHMpLHQuZ2V0KG4pfX1jb25zdCBKYz0iQWJzIixJbD0iQWNvcyIsVGw9IkFjb3NoIixTYT0iQWRkIixlZD0iQWRkTiIsdG09IkFsbCIsbm09IkFueSIsdGQ9IkFyZ01heCIsbmQ9IkFyZ01pbiIsRWw9IkFzaW4iLFJsPSJBc2luaCIsRGw9IkF0YW4iLEFsPSJBdGFuaCIsX2w9IkF0YW4yIixzZD0iQXZnUG9vbCIsc209IkF2Z1Bvb2xHcmFkIixyZD0iQXZnUG9vbDNEIixybT0iQXZnUG9vbDNER3JhZCIsb2Q9IkJhdGNoTWF0TXVsIixpZD0iQmF0Y2hUb1NwYWNlTkQiLG9tPSJCaW5jb3VudCIsYWQ9IkJpdHdpc2VBbmQiLHAkPSJCcm9hZGNhc3RUbyIsaW09IkJyb2FkY2FzdEFyZ3MiLE9sPSJDYXN0IixGbD0iQ2VpbCIsTGw9IkNsaXBCeVZhbHVlIixhbT0iQ29tcGxleCIsbGQ9IkNvbXBsZXhBYnMiLHVkPSJDb25jYXQiLGNkPSJDb252MkQiLGxtPSJDb252MkRCYWNrcHJvcEZpbHRlciIsZGQ9IkNvbnYyREJhY2twcm9wSW5wdXQiLGhkPSJDb252M0QiLHVtPSJDb252M0RCYWNrcHJvcEZpbHRlclYyIixjbT0iQ29udjNEQmFja3Byb3BJbnB1dFYyIixQbD0iQ29zIix6bD0iQ29zaCIsZG09IkN1bXByb2QiLHBkPSJDdW1zdW0iLGhtPSJDcm9wQW5kUmVzaXplIixwbT0iRGVuc2VCaW5jb3VudCIsZm09IkRlcHRoVG9TcGFjZSIsZmQ9IkRlcHRod2lzZUNvbnYyZE5hdGl2ZSIsbW09IkRlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wRmlsdGVyIixnbT0iRGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BJbnB1dCIseW09IkRpYWciLG1kPSJEaWxhdGlvbjJEIixDZj0iRGlsYXRpb24yREJhY2twcm9wSW5wdXQiLCRmPSJEaWxhdGlvbjJEQmFja3Byb3BGaWx0ZXIiLHhtPSJEcmF3IixNbD0iUmVhbERpdiIsYm09IkVpbnN1bSIsQmw9IkVsdSIsd209IkVsdUdyYWQiLFZsPSJFcmYiLGdkPSJFcXVhbCIsV2w9IkV4cCIseWQ9IkV4cGFuZERpbXMiLFVsPSJFeHBtMSIsdm09IkZGVCIsU209IkZpbGwiLE5tPSJGbGlwTGVmdFJpZ2h0IixqbD0iRmxvb3IiLEdsPSJGbG9vckRpdiIseGQ9IkZ1c2VkQmF0Y2hOb3JtIixiZD0iR2F0aGVyVjIiLGttPSJHYXRoZXJOZCIsd2Q9IkdyZWF0ZXIiLEhsPSJHcmVhdGVyRXF1YWwiLHFsPSJJZGVudGl0eSIsQ209IklGRlQiLCRtPSJJbWFnIixLbD0iSXNGaW5pdGUiLFhsPSJJc0luZiIsWWw9IklzTmFuIix2ZD0iTGVha3lSZWx1IixTZD0iTGVzcyIsTmQ9Ikxlc3NFcXVhbCIsSW09IkxpblNwYWNlIixRbD0iTG9nIixabD0iTG9nMXAiLGtkPSJMb2dpY2FsQW5kIixDZD0iTG9naWNhbE5vdCIsJGQ9IkxvZ2ljYWxPciIsaUY9IkxvZ2ljYWxYb3IiLGYkPSJMb2dTb2Z0bWF4IixhRj0iTG93ZXJCb3VuZCIsSWQ9IkxSTiIsVG09IkxSTkdyYWQiLGxGPSJNYXRyaXhCYW5kUGFydCIsVGQ9Ik1heCIsSmw9Ik1heGltdW0iLEVkPSJNYXhQb29sIixFbT0iTWF4UG9vbEdyYWQiLFJkPSJNYXhQb29sM0QiLFJtPSJNYXhQb29sM0RHcmFkIixEbT0iTWF4UG9vbFdpdGhBcmdtYXgiLERkPSJNZWFuIixBZD0iTWluIixldT0iTWluaW11bSIsX2Q9Ik1pcnJvclBhZCIsdHU9Ik1vZCIsQW09Ik11bHRpbm9taWFsIixudT0iTXVsdGlwbHkiLE9kPSJOZWciLEZkPSJOb3RFcXVhbCIsX209Ik5vbk1heFN1cHByZXNzaW9uVjMiLE9tPSJOb25NYXhTdXBwcmVzc2lvblY0IixGbT0iTm9uTWF4U3VwcHJlc3Npb25WNSIsTGQ9Ik9uZXNMaWtlIixQZD0iT25lSG90Iix6ZD0iUGFjayIsTWQ9IlBhZFYyIix1Rj0iUG9vbCIsc3U9IlBvdyIsQmQ9IlByZWx1IixWZD0iUHJvZCIsTG09IlJhZ2dlZEdhdGhlciIsUG09IlJhZ2dlZFJhbmdlIix6bT0iUmFnZ2VkVGVuc29yVG9UZW5zb3IiLE1tPSJSYW5nZSIsQm09IlJlYWwiLHJ1PSJSZWNpcHJvY2FsIixvdT0iUmVsdSIsV2Q9IlJlc2hhcGUiLFVkPSJSZXNpemVOZWFyZXN0TmVpZ2hib3IiLFZtPSJSZXNpemVOZWFyZXN0TmVpZ2hib3JHcmFkIixqZD0iUmVzaXplQmlsaW5lYXIiLFdtPSJSZXNpemVCaWxpbmVhckdyYWQiLGl1PSJSZWx1NiIsR2Q9IlJldmVyc2UiLGF1PSJSb3VuZCIsbHU9IlJzcXJ0IixVbT0iU2NhdHRlck5kIixqbT0iVGVuc29yU2NhdHRlclVwZGF0ZSIsR209IlNlYXJjaFNvcnRlZCIsSGQ9IlNlbGVjdCIsdXU9IlNlbHUiLHFkPSJTbGljZSIsY3U9IlNpbiIsZHU9IlNpbmgiLGh1PSJTaWduIixwdT0iU2lnbW9pZCIsZnU9IlNvZnRwbHVzIixtdT0iU3FydCIsS2Q9IlN1bSIsWGQ9IlNwYWNlVG9CYXRjaE5EIixZZD0iU3BsaXRWIixRZD0iU29mdG1heCIsSG09IlNwYXJzZUZpbGxFbXB0eVJvd3MiLHFtPSJTcGFyc2VSZXNoYXBlIixLbT0iU3BhcnNlU2VnbWVudE1lYW4iLFhtPSJTcGFyc2VTZWdtZW50U3VtIixZbT0iU3BhcnNlVG9EZW5zZSIsZ3U9IlNxdWFyZWREaWZmZXJlbmNlIixRbT0iU3F1YXJlIixaZD0iU3RhdGljUmVnZXhSZXBsYWNlIixabT0iU3RyaWRlZFNsaWNlIixKbT0iU3RyaW5nTkdyYW1zIixlZz0iU3RyaW5nU3BsaXQiLHRnPSJTdHJpbmdUb0hhc2hCdWNrZXRGYXN0Iix5dT0iU3ViIix4dT0iVGFuIixidT0iVGFuaCIsd3U9IlRpbGUiLG5nPSJUb3BLIixzZz0iVHJhbnNmb3JtIixlYT0iVHJhbnNwb3NlIixyZz0iVW5pcXVlIixKZD0iVW5wYWNrIixlaD0iVW5zb3J0ZWRTZWdtZW50U3VtIixjRj0iVXBwZXJCb3VuZCIsdGg9Ilplcm9zTGlrZSIsdnU9IlN0ZXAiLElmPSJGcm9tUGl4ZWxzIixvZz0iUm90YXRlV2l0aE9mZnNldCIsT2M9Il9GdXNlZE1hdE11bCIsRmM9IkZ1c2VkQ29udjJEIixMYz0iRnVzZWREZXB0aHdpc2VDb252MkQiOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIERzKC4uLm4pe29lKCkuZ2V0Qm9vbCgiSVNfVEVTVCIpfHxvZSgpLmdldEJvb2woIlBST0QiKXx8Y29uc29sZS53YXJuKC4uLm4pfWZ1bmN0aW9uIGRGKC4uLm4pe29lKCkuZ2V0Qm9vbCgiSVNfVEVTVCIpfHxvZSgpLmdldEJvb2woIlBST0QiKXx8Y29uc29sZS5sb2coLi4ubil9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgcGw9QTEoImtlcm5lbFJlZ2lzdHJ5IiwoKT0+bmV3IE1hcCksUGM9QTEoImdyYWRSZWdpc3RyeSIsKCk9Pm5ldyBNYXApO2Z1bmN0aW9uIHpjKG4sZSl7Y29uc3QgdD1fMShuLGUpO3JldHVybiBwbC5nZXQodCl9ZnVuY3Rpb24gUjAobil7cmV0dXJuIFBjLmdldChuKX1mdW5jdGlvbiBUZihuKXtjb25zdCBlPXBsLmVudHJpZXMoKSx0PVtdO2Zvcig7Oyl7Y29uc3R7ZG9uZTpzLHZhbHVlOnJ9PWUubmV4dCgpO2lmKHMpYnJlYWs7Y29uc3RbbyxpXT1yLFthXT1vLnNwbGl0KCJfIik7YT09PW4mJnQucHVzaChpKX1yZXR1cm4gdH1mdW5jdGlvbiBpZyhuKXtjb25zdHtrZXJuZWxOYW1lOmUsYmFja2VuZE5hbWU6dH09bixzPV8xKGUsdCk7cGwuaGFzKHMpJiZEcyhgVGhlIGtlcm5lbCAnJHtlfScgZm9yIGJhY2tlbmQgJyR7dH0nIGlzIGFscmVhZHkgcmVnaXN0ZXJlZGApLHBsLnNldChzLG4pfWZ1bmN0aW9uIG0kKG4pe2NvbnN0e2tlcm5lbE5hbWU6ZX09bjtQYy5oYXMoZSkmJm9lKCkuZ2V0Qm9vbCgiREVCVUciKSYmRHMoYE92ZXJyaWRpbmcgdGhlIGdyYWRpZW50IGZvciAnJHtlfSdgKSxQYy5zZXQoZSxuKX1mdW5jdGlvbiBoRihuLGUpe2NvbnN0IHQ9XzEobixlKTtpZighcGwuaGFzKHQpKXRocm93IG5ldyBFcnJvcihgVGhlIGtlcm5lbCAnJHtufScgZm9yIGJhY2tlbmQgJyR7ZX0nIGlzIG5vdCByZWdpc3RlcmVkYCk7cGwuZGVsZXRlKHQpfWZ1bmN0aW9uIHBGKG4pe2lmKCFQYy5oYXMobikpdGhyb3cgbmV3IEVycm9yKGBUaGUgZ3JhZGllbnQgJyR7bn0nIGZvciBiYWNrZW5kIGlzIG5vdCByZWdpc3RlcmVkYCk7UGMuZGVsZXRlKG4pfWZ1bmN0aW9uIGZGKG4sZSl7VGYobikuZm9yRWFjaChzPT57Y29uc3Qgcj1PYmplY3QuYXNzaWduKHt9LHMse2JhY2tlbmROYW1lOmV9KTtpZyhyKX0pfWZ1bmN0aW9uIF8xKG4sZSl7cmV0dXJuYCR7ZX1fJHtufWB9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZyQobil7cmV0dXJuIG4gaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXl8fG4gaW5zdGFuY2VvZiBJbnQzMkFycmF5fHxuIGluc3RhbmNlb2YgVWludDhBcnJheXx8biBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5fXZhciB1MCxwaztmdW5jdGlvbiBtRigpe2lmKHBrKXJldHVybiB1MDtwaz0xLHUwPWU7dmFyIG49bnVsbDt0cnl7bj1uZXcgV2ViQXNzZW1ibHkuSW5zdGFuY2UobmV3IFdlYkFzc2VtYmx5Lk1vZHVsZShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMSwxMywyLDk2LDAsMSwxMjcsOTYsNCwxMjcsMTI3LDEyNywxMjcsMSwxMjcsMyw3LDYsMCwxLDEsMSwxLDEsNiw2LDEsMTI3LDEsNjUsMCwxMSw3LDUwLDYsMywxMDksMTE3LDEwOCwwLDEsNSwxMDAsMTA1LDExOCw5NSwxMTUsMCwyLDUsMTAwLDEwNSwxMTgsOTUsMTE3LDAsMyw1LDExNCwxMDEsMTA5LDk1LDExNSwwLDQsNSwxMTQsMTAxLDEwOSw5NSwxMTcsMCw1LDgsMTAzLDEwMSwxMTYsOTUsMTA0LDEwNSwxMDMsMTA0LDAsMCwxMCwxOTEsMSw2LDQsMCwzNSwwLDExLDM2LDEsMSwxMjYsMzIsMCwxNzMsMzIsMSwxNzMsNjYsMzIsMTM0LDEzMiwzMiwyLDE3MywzMiwzLDE3Myw2NiwzMiwxMzQsMTMyLDEyNiwzNCw0LDY2LDMyLDEzNSwxNjcsMzYsMCwzMiw0LDE2NywxMSwzNiwxLDEsMTI2LDMyLDAsMTczLDMyLDEsMTczLDY2LDMyLDEzNCwxMzIsMzIsMiwxNzMsMzIsMywxNzMsNjYsMzIsMTM0LDEzMiwxMjcsMzQsNCw2NiwzMiwxMzUsMTY3LDM2LDAsMzIsNCwxNjcsMTEsMzYsMSwxLDEyNiwzMiwwLDE3MywzMiwxLDE3Myw2NiwzMiwxMzQsMTMyLDMyLDIsMTczLDMyLDMsMTczLDY2LDMyLDEzNCwxMzIsMTI4LDM0LDQsNjYsMzIsMTM1LDE2NywzNiwwLDMyLDQsMTY3LDExLDM2LDEsMSwxMjYsMzIsMCwxNzMsMzIsMSwxNzMsNjYsMzIsMTM0LDEzMiwzMiwyLDE3MywzMiwzLDE3Myw2NiwzMiwxMzQsMTMyLDEyOSwzNCw0LDY2LDMyLDEzNSwxNjcsMzYsMCwzMiw0LDE2NywxMSwzNiwxLDEsMTI2LDMyLDAsMTczLDMyLDEsMTczLDY2LDMyLDEzNCwxMzIsMzIsMiwxNzMsMzIsMywxNzMsNjYsMzIsMTM0LDEzMiwxMzAsMzQsNCw2NiwzMiwxMzUsMTY3LDM2LDAsMzIsNCwxNjcsMTFdKSkse30pLmV4cG9ydHN9Y2F0Y2h7fWZ1bmN0aW9uIGUoXyxFLE0pe3RoaXMubG93PV98MCx0aGlzLmhpZ2g9RXwwLHRoaXMudW5zaWduZWQ9ISFNfWUucHJvdG90eXBlLl9faXNMb25nX18sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJfX2lzTG9uZ19fIix7dmFsdWU6ITB9KTtmdW5jdGlvbiB0KF8pe3JldHVybihfJiZfLl9faXNMb25nX18pPT09ITB9ZS5pc0xvbmc9dDt2YXIgcz17fSxyPXt9O2Z1bmN0aW9uIG8oXyxFKXt2YXIgTSxVLFk7cmV0dXJuIEU/KF8+Pj49MCwoWT0wPD1fJiZfPDI1NikmJihVPXJbX10sVSk/VTooTT1hKF8sKF98MCk8MD8tMTowLCEwKSxZJiYocltfXT1NKSxNKSk6KF98PTAsKFk9LTEyODw9XyYmXzwxMjgpJiYoVT1zW19dLFUpP1U6KE09YShfLF88MD8tMTowLCExKSxZJiYoc1tfXT1NKSxNKSl9ZS5mcm9tSW50PW87ZnVuY3Rpb24gaShfLEUpe2lmKGlzTmFOKF8pKXJldHVybiBFP1M6djtpZihFKXtpZihfPDApcmV0dXJuIFM7aWYoXz49eSlyZXR1cm4gTH1lbHNle2lmKF88PS13KXJldHVybiB6O2lmKF8rMT49dylyZXR1cm4gRH1yZXR1cm4gXzwwP2koLV8sRSkubmVnKCk6YShfJWd8MCxfL2d8MCxFKX1lLmZyb21OdW1iZXI9aTtmdW5jdGlvbiBhKF8sRSxNKXtyZXR1cm4gbmV3IGUoXyxFLE0pfWUuZnJvbUJpdHM9YTt2YXIgbD1NYXRoLnBvdztmdW5jdGlvbiBjKF8sRSxNKXtpZihfLmxlbmd0aD09PTApdGhyb3cgRXJyb3IoImVtcHR5IHN0cmluZyIpO2lmKF89PT0iTmFOInx8Xz09PSJJbmZpbml0eSJ8fF89PT0iK0luZmluaXR5Inx8Xz09PSItSW5maW5pdHkiKXJldHVybiB2O2lmKHR5cGVvZiBFPT0ibnVtYmVyIj8oTT1FLEU9ITEpOkU9ISFFLE09TXx8MTAsTTwyfHwzNjxNKXRocm93IFJhbmdlRXJyb3IoInJhZGl4Iik7dmFyIFU7aWYoKFU9Xy5pbmRleE9mKCItIikpPjApdGhyb3cgRXJyb3IoImludGVyaW9yIGh5cGhlbiIpO2lmKFU9PT0wKXJldHVybiBjKF8uc3Vic3RyaW5nKDEpLEUsTSkubmVnKCk7Zm9yKHZhciBZPWkobChNLDgpKSxRPXYsbmU9MDtuZTxfLmxlbmd0aDtuZSs9OCl7dmFyIHNlPU1hdGgubWluKDgsXy5sZW5ndGgtbmUpLFY9cGFyc2VJbnQoXy5zdWJzdHJpbmcobmUsbmUrc2UpLE0pO2lmKHNlPDgpe3ZhciBLPWkobChNLHNlKSk7UT1RLm11bChLKS5hZGQoaShWKSl9ZWxzZSBRPVEubXVsKFkpLFE9US5hZGQoaShWKSl9cmV0dXJuIFEudW5zaWduZWQ9RSxRfWUuZnJvbVN0cmluZz1jO2Z1bmN0aW9uIGgoXyxFKXtyZXR1cm4gdHlwZW9mIF89PSJudW1iZXIiP2koXyxFKTp0eXBlb2YgXz09InN0cmluZyI/YyhfLEUpOmEoXy5sb3csXy5oaWdoLHR5cGVvZiBFPT0iYm9vbGVhbiI/RTpfLnVuc2lnbmVkKX1lLmZyb21WYWx1ZT1oO3ZhciBwPTY1NTM2LGY9MTw8MjQsZz1wKnAseT1nKmcsdz15LzIsYj1vKGYpLHY9bygwKTtlLlpFUk89djt2YXIgUz1vKDAsITApO2UuVVpFUk89Uzt2YXIgJD1vKDEpO2UuT05FPSQ7dmFyIGs9bygxLCEwKTtlLlVPTkU9azt2YXIgVD1vKC0xKTtlLk5FR19PTkU9VDt2YXIgRD1hKC0xLDIxNDc0ODM2NDcsITEpO2UuTUFYX1ZBTFVFPUQ7dmFyIEw9YSgtMSwtMSwhMCk7ZS5NQVhfVU5TSUdORURfVkFMVUU9TDt2YXIgej1hKDAsLTIxNDc0ODM2NDgsITEpO2UuTUlOX1ZBTFVFPXo7dmFyIEY9ZS5wcm90b3R5cGU7cmV0dXJuIEYudG9JbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bnNpZ25lZD90aGlzLmxvdz4+PjA6dGhpcy5sb3d9LEYudG9OdW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bnNpZ25lZD8odGhpcy5oaWdoPj4+MCkqZysodGhpcy5sb3c+Pj4wKTp0aGlzLmhpZ2gqZysodGhpcy5sb3c+Pj4wKX0sRi50b1N0cmluZz1mdW5jdGlvbihFKXtpZihFPUV8fDEwLEU8Mnx8MzY8RSl0aHJvdyBSYW5nZUVycm9yKCJyYWRpeCIpO2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuIjAiO2lmKHRoaXMuaXNOZWdhdGl2ZSgpKWlmKHRoaXMuZXEoeikpe3ZhciBNPWkoRSksVT10aGlzLmRpdihNKSxZPVUubXVsKE0pLnN1Yih0aGlzKTtyZXR1cm4gVS50b1N0cmluZyhFKStZLnRvSW50KCkudG9TdHJpbmcoRSl9ZWxzZSByZXR1cm4iLSIrdGhpcy5uZWcoKS50b1N0cmluZyhFKTtmb3IodmFyIFE9aShsKEUsNiksdGhpcy51bnNpZ25lZCksbmU9dGhpcyxzZT0iIjs7KXt2YXIgVj1uZS5kaXYoUSksSz1uZS5zdWIoVi5tdWwoUSkpLnRvSW50KCk+Pj4wLHE9Sy50b1N0cmluZyhFKTtpZihuZT1WLG5lLmlzWmVybygpKXJldHVybiBxK3NlO2Zvcig7cS5sZW5ndGg8NjspcT0iMCIrcTtzZT0iIitxK3NlfX0sRi5nZXRIaWdoQml0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhpZ2h9LEYuZ2V0SGlnaEJpdHNVbnNpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhpZ2g+Pj4wfSxGLmdldExvd0JpdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb3d9LEYuZ2V0TG93Qml0c1Vuc2lnbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG93Pj4+MH0sRi5nZXROdW1CaXRzQWJzPWZ1bmN0aW9uKCl7aWYodGhpcy5pc05lZ2F0aXZlKCkpcmV0dXJuIHRoaXMuZXEoeik/NjQ6dGhpcy5uZWcoKS5nZXROdW1CaXRzQWJzKCk7Zm9yKHZhciBFPXRoaXMuaGlnaCE9MD90aGlzLmhpZ2g6dGhpcy5sb3csTT0zMTtNPjAmJihFJjE8PE0pPT0wO00tLSk7cmV0dXJuIHRoaXMuaGlnaCE9MD9NKzMzOk0rMX0sRi5pc1plcm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaWdoPT09MCYmdGhpcy5sb3c9PT0wfSxGLmVxej1GLmlzWmVybyxGLmlzTmVnYXRpdmU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy51bnNpZ25lZCYmdGhpcy5oaWdoPDB9LEYuaXNQb3NpdGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkfHx0aGlzLmhpZ2g+PTB9LEYuaXNPZGQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5sb3cmMSk9PT0xfSxGLmlzRXZlbj1mdW5jdGlvbigpe3JldHVybih0aGlzLmxvdyYxKT09PTB9LEYuZXF1YWxzPWZ1bmN0aW9uKEUpe3JldHVybiB0KEUpfHwoRT1oKEUpKSx0aGlzLnVuc2lnbmVkIT09RS51bnNpZ25lZCYmdGhpcy5oaWdoPj4+MzE9PT0xJiZFLmhpZ2g+Pj4zMT09PTE/ITE6dGhpcy5oaWdoPT09RS5oaWdoJiZ0aGlzLmxvdz09PUUubG93fSxGLmVxPUYuZXF1YWxzLEYubm90RXF1YWxzPWZ1bmN0aW9uKEUpe3JldHVybiF0aGlzLmVxKEUpfSxGLm5lcT1GLm5vdEVxdWFscyxGLm5lPUYubm90RXF1YWxzLEYubGVzc1RoYW49ZnVuY3Rpb24oRSl7cmV0dXJuIHRoaXMuY29tcChFKTwwfSxGLmx0PUYubGVzc1RoYW4sRi5sZXNzVGhhbk9yRXF1YWw9ZnVuY3Rpb24oRSl7cmV0dXJuIHRoaXMuY29tcChFKTw9MH0sRi5sdGU9Ri5sZXNzVGhhbk9yRXF1YWwsRi5sZT1GLmxlc3NUaGFuT3JFcXVhbCxGLmdyZWF0ZXJUaGFuPWZ1bmN0aW9uKEUpe3JldHVybiB0aGlzLmNvbXAoRSk+MH0sRi5ndD1GLmdyZWF0ZXJUaGFuLEYuZ3JlYXRlclRoYW5PckVxdWFsPWZ1bmN0aW9uKEUpe3JldHVybiB0aGlzLmNvbXAoRSk+PTB9LEYuZ3RlPUYuZ3JlYXRlclRoYW5PckVxdWFsLEYuZ2U9Ri5ncmVhdGVyVGhhbk9yRXF1YWwsRi5jb21wYXJlPWZ1bmN0aW9uKEUpe2lmKHQoRSl8fChFPWgoRSkpLHRoaXMuZXEoRSkpcmV0dXJuIDA7dmFyIE09dGhpcy5pc05lZ2F0aXZlKCksVT1FLmlzTmVnYXRpdmUoKTtyZXR1cm4gTSYmIVU/LTE6IU0mJlU/MTp0aGlzLnVuc2lnbmVkP0UuaGlnaD4+PjA+dGhpcy5oaWdoPj4+MHx8RS5oaWdoPT09dGhpcy5oaWdoJiZFLmxvdz4+PjA+dGhpcy5sb3c+Pj4wPy0xOjE6dGhpcy5zdWIoRSkuaXNOZWdhdGl2ZSgpPy0xOjF9LEYuY29tcD1GLmNvbXBhcmUsRi5uZWdhdGU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy51bnNpZ25lZCYmdGhpcy5lcSh6KT96OnRoaXMubm90KCkuYWRkKCQpfSxGLm5lZz1GLm5lZ2F0ZSxGLmFkZD1mdW5jdGlvbihFKXt0KEUpfHwoRT1oKEUpKTt2YXIgTT10aGlzLmhpZ2g+Pj4xNixVPXRoaXMuaGlnaCY2NTUzNSxZPXRoaXMubG93Pj4+MTYsUT10aGlzLmxvdyY2NTUzNSxuZT1FLmhpZ2g+Pj4xNixzZT1FLmhpZ2gmNjU1MzUsVj1FLmxvdz4+PjE2LEs9RS5sb3cmNjU1MzUscT0wLEI9MCxIPTAsaWU9MDtyZXR1cm4gaWUrPVErSyxIKz1pZT4+PjE2LGllJj02NTUzNSxIKz1ZK1YsQis9SD4+PjE2LEgmPTY1NTM1LEIrPVUrc2UscSs9Qj4+PjE2LEImPTY1NTM1LHErPU0rbmUscSY9NjU1MzUsYShIPDwxNnxpZSxxPDwxNnxCLHRoaXMudW5zaWduZWQpfSxGLnN1YnRyYWN0PWZ1bmN0aW9uKEUpe3JldHVybiB0KEUpfHwoRT1oKEUpKSx0aGlzLmFkZChFLm5lZygpKX0sRi5zdWI9Ri5zdWJ0cmFjdCxGLm11bHRpcGx5PWZ1bmN0aW9uKEUpe2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuIHY7aWYodChFKXx8KEU9aChFKSksbil7dmFyIE09bi5tdWwodGhpcy5sb3csdGhpcy5oaWdoLEUubG93LEUuaGlnaCk7cmV0dXJuIGEoTSxuLmdldF9oaWdoKCksdGhpcy51bnNpZ25lZCl9aWYoRS5pc1plcm8oKSlyZXR1cm4gdjtpZih0aGlzLmVxKHopKXJldHVybiBFLmlzT2RkKCk/ejp2O2lmKEUuZXEoeikpcmV0dXJuIHRoaXMuaXNPZGQoKT96OnY7aWYodGhpcy5pc05lZ2F0aXZlKCkpcmV0dXJuIEUuaXNOZWdhdGl2ZSgpP3RoaXMubmVnKCkubXVsKEUubmVnKCkpOnRoaXMubmVnKCkubXVsKEUpLm5lZygpO2lmKEUuaXNOZWdhdGl2ZSgpKXJldHVybiB0aGlzLm11bChFLm5lZygpKS5uZWcoKTtpZih0aGlzLmx0KGIpJiZFLmx0KGIpKXJldHVybiBpKHRoaXMudG9OdW1iZXIoKSpFLnRvTnVtYmVyKCksdGhpcy51bnNpZ25lZCk7dmFyIFU9dGhpcy5oaWdoPj4+MTYsWT10aGlzLmhpZ2gmNjU1MzUsUT10aGlzLmxvdz4+PjE2LG5lPXRoaXMubG93JjY1NTM1LHNlPUUuaGlnaD4+PjE2LFY9RS5oaWdoJjY1NTM1LEs9RS5sb3c+Pj4xNixxPUUubG93JjY1NTM1LEI9MCxIPTAsaWU9MCxwZT0wO3JldHVybiBwZSs9bmUqcSxpZSs9cGU+Pj4xNixwZSY9NjU1MzUsaWUrPVEqcSxIKz1pZT4+PjE2LGllJj02NTUzNSxpZSs9bmUqSyxIKz1pZT4+PjE2LGllJj02NTUzNSxIKz1ZKnEsQis9SD4+PjE2LEgmPTY1NTM1LEgrPVEqSyxCKz1IPj4+MTYsSCY9NjU1MzUsSCs9bmUqVixCKz1IPj4+MTYsSCY9NjU1MzUsQis9VSpxK1kqSytRKlYrbmUqc2UsQiY9NjU1MzUsYShpZTw8MTZ8cGUsQjw8MTZ8SCx0aGlzLnVuc2lnbmVkKX0sRi5tdWw9Ri5tdWx0aXBseSxGLmRpdmlkZT1mdW5jdGlvbihFKXtpZih0KEUpfHwoRT1oKEUpKSxFLmlzWmVybygpKXRocm93IEVycm9yKCJkaXZpc2lvbiBieSB6ZXJvIik7aWYobil7aWYoIXRoaXMudW5zaWduZWQmJnRoaXMuaGlnaD09PS0yMTQ3NDgzNjQ4JiZFLmxvdz09PS0xJiZFLmhpZ2g9PT0tMSlyZXR1cm4gdGhpczt2YXIgTT0odGhpcy51bnNpZ25lZD9uLmRpdl91Om4uZGl2X3MpKHRoaXMubG93LHRoaXMuaGlnaCxFLmxvdyxFLmhpZ2gpO3JldHVybiBhKE0sbi5nZXRfaGlnaCgpLHRoaXMudW5zaWduZWQpfWlmKHRoaXMuaXNaZXJvKCkpcmV0dXJuIHRoaXMudW5zaWduZWQ/Uzp2O3ZhciBVLFksUTtpZih0aGlzLnVuc2lnbmVkKXtpZihFLnVuc2lnbmVkfHwoRT1FLnRvVW5zaWduZWQoKSksRS5ndCh0aGlzKSlyZXR1cm4gUztpZihFLmd0KHRoaXMuc2hydSgxKSkpcmV0dXJuIGs7UT1TfWVsc2V7aWYodGhpcy5lcSh6KSl7aWYoRS5lcSgkKXx8RS5lcShUKSlyZXR1cm4gejtpZihFLmVxKHopKXJldHVybiAkO3ZhciBuZT10aGlzLnNocigxKTtyZXR1cm4gVT1uZS5kaXYoRSkuc2hsKDEpLFUuZXEodik/RS5pc05lZ2F0aXZlKCk/JDpUOihZPXRoaXMuc3ViKEUubXVsKFUpKSxRPVUuYWRkKFkuZGl2KEUpKSxRKX1lbHNlIGlmKEUuZXEoeikpcmV0dXJuIHRoaXMudW5zaWduZWQ/Uzp2O2lmKHRoaXMuaXNOZWdhdGl2ZSgpKXJldHVybiBFLmlzTmVnYXRpdmUoKT90aGlzLm5lZygpLmRpdihFLm5lZygpKTp0aGlzLm5lZygpLmRpdihFKS5uZWcoKTtpZihFLmlzTmVnYXRpdmUoKSlyZXR1cm4gdGhpcy5kaXYoRS5uZWcoKSkubmVnKCk7UT12fWZvcihZPXRoaXM7WS5ndGUoRSk7KXtVPU1hdGgubWF4KDEsTWF0aC5mbG9vcihZLnRvTnVtYmVyKCkvRS50b051bWJlcigpKSk7Zm9yKHZhciBzZT1NYXRoLmNlaWwoTWF0aC5sb2coVSkvTWF0aC5MTjIpLFY9c2U8PTQ4PzE6bCgyLHNlLTQ4KSxLPWkoVSkscT1LLm11bChFKTtxLmlzTmVnYXRpdmUoKXx8cS5ndChZKTspVS09VixLPWkoVSx0aGlzLnVuc2lnbmVkKSxxPUsubXVsKEUpO0suaXNaZXJvKCkmJihLPSQpLFE9US5hZGQoSyksWT1ZLnN1YihxKX1yZXR1cm4gUX0sRi5kaXY9Ri5kaXZpZGUsRi5tb2R1bG89ZnVuY3Rpb24oRSl7aWYodChFKXx8KEU9aChFKSksbil7dmFyIE09KHRoaXMudW5zaWduZWQ/bi5yZW1fdTpuLnJlbV9zKSh0aGlzLmxvdyx0aGlzLmhpZ2gsRS5sb3csRS5oaWdoKTtyZXR1cm4gYShNLG4uZ2V0X2hpZ2goKSx0aGlzLnVuc2lnbmVkKX1yZXR1cm4gdGhpcy5zdWIodGhpcy5kaXYoRSkubXVsKEUpKX0sRi5tb2Q9Ri5tb2R1bG8sRi5yZW09Ri5tb2R1bG8sRi5ub3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYSh+dGhpcy5sb3csfnRoaXMuaGlnaCx0aGlzLnVuc2lnbmVkKX0sRi5hbmQ9ZnVuY3Rpb24oRSl7cmV0dXJuIHQoRSl8fChFPWgoRSkpLGEodGhpcy5sb3cmRS5sb3csdGhpcy5oaWdoJkUuaGlnaCx0aGlzLnVuc2lnbmVkKX0sRi5vcj1mdW5jdGlvbihFKXtyZXR1cm4gdChFKXx8KEU9aChFKSksYSh0aGlzLmxvd3xFLmxvdyx0aGlzLmhpZ2h8RS5oaWdoLHRoaXMudW5zaWduZWQpfSxGLnhvcj1mdW5jdGlvbihFKXtyZXR1cm4gdChFKXx8KEU9aChFKSksYSh0aGlzLmxvd15FLmxvdyx0aGlzLmhpZ2heRS5oaWdoLHRoaXMudW5zaWduZWQpfSxGLnNoaWZ0TGVmdD1mdW5jdGlvbihFKXtyZXR1cm4gdChFKSYmKEU9RS50b0ludCgpKSwoRSY9NjMpPT09MD90aGlzOkU8MzI/YSh0aGlzLmxvdzw8RSx0aGlzLmhpZ2g8PEV8dGhpcy5sb3c+Pj4zMi1FLHRoaXMudW5zaWduZWQpOmEoMCx0aGlzLmxvdzw8RS0zMix0aGlzLnVuc2lnbmVkKX0sRi5zaGw9Ri5zaGlmdExlZnQsRi5zaGlmdFJpZ2h0PWZ1bmN0aW9uKEUpe3JldHVybiB0KEUpJiYoRT1FLnRvSW50KCkpLChFJj02Myk9PT0wP3RoaXM6RTwzMj9hKHRoaXMubG93Pj4+RXx0aGlzLmhpZ2g8PDMyLUUsdGhpcy5oaWdoPj5FLHRoaXMudW5zaWduZWQpOmEodGhpcy5oaWdoPj5FLTMyLHRoaXMuaGlnaD49MD8wOi0xLHRoaXMudW5zaWduZWQpfSxGLnNocj1GLnNoaWZ0UmlnaHQsRi5zaGlmdFJpZ2h0VW5zaWduZWQ9ZnVuY3Rpb24oRSl7aWYodChFKSYmKEU9RS50b0ludCgpKSxFJj02MyxFPT09MClyZXR1cm4gdGhpczt2YXIgTT10aGlzLmhpZ2g7aWYoRTwzMil7dmFyIFU9dGhpcy5sb3c7cmV0dXJuIGEoVT4+PkV8TTw8MzItRSxNPj4+RSx0aGlzLnVuc2lnbmVkKX1lbHNlIHJldHVybiBFPT09MzI/YShNLDAsdGhpcy51bnNpZ25lZCk6YShNPj4+RS0zMiwwLHRoaXMudW5zaWduZWQpfSxGLnNocnU9Ri5zaGlmdFJpZ2h0VW5zaWduZWQsRi5zaHJfdT1GLnNoaWZ0UmlnaHRVbnNpZ25lZCxGLnRvU2lnbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5zaWduZWQ/YSh0aGlzLmxvdyx0aGlzLmhpZ2gsITEpOnRoaXN9LEYudG9VbnNpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkP3RoaXM6YSh0aGlzLmxvdyx0aGlzLmhpZ2gsITApfSxGLnRvQnl0ZXM9ZnVuY3Rpb24oRSl7cmV0dXJuIEU/dGhpcy50b0J5dGVzTEUoKTp0aGlzLnRvQnl0ZXNCRSgpfSxGLnRvQnl0ZXNMRT1mdW5jdGlvbigpe3ZhciBFPXRoaXMuaGlnaCxNPXRoaXMubG93O3JldHVybltNJjI1NSxNPj4+OCYyNTUsTT4+PjE2JjI1NSxNPj4+MjQsRSYyNTUsRT4+PjgmMjU1LEU+Pj4xNiYyNTUsRT4+PjI0XX0sRi50b0J5dGVzQkU9ZnVuY3Rpb24oKXt2YXIgRT10aGlzLmhpZ2gsTT10aGlzLmxvdztyZXR1cm5bRT4+PjI0LEU+Pj4xNiYyNTUsRT4+PjgmMjU1LEUmMjU1LE0+Pj4yNCxNPj4+MTYmMjU1LE0+Pj44JjI1NSxNJjI1NV19LGUuZnJvbUJ5dGVzPWZ1bmN0aW9uKEUsTSxVKXtyZXR1cm4gVT9lLmZyb21CeXRlc0xFKEUsTSk6ZS5mcm9tQnl0ZXNCRShFLE0pfSxlLmZyb21CeXRlc0xFPWZ1bmN0aW9uKEUsTSl7cmV0dXJuIG5ldyBlKEVbMF18RVsxXTw8OHxFWzJdPDwxNnxFWzNdPDwyNCxFWzRdfEVbNV08PDh8RVs2XTw8MTZ8RVs3XTw8MjQsTSl9LGUuZnJvbUJ5dGVzQkU9ZnVuY3Rpb24oRSxNKXtyZXR1cm4gbmV3IGUoRVs0XTw8MjR8RVs1XTw8MTZ8RVs2XTw8OHxFWzddLEVbMF08PDI0fEVbMV08PDE2fEVbMl08PDh8RVszXSxNKX0sdTB9dmFyIHkkPW1GKCk7Y29uc3QgeCQ9TjEoeSQpLGdGPUpfKHtfX3Byb3RvX186bnVsbCxkZWZhdWx0OngkfSxbeSRdKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBIaT14JHx8Z0Y7ZnVuY3Rpb24gbmgobil7cmV0dXJuIEhpLmZyb21TdHJpbmcobiwhMCwxNil9Y29uc3QgYiQ9bmgoImMzYTVjODVjOTdjYjMxMjciKSxqaT1uaCgiYjQ5MmI2NmZiZTk4ZjI3MyIpLFVuPW5oKCI5YWUxNmEzYjJmOTA0MDRmIik7ZnVuY3Rpb24gRDAobil7cmV0dXJuIG4ueG9yKG4uc2hydSg0NykpfWZ1bmN0aW9uIHckKG4sZSx0KXtjb25zdCBzPW4uc2xpY2UoZSxlK3QpO3JldHVybiBIaS5mcm9tQnl0ZXMoQXJyYXkuZnJvbShzKSwhMCwhMCl9ZnVuY3Rpb24gU3QobixlKXtyZXR1cm4gdyQobixlLDgpfWZ1bmN0aW9uIGZrKG4sZSl7cmV0dXJuIHckKG4sZSw0KX1mdW5jdGlvbiB1bihuLGUpe3JldHVybiBlPT09MD9uOm4uc2hydShlKS5vcihuLnNobCg2NC1lKSl9ZnVuY3Rpb24gdGkobixlLHQ9bmgoIjlkZGZlYTA4ZWIzODJkNjkiKSl7bGV0IHM9bi54b3IoZSkubXVsKHQpO3M9cy54b3Iocy5zaHJ1KDQ3KSk7bGV0IHI9ZS54b3IocykubXVsKHQpO3JldHVybiByPXIueG9yKHIuc2hydSg0NykpLHI9ci5tdWwodCkscn1mdW5jdGlvbiB5RihuLGUsdCxzLHIsbyl7cj1yLmFkZChuKSxvPXVuKG8uYWRkKHIpLmFkZChzKSwyMSk7Y29uc3QgaT1yO3JldHVybiByPXIuYWRkKGUpLHI9ci5hZGQodCksbz1vLmFkZCh1bihyLDQ0KSksW3IuYWRkKHMpLG8uYWRkKGkpXX1mdW5jdGlvbiBLcChuLGUsdCxzKXtyZXR1cm4geUYoU3QobixlKSxTdChuLGUrOCksU3QobixlKzE2KSxTdChuLGUrMjQpLHQscyl9ZnVuY3Rpb24geEYobixlPW4ubGVuZ3RoKXtpZihlPj04KXtjb25zdCB0PVVuLmFkZChlKjIpLHM9U3QobiwwKS5hZGQoVW4pLHI9U3QobixlLTgpLG89dW4ociwzNykubXVsKHQpLmFkZChzKSxpPXVuKHMsMjUpLmFkZChyKS5tdWwodCk7cmV0dXJuIHRpKG8saSx0KX1pZihlPj00KXtjb25zdCB0PVVuLmFkZChlKjIpLHM9ZmsobiwwKTtyZXR1cm4gdGkocy5zaGwoMykuYWRkKGUpLGZrKG4sZS00KSx0KX1pZihlPjApe2NvbnN0IHQ9blswXSxzPW5bZT4+MV0scj1uW2UtMV0sbz10KyhzPDw4KSxpPWUrKHI8PDIpO3JldHVybiBEMChVbi5tdWwobykueG9yKGIkLm11bChpKSkpLm11bChVbil9cmV0dXJuIFVufWZ1bmN0aW9uIGJGKG4sZT1uLmxlbmd0aCl7Y29uc3QgdD1Vbi5hZGQoZSoyKSxzPVN0KG4sMCkubXVsKGppKSxyPVN0KG4sOCksbz1TdChuLGUtOCkubXVsKHQpLGk9U3QobixlLTE2KS5tdWwoVW4pO3JldHVybiB0aSh1bihzLmFkZChyKSw0MykuYWRkKHVuKG8sMzApKS5hZGQoaSkscy5hZGQodW4oci5hZGQoVW4pLDE4KSkuYWRkKG8pLHQpfWZ1bmN0aW9uIHdGKG4sZT1uLmxlbmd0aCl7Y29uc3QgdD1Vbi5hZGQoZSoyKSxzPVN0KG4sMCkubXVsKFVuKSxyPVN0KG4sOCksbz1TdChuLGUtOCkubXVsKHQpLGk9U3QobixlLTE2KS5tdWwoVW4pLGE9dW4ocy5hZGQociksNDMpLmFkZCh1bihvLDMwKSkuYWRkKGkpLGw9dGkoYSxzLmFkZCh1bihyLmFkZChVbiksMTgpKS5hZGQobyksdCksYz1TdChuLDE2KS5tdWwodCksaD1TdChuLDI0KSxwPWEuYWRkKFN0KG4sZS0zMikpLm11bCh0KSxmPWwuYWRkKFN0KG4sZS0yNCkpLm11bCh0KTtyZXR1cm4gdGkodW4oYy5hZGQoaCksNDMpLmFkZCh1bihwLDMwKSkuYWRkKGYpLGMuYWRkKHVuKGguYWRkKHMpLDE4KSkuYWRkKHApLHQpfWZ1bmN0aW9uIHYkKG4sZT1uLmxlbmd0aCl7Y29uc3QgdD1IaS5mcm9tTnVtYmVyKDgxLCEwKTtpZihlPD0zMilyZXR1cm4gZTw9MTY/eEYobixlKTpiRihuLGUpO2lmKGU8PTY0KXJldHVybiB3RihuLGUpO2xldCBzPXQscj10Lm11bChqaSkuYWRkKDExMyksbz1EMChyLm11bChVbikuYWRkKDExMykpLm11bChVbiksaT1bSGkuVVpFUk8sSGkuVVpFUk9dLGE9W0hpLlVaRVJPLEhpLlVaRVJPXTtzPXMubXVsKFVuKS5hZGQoU3QobiwwKSk7bGV0IGw9MDtjb25zdCBjPShlLTE+PjYpKjY0LGg9YysoZS0xJjYzKS02MztkbyBzPXVuKHMuYWRkKHIpLmFkZChpWzBdKS5hZGQoU3QobixsKzgpKSwzNykubXVsKGppKSxyPXVuKHIuYWRkKGlbMV0pLmFkZChTdChuLGwrNDgpKSw0MikubXVsKGppKSxzPXMueG9yKGFbMV0pLHI9ci5hZGQoaVswXSkuYWRkKFN0KG4sbCs0MCkpLG89dW4oby5hZGQoYVswXSksMzMpLm11bChqaSksaT1LcChuLGwsaVsxXS5tdWwoamkpLHMuYWRkKGFbMF0pKSxhPUtwKG4sbCszMixvLmFkZChhWzFdKSxyLmFkZChTdChuLGwrMTYpKSksW28sc109W3Msb10sbCs9NjQ7d2hpbGUobCE9PWMpO2NvbnN0IHA9amkuYWRkKG8uYW5kKDI1NSkuc2hsKDEpKTtyZXR1cm4gbD1oLGFbMF09YVswXS5hZGQoZS0xJjYzKSxpWzBdPWlbMF0uYWRkKGFbMF0pLGFbMF09YVswXS5hZGQoaVswXSkscz11bihzLmFkZChyKS5hZGQoaVswXSkuYWRkKFN0KG4sbCs4KSksMzcpLm11bChwKSxyPXVuKHIuYWRkKGlbMV0pLmFkZChTdChuLGwrNDgpKSw0MikubXVsKHApLHM9cy54b3IoYVsxXS5tdWwoOSkpLHI9ci5hZGQoaVswXS5tdWwoOSkuYWRkKFN0KG4sbCs0MCkpKSxvPXVuKG8uYWRkKGFbMF0pLDMzKS5tdWwocCksaT1LcChuLGwsaVsxXS5tdWwocCkscy5hZGQoYVswXSkpLGE9S3AobixsKzMyLG8uYWRkKGFbMV0pLHIuYWRkKFN0KG4sbCsxNikpKSxbbyxzXT1bcyxvXSx0aSh0aShpWzBdLGFbMF0scCkuYWRkKEQwKHIpLm11bChiJCkpLmFkZChvKSx0aShpWzFdLGFbMV0scCkuYWRkKHMpLHApfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFNvKG4sZSl7cmV0dXJuIGU9PT0ic3RyaW5nIj9CcihuKTpnaShbbl0sZSl9ZnVuY3Rpb24gdkYobixlKXtyZXR1cm4gbiBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSYmZT09PSJmbG9hdDMyInx8biBpbnN0YW5jZW9mIEludDMyQXJyYXkmJmU9PT0iaW50MzIifHxuIGluc3RhbmNlb2YgVWludDhBcnJheSYmZT09PSJib29sIn1mdW5jdGlvbiBnaShuLGUpe2lmKGU9PT0ic3RyaW5nIil0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjb252ZXJ0IGEgc3RyaW5nW10gdG8gYSBUeXBlZEFycmF5Iik7aWYoQXJyYXkuaXNBcnJheShuKSYmKG49R3IobikpLG9lKCkuZ2V0Qm9vbCgiREVCVUciKSYmbyQobixlKSx2RihuLGUpKXJldHVybiBuO2lmKGU9PW51bGx8fGU9PT0iZmxvYXQzMiJ8fGU9PT0iY29tcGxleDY0IilyZXR1cm4gbmV3IEZsb2F0MzJBcnJheShuKTtpZihlPT09ImludDMyIilyZXR1cm4gbmV3IEludDMyQXJyYXkobik7aWYoZT09PSJib29sIil7Y29uc3QgdD1uZXcgVWludDhBcnJheShuLmxlbmd0aCk7Zm9yKGxldCBzPTA7czx0Lmxlbmd0aDsrK3MpTWF0aC5yb3VuZChuW3NdKSE9PTAmJih0W3NdPTEpO3JldHVybiB0fWVsc2UgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGRhdGEgdHlwZSAke2V9YCl9ZnVuY3Rpb24gVm4oKXtyZXR1cm4gb2UoKS5wbGF0Zm9ybS5ub3coKX1mdW5jdGlvbiBTRihuLGUpe3JldHVybiBvZSgpLnBsYXRmb3JtLmZldGNoKG4sZSl9ZnVuY3Rpb24gQnIobixlPSJ1dGYtOCIpe3JldHVybiBlPWV8fCJ1dGYtOCIsb2UoKS5wbGF0Zm9ybS5lbmNvZGUobixlKX1mdW5jdGlvbiBnbyhuLGU9InV0Zi04Iil7cmV0dXJuIGU9ZXx8InV0Zi04IixvZSgpLnBsYXRmb3JtLmRlY29kZShuLGUpfWZ1bmN0aW9uIGNuKG4pe3JldHVybiBvZSgpLnBsYXRmb3JtLmlzVHlwZWRBcnJheSE9bnVsbD9vZSgpLnBsYXRmb3JtLmlzVHlwZWRBcnJheShuKTpnJChuKX1mdW5jdGlvbiBHcihuLGU9W10sdD0hMSl7aWYoZT09bnVsbCYmKGU9W10pLHR5cGVvZiBuPT0iYm9vbGVhbiJ8fHR5cGVvZiBuPT0ibnVtYmVyInx8dHlwZW9mIG49PSJzdHJpbmcifHxpaShuKXx8bj09bnVsbHx8Y24obikmJnQpZS5wdXNoKG4pO2Vsc2UgaWYoQXJyYXkuaXNBcnJheShuKXx8Y24obikpZm9yKGxldCBzPTA7czxuLmxlbmd0aDsrK3MpR3IobltzXSxlLHQpO2Vsc2V7bGV0IHM9LTE7Zm9yKGNvbnN0IHIgb2YgT2JqZWN0LmtleXMobikpL14oWzEtOV0rWzAtOV0qfDApJC8udGVzdChyKSYmKHM9TWF0aC5tYXgocyxOdW1iZXIocikpKTtmb3IobGV0IHI9MDtyPD1zO3IrKylHcihuW3JdLGUsdCl9cmV0dXJuIGV9Y29uc3QgTkY9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGFycmF5c0VxdWFsOkplLGFycmF5c0VxdWFsV2l0aE51bGw6ciQsYXNzZXJ0OkEsYXNzZXJ0Tm9uTmVnYXRpdmVJbnRlZ2VyRGltZW5zaW9uczprcyxhc3NlcnROb25OdWxsOmJhLGFzc2VydFNoYXBlc01hdGNoOk5uLGJ5dGVzRnJvbVN0cmluZ0FycmF5OmEkLGJ5dGVzUGVyRWxlbWVudDpfYyxjaGVja0NvbnZlcnNpb25Gb3JFcnJvcnM6byQsY2xhbXA6cmksY29tcHV0ZVN0cmlkZXM6emUsY29udmVydEJhY2tlbmRWYWx1ZXNBbmRBcnJheUJ1ZmZlcjpjJCxjcmVhdGVTY2FsYXJWYWx1ZTpTbyxjcmVhdGVTaHVmZmxlZEluZGljZXM6ZUYsZGVjb2RlU3RyaW5nOmdvLGRpc3RTcXVhcmVkOlFPLGVuY29kZVN0cmluZzpCcixmZXRjaDpTRixmaW5nZXJQcmludDY0OnYkLGZsYXR0ZW46R3IsZ2V0QXJyYXlGcm9tRFR5cGU6TXQsZ2V0VHlwZWRBcnJheUZyb21EVHlwZTpobixoYXNFbmNvZGluZ0xvc3M6RTEsaGV4VG9Mb25nOm5oLGluZGV4VG9Mb2M6dmEsaW5mZXJEdHlwZTp3YSxpbmZlckZyb21JbXBsaWNpdFNoYXBlOlQxLGlzQm9vbGVhbjpsJCxpc0Z1bmN0aW9uOm9pLGlzSW50OnJhLGlzTnVtYmVyOk5mLGlzUHJvbWlzZTppaSxpc1NjYWxhclNoYXBlOlpPLGlzU3RyaW5nOnpyLGlzVHlwZWRBcnJheTpjbixpc1ZhbGlkRHR5cGU6aSQsbG9jVG9JbmRleDpicixtYWtlT25lc1R5cGVkQXJyYXk6ZW0sbWFrZVplcm9zTmVzdGVkVHlwZWRBcnJheTpSMSxtYWtlWmVyb3NUeXBlZEFycmF5OlNuLG5lYXJlc3REaXZpc29yOmtmLG5lYXJlc3RMYXJnZXJFdmVuOkpmLG5vdzpWbixwYXJzZUF4aXNQYXJhbTpRZSxyYW5kVW5pZm9ybTpZTyxyZXBlYXRlZFRyeTpFMCxyaWdodFBhZDpKaSxzaHVmZmxlOkkxLHNodWZmbGVDb21ibzpYTyxzaXplRnJvbVNoYXBlOmNlLHNpemVUb1NxdWFyaXNoU2hhcGU6U2Ysc3F1ZWV6ZVNoYXBlOnZvLHN1bTpzJCxzd2FwOnBvLHRhbmg6Sk8sdG9OZXN0ZWRBcnJheTpGcyx0b1R5cGVkQXJyYXk6Z2l9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3Mga0Z7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmJhY2tlbmRUaW1lcj1lLHRoaXMubG9nZ2VyPXQsdD09bnVsbCYmKHRoaXMubG9nZ2VyPW5ldyAkRil9cHJvZmlsZUtlcm5lbChlLHQscyl7bGV0IHI7Y29uc3Qgbz0oKT0+e3I9cygpfTtsZXQgaTtjb25zdCBhPVZuKCk7aWYodGhpcy5iYWNrZW5kVGltZXIudGltZXJBdmFpbGFibGUoKSlpPXRoaXMuYmFja2VuZFRpbWVyLnRpbWUobyk7ZWxzZXtvKCk7Zm9yKGNvbnN0IGMgb2YgciljLmRhdGFTeW5jKCk7aT1Qcm9taXNlLnJlc29sdmUoe2tlcm5lbE1zOlZuKCktYX0pfWlmKG9lKCkuZ2V0Qm9vbCgiQ0hFQ0tfQ09NUFVUQVRJT05fRk9SX0VSUk9SUyIpKWZvcihsZXQgYz0wO2M8ci5sZW5ndGg7YysrKXtjb25zdCBoPXJbY107aC5kYXRhKCkudGhlbihwPT57Q0YocCxoLmR0eXBlLGUpfSl9cmV0dXJue2tlcm5lbE5hbWU6ZSxvdXRwdXRzOnIsaW5wdXRzOnQsdGltZU1zOmkudGhlbihjPT5jLmtlcm5lbE1zKSxleHRyYUluZm86aS50aGVuKGM9PmMuZ2V0RXh0cmFQcm9maWxlSW5mbyE9bnVsbD9jLmdldEV4dHJhUHJvZmlsZUluZm8oKToiIil9fWxvZ0tlcm5lbFByb2ZpbGUoZSl7Y29uc3R7a2VybmVsTmFtZTp0LG91dHB1dHM6cyx0aW1lTXM6cixpbnB1dHM6byxleHRyYUluZm86aX09ZTtzLmZvckVhY2goYT0+e1Byb21pc2UuYWxsKFthLmRhdGEoKSxyLGldKS50aGVuKGw9Pnt0aGlzLmxvZ2dlci5sb2dLZXJuZWxQcm9maWxlKHQsYSxsWzBdLGxbMV0sbyxsWzJdKX0pfSl9fWZ1bmN0aW9uIENGKG4sZSx0KXtpZihlIT09ImZsb2F0MzIiKXJldHVybiExO2ZvcihsZXQgcz0wO3M8bi5sZW5ndGg7cysrKXtjb25zdCByPW5bc107aWYoaXNOYU4ocil8fCFpc0Zpbml0ZShyKSlyZXR1cm4gY29uc29sZS53YXJuKGBGb3VuZCAke3J9IGluIHRoZSByZXN1bHQgb2YgJyR7dH0nYCksITB9cmV0dXJuITF9Y2xhc3MgJEZ7bG9nS2VybmVsUHJvZmlsZShlLHQscyxyLG8saSl7Y29uc3QgYT10eXBlb2Ygcj09Im51bWJlciI/SmkoYCR7cn1tc2AsOSk6ci5lcnJvcixsPUppKGUsMjUpLGM9dC5yYW5rLGg9dC5zaXplLHA9SmkodC5zaGFwZS50b1N0cmluZygpLDE0KTtsZXQgZj0iIjtmb3IoY29uc3QgZyBpbiBvKXtjb25zdCB5PW9bZ107aWYoeSE9bnVsbCl7Y29uc3Qgdz15LnNoYXBlfHx0LnNoYXBlLGI9dy5sZW5ndGg7Zis9YCR7Z306ICR7Yn1EICR7Yj4wP3c6IiJ9IGB9fWNvbnNvbGUubG9nKGAlYyR7bH0JJWMke2F9CSVjJHtjfUQgJHtwfQklYyR7aH0JJWMke2Z9CSVjJHtpfWAsImZvbnQtd2VpZ2h0OmJvbGQiLCJjb2xvcjpyZWQiLCJjb2xvcjpibHVlIiwiY29sb3I6IG9yYW5nZSIsImNvbG9yOiBncmVlbiIsImNvbG9yOiBzdGVlbGJsdWUiKX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gSUYobixlLHQpe2NvbnN0IHM9e30scj17fTtmb3IobGV0IGw9MDtsPGUubGVuZ3RoO2wrKylzW2VbbF0uaWRdPSEwO2ZvcihsZXQgbD0wO2w8bi5sZW5ndGg7bCsrKXtjb25zdCBjPW5bbF0saD1jLmlucHV0cztmb3IoY29uc3QgcCBpbiBoKXtjb25zdCBmPWhbcF07bGV0IGc9ITE7Zm9yKGxldCB5PTA7eTxlLmxlbmd0aDt5KyspaWYoc1tmLmlkXSl7Yy5vdXRwdXRzLmZvckVhY2godz0+c1t3LmlkXT0hMCksZz0hMCxyW2MuaWRdPSEwO2JyZWFrfWlmKGcpYnJlYWt9fWNvbnN0IG89e307b1t0LmlkXT0hMDtjb25zdCBpPXt9O2ZvcihsZXQgbD1uLmxlbmd0aC0xO2w+PTA7bC0tKXtjb25zdCBjPW5bbF0saD1jLmlucHV0cztmb3IobGV0IHA9MDtwPGMub3V0cHV0cy5sZW5ndGg7cCsrKWlmKG9bYy5vdXRwdXRzW3BdLmlkXSl7Zm9yKGNvbnN0IGYgaW4gaClvW2hbZl0uaWRdPSEwLGlbYy5pZF09ITA7YnJlYWt9fWNvbnN0IGE9W107Zm9yKGxldCBsPTA7bDxuLmxlbmd0aDtsKyspe2NvbnN0IGM9bltsXTtpZihyW2MuaWRdJiZpW2MuaWRdKXtjb25zdCBoPXt9O2Zvcihjb25zdCBmIGluIGMuaW5wdXRzKXtjb25zdCBnPWMuaW5wdXRzW2ZdO3NbZy5pZF0mJihoW2ZdPWcpfWNvbnN0IHA9T2JqZWN0LmFzc2lnbih7fSxjKTtwLmlucHV0cz1oLHAub3V0cHV0cz1jLm91dHB1dHMsYS5wdXNoKHApfX1yZXR1cm4gYX1mdW5jdGlvbiBURihuLGUsdCxzKXtmb3IobGV0IHI9ZS5sZW5ndGgtMTtyPj0wO3ItLSl7Y29uc3Qgbz1lW3JdLGk9W107aWYoby5vdXRwdXRzLmZvckVhY2gobD0+e2NvbnN0IGM9bltsLmlkXTtjIT1udWxsP2kucHVzaChjKTppLnB1c2gobnVsbCl9KSxvLmdyYWRpZW50PT1udWxsKXRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbXB1dGUgZ3JhZGllbnQ6IGdyYWRpZW50IGZ1bmN0aW9uIG5vdCBmb3VuZCBmb3IgJHtvLmtlcm5lbE5hbWV9LmApO2NvbnN0IGE9by5ncmFkaWVudChpKTtmb3IoY29uc3QgbCBpbiBvLmlucHV0cyl7aWYoIShsIGluIGEpKXRocm93IG5ldyBFcnJvcihgQ2Fubm90IGJhY2twcm9wIHRocm91Z2ggaW5wdXQgJHtsfS4gQXZhaWxhYmxlIGdyYWRpZW50cyBmb3VuZDogJHtPYmplY3Qua2V5cyhhKX0uYCk7Y29uc3QgYz10KCgpPT5hW2xdKCkpO2lmKGMuZHR5cGUhPT0iZmxvYXQzMiIpdGhyb3cgbmV3IEVycm9yKGBFcnJvciBpbiBncmFkaWVudCBmb3Igb3AgJHtvLmtlcm5lbE5hbWV9LiBUaGUgZ3JhZGllbnQgb2YgaW5wdXQgJHtsfSBtdXN0IGhhdmUgJ2Zsb2F0MzInIGR0eXBlLCBidXQgaGFzICcke2MuZHR5cGV9J2ApO2NvbnN0IGg9by5pbnB1dHNbbF07aWYoIUplKGMuc2hhcGUsaC5zaGFwZSkpdGhyb3cgbmV3IEVycm9yKGBFcnJvciBpbiBncmFkaWVudCBmb3Igb3AgJHtvLmtlcm5lbE5hbWV9LiBUaGUgZ3JhZGllbnQgb2YgaW5wdXQgJyR7bH0nIGhhcyBzaGFwZSAnJHtjLnNoYXBlfScsIHdoaWNoIGRvZXMgbm90IG1hdGNoIHRoZSBzaGFwZSBvZiB0aGUgaW5wdXQgJyR7aC5zaGFwZX0nYCk7aWYobltoLmlkXT09bnVsbCluW2guaWRdPWM7ZWxzZXtjb25zdCBwPW5baC5pZF07bltoLmlkXT1zKHAsYykscC5kaXNwb3NlKCl9fX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgbWs9MjAsdmM9MyxjMD03O2Z1bmN0aW9uIEVGKG4sZSx0LHMpe2NvbnN0IHI9emUoZSksbz1SRihuLGUsdCxyKSxpPWUubGVuZ3RoLGE9ZGYobixlLHQscixvKSxsPVsiVGVuc29yIl07cmV0dXJuIHMmJihsLnB1c2goYCAgZHR5cGU6ICR7dH1gKSxsLnB1c2goYCAgcmFuazogJHtpfWApLGwucHVzaChgICBzaGFwZTogWyR7ZX1dYCksbC5wdXNoKCIgIHZhbHVlczoiKSksbC5wdXNoKGEubWFwKGM9PiIgICAgIitjKS5qb2luKGAKYCkpLGwuam9pbihgCmApfWZ1bmN0aW9uIFJGKG4sZSx0LHMpe2NvbnN0IHI9Y2UoZSksbz1zW3MubGVuZ3RoLTFdLGk9bmV3IEFycmF5KG8pLmZpbGwoMCksYT1lLmxlbmd0aCxsPXQ9PT0iY29tcGxleDY0Ij8kYyhuKTpuO2lmKGE+MSlmb3IobGV0IGM9MDtjPHIvbztjKyspe2NvbnN0IGg9YypvO2ZvcihsZXQgcD0wO3A8bztwKyspaVtwXT1NYXRoLm1heChpW3BdLENjKGxbaCtwXSwwLHQpLmxlbmd0aCl9cmV0dXJuIGl9ZnVuY3Rpb24gQ2MobixlLHQpe2xldCBzO3JldHVybiBBcnJheS5pc0FycmF5KG4pP3M9YCR7cGFyc2VGbG9hdChuWzBdLnRvRml4ZWQoYzApKX0gKyAke3BhcnNlRmxvYXQoblsxXS50b0ZpeGVkKGMwKSl9amA6enIobik/cz1gJyR7bn0nYDp0PT09ImJvb2wiP3M9UyQobik6cz1wYXJzZUZsb2F0KG4udG9GaXhlZChjMCkpLnRvU3RyaW5nKCksSmkocyxlKX1mdW5jdGlvbiBTJChuKXtyZXR1cm4gbj09PTA/ImZhbHNlIjoidHJ1ZSJ9ZnVuY3Rpb24gZGYobixlLHQscyxyLG89ITApe2NvbnN0IGk9dD09PSJjb21wbGV4NjQiPzI6MSxhPWVbMF0sbD1lLmxlbmd0aDtpZihsPT09MCl7aWYodD09PSJjb21wbGV4NjQiKXtjb25zdCB3PSRjKG4pO3JldHVybltDYyh3WzBdLDAsdCldfXJldHVybiB0PT09ImJvb2wiP1tTJChuWzBdKV06W25bMF0udG9TdHJpbmcoKV19aWYobD09PTEpe2lmKGE+bWspe2NvbnN0IGI9dmMqaTtsZXQgdj1BcnJheS5mcm9tKG4uc2xpY2UoMCxiKSksUz1BcnJheS5mcm9tKG4uc2xpY2UoKGEtdmMpKmksYSppKSk7cmV0dXJuIHQ9PT0iY29tcGxleDY0IiYmKHY9JGModiksUz0kYyhTKSksWyJbIit2Lm1hcCgoJCxrKT0+Q2MoJCxyW2tdLHQpKS5qb2luKCIsICIpKyIsIC4uLiwgIitTLm1hcCgoJCxrKT0+Q2MoJCxyW2EtdmMra10sdCkpLmpvaW4oIiwgIikrIl0iXX1yZXR1cm5bIlsiKyh0PT09ImNvbXBsZXg2NCI/JGMobik6QXJyYXkuZnJvbShuKSkubWFwKChiLHYpPT5DYyhiLHJbdl0sdCkpLmpvaW4oIiwgIikrIl0iXX1jb25zdCBjPWUuc2xpY2UoMSksaD1zLnNsaWNlKDEpLHA9c1swXSppLGY9W107aWYoYT5tayl7Zm9yKGxldCB3PTA7dzx2Yzt3Kyspe2NvbnN0IGI9dypwLHY9YitwO2YucHVzaCguLi5kZihuLnNsaWNlKGIsdiksYyx0LGgsciwhMSkpfWYucHVzaCgiLi4uIik7Zm9yKGxldCB3PWEtdmM7dzxhO3crKyl7Y29uc3QgYj13KnAsdj1iK3A7Zi5wdXNoKC4uLmRmKG4uc2xpY2UoYix2KSxjLHQsaCxyLHc9PT1hLTEpKX19ZWxzZSBmb3IobGV0IHc9MDt3PGE7dysrKXtjb25zdCBiPXcqcCx2PWIrcDtmLnB1c2goLi4uZGYobi5zbGljZShiLHYpLGMsdCxoLHIsdz09PWEtMSkpfWNvbnN0IGc9bD09PTI/IiwiOiIiO2ZbMF09IlsiKyhhPjA/ZlswXStnOiIiKTtmb3IobGV0IHc9MTt3PGYubGVuZ3RoLTE7dysrKWZbd109IiAiK2Zbd10rZztsZXQgeT1gLApgO2ZvcihsZXQgdz0yO3c8bDt3KyspeSs9YApgO3JldHVybiBmW2YubGVuZ3RoLTFdPSIgIitmW2YubGVuZ3RoLTFdKyJdIisobz8iIjp5KSxmfWZ1bmN0aW9uICRjKG4pe2NvbnN0IGU9W107Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDt0Kz0yKWUucHVzaChbblt0XSxuW3QrMV1dKTtyZXR1cm4gZX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBRdHtjb25zdHJ1Y3RvcihlLHQscyl7aWYodGhpcy5kdHlwZT10LHRoaXMuc2hhcGU9ZS5zbGljZSgpLHRoaXMuc2l6ZT1jZShlKSxzIT1udWxsKXtjb25zdCByPXMubGVuZ3RoO0Eocj09PXRoaXMuc2l6ZSwoKT0+YExlbmd0aCBvZiB2YWx1ZXMgJyR7cn0nIGRvZXMgbm90IG1hdGNoIHRoZSBzaXplIGluZmVycmVkIGJ5IHRoZSBzaGFwZSAnJHt0aGlzLnNpemV9Jy5gKX1pZih0PT09ImNvbXBsZXg2NCIpdGhyb3cgbmV3IEVycm9yKCJjb21wbGV4NjQgZHR5cGUgVGVuc29yQnVmZmVycyBhcmUgbm90IHN1cHBvcnRlZC4gUGxlYXNlIGNyZWF0ZSBhIFRlbnNvckJ1ZmZlciBmb3IgdGhlIHJlYWwgYW5kIGltYWdpbmFyeSBwYXJ0cyBzZXBhcmF0ZWx5IGFuZCBjYWxsIHRmLmNvbXBsZXgocmVhbCwgaW1hZykuIik7dGhpcy52YWx1ZXM9c3x8TXQodCx0aGlzLnNpemUpLHRoaXMuc3RyaWRlcz16ZShlKX1zZXQoZSwuLi50KXt0Lmxlbmd0aD09PTAmJih0PVswXSksQSh0Lmxlbmd0aD09PXRoaXMucmFuaywoKT0+YFRoZSBudW1iZXIgb2YgcHJvdmlkZWQgY29vcmRpbmF0ZXMgKCR7dC5sZW5ndGh9KSBtdXN0IG1hdGNoIHRoZSByYW5rICgke3RoaXMucmFua30pYCk7Y29uc3Qgcz10aGlzLmxvY1RvSW5kZXgodCk7dGhpcy52YWx1ZXNbc109ZX1nZXQoLi4uZSl7ZS5sZW5ndGg9PT0wJiYoZT1bMF0pO2xldCB0PTA7Zm9yKGNvbnN0IHIgb2YgZSl7aWYocjwwfHxyPj10aGlzLnNoYXBlW3RdKXtjb25zdCBvPWBSZXF1ZXN0ZWQgb3V0IG9mIHJhbmdlIGVsZW1lbnQgYXQgJHtlfS4gICBCdWZmZXIgc2hhcGU9JHt0aGlzLnNoYXBlfWA7dGhyb3cgbmV3IEVycm9yKG8pfXQrK31sZXQgcz1lW2UubGVuZ3RoLTFdO2ZvcihsZXQgcj0wO3I8ZS5sZW5ndGgtMTsrK3Ipcys9dGhpcy5zdHJpZGVzW3JdKmVbcl07cmV0dXJuIHRoaXMudmFsdWVzW3NdfWxvY1RvSW5kZXgoZSl7aWYodGhpcy5yYW5rPT09MClyZXR1cm4gMDtpZih0aGlzLnJhbms9PT0xKXJldHVybiBlWzBdO2xldCB0PWVbZS5sZW5ndGgtMV07Zm9yKGxldCBzPTA7czxlLmxlbmd0aC0xOysrcyl0Kz10aGlzLnN0cmlkZXNbc10qZVtzXTtyZXR1cm4gdH1pbmRleFRvTG9jKGUpe2lmKHRoaXMucmFuaz09PTApcmV0dXJuW107aWYodGhpcy5yYW5rPT09MSlyZXR1cm5bZV07Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5zaGFwZS5sZW5ndGgpO2ZvcihsZXQgcz0wO3M8dC5sZW5ndGgtMTsrK3MpdFtzXT1NYXRoLmZsb29yKGUvdGhpcy5zdHJpZGVzW3NdKSxlLT10W3NdKnRoaXMuc3RyaWRlc1tzXTtyZXR1cm4gdFt0Lmxlbmd0aC0xXT1lLHR9Z2V0IHJhbmsoKXtyZXR1cm4gdGhpcy5zaGFwZS5sZW5ndGh9dG9UZW5zb3IoKXtyZXR1cm4gZ3IoKS5tYWtlVGVuc29yKHRoaXMudmFsdWVzLHRoaXMuc2hhcGUsdGhpcy5kdHlwZSl9fWxldCBncj1udWxsLG9sPW51bGw7ZnVuY3Rpb24gREYobil7Z3I9bn1mdW5jdGlvbiBBRihuKXtvbD1ufWNsYXNzIGR0e2NvbnN0cnVjdG9yKGUsdCxzLHIpe3RoaXMua2VwdD0hMSx0aGlzLmlzRGlzcG9zZWRJbnRlcm5hbD0hMSx0aGlzLnNoYXBlPWUuc2xpY2UoKSx0aGlzLmR0eXBlPXR8fCJmbG9hdDMyIix0aGlzLnNpemU9Y2UoZSksdGhpcy5zdHJpZGVzPXplKGUpLHRoaXMuZGF0YUlkPXMsdGhpcy5pZD1yLHRoaXMucmFua1R5cGU9dGhpcy5yYW5rPDU/dGhpcy5yYW5rLnRvU3RyaW5nKCk6ImhpZ2hlciJ9Z2V0IHJhbmsoKXtyZXR1cm4gdGhpcy5zaGFwZS5sZW5ndGh9YXN5bmMgYnVmZmVyKCl7Y29uc3QgZT1hd2FpdCB0aGlzLmRhdGEoKTtyZXR1cm4gb2wuYnVmZmVyKHRoaXMuc2hhcGUsdGhpcy5kdHlwZSxlKX1idWZmZXJTeW5jKCl7cmV0dXJuIG9sLmJ1ZmZlcih0aGlzLnNoYXBlLHRoaXMuZHR5cGUsdGhpcy5kYXRhU3luYygpKX1hc3luYyBhcnJheSgpe2NvbnN0IGU9YXdhaXQgdGhpcy5kYXRhKCk7cmV0dXJuIEZzKHRoaXMuc2hhcGUsZSx0aGlzLmR0eXBlPT09ImNvbXBsZXg2NCIpfWFycmF5U3luYygpe3JldHVybiBGcyh0aGlzLnNoYXBlLHRoaXMuZGF0YVN5bmMoKSx0aGlzLmR0eXBlPT09ImNvbXBsZXg2NCIpfWFzeW5jIGRhdGEoKXt0aGlzLnRocm93SWZEaXNwb3NlZCgpO2NvbnN0IGU9Z3IoKS5yZWFkKHRoaXMuZGF0YUlkKTtpZih0aGlzLmR0eXBlPT09InN0cmluZyIpe2NvbnN0IHQ9YXdhaXQgZTt0cnl7cmV0dXJuIHQubWFwKHM9PmdvKHMpKX1jYXRjaHt0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBkZWNvZGUgdGhlIHN0cmluZyBieXRlcyBpbnRvIHV0Zi04LiBUbyBnZXQgdGhlIG9yaWdpbmFsIGJ5dGVzLCBjYWxsIHRlbnNvci5ieXRlcygpLiIpfX1yZXR1cm4gZX1kYXRhVG9HUFUoZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksZ3IoKS5yZWFkVG9HUFUodGhpcy5kYXRhSWQsZSl9ZGF0YVN5bmMoKXt0aGlzLnRocm93SWZEaXNwb3NlZCgpO2NvbnN0IGU9Z3IoKS5yZWFkU3luYyh0aGlzLmRhdGFJZCk7aWYodGhpcy5kdHlwZT09PSJzdHJpbmciKXRyeXtyZXR1cm4gZS5tYXAodD0+Z28odCkpfWNhdGNoe3Rocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGRlY29kZSB0aGUgc3RyaW5nIGJ5dGVzIGludG8gdXRmLTguIFRvIGdldCB0aGUgb3JpZ2luYWwgYnl0ZXMsIGNhbGwgdGVuc29yLmJ5dGVzKCkuIil9cmV0dXJuIGV9YXN5bmMgYnl0ZXMoKXt0aGlzLnRocm93SWZEaXNwb3NlZCgpO2NvbnN0IGU9YXdhaXQgZ3IoKS5yZWFkKHRoaXMuZGF0YUlkKTtyZXR1cm4gdGhpcy5kdHlwZT09PSJzdHJpbmciP2U6bmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIpfWRpc3Bvc2UoKXt0aGlzLmlzRGlzcG9zZWR8fCh0aGlzLmtlcmFzTWFzayYmdGhpcy5rZXJhc01hc2suZGlzcG9zZSgpLGdyKCkuZGlzcG9zZVRlbnNvcih0aGlzKSx0aGlzLmlzRGlzcG9zZWRJbnRlcm5hbD0hMCl9Z2V0IGlzRGlzcG9zZWQoKXtyZXR1cm4gdGhpcy5pc0Rpc3Bvc2VkSW50ZXJuYWx9dGhyb3dJZkRpc3Bvc2VkKCl7aWYodGhpcy5pc0Rpc3Bvc2VkKXRocm93IG5ldyBFcnJvcigiVGVuc29yIGlzIGRpc3Bvc2VkLiIpfXByaW50KGU9ITEpe3JldHVybiBvbC5wcmludCh0aGlzLGUpfWNsb25lKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksb2wuY2xvbmUodGhpcyl9dG9TdHJpbmcoZT0hMSl7Y29uc3QgdD10aGlzLmRhdGFTeW5jKCk7cmV0dXJuIEVGKHQsdGhpcy5zaGFwZSx0aGlzLmR0eXBlLGUpfWNhc3QoZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksb2wuY2FzdCh0aGlzLGUpfXZhcmlhYmxlKGU9ITAsdCxzKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxncigpLm1ha2VWYXJpYWJsZSh0aGlzLGUsdCxzKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KGR0LFN5bWJvbC5oYXNJbnN0YW5jZSx7dmFsdWU6bj0+ISFuJiZuLmRhdGEhPW51bGwmJm4uZGF0YVN5bmMhPW51bGwmJm4udGhyb3dJZkRpc3Bvc2VkIT1udWxsfSk7ZnVuY3Rpb24gaGUoKXtyZXR1cm4gQTEoIlRlbnNvciIsKCk9PmR0KX1oZSgpO2NsYXNzIE1jIGV4dGVuZHMgZHR7Y29uc3RydWN0b3IoZSx0LHMscil7c3VwZXIoZS5zaGFwZSxlLmR0eXBlLGUuZGF0YUlkLHIpLHRoaXMudHJhaW5hYmxlPXQsdGhpcy5uYW1lPXN9YXNzaWduKGUpe2lmKGUuZHR5cGUhPT10aGlzLmR0eXBlKXRocm93IG5ldyBFcnJvcihgZHR5cGUgb2YgdGhlIG5ldyB2YWx1ZSAoJHtlLmR0eXBlfSkgYW5kIHByZXZpb3VzIHZhbHVlICgke3RoaXMuZHR5cGV9KSBtdXN0IG1hdGNoYCk7aWYoIUplKGUuc2hhcGUsdGhpcy5zaGFwZSkpdGhyb3cgbmV3IEVycm9yKGBzaGFwZSBvZiB0aGUgbmV3IHZhbHVlICgke2Uuc2hhcGV9KSBhbmQgcHJldmlvdXMgdmFsdWUgKCR7dGhpcy5zaGFwZX0pIG11c3QgbWF0Y2hgKTtncigpLmRpc3Bvc2VUZW5zb3IodGhpcyksdGhpcy5kYXRhSWQ9ZS5kYXRhSWQsZ3IoKS5pbmNSZWYodGhpcyxudWxsKX1kaXNwb3NlKCl7Z3IoKS5kaXNwb3NlVmFyaWFibGUodGhpcyksdGhpcy5pc0Rpc3Bvc2VkSW50ZXJuYWw9ITB9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYyxTeW1ib2wuaGFzSW5zdGFuY2Use3ZhbHVlOm49Pm4gaW5zdGFuY2VvZiBkdCYmbi5hc3NpZ24hPW51bGwmJm4uYXNzaWduIGluc3RhbmNlb2YgRnVuY3Rpb259KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi92YXIgQTA7KGZ1bmN0aW9uKG4pe24uUjA9IlIwIixuLlIxPSJSMSIsbi5SMj0iUjIiLG4uUjM9IlIzIixuLlI0PSJSNCIsbi5SNT0iUjUiLG4uUjY9IlI2In0pKEEwfHwoQTA9e30pKTt2YXIgXzA7KGZ1bmN0aW9uKG4pe24uZmxvYXQzMj0iZmxvYXQzMiIsbi5pbnQzMj0iaW50MzIiLG4uYm9vbD0iaW50MzIiLG4uY29tcGxleDY0PSJjb21wbGV4NjQifSkoXzB8fChfMD17fSkpO3ZhciBPMDsoZnVuY3Rpb24obil7bi5mbG9hdDMyPSJmbG9hdDMyIixuLmludDMyPSJpbnQzMiIsbi5ib29sPSJib29sIixuLmNvbXBsZXg2ND0iY29tcGxleDY0In0pKE8wfHwoTzA9e30pKTt2YXIgRjA7KGZ1bmN0aW9uKG4pe24uZmxvYXQzMj0iZmxvYXQzMiIsbi5pbnQzMj0iZmxvYXQzMiIsbi5ib29sPSJmbG9hdDMyIixuLmNvbXBsZXg2ND0iY29tcGxleDY0In0pKEYwfHwoRjA9e30pKTt2YXIgTDA7KGZ1bmN0aW9uKG4pe24uZmxvYXQzMj0iY29tcGxleDY0IixuLmludDMyPSJjb21wbGV4NjQiLG4uYm9vbD0iY29tcGxleDY0IixuLmNvbXBsZXg2ND0iY29tcGxleDY0In0pKEwwfHwoTDA9e30pKTtjb25zdCBfRj17ZmxvYXQzMjpGMCxpbnQzMjpfMCxib29sOk8wLGNvbXBsZXg2NDpMMH07ZnVuY3Rpb24gdHMobixlKXtpZihuPT09InN0cmluZyJ8fGU9PT0ic3RyaW5nIil7aWYobj09PSJzdHJpbmciJiZlPT09InN0cmluZyIpcmV0dXJuInN0cmluZyI7dGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IHVwY2FzdCAke259IHdpdGggJHtlfWApfXJldHVybiBfRltuXVtlXX1mdW5jdGlvbiBhZyhuKXtyZXR1cm4gdHMobiwiaW50MzIiKX1mdW5jdGlvbiBOJChuKXtyZXR1cm4gbiE9bnVsbCYmdHlwZW9mIG49PSJvYmplY3QiJiYidGV4dHVyZSJpbiBuJiZuLnRleHR1cmUgaW5zdGFuY2VvZiBXZWJHTFRleHR1cmV9ZnVuY3Rpb24gayQobil7cmV0dXJuIHR5cGVvZiBHUFVCdWZmZXI8InUiJiZuIT1udWxsJiZ0eXBlb2Ygbj09Im9iamVjdCImJiJidWZmZXIiaW4gbiYmbi5idWZmZXIgaW5zdGFuY2VvZiBHUFVCdWZmZXJ9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gRnQobixlKXtpZihuLmR0eXBlPT09ZS5kdHlwZSlyZXR1cm5bbixlXTtjb25zdCB0PXRzKG4uZHR5cGUsZS5kdHlwZSk7cmV0dXJuW24uY2FzdCh0KSxlLmNhc3QodCldfWZ1bmN0aW9uIEMkKG4sZSl7QShuLmR0eXBlPT09ZS5kdHlwZSwoKT0+YFRoZSBkdHlwZXMgb2YgdGhlIGZpcnN0KCR7bi5kdHlwZX0pIGFuZCBzZWNvbmQoJHtlLmR0eXBlfSkgaW5wdXQgbXVzdCBtYXRjaGApfWZ1bmN0aW9uIE9GKG4sZSl7cmV0dXJuIGUuc29tZSh0PT50LmlkPT09bi5pZCl9ZnVuY3Rpb24gTzEobil7Y29uc3QgZT1bXTtyZXR1cm4gJCQobixlLG5ldyBTZXQpLGV9ZnVuY3Rpb24gJCQobixlLHQpe2lmKG49PW51bGwpcmV0dXJuO2lmKG4gaW5zdGFuY2VvZiBkdCl7ZS5wdXNoKG4pO3JldHVybn1pZighRkYobikpcmV0dXJuO2NvbnN0IHM9bjtmb3IoY29uc3QgciBpbiBzKXtjb25zdCBvPXNbcl07dC5oYXMobyl8fCh0LmFkZChvKSwkJChvLGUsdCkpfX1mdW5jdGlvbiBGRihuKXtyZXR1cm4gQXJyYXkuaXNBcnJheShuKXx8dHlwZW9mIG49PSJvYmplY3QifWNvbnN0IExGPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxhc3NlcnRUeXBlc01hdGNoOkMkLGdldFRlbnNvcnNJbkNvbnRhaW5lcjpPMSxpc1RlbnNvckluTGlzdDpPRixtYWtlVHlwZXNNYXRjaDpGdH0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBkMChuKXtyZXR1cm4gbi5rZXJuZWxOYW1lIT1udWxsfWNsYXNzIGdre2NvbnN0cnVjdG9yKCl7dGhpcy5yZWdpc3RlcmVkVmFyaWFibGVzPXt9LHRoaXMubmV4dFRhcGVOb2RlSWQ9MCx0aGlzLm51bUJ5dGVzPTAsdGhpcy5udW1UZW5zb3JzPTAsdGhpcy5udW1TdHJpbmdUZW5zb3JzPTAsdGhpcy5udW1EYXRhQnVmZmVycz0wLHRoaXMuZ3JhZGllbnREZXB0aD0wLHRoaXMua2VybmVsRGVwdGg9MCx0aGlzLnNjb3BlU3RhY2s9W10sdGhpcy5udW1EYXRhTW92ZXNTdGFjaz1bXSx0aGlzLm5leHRTY29wZUlkPTAsdGhpcy50ZW5zb3JJbmZvPW5ldyBXZWFrTWFwLHRoaXMucHJvZmlsaW5nPSExLHRoaXMuYWN0aXZlUHJvZmlsZT17bmV3Qnl0ZXM6MCxuZXdUZW5zb3JzOjAscGVha0J5dGVzOjAsa2VybmVsczpbXSxyZXN1bHQ6bnVsbCxnZXQga2VybmVsTmFtZXMoKXtyZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KHRoaXMua2VybmVscy5tYXAoZT0+ZS5uYW1lKSkpfX19ZGlzcG9zZSgpe2Zvcihjb25zdCBlIGluIHRoaXMucmVnaXN0ZXJlZFZhcmlhYmxlcyl0aGlzLnJlZ2lzdGVyZWRWYXJpYWJsZXNbZV0uZGlzcG9zZSgpfX1jbGFzcyBmbHtjb25zdHJ1Y3RvcihlKXt0aGlzLkVOVj1lLHRoaXMucmVnaXN0cnk9e30sdGhpcy5yZWdpc3RyeUZhY3Rvcnk9e30sdGhpcy5wZW5kaW5nQmFja2VuZEluaXRJZD0wLHRoaXMuc3RhdGU9bmV3IGdrfWFzeW5jIHJlYWR5KCl7aWYodGhpcy5wZW5kaW5nQmFja2VuZEluaXQhPW51bGwpcmV0dXJuIHRoaXMucGVuZGluZ0JhY2tlbmRJbml0LnRoZW4oKCk9Pnt9KTtpZih0aGlzLmJhY2tlbmRJbnN0YW5jZSE9bnVsbClyZXR1cm47Y29uc3QgZT10aGlzLmdldFNvcnRlZEJhY2tlbmRzKCk7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IHM9ZVt0XTtpZihhd2FpdCB0aGlzLmluaXRpYWxpemVCYWNrZW5kKHMpLnN1Y2Nlc3Mpe2F3YWl0IHRoaXMuc2V0QmFja2VuZChzKTtyZXR1cm59fXRocm93IG5ldyBFcnJvcigiQ291bGQgbm90IGluaXRpYWxpemUgYW55IGJhY2tlbmRzLCBhbGwgYmFja2VuZCBpbml0aWFsaXphdGlvbnMgZmFpbGVkLiIpfWdldCBiYWNrZW5kKCl7aWYodGhpcy5wZW5kaW5nQmFja2VuZEluaXQhPW51bGwpdGhyb3cgbmV3IEVycm9yKGBCYWNrZW5kICcke3RoaXMuYmFja2VuZE5hbWV9JyBoYXMgbm90IHlldCBiZWVuIGluaXRpYWxpemVkLiBNYWtlIHN1cmUgdG8gYXdhaXQgdGYucmVhZHkoKSBvciBhd2FpdCB0Zi5zZXRCYWNrZW5kKCkgYmVmb3JlIGNhbGxpbmcgb3RoZXIgbWV0aG9kc2ApO2lmKHRoaXMuYmFja2VuZEluc3RhbmNlPT1udWxsKXtjb25zdHtuYW1lOmUsYXN5bmNJbml0OnR9PXRoaXMuaW5pdGlhbGl6ZUJhY2tlbmRzQW5kUmV0dXJuQmVzdCgpO2lmKHQpdGhyb3cgbmV3IEVycm9yKGBUaGUgaGlnaGVzdCBwcmlvcml0eSBiYWNrZW5kICcke2V9JyBoYXMgbm90IHlldCBiZWVuIGluaXRpYWxpemVkLiBNYWtlIHN1cmUgdG8gYXdhaXQgdGYucmVhZHkoKSBvciBhd2FpdCB0Zi5zZXRCYWNrZW5kKCkgYmVmb3JlIGNhbGxpbmcgb3RoZXIgbWV0aG9kc2ApO3RoaXMuc2V0QmFja2VuZChlKX1yZXR1cm4gdGhpcy5iYWNrZW5kSW5zdGFuY2V9YmFja2VuZE5hbWVzKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMucmVnaXN0cnlGYWN0b3J5KX1maW5kQmFja2VuZChlKXtpZighKGUgaW4gdGhpcy5yZWdpc3RyeSkpaWYoZSBpbiB0aGlzLnJlZ2lzdHJ5RmFjdG9yeSl7Y29uc3R7YXN5bmNJbml0OnR9PXRoaXMuaW5pdGlhbGl6ZUJhY2tlbmQoZSk7aWYodClyZXR1cm4gbnVsbH1lbHNlIHJldHVybiBudWxsO3JldHVybiB0aGlzLnJlZ2lzdHJ5W2VdfWZpbmRCYWNrZW5kRmFjdG9yeShlKXtyZXR1cm4gZSBpbiB0aGlzLnJlZ2lzdHJ5RmFjdG9yeT90aGlzLnJlZ2lzdHJ5RmFjdG9yeVtlXS5mYWN0b3J5Om51bGx9cmVnaXN0ZXJCYWNrZW5kKGUsdCxzPTEpe3JldHVybiBlIGluIHRoaXMucmVnaXN0cnlGYWN0b3J5PyhEcyhgJHtlfSBiYWNrZW5kIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWQuIFJldXNpbmcgZXhpc3RpbmcgYmFja2VuZCBmYWN0b3J5LmApLCExKToodGhpcy5yZWdpc3RyeUZhY3RvcnlbZV09e2ZhY3Rvcnk6dCxwcmlvcml0eTpzfSwhMCl9YXN5bmMgc2V0QmFja2VuZChlKXtpZih0aGlzLnJlZ2lzdHJ5RmFjdG9yeVtlXT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoYEJhY2tlbmQgbmFtZSAnJHtlfScgbm90IGZvdW5kIGluIHJlZ2lzdHJ5YCk7aWYodGhpcy5iYWNrZW5kTmFtZT1lLHRoaXMucmVnaXN0cnlbZV09PW51bGwpe3RoaXMuYmFja2VuZEluc3RhbmNlPW51bGw7Y29uc3R7c3VjY2Vzczp0LGFzeW5jSW5pdDpzfT10aGlzLmluaXRpYWxpemVCYWNrZW5kKGUpO2lmKCEocz9hd2FpdCB0OnQpKXJldHVybiExfXJldHVybiB0aGlzLmJhY2tlbmRJbnN0YW5jZT10aGlzLnJlZ2lzdHJ5W2VdLHRoaXMuc2V0dXBSZWdpc3RlcmVkS2VybmVscygpLHRoaXMucHJvZmlsZXI9bmV3IGtGKHRoaXMuYmFja2VuZEluc3RhbmNlKSwhMH1zZXR1cFJlZ2lzdGVyZWRLZXJuZWxzKCl7VGYodGhpcy5iYWNrZW5kTmFtZSkuZm9yRWFjaCh0PT57dC5zZXR1cEZ1bmMhPW51bGwmJnQuc2V0dXBGdW5jKHRoaXMuYmFja2VuZEluc3RhbmNlKX0pfWRpc3Bvc2VSZWdpc3RlcmVkS2VybmVscyhlKXtUZihlKS5mb3JFYWNoKHM9PntzLmRpc3Bvc2VGdW5jIT1udWxsJiZzLmRpc3Bvc2VGdW5jKHRoaXMucmVnaXN0cnlbZV0pfSl9aW5pdGlhbGl6ZUJhY2tlbmQoZSl7Y29uc3QgdD10aGlzLnJlZ2lzdHJ5RmFjdG9yeVtlXTtpZih0PT1udWxsKXRocm93IG5ldyBFcnJvcihgQ2Fubm90IGluaXRpYWxpemUgYmFja2VuZCAke2V9LCBubyByZWdpc3RyYXRpb24gZm91bmQuYCk7dHJ5e2NvbnN0IHM9dC5mYWN0b3J5KCk7aWYocyYmIShzIGluc3RhbmNlb2YgWmYpJiZ0eXBlb2Ygcy50aGVuPT0iZnVuY3Rpb24iKXtjb25zdCByPSsrdGhpcy5wZW5kaW5nQmFja2VuZEluaXRJZCxvPXMudGhlbihpPT5yPHRoaXMucGVuZGluZ0JhY2tlbmRJbml0SWQ/ITE6KHRoaXMucmVnaXN0cnlbZV09aSx0aGlzLnBlbmRpbmdCYWNrZW5kSW5pdD1udWxsLCEwKSkuY2F0Y2goaT0+KHI8dGhpcy5wZW5kaW5nQmFja2VuZEluaXRJZHx8KHRoaXMucGVuZGluZ0JhY2tlbmRJbml0PW51bGwsRHMoYEluaXRpYWxpemF0aW9uIG9mIGJhY2tlbmQgJHtlfSBmYWlsZWRgKSxEcyhpLnN0YWNrfHxpLm1lc3NhZ2UpKSwhMSkpO3JldHVybiB0aGlzLnBlbmRpbmdCYWNrZW5kSW5pdD1vLHtzdWNjZXNzOm8sYXN5bmNJbml0OiEwfX1lbHNlIHJldHVybiB0aGlzLnJlZ2lzdHJ5W2VdPXMse3N1Y2Nlc3M6ITAsYXN5bmNJbml0OiExfX1jYXRjaChzKXtyZXR1cm4gRHMoYEluaXRpYWxpemF0aW9uIG9mIGJhY2tlbmQgJHtlfSBmYWlsZWRgKSxEcyhzLnN0YWNrfHxzLm1lc3NhZ2UpLHtzdWNjZXNzOiExLGFzeW5jSW5pdDohMX19fXJlbW92ZUJhY2tlbmQoZSl7aWYoIShlIGluIHRoaXMucmVnaXN0cnlGYWN0b3J5KSl0aHJvdyBuZXcgRXJyb3IoYCR7ZX0gYmFja2VuZCBub3QgZm91bmQgaW4gcmVnaXN0cnlgKTt0aGlzLmJhY2tlbmROYW1lPT09ZSYmdGhpcy5wZW5kaW5nQmFja2VuZEluaXQhPW51bGwmJnRoaXMucGVuZGluZ0JhY2tlbmRJbml0SWQrKyxlIGluIHRoaXMucmVnaXN0cnkmJih0aGlzLmRpc3Bvc2VSZWdpc3RlcmVkS2VybmVscyhlKSx0aGlzLnJlZ2lzdHJ5W2VdLmRpc3Bvc2UoKSxkZWxldGUgdGhpcy5yZWdpc3RyeVtlXSksZGVsZXRlIHRoaXMucmVnaXN0cnlGYWN0b3J5W2VdLHRoaXMuYmFja2VuZE5hbWU9PT1lJiYodGhpcy5wZW5kaW5nQmFja2VuZEluaXQ9bnVsbCx0aGlzLmJhY2tlbmROYW1lPW51bGwsdGhpcy5iYWNrZW5kSW5zdGFuY2U9bnVsbCl9Z2V0U29ydGVkQmFja2VuZHMoKXtpZihPYmplY3Qua2V5cyh0aGlzLnJlZ2lzdHJ5RmFjdG9yeSkubGVuZ3RoPT09MCl0aHJvdyBuZXcgRXJyb3IoIk5vIGJhY2tlbmQgZm91bmQgaW4gcmVnaXN0cnkuIik7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMucmVnaXN0cnlGYWN0b3J5KS5zb3J0KChlLHQpPT50aGlzLnJlZ2lzdHJ5RmFjdG9yeVt0XS5wcmlvcml0eS10aGlzLnJlZ2lzdHJ5RmFjdG9yeVtlXS5wcmlvcml0eSl9aW5pdGlhbGl6ZUJhY2tlbmRzQW5kUmV0dXJuQmVzdCgpe2NvbnN0IGU9dGhpcy5nZXRTb3J0ZWRCYWNrZW5kcygpO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBzPWVbdF0se3N1Y2Nlc3M6cixhc3luY0luaXQ6b309dGhpcy5pbml0aWFsaXplQmFja2VuZChzKTtpZihvfHxyKXJldHVybntuYW1lOnMsYXN5bmNJbml0Om99fXRocm93IG5ldyBFcnJvcigiQ291bGQgbm90IGluaXRpYWxpemUgYW55IGJhY2tlbmRzLCBhbGwgYmFja2VuZCBpbml0aWFsaXphdGlvbnMgZmFpbGVkLiIpfW1vdmVEYXRhKGUsdCl7Y29uc3Qgcz10aGlzLnN0YXRlLnRlbnNvckluZm8uZ2V0KHQpLHI9cy5iYWNrZW5kLG89dGhpcy5yZWFkU3luYyh0KSxpPXIucmVmQ291bnQodCk7ci5kaXNwb3NlRGF0YSh0LCEwKSxzLmJhY2tlbmQ9ZSxlLm1vdmUodCxvLHMuc2hhcGUscy5kdHlwZSxpKSx0aGlzLnNob3VsZENoZWNrRm9yTWVtTGVha3MoKSYmdGhpcy5zdGF0ZS5udW1EYXRhTW92ZXNTdGFja1t0aGlzLnN0YXRlLm51bURhdGFNb3Zlc1N0YWNrLmxlbmd0aC0xXSsrfXRpZHkoZSx0KXtsZXQgcz1udWxsO2lmKHQ9PW51bGwpe2lmKHR5cGVvZiBlIT0iZnVuY3Rpb24iKXRocm93IG5ldyBFcnJvcigiUGxlYXNlIHByb3ZpZGUgYSBmdW5jdGlvbiB0byB0aWR5KCkiKTt0PWV9ZWxzZXtpZih0eXBlb2YgZSE9InN0cmluZyImJiEoZSBpbnN0YW5jZW9mIFN0cmluZykpdGhyb3cgbmV3IEVycm9yKCJXaGVuIGNhbGxpbmcgd2l0aCB0d28gYXJndW1lbnRzLCB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGlkeSgpIG11c3QgYmUgYSBzdHJpbmciKTtpZih0eXBlb2YgdCE9ImZ1bmN0aW9uIil0aHJvdyBuZXcgRXJyb3IoIldoZW4gY2FsbGluZyB3aXRoIHR3byBhcmd1bWVudHMsIHRoZSAybmQgYXJndW1lbnQgdG8gdGlkeSgpIG11c3QgYmUgYSBmdW5jdGlvbiIpO3M9ZX1sZXQgcjtyZXR1cm4gdGhpcy5zY29wZWRSdW4oKCk9PnRoaXMuc3RhcnRTY29wZShzKSwoKT0+dGhpcy5lbmRTY29wZShyKSwoKT0+KHI9dCgpLHIgaW5zdGFuY2VvZiBQcm9taXNlJiZjb25zb2xlLmVycm9yKCJDYW5ub3QgcmV0dXJuIGEgUHJvbWlzZSBpbnNpZGUgb2YgdGlkeS4iKSxyKSl9c2NvcGVkUnVuKGUsdCxzKXtlKCk7dHJ5e2NvbnN0IHI9cygpO3JldHVybiB0KCkscn1jYXRjaChyKXt0aHJvdyB0KCkscn19bmV4dFRlbnNvcklkKCl7cmV0dXJuIGZsLm5leHRUZW5zb3JJZCsrfW5leHRWYXJpYWJsZUlkKCl7cmV0dXJuIGZsLm5leHRWYXJpYWJsZUlkKyt9Y2xvbmUoZSl7Y29uc3QgdD1qLnJ1bktlcm5lbChxbCx7eDplfSkscz17eDplfSxyPWk9Pih7eDooKT0+e2NvbnN0IGE9ImZsb2F0MzIiLGw9e3g6aX0sYz17ZHR5cGU6YX07cmV0dXJuIGoucnVuS2VybmVsKE9sLGwsYyl9fSksbz1bXTtyZXR1cm4gdGhpcy5hZGRUYXBlTm9kZSh0aGlzLnN0YXRlLmFjdGl2ZVNjb3BlLm5hbWUscyxbdF0scixvLHt9KSx0fXJ1bktlcm5lbChlLHQscyl7aWYodGhpcy5iYWNrZW5kTmFtZT09bnVsbCYmdGhpcy5iYWNrZW5kLCEoemMoZSx0aGlzLmJhY2tlbmROYW1lKSE9bnVsbCkpdGhyb3cgbmV3IEVycm9yKGBLZXJuZWwgJyR7ZX0nIG5vdCByZWdpc3RlcmVkIGZvciBiYWNrZW5kICcke3RoaXMuYmFja2VuZE5hbWV9J2ApO3JldHVybiB0aGlzLnJ1bktlcm5lbEZ1bmMoe2tlcm5lbE5hbWU6ZSxpbnB1dHM6dCxhdHRyczpzfSl9c2hvdWxkQ2hlY2tGb3JNZW1MZWFrcygpe3JldHVybiB0aGlzLkVOVi5nZXRCb29sKCJJU19URVNUIil9Y2hlY2tLZXJuZWxGb3JNZW1MZWFrKGUsdCxzKXtjb25zdCByPXRoaXMuYmFja2VuZC5udW1EYXRhSWRzKCk7bGV0IG89MDtzLmZvckVhY2gobD0+e28rPWwuZHR5cGU9PT0iY29tcGxleDY0Ij8zOjF9KTtjb25zdCBpPXRoaXMuc3RhdGUubnVtRGF0YU1vdmVzU3RhY2tbdGhpcy5zdGF0ZS5udW1EYXRhTW92ZXNTdGFjay5sZW5ndGgtMV0sYT1yLXQtby1pO2lmKGE+MCl0aHJvdyBuZXcgRXJyb3IoYEJhY2tlbmQgJyR7dGhpcy5iYWNrZW5kTmFtZX0nIGhhcyBhbiBpbnRlcm5hbCBtZW1vcnkgbGVhayAoJHthfSBkYXRhIGlkcykgYWZ0ZXIgcnVubmluZyAnJHtlfSdgKX1ydW5LZXJuZWxGdW5jKGUpe2xldCB0LHM9W107Y29uc3Qgcj10aGlzLmlzVGFwZU9uKCksbz10aGlzLnN0YXRlLm51bUJ5dGVzLGk9dGhpcy5zdGF0ZS5udW1UZW5zb3JzO3RoaXMuc2hvdWxkQ2hlY2tGb3JNZW1MZWFrcygpJiZ0aGlzLnN0YXRlLm51bURhdGFNb3Zlc1N0YWNrLnB1c2goMCk7bGV0IGE7dGhpcy5iYWNrZW5kTmFtZT09bnVsbCYmdGhpcy5iYWNrZW5kO2xldCBsO2NvbnN0IGM9ZDAoZSk/ZS5rZXJuZWxOYW1lOnRoaXMuc3RhdGUuYWN0aXZlU2NvcGUhPW51bGw/dGhpcy5zdGF0ZS5hY3RpdmVTY29wZS5uYW1lOiIiO2lmKGQwKGUpKXtjb25zdHtrZXJuZWxOYW1lOnksaW5wdXRzOncsYXR0cnM6Yn09ZTt0aGlzLmJhY2tlbmROYW1lPT1udWxsJiZ0aGlzLmJhY2tlbmQ7Y29uc3Qgdj16Yyh5LHRoaXMuYmFja2VuZE5hbWUpO0EodiE9bnVsbCwoKT0+YENhbm5vdCBmaW5kIHJlZ2lzdGVyZWQga2VybmVsICcke3l9JyBmb3IgYmFja2VuZCAnJHt0aGlzLmJhY2tlbmROYW1lfSdgKSxhPSgpPT57Y29uc3QgUz10aGlzLmJhY2tlbmQubnVtRGF0YUlkcygpO2w9di5rZXJuZWxGdW5jKHtpbnB1dHM6dyxhdHRyczpiLGJhY2tlbmQ6dGhpcy5iYWNrZW5kfSk7Y29uc3QgJD1BcnJheS5pc0FycmF5KGwpP2w6W2xdO3RoaXMuc2hvdWxkQ2hlY2tGb3JNZW1MZWFrcygpJiZ0aGlzLmNoZWNrS2VybmVsRm9yTWVtTGVhayh5LFMsJCk7Y29uc3Qgaz0kLm1hcChUPT5ULnJhbmshPW51bGw/VDp0aGlzLm1ha2VUZW5zb3JGcm9tVGVuc29ySW5mbyhUKSk7aWYocil7Y29uc3QgVD10aGlzLmdldFRlbnNvcnNGb3JHcmFkaWVudCh5LHcsayk7cz10aGlzLnNhdmVUZW5zb3JzRm9yQmFja3dhcmRNb2RlKFQpfXJldHVybiBrfX1lbHNle2NvbnN0e2ZvcndhcmRGdW5jOnl9PWUsdz1iPT57ciYmKHM9Yi5tYXAodj0+dGhpcy5rZWVwKHRoaXMuY2xvbmUodikpKSl9O2E9KCk9Pntjb25zdCBiPXRoaXMuYmFja2VuZC5udW1EYXRhSWRzKCk7bD10aGlzLnRpZHkoKCk9PnkodGhpcy5iYWNrZW5kLHcpKTtjb25zdCB2PUFycmF5LmlzQXJyYXkobCk/bDpbbF07cmV0dXJuIHRoaXMuc2hvdWxkQ2hlY2tGb3JNZW1MZWFrcygpJiZ0aGlzLmNoZWNrS2VybmVsRm9yTWVtTGVhayhjLGIsdiksdn19Y29uc3R7aW5wdXRzOmgsYXR0cnM6cH09ZSxmPWQwKGUpP251bGw6ZS5iYWNrd2FyZHNGdW5jO2xldCBnO3JldHVybiB0aGlzLnNjb3BlZFJ1bigoKT0+dGhpcy5zdGF0ZS5rZXJuZWxEZXB0aCsrLCgpPT50aGlzLnN0YXRlLmtlcm5lbERlcHRoLS0sKCk9PnshdGhpcy5FTlYuZ2V0Qm9vbCgiREVCVUciKSYmIXRoaXMuc3RhdGUucHJvZmlsaW5nP3Q9YSgpOihnPXRoaXMucHJvZmlsZXIucHJvZmlsZUtlcm5lbChjLGgsKCk9PmEoKSksdGhpcy5FTlYuZ2V0Qm9vbCgiREVCVUciKSYmdGhpcy5wcm9maWxlci5sb2dLZXJuZWxQcm9maWxlKGcpLHQ9Zy5vdXRwdXRzKX0pLHImJnRoaXMuYWRkVGFwZU5vZGUoYyxoLHQsZixzLHApLHRoaXMuc3RhdGUucHJvZmlsaW5nJiZ0aGlzLnN0YXRlLmFjdGl2ZVByb2ZpbGUua2VybmVscy5wdXNoKHtuYW1lOmMsYnl0ZXNBZGRlZDp0aGlzLnN0YXRlLm51bUJ5dGVzLW8sdG90YWxCeXRlc1NuYXBzaG90OnRoaXMuc3RhdGUubnVtQnl0ZXMsdGVuc29yc0FkZGVkOnRoaXMuc3RhdGUubnVtVGVuc29ycy1pLHRvdGFsVGVuc29yc1NuYXBzaG90OnRoaXMuc3RhdGUubnVtVGVuc29ycyxpbnB1dFNoYXBlczpPYmplY3Qua2V5cyhoKS5tYXAoeT0+aFt5XSE9bnVsbD9oW3ldLnNoYXBlOm51bGwpLG91dHB1dFNoYXBlczp0Lm1hcCh5PT55LnNoYXBlKSxrZXJuZWxUaW1lTXM6Zy50aW1lTXMsZXh0cmFJbmZvOmcuZXh0cmFJbmZvfSksQXJyYXkuaXNBcnJheShsKT90OnRbMF19c2F2ZVRlbnNvcnNGb3JCYWNrd2FyZE1vZGUoZSl7cmV0dXJuIGUubWFwKHM9PnRoaXMua2VlcCh0aGlzLmNsb25lKHMpKSl9Z2V0VGVuc29yc0ZvckdyYWRpZW50KGUsdCxzKXtjb25zdCByPVIwKGUpO2lmKHIhPW51bGwpe2NvbnN0IG89ci5pbnB1dHNUb1NhdmV8fFtdLGk9ci5vdXRwdXRzVG9TYXZlfHxbXTtsZXQgYTtyLnNhdmVBbGxJbnB1dHM/KEEoQXJyYXkuaXNBcnJheSh0KSwoKT0+InNhdmVBbGxJbnB1dHMgaXMgdHJ1ZSwgZXhwZWN0ZWQgaW5wdXRzIHRvIGJlIGFuIGFycmF5LiIpLGE9T2JqZWN0LmtleXModCkubWFwKGM9PnRbY10pKTphPW8ubWFwKGM9PnRbY10pO2NvbnN0IGw9cy5maWx0ZXIoKGMsaCk9PmlbaF0pO3JldHVybiBhLmNvbmNhdChsKX1yZXR1cm5bXX1tYWtlVGVuc29yKGUsdCxzLHIpe2lmKGU9PW51bGwpdGhyb3cgbmV3IEVycm9yKCJWYWx1ZXMgcGFzc2VkIHRvIGVuZ2luZS5tYWtlVGVuc29yKCkgYXJlIG51bGwiKTtzPXN8fCJmbG9hdDMyIixyPXJ8fHRoaXMuYmFja2VuZDtsZXQgbz1lO3M9PT0ic3RyaW5nIiYmenIoZVswXSkmJihvPWUubWFwKGw9PkJyKGwpKSk7Y29uc3QgaT1yLndyaXRlKG8sdCxzKSxhPW5ldyBkdCh0LHMsaSx0aGlzLm5leHRUZW5zb3JJZCgpKTtpZih0aGlzLnRyYWNrVGVuc29yKGEscikscz09PSJzdHJpbmciKXtjb25zdCBsPXRoaXMuc3RhdGUudGVuc29ySW5mby5nZXQoaSksYz1hJChvKTt0aGlzLnN0YXRlLm51bUJ5dGVzKz1jLWwuYnl0ZXMsbC5ieXRlcz1jfXJldHVybiBhfW1ha2VUZW5zb3JGcm9tRGF0YUlkKGUsdCxzLHIpe3M9c3x8ImZsb2F0MzIiO2NvbnN0IG89e2RhdGFJZDplLHNoYXBlOnQsZHR5cGU6c307cmV0dXJuIHRoaXMubWFrZVRlbnNvckZyb21UZW5zb3JJbmZvKG8scil9bWFrZVRlbnNvckZyb21UZW5zb3JJbmZvKGUsdCl7Y29uc3R7ZGF0YUlkOnMsc2hhcGU6cixkdHlwZTpvfT1lLGk9bmV3IGR0KHIsbyxzLHRoaXMubmV4dFRlbnNvcklkKCkpO3JldHVybiB0aGlzLnRyYWNrVGVuc29yKGksdCksaX1tYWtlVmFyaWFibGUoZSx0PSEwLHMscil7cz1zfHx0aGlzLm5leHRWYXJpYWJsZUlkKCkudG9TdHJpbmcoKSxyIT1udWxsJiZyIT09ZS5kdHlwZSYmKGU9ZS5jYXN0KHIpKTtjb25zdCBvPW5ldyBNYyhlLHQscyx0aGlzLm5leHRUZW5zb3JJZCgpKTtpZih0aGlzLnN0YXRlLnJlZ2lzdGVyZWRWYXJpYWJsZXNbby5uYW1lXSE9bnVsbCl0aHJvdyBuZXcgRXJyb3IoYFZhcmlhYmxlIHdpdGggbmFtZSAke28ubmFtZX0gd2FzIGFscmVhZHkgcmVnaXN0ZXJlZGApO3JldHVybiB0aGlzLnN0YXRlLnJlZ2lzdGVyZWRWYXJpYWJsZXNbby5uYW1lXT1vLHRoaXMuaW5jUmVmKG8sdGhpcy5iYWNrZW5kKSxvfXRyYWNrVGVuc29yKGUsdCl7dGhpcy5zdGF0ZS5udW1UZW5zb3JzKyssZS5kdHlwZT09PSJzdHJpbmciJiZ0aGlzLnN0YXRlLm51bVN0cmluZ1RlbnNvcnMrKztsZXQgcz0wO2UuZHR5cGUhPT0iY29tcGxleDY0IiYmZS5kdHlwZSE9PSJzdHJpbmciJiYocz1lLnNpemUqX2MoZS5kdHlwZSkpLHRoaXMuc3RhdGUubnVtQnl0ZXMrPXMsdGhpcy5zdGF0ZS50ZW5zb3JJbmZvLmhhcyhlLmRhdGFJZCl8fCh0aGlzLnN0YXRlLm51bURhdGFCdWZmZXJzKyssdGhpcy5zdGF0ZS50ZW5zb3JJbmZvLnNldChlLmRhdGFJZCx7YmFja2VuZDp0fHx0aGlzLmJhY2tlbmQsZHR5cGU6ZS5kdHlwZSxzaGFwZTplLnNoYXBlLGJ5dGVzOnN9KSksZSBpbnN0YW5jZW9mIE1jfHx0aGlzLnRyYWNrKGUpfWluY1JlZihlLHQpe3RoaXMudHJhY2tUZW5zb3IoZSx0KSx0aGlzLmJhY2tlbmQuaW5jUmVmKGUuZGF0YUlkKX1yZW1vdmVEYXRhSWQoZSx0KXt0aGlzLnN0YXRlLnRlbnNvckluZm8uaGFzKGUpJiZ0aGlzLnN0YXRlLnRlbnNvckluZm8uZ2V0KGUpLmJhY2tlbmQ9PT10JiYodGhpcy5zdGF0ZS50ZW5zb3JJbmZvLmRlbGV0ZShlKSx0aGlzLnN0YXRlLm51bURhdGFCdWZmZXJzLS0pfWRpc3Bvc2VUZW5zb3IoZSl7aWYoIXRoaXMuc3RhdGUudGVuc29ySW5mby5oYXMoZS5kYXRhSWQpKXJldHVybjtjb25zdCB0PXRoaXMuc3RhdGUudGVuc29ySW5mby5nZXQoZS5kYXRhSWQpO2lmKHRoaXMuc3RhdGUubnVtVGVuc29ycy0tLGUuZHR5cGU9PT0ic3RyaW5nIiYmKHRoaXMuc3RhdGUubnVtU3RyaW5nVGVuc29ycy0tLHRoaXMuc3RhdGUubnVtQnl0ZXMtPXQuYnl0ZXMpLGUuZHR5cGUhPT0iY29tcGxleDY0IiYmZS5kdHlwZSE9PSJzdHJpbmciKXtjb25zdCBzPWUuc2l6ZSpfYyhlLmR0eXBlKTt0aGlzLnN0YXRlLm51bUJ5dGVzLT1zfXQuYmFja2VuZC5kaXNwb3NlRGF0YShlLmRhdGFJZCkmJnRoaXMucmVtb3ZlRGF0YUlkKGUuZGF0YUlkLHQuYmFja2VuZCl9ZGlzcG9zZVZhcmlhYmxlcygpe2Zvcihjb25zdCBlIGluIHRoaXMuc3RhdGUucmVnaXN0ZXJlZFZhcmlhYmxlcyl7Y29uc3QgdD10aGlzLnN0YXRlLnJlZ2lzdGVyZWRWYXJpYWJsZXNbZV07dGhpcy5kaXNwb3NlVmFyaWFibGUodCl9fWRpc3Bvc2VWYXJpYWJsZShlKXt0aGlzLmRpc3Bvc2VUZW5zb3IoZSksdGhpcy5zdGF0ZS5yZWdpc3RlcmVkVmFyaWFibGVzW2UubmFtZV0hPW51bGwmJmRlbGV0ZSB0aGlzLnN0YXRlLnJlZ2lzdGVyZWRWYXJpYWJsZXNbZS5uYW1lXX1tZW1vcnkoKXtjb25zdCBlPXRoaXMuYmFja2VuZC5tZW1vcnkoKTtyZXR1cm4gZS5udW1UZW5zb3JzPXRoaXMuc3RhdGUubnVtVGVuc29ycyxlLm51bURhdGFCdWZmZXJzPXRoaXMuc3RhdGUubnVtRGF0YUJ1ZmZlcnMsZS5udW1CeXRlcz10aGlzLnN0YXRlLm51bUJ5dGVzLHRoaXMuc3RhdGUubnVtU3RyaW5nVGVuc29ycz4wJiYoZS51bnJlbGlhYmxlPSEwLGUucmVhc29ucz09bnVsbCYmKGUucmVhc29ucz1bXSksZS5yZWFzb25zLnB1c2goIk1lbW9yeSB1c2FnZSBieSBzdHJpbmcgdGVuc29ycyBpcyBhcHByb3hpbWF0ZSAoMiBieXRlcyBwZXIgY2hhcmFjdGVyKSIpKSxlfWFzeW5jIHByb2ZpbGUoZSl7dGhpcy5zdGF0ZS5wcm9maWxpbmc9ITA7Y29uc3QgdD10aGlzLnN0YXRlLm51bUJ5dGVzLHM9dGhpcy5zdGF0ZS5udW1UZW5zb3JzO3RoaXMuc3RhdGUuYWN0aXZlUHJvZmlsZS5rZXJuZWxzPVtdLHRoaXMuc3RhdGUuYWN0aXZlUHJvZmlsZS5yZXN1bHQ9YXdhaXQgZSgpLHRoaXMuc3RhdGUucHJvZmlsaW5nPSExLHRoaXMuc3RhdGUuYWN0aXZlUHJvZmlsZS5wZWFrQnl0ZXM9TWF0aC5tYXgoLi4udGhpcy5zdGF0ZS5hY3RpdmVQcm9maWxlLmtlcm5lbHMubWFwKHI9PnIudG90YWxCeXRlc1NuYXBzaG90KSksdGhpcy5zdGF0ZS5hY3RpdmVQcm9maWxlLm5ld0J5dGVzPXRoaXMuc3RhdGUubnVtQnl0ZXMtdCx0aGlzLnN0YXRlLmFjdGl2ZVByb2ZpbGUubmV3VGVuc29ycz10aGlzLnN0YXRlLm51bVRlbnNvcnMtcztmb3IoY29uc3QgciBvZiB0aGlzLnN0YXRlLmFjdGl2ZVByb2ZpbGUua2VybmVscylyLmtlcm5lbFRpbWVNcz1hd2FpdCByLmtlcm5lbFRpbWVNcyxyLmV4dHJhSW5mbz1hd2FpdCByLmV4dHJhSW5mbztyZXR1cm4gdGhpcy5zdGF0ZS5hY3RpdmVQcm9maWxlfWlzVGFwZU9uKCl7cmV0dXJuIHRoaXMuc3RhdGUuZ3JhZGllbnREZXB0aD4wJiZ0aGlzLnN0YXRlLmtlcm5lbERlcHRoPT09MH1hZGRUYXBlTm9kZShlLHQscyxyLG8saSl7Y29uc3QgYT17aWQ6dGhpcy5zdGF0ZS5uZXh0VGFwZU5vZGVJZCsrLGtlcm5lbE5hbWU6ZSxpbnB1dHM6dCxvdXRwdXRzOnMsc2F2ZWQ6b30sbD1SMChlKTtsIT1udWxsJiYocj1sLmdyYWRGdW5jKSxyIT1udWxsJiYoYS5ncmFkaWVudD1jPT4oYz1jLm1hcCgoaCxwKT0+e2lmKGg9PW51bGwpe2NvbnN0IGY9c1twXSxnPVNuKGYuc2l6ZSxmLmR0eXBlKTtyZXR1cm4gdGhpcy5tYWtlVGVuc29yKGcsZi5zaGFwZSxmLmR0eXBlKX1yZXR1cm4gaH0pLHIoYy5sZW5ndGg+MT9jOmNbMF0sbyxpKSkpLHRoaXMuc3RhdGUuYWN0aXZlVGFwZS5wdXNoKGEpfWtlZXAoZSl7cmV0dXJuIGUua2VwdD0hMCxlfXN0YXJ0VGFwZSgpe3RoaXMuc3RhdGUuZ3JhZGllbnREZXB0aD09PTAmJih0aGlzLnN0YXRlLmFjdGl2ZVRhcGU9W10pLHRoaXMuc3RhdGUuZ3JhZGllbnREZXB0aCsrfWVuZFRhcGUoKXt0aGlzLnN0YXRlLmdyYWRpZW50RGVwdGgtLX1zdGFydFNjb3BlKGUpe2NvbnN0IHQ9e3RyYWNrOltdLG5hbWU6InVubmFtZWQgc2NvcGUiLGlkOnRoaXMuc3RhdGUubmV4dFNjb3BlSWQrK307ZSYmKHQubmFtZT1lKSx0aGlzLnN0YXRlLnNjb3BlU3RhY2sucHVzaCh0KSx0aGlzLnN0YXRlLmFjdGl2ZVNjb3BlPXR9ZW5kU2NvcGUoZSl7Y29uc3QgdD1PMShlKSxzPW5ldyBTZXQodC5tYXAobz0+by5pZCkpO2ZvcihsZXQgbz0wO288dGhpcy5zdGF0ZS5hY3RpdmVTY29wZS50cmFjay5sZW5ndGg7bysrKXtjb25zdCBpPXRoaXMuc3RhdGUuYWN0aXZlU2NvcGUudHJhY2tbb107IWkua2VwdCYmIXMuaGFzKGkuaWQpJiZpLmRpc3Bvc2UoKX1jb25zdCByPXRoaXMuc3RhdGUuc2NvcGVTdGFjay5wb3AoKTt0aGlzLnN0YXRlLmFjdGl2ZVNjb3BlPXRoaXMuc3RhdGUuc2NvcGVTdGFjay5sZW5ndGg9PT0wP251bGw6dGhpcy5zdGF0ZS5zY29wZVN0YWNrW3RoaXMuc3RhdGUuc2NvcGVTdGFjay5sZW5ndGgtMV0sdC5mb3JFYWNoKG89Pnshby5rZXB0JiZvLnNjb3BlSWQ9PT1yLmlkJiZ0aGlzLnRyYWNrKG8pfSl9Z3JhZGllbnRzKGUsdCxzLHI9ITEpe2lmKEEodC5sZW5ndGg+MCwoKT0+ImdyYWRpZW50cygpIHJlY2VpdmVkIGFuIGVtcHR5IGxpc3Qgb2YgeHMuIikscyE9bnVsbCYmcy5kdHlwZSE9PSJmbG9hdDMyIil0aHJvdyBuZXcgRXJyb3IoYGR5IG11c3QgaGF2ZSAnZmxvYXQzMicgZHR5cGUsIGJ1dCBoYXMgJyR7cy5kdHlwZX0nYCk7Y29uc3Qgbz10aGlzLnNjb3BlZFJ1bigoKT0+dGhpcy5zdGFydFRhcGUoKSwoKT0+dGhpcy5lbmRUYXBlKCksKCk9PnRoaXMudGlkeSgiZm9yd2FyZCIsZSkpO0EobyBpbnN0YW5jZW9mIGR0LCgpPT4iVGhlIHJlc3VsdCB5IHJldHVybmVkIGJ5IGYoKSBtdXN0IGJlIGEgdGVuc29yLiIpO2NvbnN0IGk9SUYodGhpcy5zdGF0ZS5hY3RpdmVUYXBlLHQsbyk7aWYoIXImJmkubGVuZ3RoPT09MCYmdC5sZW5ndGg+MCl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjb21wdXRlIGdyYWRpZW50IG9mIHk9Zih4KSB3aXRoIHJlc3BlY3QgdG8geC4gTWFrZSBzdXJlIHRoYXQgdGhlIGYgeW91IHBhc3NlZCBlbmNsb3NlcyBhbGwgb3BlcmF0aW9ucyB0aGF0IGxlYWQgZnJvbSB4IHRvIHkuIik7cmV0dXJuIHRoaXMudGlkeSgiYmFja3dhcmQiLCgpPT57Y29uc3QgYT17fTthW28uaWRdPXM/P1BGKG8uc2hhcGUpLFRGKGEsaSxjPT50aGlzLnRpZHkoYyksekYpO2NvbnN0IGw9dC5tYXAoYz0+YVtjLmlkXSk7cmV0dXJuIHRoaXMuc3RhdGUuZ3JhZGllbnREZXB0aD09PTAmJih0aGlzLnN0YXRlLmFjdGl2ZVRhcGUuZm9yRWFjaChjPT57Zm9yKGNvbnN0IGggb2YgYy5zYXZlZCloLmRpc3Bvc2UoKX0pLHRoaXMuc3RhdGUuYWN0aXZlVGFwZT1udWxsKSx7dmFsdWU6byxncmFkczpsfX0pfWN1c3RvbUdyYWQoZSl7cmV0dXJuIEEob2koZSksKCk9PiJUaGUgZiBwYXNzZWQgaW4gY3VzdG9tR3JhZChmKSBtdXN0IGJlIGEgZnVuY3Rpb24uIiksKC4uLnQpPT57QSh0LmV2ZXJ5KGE9PmEgaW5zdGFuY2VvZiBkdCksKCk9PiJUaGUgYXJncyBwYXNzZWQgaW4gY3VzdG9tR3JhZChmKSh4MSwgeDIsLi4uKSBtdXN0IGFsbCBiZSB0ZW5zb3JzIik7bGV0IHM7Y29uc3Qgcj17fTt0LmZvckVhY2goKGEsbCk9PntyW2xdPWF9KTtjb25zdCBvPShhLGwpPT4ocz1lKC4uLnQsbCksQShzLnZhbHVlIGluc3RhbmNlb2YgZHQsKCk9PiJUaGUgZnVuY3Rpb24gZiBwYXNzZWQgaW4gY3VzdG9tR3JhZChmKSBtdXN0IHJldHVybiBhbiBvYmplY3Qgd2hlcmUgYG9iai52YWx1ZWAgaXMgYSB0ZW5zb3IiKSxBKG9pKHMuZ3JhZEZ1bmMpLCgpPT4iVGhlIGZ1bmN0aW9uIGYgcGFzc2VkIGluIGN1c3RvbUdyYWQoZikgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdoZXJlIGBvYmouZ3JhZEZ1bmNgIGlzIGEgZnVuY3Rpb24uIikscy52YWx1ZSksaT0oYSxsKT0+e2NvbnN0IGM9cy5ncmFkRnVuYyhhLGwpLGg9QXJyYXkuaXNBcnJheShjKT9jOltjXTtBKGgubGVuZ3RoPT09dC5sZW5ndGgsKCk9PiJUaGUgZnVuY3Rpb24gZiBwYXNzZWQgaW4gY3VzdG9tR3JhZChmKSBtdXN0IHJldHVybiBhbiBvYmplY3Qgd2hlcmUgYG9iai5ncmFkRnVuY2AgaXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHNhbWUgbnVtYmVyIG9mIHRlbnNvcnMgYXMgaW5wdXRzIHBhc3NlZCB0byBmKC4uLikuIiksQShoLmV2ZXJ5KGY9PmYgaW5zdGFuY2VvZiBkdCksKCk9PiJUaGUgZnVuY3Rpb24gZiBwYXNzZWQgaW4gY3VzdG9tR3JhZChmKSBtdXN0IHJldHVybiBhbiBvYmplY3Qgd2hlcmUgYG9iai5ncmFkRnVuY2AgaXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBsaXN0IG9mIG9ubHkgdGVuc29ycy4iKTtjb25zdCBwPXt9O3JldHVybiBoLmZvckVhY2goKGYsZyk9PntwW2ddPSgpPT5mfSkscH07cmV0dXJuIHRoaXMucnVuS2VybmVsRnVuYyh7Zm9yd2FyZEZ1bmM6byxiYWNrd2FyZHNGdW5jOmksaW5wdXRzOnJ9KX19cmVhZFN5bmMoZSl7cmV0dXJuIHRoaXMuc3RhdGUudGVuc29ySW5mby5nZXQoZSkuYmFja2VuZC5yZWFkU3luYyhlKX1yZWFkKGUpe3JldHVybiB0aGlzLnN0YXRlLnRlbnNvckluZm8uZ2V0KGUpLmJhY2tlbmQucmVhZChlKX1yZWFkVG9HUFUoZSx0KXtyZXR1cm4gdGhpcy5zdGF0ZS50ZW5zb3JJbmZvLmdldChlKS5iYWNrZW5kLnJlYWRUb0dQVShlLHQpfWFzeW5jIHRpbWUoZSl7Y29uc3QgdD1WbigpLHM9YXdhaXQgdGhpcy5iYWNrZW5kLnRpbWUoZSk7cmV0dXJuIHMud2FsbE1zPVZuKCktdCxzfXRyYWNrKGUpe3JldHVybiB0aGlzLnN0YXRlLmFjdGl2ZVNjb3BlIT1udWxsJiYoZS5zY29wZUlkPXRoaXMuc3RhdGUuYWN0aXZlU2NvcGUuaWQsdGhpcy5zdGF0ZS5hY3RpdmVTY29wZS50cmFjay5wdXNoKGUpKSxlfWdldCByZWdpc3RlcmVkVmFyaWFibGVzKCl7cmV0dXJuIHRoaXMuc3RhdGUucmVnaXN0ZXJlZFZhcmlhYmxlc31yZXNldCgpe3RoaXMucGVuZGluZ0JhY2tlbmRJbml0SWQrKyx0aGlzLnN0YXRlLmRpc3Bvc2UoKSx0aGlzLkVOVi5yZXNldCgpLHRoaXMuc3RhdGU9bmV3IGdrO2Zvcihjb25zdCBlIGluIHRoaXMucmVnaXN0cnkpdGhpcy5kaXNwb3NlUmVnaXN0ZXJlZEtlcm5lbHMoZSksdGhpcy5yZWdpc3RyeVtlXS5kaXNwb3NlKCksZGVsZXRlIHRoaXMucmVnaXN0cnlbZV07dGhpcy5iYWNrZW5kTmFtZT1udWxsLHRoaXMuYmFja2VuZEluc3RhbmNlPW51bGwsdGhpcy5wZW5kaW5nQmFja2VuZEluaXQ9bnVsbH19ZmwubmV4dFRlbnNvcklkPTA7ZmwubmV4dFZhcmlhYmxlSWQ9MDtmdW5jdGlvbiBQRihuKXtjb25zdCBlPWVtKGNlKG4pLCJmbG9hdDMyIik7cmV0dXJuIGoubWFrZVRlbnNvcihlLG4sImZsb2F0MzIiKX1mdW5jdGlvbiBJJCgpe2NvbnN0IG49aCQoKTtpZihuLl90ZmVuZ2luZT09bnVsbCl7Y29uc3QgZT1uZXcgZCQobik7bi5fdGZlbmdpbmU9bmV3IGZsKGUpfXJldHVybiByRihuLl90ZmVuZ2luZS5FTlYpLERGKCgpPT5uLl90ZmVuZ2luZSksbi5fdGZlbmdpbmV9Y29uc3Qgaj1JJCgpO2Z1bmN0aW9uIHpGKG4sZSl7Y29uc3QgdD17YTpuLGI6ZX07cmV0dXJuIGoucnVuS2VybmVsKFNhLHQpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE1GKCl7cmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3I8InUiJiZuYXZpZ2F0b3IhPW51bGx9bGV0IFAwO2Z1bmN0aW9uIEJGKG4pe1AwPW59ZnVuY3Rpb24gRjEobil7aWYoUDAhPT12b2lkIDApcmV0dXJuIFAwO2lmKG58fE1GKCkpe2lmKG58fChuPW5hdmlnYXRvciksbi5wcm9kdWN0PT09IlJlYWN0TmF0aXZlIilyZXR1cm4hMDtjb25zdCBlPW4udXNlckFnZW50fHxuLnZlbmRvcnx8KHR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdy5vcGVyYToiIik7aWYoIWUpe2NvbnN0IHQ9bjtyZXR1cm4gdC51c2VyQWdlbnREYXRhJiZ0LnVzZXJBZ2VudERhdGEubW9iaWxlfXJldHVybi8oYW5kcm9pZHxiYlxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QoZSl8fC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcLShufHUpfGM1NVwvfGNhcGl8Y2N3YXxjZG1cLXxjZWxsfGNodG18Y2xkY3xjbWRcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1wtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlwtNXxnXC1tb3xnbyhcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcLShtfHB8dCl8aGVpXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1wtY3xodChjKFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFwtfFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFwvKXxrbG9ufGtwdCB8a3djXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFwvKGt8bHx1KXw1MHw1NHxcLVthLXddKXxsaWJ3fGx5bnh8bTFcLXd8bTNnYXxtNTBcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFwtZ3xxYVwtYXxxYygwN3wxMnwyMXwzMnw2MHxcLVsyLTddfGlcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFwtfG9vfHBcLSl8c2RrXC98c2UoYyhcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcLXxzaGFyfHNpZShcLXxtKXxza1wtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXC18dlwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXC18dGRnXC18dGVsKGl8bSl8dGltXC18dFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cLXxtM3xtNSl8dHhcLTl8dXAoXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXC18eW91cnx6ZXRvfHp0ZVwtL2kudGVzdChlLnN1YnN0cigwLDQpKX1yZXR1cm4hMX1mdW5jdGlvbiBMMSgpe3JldHVybiB0eXBlb2Ygd2luZG93PCJ1IiYmd2luZG93LmRvY3VtZW50IT1udWxsfHx0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGU8InUifWNvbnN0IFZGPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxpc0Jyb3dzZXI6TDEsaXNNb2JpbGU6RjEsbW9ja0lzTW9iaWxlOkJGfSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IG5zPW9lKCk7bnMucmVnaXN0ZXJGbGFnKCJERUJVRyIsKCk9PiExLG49PntuJiZjb25zb2xlLndhcm4oIkRlYnVnZ2luZyBtb2RlIGlzIE9OLiBUaGUgb3V0cHV0IG9mIGV2ZXJ5IG1hdGggY2FsbCB3aWxsIGJlIGRvd25sb2FkZWQgdG8gQ1BVIGFuZCBjaGVja2VkIGZvciBOYU5zLiBUaGlzIHNpZ25pZmljYW50bHkgaW1wYWN0cyBwZXJmb3JtYW5jZS4iKX0pO25zLnJlZ2lzdGVyRmxhZygiSVNfQlJPV1NFUiIsKCk9PkwxKCkpO25zLnJlZ2lzdGVyRmxhZygiSVNfTk9ERSIsKCk9PnR5cGVvZiBwcm9jZXNzPCJ1IiYmdHlwZW9mIHByb2Nlc3MudmVyc2lvbnM8InUiJiZ0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlPCJ1Iik7bnMucmVnaXN0ZXJGbGFnKCJJU19DSFJPTUUiLCgpPT50eXBlb2YgbmF2aWdhdG9yPCJ1IiYmbmF2aWdhdG9yIT1udWxsJiZuYXZpZ2F0b3IudXNlckFnZW50IT1udWxsJiYvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYvR29vZ2xlIEluYy8udGVzdChuYXZpZ2F0b3IudmVuZG9yKSk7bnMucmVnaXN0ZXJGbGFnKCJJU19TQUZBUkkiLCgpPT50eXBlb2YgbmF2aWdhdG9yPCJ1IiYmbmF2aWdhdG9yIT1udWxsJiZuYXZpZ2F0b3IudXNlckFnZW50IT1udWxsJiYvU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYvQXBwbGUvLnRlc3QobmF2aWdhdG9yLnZlbmRvcikpO25zLnJlZ2lzdGVyRmxhZygiUFJPRCIsKCk9PiExKTtucy5yZWdpc3RlckZsYWcoIlRFTlNPUkxJS0VfQ0hFQ0tfU0hBUEVfQ09OU0lTVEVOQ1kiLCgpPT5ucy5nZXRCb29sKCJERUJVRyIpKTtucy5yZWdpc3RlckZsYWcoIkRFUFJFQ0FUSU9OX1dBUk5JTkdTX0VOQUJMRUQiLCgpPT4hMCk7bnMucmVnaXN0ZXJGbGFnKCJJU19URVNUIiwoKT0+ITEpO25zLnJlZ2lzdGVyRmxhZygiQ0hFQ0tfQ09NUFVUQVRJT05fRk9SX0VSUk9SUyIsKCk9Pm5zLmdldEJvb2woIkRFQlVHIikpO25zLnJlZ2lzdGVyRmxhZygiV1JBUF9UT19JTUFHRUJJVE1BUCIsKCk9PiExKTtucy5yZWdpc3RlckZsYWcoIkNBTlZBUzJEX1dJTExfUkVBRF9GUkVRVUVOVExZX0ZPUl9HUFUiLCgpPT4hMSk7bnMucmVnaXN0ZXJGbGFnKCJVU0VfU0VUVElNRU9VVENVU1RPTSIsKCk9PiExKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBIcihuLGUpe2xldCB0PW47aWYoY24obikpcmV0dXJuIGU9PT0ic3RyaW5nIj9bXTpbbi5sZW5ndGhdO2lmKE4kKG4pKXtjb25zdCByPW4uY2hhbm5lbHN8fCJSR0JBIjtyZXR1cm5bbi5oZWlnaHQsbi53aWR0aCpyLmxlbmd0aF19ZWxzZSBpZihrJChuKSlyZXR1cm5bbi5idWZmZXIuc2l6ZS8oZT09bnVsbD80Ol9jKGUpKV07aWYoIUFycmF5LmlzQXJyYXkobikpcmV0dXJuW107Y29uc3Qgcz1bXTtmb3IoO0FycmF5LmlzQXJyYXkodCl8fGNuKHQpJiZlIT09InN0cmluZyI7KXMucHVzaCh0Lmxlbmd0aCksdD10WzBdO3JldHVybiBBcnJheS5pc0FycmF5KG4pJiZvZSgpLmdldEJvb2woIlRFTlNPUkxJS0VfQ0hFQ0tfU0hBUEVfQ09OU0lTVEVOQ1kiKSYmVCQobixzLFtdKSxzfWZ1bmN0aW9uIFQkKG4sZSx0KXtpZih0PXR8fFtdLCFBcnJheS5pc0FycmF5KG4pJiYhY24obikpe0EoZS5sZW5ndGg9PT0wLCgpPT5gRWxlbWVudCBhcnJbJHt0LmpvaW4oIl1bIil9XSBpcyBhIHByaW1pdGl2ZSwgYnV0IHNob3VsZCBiZSBhbiBhcnJheS9UeXBlZEFycmF5IG9mICR7ZVswXX0gZWxlbWVudHNgKTtyZXR1cm59QShlLmxlbmd0aD4wLCgpPT5gRWxlbWVudCBhcnJbJHt0LmpvaW4oIl1bIil9XSBzaG91bGQgYmUgYSBwcmltaXRpdmUsIGJ1dCBpcyBhbiBhcnJheSBvZiAke24ubGVuZ3RofSBlbGVtZW50c2ApLEEobi5sZW5ndGg9PT1lWzBdLCgpPT5gRWxlbWVudCBhcnJbJHt0LmpvaW4oIl1bIil9XSBzaG91bGQgaGF2ZSAke2VbMF19IGVsZW1lbnRzLCBidXQgaGFzICR7bi5sZW5ndGh9IGVsZW1lbnRzYCk7Y29uc3Qgcz1lLnNsaWNlKDEpO2ZvcihsZXQgcj0wO3I8bi5sZW5ndGg7KytyKVQkKG5bcl0scyx0LmNvbmNhdChyKSl9ZnVuY3Rpb24geWsobixlLHQscyl7aWYobiE9PSJzdHJpbmdfb3JfbnVtZXJpYyIpe2lmKG49PW51bGwpdGhyb3cgbmV3IEVycm9yKCJFeHBlY3RlZCBkdHlwZSBjYW5ub3QgYmUgbnVsbC4iKTtpZihuIT09Im51bWVyaWMiJiZuIT09ZXx8bj09PSJudW1lcmljIiYmZT09PSJzdHJpbmciKXRocm93IG5ldyBFcnJvcihgQXJndW1lbnQgJyR7dH0nIHBhc3NlZCB0byAnJHtzfScgbXVzdCBiZSAke259IHRlbnNvciwgYnV0IGdvdCAke2V9IHRlbnNvcmApfX1mdW5jdGlvbiBPKG4sZSx0LHM9Im51bWVyaWMiKXtpZihuIGluc3RhbmNlb2YgaGUoKSlyZXR1cm4geWsocyxuLmR0eXBlLGUsdCksbjtsZXQgcj13YShuKTtpZihyIT09InN0cmluZyImJlsiYm9vbCIsImludDMyIiwiZmxvYXQzMiJdLmluZGV4T2Yocyk+PTAmJihyPXMpLHlrKHMscixlLHQpLG49PW51bGx8fCFjbihuKSYmIUFycmF5LmlzQXJyYXkobikmJnR5cGVvZiBuIT0ibnVtYmVyIiYmdHlwZW9mIG4hPSJib29sZWFuIiYmdHlwZW9mIG4hPSJzdHJpbmciKXtjb25zdCBsPW49PW51bGw/Im51bGwiOm4uY29uc3RydWN0b3IubmFtZTt0aHJvdyBuZXcgRXJyb3IoYEFyZ3VtZW50ICcke2V9JyBwYXNzZWQgdG8gJyR7dH0nIG11c3QgYmUgYSBUZW5zb3Igb3IgVGVuc29yTGlrZSwgYnV0IGdvdCAnJHtsfSdgKX1jb25zdCBvPUhyKG4scik7IWNuKG4pJiYhQXJyYXkuaXNBcnJheShuKSYmKG49W25dKTtjb25zdCBhPXIhPT0ic3RyaW5nIj9naShuLHIpOkdyKG4sW10sITApO3JldHVybiBqLm1ha2VUZW5zb3IoYSxvLHIpfWZ1bmN0aW9uIEJjKG4sZSx0LHM9Im51bWVyaWMiKXtpZighQXJyYXkuaXNBcnJheShuKSl0aHJvdyBuZXcgRXJyb3IoYEFyZ3VtZW50ICR7ZX0gcGFzc2VkIHRvICR7dH0gbXVzdCBiZSBhIFxgVGVuc29yW11cYCBvciBcYFRlbnNvckxpa2VbXVxgYCk7cmV0dXJuIG4ubWFwKChvLGkpPT5PKG8sYCR7ZX1bJHtpfV1gLHQscykpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFAxPSJfX29wIjtmdW5jdGlvbiBHKG4pe2NvbnN0IGU9T2JqZWN0LmtleXMobik7aWYoZS5sZW5ndGghPT0xKXRocm93IG5ldyBFcnJvcihgUGxlYXNlIHByb3ZpZGUgYW4gb2JqZWN0IHdpdGggYSBzaW5nbGUga2V5IChvcGVyYXRpb24gbmFtZSkgbWFwcGluZyB0byBhIGZ1bmN0aW9uLiBHb3QgYW4gb2JqZWN0IHdpdGggJHtlLmxlbmd0aH0ga2V5cy5gKTtsZXQgdD1lWzBdO2NvbnN0IHM9blt0XTt0LmVuZHNXaXRoKCJfIikmJih0PXQuc3Vic3RyaW5nKDAsdC5sZW5ndGgtMSkpLHQ9dCtQMTtjb25zdCByPSguLi5vKT0+e2ouc3RhcnRTY29wZSh0KTt0cnl7Y29uc3QgaT1zKC4uLm8pO3JldHVybiBpaShpKSYmY29uc29sZS5lcnJvcigiQ2Fubm90IHJldHVybiBhIFByb21pc2UgaW5zaWRlIG9mIHRpZHkuIiksai5lbmRTY29wZShpKSxpfWNhdGNoKGkpe3Rocm93IGouZW5kU2NvcGUobnVsbCksaX19O3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkociwibmFtZSIse3ZhbHVlOnQsY29uZmlndXJhYmxlOiEwfSkscn0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBXRihuLGUpe2NvbnN0IHQ9TyhuLCJyZWFsIiwiY29tcGxleCIpLHM9TyhlLCJpbWFnIiwiY29tcGxleCIpO05uKHQuc2hhcGUscy5zaGFwZSxgcmVhbCBhbmQgaW1hZyBzaGFwZXMsICR7dC5zaGFwZX0gYW5kICR7cy5zaGFwZX0sIG11c3QgbWF0Y2ggaW4gY2FsbCB0byB0Zi5jb21wbGV4KCkuYCk7Y29uc3Qgcj17cmVhbDp0LGltYWc6c307cmV0dXJuIGoucnVuS2VybmVsKGFtLHIpfWNvbnN0IHlvPUcoe2NvbXBsZXhfOldGfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24geWkobixlLHQscyl7aWYocz09bnVsbClzPXdhKG4pO2Vsc2UgaWYocz09PSJjb21wbGV4NjQiKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGNvbnN0cnVjdCBhIGNvbXBsZXg2NCB0ZW5zb3IgZGlyZWN0bHkuIFBsZWFzZSB1c2UgdGYuY29tcGxleChyZWFsLCBpbWFnKS4iKTtpZihrJChuKXx8TiQobikpe2lmKHMhPT0iZmxvYXQzMiImJnMhPT0iaW50MzIiKXRocm93IG5ldyBFcnJvcihgQ3JlYXRpbmcgdGVuc29yIGZyb20gR1BVIGRhdGEgb25seSBzdXBwb3J0cyAnZmxvYXQzMid8J2ludDMyJyBkdHlwZSwgd2hpbGUgdGhlIGR0eXBlIGlzICR7c30uYCk7cmV0dXJuIGouYmFja2VuZC5jcmVhdGVUZW5zb3JGcm9tR1BVRGF0YShuLGV8fHQscyl9aWYoIWNuKG4pJiYhQXJyYXkuaXNBcnJheShuKSYmdHlwZW9mIG4hPSJudW1iZXIiJiZ0eXBlb2YgbiE9ImJvb2xlYW4iJiZ0eXBlb2YgbiE9InN0cmluZyIpdGhyb3cgbmV3IEVycm9yKCJ2YWx1ZXMgcGFzc2VkIHRvIHRlbnNvcih2YWx1ZXMpIG11c3QgYmUgYSBudW1iZXIvYm9vbGVhbi9zdHJpbmcgb3IgYW4gYXJyYXkgb2YgbnVtYmVycy9ib29sZWFucy9zdHJpbmdzLCBvciBhIFR5cGVkQXJyYXkiKTtpZihlIT1udWxsKXtrcyhlKTtjb25zdCByPWNlKGUpLG89Y2UodCk7QShyPT09bywoKT0+YEJhc2VkIG9uIHRoZSBwcm92aWRlZCBzaGFwZSwgWyR7ZX1dLCB0aGUgdGVuc29yIHNob3VsZCBoYXZlICR7cn0gdmFsdWVzIGJ1dCBoYXMgJHtvfWApO2ZvcihsZXQgaT0wO2k8dC5sZW5ndGg7KytpKXtjb25zdCBhPXRbaV0sbD1pPT09dC5sZW5ndGgtMT9hIT09Y2UoZS5zbGljZShpKSk6ITA7QSh0W2ldPT09ZVtpXXx8IWwsKCk9PmBFcnJvciBjcmVhdGluZyBhIG5ldyBUZW5zb3IuIEluZmVycmVkIHNoYXBlICgke3R9KSBkb2VzIG5vdCBtYXRjaCB0aGUgcHJvdmlkZWQgc2hhcGUgKCR7ZX0pLiBgKX19cmV0dXJuIWNuKG4pJiYhQXJyYXkuaXNBcnJheShuKSYmKG49W25dKSxlPWV8fHQsbj1zIT09InN0cmluZyI/Z2kobixzKTpHcihuLFtdLCEwKSxqLm1ha2VUZW5zb3IobixlLHMpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGVyKG4sZSx0KXtjb25zdCBzPUhyKG4sdCk7cmV0dXJuIHlpKG4sZSxzLHQpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IG9hPXtmbG9hdDMyOjQsZmxvYXQxNjoyLGludDMyOjQsdWludDE2OjIsdWludDg6MSxib29sOjEsY29tcGxleDY0Ojh9O2NsYXNzICRye3N0YXRpYyBqb2luKGUpe3JldHVybiBuZXcgJHIoZSkuc2xpY2UoKX1jb25zdHJ1Y3RvcihlKXtpZih0aGlzLnNoYXJkcz1bXSx0aGlzLnByZXZpb3VzU2hhcmRJbmRleD0wLGU9PW51bGx8fChlIGluc3RhbmNlb2YgQXJyYXl8fChlPVtlXSksZT1lLm1hcChzPT5jbihzKT9zLmJ1ZmZlcjpzKSxlLmxlbmd0aD09PTApKXJldHVybjt0aGlzLmJ1ZmZlclVuaWZvcm1TaXplPWVbMF0uYnl0ZUxlbmd0aDtsZXQgdD0wO2ZvcihsZXQgcz0wO3M8ZS5sZW5ndGg7cysrKXtjb25zdCByPWVbc107cyE9PWUubGVuZ3RoLTEmJnIuYnl0ZUxlbmd0aCE9PXRoaXMuYnVmZmVyVW5pZm9ybVNpemUmJih0aGlzLmJ1ZmZlclVuaWZvcm1TaXplPXZvaWQgMCk7Y29uc3Qgbz10K3IuYnl0ZUxlbmd0aDt0aGlzLnNoYXJkcy5wdXNoKHtidWZmZXI6cixzdGFydDp0LGVuZDpvfSksdD1vfXRoaXMuc2hhcmRzLmxlbmd0aD09PTAmJih0aGlzLmJ5dGVMZW5ndGg9MCksdGhpcy5ieXRlTGVuZ3RoPXRoaXMuc2hhcmRzW3RoaXMuc2hhcmRzLmxlbmd0aC0xXS5lbmR9c2xpY2UoZT0wLHQ9dGhpcy5ieXRlTGVuZ3RoKXtpZih0aGlzLnNoYXJkcy5sZW5ndGg9PT0wKXJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7aWYoZT1pc05hTihOdW1iZXIoZSkpPzA6ZSx0PWlzTmFOKE51bWJlcih0KSk/MDp0LGU9TWF0aC5tYXgoMCxlKSx0PU1hdGgubWluKHRoaXMuYnl0ZUxlbmd0aCx0KSx0PD1lKXJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7Y29uc3Qgcz10aGlzLmZpbmRTaGFyZEZvckJ5dGUoZSk7aWYocz09PS0xKXRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgc3RhcnQgc2hhcmQgZm9yIGJ5dGUgJHtlfWApO2NvbnN0IHI9dC1lLG89bmV3IEFycmF5QnVmZmVyKHIpLGk9bmV3IFVpbnQ4QXJyYXkobyk7bGV0IGE9MDtmb3IobGV0IGw9cztsPHRoaXMuc2hhcmRzLmxlbmd0aDtsKyspe2NvbnN0IGM9dGhpcy5zaGFyZHNbbF0scD1lK2EtYy5zdGFydCxmPWEseT1NYXRoLm1pbih0LGMuZW5kKS1jLnN0YXJ0LHc9bmV3IFVpbnQ4QXJyYXkoYy5idWZmZXIscCx5LXApO2lmKGkuc2V0KHcsZiksYSs9dy5sZW5ndGgsdDxjLmVuZClicmVha31yZXR1cm4gb31maW5kU2hhcmRGb3JCeXRlKGUpe2lmKHRoaXMuc2hhcmRzLmxlbmd0aD09PTB8fGU8MHx8ZT49dGhpcy5ieXRlTGVuZ3RoKXJldHVybi0xO2lmKHRoaXMuYnVmZmVyVW5pZm9ybVNpemUhPW51bGwpcmV0dXJuIHRoaXMucHJldmlvdXNTaGFyZEluZGV4PU1hdGguZmxvb3IoZS90aGlzLmJ1ZmZlclVuaWZvcm1TaXplKSx0aGlzLnByZXZpb3VzU2hhcmRJbmRleDtmdW5jdGlvbiB0KHIpe3JldHVybiBlPHIuc3RhcnQ/LTE6ZT49ci5lbmQ/MTowfWlmKHQodGhpcy5zaGFyZHNbdGhpcy5wcmV2aW91c1NoYXJkSW5kZXhdKT09PTApcmV0dXJuIHRoaXMucHJldmlvdXNTaGFyZEluZGV4O2NvbnN0IHM9VUYodGhpcy5zaGFyZHMsdCk7cmV0dXJuIHM9PT0tMT8tMToodGhpcy5wcmV2aW91c1NoYXJkSW5kZXg9cyx0aGlzLnByZXZpb3VzU2hhcmRJbmRleCl9fWZ1bmN0aW9uIFVGKG4sZSl7bGV0IHQ9MCxzPW4ubGVuZ3RoO2Zvcig7dDw9czspe2NvbnN0IHI9TWF0aC5mbG9vcigocy10KS8yKSt0LG89ZShuW3JdKTtpZihvPT09MClyZXR1cm4gcjtvPDA/cz1yOnQ9cisxfXJldHVybi0xfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGpGKCl7b2UoKS5zZXQoIlBST0QiLCEwKX1mdW5jdGlvbiBHRigpe29lKCkuc2V0KCJERUJVRyIsITApfWZ1bmN0aW9uIEhGKCl7b2UoKS5zZXQoIkRFUFJFQ0FUSU9OX1dBUk5JTkdTX0VOQUJMRUQiLCExKSxjb25zb2xlLndhcm4oIlRlbnNvckZsb3cuanMgZGVwcmVjYXRpb24gd2FybmluZ3MgaGF2ZSBiZWVuIGRpc2FibGVkLiIpfWZ1bmN0aW9uIHFGKG4pe29lKCkuZ2V0Qm9vbCgiREVQUkVDQVRJT05fV0FSTklOR1NfRU5BQkxFRCIpJiZjb25zb2xlLndhcm4obisiIFlvdSBjYW4gZGlzYWJsZSBkZXByZWNhdGlvbiB3YXJuaW5ncyB3aXRoIHRmLmRpc2FibGVEZXByZWNhdGlvbldhcm5pbmdzKCkuIil9ZnVuY3Rpb24gS0YoKXtqLmRpc3Bvc2VWYXJpYWJsZXMoKX1mdW5jdGlvbiBtcigpe3JldHVybiBqfWZ1bmN0aW9uIHowKCl7cmV0dXJuIGoubWVtb3J5KCl9ZnVuY3Rpb24gWEYobil7cmV0dXJuIGoucHJvZmlsZShuKX1mdW5jdGlvbiByZShuLGUpe3JldHVybiBqLnRpZHkobixlKX1mdW5jdGlvbiBZZShuKXtPMShuKS5mb3JFYWNoKHQ9PnQuZGlzcG9zZSgpKX1mdW5jdGlvbiBlbihuKXtyZXR1cm4gai5rZWVwKG4pfWZ1bmN0aW9uIFlGKG4pe3JldHVybiBqLnRpbWUobil9ZnVuY3Rpb24gUUYobil7cmV0dXJuIGouc2V0QmFja2VuZChuKX1mdW5jdGlvbiBFJCgpe3JldHVybiBqLnJlYWR5KCl9ZnVuY3Rpb24gejEoKXtyZXR1cm4gai5iYWNrZW5kTmFtZX1mdW5jdGlvbiBaRihuKXtqLnJlbW92ZUJhY2tlbmQobil9ZnVuY3Rpb24gSkYobil7cmV0dXJuIGouZmluZEJhY2tlbmQobil9ZnVuY3Rpb24gZTMobil7cmV0dXJuIGouZmluZEJhY2tlbmRGYWN0b3J5KG4pfWZ1bmN0aW9uIE0xKG4sZSx0PTEpe3JldHVybiBqLnJlZ2lzdGVyQmFja2VuZChuLGUsdCl9ZnVuY3Rpb24gQjEoKXtyZXR1cm4gai5iYWNrZW5kfWZ1bmN0aW9uIHQzKG4sZSl7b2UoKS5zZXRQbGF0Zm9ybShuLGUpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGFpPTQ7YXN5bmMgZnVuY3Rpb24gTTAobixlKXtjb25zdCB0PVtdLHM9W10scj1BcnJheS5pc0FycmF5KG4pP24ubWFwKGk9PmkubmFtZSk6T2JqZWN0LmtleXMobik7Zm9yKGxldCBpPTA7aTxyLmxlbmd0aDsrK2kpe2NvbnN0IGE9cltpXSxsPUFycmF5LmlzQXJyYXkobik/bltpXS50ZW5zb3I6blthXTtpZihsLmR0eXBlIT09ImZsb2F0MzIiJiZsLmR0eXBlIT09ImludDMyIiYmbC5kdHlwZSE9PSJib29sIiYmbC5kdHlwZSE9PSJzdHJpbmciJiZsLmR0eXBlIT09ImNvbXBsZXg2NCIpdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBkdHlwZSBpbiB3ZWlnaHQgJyR7YX0nOiAke2wuZHR5cGV9YCk7Y29uc3QgYz17bmFtZTphLHNoYXBlOmwuc2hhcGUsZHR5cGU6bC5kdHlwZX07aWYobC5kdHlwZT09PSJzdHJpbmciKXtjb25zdCBoPW5ldyBQcm9taXNlKGFzeW5jIHA9Pntjb25zdCBmPWF3YWl0IGwuYnl0ZXMoKSxnPWYucmVkdWNlKChiLHYpPT5iK3YubGVuZ3RoLDApK2FpKmYubGVuZ3RoLHk9bmV3IFVpbnQ4QXJyYXkoZyk7bGV0IHc9MDtmb3IobGV0IGI9MDtiPGYubGVuZ3RoO2IrKyl7Y29uc3Qgdj1mW2JdLFM9bmV3IFVpbnQ4QXJyYXkobmV3IFVpbnQzMkFycmF5KFt2Lmxlbmd0aF0pLmJ1ZmZlcik7eS5zZXQoUyx3KSx3Kz1haSx5LnNldCh2LHcpLHcrPXYubGVuZ3RofXAoeSl9KTtzLnB1c2goaCl9ZWxzZSBzLnB1c2gobC5kYXRhKCkpO2UhPW51bGwmJihjLmdyb3VwPWUpLHQucHVzaChjKX1jb25zdCBvPWF3YWl0IFByb21pc2UuYWxsKHMpO3JldHVybntkYXRhOnIzKG8pLHNwZWNzOnR9fWZ1bmN0aW9uIFIkKG4sZSl7Y29uc3QgdD1uZXcgJHIobikscz17fTtsZXQgcj0wO2Zvcihjb25zdCBvIG9mIGUpe2NvbnN0IGk9bjMobywoYSxsKT0+dC5zbGljZShyK2EscitsKSk7c1tvLm5hbWVdPUQkKG8sdC5zbGljZShyLHIraSkpLHIrPWl9cmV0dXJuIHN9ZnVuY3Rpb24gbjMobixlKXtjb25zdCB0PWNlKG4uc2hhcGUpO2xldCBzO2lmKCJxdWFudGl6YXRpb24iaW4gbil7Y29uc3Qgcj1uLnF1YW50aXphdGlvbjtzPW9hW3IuZHR5cGVdfWVsc2UgaWYobi5kdHlwZT09PSJzdHJpbmciKXtsZXQgcj0wO2ZvcihsZXQgbz0wO288dDtvKyspcis9YWkrbmV3IFVpbnQzMkFycmF5KGUocixyK2FpKSlbMF07cmV0dXJuIHJ9ZWxzZSBzPW9hW24uZHR5cGVdO3JldHVybiB0KnN9YXN5bmMgZnVuY3Rpb24gczMobixlKXtjb25zdCB0PWNlKG4uc2hhcGUpO2xldCBzO2lmKCJxdWFudGl6YXRpb24iaW4gbil7Y29uc3Qgcj1uLnF1YW50aXphdGlvbjtzPW9hW3IuZHR5cGVdfWVsc2UgaWYobi5kdHlwZT09PSJzdHJpbmciKXtsZXQgcj0wO2ZvcihsZXQgbz0wO288dDtvKyspcis9YWkrbmV3IFVpbnQzMkFycmF5KGF3YWl0IGUocixyK2FpKSlbMF07cmV0dXJuIHJ9ZWxzZSBzPW9hW24uZHR5cGVdO3JldHVybiB0KnN9ZnVuY3Rpb24gRCQobixlKXtjb25zdCB0PW4ubmFtZSxzPW4uZHR5cGUscj1uLnNoYXBlLG89Y2Uocik7bGV0IGksYT0wO2lmKCJxdWFudGl6YXRpb24iaW4gbil7Y29uc3QgbD1uLnF1YW50aXphdGlvbjtpZihsLmR0eXBlPT09InVpbnQ4Inx8bC5kdHlwZT09PSJ1aW50MTYiKXtpZighKCJtaW4iaW4gbCYmInNjYWxlImluIGwpKXRocm93IG5ldyBFcnJvcihgV2VpZ2h0ICR7bi5uYW1lfSB3aXRoIHF1YW50aXphdGlvbiAke2wuZHR5cGV9IGRvZXNuJ3QgaGF2ZSBjb3JyZXNwb25kaW5nIG1ldGFkYXRhIG1pbiBhbmQgc2NhbGUuYCl9ZWxzZSBpZihsLmR0eXBlPT09ImZsb2F0MTYiKXtpZihzIT09ImZsb2F0MzIiKXRocm93IG5ldyBFcnJvcihgV2VpZ2h0ICR7bi5uYW1lfSBpcyBxdWFudGl6ZWQgd2l0aCAke2wuZHR5cGV9IHdoaWNoIG9ubHkgc3VwcG9ydHMgd2VpZ2h0cyBvZiB0eXBlIGZsb2F0MzIgbm90ICR7c30uYCl9ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFdlaWdodCAke24ubmFtZX0gaGFzIHVua25vd24gcXVhbnRpemF0aW9uIGR0eXBlICR7bC5kdHlwZX0uIFN1cHBvcnRlZCBxdWFudGl6YXRpb24gZHR5cGVzIGFyZTogJ3VpbnQ4JywgJ3VpbnQxNicsIGFuZCAnZmxvYXQxNicuYCk7Y29uc3QgYz1vYVtsLmR0eXBlXSxoPWwuZHR5cGU9PT0idWludDgiP25ldyBVaW50OEFycmF5KGUpOm5ldyBVaW50MTZBcnJheShlKTtpZihzPT09ImZsb2F0MzIiKWlmKGwuZHR5cGU9PT0idWludDgifHxsLmR0eXBlPT09InVpbnQxNiIpe2k9bmV3IEZsb2F0MzJBcnJheShoLmxlbmd0aCk7Zm9yKGxldCBwPTA7cDxoLmxlbmd0aDtwKyspe2NvbnN0IGY9aFtwXTtpW3BdPWYqbC5zY2FsZStsLm1pbn19ZWxzZSBpZihsLmR0eXBlPT09ImZsb2F0MTYiKWk9YzMoKShoKTtlbHNlIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcXVhbnRpemF0aW9uIHR5cGUgJHtsLmR0eXBlfSBmb3Igd2VpZ2h0IHR5cGUgZmxvYXQzMi5gKTtlbHNlIGlmKHM9PT0iaW50MzIiKXtpZihsLmR0eXBlIT09InVpbnQ4IiYmbC5kdHlwZSE9PSJ1aW50MTYiKXRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcXVhbnRpemF0aW9uIHR5cGUgJHtsLmR0eXBlfSBmb3Igd2VpZ2h0IHR5cGUgaW50MzIuYCk7aT1uZXcgSW50MzJBcnJheShoLmxlbmd0aCk7Zm9yKGxldCBwPTA7cDxoLmxlbmd0aDtwKyspe2NvbnN0IGY9aFtwXTtpW3BdPU1hdGgucm91bmQoZipsLnNjYWxlK2wubWluKX19ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGR0eXBlIGluIHdlaWdodCAnJHt0fSc6ICR7c31gKTthKz1vKmN9ZWxzZSBpZihzPT09InN0cmluZyIpe2NvbnN0IGw9Y2Uobi5zaGFwZSk7aT1bXTtmb3IobGV0IGM9MDtjPGw7YysrKXtjb25zdCBoPW5ldyBVaW50MzJBcnJheShlLnNsaWNlKGEsYSthaSkpWzBdO2ErPWFpO2NvbnN0IHA9bmV3IFVpbnQ4QXJyYXkoZS5zbGljZShhLGEraCkpO2kucHVzaChwKSxhKz1ofX1lbHNle2NvbnN0IGw9b2Fbc107aWYocz09PSJmbG9hdDMyIilpPW5ldyBGbG9hdDMyQXJyYXkoZSk7ZWxzZSBpZihzPT09ImludDMyIilpPW5ldyBJbnQzMkFycmF5KGUpO2Vsc2UgaWYocz09PSJib29sIilpPW5ldyBVaW50OEFycmF5KGUpO2Vsc2UgaWYocz09PSJjb21wbGV4NjQiKXtpPW5ldyBGbG9hdDMyQXJyYXkoZSk7Y29uc3QgYz1uZXcgRmxvYXQzMkFycmF5KGkubGVuZ3RoLzIpLGg9bmV3IEZsb2F0MzJBcnJheShpLmxlbmd0aC8yKTtmb3IobGV0IHk9MDt5PGMubGVuZ3RoO3krKyljW3ldPWlbeSoyXSxoW3ldPWlbeSoyKzFdO2NvbnN0IHA9ZXIoYyxyLCJmbG9hdDMyIiksZj1lcihoLHIsImZsb2F0MzIiKSxnPXlvKHAsZik7cmV0dXJuIHAuZGlzcG9zZSgpLGYuZGlzcG9zZSgpLGd9ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGR0eXBlIGluIHdlaWdodCAnJHt0fSc6ICR7c31gKTthKz1vKmx9cmV0dXJuIGVyKGkscixzKX1hc3luYyBmdW5jdGlvbiB4ayhuLGUsdCl7bGV0IHM9bmV3IFVpbnQ4QXJyYXkoZSk7Zm9yKDtzLmJ5dGVMZW5ndGg8dDspe2NvbnN0e2RvbmU6cix2YWx1ZTpvfT1hd2FpdCBuLnJlYWQoKTtpZihyJiZvPT1udWxsKXtjb25zdCBhPXQtcy5ieXRlTGVuZ3RoO3Rocm93IG5ldyBFcnJvcihgUmVhZGVyIGlzIGRvbmUgYnV0ICR7YX0gYnl0ZXMgYXJlIHN0aWxsIGV4cGVjdGVkYCl9Y29uc3QgaT1uZXcgVWludDhBcnJheShzLmxlbmd0aCtvLmJ5dGVMZW5ndGgpO2kuc2V0KHMsMCksaS5zZXQobmV3IFVpbnQ4QXJyYXkobykscy5sZW5ndGgpLHM9aX1yZXR1cm4gcy5idWZmZXJ9YXN5bmMgZnVuY3Rpb24gQSQobixlKXtjb25zdCB0PXt9LHM9bi5nZXRSZWFkZXIoKTtsZXQgcj1uZXcgQXJyYXlCdWZmZXIoMCk7Zm9yKGNvbnN0IG8gb2YgZSl7Y29uc3QgaT1hd2FpdCBzMyhvLGFzeW5jKGMsaCk9PihyPWF3YWl0IHhrKHMscixoKSxyLnNsaWNlKGMsaCkpKTtyPWF3YWl0IHhrKHMscixpKTtjb25zdCBhPXIuc2xpY2UoMCxpKTtyPXIuc2xpY2UoaSk7Y29uc3QgbD1EJChvLGEpO2lmKHRbby5uYW1lXT1sLHoxKCk9PT0id2ViZ3B1Iil7Y29uc3QgYz1CMSgpOyJ1cGxvYWRUb0dQVSJpbiBjJiZjZShsLnNoYXBlKT49b2UoKS5nZXQoIldFQkdQVV9DUFVfSEFORE9GRl9TSVpFX1RIUkVTSE9MRCIpJiZjLnVwbG9hZFRvR1BVKGwuZGF0YUlkKX19cmV0dXJuIHR9ZnVuY3Rpb24gcjMobil7aWYobj09PW51bGwpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGlucHV0IHZhbHVlOiAke0pTT04uc3RyaW5naWZ5KG4pfWApO2xldCBlPTA7Y29uc3QgdD1bXTtuLmZvckVhY2gobz0+e2lmKGUrPW8uYnl0ZUxlbmd0aCx0LnB1c2goby5ieXRlTGVuZ3RoPT09by5idWZmZXIuYnl0ZUxlbmd0aD9vOm5ldyBvLmNvbnN0cnVjdG9yKG8pKSwhKG8gaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXl8fG8gaW5zdGFuY2VvZiBJbnQzMkFycmF5fHxvIGluc3RhbmNlb2YgVWludDhBcnJheSkpdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBUeXBlZEFycmF5IHN1YnR5cGU6ICR7by5jb25zdHJ1Y3Rvci5uYW1lfWApfSk7Y29uc3Qgcz1uZXcgVWludDhBcnJheShlKTtsZXQgcj0wO3JldHVybiB0LmZvckVhY2gobz0+e3Muc2V0KG5ldyBVaW50OEFycmF5KG8uYnVmZmVyKSxyKSxyKz1vLmJ5dGVMZW5ndGh9KSxzLmJ1ZmZlcn1jb25zdCBWMT10eXBlb2YgQnVmZmVyPCJ1IiYmKHR5cGVvZiBCbG9iPiJ1Inx8dHlwZW9mIGF0b2I+InUifHx0eXBlb2YgYnRvYT4idSIpO2Z1bmN0aW9uIGJrKG4pe3JldHVybiBWMT9CdWZmZXIuYnl0ZUxlbmd0aChuLCJ1dGY4Iik6bmV3IEJsb2IoW25dKS5zaXplfWZ1bmN0aW9uIG8zKG4pe2lmKFYxKXJldHVybiBCdWZmZXIuZnJvbShuKS50b1N0cmluZygiYmFzZTY0Iik7Y29uc3QgZT1uZXcgVWludDhBcnJheShuKTtsZXQgdD0iIjtmb3IobGV0IHM9MCxyPWUubGVuZ3RoO3M8cjtzKyspdCs9U3RyaW5nLmZyb21DaGFyQ29kZShlW3NdKTtyZXR1cm4gYnRvYSh0KX1mdW5jdGlvbiBpMyhuKXtpZihWMSl7Y29uc3Qgcz1CdWZmZXIuZnJvbShuLCJiYXNlNjQiKTtyZXR1cm4gcy5idWZmZXIuc2xpY2Uocy5ieXRlT2Zmc2V0LHMuYnl0ZU9mZnNldCtzLmJ5dGVMZW5ndGgpfWNvbnN0IGU9YXRvYihuKSx0PW5ldyBVaW50OEFycmF5KGUubGVuZ3RoKTtmb3IobGV0IHM9MDtzPGUubGVuZ3RoOysrcyl0LnNldChbZS5jaGFyQ29kZUF0KHMpXSxzKTtyZXR1cm4gdC5idWZmZXJ9ZnVuY3Rpb24gXyQobil7cmV0dXJuICRyLmpvaW4obil9ZnVuY3Rpb24gd2sobil7Zm9yKG49bi50cmltKCk7bi5lbmRzV2l0aCgiLyIpOyluPW4uc2xpY2UoMCxuLmxlbmd0aC0xKTtjb25zdCB0PW4uc3BsaXQoIi8iKTtyZXR1cm4gdFt0Lmxlbmd0aC0xXX1mdW5jdGlvbiBPJChuLGUpe2NvbnN0IHQ9e21vZGVsVG9wb2xvZ3k6bi5tb2RlbFRvcG9sb2d5LGZvcm1hdDpuLmZvcm1hdCxnZW5lcmF0ZWRCeTpuLmdlbmVyYXRlZEJ5LGNvbnZlcnRlZEJ5Om4uY29udmVydGVkQnksd2VpZ2h0c01hbmlmZXN0OmV9O3JldHVybiBuLnNpZ25hdHVyZSE9bnVsbCYmKHQuc2lnbmF0dXJlPW4uc2lnbmF0dXJlKSxuLnVzZXJEZWZpbmVkTWV0YWRhdGEhPW51bGwmJih0LnVzZXJEZWZpbmVkTWV0YWRhdGE9bi51c2VyRGVmaW5lZE1ldGFkYXRhKSxuLm1vZGVsSW5pdGlhbGl6ZXIhPW51bGwmJih0Lm1vZGVsSW5pdGlhbGl6ZXI9bi5tb2RlbEluaXRpYWxpemVyKSxuLmluaXRpYWxpemVyU2lnbmF0dXJlIT1udWxsJiYodC5pbml0aWFsaXplclNpZ25hdHVyZT1uLmluaXRpYWxpemVyU2lnbmF0dXJlKSxuLnRyYWluaW5nQ29uZmlnIT1udWxsJiYodC50cmFpbmluZ0NvbmZpZz1uLnRyYWluaW5nQ29uZmlnKSx0fWZ1bmN0aW9uIFcxKG4sZSx0KXtjb25zdCBzPXttb2RlbFRvcG9sb2d5Om4ubW9kZWxUb3BvbG9neSxmb3JtYXQ6bi5mb3JtYXQsZ2VuZXJhdGVkQnk6bi5nZW5lcmF0ZWRCeSxjb252ZXJ0ZWRCeTpuLmNvbnZlcnRlZEJ5fTtpZihuLnRyYWluaW5nQ29uZmlnIT1udWxsJiYocy50cmFpbmluZ0NvbmZpZz1uLnRyYWluaW5nQ29uZmlnKSxuLndlaWdodHNNYW5pZmVzdCE9bnVsbCl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJtb2RlbEpTT04gaGFzIHdlaWdodHNNYW5pZmVzdCBidXQgd2VpZ2h0U3BlY3MgaXMgbnVsbCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigibW9kZWxKU09OIGhhcyB3ZWlnaHRzTWFuaWZlc3QgYnV0IHdlaWdodERhdGEgaXMgbnVsbCIpO3Mud2VpZ2h0U3BlY3M9ZSxzLndlaWdodERhdGE9dH1yZXR1cm4gbi5zaWduYXR1cmUhPW51bGwmJihzLnNpZ25hdHVyZT1uLnNpZ25hdHVyZSksbi51c2VyRGVmaW5lZE1ldGFkYXRhIT1udWxsJiYocy51c2VyRGVmaW5lZE1ldGFkYXRhPW4udXNlckRlZmluZWRNZXRhZGF0YSksbi5tb2RlbEluaXRpYWxpemVyIT1udWxsJiYocy5tb2RlbEluaXRpYWxpemVyPW4ubW9kZWxJbml0aWFsaXplciksbi5pbml0aWFsaXplclNpZ25hdHVyZSE9bnVsbCYmKHMuaW5pdGlhbGl6ZXJTaWduYXR1cmU9bi5pbml0aWFsaXplclNpZ25hdHVyZSksc31hc3luYyBmdW5jdGlvbiBVMShuLGUpe2xldCB0LHM7cmV0dXJuIG4ud2VpZ2h0c01hbmlmZXN0IT1udWxsJiYoW3Qsc109YXdhaXQgZShuLndlaWdodHNNYW5pZmVzdCkpLFcxKG4sdCxzKX1mdW5jdGlvbiBzaChuKXtpZihuLm1vZGVsVG9wb2xvZ3kgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil0aHJvdyBuZXcgRXJyb3IoIkV4cGVjdGVkIEpTT04gbW9kZWwgdG9wb2xvZ3ksIHJlY2VpdmVkIEFycmF5QnVmZmVyLiIpO3JldHVybntkYXRlU2F2ZWQ6bmV3IERhdGUsbW9kZWxUb3BvbG9neVR5cGU6IkpTT04iLG1vZGVsVG9wb2xvZ3lCeXRlczpuLm1vZGVsVG9wb2xvZ3k9PW51bGw/MDpiayhKU09OLnN0cmluZ2lmeShuLm1vZGVsVG9wb2xvZ3kpKSx3ZWlnaHRTcGVjc0J5dGVzOm4ud2VpZ2h0U3BlY3M9PW51bGw/MDpiayhKU09OLnN0cmluZ2lmeShuLndlaWdodFNwZWNzKSksd2VpZ2h0RGF0YUJ5dGVzOm4ud2VpZ2h0RGF0YT09bnVsbD8wOm5ldyAkcihuLndlaWdodERhdGEpLmJ5dGVMZW5ndGh9fWZ1bmN0aW9uIEVmKG4pe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2YgbillLnB1c2goLi4udC53ZWlnaHRzKTtyZXR1cm4gZX1mdW5jdGlvbiBhMygpe2NvbnN0IG49dD0+e2xldCBzPXQ8PDEzLHI9MDtmb3IoOyhzJjgzODg2MDgpPT09MDspci09ODM4ODYwOCxzPDw9MTtyZXR1cm4gcyY9LTgzODg2MDkscis9OTQ3OTEyNzA0LHN8cn0sZT1uZXcgVWludDMyQXJyYXkoMjA0OCk7ZVswXT0wO2ZvcihsZXQgdD0xO3Q8MTAyNDt0KyspZVt0XT1uKHQpO2ZvcihsZXQgdD0xMDI0O3Q8MjA0ODt0KyspZVt0XT05Mzk1MjQwOTYrKHQtMTAyNDw8MTMpO3JldHVybiBlfWZ1bmN0aW9uIGwzKCl7Y29uc3Qgbj1uZXcgVWludDMyQXJyYXkoNjQpO25bMF09MCxuWzMxXT0xMTk5NTcwOTQ0LG5bMzJdPTIxNDc0ODM2NDgsbls2M109MzM0NzA1NDU5Mjtmb3IobGV0IGU9MTtlPDMxO2UrKyluW2VdPWU8PDIzO2ZvcihsZXQgZT0zMztlPDYzO2UrKyluW2VdPTIxNDc0ODM2NDgrKGUtMzI8PDIzKTtyZXR1cm4gbn1mdW5jdGlvbiB1Mygpe2NvbnN0IG49bmV3IFVpbnQzMkFycmF5KDY0KTtmb3IobGV0IGU9MDtlPDY0O2UrKyluW2VdPTEwMjQ7cmV0dXJuIG5bMF09blszMl09MCxufWZ1bmN0aW9uIGMzKCl7Y29uc3Qgbj1hMygpLGU9bDMoKSx0PXUzKCk7cmV0dXJuIHM9Pntjb25zdCByPW5ldyBBcnJheUJ1ZmZlcig0KnMubGVuZ3RoKSxvPW5ldyBVaW50MzJBcnJheShyKTtmb3IobGV0IGk9MDtpPHMubGVuZ3RoO2krKyl7Y29uc3QgYT1zW2ldLGw9blt0W2E+PjEwXSsoYSYxMDIzKV0rZVthPj4xMF07b1tpXT1sfXJldHVybiBuZXcgRmxvYXQzMkFycmF5KHIpfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBBdHtjb25zdHJ1Y3Rvcigpe3RoaXMuc2F2ZVJvdXRlcnM9W10sdGhpcy5sb2FkUm91dGVycz1bXX1zdGF0aWMgZ2V0SW5zdGFuY2UoKXtyZXR1cm4gQXQuaW5zdGFuY2U9PW51bGwmJihBdC5pbnN0YW5jZT1uZXcgQXQpLEF0Lmluc3RhbmNlfXN0YXRpYyByZWdpc3RlclNhdmVSb3V0ZXIoZSl7QXQuZ2V0SW5zdGFuY2UoKS5zYXZlUm91dGVycy5wdXNoKGUpfXN0YXRpYyByZWdpc3RlckxvYWRSb3V0ZXIoZSl7QXQuZ2V0SW5zdGFuY2UoKS5sb2FkUm91dGVycy5wdXNoKGUpfXN0YXRpYyBnZXRTYXZlSGFuZGxlcnMoZSl7cmV0dXJuIEF0LmdldEhhbmRsZXJzKGUsInNhdmUiKX1zdGF0aWMgZ2V0TG9hZEhhbmRsZXJzKGUsdCl7cmV0dXJuIEF0LmdldEhhbmRsZXJzKGUsImxvYWQiLHQpfXN0YXRpYyBnZXRIYW5kbGVycyhlLHQscyl7Y29uc3Qgcj1bXTtyZXR1cm4odD09PSJsb2FkIj9BdC5nZXRJbnN0YW5jZSgpLmxvYWRSb3V0ZXJzOkF0LmdldEluc3RhbmNlKCkuc2F2ZVJvdXRlcnMpLmZvckVhY2goaT0+e2NvbnN0IGE9aShlLHMpO2EhPT1udWxsJiZyLnB1c2goYSl9KSxyfX1jb25zdCBkMz1uPT5BdC5yZWdpc3RlclNhdmVSb3V0ZXIobiksaDM9bj0+QXQucmVnaXN0ZXJMb2FkUm91dGVyKG4pLEYkPW49PkF0LmdldFNhdmVIYW5kbGVycyhuKSxwMz0obixlKT0+QXQuZ2V0TG9hZEhhbmRsZXJzKG4sZSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgQjA9InRlbnNvcmZsb3dqcyIsVjA9MSxRaT0ibW9kZWxzX3N0b3JlIixabz0ibW9kZWxfaW5mb19zdG9yZSI7ZnVuY3Rpb24gTCQoKXtpZighb2UoKS5nZXRCb29sKCJJU19CUk9XU0VSIikpdGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gb2J0YWluIEluZGV4ZWREQiBmYWN0b3J5IGJlY2F1c2UgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnRpcyBub3QgYSB3ZWIgYnJvd3Nlci4iKTtjb25zdCBuPXR5cGVvZiB3aW5kb3c+InUiP3NlbGY6d2luZG93LGU9bi5pbmRleGVkREJ8fG4ubW96SW5kZXhlZERCfHxuLndlYmtpdEluZGV4ZWREQnx8bi5tc0luZGV4ZWREQnx8bi5zaGltSW5kZXhlZERCO2lmKGU9PW51bGwpdGhyb3cgbmV3IEVycm9yKCJUaGUgY3VycmVudCBicm93c2VyIGRvZXMgbm90IGFwcGVhciB0byBzdXBwb3J0IEluZGV4ZWREQi4iKTtyZXR1cm4gZX1mdW5jdGlvbiBXMChuKXtjb25zdCBlPW4ucmVzdWx0O2UuY3JlYXRlT2JqZWN0U3RvcmUoUWkse2tleVBhdGg6Im1vZGVsUGF0aCJ9KSxlLmNyZWF0ZU9iamVjdFN0b3JlKFpvLHtrZXlQYXRoOiJtb2RlbFBhdGgifSl9Y2xhc3MgaWF7Y29uc3RydWN0b3IoZSl7aWYodGhpcy5pbmRleGVkREI9TCQoKSxlPT1udWxsfHwhZSl0aHJvdyBuZXcgRXJyb3IoIkZvciBJbmRleGVkREIsIG1vZGVsUGF0aCBtdXN0IG5vdCBiZSBudWxsLCB1bmRlZmluZWQgb3IgZW1wdHkuIik7dGhpcy5tb2RlbFBhdGg9ZX1hc3luYyBzYXZlKGUpe2lmKGUubW9kZWxUb3BvbG9neSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXRocm93IG5ldyBFcnJvcigiQnJvd3NlckxvY2FsU3RvcmFnZS5zYXZlKCkgZG9lcyBub3Qgc3VwcG9ydCBzYXZpbmcgbW9kZWwgdG9wb2xvZ3kgaW4gYmluYXJ5IGZvcm1hdHMgeWV0LiIpO3JldHVybiB0aGlzLmRhdGFiYXNlQWN0aW9uKHRoaXMubW9kZWxQYXRoLGUpfWFzeW5jIGxvYWQoKXtyZXR1cm4gdGhpcy5kYXRhYmFzZUFjdGlvbih0aGlzLm1vZGVsUGF0aCl9ZGF0YWJhc2VBY3Rpb24oZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKHMscik9Pntjb25zdCBvPXRoaXMuaW5kZXhlZERCLm9wZW4oQjAsVjApO28ub251cGdyYWRlbmVlZGVkPSgpPT5XMChvKSxvLm9uc3VjY2Vzcz0oKT0+e2NvbnN0IGk9by5yZXN1bHQ7aWYodD09bnVsbCl7Y29uc3QgYT1pLnRyYW5zYWN0aW9uKFFpLCJyZWFkb25seSIpLGM9YS5vYmplY3RTdG9yZShRaSkuZ2V0KHRoaXMubW9kZWxQYXRoKTtjLm9uc3VjY2Vzcz0oKT0+e2lmKGMucmVzdWx0PT1udWxsKXJldHVybiBpLmNsb3NlKCkscihuZXcgRXJyb3IoYENhbm5vdCBmaW5kIG1vZGVsIHdpdGggcGF0aCAnJHt0aGlzLm1vZGVsUGF0aH0nIGluIEluZGV4ZWREQi5gKSk7cyhjLnJlc3VsdC5tb2RlbEFydGlmYWN0cyl9LGMub25lcnJvcj1oPT4oaS5jbG9zZSgpLHIoYy5lcnJvcikpLGEub25jb21wbGV0ZT0oKT0+aS5jbG9zZSgpfWVsc2V7dC53ZWlnaHREYXRhPSRyLmpvaW4odC53ZWlnaHREYXRhKTtjb25zdCBhPXNoKHQpLGw9aS50cmFuc2FjdGlvbihabywicmVhZHdyaXRlIik7bGV0IGM9bC5vYmplY3RTdG9yZShabyksaDt0cnl7aD1jLnB1dCh7bW9kZWxQYXRoOnRoaXMubW9kZWxQYXRoLG1vZGVsQXJ0aWZhY3RzSW5mbzphfSl9Y2F0Y2goZil7cmV0dXJuIHIoZil9bGV0IHA7aC5vbnN1Y2Nlc3M9KCk9PntwPWkudHJhbnNhY3Rpb24oUWksInJlYWR3cml0ZSIpO2NvbnN0IGY9cC5vYmplY3RTdG9yZShRaSk7bGV0IGc7dHJ5e2c9Zi5wdXQoe21vZGVsUGF0aDp0aGlzLm1vZGVsUGF0aCxtb2RlbEFydGlmYWN0czp0LG1vZGVsQXJ0aWZhY3RzSW5mbzphfSl9Y2F0Y2goeSl7cmV0dXJuIHIoeSl9Zy5vbnN1Y2Nlc3M9KCk9PnMoe21vZGVsQXJ0aWZhY3RzSW5mbzphfSksZy5vbmVycm9yPXk9PntjPWwub2JqZWN0U3RvcmUoWm8pO2NvbnN0IHc9Yy5kZWxldGUodGhpcy5tb2RlbFBhdGgpO3cub25zdWNjZXNzPSgpPT4oaS5jbG9zZSgpLHIoZy5lcnJvcikpLHcub25lcnJvcj1iPT4oaS5jbG9zZSgpLHIoZy5lcnJvcikpfX0saC5vbmVycm9yPWY9PihpLmNsb3NlKCkscihoLmVycm9yKSksbC5vbmNvbXBsZXRlPSgpPT57cD09bnVsbD9pLmNsb3NlKCk6cC5vbmNvbXBsZXRlPSgpPT5pLmNsb3NlKCl9fX0sby5vbmVycm9yPWk9PnIoby5lcnJvcil9KX19aWEuVVJMX1NDSEVNRT0iaW5kZXhlZGRiOi8vIjtjb25zdCBQJD1uPT5vZSgpLmdldEJvb2woIklTX0JST1dTRVIiKSYmIUFycmF5LmlzQXJyYXkobikmJm4uc3RhcnRzV2l0aChpYS5VUkxfU0NIRU1FKT9mMyhuLnNsaWNlKGlhLlVSTF9TQ0hFTUUubGVuZ3RoKSk6bnVsbDtBdC5yZWdpc3RlclNhdmVSb3V0ZXIoUCQpO0F0LnJlZ2lzdGVyTG9hZFJvdXRlcihQJCk7ZnVuY3Rpb24gZjMobil7cmV0dXJuIG5ldyBpYShuKX1mdW5jdGlvbiBtMyhuKXtyZXR1cm4gbi5zdGFydHNXaXRoKGlhLlVSTF9TQ0hFTUUpP24uc2xpY2UoaWEuVVJMX1NDSEVNRS5sZW5ndGgpOm59Y2xhc3MgZzN7Y29uc3RydWN0b3IoKXt0aGlzLmluZGV4ZWREQj1MJCgpfWFzeW5jIGxpc3RNb2RlbHMoKXtyZXR1cm4gbmV3IFByb21pc2UoKGUsdCk9Pntjb25zdCBzPXRoaXMuaW5kZXhlZERCLm9wZW4oQjAsVjApO3Mub251cGdyYWRlbmVlZGVkPSgpPT5XMChzKSxzLm9uc3VjY2Vzcz0oKT0+e2NvbnN0IHI9cy5yZXN1bHQsbz1yLnRyYW5zYWN0aW9uKFpvLCJyZWFkb25seSIpLGE9by5vYmplY3RTdG9yZShabykuZ2V0QWxsKCk7YS5vbnN1Y2Nlc3M9KCk9Pntjb25zdCBsPXt9O2Zvcihjb25zdCBjIG9mIGEucmVzdWx0KWxbYy5tb2RlbFBhdGhdPWMubW9kZWxBcnRpZmFjdHNJbmZvO2UobCl9LGEub25lcnJvcj1sPT4oci5jbG9zZSgpLHQoYS5lcnJvcikpLG8ub25jb21wbGV0ZT0oKT0+ci5jbG9zZSgpfSxzLm9uZXJyb3I9cj0+dChzLmVycm9yKX0pfWFzeW5jIHJlbW92ZU1vZGVsKGUpe3JldHVybiBlPW0zKGUpLG5ldyBQcm9taXNlKCh0LHMpPT57Y29uc3Qgcj10aGlzLmluZGV4ZWREQi5vcGVuKEIwLFYwKTtyLm9udXBncmFkZW5lZWRlZD0oKT0+VzAociksci5vbnN1Y2Nlc3M9KCk9Pntjb25zdCBvPXIucmVzdWx0LGk9by50cmFuc2FjdGlvbihabywicmVhZHdyaXRlIiksYT1pLm9iamVjdFN0b3JlKFpvKSxsPWEuZ2V0KGUpO2xldCBjO2wub25zdWNjZXNzPSgpPT57aWYobC5yZXN1bHQ9PW51bGwpcmV0dXJuIG8uY2xvc2UoKSxzKG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgbW9kZWwgd2l0aCBwYXRoICcke2V9JyBpbiBJbmRleGVkREIuYCkpO3tjb25zdCBoPWEuZGVsZXRlKGUpLHA9KCk9PntjPW8udHJhbnNhY3Rpb24oUWksInJlYWR3cml0ZSIpO2NvbnN0IGc9Yy5vYmplY3RTdG9yZShRaSkuZGVsZXRlKGUpO2cub25zdWNjZXNzPSgpPT50KGwucmVzdWx0Lm1vZGVsQXJ0aWZhY3RzSW5mbyksZy5vbmVycm9yPXk9PnMobC5lcnJvcil9O2gub25zdWNjZXNzPXAsaC5vbmVycm9yPWY9PihwKCksby5jbG9zZSgpLHMobC5lcnJvcikpfX0sbC5vbmVycm9yPWg9PihvLmNsb3NlKCkscyhsLmVycm9yKSksaS5vbmNvbXBsZXRlPSgpPT57Yz09bnVsbD9vLmNsb3NlKCk6Yy5vbmNvbXBsZXRlPSgpPT5vLmNsb3NlKCl9fSxyLm9uZXJyb3I9bz0+cyhyLmVycm9yKX0pfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBmbz0iLyIsaWw9InRlbnNvcmZsb3dqc19tb2RlbHMiLHokPSJpbmZvIix5Mz0ibW9kZWxfdG9wb2xvZ3kiLHgzPSJ3ZWlnaHRfc3BlY3MiLGIzPSJ3ZWlnaHRfZGF0YSIsdzM9Im1vZGVsX21ldGFkYXRhIjtmdW5jdGlvbiBNJChuKXtyZXR1cm57aW5mbzpbaWwsbix6JF0uam9pbihmbyksdG9wb2xvZ3k6W2lsLG4seTNdLmpvaW4oZm8pLHdlaWdodFNwZWNzOltpbCxuLHgzXS5qb2luKGZvKSx3ZWlnaHREYXRhOltpbCxuLGIzXS5qb2luKGZvKSxtb2RlbE1ldGFkYXRhOltpbCxuLHczXS5qb2luKGZvKX19ZnVuY3Rpb24gQiQobil7Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LnZhbHVlcyhuKSl3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZSl9ZnVuY3Rpb24gdjMobil7Y29uc3QgZT1uLnNwbGl0KGZvKTtpZihlLmxlbmd0aDwzKXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBrZXkgZm9ybWF0OiAke259YCk7cmV0dXJuIGUuc2xpY2UoMSxlLmxlbmd0aC0xKS5qb2luKGZvKX1mdW5jdGlvbiBTMyhuKXtyZXR1cm4gbi5zdGFydHNXaXRoKGFhLlVSTF9TQ0hFTUUpP24uc2xpY2UoYWEuVVJMX1NDSEVNRS5sZW5ndGgpOm59Y2xhc3MgYWF7Y29uc3RydWN0b3IoZSl7aWYoIW9lKCkuZ2V0Qm9vbCgiSVNfQlJPV1NFUiIpfHx0eXBlb2Ygd2luZG93PiJ1Inx8dHlwZW9mIHdpbmRvdy5sb2NhbFN0b3JhZ2U+InUiKXRocm93IG5ldyBFcnJvcigiVGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgZG9lcyBub3Qgc3VwcG9ydCBsb2NhbCBzdG9yYWdlLiIpO2lmKHRoaXMuTFM9d2luZG93LmxvY2FsU3RvcmFnZSxlPT1udWxsfHwhZSl0aHJvdyBuZXcgRXJyb3IoIkZvciBsb2NhbCBzdG9yYWdlLCBtb2RlbFBhdGggbXVzdCBub3QgYmUgbnVsbCwgdW5kZWZpbmVkIG9yIGVtcHR5LiIpO3RoaXMubW9kZWxQYXRoPWUsdGhpcy5rZXlzPU0kKHRoaXMubW9kZWxQYXRoKX1hc3luYyBzYXZlKGUpe2lmKGUubW9kZWxUb3BvbG9neSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXRocm93IG5ldyBFcnJvcigiQnJvd3NlckxvY2FsU3RvcmFnZS5zYXZlKCkgZG9lcyBub3Qgc3VwcG9ydCBzYXZpbmcgbW9kZWwgdG9wb2xvZ3kgaW4gYmluYXJ5IGZvcm1hdHMgeWV0LiIpO3tjb25zdCB0PUpTT04uc3RyaW5naWZ5KGUubW9kZWxUb3BvbG9neSkscz1KU09OLnN0cmluZ2lmeShlLndlaWdodFNwZWNzKSxyPXNoKGUpLG89JHIuam9pbihlLndlaWdodERhdGEpO3RyeXt0aGlzLkxTLnNldEl0ZW0odGhpcy5rZXlzLmluZm8sSlNPTi5zdHJpbmdpZnkocikpLHRoaXMuTFMuc2V0SXRlbSh0aGlzLmtleXMudG9wb2xvZ3ksdCksdGhpcy5MUy5zZXRJdGVtKHRoaXMua2V5cy53ZWlnaHRTcGVjcyxzKSx0aGlzLkxTLnNldEl0ZW0odGhpcy5rZXlzLndlaWdodERhdGEsbzMobykpO2NvbnN0IGk9e2Zvcm1hdDplLmZvcm1hdCxnZW5lcmF0ZWRCeTplLmdlbmVyYXRlZEJ5LGNvbnZlcnRlZEJ5OmUuY29udmVydGVkQnksc2lnbmF0dXJlOmUuc2lnbmF0dXJlIT1udWxsP2Uuc2lnbmF0dXJlOnZvaWQgMCx1c2VyRGVmaW5lZE1ldGFkYXRhOmUudXNlckRlZmluZWRNZXRhZGF0YSE9bnVsbD9lLnVzZXJEZWZpbmVkTWV0YWRhdGE6dm9pZCAwLG1vZGVsSW5pdGlhbGl6ZXI6ZS5tb2RlbEluaXRpYWxpemVyIT1udWxsP2UubW9kZWxJbml0aWFsaXplcjp2b2lkIDAsaW5pdGlhbGl6ZXJTaWduYXR1cmU6ZS5pbml0aWFsaXplclNpZ25hdHVyZSE9bnVsbD9lLmluaXRpYWxpemVyU2lnbmF0dXJlOnZvaWQgMCx0cmFpbmluZ0NvbmZpZzplLnRyYWluaW5nQ29uZmlnIT1udWxsP2UudHJhaW5pbmdDb25maWc6dm9pZCAwfTtyZXR1cm4gdGhpcy5MUy5zZXRJdGVtKHRoaXMua2V5cy5tb2RlbE1ldGFkYXRhLEpTT04uc3RyaW5naWZ5KGkpKSx7bW9kZWxBcnRpZmFjdHNJbmZvOnJ9fWNhdGNoe3Rocm93IEIkKHRoaXMua2V5cyksbmV3IEVycm9yKGBGYWlsZWQgdG8gc2F2ZSBtb2RlbCAnJHt0aGlzLm1vZGVsUGF0aH0nIHRvIGxvY2FsIHN0b3JhZ2U6IHNpemUgcXVvdGEgYmVpbmcgZXhjZWVkZWQgaXMgYSBwb3NzaWJsZSBjYXVzZSBvZiB0aGlzIGZhaWx1cmU6IG1vZGVsVG9wb2xvZ3lCeXRlcz0ke3IubW9kZWxUb3BvbG9neUJ5dGVzfSwgd2VpZ2h0U3BlY3NCeXRlcz0ke3Iud2VpZ2h0U3BlY3NCeXRlc30sIHdlaWdodERhdGFCeXRlcz0ke3Iud2VpZ2h0RGF0YUJ5dGVzfS5gKX19fWFzeW5jIGxvYWQoKXtjb25zdCBlPUpTT04ucGFyc2UodGhpcy5MUy5nZXRJdGVtKHRoaXMua2V5cy5pbmZvKSk7aWYoZT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoYEluIGxvY2FsIHN0b3JhZ2UsIHRoZXJlIGlzIG5vIG1vZGVsIHdpdGggbmFtZSAnJHt0aGlzLm1vZGVsUGF0aH0nYCk7aWYoZS5tb2RlbFRvcG9sb2d5VHlwZSE9PSJKU09OIil0aHJvdyBuZXcgRXJyb3IoIkJyb3dzZXJMb2NhbFN0b3JhZ2UgZG9lcyBub3Qgc3VwcG9ydCBsb2FkaW5nIG5vbi1KU09OIG1vZGVsIHRvcG9sb2d5IHlldC4iKTtjb25zdCB0PXt9LHM9SlNPTi5wYXJzZSh0aGlzLkxTLmdldEl0ZW0odGhpcy5rZXlzLnRvcG9sb2d5KSk7aWYocz09bnVsbCl0aHJvdyBuZXcgRXJyb3IoYEluIGxvY2FsIHN0b3JhZ2UsIHRoZSB0b3BvbG9neSBvZiBtb2RlbCAnJHt0aGlzLm1vZGVsUGF0aH0nIGlzIG1pc3NpbmcuYCk7dC5tb2RlbFRvcG9sb2d5PXM7Y29uc3Qgcj1KU09OLnBhcnNlKHRoaXMuTFMuZ2V0SXRlbSh0aGlzLmtleXMud2VpZ2h0U3BlY3MpKTtpZihyPT1udWxsKXRocm93IG5ldyBFcnJvcihgSW4gbG9jYWwgc3RvcmFnZSwgdGhlIHdlaWdodCBzcGVjcyBvZiBtb2RlbCAnJHt0aGlzLm1vZGVsUGF0aH0nIGFyZSBtaXNzaW5nLmApO3Qud2VpZ2h0U3BlY3M9cjtjb25zdCBvPXRoaXMuTFMuZ2V0SXRlbSh0aGlzLmtleXMubW9kZWxNZXRhZGF0YSk7aWYobyE9bnVsbCl7Y29uc3QgYT1KU09OLnBhcnNlKG8pO3QuZm9ybWF0PWEuZm9ybWF0LHQuZ2VuZXJhdGVkQnk9YS5nZW5lcmF0ZWRCeSx0LmNvbnZlcnRlZEJ5PWEuY29udmVydGVkQnksYS5zaWduYXR1cmUhPW51bGwmJih0LnNpZ25hdHVyZT1hLnNpZ25hdHVyZSksYS51c2VyRGVmaW5lZE1ldGFkYXRhIT1udWxsJiYodC51c2VyRGVmaW5lZE1ldGFkYXRhPWEudXNlckRlZmluZWRNZXRhZGF0YSksYS5tb2RlbEluaXRpYWxpemVyIT1udWxsJiYodC5tb2RlbEluaXRpYWxpemVyPWEubW9kZWxJbml0aWFsaXplciksYS5pbml0aWFsaXplclNpZ25hdHVyZSE9bnVsbCYmKHQuaW5pdGlhbGl6ZXJTaWduYXR1cmU9YS5pbml0aWFsaXplclNpZ25hdHVyZSksYS50cmFpbmluZ0NvbmZpZyE9bnVsbCYmKHQudHJhaW5pbmdDb25maWc9YS50cmFpbmluZ0NvbmZpZyl9Y29uc3QgaT10aGlzLkxTLmdldEl0ZW0odGhpcy5rZXlzLndlaWdodERhdGEpO2lmKGk9PW51bGwpdGhyb3cgbmV3IEVycm9yKGBJbiBsb2NhbCBzdG9yYWdlLCB0aGUgYmluYXJ5IHdlaWdodCB2YWx1ZXMgb2YgbW9kZWwgJyR7dGhpcy5tb2RlbFBhdGh9JyBhcmUgbWlzc2luZy5gKTtyZXR1cm4gdC53ZWlnaHREYXRhPWkzKGkpLHR9fWFhLlVSTF9TQ0hFTUU9ImxvY2Fsc3RvcmFnZTovLyI7Y29uc3QgViQ9bj0+b2UoKS5nZXRCb29sKCJJU19CUk9XU0VSIikmJiFBcnJheS5pc0FycmF5KG4pJiZuLnN0YXJ0c1dpdGgoYWEuVVJMX1NDSEVNRSk/TjMobi5zbGljZShhYS5VUkxfU0NIRU1FLmxlbmd0aCkpOm51bGw7QXQucmVnaXN0ZXJTYXZlUm91dGVyKFYkKTtBdC5yZWdpc3RlckxvYWRSb3V0ZXIoViQpO2Z1bmN0aW9uIE4zKG4pe3JldHVybiBuZXcgYWEobil9Y2xhc3MgazN7Y29uc3RydWN0b3IoKXtBKG9lKCkuZ2V0Qm9vbCgiSVNfQlJPV1NFUiIpLCgpPT4iQ3VycmVudCBlbnZpcm9ubWVudCBpcyBub3QgYSB3ZWIgYnJvd3NlciIpLEEodHlwZW9mIHdpbmRvdz4idSJ8fHR5cGVvZiB3aW5kb3cubG9jYWxTdG9yYWdlPCJ1IiwoKT0+IkN1cnJlbnQgYnJvd3NlciBkb2VzIG5vdCBhcHBlYXIgdG8gc3VwcG9ydCBsb2NhbFN0b3JhZ2UiKSx0aGlzLkxTPXdpbmRvdy5sb2NhbFN0b3JhZ2V9YXN5bmMgbGlzdE1vZGVscygpe2NvbnN0IGU9e30sdD1pbCtmbyxzPWZvK3okO2ZvcihsZXQgcj0wO3I8dGhpcy5MUy5sZW5ndGg7KytyKXtjb25zdCBvPXRoaXMuTFMua2V5KHIpO2lmKG8uc3RhcnRzV2l0aCh0KSYmby5lbmRzV2l0aChzKSl7Y29uc3QgaT12MyhvKTtlW2ldPUpTT04ucGFyc2UodGhpcy5MUy5nZXRJdGVtKG8pKX19cmV0dXJuIGV9YXN5bmMgcmVtb3ZlTW9kZWwoZSl7ZT1TMyhlKTtjb25zdCB0PU0kKGUpO2lmKHRoaXMuTFMuZ2V0SXRlbSh0LmluZm8pPT1udWxsKXRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgbW9kZWwgYXQgcGF0aCAnJHtlfSdgKTtjb25zdCBzPUpTT04ucGFyc2UodGhpcy5MUy5nZXRJdGVtKHQuaW5mbykpO3JldHVybiBCJCh0KSxzfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBsbD0iOi8vIjtjbGFzcyBXbntjb25zdHJ1Y3Rvcigpe3RoaXMubWFuYWdlcnM9e319c3RhdGljIGdldEluc3RhbmNlKCl7cmV0dXJuIFduLmluc3RhbmNlPT1udWxsJiYoV24uaW5zdGFuY2U9bmV3IFduKSxXbi5pbnN0YW5jZX1zdGF0aWMgcmVnaXN0ZXJNYW5hZ2VyKGUsdCl7QShlIT1udWxsLCgpPT4ic2NoZW1lIG11c3Qgbm90IGJlIHVuZGVmaW5lZCBvciBudWxsLiIpLGUuZW5kc1dpdGgobGwpJiYoZT1lLnNsaWNlKDAsZS5pbmRleE9mKGxsKSkpLEEoZS5sZW5ndGg+MCwoKT0+InNjaGVtZSBtdXN0IG5vdCBiZSBhbiBlbXB0eSBzdHJpbmcuIik7Y29uc3Qgcz1Xbi5nZXRJbnN0YW5jZSgpO0Eocy5tYW5hZ2Vyc1tlXT09bnVsbCwoKT0+YEEgbW9kZWwgc3RvcmUgbWFuYWdlciBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQgZm9yIHNjaGVtZSAnJHtlfScuYCkscy5tYW5hZ2Vyc1tlXT10fXN0YXRpYyBnZXRNYW5hZ2VyKGUpe2NvbnN0IHQ9V24uZ2V0SW5zdGFuY2UoKS5tYW5hZ2Vyc1tlXTtpZih0PT1udWxsKXRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgbW9kZWwgbWFuYWdlciBmb3Igc2NoZW1lICcke2V9J2ApO3JldHVybiB0fXN0YXRpYyBnZXRTY2hlbWVzKCl7cmV0dXJuIE9iamVjdC5rZXlzKFduLmdldEluc3RhbmNlKCkubWFuYWdlcnMpfX1mdW5jdGlvbiBoZihuKXtpZihuLmluZGV4T2YobGwpPT09LTEpdGhyb3cgbmV3IEVycm9yKGBUaGUgdXJsIHN0cmluZyBwcm92aWRlZCBkb2VzIG5vdCBjb250YWluIGEgc2NoZW1lLiBTdXBwb3J0ZWQgc2NoZW1lcyBhcmU6ICR7V24uZ2V0U2NoZW1lcygpLmpvaW4oIiwiKX1gKTtyZXR1cm57c2NoZW1lOm4uc3BsaXQobGwpWzBdLHBhdGg6bi5zcGxpdChsbClbMV19fWFzeW5jIGZ1bmN0aW9uIFckKG4sZSx0PSExKXtBKG4hPT1lLCgpPT5gT2xkIHBhdGggYW5kIG5ldyBwYXRoIGFyZSB0aGUgc2FtZTogJyR7bn0nYCk7Y29uc3Qgcz1BdC5nZXRMb2FkSGFuZGxlcnMobik7QShzLmxlbmd0aD4wLCgpPT5gQ29weWluZyBmYWlsZWQgYmVjYXVzZSBubyBsb2FkIGhhbmRsZXIgaXMgZm91bmQgZm9yIHNvdXJjZSBVUkwgJHtufS5gKSxBKHMubGVuZ3RoPDIsKCk9PmBDb3B5aW5nIGZhaWxlZCBiZWNhdXNlIG1vcmUgdGhhbiBvbmUgKCR7cy5sZW5ndGh9KSBsb2FkIGhhbmRsZXJzIGZvciBzb3VyY2UgVVJMICR7bn0uYCk7Y29uc3Qgcj1zWzBdLG89QXQuZ2V0U2F2ZUhhbmRsZXJzKGUpO0Eoby5sZW5ndGg+MCwoKT0+YENvcHlpbmcgZmFpbGVkIGJlY2F1c2Ugbm8gc2F2ZSBoYW5kbGVyIGlzIGZvdW5kIGZvciBkZXN0aW5hdGlvbiBVUkwgJHtlfS5gKSxBKG8ubGVuZ3RoPDIsKCk9PmBDb3B5aW5nIGZhaWxlZCBiZWNhdXNlIG1vcmUgdGhhbiBvbmUgKCR7cy5sZW5ndGh9KSBzYXZlIGhhbmRsZXJzIGZvciBkZXN0aW5hdGlvbiBVUkwgJHtlfS5gKTtjb25zdCBpPW9bMF0sYT1oZihuKS5zY2hlbWUsbD1oZihuKS5wYXRoLGM9YT09PWhmKG4pLnNjaGVtZSxoPWF3YWl0IHIubG9hZCgpO3QmJmMmJmF3YWl0IFduLmdldE1hbmFnZXIoYSkucmVtb3ZlTW9kZWwobCk7Y29uc3QgcD1hd2FpdCBpLnNhdmUoaCk7cmV0dXJuIHQmJiFjJiZhd2FpdCBXbi5nZXRNYW5hZ2VyKGEpLnJlbW92ZU1vZGVsKGwpLHAubW9kZWxBcnRpZmFjdHNJbmZvfWFzeW5jIGZ1bmN0aW9uIEMzKCl7Y29uc3Qgbj1Xbi5nZXRTY2hlbWVzKCksZT17fTtmb3IoY29uc3QgdCBvZiBuKXtjb25zdCBzPWF3YWl0IFduLmdldE1hbmFnZXIodCkubGlzdE1vZGVscygpO2Zvcihjb25zdCByIGluIHMpe2NvbnN0IG89dCtsbCtyO2Vbb109c1tyXX19cmV0dXJuIGV9YXN5bmMgZnVuY3Rpb24gJDMobil7Y29uc3QgZT1oZihuKTtyZXR1cm4gV24uZ2V0TWFuYWdlcihlLnNjaGVtZSkucmVtb3ZlTW9kZWwoZS5wYXRoKX1hc3luYyBmdW5jdGlvbiBJMyhuLGUpe3JldHVybiBXJChuLGUsITEpfWFzeW5jIGZ1bmN0aW9uIFQzKG4sZSl7cmV0dXJuIFckKG4sZSwhMCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgRTN7Y29uc3RydWN0b3IoKXt0aGlzLm1lc3NhZ2VOYW1lPSJzZXRUaW1lb3V0Q3VzdG9tIix0aGlzLmZ1bmN0aW9uUmVmcz1bXSx0aGlzLmhhbmRsZWRNZXNzYWdlQ291bnQ9MCx0aGlzLmhhc0V2ZW50TGlzdGVuZXI9ITF9ZmV0Y2goZSx0KXtyZXR1cm4gZmV0Y2goZSx0KX1ub3coKXtyZXR1cm4gcGVyZm9ybWFuY2Uubm93KCl9ZW5jb2RlKGUsdCl7aWYodCE9PSJ1dGYtOCImJnQhPT0idXRmOCIpdGhyb3cgbmV3IEVycm9yKGBCcm93c2VyJ3MgZW5jb2RlciBvbmx5IHN1cHBvcnRzIHV0Zi04LCBidXQgZ290ICR7dH1gKTtyZXR1cm4gdGhpcy50ZXh0RW5jb2Rlcj09bnVsbCYmKHRoaXMudGV4dEVuY29kZXI9bmV3IFRleHRFbmNvZGVyKSx0aGlzLnRleHRFbmNvZGVyLmVuY29kZShlKX1kZWNvZGUoZSx0KXtyZXR1cm4gbmV3IFRleHREZWNvZGVyKHQpLmRlY29kZShlKX1zZXRUaW1lb3V0Q3VzdG9tKGUsdCl7aWYodHlwZW9mIHdpbmRvdz4idSJ8fCFvZSgpLmdldEJvb2woIlVTRV9TRVRUSU1FT1VUQ1VTVE9NIikpe3NldFRpbWVvdXQoZSx0KTtyZXR1cm59dGhpcy5mdW5jdGlvblJlZnMucHVzaChlKSxzZXRUaW1lb3V0KCgpPT57d2luZG93LnBvc3RNZXNzYWdlKHtuYW1lOnRoaXMubWVzc2FnZU5hbWUsaW5kZXg6dGhpcy5mdW5jdGlvblJlZnMubGVuZ3RoLTF9LCIqIil9LHQpLHRoaXMuaGFzRXZlbnRMaXN0ZW5lcnx8KHRoaXMuaGFzRXZlbnRMaXN0ZW5lcj0hMCx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIscz0+e2lmKHMuc291cmNlPT09d2luZG93JiZzLmRhdGEubmFtZT09PXRoaXMubWVzc2FnZU5hbWUpe3Muc3RvcFByb3BhZ2F0aW9uKCk7Y29uc3Qgcj10aGlzLmZ1bmN0aW9uUmVmc1tzLmRhdGEuaW5kZXhdO3IoKSx0aGlzLmhhbmRsZWRNZXNzYWdlQ291bnQrKyx0aGlzLmhhbmRsZWRNZXNzYWdlQ291bnQ9PT10aGlzLmZ1bmN0aW9uUmVmcy5sZW5ndGgmJih0aGlzLmZ1bmN0aW9uUmVmcz1bXSx0aGlzLmhhbmRsZWRNZXNzYWdlQ291bnQ9MCl9fSwhMCkpfWlzVHlwZWRBcnJheShlKXtyZXR1cm4gZyQoZSl9fWlmKG9lKCkuZ2V0KCJJU19CUk9XU0VSIikpe29lKCkuc2V0UGxhdGZvcm0oImJyb3dzZXIiLG5ldyBFMyk7dHJ5e1duLnJlZ2lzdGVyTWFuYWdlcihhYS5VUkxfU0NIRU1FLG5ldyBrMyl9Y2F0Y2h7fXRyeXtXbi5yZWdpc3Rlck1hbmFnZXIoaWEuVVJMX1NDSEVNRSxuZXcgZzMpfWNhdGNoe319LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgUjM9e2ltcG9ydEZldGNoOigpPT5yZXF1aXJlKCJub2RlLWZldGNoIil9O2xldCBoMDtjbGFzcyBEM3tjb25zdHJ1Y3Rvcigpe3RoaXMudXRpbD1yZXF1aXJlKCJ1dGlsIiksdGhpcy50ZXh0RW5jb2Rlcj1uZXcgdGhpcy51dGlsLlRleHRFbmNvZGVyfWZldGNoKGUsdCl7cmV0dXJuIG9lKCkuZ2xvYmFsLmZldGNoIT1udWxsP29lKCkuZ2xvYmFsLmZldGNoKGUsdCk6KGgwPT1udWxsJiYoaDA9UjMuaW1wb3J0RmV0Y2goKSksaDAoZSx0KSl9bm93KCl7Y29uc3QgZT1wcm9jZXNzLmhydGltZSgpO3JldHVybiBlWzBdKjFlMytlWzFdLzFlNn1lbmNvZGUoZSx0KXtpZih0IT09InV0Zi04IiYmdCE9PSJ1dGY4Iil0aHJvdyBuZXcgRXJyb3IoYE5vZGUgYnVpbHQtaW4gZW5jb2RlciBvbmx5IHN1cHBvcnRzIHV0Zi04LCBidXQgZ290ICR7dH1gKTtyZXR1cm4gdGhpcy50ZXh0RW5jb2Rlci5lbmNvZGUoZSl9ZGVjb2RlKGUsdCl7cmV0dXJuIGUubGVuZ3RoPT09MD8iIjpuZXcgdGhpcy51dGlsLlRleHREZWNvZGVyKHQpLmRlY29kZShlKX1pc1R5cGVkQXJyYXkoZSl7cmV0dXJuIHRoaXMudXRpbC50eXBlcy5pc0Zsb2F0MzJBcnJheShlKXx8dGhpcy51dGlsLnR5cGVzLmlzSW50MzJBcnJheShlKXx8dGhpcy51dGlsLnR5cGVzLmlzVWludDhBcnJheShlKXx8dGhpcy51dGlsLnR5cGVzLmlzVWludDhDbGFtcGVkQXJyYXkoZSl9fW9lKCkuZ2V0KCJJU19OT0RFIikmJiFvZSgpLmdldCgiSVNfQlJPV1NFUiIpJiZvZSgpLnNldFBsYXRmb3JtKCJub2RlIixuZXcgRDMpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHFlKG4sZT0iZmxvYXQzMiIsdCl7cmV0dXJuIGU9ZXx8ImZsb2F0MzIiLGtzKG4pLG5ldyBRdChuLGUsdCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQTMobixlKXtjb25zdCB0PU8obiwieCIsImNhc3QiKTtpZighaSQoZSkpdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY2FzdCB0byB1bmtub3duIGR0eXBlICR7ZX1gKTtpZihlPT09InN0cmluZyImJnQuZHR5cGUhPT0ic3RyaW5nInx8ZSE9PSJzdHJpbmciJiZ0LmR0eXBlPT09InN0cmluZyIpdGhyb3cgbmV3IEVycm9yKCJPbmx5IHN0cmluZ3MgY2FuIGJlIGNhc3RlZCB0byBzdHJpbmdzIik7Y29uc3Qgcz17eDp0fSxyPXtkdHlwZTplfTtyZXR1cm4gai5ydW5LZXJuZWwoT2wscyxyKX1jb25zdCBOZT1HKHtjYXN0XzpBM30pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIF8zKG4pe2NvbnN0IHQ9e3g6TyhuLCJ4IiwiY2xvbmUiLCJzdHJpbmdfb3JfbnVtZXJpYyIpfTtyZXR1cm4gai5ydW5LZXJuZWwocWwsdCl9Y29uc3QgVnI9Ryh7Y2xvbmVfOl8zfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gajEobixlPSExKXtjb25zb2xlLmxvZyhuLnRvU3RyaW5nKGUpKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9JJCgpO2NvbnN0IE8zPXtidWZmZXI6cWUsY2FzdDpOZSxjbG9uZTpWcixwcmludDpqMX07QUYoTzMpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEYzKG4sZSl7bGV0IHQ9TyhuLCJhIiwiYWRkIikscz1PKGUsImIiLCJhZGQiKTtbdCxzXT1GdCh0LHMpO2NvbnN0IHI9e2E6dCxiOnN9O3JldHVybiBqLnJ1bktlcm5lbChTYSxyKX1jb25zdCBtZT1HKHthZGRfOkYzfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gTDMobixlKXtsZXQgdD1PKG4sImEiLCJmbG9vckRpdiIpLHM9TyhlLCJiIiwiZmxvb3JEaXYiKTtbdCxzXT1GdCh0LHMpO2NvbnN0IHI9e2E6dCxiOnN9O3JldHVybiBqLnJ1bktlcm5lbChHbCxyKX1jb25zdCBsZz1HKHtmbG9vckRpdl86TDN9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBQMyhuLGUpe2xldCB0PU8obiwiYSIsImRpdiIpLHM9TyhlLCJiIiwiZGl2Iik7aWYoW3Qsc109RnQodCxzKSx0LmR0eXBlPT09ImludDMyIiYmcy5kdHlwZT09PSJpbnQzMiIpcmV0dXJuIGxnKHQscyk7Y29uc3Qgcj17YTp0LGI6c30sbz17fTtyZXR1cm4gai5ydW5LZXJuZWwoTWwscixvKX1jb25zdCBPZT1HKHtkaXZfOlAzfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gejMobixlKXtsZXQgdD1PKG4sImEiLCJtdWwiKSxzPU8oZSwiYiIsIm11bCIpO1t0LHNdPUZ0KHQscyk7Y29uc3Qgcj17YTp0LGI6c307cmV0dXJuIGoucnVuS2VybmVsKG51LHIpfWNvbnN0IFg9Ryh7bXVsXzp6M30pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE0zKG4pe2NvbnN0IGU9TyhuLCJ4IiwiYWJzIik7aWYoZS5kdHlwZT09PSJjb21wbGV4NjQiKXtjb25zdCB0PXt4OmV9O3JldHVybiBqLnJ1bktlcm5lbChsZCx0KX1lbHNle2NvbnN0IHQ9e3g6ZX07cmV0dXJuIGoucnVuS2VybmVsKEpjLHQpfX1jb25zdCBYdD1HKHthYnNfOk0zfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQjMobil7Y29uc3QgdD17eDpPKG4sIngiLCJhY29zIil9O3JldHVybiBqLnJ1bktlcm5lbChJbCx0KX1jb25zdCBHMT1HKHthY29zXzpCM30pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFYzKG4pe2NvbnN0IHQ9e3g6TyhuLCJ4IiwiYWNvc2giKX07cmV0dXJuIGoucnVuS2VybmVsKFRsLHQpfWNvbnN0IEgxPUcoe2Fjb3NoXzpWM30pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFczKG4pe0EoQXJyYXkuaXNBcnJheShuKSwoKT0+IlRoZSBhcmd1bWVudCBwYXNzZWQgdG8gdGYuYWRkTigpIG11c3QgYmUgYSBsaXN0IG9mIHRlbnNvcnMiKSxBKG4ubGVuZ3RoPj0xLCgpPT5gTXVzdCBwYXNzIGF0IGxlYXN0IG9uZSB0ZW5zb3IgdG8gdGYuYWRkTigpLCBidXQgZ290ICR7bi5sZW5ndGh9YCk7Y29uc3QgZT1uLm1hcCgocixvKT0+TyhyLGB0ZW5zb3JzJHtvfWAsImFkZE4iKSksdD1lWzBdO2UuZm9yRWFjaChyPT57aWYoci5kdHlwZSE9PXQuZHR5cGUpdGhyb3cgbmV3IEVycm9yKCJBbGwgdGVuc29ycyBwYXNzZWQgdG8gdGYuYWRkTigpIG11c3QgaGF2ZSB0aGUgc2FtZSBkdHlwZSIpfSksZS5mb3JFYWNoKHI9PntpZighSmUoci5zaGFwZSx0LnNoYXBlKSl0aHJvdyBuZXcgRXJyb3IoIkFsbCB0ZW5zb3JzIHBhc3NlZCB0byB0Zi5hZGROKCkgbXVzdCBoYXZlIHRoZSBzYW1lIHNoYXBlIil9KTtjb25zdCBzPWU7cmV0dXJuIGoucnVuS2VybmVsKGVkLHMpfWNvbnN0IFUkPUcoe2FkZE5fOlczfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gVTMobixlPW51bGwsdD0hMSl7Y29uc3Qgcj17eDpPKG4sIngiLCJhbGwiLCJib29sIil9LG89e2F4aXM6ZSxrZWVwRGltczp0fTtyZXR1cm4gai5ydW5LZXJuZWwodG0scixvKX1jb25zdCB1Zz1HKHthbGxfOlUzfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gajMobixlPW51bGwsdD0hMSl7Y29uc3Qgcj17eDpPKG4sIngiLCJhbnkiLCJib29sIil9LG89e2F4aXM6ZSxrZWVwRGltczp0fTtyZXR1cm4gai5ydW5LZXJuZWwobm0scixvKX1jb25zdCBWYz1HKHthbnlfOmozfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gRzMobixlPTApe2NvbnN0IHM9e3g6TyhuLCJ4IiwiYXJnTWF4Iil9LHI9e2F4aXM6ZX07cmV0dXJuIGoucnVuS2VybmVsKHRkLHMscil9Y29uc3QgbGE9Ryh7YXJnTWF4XzpHM30pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEgzKG4sZT0wKXtjb25zdCBzPXt4Ok8obiwieCIsImFyZ01pbiIpfSxyPXtheGlzOmV9O3JldHVybiBqLnJ1bktlcm5lbChuZCxzLHIpfWNvbnN0IHExPUcoe2FyZ01pbl86SDN9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBxMyhuKXtjb25zdCB0PXt4Ok8obiwieCIsImFzaW4iKX07cmV0dXJuIGoucnVuS2VybmVsKEVsLHQpfWNvbnN0IEsxPUcoe2FzaW5fOnEzfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gSzMobil7Y29uc3QgdD17eDpPKG4sIngiLCJhc2luaCIpfTtyZXR1cm4gai5ydW5LZXJuZWwoUmwsdCl9Y29uc3QgWDE9Ryh7YXNpbmhfOkszfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWDMobil7Y29uc3QgdD17eDpPKG4sIngiLCJhdGFuIil9O3JldHVybiBqLnJ1bktlcm5lbChEbCx0KX1jb25zdCBZMT1HKHthdGFuXzpYM30pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFkzKG4sZSl7bGV0IHQ9TyhuLCJhIiwiYXRhbjIiKSxzPU8oZSwiYiIsImF0YW4yIik7W3Qsc109RnQodCxzKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwoX2wscil9Y29uc3QgUTE9Ryh7YXRhbjJfOlkzfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUTMobil7Y29uc3QgdD17eDpPKG4sIngiLCJhdGFuaCIpfTtyZXR1cm4gai5ydW5LZXJuZWwoQWwsdCl9Y29uc3QgWjE9Ryh7YXRhbmhfOlEzfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcmgobixlLHQscyxyPSJOSFdDIixvKXtjb25zdCBpPW5bM10sYT1bLi4uZSxpXSxsPWtvKHIpO3JldHVybiBmbihuLGEsdCxvLHMsbnVsbCxudWxsLGwpfWZ1bmN0aW9uIG5yKG4sZSx0LHMscixvLGk9ImNoYW5uZWxzTGFzdCIpe2NvbnN0W2EsbF09V2MoZSk7bGV0IGM7aWYoaT09PSJjaGFubmVsc0xhc3QiKWM9W2EsbCxuWzNdLG5bM11dO2Vsc2UgaWYoaT09PSJjaGFubmVsc0ZpcnN0IiljPVthLGwsblsxXSxuWzFdXTtlbHNlIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBkYXRhRm9ybWF0ICR7aX1gKTtyZXR1cm4gZm4obixjLHQscyxyLG8sITEsaSl9ZnVuY3Rpb24gTm8obixlLHQscyxyLG8saT0iTkRIV0MiKXtjb25zdFthLGwsY109VTAoZSk7bGV0IGgscDtpZihpPT09Ik5ESFdDIilwPSJjaGFubmVsc0xhc3QiLGg9W2EsbCxjLG5bNF0sbls0XV07ZWxzZSBpZihpPT09Ik5DREhXIilwPSJjaGFubmVsc0ZpcnN0IixoPVthLGwsYyxuWzFdLG5bMV1dO2Vsc2UgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGRhdGFGb3JtYXQgJHtpfWApO3JldHVybiB4aShuLGgsdCxzLHIsITEscCxvKX1mdW5jdGlvbiBmbihuLGUsdCxzLHIsbyxpPSExLGE9ImNoYW5uZWxzTGFzdCIpe2xldFtsLGMsaCxwXT1bLTEsLTEsLTEsLTFdO2lmKGE9PT0iY2hhbm5lbHNMYXN0IilbbCxjLGgscF09bjtlbHNlIGlmKGE9PT0iY2hhbm5lbHNGaXJzdCIpW2wscCxjLGhdPW47ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZGF0YUZvcm1hdCAke2F9YCk7Y29uc3RbZixnLCx5XT1lLFt3LGJdPVdjKHQpLFt2LFNdPVdjKHMpLCQ9dWwoZix2KSxrPXVsKGcsUykse3BhZEluZm86VCxvdXRIZWlnaHQ6RCxvdXRXaWR0aDpMfT1lTChyLGMsaCx3LGIsJCxrLG8sYSksej1pP3kqcDp5O2xldCBGO3JldHVybiBhPT09ImNoYW5uZWxzRmlyc3QiP0Y9W2wseixELExdOmE9PT0iY2hhbm5lbHNMYXN0IiYmKEY9W2wsRCxMLHpdKSx7YmF0Y2hTaXplOmwsZGF0YUZvcm1hdDphLGluSGVpZ2h0OmMsaW5XaWR0aDpoLGluQ2hhbm5lbHM6cCxvdXRIZWlnaHQ6RCxvdXRXaWR0aDpMLG91dENoYW5uZWxzOnoscGFkSW5mbzpULHN0cmlkZUhlaWdodDp3LHN0cmlkZVdpZHRoOmIsZmlsdGVySGVpZ2h0OmYsZmlsdGVyV2lkdGg6ZyxlZmZlY3RpdmVGaWx0ZXJIZWlnaHQ6JCxlZmZlY3RpdmVGaWx0ZXJXaWR0aDprLGRpbGF0aW9uSGVpZ2h0OnYsZGlsYXRpb25XaWR0aDpTLGluU2hhcGU6bixvdXRTaGFwZTpGLGZpbHRlclNoYXBlOmV9fWZ1bmN0aW9uIHhpKG4sZSx0LHMscixvPSExLGk9ImNoYW5uZWxzTGFzdCIsYSl7bGV0W2wsYyxoLHAsZl09Wy0xLC0xLC0xLC0xLC0xXTtpZihpPT09ImNoYW5uZWxzTGFzdCIpW2wsYyxoLHAsZl09bjtlbHNlIGlmKGk9PT0iY2hhbm5lbHNGaXJzdCIpW2wsZixjLGgscF09bjtlbHNlIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBkYXRhRm9ybWF0ICR7aX1gKTtjb25zdFtnLHksdywsYl09ZSxbdixTLCRdPVUwKHQpLFtrLFQsRF09VTAocyksTD11bChnLGspLHo9dWwoeSxUKSxGPXVsKHcsRCkse3BhZEluZm86XyxvdXREZXB0aDpFLG91dEhlaWdodDpNLG91dFdpZHRoOlV9PXRMKHIsYyxoLHAsdixTLCQsTCx6LEYsYSksWT1vP2IqZjpiO2xldCBRO3JldHVybiBpPT09ImNoYW5uZWxzRmlyc3QiP1E9W2wsWSxFLE0sVV06aT09PSJjaGFubmVsc0xhc3QiJiYoUT1bbCxFLE0sVSxZXSkse2JhdGNoU2l6ZTpsLGRhdGFGb3JtYXQ6aSxpbkRlcHRoOmMsaW5IZWlnaHQ6aCxpbldpZHRoOnAsaW5DaGFubmVsczpmLG91dERlcHRoOkUsb3V0SGVpZ2h0Ok0sb3V0V2lkdGg6VSxvdXRDaGFubmVsczpZLHBhZEluZm86XyxzdHJpZGVEZXB0aDp2LHN0cmlkZUhlaWdodDpTLHN0cmlkZVdpZHRoOiQsZmlsdGVyRGVwdGg6ZyxmaWx0ZXJIZWlnaHQ6eSxmaWx0ZXJXaWR0aDp3LGVmZmVjdGl2ZUZpbHRlckRlcHRoOkwsZWZmZWN0aXZlRmlsdGVySGVpZ2h0OnosZWZmZWN0aXZlRmlsdGVyV2lkdGg6RixkaWxhdGlvbkRlcHRoOmssZGlsYXRpb25IZWlnaHQ6VCxkaWxhdGlvbldpZHRoOkQsaW5TaGFwZTpuLG91dFNoYXBlOlEsZmlsdGVyU2hhcGU6ZX19ZnVuY3Rpb24gWjMobixlLHQscyxyKXtzPT1udWxsJiYocz1KMShuLGUsdCkpO2NvbnN0IG89blswXSxpPW5bMV0sYT1VYygoby1lKzIqcykvdCsxLHIpLGw9VWMoKGktZSsyKnMpL3QrMSxyKTtyZXR1cm5bYSxsXX1mdW5jdGlvbiBKMyhuLGUsdCxzLHIsbyl7cj09bnVsbCYmKHI9SjEobixlWzBdLHNbMF0pKTtjb25zdCBpPVswLDAsMCx0XTtmb3IobGV0IGE9MDthPDM7YSsrKW5bYV0rMipyPj1lW2FdJiYoaVthXT1VYygoblthXS1lW2FdKzIqcikvc1thXSsxLG8pKTtyZXR1cm4gaX1mdW5jdGlvbiBKMShuLGUsdCxzPTEpe2NvbnN0IHI9dWwoZSxzKTtyZXR1cm4gTWF0aC5mbG9vcigoblswXSoodC0xKS10K3IpLzIpfWZ1bmN0aW9uIFdjKG4pe3JldHVybiB0eXBlb2Ygbj09Im51bWJlciI/W24sbixuXTpuLmxlbmd0aD09PTI/W25bMF0sblsxXSwxXTpufWZ1bmN0aW9uIFUwKG4pe3JldHVybiB0eXBlb2Ygbj09Im51bWJlciI/W24sbixuXTpufWZ1bmN0aW9uIHVsKG4sZSl7cmV0dXJuIGU8PTE/bjpuKyhuLTEpKihlLTEpfWZ1bmN0aW9uIGVMKG4sZSx0LHMscixvLGksYSxsKXtsZXQgYyxoLHA7aWYodHlwZW9mIG49PSJudW1iZXIiKXtjPXt0b3A6bixib3R0b206bixsZWZ0Om4scmlnaHQ6bix0eXBlOm49PT0wPyJWQUxJRCI6Ik5VTUJFUiJ9O2NvbnN0IGc9WjMoW2UsdF0sbyxzLG4sYSk7aD1nWzBdLHA9Z1sxXX1lbHNlIGlmKG49PT0ic2FtZSIpe2g9TWF0aC5jZWlsKGUvcykscD1NYXRoLmNlaWwodC9yKTtjb25zdCBmPU1hdGgubWF4KDAsKGgtMSkqcytvLWUpLGc9TWF0aC5tYXgoMCwocC0xKSpyK2ktdCkseT1NYXRoLmZsb29yKGYvMiksdz1mLXksYj1NYXRoLmZsb29yKGcvMiksdj1nLWI7Yz17dG9wOnksYm90dG9tOncsbGVmdDpiLHJpZ2h0OnYsdHlwZToiU0FNRSJ9fWVsc2UgaWYobj09PSJ2YWxpZCIpYz17dG9wOjAsYm90dG9tOjAsbGVmdDowLHJpZ2h0OjAsdHlwZToiVkFMSUQifSxoPU1hdGguY2VpbCgoZS1vKzEpL3MpLHA9TWF0aC5jZWlsKCh0LWkrMSkvcik7ZWxzZSBpZih0eXBlb2Ygbj09Im9iamVjdCIpe2NvbnN0IGY9bD09PSJjaGFubmVsc0xhc3QiP25bMV1bMF06blsyXVswXSxnPWw9PT0iY2hhbm5lbHNMYXN0Ij9uWzFdWzFdOm5bMl1bMV0seT1sPT09ImNoYW5uZWxzTGFzdCI/blsyXVswXTpuWzNdWzBdLHc9bD09PSJjaGFubmVsc0xhc3QiP25bMl1bMV06blszXVsxXTtjPXt0b3A6Zixib3R0b206ZyxsZWZ0OnkscmlnaHQ6dyx0eXBlOmY9PT0wJiZnPT09MCYmeT09PTAmJnc9PT0wPyJWQUxJRCI6IkVYUExJQ0lUIn0saD1VYygoZS1vK2YrZykvcysxLGEpLHA9VWMoKHQtaSt5K3cpL3IrMSxhKX1lbHNlIHRocm93IEVycm9yKGBVbmtub3duIHBhZGRpbmcgcGFyYW1ldGVyOiAke259YCk7cmV0dXJue3BhZEluZm86YyxvdXRIZWlnaHQ6aCxvdXRXaWR0aDpwfX1mdW5jdGlvbiB0TChuLGUsdCxzLHIsbyxpLGEsbCxjLGgpe2xldCBwLGYsZyx5O2lmKG49PT0idmFsaWQiJiYobj0wKSx0eXBlb2Ygbj09Im51bWJlciIpe3A9e3RvcDpuLGJvdHRvbTpuLGxlZnQ6bixyaWdodDpuLGZyb250Om4sYmFjazpuLHR5cGU6bj09PTA/IlZBTElEIjoiTlVNQkVSIn07Y29uc3QgYj1KMyhbZSx0LHMsMV0sW2EsbCxjXSwxLFtyLG8saV0sbixoKTtmPWJbMF0sZz1iWzFdLHk9YlsyXX1lbHNlIGlmKG49PT0ic2FtZSIpe2Y9TWF0aC5jZWlsKGUvciksZz1NYXRoLmNlaWwodC9vKSx5PU1hdGguY2VpbChzL2kpO2NvbnN0IHc9KGYtMSkqcithLWUsYj0oZy0xKSpvK2wtdCx2PSh5LTEpKmkrYy1zLFM9TWF0aC5mbG9vcih3LzIpLCQ9dy1TLGs9TWF0aC5mbG9vcihiLzIpLFQ9Yi1rLEQ9TWF0aC5mbG9vcih2LzIpLEw9di1EO3A9e3RvcDprLGJvdHRvbTpULGxlZnQ6RCxyaWdodDpMLGZyb250OlMsYmFjazokLHR5cGU6IlNBTUUifX1lbHNlIHRocm93IEVycm9yKGBVbmtub3duIHBhZGRpbmcgcGFyYW1ldGVyOiAke259YCk7cmV0dXJue3BhZEluZm86cCxvdXREZXB0aDpmLG91dEhlaWdodDpnLG91dFdpZHRoOnl9fWZ1bmN0aW9uIFVjKG4sZSl7aWYoIWUpcmV0dXJuIE1hdGgudHJ1bmMobik7c3dpdGNoKGUpe2Nhc2Uicm91bmQiOnJldHVybiBNYXRoLnJvdW5kKG4pO2Nhc2UiY2VpbCI6cmV0dXJuIE1hdGguY2VpbChuKTtjYXNlImZsb29yIjpyZXR1cm4gTWF0aC5mbG9vcihuKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgVW5rbm93biByb3VuZGluZ01vZGUgJHtlfWApfX1mdW5jdGlvbiBsaShuKXtjb25zdFtlLHQsc109V2Mobik7cmV0dXJuIGU9PT0xJiZ0PT09MSYmcz09PTF9ZnVuY3Rpb24ga24obixlKXtyZXR1cm4gbGkobil8fGxpKGUpfWZ1bmN0aW9uIHVhKG4pe3JldHVybiBXYyhuKS5ldmVyeShlPT5lPjApfWZ1bmN0aW9uIGtvKG4pe2lmKG49PT0iTkhXQyIpcmV0dXJuImNoYW5uZWxzTGFzdCI7aWYobj09PSJOQ0hXIilyZXR1cm4iY2hhbm5lbHNGaXJzdCI7dGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGRhdGFGb3JtYXQgJHtufWApfWZ1bmN0aW9uIHFuKG4sZSx0KXtpZih0IT1udWxsKXtpZih0eXBlb2YgZT09InN0cmluZyIpdGhyb3cgRXJyb3IoYEVycm9yIGluICR7bn06IHBhZCBtdXN0IGJlIGFuIGludGVnZXIgd2hlbiB1c2luZyBkaW1Sb3VuZGluZ01vZGUgJHt0fSBidXQgZ290IHBhZCAke2V9LmApO2lmKHR5cGVvZiBlPT0ibnVtYmVyIilBKHJhKGUpLCgpPT5gRXJyb3IgaW4gJHtufTogcGFkIG11c3QgYmUgYW4gaW50ZWdlciB3aGVuIHVzaW5nIGRpbVJvdW5kaW5nTW9kZSAke3R9IGJ1dCBnb3QgcGFkICR7ZX0uYCk7ZWxzZSBpZih0eXBlb2YgZT09Im9iamVjdCIpZS5mb3JFYWNoKHM9PntzLmZvckVhY2gocj0+e0EocmEociksKCk9PmBFcnJvciBpbiAke259OiBwYWQgbXVzdCBiZSBhbiBpbnRlZ2VyIHdoZW4gdXNpbmcgZGltUm91bmRpbmdNb2RlICR7dH0gYnV0IGdvdCBwYWQgJHtyfS5gKX0pfSk7ZWxzZSB0aHJvdyBFcnJvcihgRXJyb3IgaW4gJHtufTogVW5rbm93biBwYWRkaW5nIHBhcmFtZXRlcjogJHtlfWApfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBuTChuLGUpe2NvbnN0IHM9e3g6TyhuLCJ4IiwicmVzaGFwZSIsInN0cmluZ19vcl9udW1lcmljIil9LHI9e3NoYXBlOmV9O3JldHVybiBqLnJ1bktlcm5lbChXZCxzLHIpfWNvbnN0IEo9Ryh7cmVzaGFwZV86bkx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBzTChuLGUsdCxzLHIpe2NvbnN0IG89TyhuLCJ4IiwiYXZnUG9vbCIsImZsb2F0MzIiKSxpPTE7QShrbih0LGkpLCgpPT5gRXJyb3IgaW4gYXZnUG9vbDogRWl0aGVyIHN0cmlkZXMgb3IgZGlsYXRpb25zIG11c3QgYmUgMS4gR290IHN0cmlkZXMgJHt0fSBhbmQgZGlsYXRpb25zICcke2l9J2ApO2xldCBhPW8sbD0hMTtvLnJhbms9PT0zJiYobD0hMCxhPUoobyxbMSxvLnNoYXBlWzBdLG8uc2hhcGVbMV0sby5zaGFwZVsyXV0pKSxBKGEucmFuaz09PTQsKCk9PmBFcnJvciBpbiBhdmdQb29sOiB4IG11c3QgYmUgcmFuayA0IGJ1dCBnb3QgcmFuayAke2EucmFua30uYCkscW4oImF2Z1Bvb2wiLHMscik7Y29uc3QgYz17eDphfSxoPXtmaWx0ZXJTaXplOmUsc3RyaWRlczp0LHBhZDpzLGRpbVJvdW5kaW5nTW9kZTpyfTtsZXQgcD1qLnJ1bktlcm5lbChzZCxjLGgpO3JldHVybiBwPU5lKHAsby5kdHlwZSksbD9KKHAsW3Auc2hhcGVbMV0scC5zaGFwZVsyXSxwLnNoYXBlWzNdXSk6cH1jb25zdCBvaD1HKHthdmdQb29sXzpzTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHJMKG4sZSx0LHMscixvPSJOREhXQyIpe2NvbnN0IGk9TyhuLCJ4IiwiYXZnUG9vbDNkIiwiZmxvYXQzMiIpO2xldCBhPWksbD0hMTtpLnJhbms9PT00JiYobD0hMCxhPUooaSxbMSxpLnNoYXBlWzBdLGkuc2hhcGVbMV0saS5zaGFwZVsyXSxpLnNoYXBlWzNdXSkpLEEoYS5yYW5rPT09NSwoKT0+YEVycm9yIGluIGF2Z1Bvb2wzZDogeCBtdXN0IGJlIHJhbmsgNSBidXQgZ290IHJhbmsgJHthLnJhbmt9LmApLEEobz09PSJOREhXQyIsKCk9PmBFcnJvciBpbiBhdmdQb29sM2Q6IE9ubHkgTkRIV0MgaXMgY3VycmVudGx5IHN1cHBvcnRlZCwgYnV0IGdvdCBkYXRhRm9ybWF0IG9mICR7b31gKSxBKHR5cGVvZiB0PT0ibnVtYmVyIiYmdD4wfHxBcnJheS5pc0FycmF5KHQpJiZ0WzBdPjAmJnRbMV0+MCYmdFsyXT4wLCgpPT5gRXJyb3IgaW4gYXZnUG9vbDNkOiBTdHJpZGUgbXVzdCBiZSA+IDAsIGJ1dCBnb3QgJyR7dH0nYCkscW4oImF2Z1Bvb2wzZCIscyxyKTtjb25zdCBjPXt4OmF9LGg9e2ZpbHRlclNpemU6ZSxzdHJpZGVzOnQscGFkOnMsZGltUm91bmRpbmdNb2RlOnIsZGF0YUZvcm1hdDpvfTtsZXQgcD1qLnJ1bktlcm5lbChyZCxjLGgpO3JldHVybiBwPU5lKHAsYS5kdHlwZSksbD9KKHAsW3Auc2hhcGVbMV0scC5zaGFwZVsyXSxwLnNoYXBlWzNdLHAuc2hhcGVbNF1dKTpwfWNvbnN0IGViPUcoe2F2Z1Bvb2wzZF86ckx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBvTChuLGU9MCl7QShuLmxlbmd0aD49MSwoKT0+IlBhc3MgYXQgbGVhc3Qgb25lIHRlbnNvciB0byBjb25jYXQiKTtjb25zdCB0PUJjKG4sInRlbnNvcnMiLCJjb25jYXQiLCJzdHJpbmdfb3JfbnVtZXJpYyIpO2lmKHRbMF0uZHR5cGU9PT0iY29tcGxleDY0IiYmdC5mb3JFYWNoKG89PntpZihvLmR0eXBlIT09ImNvbXBsZXg2NCIpdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29uY2F0ZW5hdGUgY29tcGxleDY0IHRlbnNvcnMgd2l0aCBhIHRlbnNvcgogICAgICAgICAgd2l0aCBkdHlwZSAke28uZHR5cGV9LiBgKX0pLHQubGVuZ3RoPT09MSlyZXR1cm4gVnIodFswXSk7Y29uc3Qgcz10LHI9e2F4aXM6ZX07cmV0dXJuIGoucnVuS2VybmVsKHVkLHMscil9Y29uc3QgV3Q9Ryh7Y29uY2F0XzpvTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGlMKG4sZSx0PSExLHM9ITEpe2xldCByPU8obiwiYSIsIm1hdE11bCIpLG89TyhlLCJiIiwibWF0TXVsIik7W3Isb109RnQocixvKTtjb25zdCBpPXthOnIsYjpvfSxhPXt0cmFuc3Bvc2VBOnQsdHJhbnNwb3NlQjpzfTtyZXR1cm4gai5ydW5LZXJuZWwob2QsaSxhKX1jb25zdCBYZT1HKHttYXRNdWxfOmlMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gYUwobil7Y29uc3QgdD17eDpPKG4sIngiLCJzaWdtb2lkIiwiZmxvYXQzMiIpfTtyZXR1cm4gai5ydW5LZXJuZWwocHUsdCl9Y29uc3Qgd3I9Ryh7c2lnbW9pZF86YUx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBsTChuLGUsdCl7Y29uc3Qgcz1PKG4sIngiLCJzbGljZSIsInN0cmluZ19vcl9udW1lcmljIik7aWYocy5yYW5rPT09MCl0aHJvdyBuZXcgRXJyb3IoIlNsaWNpbmcgc2NhbGFyIGlzIG5vdCBwb3NzaWJsZSIpO2NvbnN0IHI9e3g6c30sbz17YmVnaW46ZSxzaXplOnR9O3JldHVybiBqLnJ1bktlcm5lbChxZCxyLG8pfWNvbnN0IHN0PUcoe3NsaWNlXzpsTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHVMKG4pe2NvbnN0IHQ9e3g6TyhuLCJ4IiwidGFuaCIsImZsb2F0MzIiKX07cmV0dXJuIGoucnVuS2VybmVsKGJ1LHQpfWNvbnN0IHVpPUcoe3RhbmhfOnVMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gY0wobixlLHQscyxyLG8pe2NvbnN0IGk9TyhuLCJmb3JnZXRCaWFzIiwiYmFzaWNMU1RNQ2VsbCIpLGE9TyhlLCJsc3RtS2VybmVsIiwiYmFzaWNMU1RNQ2VsbCIpLGw9Tyh0LCJsc3RtQmlhcyIsImJhc2ljTFNUTUNlbGwiKSxjPU8ocywiZGF0YSIsImJhc2ljTFNUTUNlbGwiKSxoPU8ociwiYyIsImJhc2ljTFNUTUNlbGwiKSxwPU8obywiaCIsImJhc2ljTFNUTUNlbGwiKSxmPVd0KFtjLHBdLDEpLGc9WGUoZixhKSx5PW1lKGcsbCksdz15LnNoYXBlWzBdLGI9eS5zaGFwZVsxXS80LHY9W3csYl0sUz1zdCh5LFswLDBdLHYpLCQ9c3QoeSxbMCxiXSx2KSxrPXN0KHksWzAsYioyXSx2KSxUPXN0KHksWzAsYiozXSx2KSxEPW1lKFgod3IoUyksdWkoJCkpLFgoaCx3cihtZShpLGspKSkpLEw9WCh1aShEKSx3cihUKSk7cmV0dXJuW0QsTF19Y29uc3QgaiQ9Ryh7YmFzaWNMU1RNQ2VsbF86Y0x9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBkTChuLGUsdCl7Y29uc3Qgcz1PKG4sIngiLCJiYXRjaFRvU3BhY2VORCIpLHI9ZS5yZWR1Y2UoKGEsbCk9PmEqbCk7QShzLnJhbms+PTErZS5sZW5ndGgsKCk9PmBpbnB1dCByYW5rIGlzICR7cy5yYW5rfSBidXQgc2hvdWxkIGJlID4gdGhhbiBibG9ja1NoYXBlLmxlbmd0aCAke2UubGVuZ3RofWApLEEodC5sZW5ndGg9PT1lLmxlbmd0aCwoKT0+YGNyb3BzLmxlbmd0aCBpcyAke3QubGVuZ3RofSBidXQgc2hvdWxkIGJlIGVxdWFsIHRvIGJsb2NrU2hhcGUubGVuZ3RoICAke2UubGVuZ3RofWApLEEocy5zaGFwZVswXSVyPT09MCwoKT0+YGlucHV0IHRlbnNvciBiYXRjaCBpcyAke3Muc2hhcGVbMF19IGJ1dCBpcyBub3QgZGl2aXNpYmxlIGJ5IHRoZSBwcm9kdWN0IG9mIHRoZSBlbGVtZW50cyBvZiBibG9ja1NoYXBlICR7ZS5qb2luKCIgKiAiKX0gPT09ICR7cn1gKTtjb25zdCBvPXt4OnN9LGk9e2Jsb2NrU2hhcGU6ZSxjcm9wczp0fTtyZXR1cm4gai5ydW5LZXJuZWwoaWQsbyxpKX1jb25zdCBpaD1HKHtiYXRjaFRvU3BhY2VORF86ZEx9KTtmdW5jdGlvbiBoTChuKXtsZXQgZTtyZXR1cm4gbi5yYW5rPT09MHx8bi5yYW5rPT09MT9lPUoobixbMSwxLDEsbi5zaXplXSk6bi5yYW5rPT09Mj9lPUoobixbMSwxLG4uc2hhcGVbMF0sbi5zaGFwZVsxXV0pOm4ucmFuaz09PTM/ZT1KKG4sWzEsbi5zaGFwZVswXSxuLnNoYXBlWzFdLG4uc2hhcGVbMl1dKTplPW4sZX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBwTChuLGUsdCxzLHIsbyl7bz09bnVsbCYmKG89LjAwMSk7Y29uc3QgaT1PKG4sIngiLCJiYXRjaE5vcm0iKSxhPU8oZSwibWVhbiIsImJhdGNoTm9ybSIpLGw9Tyh0LCJ2YXJpYW5jZSIsImJhdGNoTm9ybSIpO2xldCBjO3IhPW51bGwmJihjPU8ociwic2NhbGUiLCJiYXRjaE5vcm0iKSk7bGV0IGg7cyE9bnVsbCYmKGg9TyhzLCJvZmZzZXQiLCJiYXRjaE5vcm0iKSksQShhLnJhbms9PT1sLnJhbmssKCk9PiJCYXRjaCBub3JtYWxpemF0aW9uIGdyYWRpZW50IHJlcXVpcmVzIG1lYW4gYW5kIHZhcmlhbmNlIHRvIGhhdmUgZXF1YWwgcmFua3MuIiksQShoPT1udWxsfHxhLnJhbms9PT1oLnJhbmssKCk9PiJCYXRjaCBub3JtYWxpemF0aW9uIGdyYWRpZW50IHJlcXVpcmVzIG1lYW4gYW5kIG9mZnNldCB0byBoYXZlIGVxdWFsIHJhbmtzLiIpLEEoYz09bnVsbHx8YS5yYW5rPT09Yy5yYW5rLCgpPT4iQmF0Y2ggbm9ybWFsaXphdGlvbiBncmFkaWVudCByZXF1aXJlcyBtZWFuIGFuZCBzY2FsZSB0byBoYXZlIGVxdWFsIHJhbmtzLiIpO2NvbnN0IGY9e3g6aEwoaSksc2NhbGU6YyxvZmZzZXQ6aCxtZWFuOmEsdmFyaWFuY2U6bH0sZz17dmFyaWFuY2VFcHNpbG9uOm99LHk9ai5ydW5LZXJuZWwoeGQsZixnKTtyZXR1cm4gSih5LGkuc2hhcGUpfWNvbnN0IFN1PUcoe2JhdGNoTm9ybV86cEx9KTtmdW5jdGlvbiBmTChuLGUsdCxzLHIsbyl7Y29uc3QgaT1PKG4sIngiLCJiYXRjaE5vcm0iKSxhPU8oZSwibWVhbiIsImJhdGNoTm9ybSIpLGw9Tyh0LCJ2YXJpYW5jZSIsImJhdGNoTm9ybSIpO2xldCBjO3IhPW51bGwmJihjPU8ociwic2NhbGUiLCJiYXRjaE5vcm0iKSk7bGV0IGg7cmV0dXJuIHMhPW51bGwmJihoPU8ocywib2Zmc2V0IiwiYmF0Y2hOb3JtIikpLEEoaS5yYW5rPT09MiwoKT0+YEVycm9yIGluIGJhdGNoTm9ybTJEOiB4IG11c3QgYmUgcmFuayAyIGJ1dCBnb3QgcmFuayAke2kucmFua30uYCksQShhLnJhbms9PT0yfHxhLnJhbms9PT0xLCgpPT5gRXJyb3IgaW4gYmF0Y2hOb3JtMkQ6IG1lYW4gbXVzdCBiZSByYW5rIDIgb3IgcmFuayAxIGJ1dCBnb3QgcmFuayAke2EucmFua30uYCksQShsLnJhbms9PT0yfHxsLnJhbms9PT0xLCgpPT5gRXJyb3IgaW4gYmF0Y2hOb3JtMkQ6IHZhcmlhbmNlIG11c3QgYmUgcmFuayAyIG9yIHJhbmsgMSBidXQgZ290IHJhbmsgJHtsLnJhbmt9LmApLGMhPW51bGwmJkEoYy5yYW5rPT09Mnx8Yy5yYW5rPT09MSwoKT0+YEVycm9yIGluIGJhdGNoTm9ybTJEOiBzY2FsZSBtdXN0IGJlIHJhbmsgMiBvciByYW5rIDEgYnV0IGdvdCByYW5rICR7Yy5yYW5rfS5gKSxoIT1udWxsJiZBKGgucmFuaz09PTJ8fGgucmFuaz09PTEsKCk9PmBFcnJvciBpbiBiYXRjaE5vcm0yRDogb2Zmc2V0IG11c3QgYmUgcmFuayAyIG9yIHJhbmsgMSBidXQgZ290IHJhbmsgJHtoLnJhbmt9LmApLFN1KGksYSxsLGgsYyxvKX1jb25zdCB0Yj1HKHtiYXRjaE5vcm0yZF86Zkx9KTtmdW5jdGlvbiBtTChuLGUsdCxzLHIsbyl7Y29uc3QgaT1PKG4sIngiLCJiYXRjaE5vcm0iKSxhPU8oZSwibWVhbiIsImJhdGNoTm9ybSIpLGw9Tyh0LCJ2YXJpYW5jZSIsImJhdGNoTm9ybSIpO2xldCBjO3IhPW51bGwmJihjPU8ociwic2NhbGUiLCJiYXRjaE5vcm0iKSk7bGV0IGg7cmV0dXJuIHMhPW51bGwmJihoPU8ocywib2Zmc2V0IiwiYmF0Y2hOb3JtIikpLEEoaS5yYW5rPT09MywoKT0+YEVycm9yIGluIGJhdGNoTm9ybTNEOiB4IG11c3QgYmUgcmFuayAzIGJ1dCBnb3QgcmFuayAke2kucmFua30uYCksQShhLnJhbms9PT0zfHxhLnJhbms9PT0xLCgpPT5gRXJyb3IgaW4gYmF0Y2hOb3JtM0Q6IG1lYW4gbXVzdCBiZSByYW5rIDMgb3IgcmFuayAxIGJ1dCBnb3QgcmFuayAke2EucmFua30uYCksQShsLnJhbms9PT0zfHxsLnJhbms9PT0xLCgpPT5gRXJyb3IgaW4gYmF0Y2hOb3JtM0Q6IHZhcmlhbmNlIG11c3QgYmUgcmFuayAzIG9yIHJhbmsgMSBidXQgZ290IHJhbmsgJHtsLnJhbmt9LmApLGMhPW51bGwmJkEoYy5yYW5rPT09M3x8Yy5yYW5rPT09MSwoKT0+YEVycm9yIGluIGJhdGNoTm9ybTNEOiBzY2FsZSBtdXN0IGJlIHJhbmsgMyBvciByYW5rIDEgYnV0IGdvdCByYW5rICR7Yy5yYW5rfS5gKSxoIT1udWxsJiZBKGgucmFuaz09PTN8fGgucmFuaz09PTEsKCk9PmBFcnJvciBpbiBiYXRjaE5vcm0zRDogb2Zmc2V0IG11c3QgYmUgcmFuayAzIG9yIHJhbmsgMSBidXQgZ290IHJhbmsgJHtoLnJhbmt9LmApLFN1KGksYSxsLGgsYyxvKX1jb25zdCBuYj1HKHtiYXRjaE5vcm0zZF86bUx9KTtmdW5jdGlvbiBnTChuLGUsdCxzLHIsbyl7Y29uc3QgaT1PKG4sIngiLCJiYXRjaE5vcm0iKSxhPU8oZSwibWVhbiIsImJhdGNoTm9ybSIpLGw9Tyh0LCJ2YXJpYW5jZSIsImJhdGNoTm9ybSIpO2xldCBjO3IhPW51bGwmJihjPU8ociwic2NhbGUiLCJiYXRjaE5vcm0iKSk7bGV0IGg7cmV0dXJuIHMhPW51bGwmJihoPU8ocywib2Zmc2V0IiwiYmF0Y2hOb3JtIikpLEEoaS5yYW5rPT09NCwoKT0+YEVycm9yIGluIGJhdGNoTm9ybTREOiB4IG11c3QgYmUgcmFuayA0IGJ1dCBnb3QgcmFuayAke2kucmFua30uYCksQShhLnJhbms9PT00fHxhLnJhbms9PT0xLCgpPT5gRXJyb3IgaW4gYmF0Y2hOb3JtNEQ6IG1lYW4gbXVzdCBiZSByYW5rIDQgb3IgcmFuayAxIGJ1dCBnb3QgcmFuayAke2EucmFua30uYCksQShsLnJhbms9PT00fHxsLnJhbms9PT0xLCgpPT5gRXJyb3IgaW4gYmF0Y2hOb3JtNEQ6IHZhcmlhbmNlIG11c3QgYmUgcmFuayA0IG9yIHJhbmsgMSBidXQgZ290IHJhbmsgJHtsLnJhbmt9LmApLGMhPW51bGwmJkEoYy5yYW5rPT09NHx8Yy5yYW5rPT09MSwoKT0+YEVycm9yIGluIGJhdGNoTm9ybTREOiBzY2FsZSBtdXN0IGJlIHJhbmsgNCBvciByYW5rIDEgYnV0IGdvdCByYW5rICR7Yy5yYW5rfS5gKSxoIT1udWxsJiZBKGgucmFuaz09PTR8fGgucmFuaz09PTEsKCk9PmBFcnJvciBpbiBiYXRjaE5vcm00RDogb2Zmc2V0IG11c3QgYmUgcmFuayA0IG9yIHJhbmsgMSBidXQgZ290IHJhbmsgJHtoLnJhbmt9LmApLFN1KGksYSxsLGgsYyxvKX1jb25zdCBzYj1HKHtiYXRjaE5vcm00ZF86Z0x9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB5TChuLGUsdCl7Y29uc3Qgcz1PKG4sIngiLCJiaW5jb3VudCIpLHI9TyhlLCJ3ZWlnaHRzIiwiYmluY291bnQiKTtBKHMuZHR5cGU9PT0iaW50MzIiLCgpPT5gRXJyb3IgaW4gYmluY291bnQ6IGlucHV0IGR0eXBlIG11c3QgYmUgaW50MzIsIGJ1dCBnb3QgJHtzLmR0eXBlfWApLEEodD49MCwoKT0+YHNpemUgbXVzdCBiZSBub24tbmVnYXRpdmUsIGJ1dCBnb3QgJHt0fS5gKSxBKHIuc2l6ZT09PXMuc2l6ZXx8ci5zaXplPT09MCwoKT0+YEVycm9yIGluIGJpbmNvdW50OiB3ZWlnaHRzIG11c3QgaGF2ZSB0aGUgc2FtZSBzaXplIGFzIGlucHV0IG9yMC1sZW5ndGgsIGJ1dCBnb3QgaW5wdXQgc2hhcGU6ICR7cy5zaGFwZX0sIHdlaWdodHMgc2hhcGU6ICR7ci5zaGFwZX0uYCk7Y29uc3Qgbz17eDpzLHdlaWdodHM6cn0saT17c2l6ZTp0fTtyZXR1cm4gai5ydW5LZXJuZWwob20sbyxpKX1jb25zdCByYj1HKHtiaW5jb3VudF86eUx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB4TChuLGUpe2NvbnN0IHQ9TyhuLCJ4IiwiYml0d2lzZUFuZCIpLHM9TyhlLCJ5IiwiYml0d2lzZUFuZCIpO2lmKCFKZSh0LnNoYXBlLHMuc2hhcGUpKXRocm93IG5ldyBFcnJvcihgQml0d2lzZUFuZDogVGVuc29ycyBtdXN0IGhhdmUgdGhlIHNhbWUgc2hhcGUuIHg6ICR7dC5zaGFwZX0sIHk6ICR7cy5zaGFwZX1gKTtpZih0LmR0eXBlIT09ImludDMyInx8cy5kdHlwZSE9PSJpbnQzMiIpdGhyb3cgbmV3IEVycm9yKGBCaXR3aXNlQW5kOiBPbmx5IHN1cHBvcnRzICdpbnQzMicgdmFsdWVzIGluIHRlbnNvciwgZm91bmQgdHlwZSBvZiB4OiAke3QuZHR5cGV9IGFuZCB0eXBlIG9mIHk6ICR7cy5kdHlwZX1gKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwoYWQscil9Y29uc3QgRyQ9Ryh7Yml0d2lzZUFuZF86eEx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBiTChuLGUpe2NvbnN0IHQ9TyhuLCJzMCIsImJyb2FkY2FzdEFyZ3MiLCJpbnQzMiIpLHM9TyhlLCJzMSIsImJyb2FkY2FzdEFyZ3MiLCJpbnQzMiIpO2lmKHQucmFuayE9PTEpdGhyb3cgbmV3IEVycm9yKGBicm9hZGNhc3RBcmdzKCk6IGZpcnN0IGlucHV0IG11c3QgYmUgYSB2ZWN0b3IgKHJhbms9MSkuIEhhcyByYW5rICR7dC5yYW5rfWApO2lmKHMucmFuayE9PTEpdGhyb3cgbmV3IEVycm9yKGBicm9hZGNhc3RBcmdzKCk6IHNlY29uZCBpbnB1dCBtdXN0IGJlIGEgdmVjdG9yIChyYW5rPTEpLiBIYXMgcmFuayAke3MucmFua31gKTtjb25zdCByPXtzMDp0LHMxOnN9O3JldHVybiBqLnJ1bktlcm5lbChpbSxyKX1jb25zdCBIJD1HKHticm9hZGNhc3RBcmdzXzpiTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHdMKG4sZSl7bGV0IHQ9TyhuLCJicm9hZGNhc3RUbyIsIngiKTtjb25zdCBzPXQuc2hhcGU7aWYoa3MoZSksZS5sZW5ndGg8dC5yYW5rKXRocm93IG5ldyBFcnJvcihgYnJvYWRjYXN0VG8oKTogc2hhcGUubGVuZ3RoPSR7ZS5sZW5ndGh9IDwgaW5wdXQucmFuaz0ke3QucmFua30uYCk7aWYoZS5sZW5ndGg+dC5yYW5rKXtjb25zdCBjPXQuc2hhcGUuc2xpY2UoKTtmb3IoO2MubGVuZ3RoPGUubGVuZ3RoOyljLnVuc2hpZnQoMSk7dD1KKHQsYyl9Y29uc3Qgcj10LnNoYXBlLG89QXJyYXkuZnJvbShlKTtmb3IobGV0IGM9ZS5sZW5ndGgtMTtjPj0wO2MtLSlpZihyW2NdPT09ZVtjXSlvW2NdPTE7ZWxzZSBpZih0LnNoYXBlW2NdIT09MSl0aHJvdyBuZXcgRXJyb3IoYGJyb2FkY2FzdFRvKCk6IFske3N9XSBjYW5ub3QgYmUgYnJvYWRjYXN0IHRvIFske2V9XS5gKTtpZihvLm1hcCgoYyxoKT0+Yz4xP2g6LTEpLmZpbHRlcihjPT5jPj0wKS5sZW5ndGg9PT0wKXJldHVybiBWcih0KTtjb25zdCBhPXt4OnR9LGw9e3JlcHM6b307cmV0dXJuIGoucnVuS2VybmVsKHd1LGEsbCl9Y29uc3QgdGE9Ryh7YnJvYWRjYXN0VG9fOndMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdkwobil7Y29uc3QgdD17eDpPKG4sIngiLCJjZWlsIiwiZmxvYXQzMiIpfTtyZXR1cm4gai5ydW5LZXJuZWwoRmwsdCl9Y29uc3Qgb2I9Ryh7Y2VpbF86dkx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBOYShuLGUsdCl7a3MobiksdD10fHx3YShlKTtjb25zdCBzPXtzaGFwZTpuLHZhbHVlOmUsZHR5cGU6dH07cmV0dXJuIGoucnVuS2VybmVsKFNtLHt9LHMpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFNMKG4sZSx0KXtjb25zdCBzPU8obiwieCIsImNsaXBCeVZhbHVlIik7aWYoQShlPD10LCgpPT5gRXJyb3IgaW4gY2xpcDogbWluICgke2V9KSBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byBtYXggKCR7dH0pLmApLGU9PT10KXJldHVybiBOYShzLnNoYXBlLGUscy5kdHlwZSk7Y29uc3Qgcj17eDpzfSxvPXtjbGlwVmFsdWVNaW46ZSxjbGlwVmFsdWVNYXg6dH07cmV0dXJuIGoucnVuS2VybmVsKExsLHIsbyl9Y29uc3Qgc3M9Ryh7Y2xpcEJ5VmFsdWVfOlNMfSk7ZnVuY3Rpb24gTkwobil7cmV0dXJuIFd0KG4sMCl9Y29uc3QgaWI9Ryh7Y29uY2F0MWRfOk5MfSk7ZnVuY3Rpb24ga0wobixlKXtyZXR1cm4gV3QobixlKX1jb25zdCBhYj1HKHtjb25jYXQyZF86a0x9KTtmdW5jdGlvbiBDTChuLGUpe3JldHVybiBXdChuLGUpfWNvbnN0IGxiPUcoe2NvbmNhdDNkXzpDTH0pO2Z1bmN0aW9uICRMKG4sZSl7cmV0dXJuIFd0KG4sZSl9Y29uc3QgdWI9Ryh7Y29uY2F0NGRfOiRMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gSUwobixlLHQscyxyPSJOSFdDIixvPVsxLDFdLGkpe2NvbnN0IGE9TyhuLCJ4IiwiY29udjJkIiwiZmxvYXQzMiIpLGw9TyhlLCJmaWx0ZXIiLCJjb252MmQiLCJmbG9hdDMyIik7bGV0IGM9YSxoPSExO2EucmFuaz09PTMmJihoPSEwLGM9SihhLFsxLGEuc2hhcGVbMF0sYS5zaGFwZVsxXSxhLnNoYXBlWzJdXSkpLEEoYy5yYW5rPT09NCwoKT0+YEVycm9yIGluIGNvbnYyZDogaW5wdXQgbXVzdCBiZSByYW5rIDQsIGJ1dCBnb3QgcmFuayAke2MucmFua30uYCksQShsLnJhbms9PT00LCgpPT5gRXJyb3IgaW4gY29udjJkOiBmaWx0ZXIgbXVzdCBiZSByYW5rIDQsIGJ1dCBnb3QgcmFuayAke2wucmFua30uYCkscW4oImNvbnYyZCIscyxpKTtjb25zdCBwPXI9PT0iTkhXQyI/Yy5zaGFwZVszXTpjLnNoYXBlWzFdO0EocD09PWwuc2hhcGVbMl0sKCk9PmBFcnJvciBpbiBjb252MmQ6IGRlcHRoIG9mIGlucHV0ICgke3B9KSBtdXN0IG1hdGNoIGlucHV0IGRlcHRoIGZvciBmaWx0ZXIgJHtsLnNoYXBlWzJdfS5gKSxBKGtuKHQsbyksKCk9PmBFcnJvciBpbiBjb252MkQ6IEVpdGhlciBzdHJpZGVzIG9yIGRpbGF0aW9ucyBtdXN0IGJlIDEuIEdvdCBzdHJpZGVzICR7dH0gYW5kIGRpbGF0aW9ucyAnJHtvfSdgKSxBKHVhKG8pLCgpPT4iRXJyb3IgaW4gY29udjJEOiBEaWxhdGVkIHJhdGVzIHNob3VsZCBiZSBsYXJnZXIgdGhhbiAwLiIpLEEodWEodCksKCk9PiJFcnJvciBpbiBjb252MkQ6IFN0cmlkZXMgc2hvdWxkIGJlIGxhcmdlciB0aGFuIDAuIik7Y29uc3QgZj17eDpjLGZpbHRlcjpsfSxnPXtzdHJpZGVzOnQscGFkOnMsZGF0YUZvcm1hdDpyLGRpbGF0aW9uczpvLGRpbVJvdW5kaW5nTW9kZTppfSx5PWoucnVuS2VybmVsKGNkLGYsZyk7cmV0dXJuIGg/Sih5LFt5LnNoYXBlWzFdLHkuc2hhcGVbMl0seS5zaGFwZVszXV0pOnl9Y29uc3QgeG89Ryh7Y29udjJkXzpJTH0pO2Z1bmN0aW9uIFRMKG4sZSx0LHMscj0iTldDIixvPTEsaSl7Y29uc3QgYT1PKG4sIngiLCJjb252MWQiKSxsPU8oZSwiZmlsdGVyIiwiY29udjFkIik7bGV0IGM9YSxoPSExO2EucmFuaz09PTImJihoPSEwLGM9SihhLFsxLGEuc2hhcGVbMF0sYS5zaGFwZVsxXV0pKSxBKGMucmFuaz09PTMsKCk9PmBFcnJvciBpbiBjb252MWQ6IGlucHV0IG11c3QgYmUgcmFuayAzLCBidXQgZ290IHJhbmsgJHtjLnJhbmt9LmApLEEobC5yYW5rPT09MywoKT0+YEVycm9yIGluIGNvbnYxZDogZmlsdGVyIG11c3QgYmUgcmFuayAzLCBidXQgZ290IHJhbmsgJHtsLnJhbmt9LmApLHFuKCJjb252MWQiLHMsaSksQShjLnNoYXBlWzJdPT09bC5zaGFwZVsxXSwoKT0+YEVycm9yIGluIGNvbnYxZDogZGVwdGggb2YgaW5wdXQgKCR7Yy5zaGFwZVsyXX0pIG11c3QgbWF0Y2ggaW5wdXQgZGVwdGggZm9yIGZpbHRlciAke2wuc2hhcGVbMV19LmApLEEoa24odCxvKSwoKT0+YEVycm9yIGluIGNvbnYxRDogRWl0aGVyIHN0cmlkZSBvciBkaWxhdGlvbiBtdXN0IGJlIDEuIEdvdCBzdHJpZGUgJHt0fSBhbmQgZGlsYXRpb24gJyR7b30nYCksQSh1YShvKSwoKT0+IkVycm9yIGluIGNvbnYxRDogRGlsYXRlZCByYXRlcyBzaG91bGQgYmUgbGFyZ2VyIHRoYW4gMC4iKSxBKHVhKHQpLCgpPT4iRXJyb3IgaW4gY29udjFEOiBTdHJpZGUgc2hvdWxkIGJlIGxhcmdlciB0aGFuIDAuIiksQShyPT09Ik5XQyIsKCk9PmBFcnJvciBpbiBjb252MWQ6IGdvdCBkYXRhRm9ybWF0IG9mICR7cn0gYnV0IG9ubHkgTldDIGlzIGN1cnJlbnRseSBzdXBwb3J0ZWQuYCk7Y29uc3QgcD1KKGwsWzEsbC5zaGFwZVswXSxsLnNoYXBlWzFdLGwuc2hhcGVbMl1dKSxmPUooYyxbYy5zaGFwZVswXSwxLGMuc2hhcGVbMV0sYy5zaGFwZVsyXV0pLGI9eG8oZixwLFsxLHRdLHMsIk5IV0MiLFsxLG9dLGkpO3JldHVybiBoP0ooYixbYi5zaGFwZVsyXSxiLnNoYXBlWzNdXSk6SihiLFtiLnNoYXBlWzBdLGIuc2hhcGVbMl0sYi5zaGFwZVszXV0pfWNvbnN0IGNnPUcoe2NvbnYxZF86VEx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBFTChuLGUsdCxzLHIsbz0iTkhXQyIsaSl7QShuLmxlbmd0aD09PWUucmFuaywoKT0+YExlbmd0aCBvZiBpblNoYXBlICgke24ubGVuZ3RofSkgYW5kIHJhbmsgb2YgZHkgKCR7ZS5yYW5rfSkgbXVzdCBtYXRjaGApO2xldCBhPW4sbD1lLGM9ITE7ZS5yYW5rPT09MyYmKGM9ITAsbD1KKGUsWzEsZS5zaGFwZVswXSxlLnNoYXBlWzFdLGUuc2hhcGVbMl1dKSxhPVsxLG5bMF0sblsxXSxuWzJdXSksQShhLmxlbmd0aD09PTQsKCk9PmBFcnJvciBpbiBjb252MmREZXJJbnB1dDogaW5TaGFwZSBtdXN0IGJlIGxlbmd0aCA0LCBidXQgZ290IGxlbmd0aCAke2EubGVuZ3RofS5gKSxBKGwucmFuaz09PTQsKCk9PmBFcnJvciBpbiBjb252MmREZXJJbnB1dDogZHkgbXVzdCBiZSByYW5rIDQsIGJ1dCBnb3QgcmFuayAke2wucmFua31gKSxBKHQucmFuaz09PTQsKCk9PmBFcnJvciBpbiBjb252MmREZXJJbnB1dDogZmlsdGVyIG11c3QgYmUgcmFuayA0LCBidXQgZ290IHJhbmsgJHt0LnJhbmt9YCk7Y29uc3QgaD1vPT09Ik5IV0MiP2FbM106YVsxXSxwPW89PT0iTkhXQyI/bC5zaGFwZVszXTpsLnNoYXBlWzFdO0EoaD09PXQuc2hhcGVbMl0sKCk9PmBFcnJvciBpbiBjb252MmREZXJJbnB1dDogZGVwdGggb2YgaW5wdXQgKCR7aH0pIG11c3QgbWF0Y2ggaW5wdXQgZGVwdGggZm9yIGZpbHRlciAke3Quc2hhcGVbMl19LmApLEEocD09PXQuc2hhcGVbM10sKCk9PmBFcnJvciBpbiBjb252MmREZXJJbnB1dDogZGVwdGggb2Ygb3V0cHV0ICgke3B9KSBtdXN0IG1hdGNoIG91dHB1dCBkZXB0aCBmb3IgZmlsdGVyICR7dC5zaGFwZVszXX0uYCkscW4oImNvbnYyZERlcklucHV0IixyLGkpO2NvbnN0IGY9e2R5OmwsZmlsdGVyOnR9LGc9e3N0cmlkZXM6cyxwYWQ6cixkYXRhRm9ybWF0Om8sZGltUm91bmRpbmdNb2RlOmksaW5wdXRTaGFwZTphfSx5PWoucnVuS2VybmVsKGRkLGYsZyk7cmV0dXJuIGM/Sih5LFt5LnNoYXBlWzFdLHkuc2hhcGVbMl0seS5zaGFwZVszXV0pOnl9Y29uc3QgY2I9Ryh7Y29udjJEQmFja3Byb3BJbnB1dF86RUx9KTtmdW5jdGlvbiBSTChuLGUsdCxzLHIsbyl7Y29uc3QgaT1PKG4sIngiLCJjb252MmRUcmFuc3Bvc2UiKSxhPU8oZSwiZmlsdGVyIiwiY29udjJkVHJhbnNwb3NlIik7cmV0dXJuIGNiKHQsaSxhLHMsciwiTkhXQyIsbyl9Y29uc3QgZGc9Ryh7Y29udjJkVHJhbnNwb3NlXzpSTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIERMKG4sZSx0LHMscj0iTkRIV0MiLG89WzEsMSwxXSl7Y29uc3QgaT1PKG4sIngiLCJjb252M2QiKSxhPU8oZSwiZmlsdGVyIiwiY29udjNkIik7bGV0IGw9aSxjPSExO2kucmFuaz09PTQmJihjPSEwLGw9SihpLFsxLGkuc2hhcGVbMF0saS5zaGFwZVsxXSxpLnNoYXBlWzJdLGkuc2hhcGVbM11dKSksQShsLnJhbms9PT01LCgpPT5gRXJyb3IgaW4gY29udjNkOiBpbnB1dCBtdXN0IGJlIHJhbmsgNSwgYnV0IGdvdCByYW5rICR7bC5yYW5rfS5gKSxBKGEucmFuaz09PTUsKCk9PmBFcnJvciBpbiBjb252M2Q6IGZpbHRlciBtdXN0IGJlIHJhbmsgNSwgYnV0IGdvdCByYW5rICR7YS5yYW5rfS5gKSxBKGwuc2hhcGVbNF09PT1hLnNoYXBlWzNdLCgpPT5gRXJyb3IgaW4gY29udjNkOiBkZXB0aCBvZiBpbnB1dCAoJHtsLnNoYXBlWzRdfSkgbXVzdCBtYXRjaCBpbnB1dCBkZXB0aCBmb3IgZmlsdGVyICR7YS5zaGFwZVszXX0uYCksQShrbih0LG8pLCgpPT5gRXJyb3IgaW4gY29udjNEOiBFaXRoZXIgc3RyaWRlcyBvciBkaWxhdGlvbnMgbXVzdCBiZSAxLiBHb3Qgc3RyaWRlcyAke3R9IGFuZCBkaWxhdGlvbnMgJyR7b30nYCksQShyPT09Ik5ESFdDIiwoKT0+YEVycm9yIGluIGNvbnYzZDogZ290IGRhdGFGb3JtYXQgb2YgJHtyfSBidXQgb25seSBOREhXQyBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLmApLEEodWEobyksKCk9PiJFcnJvciBpbiBjb252M0Q6IERpbGF0ZWQgcmF0ZXMgc2hvdWxkIGJlIGxhcmdlciB0aGFuIDAuIiksQSh1YSh0KSwoKT0+IkVycm9yIGluIGNvbnYzRDogU3RyaWRlcyBzaG91bGQgYmUgbGFyZ2VyIHRoYW4gMC4iKTtjb25zdCBoPXt4OmwsZmlsdGVyOmF9LHA9e3N0cmlkZXM6dCxwYWQ6cyxkYXRhRm9ybWF0OnIsZGlsYXRpb25zOm99LGY9ai5ydW5LZXJuZWwoaGQsaCxwKTtyZXR1cm4gYz9KKGYsW2Yuc2hhcGVbMV0sZi5zaGFwZVsyXSxmLnNoYXBlWzNdLGYuc2hhcGVbNF1dKTpmfWNvbnN0IGRiPUcoe2NvbnYzZF86REx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBBTChuLGUsdCxzLHIpe0Eobi5sZW5ndGg9PT1lLnJhbmssKCk9PmBMZW5ndGggb2YgaW5TaGFwZSAoJHtuLmxlbmd0aH0pIGFuZCByYW5rIG9mIGR5ICgke2UucmFua30pIG11c3QgbWF0Y2hgKTtsZXQgbz1uLGk9ZSxhPSExO2UucmFuaz09PTQmJihhPSEwLGk9SihlLFsxLGUuc2hhcGVbMF0sZS5zaGFwZVsxXSxlLnNoYXBlWzJdLGUuc2hhcGVbM11dKSxvPVsxLG5bMF0sblsxXSxuWzJdLG5bM11dKTtjb25zdCBsPW9bNF0sYz1pLnNoYXBlWzRdO0Eoby5sZW5ndGg9PT01LCgpPT5gRXJyb3IgaW4gY29udjNkRGVySW5wdXQ6IGluU2hhcGUgbXVzdCBiZSBsZW5ndGggNSwgYnV0IGdvdCBsZW5ndGggJHtvLmxlbmd0aH0uYCksQShpLnJhbms9PT01LCgpPT5gRXJyb3IgaW4gY29udjNkRGVySW5wdXQ6IGR5IG11c3QgYmUgcmFuayA1LCBidXQgZ290IHJhbmsgJHtpLnJhbmt9YCksQSh0LnJhbms9PT01LCgpPT5gRXJyb3IgaW4gY29udjNkRGVySW5wdXQ6IGZpbHRlciBtdXN0IGJlIHJhbmsgNSwgYnV0IGdvdCByYW5rICR7dC5yYW5rfWApLEEobD09PXQuc2hhcGVbM10sKCk9PmBFcnJvciBpbiBjb252M2REZXJJbnB1dDogZGVwdGggb2YgaW5wdXQgKCR7bH0pIG11c3QgbWF0Y2ggaW5wdXQgZGVwdGggZm9yIGZpbHRlciAke3Quc2hhcGVbM119LmApLEEoYz09PXQuc2hhcGVbNF0sKCk9PmBFcnJvciBpbiBjb252M2REZXJJbnB1dDogZGVwdGggb2Ygb3V0cHV0ICgke2N9KSBtdXN0IG1hdGNoIG91dHB1dCBkZXB0aCBmb3IgZmlsdGVyICR7dC5zaGFwZVs0XX0uYCk7Y29uc3QgaD17ZHk6aSxmaWx0ZXI6dH0scD17cGFkOnIsc3RyaWRlczpzLGlucHV0U2hhcGU6b30sZj1qLnJ1bktlcm5lbChjbSxoLHApO3JldHVybiBhP0ooZixbZi5zaGFwZVsxXSxmLnNoYXBlWzJdLGYuc2hhcGVbM10sZi5zaGFwZVs0XV0pOmZ9Y29uc3QgcSQ9Ryh7Y29udjNEQmFja3Byb3BJbnB1dF86QUx9KTtmdW5jdGlvbiBfTChuLGUsdCxzLHIpe2NvbnN0IG89TyhuLCJ4IiwiY29udjNkVHJhbnNwb3NlIiksaT1PKGUsImZpbHRlciIsImNvbnYzZFRyYW5zcG9zZSIpO3JldHVybiBxJCh0LG8saSxzLHIpfWNvbnN0IGhiPUcoe2NvbnYzZFRyYW5zcG9zZV86X0x9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBPTChuKXtjb25zdCB0PXt4Ok8obiwieCIsImNvcyIsImZsb2F0MzIiKX07cmV0dXJuIGoucnVuS2VybmVsKFBsLHQpfWNvbnN0IGFoPUcoe2Nvc186T0x9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBGTChuKXtjb25zdCB0PXt4Ok8obiwieCIsImNvc2giLCJmbG9hdDMyIil9O3JldHVybiBqLnJ1bktlcm5lbCh6bCx0KX1jb25zdCBoZz1HKHtjb3NoXzpGTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIExMKG4sZT0wLHQ9ITEscz0hMSl7Y29uc3Qgbz17eDpPKG4sIngiLCJjdW1wcm9kIil9LGk9e2F4aXM6ZSxleGNsdXNpdmU6dCxyZXZlcnNlOnN9O3JldHVybiBqLnJ1bktlcm5lbChkbSxvLGkpfWNvbnN0IGpjPUcoe2N1bXByb2RfOkxMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUEwobixlPTAsdD0hMSxzPSExKXtjb25zdCBvPXt4Ok8obiwieCIsImN1bXN1bSIpfSxpPXtheGlzOmUsZXhjbHVzaXZlOnQscmV2ZXJzZTpzfTtyZXR1cm4gai5ydW5LZXJuZWwocGQsbyxpKX1jb25zdCBwZz1HKHtjdW1zdW1fOlBMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gekwobixlLHQscz0hMSl7Y29uc3Qgcj1PKG4sIngiLCJkZW5zZUJpbmNvdW50Iiksbz1PKGUsIndlaWdodHMiLCJkZW5zZUJpbmNvdW50Iik7QShyLmR0eXBlPT09ImludDMyIiwoKT0+YEVycm9yIGluIGRlbnNlQmluY291bnQ6IGlucHV0IGR0eXBlIG11c3QgYmUgaW50MzIsIGJ1dCBnb3QgJHtyLmR0eXBlfWApLEEoci5yYW5rPD0yLCgpPT5gRXJyb3IgaW4gZGVuc2VCaW5jb3VudDogaW5wdXQgbXVzdCBiZSBhdCBtb3N0IHJhbmsgMiwgYnV0IGdvdCByYW5rICR7ci5yYW5rfS5gKSxBKHQ+PTAsKCk9PmBzaXplIG11c3QgYmUgbm9uLW5lZ2F0aXZlLCBidXQgZ290ICR7dH0uYCksQShvLnNpemU9PT1yLnNpemV8fG8uc2l6ZT09PTAsKCk9PmBFcnJvciBpbiBkZW5zZUJpbmNvdW50OiB3ZWlnaHRzIG11c3QgaGF2ZSB0aGUgc2FtZSBzaGFwZSBhcyB4IG9yIDAtbGVuZ3RoLCBidXQgZ290IHggc2hhcGU6ICR7ci5zaGFwZX0sIHdlaWdodHMgc2hhcGU6ICR7by5zaGFwZX0uYCk7Y29uc3QgaT17eDpyLHdlaWdodHM6b30sYT17c2l6ZTp0LGJpbmFyeU91dHB1dDpzfTtyZXR1cm4gai5ydW5LZXJuZWwocG0saSxhKX1jb25zdCBSZj1HKHtkZW5zZUJpbmNvdW50Xzp6TH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE1MKG4sZSx0PSJOSFdDIil7Y29uc3Qgcz1PKG4sIngiLCJkZXB0aFRvU3BhY2UiLCJmbG9hdDMyIikscj10PT09Ik5IV0MiP3Muc2hhcGVbMV06cy5zaGFwZVsyXSxvPXQ9PT0iTkhXQyI/cy5zaGFwZVsyXTpzLnNoYXBlWzNdLGk9dD09PSJOSFdDIj9zLnNoYXBlWzNdOnMuc2hhcGVbMV07QShlPjEsKCk9PmBibG9ja1NpemUgc2hvdWxkIGJlID4gMSBmb3IgZGVwdGhUb1NwYWNlLCBidXQgd2FzOiAke2V9YCksQShyKmU+PTAsKCk9PmBOZWdhdGl2ZSBkaW1lbnNpb24gc2l6ZSBjYXVzZWQgYnkgb3ZlcmZsb3cgd2hlbiBtdWx0aXBseWluZwogICAgJHtyfSBhbmQgJHtlfSAgZm9yIGRlcHRoVG9TcGFjZSB3aXRoIGlucHV0IHNoYXBlCiAgICAke3Muc2hhcGV9YCksQShvKmU+PTAsKCk9PmBOZWdhdGl2ZSBkaW1lbnNpb24gc2l6ZSBjYXVzZWQgYnkgb3ZlcmZsb3cgd2hlbiBtdWx0aXBseWluZwogICAgJHtvfSBhbmQgJHtlfSBmb3IgZGVwdGhUb1NwYWNlIHdpdGggaW5wdXQgc2hhcGUKICAgICAgICAke3Muc2hhcGV9YCksQShpJShlKmUpPT09MCwoKT0+YERpbWVuc2lvbiBzaXplIG11c3QgYmUgZXZlbmx5IGRpdmlzaWJsZSBieSAke2UqZX0gYnV0IGlzICR7aX0gZm9yIGRlcHRoVG9TcGFjZSB3aXRoIGlucHV0IHNoYXBlICR7cy5zaGFwZX1gKTtjb25zdCBhPXt4OnN9LGw9e2Jsb2NrU2l6ZTplLGRhdGFGb3JtYXQ6dH07cmV0dXJuIGoucnVuS2VybmVsKGZtLGEsbCl9Y29uc3QgcGI9Ryh7ZGVwdGhUb1NwYWNlXzpNTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEJMKG4sZSx0LHMscj0iTkhXQyIsbz1bMSwxXSxpKXtjb25zdCBhPU8obiwieCIsImRlcHRod2lzZUNvbnYyZCIsImZsb2F0MzIiKSxsPU8oZSwiZmlsdGVyIiwiZGVwdGh3aXNlQ29udjJkIiwiZmxvYXQzMiIpO2xldCBjPWEsaD0hMTthLnJhbms9PT0zJiYoaD0hMCxjPUooYSxbMSxhLnNoYXBlWzBdLGEuc2hhcGVbMV0sYS5zaGFwZVsyXV0pKSxBKGMucmFuaz09PTQsKCk9PmBFcnJvciBpbiBkZXB0aHdpc2VDb252MmQ6IGlucHV0IG11c3QgYmUgcmFuayA0LCBidXQgZ290IHJhbmsgJHtjLnJhbmt9LmApLEEobC5yYW5rPT09NCwoKT0+YEVycm9yIGluIGRlcHRod2lzZUNvbnYyZDogZmlsdGVyIG11c3QgYmUgcmFuayA0LCBidXQgZ290IHJhbmsgJHtsLnJhbmt9LmApO2NvbnN0IHA9cj09PSJOSFdDIj9jLnNoYXBlWzNdOmMuc2hhcGVbMV07QShwPT09bC5zaGFwZVsyXSwoKT0+YEVycm9yIGluIGRlcHRod2lzZUNvbnYyZDogbnVtYmVyIG9mIGlucHV0IGNoYW5uZWxzICgke3B9KSBtdXN0IG1hdGNoIHRoZSBpbkNoYW5uZWxzIGRpbWVuc2lvbiBpbiBmaWx0ZXIgJHtsLnNoYXBlWzJdfS5gKSxxbigiZGVwdGh3aXNlQ29udjJkIixzLGkpO2NvbnN0IGY9e3g6YyxmaWx0ZXI6bH0sZz17c3RyaWRlczp0LHBhZDpzLGRhdGFGb3JtYXQ6cixkaWxhdGlvbnM6byxkaW1Sb3VuZGluZ01vZGU6aX0seT1qLnJ1bktlcm5lbChmZCxmLGcpO3JldHVybiBoP0ooeSxbeS5zaGFwZVsxXSx5LnNoYXBlWzJdLHkuc2hhcGVbM11dKTp5fWNvbnN0IE51PUcoe2RlcHRod2lzZUNvbnYyZF86Qkx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBWTChuKXtjb25zdCB0PXt4Ok8obiwieCIsImRpYWciKX07cmV0dXJuIGoucnVuS2VybmVsKHltLHQpfWNvbnN0IEskPUcoe2RpYWdfOlZMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gV0wobixlLHQscyxyPVsxLDFdLG89Ik5IV0MiKXtjb25zdCBpPU8obiwieCIsImRpbGF0aW9uMmQiKSxhPU8oZSwiZmlsdGVyIiwiZGlsYXRpb24yZCIpO0EoaS5yYW5rPT09M3x8aS5yYW5rPT09NCwoKT0+YEVycm9yIGluIGRpbGF0aW9uMmQ6IGlucHV0IG11c3QgYmUgcmFuayAzIG9yIDQsIGJ1dCBnb3QgcmFuayAke2kucmFua30uYCksQShhLnJhbms9PT0zLCgpPT5gRXJyb3IgaW4gZGlsYXRpb24yZDogZmlsdGVyIG11c3QgYmUgcmFuayAzLCBidXQgZ290IHJhbmsgJHthLnJhbmt9LmApLEEobz09PSJOSFdDIiwoKT0+YEVycm9yIGluIGRpbGF0aW9uMmQ6IE9ubHkgTkhXQyBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLCBidXQgZ290IGRhdGFGb3JtYXQgb2YgJHtvfWApO2xldCBsPWksYz0hMTtpLnJhbms9PT0zJiYobD1KKGksWzEsaS5zaGFwZVswXSxpLnNoYXBlWzFdLGkuc2hhcGVbMl1dKSxjPSEwKSxBKGwuc2hhcGVbM109PT1hLnNoYXBlWzJdLCgpPT5gRXJyb3IgaW4gZGlsYXRpb24yZDogIGlucHV0IGFuZCBmaWx0ZXIgbXVzdCBoYXZlIHRoZSBzYW1lIGRlcHRoOiAke2wuc2hhcGVbM119IHZzICR7YS5zaGFwZVsyXX1gKTtjb25zdCBoPXt4OmwsZmlsdGVyOmF9LHA9e3N0cmlkZXM6dCxwYWQ6cyxkaWxhdGlvbnM6cn0sZj1qLnJ1bktlcm5lbChtZCxoLHApO3JldHVybiBjP0ooZixbZi5zaGFwZVsxXSxmLnNoYXBlWzJdLGYuc2hhcGVbM11dKTpmfWNvbnN0IGZiPUcoe2RpbGF0aW9uMmRfOldMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gY2EobixlKXtjb25zdCB0PW4ubGVuZ3RoLHM9W107Zm9yKGxldCByPTA7cjx0O3IrKyl7Y29uc3Qgbz10LTEtcixpPW5bb118fDE7KGVbZS5sZW5ndGgtMS1yXXx8MSk+MSYmaT09PTEmJnMudW5zaGlmdChvKX1yZXR1cm4gc31mdW5jdGlvbiBadChuLGUpe2NvbnN0IHQ9W107Zm9yKGxldCBzPTA7czxlLmxlbmd0aDtzKyspe2NvbnN0IHI9bltuLmxlbmd0aC1zLTFdLG89ZS5sZW5ndGgtcy0xLGk9ZVtvXTsocj09bnVsbHx8cj09PTEmJmk+MSkmJnQudW5zaGlmdChvKX1yZXR1cm4gdH1mdW5jdGlvbiBIZShuLGUpe2NvbnN0IHQ9TWF0aC5tYXgobi5sZW5ndGgsZS5sZW5ndGgpLHM9bmV3IEFycmF5KHQpO2ZvcihsZXQgcj0wO3I8dDtyKyspe2xldCBvPW5bbi5sZW5ndGgtci0xXTtvPT1udWxsJiYobz0xKTtsZXQgaT1lW2UubGVuZ3RoLXItMV07aWYoaT09bnVsbCYmKGk9MSksbz09PTEpc1t0LXItMV09aTtlbHNlIGlmKGk9PT0xKXNbdC1yLTFdPW87ZWxzZSBpZihvIT09aSl7Y29uc3QgYT1gT3BlcmFuZHMgY291bGQgbm90IGJlIGJyb2FkY2FzdCB0b2dldGhlciB3aXRoIHNoYXBlcyAke259IGFuZCAke2V9LmA7dGhyb3cgRXJyb3IoYSl9ZWxzZSBzW3Qtci0xXT1vfXJldHVybiBzfWNvbnN0IFVMPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxhc3NlcnRBbmRHZXRCcm9hZGNhc3RTaGFwZTpIZSxnZXRCcm9hZGNhc3REaW1zOmNhLGdldFJlZHVjdGlvbkF4ZXM6WnR9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gakwobixlKXtsZXQgdD1PKG4sImEiLCJlcXVhbCIsInN0cmluZ19vcl9udW1lcmljIikscz1PKGUsImIiLCJlcXVhbCIsInN0cmluZ19vcl9udW1lcmljIik7W3Qsc109RnQodCxzKSxIZSh0LnNoYXBlLHMuc2hhcGUpO2NvbnN0IHI9e2E6dCxiOnN9O3JldHVybiBqLnJ1bktlcm5lbChnZCxyKX1jb25zdCB0cj1HKHtlcXVhbF86akx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBHTChuLGUsdCl7Y29uc3Qgcz1PKGUsImEiLCJ3aGVyZSIpLHI9Tyh0LCJiIiwid2hlcmUiKSxvPU8obiwiY29uZGl0aW9uIiwid2hlcmUiLCJib29sIiksaT1IZShIZShvLnNoYXBlLHMuc2hhcGUpLHIuc2hhcGUpLGE9dGEobyxpKSxsPXRhKHMsaSksYz10YShyLGkpLGg9e2NvbmRpdGlvbjphLHQ6bCxlOmN9O3JldHVybiBqLnJ1bktlcm5lbChIZCxoKX1jb25zdCB2bj1HKHt3aGVyZV86R0x9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBITChuKXtjb25zdCB0PXt4Ok8obiwieCIsInplcm9zTGlrZSIpfTtyZXR1cm4gai5ydW5LZXJuZWwodGgsdCl9Y29uc3QgcnQ9Ryh7emVyb3NMaWtlXzpITH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHFMKG4sZSl7bGV0IHQ9TyhuLCJhIiwiZGl2Iikscz1PKGUsImIiLCJkaXYiKTtbdCxzXT1GdCh0LHMpO2NvbnN0IHI9T2UodCxzKSxvPXJ0KHIpLGk9dHIocyxvKTtyZXR1cm4gdm4oaSxvLHIpfWNvbnN0IG1iPUcoe2Rpdk5vTmFuXzpxTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEtMKG4sZSl7Y29uc3QgdD1PKG4sInQxIiwiZG90Iikscz1PKGUsInQyIiwiZG90Iik7QSgodC5yYW5rPT09MXx8dC5yYW5rPT09MikmJihzLnJhbms9PT0xfHxzLnJhbms9PT0yKSwoKT0+YEVycm9yIGluIGRvdDogaW5wdXRzIG11c3QgYWxsIGJlIHJhbmsgMSBvciAyLCBidXQgZ290IHJhbmtzICR7dC5yYW5rfSBhbmQgJHtzLnJhbmt9LmApO2NvbnN0IHI9dC5yYW5rPT09MT90LnNpemU6dC5zaGFwZVsxXSxvPXMucmFuaz09PTE/cy5zaXplOnMuc2hhcGVbMF07aWYoQShyPT09bywoKT0+YEVycm9yIGluIGRvdDogaW5uZXIgZGltZW5zaW9ucyBvZiBpbnB1dHMgbXVzdCBtYXRjaCwgYnV0IGdvdCAke3J9IGFuZCAke299LmApLHQucmFuaz09PTEmJnMucmFuaz09PTEpe2NvbnN0IGk9Sih0LFsxLC0xXSksYT1KKHMsWy0xLDFdKSxsPVhlKGksYSk7cmV0dXJuIEoobCxbXSl9ZWxzZSBpZih0LnJhbms9PT0xJiZzLnJhbms9PT0yKXtjb25zdCBpPUoodCxbMSwtMV0pLGE9SihzLFtzLnNoYXBlWzBdLHMuc2hhcGVbMV1dKSxsPVhlKGksYSk7cmV0dXJuIEoobCxbbC5zaXplXSl9ZWxzZSBpZih0LnJhbms9PT0yJiZzLnJhbms9PT0xKXtjb25zdCBpPUoocyxbLTEsMV0pLGE9WGUodCxpKTtyZXR1cm4gSihhLFthLnNpemVdKX1lbHNle2NvbnN0IGk9SihzLFtzLnNoYXBlWzBdLHMuc2hhcGVbMV1dKTtyZXR1cm4gWGUodCxpKX19Y29uc3QgZ2I9Ryh7ZG90XzpLTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFhMKG4sLi4uZSl7Y29uc3QgdD1lLm1hcCgocixvKT0+TyhyLGB0ZW5zb3JzJHtvfWAsImVpbnN1bSIpKSxzPXtlcXVhdGlvbjpufTtyZXR1cm4gai5ydW5LZXJuZWwoYm0sdCxzKX1jb25zdCBxaT1HKHtlaW5zdW1fOlhMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWUwobil7Y29uc3QgdD17eDpPKG4sIngiLCJlbHUiLCJmbG9hdDMyIil9O3JldHVybiBqLnJ1bktlcm5lbChCbCx0KX1jb25zdCBrdT1HKHtlbHVfOllMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUUwobixlKXtjb25zdCB0PU8obiwieCIsImVuc3VyZVNoYXBlIiwic3RyaW5nX29yX251bWVyaWMiKTtpZighciQodC5zaGFwZSxlKSl0aHJvdyBuZXcgRXJyb3IoYEVuc3VyZVNoYXBlOiBTaGFwZSBvZiB0ZW5zb3IgJHt0LnNoYXBlfSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGV4cGVjdGVkIHNoYXBlICR7ZX1gKTtyZXR1cm4gbn1jb25zdCBYJD1HKHtlbnN1cmVTaGFwZV86UUx9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBaTChuKXtsZXQgZT1PKG4sIngiLCJlcmYiKTtBKGUuZHR5cGU9PT0iaW50MzIifHxlLmR0eXBlPT09ImZsb2F0MzIiLCgpPT4iSW5wdXQgZHR5cGUgbXVzdCBiZSBgaW50MzJgIG9yIGBmbG9hdDMyYC4iKSxlLmR0eXBlPT09ImludDMyIiYmKGU9TmUoZSwiZmxvYXQzMiIpKTtjb25zdCB0PXt4OmV9O3JldHVybiBqLnJ1bktlcm5lbChWbCx0KX1jb25zdCBmZz1HKHtlcmZfOlpMfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24geWIobixlKXtmb3IobGV0IHQ9MDt0PG4ubGVuZ3RoOysrdClpZihuW24ubGVuZ3RoLXQtMV0hPT1lLTEtdClyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBZJChuLGUsdCl7Y29uc3Qgcz1uLmxlbmd0aCtlLmxlbmd0aCxyPVtdO2xldCBvPTAsaT0wO2ZvcihsZXQgYT0wO2E8czthKyspdC5pbmRleE9mKGEpPT09LTE/ci5wdXNoKG5bbysrXSk6ci5wdXNoKGVbaSsrXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gbW4obixlKXtjb25zdCB0PVtdLHM9bi5sZW5ndGg7Zm9yKGxldCBvPTA7bzxzO28rKyllLmluZGV4T2Yobyk9PT0tMSYmdC5wdXNoKG5bb10pO2NvbnN0IHI9ZS5tYXAobz0+bltvXSk7cmV0dXJuW3Qscl19ZnVuY3Rpb24gVXQobixlKXtjb25zdCB0PWUubWFwKHM9PjEpO3JldHVybiBZJChuLHQsZSl9ZnVuY3Rpb24gQ24obixlLHQpe0EoeWIoZSx0KSwoKT0+YCR7bn0gc3VwcG9ydHMgb25seSBpbm5lci1tb3N0IGF4ZXMgZm9yIG5vdy4gR290IGF4ZXMgJHtlfSBhbmQgcmFuay0ke3R9IGlucHV0LmApfWZ1bmN0aW9uIEx0KG4sZSl7aWYoeWIobixlKSlyZXR1cm4gbnVsbDtjb25zdCB0PVtdO2ZvcihsZXQgcz0wO3M8ZTsrK3Mpbi5pbmRleE9mKHMpPT09LTEmJnQucHVzaChzKTtyZXR1cm4gbi5mb3JFYWNoKHM9PnQucHVzaChzKSksdH1mdW5jdGlvbiBiaShuKXtyZXR1cm4gbi5tYXAoKGUsdCk9Plt0LGVdKS5zb3J0KChlLHQpPT5lWzFdLXRbMV0pLm1hcChlPT5lWzBdKX1mdW5jdGlvbiBqdChuLGUpe2NvbnN0IHQ9W107Zm9yKGxldCBzPWUtbjtzPGU7KytzKXQucHVzaChzKTtyZXR1cm4gdH0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBKTChuLGU9bnVsbCx0PSExKXtjb25zdCByPXt4Ok8obiwieCIsIm1heCIpfSxvPXtyZWR1Y3Rpb25JbmRpY2VzOmUsa2VlcERpbXM6dH07cmV0dXJuIGoucnVuS2VybmVsKFRkLHIsbyl9Y29uc3QgTHM9Ryh7bWF4XzpKTH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGVQKG4sZT1udWxsLHQ9ITEpe2NvbnN0IHI9e3g6TyhuLCJ4IiwibWluIil9LG89e2F4aXM6ZSxrZWVwRGltczp0fTtyZXR1cm4gai5ydW5LZXJuZWwoQWQscixvKX1jb25zdCBtbD1HKHttaW5fOmVQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdFAobixlKXtsZXQgdD1PKG4sImJhc2UiLCJwb3ciKSxzPU8oZSwiZXhwIiwicG93Iik7W3Qsc109RnQodCxzKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwoc3Uscil9Y29uc3QgcXI9Ryh7cG93Xzp0UH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE1lKG4sZSl7aWYoKGNuKG4pJiZlIT09InN0cmluZyJ8fEFycmF5LmlzQXJyYXkobikpJiZlIT09ImNvbXBsZXg2NCIpdGhyb3cgbmV3IEVycm9yKCJFcnJvciBjcmVhdGluZyBhIG5ldyBTY2FsYXI6IHZhbHVlIG11c3QgYmUgYSBwcmltaXRpdmUgKG51bWJlcnxib29sZWFufHN0cmluZykiKTtpZihlPT09InN0cmluZyImJmNuKG4pJiYhKG4gaW5zdGFuY2VvZiBVaW50OEFycmF5KSl0aHJvdyBuZXcgRXJyb3IoIldoZW4gbWFraW5nIGEgc2NhbGFyIGZyb20gZW5jb2RlZCBzdHJpbmcsIHRoZSB2YWx1ZSBtdXN0IGJlIGBVaW50OEFycmF5YC4iKTtyZXR1cm4geWkobixbXSxbXSxlKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBuUChuKXtjb25zdCB0PXt4Ok8obiwieCIsInNxcnQiLCJmbG9hdDMyIil9O3JldHVybiBqLnJ1bktlcm5lbChtdSx0KX1jb25zdCBwbj1HKHtzcXJ0XzpuUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHNQKG4pe2NvbnN0IGU9TyhuLCJ4Iiwic3F1YXJlIiksdD17fTtyZXR1cm4gai5ydW5LZXJuZWwoIlNxdWFyZSIse3g6ZX0sdCl9Y29uc3QgeXQ9Ryh7c3F1YXJlXzpzUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHJQKG4sZT1udWxsLHQ9ITEpe2xldCBzPU8obiwieCIsInN1bSIpO3MuZHR5cGU9PT0iYm9vbCImJihzPU5lKHMsImludDMyIikpO2NvbnN0IHI9e3g6c30sbz17YXhpczplLGtlZXBEaW1zOnR9O3JldHVybiBqLnJ1bktlcm5lbChLZCxyLG8pfWNvbnN0IFJlPUcoe3N1bV86clB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBvUChuLGU9ImV1Y2xpZGVhbiIsdD1udWxsLHM9ITEpe249TyhuLCJ4Iiwibm9ybSIpO2NvbnN0IHI9USQobixlLHQpO2xldCBvPXIuc2hhcGU7aWYocyl7Y29uc3QgaT1RZSh0LG4uc2hhcGUpO289VXQoci5zaGFwZSxpKX1yZXR1cm4gSihyLG8pfWZ1bmN0aW9uIFEkKG4sZSx0PW51bGwpe2lmKG4ucmFuaz09PTApcmV0dXJuIFh0KG4pO2lmKG4ucmFuayE9PTEmJnQ9PT1udWxsKXJldHVybiBRJChKKG4sWy0xXSksZSx0KTtpZihuLnJhbms9PT0xfHx0eXBlb2YgdD09Im51bWJlciJ8fEFycmF5LmlzQXJyYXkodCkmJnQubGVuZ3RoPT09MSl7aWYoZT09PTEpcmV0dXJuIFJlKFh0KG4pLHQpO2lmKGU9PT0xLzApcmV0dXJuIExzKFh0KG4pLHQpO2lmKGU9PT0tMS8wKXJldHVybiBtbChYdChuKSx0KTtpZihlPT09ImV1Y2xpZGVhbiJ8fGU9PT0yKXJldHVybiBwbihSZShxcihYdChuKSxNZSgyLCJpbnQzMiIpKSx0KSk7dGhyb3cgbmV3IEVycm9yKGBFcnJvciBpbiBub3JtOiBpbnZhbGlkIG9yZCB2YWx1ZTogJHtlfWApfWlmKEFycmF5LmlzQXJyYXkodCkmJnQubGVuZ3RoPT09Mil7aWYoZT09PTEpcmV0dXJuIExzKFJlKFh0KG4pLHRbMF0pLHRbMV0tMSk7aWYoZT09PTEvMClyZXR1cm4gTHMoUmUoWHQobiksdFsxXSksdFswXSk7aWYoZT09PS0xLzApcmV0dXJuIG1sKFJlKFh0KG4pLHRbMV0pLHRbMF0pO2lmKGU9PT0iZnJvInx8ZT09PSJldWNsaWRlYW4iKXJldHVybiBwbihSZSh5dChuKSx0KSk7dGhyb3cgbmV3IEVycm9yKGBFcnJvciBpbiBub3JtOiBpbnZhbGlkIG9yZCB2YWx1ZTogJHtlfWApfXRocm93IG5ldyBFcnJvcihgRXJyb3IgaW4gbm9ybTogaW52YWxpZCBheGlzOiAke3R9YCl9Y29uc3QgQ3U9Ryh7bm9ybV86b1B9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBpUChuLGU9bnVsbCx0PSExKXtyZXR1cm4gQ3UobiwiZXVjbGlkZWFuIixlLHQpfWNvbnN0IHhiPUcoe2V1Y2xpZGVhbk5vcm1fOmlQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gYVAobil7Y29uc3QgdD17eDpPKG4sIngiLCJleHAiKX07cmV0dXJuIGoucnVuS2VybmVsKFdsLHQpfWNvbnN0IHJzPUcoe2V4cF86YVB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBsUChuLGU9MCl7Y29uc3QgdD1PKG4sIngiLCJleHBhbmREaW1zIiwic3RyaW5nX29yX251bWVyaWMiKTtBKGU8PXQucmFuaywoKT0+IkF4aXMgbXVzdCBiZSA8PSByYW5rIG9mIHRoZSB0ZW5zb3IiKTtjb25zdCBzPXtpbnB1dDp0fSxyPXtkaW06ZX07cmV0dXJuIGoucnVuS2VybmVsKHlkLHMscil9Y29uc3QgQW49Ryh7ZXhwYW5kRGltc186bFB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB1UChuKXtjb25zdCB0PXt4Ok8obiwieCIsImV4cG0xIil9O3JldHVybiBqLnJ1bktlcm5lbChVbCx0KX1jb25zdCBiYj1HKHtleHBtMV86dVB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBjUChuLGUpe2NvbnN0IHQ9TyhuLCJ4IiwidGlsZSIsInN0cmluZ19vcl9udW1lcmljIik7QSh0LnJhbms9PT1lLmxlbmd0aCwoKT0+YEVycm9yIGluIHRyYW5zcG9zZTogcmFuayBvZiBpbnB1dCAke3QucmFua30gbXVzdCBtYXRjaCBsZW5ndGggb2YgcmVwcyAke2V9LmApO2NvbnN0IHM9e3g6dH0scj17cmVwczplfTtyZXR1cm4gai5ydW5LZXJuZWwod3UscyxyKX1jb25zdCBfcz1HKHt0aWxlXzpjUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGRQKG4sZSx0LHM9ImZsb2F0MzIiKXtlPT1udWxsJiYoZT1uKTtjb25zdCByPXFlKFtuLGVdLHMpLG89bjw9ZT9uOmU7Zm9yKGxldCBhPTA7YTxvOysrYSlyLnNldCgxLGEsYSk7Y29uc3QgaT1KKHIudG9UZW5zb3IoKSxbbixlXSk7aWYodD09bnVsbClyZXR1cm4gaTtpZih0Lmxlbmd0aD09PTEpcmV0dXJuIF9zKEFuKGksMCksW3RbMF0sMSwxXSk7aWYodC5sZW5ndGg9PT0yKXJldHVybiBfcyhBbihBbihpLDApLDApLFt0WzBdLHRbMV0sMSwxXSk7aWYodC5sZW5ndGg9PT0zKXJldHVybiBfcyhBbihBbihBbihpLDApLDApLDApLFt0WzBdLHRbMV0sdFsyXSwxLDFdKTt0aHJvdyBuZXcgRXJyb3IoYGV5ZSgpIGN1cnJlbnRseSBzdXBwb3J0cyBvbmx5IDFEIGFuZCAyRCBiYXRjaFNoYXBlcywgYnV0IHJlY2VpdmVkICR7dC5sZW5ndGh9RC5gKX1jb25zdCBtZz1HKHtleWVfOmRQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gaFAobil7Y29uc3QgdD17eDpPKG4sIngiLCJmbG9vciIsImZsb2F0MzIiKX07cmV0dXJuIGoucnVuS2VybmVsKGpsLHQpfWNvbnN0ICR1PUcoe2Zsb29yXzpoUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHBQKG4sZSx0PTAscz0wKXtjb25zdCByPU8obiwieCIsImdhdGhlciIpLG89TyhlLCJpbmRpY2VzIiwiZ2F0aGVyIiwiaW50MzIiKSxpPXt4OnIsaW5kaWNlczpvfSxhPXtheGlzOnQsYmF0Y2hEaW1zOnN9O3JldHVybiBqLnJ1bktlcm5lbChiZCxpLGEpfWNvbnN0IEl1PUcoe2dhdGhlcl86cFB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBmUChuLGUpe2xldCB0PU8obiwiYSIsImdyZWF0ZXIiLCJzdHJpbmdfb3JfbnVtZXJpYyIpLHM9TyhlLCJiIiwiZ3JlYXRlciIsInN0cmluZ19vcl9udW1lcmljIik7W3Qsc109RnQodCxzKSxIZSh0LnNoYXBlLHMuc2hhcGUpO2NvbnN0IHI9e2E6dCxiOnN9O3JldHVybiBqLnJ1bktlcm5lbCh3ZCxyKX1jb25zdCBhcz1HKHtncmVhdGVyXzpmUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG1QKG4sZSl7bGV0IHQ9TyhuLCJhIiwiZ3JlYXRlckVxdWFsIiwic3RyaW5nX29yX251bWVyaWMiKSxzPU8oZSwiYiIsImdyZWF0ZXJFcXVhbCIsInN0cmluZ19vcl9udW1lcmljIik7W3Qsc109RnQodCxzKSxIZSh0LnNoYXBlLHMuc2hhcGUpO2NvbnN0IHI9e2E6dCxiOnN9O3JldHVybiBqLnJ1bktlcm5lbChIbCxyKX1jb25zdCBDbz1HKHtncmVhdGVyRXF1YWxfOm1QfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZ1Aobil7Y29uc3QgdD17aW5wdXQ6TyhuLCJpbnB1dCIsImltYWciKX07cmV0dXJuIGoucnVuS2VybmVsKCRtLHQpfWNvbnN0IGxoPUcoe2ltYWdfOmdQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24geVAobil7Y29uc3QgdD17eDpPKG4sIngiLCJpc0Zpbml0ZSIpfTtyZXR1cm4gai5ydW5LZXJuZWwoS2wsdCl9Y29uc3Qgd2I9Ryh7aXNGaW5pdGVfOnlQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24geFAobil7Y29uc3QgdD17eDpPKG4sIngiLCJpc0luZiIpfTtyZXR1cm4gai5ydW5LZXJuZWwoWGwsdCl9Y29uc3QgdmI9Ryh7aXNJbmZfOnhQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gYlAobil7Y29uc3QgdD17eDpPKG4sIngiLCJpc05hTiIpfTtyZXR1cm4gai5ydW5LZXJuZWwoWWwsdCl9Y29uc3QgU2I9Ryh7aXNOYU5fOmJQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gd1AobixlPS4yKXtjb25zdCBzPXt4Ok8obiwieCIsImxlYWt5UmVsdSIpfSxyPXthbHBoYTplfTtyZXR1cm4gai5ydW5LZXJuZWwodmQscyxyKX1jb25zdCB1aD1HKHtsZWFreVJlbHVfOndQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdlAobixlKXtsZXQgdD1PKG4sImEiLCJsZXNzIiwic3RyaW5nX29yX251bWVyaWMiKSxzPU8oZSwiYiIsImxlc3MiLCJzdHJpbmdfb3JfbnVtZXJpYyIpO1t0LHNdPUZ0KHQscyksSGUodC5zaGFwZSxzLnNoYXBlKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwoU2Qscil9Y29uc3QgZ2w9Ryh7bGVzc186dlB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBTUChuLGUpe2xldCB0PU8obiwiYSIsImxlc3NFcXVhbCIsInN0cmluZ19vcl9udW1lcmljIikscz1PKGUsImIiLCJsZXNzRXF1YWwiLCJzdHJpbmdfb3JfbnVtZXJpYyIpO1t0LHNdPUZ0KHQscyksSGUodC5zaGFwZSxzLnNoYXBlKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwoTmQscil9Y29uc3Qgd2k9Ryh7bGVzc0VxdWFsXzpTUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFokKG4sZSx0KXtpZih0PD0wKXRocm93IG5ldyBFcnJvcigiVGhlIG51bWJlciBvZiB2YWx1ZXMgc2hvdWxkIGJlIHBvc2l0aXZlLiIpO2NvbnN0IHM9e3N0YXJ0Om4sc3RvcDplLG51bTp0fTtyZXR1cm4gai5ydW5LZXJuZWwoSW0se30scyl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gTlAobixlPTUsdD0xLHM9MSxyPS41KXtjb25zdCBvPU8obiwieCIsImxvY2FsUmVzcG9uc2VOb3JtYWxpemF0aW9uIik7QShvLnJhbms9PT00fHxvLnJhbms9PT0zLCgpPT5gRXJyb3IgaW4gbG9jYWxSZXNwb25zZU5vcm1hbGl6YXRpb246IHggbXVzdCBiZSByYW5rIDMgb3IgNCBidXQgZ290CiAgICAgICAgICAgICAgIHJhbmsgJHtvLnJhbmt9LmApLEEocmEoZSksKCk9PmBFcnJvciBpbiBsb2NhbFJlc3BvbnNlTm9ybWFsaXphdGlvbjogZGVwdGhSYWRpdXMgbXVzdCBiZSBhbiBpbnRlZ2VyIGJ1dCBnb3QgZGVwdGhSYWRpdXMgJHtlfS5gKTtsZXQgaT1vLGE9ITE7by5yYW5rPT09MyYmKGE9ITAsaT1KKG8sWzEsby5zaGFwZVswXSxvLnNoYXBlWzFdLG8uc2hhcGVbMl1dKSk7Y29uc3QgbD17eDppfSxjPXtkZXB0aFJhZGl1czplLGJpYXM6dCxhbHBoYTpzLGJldGE6cn0saD1qLnJ1bktlcm5lbChJZCxsLGMpO3JldHVybiBhP0ooaCxbaC5zaGFwZVsxXSxoLnNoYXBlWzJdLGguc2hhcGVbM11dKTpofWNvbnN0IE5iPUcoe2xvY2FsUmVzcG9uc2VOb3JtYWxpemF0aW9uXzpOUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGtQKG4pe2NvbnN0IHQ9e3g6TyhuLCJ4IiwibG9nIiwiZmxvYXQzMiIpfTtyZXR1cm4gai5ydW5LZXJuZWwoUWwsdCl9Y29uc3Qgd3M9Ryh7bG9nXzprUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIENQKG4pe2NvbnN0IHQ9e3g6TyhuLCJ4IiwibG9nMXAiKX07cmV0dXJuIGoucnVuS2VybmVsKFpsLHQpfWNvbnN0IGNoPUcoe2xvZzFwXzpDUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uICRQKG4pe3JldHVybiBBKG9pKG4pLCgpPT4iVGhlIGYgcGFzc2VkIGluIGdyYWQoZikgbXVzdCBiZSBhIGZ1bmN0aW9uIiksKGUsdCk9Pntjb25zdCBzPU8oZSwieCIsInRmLmdyYWQiLCJzdHJpbmdfb3JfbnVtZXJpYyIpLHI9dCE9bnVsbD9PKHQsImR5IiwidGYuZ3JhZCIpOm51bGw7cmV0dXJuIGoudGlkeSgoKT0+e2NvbnN0e3ZhbHVlOm8sZ3JhZHM6aX09ai5ncmFkaWVudHMoKCk9Pm4ocyksW3NdLHIpO3JldHVybiByIT1udWxsJiZObihvLnNoYXBlLHIuc2hhcGUsIlRoZSBzaGFwZSBvZiBkeSBwYXNzZWQgaW4gZ3JhZChmKSh4LCBkeSkgbXVzdCBtYXRjaCB0aGUgc2hhcGUgcmV0dXJuZWQgYnkgZih4KSIpLGdnKGkpLGlbMF19KX19ZnVuY3Rpb24gSVAobil7cmV0dXJuIEEob2kobiksKCk9PiJUaGUgZiBwYXNzZWQgaW4gZ3JhZHMoZikgbXVzdCBiZSBhIGZ1bmN0aW9uIiksKGUsdCk9PntBKEFycmF5LmlzQXJyYXkoZSksKCk9PiJUaGUgYXJncyBwYXNzZWQgaW4gZ3JhZHMoZikoYXJncykgbXVzdCBiZSBhbiBhcnJheSBvZiBgVGVuc29yYHMgb3IgYFRlbnNvckxpa2VgcyIpO2NvbnN0IHM9QmMoZSwiYXJncyIsInRmLmdyYWRzIiwic3RyaW5nX29yX251bWVyaWMiKSxyPXQhPW51bGw/Tyh0LCJkeSIsInRmLmdyYWRzIik6bnVsbDtyZXR1cm4gai50aWR5KCgpPT57Y29uc3R7dmFsdWU6byxncmFkczppfT1qLmdyYWRpZW50cygoKT0+biguLi5zKSxzLHIpO3JldHVybiByIT1udWxsJiZObihvLnNoYXBlLHIuc2hhcGUsIlRoZSBzaGFwZSBvZiBkeSBwYXNzZWQgaW4gZ3JhZHMoZikoW3gxLC4uLl0sIGR5KSBtdXN0IG1hdGNoIHRoZSBzaGFwZSByZXR1cm5lZCBieSBmKFt4MSwuLi5dKSIpLGdnKGkpLGl9KX19ZnVuY3Rpb24gVFAobil7cmV0dXJuIEEob2kobiksKCk9PiJUaGUgZiBwYXNzZWQgaW4gdmFsdWVBbmRHcmFkKGYpIG11c3QgYmUgYSBmdW5jdGlvbiIpLChlLHQpPT57QShlIGluc3RhbmNlb2YgZHQsKCk9PiJUaGUgeCBwYXNzZWQgaW4gdmFsdWVBbmRHcmFkKGYpKHgpIG11c3QgYmUgYSB0ZW5zb3IiKSxBKHQ9PW51bGx8fHQgaW5zdGFuY2VvZiBkdCwoKT0+IlRoZSBkeSBwYXNzZWQgaW4gdmFsdWVBbmRHcmFkKGYpKHgsIGR5KSBtdXN0IGJlIGEgdGVuc29yIik7Y29uc3R7Z3JhZHM6cyx2YWx1ZTpyfT1qLmdyYWRpZW50cygoKT0+bihlKSxbZV0sdCk7cmV0dXJuIGdnKHMpLHtncmFkOnNbMF0sdmFsdWU6cn19fWZ1bmN0aW9uIEVQKG4pe3JldHVybiBBKG9pKG4pLCgpPT4iVGhlIGYgcGFzc2VkIGluIHZhbHVlQW5kR3JhZHMoZikgbXVzdCBiZSBhIGZ1bmN0aW9uIiksKGUsdCk9PntBKEFycmF5LmlzQXJyYXkoZSkmJmUuZXZlcnkocj0+ciBpbnN0YW5jZW9mIGR0KSwoKT0+IlRoZSBhcmdzIHBhc3NlZCBpbiB2YWx1ZUFuZEdyYWRzKGYpKGFyZ3MpIG11c3QgYmUgYXJyYXkgb2YgdGVuc29ycyIpLEEodD09bnVsbHx8dCBpbnN0YW5jZW9mIGR0LCgpPT4iVGhlIGR5IHBhc3NlZCBpbiB2YWx1ZUFuZEdyYWRzKGYpKGFyZ3MsIGR5KSBtdXN0IGJlIGEgdGVuc29yIik7Y29uc3Qgcz1qLmdyYWRpZW50cygoKT0+biguLi5lKSxlLHQpO3JldHVybiB0IT1udWxsJiZObihzLnZhbHVlLnNoYXBlLHQuc2hhcGUsIlRoZSBzaGFwZSBvZiBkeSBwYXNzZWQgaW4gdmFsdWVBbmRHcmFkcyhmKShbeDEsLi4uXSwgZHkpIG11c3QgbWF0Y2ggdGhlIHNoYXBlIHJldHVybmVkIGJ5IGYoW3gxLC4uLl0pIiksZ2cocy5ncmFkcyksc319ZnVuY3Rpb24gSiQobixlKXtBKG9pKG4pLCgpPT4iVGhlIGYgcGFzc2VkIGluIHZhcmlhYmxlR3JhZHMoZikgbXVzdCBiZSBhIGZ1bmN0aW9uIiksQShlPT1udWxsfHxBcnJheS5pc0FycmF5KGUpJiZlLmV2ZXJ5KGM9PmMgaW5zdGFuY2VvZiBNYyksKCk9PiJUaGUgdmFyTGlzdCBwYXNzZWQgaW4gdmFyaWFibGVHcmFkcyhmLCB2YXJMaXN0KSBtdXN0IGJlIGFuIGFycmF5IG9mIHZhcmlhYmxlcyIpO2NvbnN0IHQ9ZSE9bnVsbDtpZighdCl7ZT1bXTtmb3IoY29uc3QgYyBpbiBqLnJlZ2lzdGVyZWRWYXJpYWJsZXMpZS5wdXNoKGoucmVnaXN0ZXJlZFZhcmlhYmxlc1tjXSl9Y29uc3Qgcz10P2UuZmlsdGVyKGM9PiFjLnRyYWluYWJsZSk6bnVsbCxyPWUubGVuZ3RoO2U9ZS5maWx0ZXIoYz0+Yy50cmFpbmFibGUpLEEoZS5sZW5ndGg+MCwoKT0+YHZhcmlhYmxlR3JhZHMoKSBleHBlY3RzIGF0IGxlYXN0IG9uZSBvZiB0aGUgaW5wdXQgdmFyaWFibGVzIHRvIGJlIHRyYWluYWJsZSwgYnV0IG5vbmUgb2YgdGhlICR7cn0gdmFyaWFibGVzIGlzIHRyYWluYWJsZS5gKTtjb25zdCBvPSEwLHt2YWx1ZTppLGdyYWRzOmF9PWouZ3JhZGllbnRzKG4sZSxudWxsLG8pO0EoYS5zb21lKGM9PmMhPW51bGwpLCgpPT4iQ2Fubm90IGZpbmQgYSBjb25uZWN0aW9uIGJldHdlZW4gYW55IHZhcmlhYmxlIGFuZCB0aGUgcmVzdWx0IG9mIHRoZSBsb3NzIGZ1bmN0aW9uIHk9Zih4KS4gUGxlYXNlIG1ha2Ugc3VyZSB0aGUgb3BlcmF0aW9ucyB0aGF0IHVzZSB2YXJpYWJsZXMgYXJlIGluc2lkZSB0aGUgZnVuY3Rpb24gZiBwYXNzZWQgdG8gbWluaW1pemUoKS4iKSxBKGkucmFuaz09PTAsKCk9PmBUaGUgZiBwYXNzZWQgaW4gdmFyaWFibGVHcmFkcyhmKSBtdXN0IHJldHVybiBhIHNjYWxhciwgYnV0IGl0IHJldHVybmVkIGEgcmFuay0ke2kucmFua30gdGVuc29yYCk7Y29uc3QgbD17fTtyZXR1cm4gZS5mb3JFYWNoKChjLGgpPT57YVtoXSE9bnVsbCYmKGxbYy5uYW1lXT1hW2hdKX0pLHM/LmZvckVhY2goYz0+bFtjLm5hbWVdPW51bGwpLHt2YWx1ZTppLGdyYWRzOmx9fWZ1bmN0aW9uIEtyKG4pe3JldHVybiBqLmN1c3RvbUdyYWQobil9ZnVuY3Rpb24gZ2cobil7aWYobi5maWx0ZXIodD0+dD09bnVsbCkubGVuZ3RoPjApdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29tcHV0ZSBncmFkaWVudCBvZiB5PWYoeCkgd2l0aCByZXNwZWN0IHRvIHguIE1ha2Ugc3VyZSB0aGF0CiAgICB0aGUgZiB5b3UgcGFzc2VkIGVuY2xvc2VzIGFsbCBvcGVyYXRpb25zIHRoYXQgbGVhZCBmcm9tIHggdG8geS5gKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBSUChuKXtjb25zdCB0PXt4Ok8obiwieCIsIm5lZyIpfTtyZXR1cm4gai5ydW5LZXJuZWwoT2QsdCl9Y29uc3QgTnQ9Ryh7bmVnXzpSUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIERQKG4pe2NvbnN0IHQ9e3g6TyhuLCJ4Iiwic29mdHBsdXMiKX07cmV0dXJuIGoucnVuS2VybmVsKGZ1LHQpfWNvbnN0IGthPUcoe3NvZnRwbHVzXzpEUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEFQKG4pe2NvbnN0IGU9TyhuLCJ4IiwibG9nU2lnbW9pZCIpO3JldHVybiBLcihzPT4oe3ZhbHVlOk50KGthKE50KHMpKSksZ3JhZEZ1bmM6aT0+WChpLHdyKE50KHMpKSl9KSkoZSl9Y29uc3Qga2I9Ryh7bG9nU2lnbW9pZF86QVB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBfUChuLGUpe2xldCB0PU8obiwiYSIsInN1YiIpLHM9TyhlLCJiIiwic3ViIik7W3Qsc109RnQodCxzKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwoeXUscil9Y29uc3QgSWU9Ryh7c3ViXzpfUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE9QKG4sZT0tMSl7Y29uc3QgdD1PKG4sImxvZ2l0cyIsImxvZ1NvZnRtYXgiKTtpZihlPT09LTEmJihlPXQucmFuay0xKSxlIT09dC5yYW5rLTEpdGhyb3cgRXJyb3IoYExvZyBTb2Z0bWF4IGFsb25nIGEgbm9uLWxhc3QgZGltZW5zaW9uIGlzIG5vdCB5ZXQgc3VwcG9ydGVkLiBMb2dpdHMgd2FzIHJhbmsgJHt0LnJhbmt9IGFuZCBheGlzIHdhcyAke2V9YCk7cmV0dXJuIEtyKChyLG8pPT57Y29uc3QgYT1McyhyLGUsITApLGw9SWUocixhKSxjPUllKE5lKGwsImZsb2F0MzIiKSx3cyhSZShycyhsKSxlLCEwKSkpO3JldHVybiBvKFtjXSkse3ZhbHVlOmMsZ3JhZEZ1bmM6KHAsZik9Pntjb25zdFtnXT1mLHk9ITAsdz1ycyhnKTtyZXR1cm4gSWUocCxYKFJlKHAsZSx5KSx3KSl9fX0pKHQpfWNvbnN0IHlnPUcoe2xvZ1NvZnRtYXhfOk9QfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gRlAobixlPW51bGwsdD0hMSl7Y29uc3Qgcz1PKG4sIngiLCJsb2dTdW1FeHAiKSxyPVFlKGUscy5zaGFwZSksbz1McyhzLHIsITApLGk9SWUocyxvKSxhPXJzKGkpLGw9UmUoYSxyKSxjPXdzKGwpLGg9bWUoSihvLGMuc2hhcGUpLGMpO2lmKHQpe2NvbnN0IHA9VXQoaC5zaGFwZSxyKTtyZXR1cm4gSihoLHApfXJldHVybiBofWNvbnN0IGRoPUcoe2xvZ1N1bUV4cF86RlB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBMUChuLGUpe2NvbnN0IHQ9TyhuLCJhIiwibG9naWNhbEFuZCIsImJvb2wiKSxzPU8oZSwiYiIsImxvZ2ljYWxBbmQiLCJib29sIik7SGUodC5zaGFwZSxzLnNoYXBlKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwoa2Qscil9Y29uc3QgU3I9Ryh7bG9naWNhbEFuZF86TFB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBQUChuKXtjb25zdCB0PXt4Ok8obiwieCIsImxvZ2ljYWxOb3QiLCJib29sIil9O3JldHVybiBqLnJ1bktlcm5lbChDZCx0KX1jb25zdCBoaD1HKHtsb2dpY2FsTm90XzpQUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHpQKG4sZSl7Y29uc3QgdD1PKG4sImEiLCJsb2dpY2FsT3IiLCJib29sIikscz1PKGUsImIiLCJsb2dpY2FsT3IiLCJib29sIik7SGUodC5zaGFwZSxzLnNoYXBlKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwoJGQscil9Y29uc3QgeGc9Ryh7bG9naWNhbE9yXzp6UH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE1QKG4sZSl7Y29uc3QgdD1PKG4sImEiLCJsb2dpY2FsWG9yIiwiYm9vbCIpLHM9TyhlLCJiIiwibG9naWNhbFhvciIsImJvb2wiKTtyZXR1cm4gSGUodC5zaGFwZSxzLnNoYXBlKSxTcih4ZyhuLGUpLGhoKFNyKG4sZSkpKX1jb25zdCBDYj1HKHtsb2dpY2FsWG9yXzpNUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFhwPTIxNDc0ODM2NDg7ZnVuY3Rpb24gQlAobixlLHQ9ImxlZnQiKXtjb25zdCBzPU8obiwic29ydGVkU2VxdWVuY2UiLCJzZWFyY2hTb3J0ZWQiKSxyPU8oZSwidmFsdWVzIiwic2VhcmNoU29ydGVkIiksbz1zLnNoYXBlW3Muc2hhcGUubGVuZ3RoLTFdLGk9ci5zaGFwZVtyLnNoYXBlLmxlbmd0aC0xXSxhPUoocyxbLTEsb10pLGw9SihyLFstMSxpXSk7aWYoYS5yYW5rPDIpdGhyb3cgbmV3IEVycm9yKCJTb3J0ZWQgaW5wdXQgYXJndW1lbnQgbXVzdCBiZSBhdCBsZWFzdCAyLWRpbWVuc2lvbmFsIik7aWYoYS5zaGFwZVswXSE9PWwuc2hhcGVbMF0pdGhyb3cgbmV3IEVycm9yKCJMZWFkaW5nIGRpbWVuc2lvbiBvZiAnc29ydGVkU2VxdWVuY2UnIGFuZCAndmFsdWVzJyBtdXN0IG1hdGNoLiIpO2lmKGNlKGwuc2hhcGUpPj1YcCl0aHJvdyBuZXcgRXJyb3IoYHZhbHVlcyB0ZW5zb3Igc2l6ZSBtdXN0IGxlc3MgdGhhbiAke1hwfWApO2lmKGEuc2hhcGVbMV0+PVhwKXRocm93IG5ldyBFcnJvcihgdHJhaWxpbmcgZGltX3NpemUgbXVzdCBsZXNzIHRoYW4gJHtYcH0gZm9yIGludDMyIG91dHB1dCB0eXBlLCB3YXMgJHthLnNoYXBlWzFdfWApO2NvbnN0IGM9e3NvcnRlZFNlcXVlbmNlOmEsdmFsdWVzOmx9LGg9e3NpZGU6dH07cmV0dXJuIGoucnVuS2VybmVsKEdtLGMsaCl9Y29uc3QgYmc9Ryh7c2VhcmNoU29ydGVkXzpCUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGVJKG4sZSl7cmV0dXJuIGJnKG4sZSwibGVmdCIpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFZQKG4sZSx0LHMscil7Y29uc3Qgbz1PKG4sIngiLCJtYXhQb29sIiksaT0xO2xldCBhPW8sbD0hMTtvLnJhbms9PT0zJiYobD0hMCxhPUoobyxbMSxvLnNoYXBlWzBdLG8uc2hhcGVbMV0sby5zaGFwZVsyXV0pKSxBKGEucmFuaz09PTQsKCk9PmBFcnJvciBpbiBtYXhQb29sOiBpbnB1dCBtdXN0IGJlIHJhbmsgNCBidXQgZ290IHJhbmsgJHthLnJhbmt9LmApLEEoa24odCxpKSwoKT0+YEVycm9yIGluIG1heFBvb2w6IEVpdGhlciBzdHJpZGVzIG9yIGRpbGF0aW9ucyBtdXN0IGJlIDEuIEdvdCBzdHJpZGVzICR7dH0gYW5kIGRpbGF0aW9ucyAnJHtpfSdgKSxxbigibWF4UG9vbCIscyxyKTtjb25zdCBjPXt4OmF9LGg9e2ZpbHRlclNpemU6ZSxzdHJpZGVzOnQscGFkOnMsZGltUm91bmRpbmdNb2RlOnJ9LHA9ai5ydW5LZXJuZWwoRWQsYyxoKTtyZXR1cm4gbD9KKHAsW3Auc2hhcGVbMV0scC5zaGFwZVsyXSxwLnNoYXBlWzNdXSk6cH1jb25zdCBwaD1HKHttYXhQb29sXzpWUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFdQKG4sZT1bMSwxLDFdLHQscyxyLG89Ik5ESFdDIil7Y29uc3QgaT1PKG4sIngiLCJtYXhQb29sM2QiKTtsZXQgYT1pLGw9ITE7aS5yYW5rPT09NCYmKGw9ITAsYT1KKGksWzEsaS5zaGFwZVswXSxpLnNoYXBlWzFdLGkuc2hhcGVbMl0saS5zaGFwZVszXV0pKSxBKGEucmFuaz09PTUsKCk9PmBFcnJvciBpbiBtYXhQb29sM2Q6IHggbXVzdCBiZSByYW5rIDUgYnV0IGdvdCByYW5rICR7YS5yYW5rfS5gKSxBKG89PT0iTkRIV0MiLCgpPT5gRXJyb3IgaW4gbWF4UG9vbDNkOiBPbmx5IE5ESFdDIGlzIGN1cnJlbnRseSBzdXBwb3J0ZWQsIGJ1dCBnb3QgZGF0YUZvcm1hdCBvZiAke299YCkscW4oIm1heFBvb2wzZCIscyxyKTtjb25zdCBjPXt4OmF9LGg9e2ZpbHRlclNpemU6ZSxzdHJpZGVzOnQscGFkOnMsZGltUm91bmRpbmdNb2RlOnIsZGF0YUZvcm1hdDpvfSxwPWoucnVuS2VybmVsKFJkLGMsaCk7cmV0dXJuIGw/SihwLFtwLnNoYXBlWzFdLHAuc2hhcGVbMl0scC5zaGFwZVszXSxwLnNoYXBlWzRdXSk6cH1jb25zdCAkYj1HKHttYXhQb29sM2RfOldQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gVVAobixlLHQscyxyPSExKXtjb25zdCBpPXt4Ok8obiwieCIsIm1heFBvb2xXaXRoQXJnbWF4Iil9LGE9e2ZpbHRlclNpemU6ZSxzdHJpZGVzOnQscGFkOnMsaW5jbHVkZUJhdGNoSW5JbmRleDpyfSxsPWoucnVuS2VybmVsKERtLGksYSk7cmV0dXJue3Jlc3VsdDpsWzBdLGluZGV4ZXM6bFsxXX19Y29uc3QgdEk9Ryh7bWF4UG9vbFdpdGhBcmdtYXhfOlVQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24galAobixlKXtsZXQgdD1PKG4sImEiLCJtYXhpbXVtIikscz1PKGUsImIiLCJtYXhpbXVtIik7W3Qsc109RnQodCxzKSx0LmR0eXBlPT09ImJvb2wiJiYodD1OZSh0LCJpbnQzMiIpLHM9TmUocywiaW50MzIiKSksSGUodC5zaGFwZSxzLnNoYXBlKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwoSmwscil9Y29uc3QgUXI9Ryh7bWF4aW11bV86alB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBHUChuLGU9bnVsbCx0PSExKXtjb25zdCByPXt4Ok8obiwieCIsIm1lYW4iKX0sbz17YXhpczplLGtlZXBEaW1zOnR9O3JldHVybiBqLnJ1bktlcm5lbChEZCxyLG8pfWNvbnN0IF90PUcoe21lYW5fOkdQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWXQobixlPSJmbG9hdDMyIil7aWYoa3MobiksZT09PSJjb21wbGV4NjQiKXtjb25zdCBzPVl0KG4sImZsb2F0MzIiKSxyPVl0KG4sImZsb2F0MzIiKTtyZXR1cm4geW8ocyxyKX1jb25zdCB0PVNuKGNlKG4pLGUpO3JldHVybiBqLm1ha2VUZW5zb3IodCxuLGUpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEpuKG4sZT0iZmxvYXQzMiIpe2lmKGtzKG4pLGU9PT0iY29tcGxleDY0Iil7Y29uc3Qgcz1KbihuLCJmbG9hdDMyIikscj1ZdChuLCJmbG9hdDMyIik7cmV0dXJuIHlvKHMscil9Y29uc3QgdD1lbShjZShuKSxlKTtyZXR1cm4gai5tYWtlVGVuc29yKHQsbixlKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBuSShuLGUse2luZGV4aW5nOnQ9Inh5In09e30pe2lmKHQhPT0ieHkiJiZ0IT09ImlqIil0aHJvdyBuZXcgVHlwZUVycm9yKGAke3R9IGlzIG5vdCBhIHZhbGlkIHRoaXJkIGFyZ3VtZW50IHRvIG1lc2hncmlkYCk7aWYobj09PXZvaWQgMClyZXR1cm5bXTtsZXQgcz1PKG4sIngiLCJtZXNoZ3JpZCIsbiBpbnN0YW5jZW9mIGR0P24uZHR5cGU6ImZsb2F0MzIiKTtpZihlPT09dm9pZCAwKXJldHVybltzXTtsZXQgcj1PKGUsInkiLCJtZXNoZ3JpZCIsZSBpbnN0YW5jZW9mIGR0P2UuZHR5cGU6ImZsb2F0MzIiKTtjb25zdCBvPWNlKHMuc2hhcGUpLGk9Y2Uoci5zaGFwZSk7cmV0dXJuIHQ9PT0ieHkiPyhzPUoocyxbMSwtMV0pLHI9SihyLFstMSwxXSksW1hlKEpuKFtpLDFdLHMuZHR5cGUpLHMpLFhlKHIsSm4oWzEsb10sci5kdHlwZSkpXSk6KHM9SihzLFstMSwxXSkscj1KKHIsWzEsLTFdKSxbWGUocyxKbihbMSxpXSxzLmR0eXBlKSksWGUoSm4oW28sMV0sci5kdHlwZSkscildKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBIUChuLGUpe2xldCB0PU8obiwiYSIsIm1pbmltdW0iKSxzPU8oZSwiYiIsIm1pbmltdW0iKTtbdCxzXT1GdCh0LHMpLHQuZHR5cGU9PT0iYm9vbCImJih0PU5lKHQsImludDMyIikscz1OZShzLCJpbnQzMiIpKSxIZSh0LnNoYXBlLHMuc2hhcGUpO2NvbnN0IHI9e2E6dCxiOnN9O3JldHVybiBqLnJ1bktlcm5lbChldSxyKX1jb25zdCBjaT1HKHttaW5pbXVtXzpIUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHFQKG4sZSx0KXtBKHQ9PT0icmVmbGVjdCJ8fHQ9PT0ic3ltbWV0cmljIiwoKT0+YEludmFsaWQgbW9kZS4gTW9kZSBtdXN0IGJlIGVpdGhlciByZWZsZWN0IG9yIHN5bW1ldHJpYy4gR290ICR7dH0uYCk7Y29uc3Qgcz1PKG4sIngiLCJtaXJyb3JQYWQiKTtpZihzLnJhbms9PT0wKXRocm93IG5ldyBFcnJvcigibWlycm9yUGFkKHNjYWxhcikgaXMgbm90IGRlZmluZWQuIFBhc3Mgbm9uLXNjYWxhciB0byBtaXJyb3JQYWQiKTtBKGUubGVuZ3RoPT09cy5yYW5rLCgpPT5gUGFkZGluZyBkb2Vzbid0IG1hdGNoIGlucHV0LiBNdXN0IGJlICR7cy5yYW5rfS4gR290ICR7ZS5sZW5ndGh9LmApO2NvbnN0IHI9dD09PSJyZWZsZWN0Ij8xOjA7Zm9yKGxldCBhPTA7YTxzLnJhbms7YSsrKUEoZVthXS5sZW5ndGg9PT0yLCgpPT4iSW52YWxpZCBudW1iZXIgb2YgcGFkZGluZ3MuIE11c3QgYmUgbGVuZ3RoIG9mIDIgZWFjaC4iKSxBKGVbYV1bMF0+PTAmJmVbYV1bMF08PXMuc2hhcGVbYV0tciYmZVthXVsxXT49MCYmZVthXVsxXTw9cy5zaGFwZVthXS1yLCgpPT5gUGFkZGluZyBpbiBkaW1lbnNpb24gJHthfSBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7cy5zaGFwZVthXS1yfSBvciBsZXNzIHRoYW4gMCBmb3IgaW5wdXQgb2Ygc2hhcGUgJHtzLnNoYXBlfWApO2NvbnN0IG89e3BhZGRpbmdzOmUsbW9kZTp0fSxpPXt4OnN9O3JldHVybiBqLnJ1bktlcm5lbChfZCxpLG8pfWNvbnN0IEliPUcoe21pcnJvclBhZF86cVB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBLUChuLGUpe2xldCB0PU8obiwiYSIsIm1vZCIpLHM9TyhlLCJiIiwibW9kIik7W3Qsc109RnQodCxzKTtjb25zdCByPXthOnQsYjpzfTtyZXR1cm4gai5ydW5LZXJuZWwodHUscil9Y29uc3QgVGI9Ryh7bW9kXzpLUH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFhQKG4sZT1udWxsLHQ9ITEpe249TyhuLCJ4IiwibW9tZW50cyIpO2NvbnN0IHM9UWUoZSxuLnNoYXBlKSxyPV90KG4scyx0KTtsZXQgbz1yLnNoYXBlO3R8fChvPVV0KHIuc2hhcGUscykpO2NvbnN0IGk9eXQoSWUoTmUobiwiZmxvYXQzMiIpLEoocixvKSkpLGE9X3QoaSxzLHQpO3JldHVybnttZWFuOnIsdmFyaWFuY2U6YX19Y29uc3QgZmg9Ryh7bW9tZW50c186WFB9KTtmdW5jdGlvbiBZUChuLGUsdCxzKXtjb25zdCByPU8oZSwiZGF0YSIsIm11bHRpUk5OQ2VsbCIpLG89QmModCwiYyIsIm11bHRpUk5OQ2VsbCIpLGk9QmMocywiaCIsIm11bHRpUk5OQ2VsbCIpO2xldCBhPXI7Y29uc3QgbD1bXTtmb3IobGV0IHA9MDtwPG4ubGVuZ3RoO3ArKyl7Y29uc3QgZj1uW3BdKGEsb1twXSxpW3BdKTtsLnB1c2goZlswXSksbC5wdXNoKGZbMV0pLGE9ZlsxXX1jb25zdCBjPVtdLGg9W107Zm9yKGxldCBwPTA7cDxsLmxlbmd0aDtwKz0yKWMucHVzaChsW3BdKSxoLnB1c2gobFtwKzFdKTtyZXR1cm5bYyxoXX1jb25zdCBzST1HKHttdWx0aVJOTkNlbGxfOllQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUVAobixlLHQscz0hMSl7Y29uc3Qgcj1PKG4sImxvZ2l0cyIsIm11bHRpbm9taWFsIiksbz1yLnNpemUsaT1yLnJhbms7aWYobzwyKXRocm93IG5ldyBFcnJvcihgRXJyb3IgaW4gbXVsdGlub21pYWw6IHlvdSBuZWVkIGF0IGxlYXN0IDIgb3V0Y29tZXMsIGJ1dCBnb3QgJHtvfS5gKTtpZihpPjIpdGhyb3cgbmV3IEVycm9yKGBSYW5rIG9mIHByb2JhYmlsaXRpZXMgbXVzdCBiZSAxIG9yIDIsIGJ1dCBpcyAke2l9YCk7dD10fHxNYXRoLnJhbmRvbSgpO2NvbnN0IGw9e2xvZ2l0czppPT09MT9KKHIsWzEsLTFdKTpyfSxjPXtudW1TYW1wbGVzOmUsc2VlZDp0LG5vcm1hbGl6ZWQ6c30saD1qLnJ1bktlcm5lbChBbSxsLGMpO3JldHVybiBpPT09MT9KKGgsW2guc2l6ZV0pOmh9Y29uc3Qgckk9Ryh7bXVsdGlub21pYWxfOlFQfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWlAobixlKXtsZXQgdD1PKG4sImEiLCJub3RFcXVhbCIsInN0cmluZ19vcl9udW1lcmljIikscz1PKGUsImIiLCJub3RFcXVhbCIsInN0cmluZ19vcl9udW1lcmljIik7W3Qsc109RnQodCxzKSxIZSh0LnNoYXBlLHMuc2hhcGUpO2NvbnN0IHI9e2E6dCxiOnN9O3JldHVybiBqLnJ1bktlcm5lbChGZCxyKX1jb25zdCBkYT1HKHtub3RFcXVhbF86WlB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBKUChuLGUsdD0xLHM9MCxyPSJpbnQzMiIpe2lmKGU8Mil0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGluIG9uZUhvdDogZGVwdGggbXVzdCBiZSA+PTIsIGJ1dCBpdCBpcyAke2V9YCk7Y29uc3QgaT17aW5kaWNlczpPKG4sImluZGljZXMiLCJvbmVIb3QiLCJpbnQzMiIpfSxhPXtkdHlwZTpyLGRlcHRoOmUsb25WYWx1ZTp0LG9mZlZhbHVlOnN9O3JldHVybiBqLnJ1bktlcm5lbChQZCxpLGEpfWNvbnN0IHlsPUcoe29uZUhvdF86SlB9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBleihuKXtjb25zdCB0PXt4Ok8obiwieCIsIm9uZXNMaWtlIil9O3JldHVybiBqLnJ1bktlcm5lbChMZCx0KX1jb25zdCB2cz1HKHtvbmVzTGlrZV86ZXp9KTtmdW5jdGlvbiB0eihuLGUpe2NvbnN0IHQ9TyhuLCJ2MSIsIm91dGVyUHJvZHVjdCIpLHM9TyhlLCJ2MiIsIm91dGVyUHJvZHVjdCIpO0EodC5yYW5rPT09MSYmcy5yYW5rPT09MSwoKT0+YEVycm9yIGluIG91dGVyUHJvZHVjdDogaW5wdXRzIG11c3QgYmUgcmFuayAxLCBidXQgZ290IHJhbmtzICR7dC5yYW5rfSBhbmQgJHtzLnJhbmt9LmApO2NvbnN0IHI9Sih0LFstMSwxXSksbz1KKHMsWzEsLTFdKTtyZXR1cm4gWGUocixvKX1jb25zdCBvST1HKHtvdXRlclByb2R1Y3RfOnR6fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gbnoobixlLHQ9MCl7Y29uc3Qgcz1PKG4sIngiLCJwYWQiKTtpZihzLnJhbms9PT0wKXRocm93IG5ldyBFcnJvcigicGFkKHNjYWxhcikgaXMgbm90IGRlZmluZWQuIFBhc3Mgbm9uLXNjYWxhciB0byBwYWQiKTtjb25zdCByPXtwYWRkaW5nczplLGNvbnN0YW50VmFsdWU6dH0sbz17eDpzfTtyZXR1cm4gai5ydW5LZXJuZWwoTWQsbyxyKX1jb25zdCAkbz1HKHtwYWRfOm56fSk7ZnVuY3Rpb24gc3oobixlLHQ9MCl7cmV0dXJuIEEoZS5sZW5ndGg9PT0yLCgpPT4iSW52YWxpZCBudW1iZXIgb2YgcGFkZGluZ3MuIE11c3QgYmUgbGVuZ3RoIG9mIDIuIiksJG8obixbZV0sdCl9Y29uc3QgaUk9Ryh7cGFkMWRfOnN6fSk7ZnVuY3Rpb24gcnoobixlLHQ9MCl7cmV0dXJuIEEoZS5sZW5ndGg9PT0yJiZlWzBdLmxlbmd0aD09PTImJmVbMV0ubGVuZ3RoPT09MiwoKT0+IkludmFsaWQgbnVtYmVyIG9mIHBhZGRpbmdzLiBNdXN0IGJlIGxlbmd0aCBvZiAyIGVhY2guIiksJG8obixlLHQpfWNvbnN0IGFJPUcoe3BhZDJkXzpyen0pO2Z1bmN0aW9uIG96KG4sZSx0PTApe3JldHVybiBBKGUubGVuZ3RoPT09MyYmZVswXS5sZW5ndGg9PT0yJiZlWzFdLmxlbmd0aD09PTImJmVbMl0ubGVuZ3RoPT09MiwoKT0+IkludmFsaWQgbnVtYmVyIG9mIHBhZGRpbmdzLiBNdXN0IGJlIGxlbmd0aCBvZiAyIGVhY2guIiksJG8obixlLHQpfWNvbnN0IGxJPUcoe3BhZDNkXzpven0pO2Z1bmN0aW9uIGl6KG4sZSx0PTApe3JldHVybiBBKGUubGVuZ3RoPT09NCYmZVswXS5sZW5ndGg9PT0yJiZlWzFdLmxlbmd0aD09PTImJmVbMl0ubGVuZ3RoPT09MiYmZVszXS5sZW5ndGg9PT0yLCgpPT4iSW52YWxpZCBudW1iZXIgb2YgcGFkZGluZ3MuIE11c3QgYmUgbGVuZ3RoIG9mIDIgZWFjaC4iKSwkbyhuLGUsdCl9Y29uc3QgdUk9Ryh7cGFkNGRfOml6fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gYXoobixlLHQpe2NvbnN0IHM9TyhuLCJ4Iiwic3BhY2VUb0JhdGNoTkQiKTtBKHMucmFuaz49MStlLmxlbmd0aCwoKT0+YGlucHV0IHJhbmsgJHtzLnJhbmt9IHNob3VsZCBiZSA+IHRoYW4gW2Jsb2NrU2hhcGVdICR7ZS5sZW5ndGh9YCksQSh0Lmxlbmd0aD09PWUubGVuZ3RoLCgpPT5gcGFkZGluZ3Muc2hhcGVbMF0gJHt0Lmxlbmd0aH0gbXVzdCBiZSBlcXVhbCB0byBbYmxvY2tTaGFwZV0gJHtlLmxlbmd0aH1gKSxBKHMuc2hhcGUucmVkdWNlKChpLGEsbCk9Pmw+MCYmbDw9ZS5sZW5ndGg/aSYmKGErdFtsLTFdWzBdK3RbbC0xXVsxXSklZVtsLTFdPT09MDppLCEwKSwoKT0+YGlucHV0IHNwYXRpYWwgZGltZW5zaW9ucyAke3Muc2hhcGUuc2xpY2UoMSl9IHdpdGggcGFkZGluZ3MgJHt0LnRvU3RyaW5nKCl9IG11c3QgYmUgZGl2aXNpYmxlIGJ5IGJsb2NrU2hhcGVzICR7ZS50b1N0cmluZygpfWApO2NvbnN0IHI9e3g6c30sbz17YmxvY2tTaGFwZTplLHBhZGRpbmdzOnR9O3JldHVybiBqLnJ1bktlcm5lbChYZCxyLG8pfWNvbnN0IG1oPUcoe3NwYWNlVG9CYXRjaE5EXzphen0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGx6KG4sZSx0LHMscixvLGkpe3I9PW51bGwmJihyPVsxLDFdKSxvPT1udWxsJiYobz0xKSxzPT09MCYmKHM9InZhbGlkIik7Y29uc3QgYT1PKG4sIngiLCJtYXhQb29sIik7bGV0IGw9YSxjPSExO2EucmFuaz09PTMmJihjPSEwLGw9SihhLFsxLGEuc2hhcGVbMF0sYS5zaGFwZVsxXSxhLnNoYXBlWzJdXSkpLEEoa24obyxyKSwoKT0+YEVycm9yIGluIHBvb2w6IEVpdGhlciBzdHJpZGVzIG9yIGRpbGF0aW9ucyBtdXN0IGJlIDEuIEdvdCBzdHJpZGVzICR7b30gYW5kIGRpbGF0aW9ucyAnJHtyfSdgKTtjb25zdCBoPW5yKGwuc2hhcGUsZSxvLHIscykscD1baC5kaWxhdGlvbkhlaWdodCxoLmRpbGF0aW9uV2lkdGhdO2xldCBmO3M9PT0ic2FtZSI/Zj1jeihbaC5maWx0ZXJIZWlnaHQsaC5maWx0ZXJXaWR0aF0scCk6Zj1bWzAsMF0sWzAsMF1dO2NvbnN0IGc9cFswXT09PTEmJnBbMV09PT0xLFt5LHddPXV6KFtoLmluSGVpZ2h0LGguaW5XaWR0aF0scCxmKSxiPWc/czoidmFsaWQiLHY9Zz9sOm1oKGwscCx5KSwkPSh0PT09ImF2ZyI/KCk9Pm9oKHYsZSxvLGIsaSk6KCk9PnBoKHYsZSxvLGIsaSkpKCksaz1nPyQ6aWgoJCxwLHcpO3JldHVybiBjP0ooayxbay5zaGFwZVsxXSxrLnNoYXBlWzJdLGsuc2hhcGVbM11dKTprfWZ1bmN0aW9uIHV6KG4sZSx0KXtjb25zdCBzPXQubWFwKGg9PmhbMF0pLHI9dC5tYXAoaD0+aFsxXSksbz1uLmNvbmNhdChzLHIpLGk9ZS5tYXAoKGgscCk9PihoLW9bcF0laCklaCksYT1yLm1hcCgoaCxwKT0+aCtpW3BdKSxsPWUubWFwKChoLHApPT5bc1twXSxhW3BdXSksYz1lLm1hcCgoaCxwKT0+WzAsaVtwXV0pO3JldHVybltsLGNdfWZ1bmN0aW9uIGN6KG4sZSl7Y29uc3Qgcz1uLm1hcCgoaSxhKT0+aSsoaS0xKSooZVthXS0xKSkubWFwKGk9PmktMSkscj1zLm1hcChpPT5NYXRoLmZsb29yKGkvMikpLG89cy5tYXAoKGksYSk9PmktclthXSk7cmV0dXJuIHMubWFwKChpLGEpPT5bclthXSxvW2FdXSl9Y29uc3QgRWI9Ryh7cG9vbF86bHp9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBkeihuLGUpe2NvbnN0IHQ9TyhuLCJ4IiwicHJlbHUiKSxzPU8oZSwiYWxwaGEiLCJwcmVsdSIpLHI9e3g6dCxhbHBoYTpzfTtyZXR1cm4gai5ydW5LZXJuZWwoQmQscil9Y29uc3QgZ2g9Ryh7cHJlbHVfOmR6fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gaHoobixlPW51bGwsdD0hMSl7bGV0IHM9TyhuLCJ4IiwicHJvZCIpO3MuZHR5cGU9PT0iYm9vbCImJihzPU5lKHMsImludDMyIikpO2NvbnN0IHI9e3g6c30sbz17YXhpczplLGtlZXBEaW1zOnR9O3JldHVybiBqLnJ1bktlcm5lbChWZCxyLG8pfWNvbnN0IFJiPUcoe3Byb2RfOmh6fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcHoobixlLHQscyl7Y29uc3Qgcj1uLm1hcCgoaCxwKT0+TyhoLGB0ZW5zb3JzJHtwfWAsInJhZ2dlZEdhdGhlciIsImludDMyIikpLG89TyhlLCJwYXJhbXNEZW5zZVZhbHVlcyIsInJhZ2dlZEdhdGhlciIpLGk9Tyh0LCJpbmRpY2VzIiwicmFnZ2VkR2F0aGVyIiwiaW50MzIiKSxhPXtwYXJhbXNOZXN0ZWRTcGxpdHM6cixwYXJhbXNEZW5zZVZhbHVlczpvLGluZGljZXM6aX0sbD17b3V0cHV0UmFnZ2VkUmFuazpzfSxjPWoucnVuS2VybmVsKExtLGEsbCk7cmV0dXJue291dHB1dE5lc3RlZFNwbGl0czpjLnNsaWNlKDAsYy5sZW5ndGgtMSksb3V0cHV0RGVuc2VWYWx1ZXM6Y1tjLmxlbmd0aC0xXX19Y29uc3QgY0k9Ryh7cmFnZ2VkR2F0aGVyXzpwen0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGZ6KG4sZSx0KXtjb25zdCBzPU8obiwic3RhcnRzIiwicmFnZ2VkUmFuZ2UiKSxyPU8oZSwibGltaXRzIiwicmFnZ2VkUmFuZ2UiLHMuZHR5cGUpLG89Tyh0LCJkZWx0YXMiLCJyYWdnZWRSYW5nZSIscy5kdHlwZSksaT17c3RhcnRzOnMsbGltaXRzOnIsZGVsdGFzOm99LGE9ai5ydW5LZXJuZWwoUG0saSk7cmV0dXJue3J0TmVzdGVkU3BsaXRzOmFbMF0scnREZW5zZVZhbHVlczphWzFdfX1jb25zdCBkST1HKHtyYWdnZWRSYW5nZV86Znp9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBteihuLGUsdCxzLHIpe2NvbnN0IG89TyhuLCJzaGFwZSIsInJhZ2dlZFRlbnNvclRvVGVuc29yIiwiaW50MzIiKSxpPU8oZSwidmFsdWVzIiwicmFnZ2VkVGVuc29yVG9UZW5zb3IiKSxhPU8odCwiZGVmYXVsdFZhbHVlIiwicmFnZ2VkVGVuc29yVG9UZW5zb3IiLGkuZHR5cGUpLGw9cy5tYXAoKHAsZik9Pk8ocCxgdGVuc29ycyR7Zn1gLCJyYWdnZWRUZW5zb3JUb1RlbnNvciIsImludDMyIikpLGM9e3NoYXBlOm8sdmFsdWVzOmksZGVmYXVsdFZhbHVlOmEscm93UGFydGl0aW9uVGVuc29yczpsfSxoPXtyb3dQYXJ0aXRpb25UeXBlczpyfTtyZXR1cm4gai5ydW5LZXJuZWwoem0sYyxoKX1jb25zdCBoST1HKHtyYWdnZWRUZW5zb3JUb1RlbnNvcl86bXp9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBneihuLGUsdCl7a3Mobik7Y29uc3Qgcz1jZShuKTtsZXQgcj1udWxsO2lmKHQ9PW51bGx8fHQ9PT0iZmxvYXQzMiIpcj1uZXcgRmxvYXQzMkFycmF5KHMpO2Vsc2UgaWYodD09PSJpbnQzMiIpcj1uZXcgSW50MzJBcnJheShzKTtlbHNlIGlmKHQ9PT0iYm9vbCIpcj1uZXcgVWludDhBcnJheShzKTtlbHNlIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBkYXRhIHR5cGUgJHt0fWApO2ZvcihsZXQgbz0wO288cztvKyspcltvXT1lKCk7cmV0dXJuIGoubWFrZVRlbnNvcihyLG4sdCl9Y29uc3QgcEk9Ryh7cmFuZF86Z3p9KTt2YXIgcGY9e2V4cG9ydHM6e319LHl6PXBmLmV4cG9ydHMsdms7ZnVuY3Rpb24geHooKXtyZXR1cm4gdmt8fCh2az0xLChmdW5jdGlvbihuKXsoZnVuY3Rpb24oZSx0LHMpe2Z1bmN0aW9uIHIobCl7dmFyIGM9dGhpcyxoPWEoKTtjLm5leHQ9ZnVuY3Rpb24oKXt2YXIgcD0yMDkxNjM5KmMuczArYy5jKjIzMjgzMDY0MzY1Mzg2OTYzZS0yNjtyZXR1cm4gYy5zMD1jLnMxLGMuczE9Yy5zMixjLnMyPXAtKGMuYz1wfDApfSxjLmM9MSxjLnMwPWgoIiAiKSxjLnMxPWgoIiAiKSxjLnMyPWgoIiAiKSxjLnMwLT1oKGwpLGMuczA8MCYmKGMuczArPTEpLGMuczEtPWgobCksYy5zMTwwJiYoYy5zMSs9MSksYy5zMi09aChsKSxjLnMyPDAmJihjLnMyKz0xKSxoPW51bGx9ZnVuY3Rpb24gbyhsLGMpe3JldHVybiBjLmM9bC5jLGMuczA9bC5zMCxjLnMxPWwuczEsYy5zMj1sLnMyLGN9ZnVuY3Rpb24gaShsLGMpe3ZhciBoPW5ldyByKGwpLHA9YyYmYy5zdGF0ZSxmPWgubmV4dDtyZXR1cm4gZi5pbnQzMj1mdW5jdGlvbigpe3JldHVybiBoLm5leHQoKSo0Mjk0OTY3Mjk2fDB9LGYuZG91YmxlPWZ1bmN0aW9uKCl7cmV0dXJuIGYoKSsoZigpKjIwOTcxNTJ8MCkqMTExMDIyMzAyNDYyNTE1NjVlLTMyfSxmLnF1aWNrPWYscCYmKHR5cGVvZiBwPT0ib2JqZWN0IiYmbyhwLGgpLGYuc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbyhoLHt9KX0pLGZ9ZnVuY3Rpb24gYSgpe3ZhciBsPTQwMjI4NzExOTcsYz1mdW5jdGlvbihoKXtoPVN0cmluZyhoKTtmb3IodmFyIHA9MDtwPGgubGVuZ3RoO3ArKyl7bCs9aC5jaGFyQ29kZUF0KHApO3ZhciBmPS4wMjUxOTYwMzI4MjQxNjkzOCpsO2w9Zj4+PjAsZi09bCxmKj1sLGw9Zj4+PjAsZi09bCxsKz1mKjQyOTQ5NjcyOTZ9cmV0dXJuKGw+Pj4wKSoyMzI4MzA2NDM2NTM4Njk2M2UtMjZ9O3JldHVybiBjfXQmJnQuZXhwb3J0cz90LmV4cG9ydHM9aTp0aGlzLmFsZWE9aX0pKHl6LG4pfSkocGYpKSxwZi5leHBvcnRzfXZhciBmZj17ZXhwb3J0czp7fX0sYno9ZmYuZXhwb3J0cyxTaztmdW5jdGlvbiB3eigpe3JldHVybiBTa3x8KFNrPTEsKGZ1bmN0aW9uKG4peyhmdW5jdGlvbihlLHQscyl7ZnVuY3Rpb24gcihhKXt2YXIgbD10aGlzLGM9IiI7bC54PTAsbC55PTAsbC56PTAsbC53PTAsbC5uZXh0PWZ1bmN0aW9uKCl7dmFyIHA9bC54XmwueDw8MTE7cmV0dXJuIGwueD1sLnksbC55PWwueixsLno9bC53LGwud149bC53Pj4+MTlecF5wPj4+OH0sYT09PShhfDApP2wueD1hOmMrPWE7Zm9yKHZhciBoPTA7aDxjLmxlbmd0aCs2NDtoKyspbC54Xj1jLmNoYXJDb2RlQXQoaCl8MCxsLm5leHQoKX1mdW5jdGlvbiBvKGEsbCl7cmV0dXJuIGwueD1hLngsbC55PWEueSxsLno9YS56LGwudz1hLncsbH1mdW5jdGlvbiBpKGEsbCl7dmFyIGM9bmV3IHIoYSksaD1sJiZsLnN0YXRlLHA9ZnVuY3Rpb24oKXtyZXR1cm4oYy5uZXh0KCk+Pj4wKS80Mjk0OTY3Mjk2fTtyZXR1cm4gcC5kb3VibGU9ZnVuY3Rpb24oKXtkbyB2YXIgZj1jLm5leHQoKT4+PjExLGc9KGMubmV4dCgpPj4+MCkvNDI5NDk2NzI5Nix5PShmK2cpLygxPDwyMSk7d2hpbGUoeT09PTApO3JldHVybiB5fSxwLmludDMyPWMubmV4dCxwLnF1aWNrPXAsaCYmKHR5cGVvZiBoPT0ib2JqZWN0IiYmbyhoLGMpLHAuc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbyhjLHt9KX0pLHB9dCYmdC5leHBvcnRzP3QuZXhwb3J0cz1pOnRoaXMueG9yMTI4PWl9KShieixuKX0pKGZmKSksZmYuZXhwb3J0c312YXIgbWY9e2V4cG9ydHM6e319LHZ6PW1mLmV4cG9ydHMsTms7ZnVuY3Rpb24gU3ooKXtyZXR1cm4gTmt8fChOaz0xLChmdW5jdGlvbihuKXsoZnVuY3Rpb24oZSx0LHMpe2Z1bmN0aW9uIHIoYSl7dmFyIGw9dGhpcyxjPSIiO2wubmV4dD1mdW5jdGlvbigpe3ZhciBwPWwueF5sLng+Pj4yO3JldHVybiBsLng9bC55LGwueT1sLnosbC56PWwudyxsLnc9bC52LChsLmQ9bC5kKzM2MjQzN3wwKSsobC52PWwudl5sLnY8PDReKHBecDw8MSkpfDB9LGwueD0wLGwueT0wLGwuej0wLGwudz0wLGwudj0wLGE9PT0oYXwwKT9sLng9YTpjKz1hO2Zvcih2YXIgaD0wO2g8Yy5sZW5ndGgrNjQ7aCsrKWwueF49Yy5jaGFyQ29kZUF0KGgpfDAsaD09Yy5sZW5ndGgmJihsLmQ9bC54PDwxMF5sLng+Pj40KSxsLm5leHQoKX1mdW5jdGlvbiBvKGEsbCl7cmV0dXJuIGwueD1hLngsbC55PWEueSxsLno9YS56LGwudz1hLncsbC52PWEudixsLmQ9YS5kLGx9ZnVuY3Rpb24gaShhLGwpe3ZhciBjPW5ldyByKGEpLGg9bCYmbC5zdGF0ZSxwPWZ1bmN0aW9uKCl7cmV0dXJuKGMubmV4dCgpPj4+MCkvNDI5NDk2NzI5Nn07cmV0dXJuIHAuZG91YmxlPWZ1bmN0aW9uKCl7ZG8gdmFyIGY9Yy5uZXh0KCk+Pj4xMSxnPShjLm5leHQoKT4+PjApLzQyOTQ5NjcyOTYseT0oZitnKS8oMTw8MjEpO3doaWxlKHk9PT0wKTtyZXR1cm4geX0scC5pbnQzMj1jLm5leHQscC5xdWljaz1wLGgmJih0eXBlb2YgaD09Im9iamVjdCImJm8oaCxjKSxwLnN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG8oYyx7fSl9KSxwfXQmJnQuZXhwb3J0cz90LmV4cG9ydHM9aTp0aGlzLnhvcndvdz1pfSkodnosbil9KShtZikpLG1mLmV4cG9ydHN9dmFyIGdmPXtleHBvcnRzOnt9fSxOej1nZi5leHBvcnRzLGtrO2Z1bmN0aW9uIGt6KCl7cmV0dXJuIGtrfHwoa2s9MSwoZnVuY3Rpb24obil7KGZ1bmN0aW9uKGUsdCxzKXtmdW5jdGlvbiByKGEpe3ZhciBsPXRoaXM7bC5uZXh0PWZ1bmN0aW9uKCl7dmFyIGg9bC54LHA9bC5pLGYsZztyZXR1cm4gZj1oW3BdLGZePWY+Pj43LGc9Zl5mPDwyNCxmPWhbcCsxJjddLGdePWZeZj4+PjEwLGY9aFtwKzMmN10sZ149Zl5mPj4+MyxmPWhbcCs0JjddLGdePWZeZjw8NyxmPWhbcCs3JjddLGY9Zl5mPDwxMyxnXj1mXmY8PDksaFtwXT1nLGwuaT1wKzEmNyxnfTtmdW5jdGlvbiBjKGgscCl7dmFyIGYsZz1bXTtpZihwPT09KHB8MCkpZ1swXT1wO2Vsc2UgZm9yKHA9IiIrcCxmPTA7ZjxwLmxlbmd0aDsrK2YpZ1tmJjddPWdbZiY3XTw8MTVecC5jaGFyQ29kZUF0KGYpK2dbZisxJjddPDwxMztmb3IoO2cubGVuZ3RoPDg7KWcucHVzaCgwKTtmb3IoZj0wO2Y8OCYmZ1tmXT09PTA7KytmKTtmb3IoZj09OD9nWzddPS0xOmdbZl0saC54PWcsaC5pPTAsZj0yNTY7Zj4wOy0tZiloLm5leHQoKX1jKGwsYSl9ZnVuY3Rpb24gbyhhLGwpe3JldHVybiBsLng9YS54LnNsaWNlKCksbC5pPWEuaSxsfWZ1bmN0aW9uIGkoYSxsKXthPT1udWxsJiYoYT0rbmV3IERhdGUpO3ZhciBjPW5ldyByKGEpLGg9bCYmbC5zdGF0ZSxwPWZ1bmN0aW9uKCl7cmV0dXJuKGMubmV4dCgpPj4+MCkvNDI5NDk2NzI5Nn07cmV0dXJuIHAuZG91YmxlPWZ1bmN0aW9uKCl7ZG8gdmFyIGY9Yy5uZXh0KCk+Pj4xMSxnPShjLm5leHQoKT4+PjApLzQyOTQ5NjcyOTYseT0oZitnKS8oMTw8MjEpO3doaWxlKHk9PT0wKTtyZXR1cm4geX0scC5pbnQzMj1jLm5leHQscC5xdWljaz1wLGgmJihoLngmJm8oaCxjKSxwLnN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG8oYyx7fSl9KSxwfXQmJnQuZXhwb3J0cz90LmV4cG9ydHM9aTp0aGlzLnhvcnNoaWZ0Nz1pfSkoTnosbil9KShnZikpLGdmLmV4cG9ydHN9dmFyIHlmPXtleHBvcnRzOnt9fSxDej15Zi5leHBvcnRzLENrO2Z1bmN0aW9uICR6KCl7cmV0dXJuIENrfHwoQ2s9MSwoZnVuY3Rpb24obil7KGZ1bmN0aW9uKGUsdCxzKXtmdW5jdGlvbiByKGEpe3ZhciBsPXRoaXM7bC5uZXh0PWZ1bmN0aW9uKCl7dmFyIGg9bC53LHA9bC5YLGY9bC5pLGcseTtyZXR1cm4gbC53PWg9aCsxNjQwNTMxNTI3fDAseT1wW2YrMzQmMTI3XSxnPXBbZj1mKzEmMTI3XSx5Xj15PDwxMyxnXj1nPDwxNyx5Xj15Pj4+MTUsZ149Zz4+PjEyLHk9cFtmXT15XmcsbC5pPWYseSsoaF5oPj4+MTYpfDB9O2Z1bmN0aW9uIGMoaCxwKXt2YXIgZixnLHksdyxiLHY9W10sUz0xMjg7Zm9yKHA9PT0ocHwwKT8oZz1wLHA9bnVsbCk6KHA9cCsiXDAiLGc9MCxTPU1hdGgubWF4KFMscC5sZW5ndGgpKSx5PTAsdz0tMzI7dzxTOysrdylwJiYoZ149cC5jaGFyQ29kZUF0KCh3KzMyKSVwLmxlbmd0aCkpLHc9PT0wJiYoYj1nKSxnXj1nPDwxMCxnXj1nPj4+MTUsZ149Zzw8NCxnXj1nPj4+MTMsdz49MCYmKGI9YisxNjQwNTMxNTI3fDAsZj12W3cmMTI3XV49ZytiLHk9Zj09MD95KzE6MCk7Zm9yKHk+PTEyOCYmKHZbKHAmJnAubGVuZ3RofHwwKSYxMjddPS0xKSx5PTEyNyx3PTUxMjt3PjA7LS13KWc9dlt5KzM0JjEyN10sZj12W3k9eSsxJjEyN10sZ149Zzw8MTMsZl49Zjw8MTcsZ149Zz4+PjE1LGZePWY+Pj4xMix2W3ldPWdeZjtoLnc9YixoLlg9dixoLmk9eX1jKGwsYSl9ZnVuY3Rpb24gbyhhLGwpe3JldHVybiBsLmk9YS5pLGwudz1hLncsbC5YPWEuWC5zbGljZSgpLGx9ZnVuY3Rpb24gaShhLGwpe2E9PW51bGwmJihhPStuZXcgRGF0ZSk7dmFyIGM9bmV3IHIoYSksaD1sJiZsLnN0YXRlLHA9ZnVuY3Rpb24oKXtyZXR1cm4oYy5uZXh0KCk+Pj4wKS80Mjk0OTY3Mjk2fTtyZXR1cm4gcC5kb3VibGU9ZnVuY3Rpb24oKXtkbyB2YXIgZj1jLm5leHQoKT4+PjExLGc9KGMubmV4dCgpPj4+MCkvNDI5NDk2NzI5Nix5PShmK2cpLygxPDwyMSk7d2hpbGUoeT09PTApO3JldHVybiB5fSxwLmludDMyPWMubmV4dCxwLnF1aWNrPXAsaCYmKGguWCYmbyhoLGMpLHAuc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbyhjLHt9KX0pLHB9dCYmdC5leHBvcnRzP3QuZXhwb3J0cz1pOnRoaXMueG9yNDA5Nj1pfSkoQ3osbil9KSh5ZikpLHlmLmV4cG9ydHN9dmFyIHhmPXtleHBvcnRzOnt9fSxJej14Zi5leHBvcnRzLCRrO2Z1bmN0aW9uIFR6KCl7cmV0dXJuICRrfHwoJGs9MSwoZnVuY3Rpb24obil7KGZ1bmN0aW9uKGUsdCxzKXtmdW5jdGlvbiByKGEpe3ZhciBsPXRoaXMsYz0iIjtsLm5leHQ9ZnVuY3Rpb24oKXt2YXIgcD1sLmIsZj1sLmMsZz1sLmQseT1sLmE7cmV0dXJuIHA9cDw8MjVecD4+PjdeZixmPWYtZ3wwLGc9Zzw8MjReZz4+PjheeSx5PXktcHwwLGwuYj1wPXA8PDIwXnA+Pj4xMl5mLGwuYz1mPWYtZ3wwLGwuZD1nPDwxNl5mPj4+MTZeeSxsLmE9eS1wfDB9LGwuYT0wLGwuYj0wLGwuYz0tMTY0MDUzMTUyNyxsLmQ9MTM2NzEzMDU1MSxhPT09TWF0aC5mbG9vcihhKT8obC5hPWEvNDI5NDk2NzI5NnwwLGwuYj1hfDApOmMrPWE7Zm9yKHZhciBoPTA7aDxjLmxlbmd0aCsyMDtoKyspbC5iXj1jLmNoYXJDb2RlQXQoaCl8MCxsLm5leHQoKX1mdW5jdGlvbiBvKGEsbCl7cmV0dXJuIGwuYT1hLmEsbC5iPWEuYixsLmM9YS5jLGwuZD1hLmQsbH1mdW5jdGlvbiBpKGEsbCl7dmFyIGM9bmV3IHIoYSksaD1sJiZsLnN0YXRlLHA9ZnVuY3Rpb24oKXtyZXR1cm4oYy5uZXh0KCk+Pj4wKS80Mjk0OTY3Mjk2fTtyZXR1cm4gcC5kb3VibGU9ZnVuY3Rpb24oKXtkbyB2YXIgZj1jLm5leHQoKT4+PjExLGc9KGMubmV4dCgpPj4+MCkvNDI5NDk2NzI5Nix5PShmK2cpLygxPDwyMSk7d2hpbGUoeT09PTApO3JldHVybiB5fSxwLmludDMyPWMubmV4dCxwLnF1aWNrPXAsaCYmKHR5cGVvZiBoPT0ib2JqZWN0IiYmbyhoLGMpLHAuc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbyhjLHt9KX0pLHB9dCYmdC5leHBvcnRzP3QuZXhwb3J0cz1pOnRoaXMudHljaGVpPWl9KShJeixuKX0pKHhmKSkseGYuZXhwb3J0c312YXIgYmY9e2V4cG9ydHM6e319O2NvbnN0IEV6PXt9LFJ6PU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxkZWZhdWx0OkV6fSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpLER6PWsxKFJ6KTt2YXIgQXo9YmYuZXhwb3J0cyxJaztmdW5jdGlvbiBfeigpe3JldHVybiBJa3x8KElrPTEsKGZ1bmN0aW9uKG4peyhmdW5jdGlvbihlLHQscyl7dmFyIHI9MjU2LG89NixpPTUyLGE9InJhbmRvbSIsbD1zLnBvdyhyLG8pLGM9cy5wb3coMixpKSxoPWMqMixwPXItMSxmO2Z1bmN0aW9uIGcoayxULEQpe3ZhciBMPVtdO1Q9VD09ITA/e2VudHJvcHk6ITB9OlR8fHt9O3ZhciB6PXYoYihULmVudHJvcHk/W2ssJCh0KV06az8/UygpLDMpLEwpLEY9bmV3IHkoTCksXz1mdW5jdGlvbigpe2Zvcih2YXIgRT1GLmcobyksTT1sLFU9MDtFPGM7KUU9KEUrVSkqcixNKj1yLFU9Ri5nKDEpO2Zvcig7RT49aDspRS89MixNLz0yLFU+Pj49MTtyZXR1cm4oRStVKS9NfTtyZXR1cm4gXy5pbnQzMj1mdW5jdGlvbigpe3JldHVybiBGLmcoNCl8MH0sXy5xdWljaz1mdW5jdGlvbigpe3JldHVybiBGLmcoNCkvNDI5NDk2NzI5Nn0sXy5kb3VibGU9Xyx2KCQoRi5TKSx0KSwoVC5wYXNzfHxEfHxmdW5jdGlvbihFLE0sVSxZKXtyZXR1cm4gWSYmKFkuUyYmdyhZLEYpLEUuc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdyhGLHt9KX0pLFU/KHNbYV09RSxNKTpFfSkoXyx6LCJnbG9iYWwiaW4gVD9ULmdsb2JhbDp0aGlzPT1zLFQuc3RhdGUpfWZ1bmN0aW9uIHkoayl7dmFyIFQsRD1rLmxlbmd0aCxMPXRoaXMsej0wLEY9TC5pPUwuaj0wLF89TC5TPVtdO2ZvcihEfHwoaz1bRCsrXSk7ejxyOylfW3pdPXorKztmb3Ioej0wO3o8cjt6KyspX1t6XT1fW0Y9cCZGK2tbeiVEXSsoVD1fW3pdKV0sX1tGXT1UOyhMLmc9ZnVuY3Rpb24oRSl7Zm9yKHZhciBNLFU9MCxZPUwuaSxRPUwuaixuZT1MLlM7RS0tOylNPW5lW1k9cCZZKzFdLFU9VSpyK25lW3AmKG5lW1ldPW5lW1E9cCZRK01dKSsobmVbUV09TSldO3JldHVybiBMLmk9WSxMLmo9USxVfSkocil9ZnVuY3Rpb24gdyhrLFQpe3JldHVybiBULmk9ay5pLFQuaj1rLmosVC5TPWsuUy5zbGljZSgpLFR9ZnVuY3Rpb24gYihrLFQpe3ZhciBEPVtdLEw9dHlwZW9mIGssejtpZihUJiZMPT0ib2JqZWN0Iilmb3IoeiBpbiBrKXRyeXtELnB1c2goYihrW3pdLFQtMSkpfWNhdGNoe31yZXR1cm4gRC5sZW5ndGg/RDpMPT0ic3RyaW5nIj9rOmsrIlwwIn1mdW5jdGlvbiB2KGssVCl7Zm9yKHZhciBEPWsrIiIsTCx6PTA7ejxELmxlbmd0aDspVFtwJnpdPXAmKExePVRbcCZ6XSoxOSkrRC5jaGFyQ29kZUF0KHorKyk7cmV0dXJuICQoVCl9ZnVuY3Rpb24gUygpe3RyeXt2YXIgaztyZXR1cm4gZiYmKGs9Zi5yYW5kb21CeXRlcyk/az1rKHIpOihrPW5ldyBVaW50OEFycmF5KHIpLChlLmNyeXB0b3x8ZS5tc0NyeXB0bykuZ2V0UmFuZG9tVmFsdWVzKGspKSwkKGspfWNhdGNoe3ZhciBUPWUubmF2aWdhdG9yLEQ9VCYmVC5wbHVnaW5zO3JldHVyblsrbmV3IERhdGUsZSxELGUuc2NyZWVuLCQodCldfX1mdW5jdGlvbiAkKGspe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KDAsayl9aWYodihzLnJhbmRvbSgpLHQpLG4uZXhwb3J0cyl7bi5leHBvcnRzPWc7dHJ5e2Y9RHp9Y2F0Y2h7fX1lbHNlIHNbInNlZWQiK2FdPWd9KSh0eXBlb2Ygc2VsZjwidSI/c2VsZjpBeixbXSxNYXRoKX0pKGJmKSksYmYuZXhwb3J0c312YXIgcDAsVGs7ZnVuY3Rpb24gT3ooKXtpZihUaylyZXR1cm4gcDA7VGs9MTt2YXIgbj14eigpLGU9d3ooKSx0PVN6KCkscz1reigpLHI9JHooKSxvPVR6KCksaT1feigpO3JldHVybiBpLmFsZWE9bixpLnhvcjEyOD1lLGkueG9yd293PXQsaS54b3JzaGlmdDc9cyxpLnhvcjQwOTY9cixpLnR5Y2hlaT1vLHAwPWkscDB9dmFyIHdnPU96KCk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRno9LjAwMSxmST0uMTtmdW5jdGlvbiBMeihuLGUsdCl7cmV0dXJuIHQ9PW51bGwmJih0PURiKCkpLGowKG4sZSwocyxyKT0+QWIocyxyLHQpKX1mdW5jdGlvbiBEYigpe3JldHVybiBqLmJhY2tlbmQuZmxvYXRQcmVjaXNpb24oKT09PTMyP0Z6OmZJfWZ1bmN0aW9uIGowKG4sZSx0KXtsZXQgcz0hMDtpZigoY24obil8fGNuKGUpKSYmKHM9ITEpLGNuKG4pJiZjbihlKSYmKHM9ITApLHMpe2NvbnN0IGk9bi5jb25zdHJ1Y3Rvci5uYW1lLGE9ZS5jb25zdHJ1Y3Rvci5uYW1lO2lmKGkhPT1hKXRocm93IG5ldyBFcnJvcihgQXJyYXlzIGFyZSBvZiBkaWZmZXJlbnQgdHlwZS4gQWN0dWFsOiAke2l9LiBFeHBlY3RlZDogJHthfWApfWlmKEFycmF5LmlzQXJyYXkobikmJkFycmF5LmlzQXJyYXkoZSkpe2NvbnN0IGk9SHIobiksYT1IcihlKTtpZighSmUoaSxhKSl0aHJvdyBuZXcgRXJyb3IoYEFycmF5cyBoYXZlIGRpZmZlcmVudCBzaGFwZXMuIEFjdHVhbDogWyR7aX1dLiBFeHBlY3RlZDogWyR7YX1dYCl9Y29uc3Qgcj1jbihuKT9uOkdyKG4pLG89Y24oZSk/ZTpHcihlKTtpZihyLmxlbmd0aCE9PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgQXJyYXlzIGhhdmUgZGlmZmVyZW50IGxlbmd0aHMgYWN0dWFsOiAke3IubGVuZ3RofSB2cyBleHBlY3RlZDogJHtvLmxlbmd0aH0uCkFjdHVhbDogICAke3J9LgpFeHBlY3RlZDogJHtvfS5gKTtmb3IobGV0IGk9MDtpPG8ubGVuZ3RoOysraSl7Y29uc3QgYT1yW2ldLGw9b1tpXTtpZighdChhLGwpKXRocm93IG5ldyBFcnJvcihgQXJyYXlzIGRpZmZlcjogYWN0dWFsWyR7aX1dID0gJHthfSwgZXhwZWN0ZWRbJHtpfV0gPSAke2x9LgpBY3R1YWw6ICAgJHtyfS4KRXhwZWN0ZWQ6ICR7b30uYCl9dHlwZW9mIGV4cGVjdDwidSImJmV4cGVjdCgpLm5vdGhpbmcoKX1mdW5jdGlvbiBQeihuLGUpe24oKS50aGVuKCgpPT5lLmZhaWwoKSwoKT0+ZSgpKSx0eXBlb2YgZXhwZWN0PCJ1IiYmZXhwZWN0KCkubm90aGluZygpfWZ1bmN0aW9uIHp6KG4sZSl7Y29uc3QgdD10eXBlb2YgZT09InN0cmluZyJ8fHR5cGVvZiBlPT0ibnVtYmVyInx8dHlwZW9mIGU9PSJib29sZWFuIj9bZV06ZTtyZXR1cm4genIobil8fHpyKG5bMF0pfHx6cihlKXx8enIoZVswXSk/ajAobix0LChzLHIpPT5zPT1yKTpqMChuLGUsKHMscik9PkFiKHMsciwwKSl9ZnVuY3Rpb24gTXoobixlLHQpe2lmKHQ9PW51bGwmJih0PURiKCkpLCFBYihuLGUsdCkpdGhyb3cgbmV3IEVycm9yKGBOdW1iZXJzIGRpZmZlcjogYWN0dWFsID09PSAke259LCBleHBlY3RlZCA9PT0gJHtlfWApO3R5cGVvZiBleHBlY3Q8InUiJiZleHBlY3QoKS5ub3RoaW5nKCl9ZnVuY3Rpb24gQWIobixlLHQpe3JldHVybiFpc0Zpbml0ZShuKSYmIWlzRmluaXRlKGUpPyEwOiEoaXNOYU4obil8fGlzTmFOKGUpfHxNYXRoLmFicyhuLWUpPnQpfWZ1bmN0aW9uIEJ6KG4sZSx0KXtmb3IobGV0IHM9MDtzPG4ubGVuZ3RoO3MrKylpZihuW3NdPGV8fG5bc10+dCl0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIG91dCBvZiByYW5nZToke25bc119IGxvdzogJHtlfSwgaGlnaDogJHt0fWApfWZ1bmN0aW9uIFZ6KG4sZSl7Y29uc3QgdD1uZXcgRmxvYXQzMkFycmF5KG4pLHM9bmV3IEZsb2F0MzJBcnJheShlKTtpZih0Lmxlbmd0aCE9PXMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgQXJyYXlCdWZmZXIgdG8gYmUgb2YgbGVuZ3RoICR7cy5sZW5ndGh9LCBidXQgaXQgd2FzICR7dC5sZW5ndGh9YCk7Zm9yKGxldCByPTA7cjxzLmxlbmd0aDtyKyspaWYodFtyXSE9PXNbcl0pdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBBcnJheUJ1ZmZlciB2YWx1ZSBhdCAke3J9IHRvIGJlICR7c1tyXX0gYnV0IGdvdCAke3Rbcl19IGluc3RlYWRgKX1mdW5jdGlvbiBtSShuKXtmb3IobGV0IGU9MDtlPG4ubGVuZ3RoO2UrKyl7Y29uc3QgdD1uW2VdO0FycmF5LmlzQXJyYXkodCk/bUkodCk6bltlXT1Ccih0KX1yZXR1cm4gbn1mdW5jdGlvbiBXeihuKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInZpZGVvIik7cmV0dXJuInBsYXlzSW5saW5lImluIGUmJihlLnBsYXlzSW5saW5lPSEwKSxlLm11dGVkPSEwLGUubG9vcD0hMCxlLnN0eWxlLnBvc2l0aW9uPSJmaXhlZCIsZS5zdHlsZS5sZWZ0PSIwcHgiLGUuc3R5bGUudG9wPSIwcHgiLGUucHJlbG9hZD0iYXV0byIsZS5hcHBlbmRDaGlsZChuKSxuZXcgUHJvbWlzZSh0PT57ZS5hZGRFdmVudExpc3RlbmVyKCJsb2FkZWRkYXRhIixzPT50KGUpKSxlLmxvYWQoKX0pfWFzeW5jIGZ1bmN0aW9uIFV6KG4pe2F3YWl0IG4ucGxheSgpLCJyZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrImluIG4mJmF3YWl0IG5ldyBQcm9taXNlKGU9PntuLnJlcXVlc3RWaWRlb0ZyYW1lQ2FsbGJhY2soZSl9KX1jb25zdCBqej1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsVEVTVF9FUFNJTE9OX0ZMT0FUMTY6ZkksY3JlYXRlVmlkZW9FbGVtZW50Old6LGVuY29kZVN0cmluZ3M6bUksZXhwZWN0QXJyYXlCdWZmZXJzRXF1YWw6VnosZXhwZWN0QXJyYXlzQ2xvc2U6THosZXhwZWN0QXJyYXlzRXF1YWw6enosZXhwZWN0TnVtYmVyc0Nsb3NlOk16LGV4cGVjdFByb21pc2VUb0ZhaWw6UHosZXhwZWN0VmFsdWVzSW5SYW5nZTpCeixwbGF5OlV6LHRlc3RFcHNpbG9uOkRifSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIF9ie2NvbnN0cnVjdG9yKGUsdCxzLHIsbyl7dGhpcy5tZWFuPWUsdGhpcy5zdGREZXY9dCx0aGlzLmR0eXBlPXMsdGhpcy5uZXh0VmFsPU5hTix0aGlzLnRydW5jYXRlZD1yLHRoaXMudHJ1bmNhdGVkJiYodGhpcy51cHBlcj10aGlzLm1lYW4rdGhpcy5zdGREZXYqMix0aGlzLmxvd2VyPXRoaXMubWVhbi10aGlzLnN0ZERldioyKTtjb25zdCBpPW98fE1hdGgucmFuZG9tKCk7dGhpcy5yYW5kb209d2cuYWxlYShpLnRvU3RyaW5nKCkpfW5leHRWYWx1ZSgpe2lmKCFpc05hTih0aGlzLm5leHRWYWwpKXtjb25zdCByPXRoaXMubmV4dFZhbDtyZXR1cm4gdGhpcy5uZXh0VmFsPU5hTixyfWxldCBlLHQscz0hMTtmb3IoOyFzOyl7bGV0IHIsbyxpO2RvIHI9Mip0aGlzLnJhbmRvbSgpLTEsbz0yKnRoaXMucmFuZG9tKCktMSxpPXIqcitvKm87d2hpbGUoaT49MXx8aT09PTApO2NvbnN0IGE9TWF0aC5zcXJ0KC0yKk1hdGgubG9nKGkpL2kpO2U9dGhpcy5tZWFuK3RoaXMuc3RkRGV2KnIqYSx0PXRoaXMubWVhbit0aGlzLnN0ZERldipvKmEsKCF0aGlzLnRydW5jYXRlZHx8dGhpcy5pc1ZhbGlkVHJ1bmNhdGVkKGUpKSYmKHM9ITApfXJldHVybighdGhpcy50cnVuY2F0ZWR8fHRoaXMuaXNWYWxpZFRydW5jYXRlZCh0KSkmJih0aGlzLm5leHRWYWw9dGhpcy5jb252ZXJ0VmFsdWUodCkpLHRoaXMuY29udmVydFZhbHVlKGUpfWNvbnZlcnRWYWx1ZShlKXtyZXR1cm4gdGhpcy5kdHlwZT09bnVsbHx8dGhpcy5kdHlwZT09PSJmbG9hdDMyIj9lOk1hdGgucm91bmQoZSl9aXNWYWxpZFRydW5jYXRlZChlKXtyZXR1cm4gZTw9dGhpcy51cHBlciYmZT49dGhpcy5sb3dlcn19Y2xhc3MgR3p7Y29uc3RydWN0b3IoZSx0LHMscil7dGhpcy5hbHBoYT1lLHRoaXMuYmV0YT0xL3QsdGhpcy5kdHlwZT1zO2NvbnN0IG89cnx8TWF0aC5yYW5kb20oKTt0aGlzLnJhbmR1PXdnLmFsZWEoby50b1N0cmluZygpKSx0aGlzLnJhbmRuPW5ldyBfYigwLDEscywhMSx0aGlzLnJhbmR1KCkpLGU8MT90aGlzLmQ9ZSsyLzM6dGhpcy5kPWUtMS8zLHRoaXMuYz0xL01hdGguc3FydCg5KnRoaXMuZCl9bmV4dFZhbHVlKCl7bGV0IGUsdCxzLHIsbyxpO2Zvcig7Oyl7ZG8gcj10aGlzLnJhbmRuLm5leHRWYWx1ZSgpLGk9MSt0aGlzLmMqcjt3aGlsZShpPD0wKTtpZihpKj1pKmksZT1yKnIsdD0xLS4zMzEqZSplLHM9LjUqZSt0aGlzLmQqKDEtaStNYXRoLmxvZyhpKSksbz10aGlzLnJhbmR1KCksbzx0fHxNYXRoLmxvZyhvKTxzKWJyZWFrfXJldHVybiBpPTEvdGhpcy5iZXRhKnRoaXMuZCppLHRoaXMuYWxwaGE8MSYmKGkqPU1hdGgucG93KHRoaXMucmFuZHUoKSwxL3RoaXMuYWxwaGEpKSx0aGlzLmNvbnZlcnRWYWx1ZShpKX1jb252ZXJ0VmFsdWUoZSl7cmV0dXJuIHRoaXMuZHR5cGU9PT0iZmxvYXQzMiI/ZTpNYXRoLnJvdW5kKGUpfX1jbGFzcyBIentjb25zdHJ1Y3RvcihlPTAsdD0xLHMscil7aWYodGhpcy5jYW5SZXR1cm5GbG9hdD0oKT0+dGhpcy5kdHlwZT09bnVsbHx8dGhpcy5kdHlwZT09PSJmbG9hdDMyIix0aGlzLm1pbj1lLHRoaXMucmFuZ2U9dC1lLHRoaXMuZHR5cGU9cyxyPT1udWxsJiYocj1NYXRoLnJhbmRvbSgpKSx0eXBlb2Ygcj09Im51bWJlciImJihyPXIudG9TdHJpbmcoKSksIXRoaXMuY2FuUmV0dXJuRmxvYXQoKSYmdGhpcy5yYW5nZTw9MSl0aHJvdyBuZXcgRXJyb3IoYFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gJHtlfSAtICR7dH0gPD0gMSBhbmQgZHR5cGUgaXMgbm90IGZsb2F0YCk7dGhpcy5yYW5kb209d2cuYWxlYShyKX1jb252ZXJ0VmFsdWUoZSl7cmV0dXJuIHRoaXMuY2FuUmV0dXJuRmxvYXQoKT9lOk1hdGgucm91bmQoZSl9bmV4dFZhbHVlKCl7cmV0dXJuIHRoaXMuY29udmVydFZhbHVlKHRoaXMubWluK3RoaXMucmFuZ2UqdGhpcy5yYW5kb20oKSl9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHF6KG4sZSx0PTEscz0iZmxvYXQzMiIscil7aWYoa3MobiksdD09bnVsbCYmKHQ9MSkscz09bnVsbCYmKHM9ImZsb2F0MzIiKSxzIT09ImZsb2F0MzIiJiZzIT09ImludDMyIil0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGRhdGEgdHlwZSAke3N9YCk7Y29uc3Qgbz1uZXcgR3ooZSx0LHMsciksaT1xZShuLHMpO2ZvcihsZXQgYT0wO2E8aS52YWx1ZXMubGVuZ3RoO2ErKylpLnZhbHVlc1thXT1vLm5leHRWYWx1ZSgpO3JldHVybiBpLnRvVGVuc29yKCl9Y29uc3QgZ0k9Ryh7cmFuZG9tR2FtbWFfOnF6fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gS3oobixlPTAsdD0xLHMscil7aWYoa3MobikscyE9bnVsbCYmcz09PSJib29sIil0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGRhdGEgdHlwZSAke3N9YCk7Y29uc3Qgbz1uZXcgX2IoZSx0LHMsITEsciksaT1xZShuLHMpO2ZvcihsZXQgYT0wO2E8aS52YWx1ZXMubGVuZ3RoO2ErKylpLnZhbHVlc1thXT1vLm5leHRWYWx1ZSgpO3JldHVybiBpLnRvVGVuc29yKCl9Y29uc3Qgdmc9Ryh7cmFuZG9tTm9ybWFsXzpLen0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFh6KG4sZSx0KXtpZihlIT1udWxsJiZlPT09ImJvb2wiKXRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgZGF0YSB0eXBlICR7ZX1gKTtyZXR1cm4gdmcobiwwLDEsZSx0KX1jb25zdCB5ST1HKHtyYW5kb21TdGFuZGFyZE5vcm1hbF86WHp9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBZeihuLGU9MCx0PTEscz0iZmxvYXQzMiIscil7a3Mobik7Y29uc3Qgbz1xZShuLHMpLGk9bmV3IEh6KGUsdCxudWxsLHIpO2ZvcihsZXQgYT0wO2E8by52YWx1ZXMubGVuZ3RoO2ErKylvLnZhbHVlc1thXT1pLm5leHRWYWx1ZSgpO3JldHVybiBvLnRvVGVuc29yKCl9Y29uc3Qgdmk9Ryh7cmFuZG9tVW5pZm9ybV86WXp9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBReihuLGUsdCxzKXtyZXR1cm4gdmkobixlLHQsImludDMyIixzKX1jb25zdCB4ST1HKHtyYW5kb21Vbmlmb3JtSW50XzpRen0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGhhKG4sZSx0PTEscz0iZmxvYXQzMiIpe2lmKHQ9PT0wKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGhhdmUgYSBzdGVwIG9mIHplcm8iKTtjb25zdCByPXtzdGFydDpuLHN0b3A6ZSxzdGVwOnQsZHR5cGU6c307cmV0dXJuIGoucnVuS2VybmVsKE1tLHt9LHIpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFp6KG4pe2NvbnN0IHQ9e2lucHV0Ok8obiwiaW5wdXQiLCJyZWFsIil9O3JldHVybiBqLnJ1bktlcm5lbChCbSx0KX1jb25zdCB4bD1HKHtyZWFsXzpaen0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEp6KG4pe2NvbnN0IHQ9e3g6TyhuLCJ4IiwicmVjaXByb2NhbCIpfTtyZXR1cm4gai5ydW5LZXJuZWwocnUsdCl9Y29uc3QgT2I9Ryh7cmVjaXByb2NhbF86Snp9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBlNChuKXtjb25zdCB0PXt4Ok8obiwieCIsInJlbHUiKX07cmV0dXJuIGoucnVuS2VybmVsKG91LHQpfWNvbnN0IElyPUcoe3JlbHVfOmU0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdDQobil7Y29uc3QgdD17eDpPKG4sIngiLCJyZWx1NiIpfTtyZXR1cm4gai5ydW5LZXJuZWwoaXUsdCl9Y29uc3QgU2c9Ryh7cmVsdTZfOnQ0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gbjQobixlKXtjb25zdCBzPXt4Ok8obiwieCIsInJldmVyc2UiKX0scj17ZGltczplfTtyZXR1cm4gai5ydW5LZXJuZWwoR2QscyxyKX1jb25zdCBQcz1HKHtyZXZlcnNlXzpuNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHM0KG4pe2NvbnN0IGU9TyhuLCJ4IiwicmV2ZXJzZSIpO3JldHVybiBBKGUucmFuaz09PTEsKCk9PmBFcnJvciBpbiByZXZlcnNlMUQ6IHggbXVzdCBiZSByYW5rIDEgYnV0IGdvdCByYW5rICR7ZS5yYW5rfS5gKSxQcyhlLDApfWNvbnN0IGJJPUcoe3JldmVyc2UxZF86czR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiByNChuLGUpe2NvbnN0IHQ9TyhuLCJ4IiwicmV2ZXJzZSIpO3JldHVybiBBKHQucmFuaz09PTIsKCk9PmBFcnJvciBpbiByZXZlcnNlMkQ6IHggbXVzdCBiZSByYW5rIDIgYnV0IGdvdCByYW5rICR7dC5yYW5rfS5gKSxQcyh0LGUpfWNvbnN0IHdJPUcoe3JldmVyc2UyZF86cjR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBvNChuLGUpe2NvbnN0IHQ9TyhuLCJ4IiwicmV2ZXJzZSIpO3JldHVybiBBKHQucmFuaz09PTMsKCk9PmBFcnJvciBpbiByZXZlcnNlM0Q6IHggbXVzdCBiZSByYW5rIDMgYnV0IGdvdCByYW5rICR7dC5yYW5rfS5gKSxQcyh0LGUpfWNvbnN0IHZJPUcoe3JldmVyc2UzZF86bzR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBpNChuLGUpe2NvbnN0IHQ9TyhuLCJ4IiwicmV2ZXJzZSIpO3JldHVybiBBKHQucmFuaz09PTQsKCk9PmBFcnJvciBpbiByZXZlcnNlNEQ6IHggbXVzdCBiZSByYW5rIDQgYnV0IGdvdCByYW5rICR7dC5yYW5rfS5gKSxQcyh0LGUpfWNvbnN0IFNJPUcoe3JldmVyc2U0ZF86aTR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBhNChuKXtjb25zdCB0PXt4Ok8obiwieCIsInJvdW5kIil9O3JldHVybiBqLnJ1bktlcm5lbChhdSx0KX1jb25zdCBOZz1HKHtyb3VuZF86YTR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBsNChuKXtjb25zdCB0PXt4Ok8obiwieCIsInJzcXJ0IiwiZmxvYXQzMiIpfTtyZXR1cm4gai5ydW5LZXJuZWwobHUsdCl9Y29uc3Qga2c9Ryh7cnNxcnRfOmw0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdTQobil7Y29uc3QgdD17eDpPKG4sIngiLCJzZWx1Iil9O3JldHVybiBqLnJ1bktlcm5lbCh1dSx0KX1jb25zdCBDZz1HKHtzZWx1Xzp1NH0pO2Z1bmN0aW9uIGM0KG4sZSx0LHMscixvPVsxLDFdLGk9Ik5IV0MiKXtjb25zdCBhPU8obiwieCIsInNlcGFyYWJsZUNvbnYyZCIpLGw9TyhlLCJkZXB0aHdpc2VGaWx0ZXIiLCJzZXBhcmFibGVDb252MmQiKSxjPU8odCwicG9pbnR3aXNlRmlsdGVyIiwic2VwYXJhYmxlQ29udjJkIik7bGV0IGg9YSxwPSExO2lmKGEucmFuaz09PTMmJihwPSEwLGg9SihhLFsxLGEuc2hhcGVbMF0sYS5zaGFwZVsxXSxhLnNoYXBlWzJdXSkpLGk9PT0iTkNIVyIpdGhyb3cgbmV3IEVycm9yKCJzZXBhcmFibGVDb252MmQgY3VycmVudGx5IGRvZXMgbm90IHN1cHBvcnQgZGF0YUZvcm1hdCBOQ0hXOyBvbmx5IE5IV0MgaXMgc3VwcG9ydGVkIik7QShoLnJhbms9PT00LCgpPT5gRXJyb3IgaW4gc2VwYXJhYmxlQ29udjJkOiBpbnB1dCBtdXN0IGJlIHJhbmsgNCwgYnV0IGdvdCByYW5rICR7aC5yYW5rfS5gKSxBKGwucmFuaz09PTQsKCk9PmBFcnJvciBpbiBzZXBhcmFibGVDb252MmQ6IGRlcHRod2lzZSBmaWx0ZXIgbXVzdCBiZSByYW5rIDQsIGJ1dCBnb3QgcmFuayAke2wucmFua30uYCksQShjLnJhbms9PT00LCgpPT5gRXJyb3IgaW4gc2VwYXJhYmxlQ29udjJkOiBwb2ludHdpc2UgZmlsdGVyIG11c3QgYmUgcmFuayA0LCBidXQgZ290IHJhbmsgJHtsLnJhbmt9LmApLEEoYy5zaGFwZVswXT09PTEsKCk9PmBFcnJvciBpbiBzZXBhcmFibGVDb252MmQ6IHRoZSBmaXJzdCBkaW1lbnNpb24gb2YgcG9pbnR3aXNlIGZpbHRlciAgbXVzdCBiZSAxLCBidXQgZ290ICR7Yy5zaGFwZVswXX0uYCksQShjLnNoYXBlWzFdPT09MSwoKT0+YEVycm9yIGluIHNlcGFyYWJsZUNvbnYyZDogdGhlIHNlY29uZCBkaW1lbnNpb24gb2YgcG9pbnR3aXNlIGZpbHRlciBtdXN0IGJlIDEsIGJ1dCBnb3QgJHtjLnNoYXBlWzFdfS5gKTtjb25zdCBmPWwuc2hhcGVbMl0sZz1sLnNoYXBlWzNdO0EoYy5zaGFwZVsyXT09PWYqZywoKT0+YEVycm9yIGluIHNlcGFyYWJsZUNvbnYyZDogdGhlIHRoaXJkIGRpbWVuc2lvbiBvZiBwb2ludHdpc2UgZmlsdGVyIG11c3QgYmUgJHtmKmd9LCBidXQgZ290ICR7Yy5zaGFwZVsyXX0uYCk7Y29uc3QgeT1OdShoLGwscyxyLGksbyksYj14byh5LGMsMSwidmFsaWQiLGkpO3JldHVybiBwP0ooYixbYi5zaGFwZVsxXSxiLnNoYXBlWzJdLGIuc2hhcGVbM11dKTpifWNvbnN0ICRnPUcoe3NlcGFyYWJsZUNvbnYyZF86YzR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9hc3luYyBmdW5jdGlvbiBkNChuLGUpe2NvbnN0IHQ9TyhuLCJ4Iiwic2V0ZGlmZjFkIikscz1PKGUsInkiLCJzZXRkaWZmMWQiKTtBKHQuZHR5cGU9PT1zLmR0eXBlLCgpPT5geCBhbmQgeSBzaG91bGQgaGF2ZSB0aGUgc2FtZSBkdHlwZSwgYnV0IGdvdCB4ICgke3QuZHR5cGV9KSBhbmQgeSAoJHtzLmR0eXBlfSkuYCksQSh0LnJhbms9PT0xLCgpPT5geCBzaG91bGQgYmUgMUQgdGVuc29yLCBidXQgZ290IHggKCR7dC5zaGFwZX0pLmApLEEocy5yYW5rPT09MSwoKT0+YHkgc2hvdWxkIGJlIDFEIHRlbnNvciwgYnV0IGdvdCB5ICgke3Muc2hhcGV9KS5gKTtjb25zdCByPWF3YWl0IHQuZGF0YSgpLG89YXdhaXQgcy5kYXRhKCksaT1uZXcgU2V0KG8pO2xldCBhPTA7Zm9yKGxldCBoPTA7aDxyLmxlbmd0aDtoKyspaS5oYXMocltoXSl8fGErKztjb25zdCBsPW5ldyBRdChbYV0sdC5kdHlwZSksYz1uZXcgUXQoW2FdLCJpbnQzMiIpO2ZvcihsZXQgaD0wLHA9MDtoPHIubGVuZ3RoO2grKylpLmhhcyhyW2hdKXx8KGwudmFsdWVzW3BdPXJbaF0sYy52YWx1ZXNbcF09aCxwKyspO3JldHVybltsLnRvVGVuc29yKCksYy50b1RlbnNvcigpXX1jb25zdCBOST1kNDsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBoNChuKXtjb25zdCB0PXt4Ok8obiwieCIsInNpZ24iKX07cmV0dXJuIGoucnVuS2VybmVsKGh1LHQpfWNvbnN0IEZiPUcoe3NpZ25fOmg0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcDQobil7Y29uc3QgdD17eDpPKG4sIngiLCJzaW4iLCJmbG9hdDMyIil9O3JldHVybiBqLnJ1bktlcm5lbChjdSx0KX1jb25zdCBJZz1HKHtzaW5fOnA0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZjQobil7Y29uc3QgdD17eDpPKG4sIngiLCJzaW5oIil9O3JldHVybiBqLnJ1bktlcm5lbChkdSx0KX1jb25zdCBUZz1HKHtzaW5oXzpmNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG00KG4sZSx0KXtjb25zdCBzPU8obiwieCIsInNsaWNlMWQiKTtyZXR1cm4gQShzLnJhbms9PT0xLCgpPT5gc2xpY2UxZCBleHBlY3RzIGEgcmFuay0xIHRlbnNvciwgYnV0IGdvdCBhIHJhbmstJHtzLnJhbmt9IHRlbnNvcmApLHN0KHMsW2VdLFt0XSl9Y29uc3QgeWg9Ryh7c2xpY2UxZF86bTR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBnNChuLGUsdCl7Y29uc3Qgcz1PKG4sIngiLCJzbGljZTJkIik7cmV0dXJuIEEocy5yYW5rPT09MiwoKT0+YHNsaWNlMmQgZXhwZWN0cyBhIHJhbmstMiB0ZW5zb3IsIGJ1dCBnb3QgYSByYW5rLSR7cy5yYW5rfSB0ZW5zb3JgKSxzdChzLGUsdCl9Y29uc3QgRWc9Ryh7c2xpY2UyZF86ZzR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB5NChuLGUsdCl7Y29uc3Qgcz1PKG4sIngiLCJzbGljZTNkIik7cmV0dXJuIEEocy5yYW5rPT09MywoKT0+YHNsaWNlM2QgZXhwZWN0cyBhIHJhbmstMyB0ZW5zb3IsIGJ1dCBnb3QgYSByYW5rLSR7cy5yYW5rfSB0ZW5zb3JgKSxzdChzLGUsdCl9Y29uc3QgeGg9Ryh7c2xpY2UzZF86eTR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB4NChuLGUsdCl7Y29uc3Qgcz1PKG4sIngiLCJzbGljZTRkIik7cmV0dXJuIEEocy5yYW5rPT09NCwoKT0+YHNsaWNlNGQgZXhwZWN0cyBhIHJhbmstNCB0ZW5zb3IsIGJ1dCBnb3QgYSByYW5rLSR7cy5yYW5rfSB0ZW5zb3JgKSxzdChzLGUsdCl9Y29uc3QgYmw9Ryh7c2xpY2U0ZF86eDR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBiNChuLGU9LTEpe2NvbnN0IHQ9TyhuLCJsb2dpdHMiLCJzb2Z0bWF4IiwiZmxvYXQzMiIpO2lmKGU9PT0tMSYmKGU9dC5yYW5rLTEpLGUhPT10LnJhbmstMSl0aHJvdyBFcnJvcihgU29mdG1heCBhbG9uZyBhIG5vbi1sYXN0IGRpbWVuc2lvbiBpcyBub3QgeWV0IHN1cHBvcnRlZC4gTG9naXRzIHdhcyByYW5rICR7dC5yYW5rfSBhbmQgZGltIHdhcyAke2V9YCk7Y29uc3Qgcz17bG9naXRzOnR9LHI9e2RpbTplfTtyZXR1cm4gai5ydW5LZXJuZWwoUWQscyxyKX1jb25zdCBiaD1HKHtzb2Z0bWF4XzpiNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHc0KG4pe0Eobi5kdHlwZT09PSJjb21wbGV4NjQiLCgpPT5gVGhlIGR0eXBlIGZvciB0Zi5zcGVjdHJhbC5mZnQoKSBtdXN0IGJlIGNvbXBsZXg2NCBidXQgZ290ICR7bi5kdHlwZX0uYCk7Y29uc3QgZT17aW5wdXQ6bn07cmV0dXJuIGoucnVuS2VybmVsKHZtLGUpfWNvbnN0IHdoPUcoe2ZmdF86dzR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB2NChuKXtBKG4uZHR5cGU9PT0iY29tcGxleDY0IiwoKT0+YFRoZSBkdHlwZSBmb3IgdGYuc3BlY3RyYWwuaWZmdCgpIG11c3QgYmUgY29tcGxleDY0IGJ1dCBnb3QgJHtuLmR0eXBlfS5gKTtjb25zdCBlPXtpbnB1dDpufTtyZXR1cm4gai5ydW5LZXJuZWwoQ20sZSl9Y29uc3Qgd2w9Ryh7aWZmdF86djR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBTNChuKXtjb25zdCBlPW4uc2hhcGVbbi5zaGFwZS5sZW5ndGgtMV0sdD1uLnNpemUvZTtsZXQgcztpZihlPD0yKXtjb25zdCByPUoobixbdCxlXSk7cz13bChyKX1lbHNle2NvbnN0IHI9W3QsMiooZS0xKV0sbz1KKHhsKG4pLFt0LGVdKSxpPUoobGgobiksW3QsZV0pLGE9UHMoc3QobyxbMCwxXSxbdCxlLTJdKSwxKSxsPVgoUHMoc3QoaSxbMCwxXSxbdCxlLTJdKSwxKSxNZSgtMSkpLGM9V3QoW28sYV0sMSksaD1XdChbaSxsXSwxKSxwPUooeW8oYyxoKSxbclswXSxyWzFdXSk7cz13bChwKX1pZihzPXhsKHMpLG4ucmFuaz09PTMmJm4uc2hhcGVbMF0hPT0wKXtjb25zdCByPXMsbz1uLnNoYXBlWzBdO3M9SihzLFtvLHMuc2hhcGVbMF0vbyxzLnNoYXBlWzFdXSksci5kaXNwb3NlKCl9cmV0dXJuIHN9Y29uc3QgUmc9Ryh7aXJmZnRfOlM0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gTjQobixlLHQ9MCl7Y29uc3Qgcj17eDpPKG4sIngiLCJzcGxpdCIpfSxvPXtudW1PclNpemVTcGxpdHM6ZSxheGlzOnR9O3JldHVybiBqLnJ1bktlcm5lbChZZCxyLG8pfWNvbnN0IGVzPUcoe3NwbGl0XzpONH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGs0KG4sZSl7QShuLmR0eXBlPT09ImZsb2F0MzIiLCgpPT5gVGhlIGR0eXBlIGZvciByZmZ0KCkgbXVzdCBiZSByZWFsIHZhbHVlIGJ1dCBnb3QgJHtuLmR0eXBlfWApO2xldCB0PW4uc2hhcGVbbi5zaGFwZS5sZW5ndGgtMV07Y29uc3Qgcz1uLnNpemUvdDtsZXQgcjtpZihlIT1udWxsJiZlPHQpe2NvbnN0IHk9bi5zaGFwZS5tYXAoYj0+MCksdz1uLnNoYXBlLm1hcChiPT5iKTt3W24uc2hhcGUubGVuZ3RoLTFdPWUscj1zdChuLHksdyksdD1lfWVsc2UgaWYoZSE9bnVsbCYmZT50KXtjb25zdCB5PW4uc2hhcGUubWFwKHc9PncpO3lbbi5zaGFwZS5sZW5ndGgtMV09ZS10LHI9V3QoW24sWXQoeSldLG4uc2hhcGUubGVuZ3RoLTEpLHQ9ZX1lbHNlIHI9bjtjb25zdCBvPXJ0KHIpLGk9Sih5byhyLG8pLFtzLHRdKSxhPXdoKGkpLGw9TWF0aC5mbG9vcih0LzIpKzEsYz14bChhKSxoPWxoKGEpLHA9ZXMoYyxbbCx0LWxdLGMuc2hhcGUubGVuZ3RoLTEpLGY9ZXMoaCxbbCx0LWxdLGguc2hhcGUubGVuZ3RoLTEpLGc9ci5zaGFwZS5zbGljZSgpO3JldHVybiBnW3Iuc2hhcGUubGVuZ3RoLTFdPWwsSih5byhwWzBdLGZbMF0pLGcpfWNvbnN0IHZoPUcoe3JmZnRfOms0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQzQobixlKXtsZXQgdD1PKG4sImEiLCJzcXVhcmVkRGlmZmVyZW5jZSIpLHM9TyhlLCJiIiwic3F1YXJlZERpZmZlcmVuY2UiKTtbdCxzXT1GdCh0LHMpLEhlKHQuc2hhcGUscy5zaGFwZSk7Y29uc3Qgcj17YTp0LGI6c30sbz17fTtyZXR1cm4gai5ydW5LZXJuZWwoZ3UscixvKX1jb25zdCBEZz1HKHtzcXVhcmVkRGlmZmVyZW5jZV86QzR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiAkNChuLGUpe2NvbnN0IHQ9TyhuLCJ4Iiwic3F1ZWV6ZSIsInN0cmluZ19vcl9udW1lcmljIik7cmV0dXJuIEoodCx2byh0LnNoYXBlLGUpLm5ld1NoYXBlKX1jb25zdCBTaT1HKHtzcXVlZXplXzokNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEk0KG4sZT0wKXtjb25zdCB0PUJjKG4sInRlbnNvcnMiLCJzdGFjayIsInN0cmluZ19vcl9udW1lcmljIik7QSh0Lmxlbmd0aD49MSwoKT0+IlBhc3MgYXQgbGVhc3Qgb25lIHRlbnNvciB0byB0Zi5zdGFjayIpLHQubGVuZ3RoPjAmJkEoZTw9dFswXS5yYW5rLCgpPT4iQXhpcyBtdXN0IGJlIDw9IHJhbmsgb2YgdGhlIHRlbnNvciIpO2NvbnN0IHM9dCxyPXtheGlzOmV9O3JldHVybiBqLnJ1bktlcm5lbCh6ZCxzLHIpfWNvbnN0IG9zPUcoe3N0YWNrXzpJNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFQ0KG4sZT0wKXtjb25zdCBzPXt4Ok8obiwieCIsInN0ZXAiKX0scj17YWxwaGE6ZX07cmV0dXJuIGoucnVuS2VybmVsKHZ1LHMscil9Y29uc3QgQ2E9Ryh7c3RlcF86VDR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBFNChuLGUsdCxzLHI9MCxvPTAsaT0wLGE9MCxsPTApe2NvbnN0IGg9e3g6TyhuLCJ4Iiwic3RyaWRlZFNsaWNlIiwic3RyaW5nX29yX251bWVyaWMiKX0scD17YmVnaW46ZSxlbmQ6dCxzdHJpZGVzOnMsYmVnaW5NYXNrOnIsZW5kTWFzazpvLGVsbGlwc2lzTWFzazppLG5ld0F4aXNNYXNrOmEsc2hyaW5rQXhpc01hc2s6bH07cmV0dXJuIGoucnVuS2VybmVsKFptLGgscCl9Y29uc3QgTGI9Ryh7c3RyaWRlZFNsaWNlXzpFNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFI0KG4pe2NvbnN0IHQ9e3g6TyhuLCJ4IiwidGFuIiwiZmxvYXQzMiIpfTtyZXR1cm4gai5ydW5LZXJuZWwoeHUsdCl9Y29uc3QgUGI9Ryh7dGFuXzpSNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIF9uKG4sZSl7YmEobik7Y29uc3QgdD1IcihuLGUpO2lmKHQubGVuZ3RoIT09MSl0aHJvdyBuZXcgRXJyb3IoInRlbnNvcjFkKCkgcmVxdWlyZXMgdmFsdWVzIHRvIGJlIGEgZmxhdC9UeXBlZEFycmF5Iik7cmV0dXJuIHlpKG4sbnVsbCx0LGUpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGNsKG4sZSx0KXtpZihiYShuKSxlIT1udWxsJiZlLmxlbmd0aCE9PTIpdGhyb3cgbmV3IEVycm9yKCJ0ZW5zb3IyZCgpIHJlcXVpcmVzIHNoYXBlIHRvIGhhdmUgdHdvIG51bWJlcnMiKTtjb25zdCBzPUhyKG4sdCk7aWYocy5sZW5ndGghPT0yJiZzLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKCJ0ZW5zb3IyZCgpIHJlcXVpcmVzIHZhbHVlcyB0byBiZSBudW1iZXJbXVtdIG9yIGZsYXQvVHlwZWRBcnJheSIpO2lmKHMubGVuZ3RoPT09MSYmZT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoInRlbnNvcjJkKCkgcmVxdWlyZXMgc2hhcGUgdG8gYmUgcHJvdmlkZWQgd2hlbiBgdmFsdWVzYCBhcmUgYSBmbGF0L1R5cGVkQXJyYXkiKTtyZXR1cm4geWkobixlLHMsdCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gemIobixlLHQpe2lmKGJhKG4pLGUhPW51bGwmJmUubGVuZ3RoIT09Myl0aHJvdyBuZXcgRXJyb3IoInRlbnNvcjNkKCkgcmVxdWlyZXMgc2hhcGUgdG8gaGF2ZSB0aHJlZSBudW1iZXJzIik7Y29uc3Qgcz1IcihuLHQpO2lmKHMubGVuZ3RoIT09MyYmcy5sZW5ndGghPT0xKXRocm93IG5ldyBFcnJvcigidGVuc29yM2QoKSByZXF1aXJlcyB2YWx1ZXMgdG8gYmUgbnVtYmVyW11bXVtdIG9yIGZsYXQvVHlwZWRBcnJheSIpO2lmKHMubGVuZ3RoPT09MSYmZT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoInRlbnNvcjNkKCkgcmVxdWlyZXMgc2hhcGUgdG8gYmUgcHJvdmlkZWQgd2hlbiBgdmFsdWVzYCBhcmUgYSBmbGF0IGFycmF5Iik7cmV0dXJuIHlpKG4sZSxzLHQpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGtJKG4sZSx0KXtpZihiYShuKSxlIT1udWxsJiZlLmxlbmd0aCE9PTQpdGhyb3cgbmV3IEVycm9yKCJ0ZW5zb3I0ZCgpIHJlcXVpcmVzIHNoYXBlIHRvIGhhdmUgZm91ciBudW1iZXJzIik7Y29uc3Qgcz1IcihuLHQpO2lmKHMubGVuZ3RoIT09NCYmcy5sZW5ndGghPT0xKXRocm93IG5ldyBFcnJvcigidGVuc29yNGQoKSByZXF1aXJlcyB2YWx1ZXMgdG8gYmUgbnVtYmVyW11bXVtdW10gb3IgZmxhdC9UeXBlZEFycmF5Iik7aWYocy5sZW5ndGg9PT0xJiZlPT1udWxsKXRocm93IG5ldyBFcnJvcigidGVuc29yNGQoKSByZXF1aXJlcyBzaGFwZSB0byBiZSBwcm92aWRlZCB3aGVuIGB2YWx1ZXNgIGFyZSBhIGZsYXQgYXJyYXkiKTtyZXR1cm4geWkobixlLHMsdCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQ0kobixlLHQpe2lmKGJhKG4pLGUhPW51bGwmJmUubGVuZ3RoIT09NSl0aHJvdyBuZXcgRXJyb3IoInRlbnNvcjVkKCkgcmVxdWlyZXMgc2hhcGUgdG8gaGF2ZSBmaXZlIG51bWJlcnMiKTtjb25zdCBzPUhyKG4sdCk7aWYocy5sZW5ndGghPT01JiZzLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKCJ0ZW5zb3I1ZCgpIHJlcXVpcmVzIHZhbHVlcyB0byBiZSBudW1iZXJbXVtdW11bXVtdIG9yIGZsYXQvVHlwZWRBcnJheSIpO2lmKHMubGVuZ3RoPT09MSYmZT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoInRlbnNvcjVkKCkgcmVxdWlyZXMgc2hhcGUgdG8gYmUgcHJvdmlkZWQgd2hlbiBgdmFsdWVzYCBhcmUgYSBmbGF0IGFycmF5Iik7cmV0dXJuIHlpKG4sZSxzLHQpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uICRJKG4sZSx0KXtpZihiYShuKSxlIT1udWxsJiZlLmxlbmd0aCE9PTYpdGhyb3cgbmV3IEVycm9yKCJ0ZW5zb3I2ZCgpIHJlcXVpcmVzIHNoYXBlIHRvIGhhdmUgc2l4IG51bWJlcnMiKTtjb25zdCBzPUhyKG4sdCk7aWYocy5sZW5ndGghPT02JiZzLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKCJ0ZW5zb3I2ZCgpIHJlcXVpcmVzIHZhbHVlcyB0byBiZSBudW1iZXJbXVtdW11bXVtdW10gb3IgZmxhdC9UeXBlZEFycmF5Iik7aWYocy5sZW5ndGg9PT0xJiZlPT1udWxsKXRocm93IG5ldyBFcnJvcigidGVuc29yNmQoKSByZXF1aXJlcyBzaGFwZSB0byBiZSBwcm92aWRlZCB3aGVuIGB2YWx1ZXNgIGFyZSBhIGZsYXQgYXJyYXkiKTtyZXR1cm4gZT1lfHxzLHlpKG4sZSxzLHQpfWZ1bmN0aW9uIE1iKG4sZSx0KXtjb25zdCBzPWUucmFuaz4xP2Uuc2hhcGVbZS5yYW5rLTFdOjEscj1lLnJhbms+MT9lLnJhbmstMToxLG89YE11c3QgaGF2ZSB1cGRhdGVzLnNoYXBlID0gaW5kaWNlcy5zaGFwZVs6YmF0Y2hEaW1dICsgc2hhcGVbc2xpY2VEaW06XSwgZ290IHVwZGF0ZXMuc2hhcGU6ICR7dC5zaGFwZX0sIGluZGljZXMuc2hhcGU6ICR7ZS5zaGFwZX0sIHNoYXBlOiAke259LCBzbGljZURpbTogJHtzfSwgYW5kIGJhdGNoRGltOiAke3J9LmA7aWYodC5yYW5rPHIpdGhyb3cgbmV3IEVycm9yKG8rYCB1cGRhdGUucmFuayA8ICR7cn0uIGApO2lmKG4ubGVuZ3RoPHMrKHQucmFuay1yKSl0aHJvdyBuZXcgRXJyb3IobytgIE91dHB1dCBzaGFwZSBsZW5ndGggPCAke3MrKHQucmFuay1yKX1gKTtpZih0LnJhbmshPT1yK24ubGVuZ3RoLXMpdGhyb3cgbmV3IEVycm9yKG8rYCB1cGRhdGUucmFuayAhPSAke3Irbi5sZW5ndGgtc31gKTtmb3IobGV0IGk9MDtpPHI7KytpKWlmKHQuc2hhcGVbaV0hPT1lLnNoYXBlW2ldKXRocm93IG5ldyBFcnJvcihvK2AgdXBkYXRlcy5zaGFwZVske2l9XSAoJHt0LnNoYXBlW2ldfSkgIT0gaW5kaWNlcy5zaGFwZVske2l9XSAoJHtlLnNoYXBlW2ldfSkuYCk7Zm9yKGxldCBpPTA7aTx0LnJhbmstcjsrK2kpaWYodC5zaGFwZVtpK3JdIT09bltpK3NdKXRocm93IG5ldyBFcnJvcihvK2AgdXBkYXRlcy5zaGFwZVske2krcn1dICgke3Quc2hhcGVbaStyXX0pICE9IHNoYXBlWyR7aStyfV0gKCR7bltpK3JdfSlgKX1mdW5jdGlvbiBBZyhuLGUsdCl7aWYoZS5yYW5rPDEpdGhyb3cgbmV3IEVycm9yKGB0Zi5zY2F0dGVyTkQoKSBleHBlY3RzIHRoZSBpbmRpY2VzIHRvIGJlIHJhbmsgMSBvciBoaWdoZXIsIGJ1dCB0aGUgcmFuayB3YXMgJHtlLnJhbmt9LmApO2lmKG4ucmFuazwxKXRocm93IG5ldyBFcnJvcihgdGYuc2NhdHRlck5EKCkgZXhwZWN0cyB0aGUgdXBkYXRlcyB0byBiZSByYW5rIDEgb3IgaGlnaGVyLCBidXQgdGhlIHJhbmsgd2FzICR7bi5yYW5rfS5gKTtpZihlLmR0eXBlIT09ImludDMyIil0aHJvdyBuZXcgRXJyb3IoYFRoZSBkdHlwZSBvZiAnaW5kaWNlcycgc2hvdWxkIGJlIGludDMyLCBidXQgZ290IGR0eXBlOiAke2UuZHR5cGV9YCk7aWYodC5sZW5ndGg8MSl0aHJvdyBuZXcgRXJyb3IoYE91dHB1dCByYW5rIG11c3QgYmUgZ3JlYXRlciBvciBlcXVhbCB0byAxLCBidXQgZ290IHNoYXBlOiAke3R9YCk7aWYodC5sZW5ndGg9PT0wKXtpZihlLnNpemU9PT0wKXRocm93IG5ldyBFcnJvcihgSW5kaWNlcyBzcGVjaWZpZWQgZm9yIGVtcHR5IG91dHB1dC4gaW5kaWNlcyBzaGFwZTogJHtlLnNoYXBlfWApO2lmKG4uc2l6ZT09PTApdGhyb3cgbmV3IEVycm9yKGBVcGRhdGVzIHNwZWNpZmllZCBmb3IgZW1wdHkgb3V0cHV0LiB1cGRhdGVzIHNoYXBlOiAke24uc2hhcGV9YCl9TWIodCxlLG4pfWZ1bmN0aW9uIE5pKG4sZSx0KXtjb25zdCBzPWUuc2hhcGUubGVuZ3RoLHI9cz4xP2Uuc2hhcGVbcy0xXToxLG89dC5sZW5ndGg7bGV0IGk9MTtmb3IobGV0IHA9cjtwPG87KytwKWkqPXRbcF07Y29uc3QgYT1yPDE/MTpyLGw9Y2UoZS5zaGFwZSkvYSxjPVsuLi56ZSh0LnNsaWNlKDAscikpLDFdLGg9Y2UodCk7cmV0dXJue3NsaWNlUmFuazpyLG51bVVwZGF0ZXM6bCxzbGljZVNpemU6aSxzdHJpZGVzOmMsb3V0cHV0U2l6ZTpofX1jb25zdCBEND1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsY2FsY3VsYXRlU2hhcGVzOk5pLHZhbGlkYXRlSW5wdXQ6QWcsdmFsaWRhdGVVcGRhdGVTaGFwZTpNYn0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBBNChuLGUsdCl7Y29uc3Qgcz1PKG4sInRlbnNvciIsInRlbnNvclNjYXR0ZXJ1cGRhdGUiKSxyPU8oZSwiaW5kaWNlcyIsInRlbnNvclNjYXR0ZXJ1cGRhdGUiLCJpbnQzMiIpLG89Tyh0LCJ1cGRhdGVzIiwidGVuc29yU2NhdHRlcnVwZGF0ZSIpO2lmKEFnKG8scixzLnNoYXBlKSxzLmR0eXBlIT09by5kdHlwZSl0aHJvdyBuZXcgRXJyb3IoYHRlbnNvciBhbmQgdXBkYXRlcyBtdXN0IGhhdmUgdGhlIHNhbWUgZHR5cGUsIGluc3RlYWQgdGhleSBhcmUgJHtzLmR0eXBlfSBhbmQgJHtvLmR0eXBlfS5gKTtjb25zdCBpPXt0ZW5zb3I6cyxpbmRpY2VzOnIsdXBkYXRlczpvfSxhPXt9O3JldHVybiBqLnJ1bktlcm5lbChqbSxpLGEpfWNvbnN0IElJPUcoe3RlbnNvclNjYXR0ZXJVcGRhdGVfOkE0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gXzQobixlPTEsdD0hMCl7Y29uc3Qgcz1PKG4sIngiLCJ0b3BrIik7aWYocy5yYW5rPT09MCl0aHJvdyBuZXcgRXJyb3IoInRvcGsoKSBleHBlY3RzIHRoZSBpbnB1dCB0byBiZSBvZiByYW5rIDEgb3IgaGlnaGVyIik7Y29uc3Qgcj1zLnNoYXBlW3Muc2hhcGUubGVuZ3RoLTFdO2lmKGU8MCl0aHJvdyBuZXcgRXJyb3IoYCdrJyBwYXNzZWQgdG8gdG9waygpIG11c3QgYmUgPj0gMCBidXQgZ290ICR7ZX1gKTtpZihlPnIpdGhyb3cgbmV3IEVycm9yKGAnaycgcGFzc2VkIHRvIHRvcGsoKSBtdXN0IGJlIDw9IHRoZSBsYXN0IGRpbWVuc2lvbiAoJHtyfSkgYnV0IGdvdCAke2V9YCk7Y29uc3Qgbz17eDpzfSxpPXtrOmUsc29ydGVkOnR9LFthLGxdPWoucnVuS2VybmVsKG5nLG8saSk7cmV0dXJue3ZhbHVlczphLGluZGljZXM6bH19Y29uc3QgQmI9Ryh7dG9wa186XzR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBPNChuLGU9MCx0PTEscyxyKXtpZihrcyhuKSxzIT1udWxsJiZzPT09ImJvb2wiKXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgZGF0YSB0eXBlICQgeyBkdHlwZSB9Iik7Y29uc3Qgbz1uZXcgX2IoZSx0LHMsITAsciksaT1xZShuLHMpO2ZvcihsZXQgYT0wO2E8aS52YWx1ZXMubGVuZ3RoO2ErKylpLnZhbHVlc1thXT1vLm5leHRWYWx1ZSgpO3JldHVybiBpLnRvVGVuc29yKCl9Y29uc3QgX2c9Ryh7dHJ1bmNhdGVkTm9ybWFsXzpPNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEY0KG4sZT0wKXtjb25zdCB0PU8obiwieCIsInVuaXF1ZSIsInN0cmluZ19vcl9udW1lcmljIik7QSh0LnJhbms+MCwoKT0+IlRoZSBpbnB1dCB0ZW5zb3IgbXVzdCBiZSBhdCBsZWFzdCAxRCIpO2NvbnN0IHM9e3g6dH0scj17YXhpczplfSxbbyxpXT1qLnJ1bktlcm5lbChyZyxzLHIpO3JldHVybnt2YWx1ZXM6byxpbmRpY2VzOml9fWNvbnN0IFZiPUcoe3VuaXF1ZV86RjR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBMNChuLGUsdCl7Y29uc3Qgcz1PKG4sIngiLCJ1bnNvcnRlZFNlZ21lbnRTdW0iKSxyPU8oZSwic2VnbWVudElkcyIsInVuc29ydGVkU2VnbWVudFN1bSIsImludDMyIik7QShyYSh0KSwoKT0+Im51bVNlZ21lbnRzIG11c3QgYmUgb2YgZHR5cGUgaW50Iik7Y29uc3Qgbz17eDpzLHNlZ21lbnRJZHM6cn0saT17bnVtU2VnbWVudHM6dH07cmV0dXJuIGoucnVuS2VybmVsKGVoLG8saSl9Y29uc3QgT2c9Ryh7dW5zb3J0ZWRTZWdtZW50U3VtXzpMNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFA0KG4sZT0wKXtjb25zdCB0PU8obiwieCIsInVuc3RhY2siLCJzdHJpbmdfb3JfbnVtZXJpYyIpO0EoZT49LXQuc2hhcGUubGVuZ3RoJiZlPHQuc2hhcGUubGVuZ3RoLCgpPT5gQXhpcyA9ICR7ZX0gaXMgbm90IGluIFstJHt0LnNoYXBlLmxlbmd0aH0sICR7dC5zaGFwZS5sZW5ndGh9KWApO2NvbnN0IHM9e3ZhbHVlOnR9LHI9e2F4aXM6ZX07cmV0dXJuIGoucnVuS2VybmVsKEpkLHMscil9Y29uc3QgenM9Ryh7dW5zdGFja186UDR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBUSShuLGUpe3JldHVybiBiZyhuLGUsInJpZ2h0Iil9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gV2IobixlPSEwLHQscyl7cmV0dXJuIGoubWFrZVZhcmlhYmxlKG4sZSx0LHMpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEZnKG4sZSl7Y29uc3QgdD1bXTtmb3IobGV0IG89MDtvPGUubGVuZ3RoO28rKyllW29dJiZ0LnB1c2gobyk7Y29uc3Qgcz1xZShuLCJpbnQzMiIpLHI9cWUoW3QubGVuZ3RoLG4ubGVuZ3RoXSwiaW50MzIiKTtmb3IobGV0IG89MDtvPHQubGVuZ3RoO28rKyl7Y29uc3QgaT1zLmluZGV4VG9Mb2ModFtvXSksYT1vKm4ubGVuZ3RoO3IudmFsdWVzLnNldChpLGEpfXJldHVybiByLnRvVGVuc29yKCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovYXN5bmMgZnVuY3Rpb24gejQobil7Y29uc3QgZT1PKG4sImNvbmRpdGlvbiIsIndoZXJlQXN5bmMiLCJib29sIiksdD1hd2FpdCBlLmRhdGEoKSxzPUZnKGUuc2hhcGUsdCk7cmV0dXJuIG4hPT1lJiZlLmRpc3Bvc2UoKSxzfWNvbnN0IFViPXo0Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2FzeW5jIGZ1bmN0aW9uIE00KG4sZSx0KXtjb25zdCBzPU8obiwidGVuc29yIiwiYm9vbE1hc2siKSxyPU8oZSwibWFzayIsImJvb2xNYXNrIiwiYm9vbCIpLG89dD8/MCxpPXIucmFuayxhPXMuc2hhcGU7QShpPjAsKCk9PiJtYXNrIGNhbm5vdCBiZSBzY2FsYXIiKSxObihhLnNsaWNlKG8sbytpKSxyLnNoYXBlLCJtYXNrJ3Mgc2hhcGUgbXVzdCBtYXRjaCB0aGUgZmlyc3QgSyBkaW1lbnNpb25zIG9mIHRlbnNvcidzIHNoYXBlLCIpO2xldCBsPTE7Zm9yKGxldCB3PW87dzxvK2k7dysrKWwqPWFbd107Y29uc3QgYz1hLnNsaWNlKDAsbykuY29uY2F0KFtsXSxhLnNsaWNlKG8raSkpLGg9SihzLGMpLHA9SihyLFstMV0pLGY9YXdhaXQgVWIocCksZz1TaShmLFsxXSkseT1JdShoLGcsbyk7cmV0dXJuIG4hPT1zJiZzLmRpc3Bvc2UoKSxlIT09ciYmci5kaXNwb3NlKCksZy5kaXNwb3NlKCksaC5kaXNwb3NlKCkscC5kaXNwb3NlKCksZi5kaXNwb3NlKCkseX1jb25zdCBFST1NNDsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBCNChuLGUsdCl7Y29uc3Qgcz1PKG4sIngiLCJ0cmFuc3Bvc2UiKTtpZihlPT1udWxsJiYoZT1zLnNoYXBlLm1hcCgoaSxhKT0+YSkucmV2ZXJzZSgpKSxBKHMucmFuaz09PWUubGVuZ3RoLCgpPT5gRXJyb3IgaW4gdHJhbnNwb3NlOiByYW5rIG9mIGlucHV0ICR7cy5yYW5rfSBtdXN0IG1hdGNoIGxlbmd0aCBvZiBwZXJtICR7ZX0uYCksZS5mb3JFYWNoKGk9PntBKGk+PTAmJmk8cy5yYW5rLCgpPT5gQWxsIGVudHJpZXMgaW4gJ3Blcm0nIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAke3MucmFuay0xfSBidXQgZ290ICR7ZX1gKX0pLHMucmFuazw9MSlyZXR1cm4gcy5jbG9uZSgpO2NvbnN0IHI9e3g6c30sbz17cGVybTplfTtyZXR1cm4gcy5kdHlwZT09PSJjb21wbGV4NjQiP3JlKCgpPT57bGV0IGk9eGwocyksYT1saChzKTtyZXR1cm4gaT1qLnJ1bktlcm5lbChlYSx7eDppfSxvKSxhPWoucnVuS2VybmVsKGVhLHt4OmF9LG8pLHQmJihhPU50KGEpKSx5byhpLGEpfSk6ai5ydW5LZXJuZWwoZWEscixvKX1jb25zdCB0dD1HKHt0cmFuc3Bvc2VfOkI0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gVjQobixlLHQscyxyPSEwKXtjb25zdCBvPU8obiwidiIsIm1vdmluZ0F2ZXJhZ2UiKSxpPU8oZSwieCIsIm1vdmluZ0F2ZXJhZ2UiKSxhPU8odCwiZGVjYXkiLCJtb3ZpbmdBdmVyYWdlIik7QyQobyxpKSxBKEplKG8uc2hhcGUsaS5zaGFwZSksKCk9PiJTaGFwZSBtaXNtYXRjaCBpbiB2IGFuZCB4Iik7Y29uc3QgbD1NZSgxKSxjPUllKGwsYSk7bGV0IGg9WChJZShpLG8pLGMpO2lmKHIpe0EocyE9bnVsbCwoKT0+IldoZW4gdXNpbmcgemVyb0RlYmlhczogdHJ1ZSwgc3RlcCBpcyByZXF1aXJlZC4iKTtjb25zdCBwPU8ocywic3RlcCIsIm1vdmluZ0F2ZXJhZ2UiKTtoPU9lKGgsSWUobCxxcihhLHApKSl9cmV0dXJuIG1lKG8saCl9Y29uc3QgUkk9Ryh7bW92aW5nQXZlcmFnZV86VjR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBXNChuLGUsdCl7a3ModCk7Y29uc3Qgcz1PKG4sImluZGljZXMiLCJzY2F0dGVyTkQiLCJpbnQzMiIpLHI9TyhlLCJ1cGRhdGVzIiwic2NhdHRlck5EIik7QWcocixzLHQpO2NvbnN0IG89e2luZGljZXM6cyx1cGRhdGVzOnJ9LGk9e3NoYXBlOnR9O3JldHVybiBqLnJ1bktlcm5lbChVbSxvLGkpfWNvbnN0IERJPUcoe3NjYXR0ZXJORF86VzR9KTtmdW5jdGlvbiBVNChuLGUsdCxzKXtpZihuLmR0eXBlIT09ImludDMyIil0aHJvdyBuZXcgRXJyb3IoYHRmLnNwYXJzZVRvRGVuc2UoKSBleHBlY3RzIHRoZSBpbmRpY2VzIHRvIGJlIGludDMyIHR5cGUsIGJ1dCB0aGUgZHR5cGUgd2FzICR7bi5kdHlwZX0uYCk7aWYobi5yYW5rPjIpdGhyb3cgbmV3IEVycm9yKGBzcGFyc2VJbmRpY2VzIHNob3VsZCBiZSBhIHNjYWxhciwgdmVjdG9yLCBvciBtYXRyaXgsIGJ1dCBnb3Qgc2hhcGUgJHtuLnNoYXBlfS5gKTtjb25zdCByPW4ucmFuaz4wP24uc2hhcGVbMF06MSxvPW4ucmFuaz4xP24uc2hhcGVbMV06MTtpZih0Lmxlbmd0aCE9PW8pdGhyb3cgbmV3IEVycm9yKGBvdXRwdXRTaGFwZSBoYXMgaW5jb3JyZWN0IG51bWJlciBvZiBlbGVtZW50czosICR7dC5sZW5ndGh9LCBzaG91bGQgYmU6ICR7b30uYCk7Y29uc3QgaT1lLnNpemU7aWYoIShlLnJhbms9PT0wfHxlLnJhbms9PT0xJiZpPT09cikpdGhyb3cgbmV3IEVycm9yKGBzcGFyc2VWYWx1ZXMgaGFzIGluY29ycmVjdCBzaGFwZSAke2Uuc2hhcGV9LCBzaG91bGQgYmUgW10gb3IgWyR7cn1dYCk7aWYoZS5kdHlwZSE9PXMuZHR5cGUpdGhyb3cgbmV3IEVycm9yKCJzcGFyc2VWYWx1ZXMuZHR5cGUgbXVzdCBtYXRjaCBkZWZhdWx0VmFsdWVzLmR0eXBlIil9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gajQobixlLHQscz0wKXtrcyh0KTtjb25zdCByPU8obiwic3BhcnNlSW5kaWNlcyIsInNwYXJzZVRvRGVuc2UiLCJpbnQzMiIpLG89TyhlLCJzcGFyc2VWYWx1ZXMiLCJzcGFyc2VUb0RlbnNlIiwic3RyaW5nX29yX251bWVyaWMiKSxpPU8ocywiZGVmYXVsdFZhbHVlIiwic3BhcnNlVG9EZW5zZSIsby5kdHlwZSk7VTQocixvLHQsaSk7Y29uc3QgYT17c3BhcnNlSW5kaWNlczpyLHNwYXJzZVZhbHVlczpvLGRlZmF1bHRWYWx1ZTppfSxsPXtvdXRwdXRTaGFwZTp0fTtyZXR1cm4gai5ydW5LZXJuZWwoWW0sYSxsKX1jb25zdCBBST1HKHtzcGFyc2VUb0RlbnNlXzpqNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEc0KG4sZSl7Y29uc3QgdD1PKGUsImluZGljZXMiLCJnYXRoZXJORCIsImludDMyIikscj17cGFyYW1zOk8obiwieCIsImdhdGhlck5EIiwic3RyaW5nX29yX251bWVyaWMiKSxpbmRpY2VzOnR9O3JldHVybiBqLnJ1bktlcm5lbChrbSxyKX1jb25zdCBfST1HKHtnYXRoZXJORF86RzR9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBINChuLGUpe2lmKGU9PW51bGwpcmV0dXJuIG4uc2hhcGUuc2xpY2UoKTtpZihKZShuLnNoYXBlLGUpKXJldHVybiBlO2lmKG4uc2hhcGUubGVuZ3RoPT09ZS5sZW5ndGgpe2NvbnN0IHQ9W107Zm9yKGxldCBzPTA7czxuLnNoYXBlLmxlbmd0aDtzKyspZVtzXT09bnVsbCYmbi5zaGFwZVtzXSE9bnVsbD90LnB1c2gobi5zaGFwZVtzXSk6dC5wdXNoKGVbc10pO3JldHVybiB0fXJldHVybiBlfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHE0KG4sZSx0LHMpe2NvbnN0IHI9TyhuLCJ4IiwiZHJvcG91dCIpO2lmKEEoci5kdHlwZT09PSJmbG9hdDMyIiwoKT0+YHggaGFzIHRvIGJlIGEgZmxvYXRpbmcgcG9pbnQgdGVuc29yIHNpbmNlIGl0J3MgZ29pbmcgdG8gYmUgc2NhbGVkLCBidXQgZ290IGEgJHtyLmR0eXBlfSB0ZW5zb3IgaW5zdGVhZC5gKSxBKGU+PTAmJmU8MSwoKT0+YHJhdGUgbXVzdCBiZSBhIGZsb2F0IGluIHRoZSByYW5nZSBbMCwgMSksIGJ1dCBnb3QgJHtlfS5gKSxlPT09MClyZXR1cm4gbiBpbnN0YW5jZW9mIGR0P3IuY2xvbmUoKTpyO2NvbnN0IG89SDQocix0KSxpPTEtZSxhPU9lKCR1KG1lKHZpKG8sMCwxLCJmbG9hdDMyIixzKSxpKSksaSk7cmV0dXJuIFgocixhKX1jb25zdCBqYj1HKHtkcm9wb3V0XzpxNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEdiKG4pe3JldHVybiBNYXRoLmZsb29yKE1hdGgucG93KDIsTWF0aC5jZWlsKE1hdGgubG9nKG4pL01hdGgubG9nKDIpKSkpfWZ1bmN0aW9uIExnKG4sZSx0KXtjb25zdCBzPTEtbiUyLHI9bmV3IEZsb2F0MzJBcnJheShuKTtmb3IobGV0IG89MDtvPG47KytvKXtjb25zdCBpPTIqTWF0aC5QSSpvLyhuK3MtMSk7cltvXT1lLXQqTWF0aC5jb3MoaSl9cmV0dXJuIF9uKHIsImZsb2F0MzIiKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9hc3luYyBmdW5jdGlvbiBLNChuLGUsdD0xKXtjb25zdCBzPU8obiwicHJlZGljdGlvbnMiLCJpblRvcEsiKSxyPU8oZSwidGFyZ2V0cyIsImluVG9wSyIpO0Eocy5yYW5rPjEsKCk9PmBpblRvcEsoKSBleHBlY3RzIHRoZSBwcmVkaWN0aW9ucyB0byBiZSBvZiByYW5rIDIgb3IgaGlnaGVyLCBidXQgZ290ICR7cy5yYW5rfWApLEEocy5yYW5rLTE9PT1yLnJhbmssKCk9PmBwcmVkaWN0aW9ucyByYW5rIHNob3VsZCBiZSAxIGxhcmdlciB0aGFuIHRhcmdldHMgcmFuaywgYnV0IGdvdCBwcmVkaWN0aW9ucyByYW5rICR7cy5yYW5rfSBhbmQgdGFyZ2V0cyByYW5rICR7ci5yYW5rfWApLE5uKHMuc2hhcGUuc2xpY2UoMCxzLnNoYXBlLmxlbmd0aC0xKSxyLnNoYXBlLCJwcmVkaWN0aW9ucydzIHNoYXBlIHNob3VsZCBiZSBhbGlnbiB3aXRoIHRoZSB0YXJnZXRzJyBzaGFwZSwgZXhjZXB0IHRoZSBsYXN0IGRpbWVuc2lvbi4iKTtjb25zdCBvPXMuc2hhcGVbcy5zaGFwZS5sZW5ndGgtMV07QSh0PjAmJnQ8PW8sKCk9PmAnaycgcGFzc2VkIHRvIGluVG9wSygpIG11c3QgYmUgPiAwICYmIDw9IHRoZSBwcmVkaWN0aW9ucyBsYXN0IGRpbWVuc2lvbiAoJHtvfSksIGJ1dCBnb3QgJHt0fWApO2NvbnN0IGk9YXdhaXQgcy5kYXRhKCksYT1hd2FpdCByLmRhdGEoKSxbbCxjXT1baS5sZW5ndGgvbyxvXSxoPWhuKCJib29sIixsKTtmb3IobGV0IHA9MDtwPGw7cCsrKXtjb25zdCBmPXAqYyxnPWkuc3ViYXJyYXkoZixmK2MpLHk9W107Zm9yKGxldCB3PTA7dzxnLmxlbmd0aDt3KyspeS5wdXNoKHt2YWx1ZTpnW3ddLGluZGV4Ond9KTt5LnNvcnQoKHcsYik9PmIudmFsdWUtdy52YWx1ZSksaFtwXT0wO2ZvcihsZXQgdz0wO3c8dDt3KyspaWYoeVt3XS5pbmRleD09PWFbcF0pe2hbcF09MTticmVha319cmV0dXJuIG4hPT1zJiZzLmRpc3Bvc2UoKSxlIT09ciYmci5kaXNwb3NlKCksZXIoaCxyLnNoYXBlLCJib29sIil9Y29uc3QgT0k9SzQ7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWDQobixlLHQscyxyLG89Ik5IV0MiLGkpe2xldCBhPW47bi5yYW5rPT09MyYmKGE9SihuLFsxLG4uc2hhcGVbMF0sbi5zaGFwZVsxXSxuLnNoYXBlWzJdXSkpO2xldCBsPWU7bC5yYW5rPT09MyYmKGw9SihlLFsxLGUuc2hhcGVbMF0sZS5zaGFwZVsxXSxlLnNoYXBlWzJdXSkpLEEoYS5yYW5rPT09NCwoKT0+YEVycm9yIGluIGNvbnYyZERlckZpbHRlcjogaW5wdXQgbXVzdCBiZSByYW5rIDQsIGJ1dCBnb3Qgc2hhcGUgJHthLnNoYXBlfS5gKSxBKGwucmFuaz09PTQsKCk9PmBFcnJvciBpbiBjb252MmREZXJGaWx0ZXI6IGR5IG11c3QgYmUgcmFuayA0LCBidXQgZ290IHNoYXBlICR7bC5zaGFwZX0uYCksQSh0Lmxlbmd0aD09PTQsKCk9PmBFcnJvciBpbiBjb252MmREZXJGaWx0ZXI6IGZpbHRlclNoYXBlIG11c3QgYmUgbGVuZ3RoIDQsIGJ1dCBnb3QgJHt0fS5gKTtjb25zdCBjPW89PT0iTkhXQyI/YS5zaGFwZVszXTphLnNoYXBlWzFdLGg9bz09PSJOSFdDIj9sLnNoYXBlWzNdOmwuc2hhcGVbMV07QShjPT09dFsyXSwoKT0+YEVycm9yIGluIGNvbnYyZERlckZpbHRlcjogZGVwdGggb2YgaW5wdXQgJHtjfSkgbXVzdCBtYXRjaCBpbnB1dCBkZXB0aCBpbiBmaWx0ZXIgKCR7dFsyXX0uYCksQShoPT09dFszXSwoKT0+YEVycm9yIGluIGNvbnYyZERlckZpbHRlcjogZGVwdGggb2YgZHkgKCR7aH0pIG11c3QgbWF0Y2ggb3V0cHV0IGRlcHRoIGZvciBmaWx0ZXIgKCR7dFszXX0pLmApLHFuKCJjb252MmREZXJGaWx0ZXIiLHIsaSk7Y29uc3QgcD17eDphLGR5Omx9LGY9e3N0cmlkZXM6cyxwYWQ6cixkYXRhRm9ybWF0Om8sZGltUm91bmRpbmdNb2RlOmksZmlsdGVyU2hhcGU6dH07cmV0dXJuIGoucnVuS2VybmVsKGxtLHAsZil9Y29uc3QgSGI9Ryh7Y29udjJEQmFja3Byb3BGaWx0ZXJfOlg0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUGcobixlLHQpe2lmKHQ9PW51bGx8fHQ9PT0ibGluZWFyIilyZXR1cm4gbjtpZih0PT09InJlbHUiKXJldHVybiBYKG4sQ2EoZSkpO3Rocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbXB1dGUgZ3JhZGllbnQgZm9yIGZ1c2VkIGFjdGl2YXRpb24gJHt0fS5gKX1mdW5jdGlvbiB6ZyhuLGUpe2xldCB0PWU7Y29uc3Qgcz1adChuLnNoYXBlLGUuc2hhcGUpO3JldHVybiBzLmxlbmd0aD4wJiYodD1SZSh0LHMpKSxKKHQsbi5zaGFwZSl9ZnVuY3Rpb24gTWcobixlLHQscyl7aWYoZT09PSJsaW5lYXIiKXJldHVybiBuO2lmKGU9PT0icmVsdSIpcmV0dXJuIElyKG4pO2lmKGU9PT0iZWx1IilyZXR1cm4ga3Uobik7aWYoZT09PSJyZWx1NiIpcmV0dXJuIFNnKG4pO2lmKGU9PT0icHJlbHUiKXJldHVybiBnaChuLHQpO2lmKGU9PT0ibGVha3lyZWx1IilyZXR1cm4gdWgobixzKTtpZihlPT09InNpZ21vaWQiKXJldHVybiB3cihuKTt0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZnVzZWQgYWN0aXZhdGlvbiAke2V9LmApfWNvbnN0IEJnPShuLGUpPT4hKG4+MCl8fGU9PT0ibGluZWFyIjsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBZNCh7eDpuLGZpbHRlcjplLHN0cmlkZXM6dCxwYWQ6cyxkYXRhRm9ybWF0OnI9Ik5IV0MiLGRpbGF0aW9uczpvPVsxLDFdLGRpbVJvdW5kaW5nTW9kZTppLGJpYXM6YSxhY3RpdmF0aW9uOmw9ImxpbmVhciIscHJlbHVBY3RpdmF0aW9uV2VpZ2h0czpjLGxlYWt5cmVsdUFscGhhOmh9KXtpZihsPWx8fCJsaW5lYXIiLEJnKGouc3RhdGUuZ3JhZGllbnREZXB0aCxsKT09PSExKXtBKHI9PT0iTkhXQyIsKCk9PmBFcnJvciBpbiBmdXNlZCBjb252MmQ6IGdvdCBkYXRhRm9ybWF0IG9mICR7cn0gYnV0IG9ubHkgTkhXQyBpcyBjdXJyZW50bHkgc3VwcG9ydGVkIGZvciB0aGUgY2FzZSBvZiBncmFkaWVudCBkZXB0aCBpcyAwIGFuZCB0aGUgYWN0aXZhdGlvbiBpcyBub3QgbGluZWFyLmApO2xldCBEPXhvKG4sZSx0LHMscixvLGkpO3JldHVybiBhIT1udWxsJiYoRD1tZShELGEpKSxNZyhELGwsYyxoKX1jb25zdCBwPU8obiwieCIsImNvbnYyZCIsImZsb2F0MzIiKSxmPU8oZSwiZmlsdGVyIiwiY29udjJkIiwiZmxvYXQzMiIpO2xldCBnPXAseT0hMTtwLnJhbms9PT0zJiYoeT0hMCxnPUoocCxbMSxwLnNoYXBlWzBdLHAuc2hhcGVbMV0scC5zaGFwZVsyXV0pKSxBKGcucmFuaz09PTQsKCk9PmBFcnJvciBpbiBmdXNlZCBjb252MmQ6IGlucHV0IG11c3QgYmUgcmFuayA0LCBidXQgZ290IHJhbmsgJHtnLnJhbmt9LmApLEEoZi5yYW5rPT09NCwoKT0+YEVycm9yIGluIGZ1c2VkIGNvbnYyZDogZmlsdGVyIG11c3QgYmUgcmFuayA0LCBidXQgZ290IHJhbmsgJHtmLnJhbmt9LmApLHFuKCJmdXNlZCBjb252MmQiLHMsaSk7Y29uc3Qgdz1yPT09Ik5IV0MiP2cuc2hhcGVbM106Zy5zaGFwZVsxXTtBKGYuc2hhcGVbMl09PT13LCgpPT5gRXJyb3IgaW4gY29udjJkOiBkZXB0aCBvZiBpbnB1dCAoJHt3fSkgbXVzdCBtYXRjaCBpbnB1dCBkZXB0aCBmb3IgZmlsdGVyICR7Zi5zaGFwZVsyXX0uYCksQShrbih0LG8pLCgpPT5gRXJyb3IgaW4gY29udjJEOiBFaXRoZXIgc3RyaWRlcyBvciBkaWxhdGlvbnMgbXVzdCBiZSAxLiBHb3Qgc3RyaWRlcyAke3R9IGFuZCBkaWxhdGlvbnMgJyR7b30nYCk7Y29uc3QgYj1mbihnLnNoYXBlLGYuc2hhcGUsdCxvLHMsaSk7bGV0IHY7YSE9bnVsbCYmKHY9TyhhLCJiaWFzIiwiZnVzZWQgY29udjJkIiksW3ZdPUZ0KHYscCkscj09PSJOSFdDIj9IZShiLm91dFNoYXBlLHYuc2hhcGUpOihBKHYuc2hhcGUubGVuZ3RoPD0xLCgpPT5gRXJyb3IgaW4gZnVzZWQgY29udjJkOiBvbmx5IHN1cHBvcnRzIHNjYWxhciBvciAxLUQgVGVuc29yIGJpYXMgZm9yIE5DSFcgZm9ybWF0IGJ1dCBnb3QgdGhlIGJpYXMgb2YgcmFuay0ke3Yuc2hhcGUubGVuZ3RofS5gKSxBKHYuc2hhcGUubGVuZ3RoPT09MHx8di5zaGFwZVswXT09PWIub3V0Q2hhbm5lbHN8fHYuc2hhcGVbMF09PT0xLCgpPT5gRXJyb3IgaW4gZnVzZWQgY29udjJkOiBiaWFzIHNoYXBlICgke3Yuc2hhcGV9KSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSBudW1iZXIgb2Ygb3V0cHV0IGNoYW5uZWxzICgke2Iub3V0Q2hhbm5lbHN9KWApKSk7bGV0IFM7aWYoYyE9bnVsbCl7Y29uc3QgRD1jLnNoYXBlO2lmKEEoRC5sZW5ndGg8PTF8fEQubGVuZ3RoPT09MywoKT0+YEVycm9yIGluIGZ1c2VkIGNvbnYyZDogb25seSBzdXBwb3J0cyBzY2FsYXIsIDEtRCBUZW5zb3Igb3IgMy1EIFRlbnNvciBQUmVMVSBhY3RpdmF0aW9uIHdlaWdodHMgYnV0IGdvdCBhIHRlbnNvciBvZiByYW5rLSR7RC5sZW5ndGh9LmApLEQubGVuZ3RoPT09MSlBKERbMF09PT0xfHxEWzBdPT09Yi5vdXRDaGFubmVscywoKT0+YEVycm9yIGluIGZ1c2VkIGNvbnYyZDogUFJlTFUgYWN0aXZhdGlvbiB3ZWlnaHRzICgke0R9KSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSBudW1iZXIgb2Ygb3V0cHV0IGNoYW5uZWxzICgke2Iub3V0Q2hhbm5lbHN9KS5gKTtlbHNlIGlmKEQubGVuZ3RoPT09Myl0cnl7SGUoRCxiLm91dFNoYXBlKX1jYXRjaHtjb25zdCB6PWBFcnJvciBpbiBmdXNlZCBjb252MmQ6IFBSZUxVIGFjdGl2YXRpb24gd2VpZ2h0cyAoJHtEfSkgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgb3V0cHV0IHNoYXBlIG9mIHRoZSBjb252MmQgKCR7Yi5vdXRTaGFwZX0pLmA7dGhyb3cgRXJyb3Ioeil9Uz1PKGMsInByZWx1IHdlaWdodHMiLCJmdXNlZCBjb252MmQiKX1jb25zdCAkPShELEwpPT57QShyPT09Ik5IV0MiLCgpPT5gRXJyb3IgaW4gZ3JhZGllbnQgb2YgZnVzZWQgY29udjJEOiBnb3QgZGF0YUZvcm1hdCBvZiAke3J9IGJ1dCBvbmx5IE5IV0MgaXMgY3VycmVudGx5IHN1cHBvcnRlZC5gKTtjb25zdFt6LEYsXyxFXT1MLE09UGcoRCxfLGwpO0EobGkobyksKCk9PmBFcnJvciBpbiBncmFkaWVudCBvZiBmdXNlZCBjb252MkQ6IGRpbGF0aW9uIHJhdGVzIGdyZWF0ZXIgdGhhbiAxIGFyZSBub3QgeWV0IHN1cHBvcnRlZCBpbiBncmFkaWVudHMuIEdvdCBkaWxhdGlvbnMgJyR7b30nYCk7Y29uc3QgVT1jYihGLnNoYXBlLE0seix0LHMpLFk9SGIoRixNLHouc2hhcGUsdCxzKSxRPVtVLFldO2lmKEUhPW51bGwpe2NvbnN0IG5lPXpnKEUsTSk7US5wdXNoKG5lKX1yZXR1cm4gUX0saz17eDpnLGZpbHRlcjpmLGJpYXM6dixwcmVsdUFjdGl2YXRpb25XZWlnaHRzOlN9LFQ9e3N0cmlkZXM6dCxwYWQ6cyxkYXRhRm9ybWF0OnIsZGlsYXRpb25zOm8sZGltUm91bmRpbmdNb2RlOmksYWN0aXZhdGlvbjpsLGxlYWt5cmVsdUFscGhhOmh9O3JldHVybiBhPT1udWxsP0tyKChMLHosRik9PntsZXQgXz1qLnJ1bktlcm5lbChGYyxrLFQpO3JldHVybiBGKFt6LEwsX10pLHkmJihfPUooXyxbXy5zaGFwZVsxXSxfLnNoYXBlWzJdLF8uc2hhcGVbM11dKSkse3ZhbHVlOl8sZ3JhZEZ1bmM6JH19KShnLGYpOktyKChMLHosRixfKT0+e2xldCBFPWoucnVuS2VybmVsKEZjLGssVCk7cmV0dXJuIF8oW3osTCxFLEZdKSx5JiYoRT1KKEUsW0Uuc2hhcGVbMV0sRS5zaGFwZVsyXSxFLnNoYXBlWzNdXSkpLHt2YWx1ZTpFLGdyYWRGdW5jOiR9fSkoZyxmLHYpfWNvbnN0IEZJPUcoe2Z1c2VkQ29udjJkXzpZNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFE0KG4sZSx0LHMscixvPVsxLDFdLGkpe2xldCBhPW47bi5yYW5rPT09MyYmKGE9SihuLFsxLG4uc2hhcGVbMF0sbi5zaGFwZVsxXSxuLnNoYXBlWzJdXSkpO2xldCBsPWU7bC5yYW5rPT09MyYmKGw9SihlLFsxLGUuc2hhcGVbMF0sZS5zaGFwZVsxXSxlLnNoYXBlWzJdXSkpO2NvbnN0IGM9e3g6YSxkeTpsfSxoPXtzdHJpZGVzOnMscGFkOnIsZGltUm91bmRpbmdNb2RlOmksZGlsYXRpb25zOm8sZmlsdGVyU2hhcGU6dH07cmV0dXJuIGoucnVuS2VybmVsKG1tLGMsaCl9Y29uc3QgTEk9Ryh7ZGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BGaWx0ZXJfOlE0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWjQobixlLHQscyxyLG89WzEsMV0saSl7bGV0IGE9ZSxsPSExO2UucmFuaz09PTMmJihsPSEwLGE9SihlLFsxLGUuc2hhcGVbMF0sZS5zaGFwZVsxXSxlLnNoYXBlWzJdXSkpO2NvbnN0IGM9e2R5OmEsZmlsdGVyOnR9LGg9e3N0cmlkZXM6cyxwYWQ6cixkaW1Sb3VuZGluZ01vZGU6aSxkaWxhdGlvbnM6byxpbnB1dFNoYXBlOm59LHA9ai5ydW5LZXJuZWwoZ20sYyxoKTtyZXR1cm4gbD9KKHAsW3Auc2hhcGVbMV0scC5zaGFwZVsyXSxwLnNoYXBlWzNdXSk6cH1jb25zdCBQST1HKHtkZXB0aHdpc2VDb252MmROYXRpdmVCYWNrcHJvcElucHV0XzpaNH0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEo0KHt4Om4sZmlsdGVyOmUsc3RyaWRlczp0LHBhZDpzLGRhdGFGb3JtYXQ6cj0iTkhXQyIsZGlsYXRpb25zOm89WzEsMV0sZGltUm91bmRpbmdNb2RlOmksYmlhczphLGFjdGl2YXRpb246bD0ibGluZWFyIixwcmVsdUFjdGl2YXRpb25XZWlnaHRzOmMsbGVha3lyZWx1QWxwaGE6aH0pe2lmKEJnKGouc3RhdGUuZ3JhZGllbnREZXB0aCxsKT09PSExKXtsZXQgVD1OdShuLGUsdCxzLHIsbyxpKTtyZXR1cm4gYSE9bnVsbCYmKFQ9bWUoVCxhKSksTWcoVCxsLGMsaCl9Y29uc3QgcD1PKG4sIngiLCJkZXB0aHdpc2VDb252MmQiLCJmbG9hdDMyIiksZj1PKGUsImZpbHRlciIsImRlcHRod2lzZUNvbnYyZCIsImZsb2F0MzIiKTtsZXQgZz1wLHk9ITE7cC5yYW5rPT09MyYmKHk9ITAsZz1KKHAsWzEscC5zaGFwZVswXSxwLnNoYXBlWzFdLHAuc2hhcGVbMl1dKSksQShnLnJhbms9PT00LCgpPT5gRXJyb3IgaW4gZnVzZWQgZGVwdGh3aXNlQ29udjJkOiBpbnB1dCBtdXN0IGJlIHJhbmsgNCwgYnV0IGdvdCByYW5rICR7Zy5yYW5rfS5gKSxBKGYucmFuaz09PTQsKCk9PmBFcnJvciBpbiBmdXNlZCBkZXB0aHdpc2VDb252MmQ6IGZpbHRlciBtdXN0IGJlIHJhbmsgNCwgYnV0IGdvdCByYW5rICR7Zi5yYW5rfS5gKSxBKGcuc2hhcGVbM109PT1mLnNoYXBlWzJdLCgpPT5gRXJyb3IgaW4gZnVzZWQgZGVwdGh3aXNlQ29udjJkOiBudW1iZXIgb2YgaW5wdXQgY2hhbm5lbHMgKCR7Zy5zaGFwZVszXX0pIG11c3QgbWF0Y2ggdGhlIGluQ2hhbm5lbHMgZGltZW5zaW9uIGluIGZpbHRlciAke2Yuc2hhcGVbMl19LmApLG89PW51bGwmJihvPVsxLDFdKSxBKGtuKHQsbyksKCk9PmBFcnJvciBpbiBmdXNlZCBkZXB0aHdpc2VDb252MmQ6IEVpdGhlciBzdHJpZGVzIG9yIGRpbGF0aW9ucyBtdXN0IGJlIDEuIEdvdCBzdHJpZGVzICR7dH0gYW5kIGRpbGF0aW9ucyAnJHtvfSdgKSxxbigiZnVzZWQgZGVwdGh3aXNlQ29udjJkIixzLGkpO2NvbnN0IHc9Zm4oZy5zaGFwZSxmLnNoYXBlLHQsbyxzLGksITApO2xldCBiO2EhPW51bGwmJihiPU8oYSwiYmlhcyIsImZ1c2VkIGNvbnYyZCIpLFtiXT1GdChiLHApLEhlKHcub3V0U2hhcGUsYi5zaGFwZSkpO2xldCB2O2MhPW51bGwmJih2PU8oYywicHJlbHUgd2VpZ2h0cyIsImZ1c2VkIGRlcHRod2lzZUNvbnYyZCIpKTtjb25zdCBTPShULEQpPT57QShsaShvKSwoKT0+YEVycm9yIGluIGdyYWRpZW50IG9mIGZ1c2VkIGRlcHRod2lzZUNvbnYyZDogZGlsYXRpb24gcmF0ZXMgZ3JlYXRlciB0aGFuIDEgYXJlIG5vdCB5ZXQgc3VwcG9ydGVkLiBHb3QgZGlsYXRpb25zICcke299J2ApO2NvbnN0W0wseixGLF9dPUQsRT1QZyhULEYsbCksTT1QSSh6LnNoYXBlLEUsTCx0LHMsbyxpKSxVPUxJKHosRSxMLnNoYXBlLHQscyxvLGkpO2lmKF8hPW51bGwpe2NvbnN0IFk9emcoYixFKTtyZXR1cm5bTSxVLFldfXJldHVybltNLFVdfSwkPXt4OmcsZmlsdGVyOmYsYmlhczpiLHByZWx1QWN0aXZhdGlvbldlaWdodHM6dn0saz17c3RyaWRlczp0LHBhZDpzLGRhdGFGb3JtYXQ6cixkaWxhdGlvbnM6byxkaW1Sb3VuZGluZ01vZGU6aSxhY3RpdmF0aW9uOmwsbGVha3lyZWx1QWxwaGE6aH07cmV0dXJuIGE9PW51bGw/S3IoKEQsTCx6KT0+e2xldCBGPWoucnVuS2VybmVsKExjLCQsayk7cmV0dXJuIHooW0wsRCxGXSkseSYmKEY9SihGLFtGLnNoYXBlWzFdLEYuc2hhcGVbMl0sRi5zaGFwZVszXV0pKSx7dmFsdWU6RixncmFkRnVuYzpTfX0pKGcsZik6S3IoKEQsTCx6LEYpPT57bGV0IF89ai5ydW5LZXJuZWwoTGMsJCxrKTtyZXR1cm4gRihbTCxELF8sel0pLHkmJihfPUooXyxbXy5zaGFwZVsxXSxfLnNoYXBlWzJdLF8uc2hhcGVbM11dKSkse3ZhbHVlOl8sZ3JhZEZ1bmM6U319KShnLGYsYil9Y29uc3QgZU09Ryh7ZnVzZWREZXB0aHdpc2VDb252MmRfOko0fSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdE0oe2E6bixiOmUsdHJhbnNwb3NlQTp0PSExLHRyYW5zcG9zZUI6cz0hMSxiaWFzOnIsYWN0aXZhdGlvbjpvPSJsaW5lYXIiLHByZWx1QWN0aXZhdGlvbldlaWdodHM6aSxsZWFreXJlbHVBbHBoYTphPS4yfSl7aWYoQmcoai5zdGF0ZS5ncmFkaWVudERlcHRoLG8pPT09ITEpe2xldCBFPVhlKG4sZSx0LHMpO3JldHVybiByIT1udWxsJiYoRT1tZShFLHIpKSxNZyhFLG8saSxhKX1sZXQgbD1PKG4sImEiLCJmdXNlZCBtYXRNdWwiKSxjPU8oZSwiYiIsImZ1c2VkIG1hdE11bCIpO1tsLGNdPUZ0KGwsYyk7Y29uc3QgaD10P2wuc2hhcGVbbC5yYW5rLTJdOmwuc2hhcGVbbC5yYW5rLTFdLHA9cz9jLnNoYXBlW2MucmFuay0xXTpjLnNoYXBlW2MucmFuay0yXSxmPXQ/bC5zaGFwZVtsLnJhbmstMV06bC5zaGFwZVtsLnJhbmstMl0sZz1zP2Muc2hhcGVbYy5yYW5rLTJdOmMuc2hhcGVbYy5yYW5rLTFdLHk9bC5zaGFwZS5zbGljZSgwLC0yKSx3PWMuc2hhcGUuc2xpY2UoMCwtMiksYj1jZSh5KSx2PWNlKHcpO0EoaD09PXAsKCk9PmBFcnJvciBpbiBmdXNlZCBtYXRNdWw6IGlubmVyIHNoYXBlcyAoJHtofSkgYW5kICgke3B9KSBvZiBUZW5zb3JzIHdpdGggc2hhcGVzICR7bC5zaGFwZX0gYW5kICR7Yy5zaGFwZX0gYW5kIHRyYW5zcG9zZUE9JHt0fSBhbmQgdHJhbnNwb3NlQj0ke3N9IG11c3QgbWF0Y2guYCk7Y29uc3QgJD1IZShsLnNoYXBlLnNsaWNlKDAsLTIpLGMuc2hhcGUuc2xpY2UoMCwtMikpLmNvbmNhdChbZixnXSksaz10P0oobCxbYixoLGZdKTpKKGwsW2IsZixoXSksVD1zP0ooYyxbdixnLHBdKTpKKGMsW3YscCxnXSk7bGV0IEQ7ciE9bnVsbCYmKEQ9TyhyLCJiaWFzIiwiZnVzZWQgbWF0TXVsIiksW0RdPUZ0KEQsbCksSGUoJCxELnNoYXBlKSk7bGV0IEw7aSE9bnVsbCYmKEw9TyhpLCJwcmVsdSB3ZWlnaHRzIiwiZnVzZWQgbWF0TXVsIikpO2NvbnN0IHo9KEUsTSk9Pntjb25zdFtVLFksUSxuZV09TSxzZT1QZyhKKEUsUS5zaGFwZSksUSxvKTtsZXQgVixLO2lmKCF0JiYhcz8oVj1YZShzZSxZLCExLCEwKSxLPVhlKFUsc2UsITAsITEpKTohdCYmcz8oVj1YZShzZSxZLCExLCExKSxLPVhlKHNlLFUsITAsITEpKTp0JiYhcz8oVj1YZShZLHNlLCExLCEwKSxLPVhlKFUsc2UsITEsITEpKTooVj1YZShZLHNlLCEwLCEwKSxLPVhlKHNlLFUsITAsITApKSxyIT1udWxsKXtjb25zdCBxPXpnKG5lLHNlKTtyZXR1cm5bVixLLHFdfWVsc2UgcmV0dXJuW1YsS119LEY9e2E6ayxiOlQsYmlhczpELHByZWx1QWN0aXZhdGlvbldlaWdodHM6TH0sXz17dHJhbnNwb3NlQTp0LHRyYW5zcG9zZUI6cyxhY3RpdmF0aW9uOm8sbGVha3lyZWx1QWxwaGE6YX07cmV0dXJuIHI9PW51bGw/S3IoKE0sVSxZKT0+e2NvbnN0IFE9ai5ydW5LZXJuZWwoT2MsRixfKTtyZXR1cm4gWShbTSxVLFFdKSx7dmFsdWU6SihRLCQpLGdyYWRGdW5jOnp9fSkoayxUKTpLcigoTSxVLFksUSk9Pntjb25zdCBuZT1qLnJ1bktlcm5lbChPYyxGLF8pO3JldHVybiBRKFtNLFUsbmUsWV0pLHt2YWx1ZTpKKG5lLCQpLGdyYWRGdW5jOnp9fSkoayxULEQpfWNvbnN0IEcwPUcoe2Z1c2VkTWF0TXVsXzp0TX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHpJPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxjb252MmQ6RkksZGVwdGh3aXNlQ29udjJkOmVNLG1hdE11bDpHMH0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBuTShuKXtyZXR1cm4gTGcobiwuNTQsLjQ2KX1jb25zdCBzTT1HKHtoYW1taW5nV2luZG93XzpuTX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHJNKG4pe3JldHVybiBMZyhuLC41LC41KX1jb25zdCBNST1HKHtoYW5uV2luZG93XzpyTX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG9NKG4sZSx0LHM9ITEscj0wKXtsZXQgbz0wO2NvbnN0IGk9W107Zm9yKDtvK2U8PW4uc2l6ZTspaS5wdXNoKHN0KG4sbyxlKSksbys9dDtpZihzKWZvcig7bzxuLnNpemU7KXtjb25zdCBhPW8rZS1uLnNpemUsbD1XdChbc3QobixvLGUtYSksTmEoW2FdLHIpXSk7aS5wdXNoKGwpLG8rPXR9cmV0dXJuIGkubGVuZ3RoPT09MD9jbChbXSxbMCxlXSk6SihXdChpKSxbaS5sZW5ndGgsZV0pfWNvbnN0IEJJPUcoe2ZyYW1lXzpvTX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGlNKG4sZSx0LHMscj1NSSl7cz09bnVsbCYmKHM9R2IoZSkpO2NvbnN0IG89QkkobixlLHQpLGk9WChvLHIoZSkpO3JldHVybiB2aChpLHMpfWNvbnN0IGFNPUcoe3N0ZnRfOmlNfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gbE0obixlLHQscyxyPSJiaWxpbmVhciIsbz0wKXtjb25zdCBpPU8obiwiaW1hZ2UiLCJjcm9wQW5kUmVzaXplIiksYT1PKGUsImJveGVzIiwiY3JvcEFuZFJlc2l6ZSIsImZsb2F0MzIiKSxsPU8odCwiYm94SW5kIiwiY3JvcEFuZFJlc2l6ZSIsImludDMyIiksYz1hLnNoYXBlWzBdO0EoaS5yYW5rPT09NCwoKT0+YEVycm9yIGluIGNyb3BBbmRSZXNpemU6IGltYWdlIG11c3QgYmUgcmFuayA0LGJ1dCBnb3QgcmFuayAke2kucmFua30uYCksQShhLnJhbms9PT0yJiZhLnNoYXBlWzFdPT09NCwoKT0+YEVycm9yIGluIGNyb3BBbmRSZXNpemU6IGJveGVzIG11c3QgYmUgaGF2ZSBzaXplIFske2N9LDRdIGJ1dCBoYWQgc2hhcGUgJHthLnNoYXBlfS5gKSxBKGwucmFuaz09PTEmJmwuc2hhcGVbMF09PT1jLCgpPT5gRXJyb3IgaW4gY3JvcEFuZFJlc2l6ZTogYm94SW5kIG11c3QgYmUgaGF2ZSBzaXplIFske2N9XSBidXQgaGFkIHNoYXBlICR7YS5zaGFwZX0uYCksQShzLmxlbmd0aD09PTIsKCk9PmBFcnJvciBpbiBjcm9wQW5kUmVzaXplOiBjcm9wU2l6ZSBtdXN0IGJlIG9mIGxlbmd0aCAyLCBidXQgZ290IGxlbmd0aCAke3MubGVuZ3RofS5gKSxBKHNbMF0+PTEmJnNbMV0+PTEsKCk9PmBjcm9wU2l6ZSBtdXN0IGJlIGF0bGVhc3QgWzEsMV0sIGJ1dCB3YXMgJHtzfWApLEEocj09PSJiaWxpbmVhciJ8fHI9PT0ibmVhcmVzdCIsKCk9PmBtZXRob2QgbXVzdCBiZSBiaWxpbmVhciBvciBuZWFyZXN0LCBidXQgd2FzICR7cn1gKTtjb25zdCBoPXtpbWFnZTppLGJveGVzOmEsYm94SW5kOmx9LHA9e21ldGhvZDpyLGV4dHJhcG9sYXRpb25WYWx1ZTpvLGNyb3BTaXplOnN9O3JldHVybiBqLnJ1bktlcm5lbChobSxoLHApfWNvbnN0IHVNPUcoe2Nyb3BBbmRSZXNpemVfOmxNfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gY00obil7Y29uc3QgZT1PKG4sImltYWdlIiwiZmxpcExlZnRSaWdodCIsImZsb2F0MzIiKTtBKGUucmFuaz09PTQsKCk9PmBFcnJvciBpbiBmbGlwTGVmdFJpZ2h0OiBpbWFnZSBtdXN0IGJlIHJhbmsgNCxidXQgZ290IHJhbmsgJHtlLnJhbmt9LmApO2NvbnN0IHQ9e2ltYWdlOmV9O3JldHVybiBqLnJ1bktlcm5lbChObSx0LHt9KX1jb25zdCBkTT1HKHtmbGlwTGVmdFJpZ2h0XzpjTX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGhNKG4pe2NvbnN0IGU9TyhuLCJpbWFnZSIsImdyYXlzY2FsZVRvUkdCIiksdD1lLnJhbmstMSxzPWUuc2hhcGVbdF07QShlLnJhbms+PTIsKCk9PmBFcnJvciBpbiBncmF5c2NhbGVUb1JHQjogaW1hZ2VzIG11c3QgYmUgYXQgbGVhc3QgcmFuayAyLCBidXQgZ290IHJhbmsgJHtlLnJhbmt9LmApLEEocz09PTEsKCk9PmBFcnJvciBpbiBncmF5c2NhbGVUb1JHQjogbGFzdCBkaW1lbnNpb24gb2YgYSBncmF5c2NhbGUgaW1hZ2Ugc2hvdWxkIGJlIHNpemUgMSwgYnV0IGdvdCBzaXplICR7c30uYCk7Y29uc3Qgcj1uZXcgQXJyYXkoZS5yYW5rKTtyZXR1cm4gci5maWxsKDEsMCx0KSxyW3RdPTMsX3MoZSxyKX1jb25zdCBwTT1HKHtncmF5c2NhbGVUb1JHQl86aE19KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBmTShuKXtjb25zdCBlPU8obiwiaW1hZ2UiLCJSR0JUb0dyYXlzY2FsZSIpLHQ9ZS5yYW5rLTEscz1lLnNoYXBlW3RdO0EoZS5yYW5rPj0yLCgpPT5gRXJyb3IgaW4gUkdCVG9HcmF5c2NhbGU6IGltYWdlcyBtdXN0IGJlIGF0IGxlYXN0IHJhbmsgMiwgYnV0IGdvdCByYW5rICR7ZS5yYW5rfS5gKSxBKHM9PT0zLCgpPT5gRXJyb3IgaW4gUkdCVG9HcmF5c2NhbGU6IGxhc3QgZGltZW5zaW9uIG9mIGFuIFJHQiBpbWFnZSBzaG91bGQgYmUgc2l6ZSAzLCBidXQgZ290IHNpemUgJHtzfS5gKTtjb25zdCByPWUuZHR5cGUsbz1OZShlLCJmbG9hdDMyIiksaT1fbihbLjI5ODksLjU4NywuMTE0XSk7bGV0IGE7c3dpdGNoKGUucmFuayl7Y2FzZSAyOmE9cWkoImlqLGotPmkiLG8saSk7YnJlYWs7Y2FzZSAzOmE9cWkoImlqayxrLT5paiIsbyxpKTticmVhaztjYXNlIDQ6YT1xaSgiaWprbCxsLT5pamsiLG8saSk7YnJlYWs7Y2FzZSA1OmE9cWkoImlqa2xtLG0tPmlqa2wiLG8saSk7YnJlYWs7Y2FzZSA2OmE9cWkoImlqa2xtbixuLT5pamtsbSIsbyxpKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiTm90IGEgdmFsaWQgdGVuc29yIHJhbmsuIil9cmV0dXJuIGE9QW4oYSwtMSksTmUoYSxyKX1jb25zdCBtTT1HKHtyZ2JUb0dyYXlzY2FsZV86Zk19KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBnTShuLGUsdD0wLHM9LjUpe2NvbnN0IHI9TyhuLCJpbWFnZSIsInJvdGF0ZVdpdGhPZmZzZXQiLCJmbG9hdDMyIik7QShyLnJhbms9PT00LCgpPT5gRXJyb3IgaW4gcm90YXRlV2l0aE9mZnNldDogaW1hZ2UgbXVzdCBiZSByYW5rIDQsYnV0IGdvdCByYW5rICR7ci5yYW5rfS5gKTtjb25zdCBvPXtpbWFnZTpyfSxpPXtyYWRpYW5zOmUsZmlsbFZhbHVlOnQsY2VudGVyOnN9O3JldHVybiBqLnJ1bktlcm5lbChvZyxvLGkpfWNvbnN0IHlNPUcoe3JvdGF0ZVdpdGhPZmZzZXRfOmdNfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gVHUobixlLHQscyxyLG8pe3M9PW51bGwmJihzPS41KSxyPT1udWxsJiYocj1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpLG89PW51bGwmJihvPTApO2NvbnN0IGk9bi5zaGFwZVswXTtyZXR1cm4gdD1NYXRoLm1pbih0LGkpLEEoMDw9cyYmczw9MSwoKT0+YGlvdVRocmVzaG9sZCBtdXN0IGJlIGluIFswLCAxXSwgYnV0IHdhcyAnJHtzfSdgKSxBKG4ucmFuaz09PTIsKCk9PmBib3hlcyBtdXN0IGJlIGEgMkQgdGVuc29yLCBidXQgd2FzIG9mIHJhbmsgJyR7bi5yYW5rfSdgKSxBKG4uc2hhcGVbMV09PT00LCgpPT5gYm94ZXMgbXVzdCBoYXZlIDQgY29sdW1ucywgYnV0IDJuZCBkaW1lbnNpb24gd2FzICR7bi5zaGFwZVsxXX1gKSxBKGUucmFuaz09PTEsKCk9PiJzY29yZXMgbXVzdCBiZSBhIDFEIHRlbnNvciIpLEEoZS5zaGFwZVswXT09PWksKCk9PmBzY29yZXMgaGFzIGluY29tcGF0aWJsZSBzaGFwZSB3aXRoIGJveGVzLiBFeHBlY3RlZCAke2l9LCBidXQgd2FzICR7ZS5zaGFwZVswXX1gKSxBKDA8PW8mJm88PTEsKCk9PmBzb2Z0Tm1zU2lnbWEgbXVzdCBiZSBpbiBbMCwgMV0sIGJ1dCB3YXMgJyR7b30nYCkse21heE91dHB1dFNpemU6dCxpb3VUaHJlc2hvbGQ6cyxzY29yZVRocmVzaG9sZDpyLHNvZnRObXNTaWdtYTpvfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB4TShuLGUsdCxzPS41LHI9TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKXtjb25zdCBvPU8obiwiYm94ZXMiLCJub25NYXhTdXBwcmVzc2lvbiIsImZsb2F0MzIiKSxpPU8oZSwic2NvcmVzIiwibm9uTWF4U3VwcHJlc3Npb24iLCJmbG9hdDMyIiksYT1UdShvLGksdCxzLHIpO3Q9YS5tYXhPdXRwdXRTaXplLHM9YS5pb3VUaHJlc2hvbGQscj1hLnNjb3JlVGhyZXNob2xkO2NvbnN0IGw9e21heE91dHB1dFNpemU6dCxpb3VUaHJlc2hvbGQ6cyxzY29yZVRocmVzaG9sZDpyfTtyZXR1cm4gai5ydW5LZXJuZWwoX20se2JveGVzOm8sc2NvcmVzOml9LGwpfWNvbnN0IGJNPUcoe25vbk1heFN1cHByZXNzaW9uXzp4TX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHdNKG4sZSx0KXtjb25zdCBzPXZNKG4sZSx0KSxyPXM8MD8tKHMrMSk6cztuLnNwbGljZShyLDAsZSl9ZnVuY3Rpb24gdk0obixlLHQpe3JldHVybiBOTShuLGUsdHx8U00pfWZ1bmN0aW9uIFNNKG4sZSl7cmV0dXJuIG4+ZT8xOm48ZT8tMTowfWZ1bmN0aW9uIE5NKG4sZSx0KXtsZXQgcz0wLHI9bi5sZW5ndGgsbz0wLGk9ITE7Zm9yKDtzPHI7KXtvPXMrKHItcz4+PjEpO2NvbnN0IGE9dChlLG5bb10pO2E+MD9zPW8rMToocj1vLGk9IWEpfXJldHVybiBpP3M6LXMtMX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBWZyhuLGUsdCxzLHIpe3JldHVybiBxYihuLGUsdCxzLHIsMCl9ZnVuY3Rpb24gV2cobixlLHQscyxyLG8pe3JldHVybiBxYihuLGUsdCxzLHIsMCwhMSxvLCEwKX1mdW5jdGlvbiBVZyhuLGUsdCxzLHIsbyl7cmV0dXJuIHFiKG4sZSx0LHMscixvLCEwKX1mdW5jdGlvbiBxYihuLGUsdCxzLHIsbyxpPSExLGE9ITEsbD0hMSl7Y29uc3QgYz1bXTtmb3IobGV0IGI9MDtiPGUubGVuZ3RoO2IrKyllW2JdPnImJmMucHVzaCh7c2NvcmU6ZVtiXSxib3hJbmRleDpiLHN1cHByZXNzQmVnaW5JbmRleDowfSk7Yy5zb3J0KEVrKTtjb25zdCBoPW8+MD8tLjUvbzowLHA9W10sZj1bXTtmb3IoO3AubGVuZ3RoPHQmJmMubGVuZ3RoPjA7KXtjb25zdCBiPWMucG9wKCkse3Njb3JlOnYsYm94SW5kZXg6UyxzdXBwcmVzc0JlZ2luSW5kZXg6JH09YjtpZih2PHIpYnJlYWs7bGV0IGs9ITE7Zm9yKGxldCBUPXAubGVuZ3RoLTE7VD49JDstLVQpe2NvbnN0IEQ9a00obixTLHBbVF0pO2lmKEQ+PXMpe2s9ITA7YnJlYWt9aWYoYi5zY29yZT1iLnNjb3JlKkNNKHMsaCxEKSxiLnNjb3JlPD1yKWJyZWFrfWIuc3VwcHJlc3NCZWdpbkluZGV4PXAubGVuZ3RoLGt8fChiLnNjb3JlPT09dj8ocC5wdXNoKFMpLGYucHVzaChiLnNjb3JlKSk6Yi5zY29yZT5yJiZ3TShjLGIsRWspKX1jb25zdCBnPXAubGVuZ3RoLHk9dC1nO2EmJnk+MCYmKHAucHVzaCguLi5uZXcgQXJyYXkoeSkuZmlsbCgwKSksZi5wdXNoKC4uLm5ldyBBcnJheSh5KS5maWxsKDApKSk7Y29uc3Qgdz17c2VsZWN0ZWRJbmRpY2VzOnB9O3JldHVybiBpJiYody5zZWxlY3RlZFNjb3Jlcz1mKSxsJiYody52YWxpZE91dHB1dHM9Zyksd31mdW5jdGlvbiBrTShuLGUsdCl7Y29uc3Qgcz1uLnN1YmFycmF5KGUqNCxlKjQrNCkscj1uLnN1YmFycmF5KHQqNCx0KjQrNCksbz1NYXRoLm1pbihzWzBdLHNbMl0pLGk9TWF0aC5taW4oc1sxXSxzWzNdKSxhPU1hdGgubWF4KHNbMF0sc1syXSksbD1NYXRoLm1heChzWzFdLHNbM10pLGM9TWF0aC5taW4oclswXSxyWzJdKSxoPU1hdGgubWluKHJbMV0sclszXSkscD1NYXRoLm1heChyWzBdLHJbMl0pLGY9TWF0aC5tYXgoclsxXSxyWzNdKSxnPShhLW8pKihsLWkpLHk9KHAtYykqKGYtaCk7aWYoZzw9MHx8eTw9MClyZXR1cm4gMDtjb25zdCB3PU1hdGgubWF4KG8sYyksYj1NYXRoLm1heChpLGgpLHY9TWF0aC5taW4oYSxwKSxTPU1hdGgubWluKGwsZiksJD1NYXRoLm1heCh2LXcsMCkqTWF0aC5tYXgoUy1iLDApO3JldHVybiAkLyhnK3ktJCl9ZnVuY3Rpb24gQ00obixlLHQpe2NvbnN0IHM9TWF0aC5leHAoZSp0KnQpO3JldHVybiB0PD1uP3M6MH1mdW5jdGlvbiBFayhuLGUpe3JldHVybiBuLnNjb3JlLWUuc2NvcmV8fG4uc2NvcmU9PT1lLnNjb3JlJiZlLmJveEluZGV4LW4uYm94SW5kZXh9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovYXN5bmMgZnVuY3Rpb24gJE0obixlLHQscz0uNSxyPU51bWJlci5ORUdBVElWRV9JTkZJTklUWSl7Y29uc3Qgbz1PKG4sImJveGVzIiwibm9uTWF4U3VwcHJlc3Npb25Bc3luYyIpLGk9TyhlLCJzY29yZXMiLCJub25NYXhTdXBwcmVzc2lvbkFzeW5jIiksYT1UdShvLGksdCxzLHIpO3Q9YS5tYXhPdXRwdXRTaXplLHM9YS5pb3VUaHJlc2hvbGQscj1hLnNjb3JlVGhyZXNob2xkO2NvbnN0IGw9YXdhaXQgUHJvbWlzZS5hbGwoW28uZGF0YSgpLGkuZGF0YSgpXSksYz1sWzBdLGg9bFsxXSx7c2VsZWN0ZWRJbmRpY2VzOnB9PVZnKGMsaCx0LHMscik7cmV0dXJuIG8hPT1uJiZvLmRpc3Bvc2UoKSxpIT09ZSYmaS5kaXNwb3NlKCksX24ocCwiaW50MzIiKX1jb25zdCBJTT0kTTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBUTShuLGUsdCxzPS41LHI9TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG89MCl7Y29uc3QgaT1PKG4sImJveGVzIiwibm9uTWF4U3VwcHJlc3Npb24iKSxhPU8oZSwic2NvcmVzIiwibm9uTWF4U3VwcHJlc3Npb24iKSxsPVR1KGksYSx0LHMscixvKTt0PWwubWF4T3V0cHV0U2l6ZSxzPWwuaW91VGhyZXNob2xkLHI9bC5zY29yZVRocmVzaG9sZCxvPWwuc29mdE5tc1NpZ21hO2NvbnN0IGM9e2JveGVzOmksc2NvcmVzOmF9LGg9e21heE91dHB1dFNpemU6dCxpb3VUaHJlc2hvbGQ6cyxzY29yZVRocmVzaG9sZDpyLHNvZnRObXNTaWdtYTpvfSxwPWoucnVuS2VybmVsKEZtLGMsaCk7cmV0dXJue3NlbGVjdGVkSW5kaWNlczpwWzBdLHNlbGVjdGVkU2NvcmVzOnBbMV19fWNvbnN0IEVNPUcoe25vbk1heFN1cHByZXNzaW9uV2l0aFNjb3JlXzpUTX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2FzeW5jIGZ1bmN0aW9uIFJNKG4sZSx0LHM9LjUscj1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbz0wKXtjb25zdCBpPU8obiwiYm94ZXMiLCJub25NYXhTdXBwcmVzc2lvbkFzeW5jIiksYT1PKGUsInNjb3JlcyIsIm5vbk1heFN1cHByZXNzaW9uQXN5bmMiKSxsPVR1KGksYSx0LHMscixvKTt0PWwubWF4T3V0cHV0U2l6ZSxzPWwuaW91VGhyZXNob2xkLHI9bC5zY29yZVRocmVzaG9sZCxvPWwuc29mdE5tc1NpZ21hO2NvbnN0IGM9YXdhaXQgUHJvbWlzZS5hbGwoW2kuZGF0YSgpLGEuZGF0YSgpXSksaD1jWzBdLHA9Y1sxXSx7c2VsZWN0ZWRJbmRpY2VzOmYsc2VsZWN0ZWRTY29yZXM6Z309VWcoaCxwLHQscyxyLG8pO3JldHVybiBpIT09biYmaS5kaXNwb3NlKCksYSE9PWUmJmEuZGlzcG9zZSgpLHtzZWxlY3RlZEluZGljZXM6X24oZiwiaW50MzIiKSxzZWxlY3RlZFNjb3JlczpfbihnKX19Y29uc3QgRE09Uk07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQU0obixlLHQscz0uNSxyPU51bWJlci5ORUdBVElWRV9JTkZJTklUWSxvPSExKXtjb25zdCBpPU8obiwiYm94ZXMiLCJub25NYXhTdXBwcmVzc2lvbiIpLGE9TyhlLCJzY29yZXMiLCJub25NYXhTdXBwcmVzc2lvbiIpLGw9VHUoaSxhLHQscyxyLG51bGwpLGM9bC5tYXhPdXRwdXRTaXplLGg9bC5pb3VUaHJlc2hvbGQscD1sLnNjb3JlVGhyZXNob2xkLGY9e2JveGVzOmksc2NvcmVzOmF9LGc9e21heE91dHB1dFNpemU6Yyxpb3VUaHJlc2hvbGQ6aCxzY29yZVRocmVzaG9sZDpwLHBhZFRvTWF4T3V0cHV0U2l6ZTpvfSx5PWoucnVuS2VybmVsKE9tLGYsZyk7cmV0dXJue3NlbGVjdGVkSW5kaWNlczp5WzBdLHZhbGlkT3V0cHV0czp5WzFdfX1jb25zdCBfTT1HKHtub25NYXhTdXBwcmVzc2lvblBhZGRlZF86QU19KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9hc3luYyBmdW5jdGlvbiBPTShuLGUsdCxzPS41LHI9TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG89ITEpe2NvbnN0IGk9TyhuLCJib3hlcyIsIm5vbk1heFN1cHByZXNzaW9uQXN5bmMiKSxhPU8oZSwic2NvcmVzIiwibm9uTWF4U3VwcHJlc3Npb25Bc3luYyIpLGw9VHUoaSxhLHQscyxyLG51bGwpLGM9bC5tYXhPdXRwdXRTaXplLGg9bC5pb3VUaHJlc2hvbGQscD1sLnNjb3JlVGhyZXNob2xkLFtmLGddPWF3YWl0IFByb21pc2UuYWxsKFtpLmRhdGEoKSxhLmRhdGEoKV0pLHtzZWxlY3RlZEluZGljZXM6eSx2YWxpZE91dHB1dHM6d309V2coZixnLGMsaCxwLG8pO3JldHVybiBpIT09biYmaS5kaXNwb3NlKCksYSE9PWUmJmEuZGlzcG9zZSgpLHtzZWxlY3RlZEluZGljZXM6X24oeSwiaW50MzIiKSx2YWxpZE91dHB1dHM6TWUodywiaW50MzIiKX19Y29uc3QgRk09T007LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gTE0obixlLHQ9ITEscz0hMSl7Y29uc3Qgcj1PKG4sImltYWdlcyIsInJlc2l6ZUJpbGluZWFyIik7QShyLnJhbms9PT0zfHxyLnJhbms9PT00LCgpPT5gRXJyb3IgaW4gcmVzaXplQmlsaW5lYXI6IHggbXVzdCBiZSByYW5rIDMgb3IgNCwgYnV0IGdvdCByYW5rICR7ci5yYW5rfS5gKSxBKGUubGVuZ3RoPT09MiwoKT0+YEVycm9yIGluIHJlc2l6ZUJpbGluZWFyOiBuZXcgc2hhcGUgbXVzdCAyRCwgYnV0IGdvdCBzaGFwZSAke2V9LmApLEEocz09PSExfHx0PT09ITEsKCk9PiJFcnJvciBpbiByZXNpemVCaWxpbmVhcjogSWYgaGFsZlBpeGVsQ2VudGVycyBpcyB0cnVlLCBhbGlnbkNvcm5lcnMgbXVzdCBiZSBmYWxzZS4iKTtsZXQgbz1yLGk9ITE7ci5yYW5rPT09MyYmKGk9ITAsbz1KKHIsWzEsci5zaGFwZVswXSxyLnNoYXBlWzFdLHIuc2hhcGVbMl1dKSk7Y29uc3QgYT17aW1hZ2VzOm99LGw9e2FsaWduQ29ybmVyczp0LGhhbGZQaXhlbENlbnRlcnM6cyxzaXplOmV9LGM9ai5ydW5LZXJuZWwoamQsYSxsKTtyZXR1cm4gaT9KKGMsW2Muc2hhcGVbMV0sYy5zaGFwZVsyXSxjLnNoYXBlWzNdXSk6Y31jb25zdCBWST1HKHtyZXNpemVCaWxpbmVhcl86TE19KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBQTShuLGUsdD0hMSxzPSExKXtjb25zdCByPU8obiwiaW1hZ2VzIiwicmVzaXplTmVhcmVzdE5laWdoYm9yIik7QShyLnJhbms9PT0zfHxyLnJhbms9PT00LCgpPT5gRXJyb3IgaW4gcmVzaXplTmVhcmVzdE5laWdoYm9yOiB4IG11c3QgYmUgcmFuayAzIG9yIDQsIGJ1dCBnb3QgcmFuayAke3IucmFua30uYCksQShlLmxlbmd0aD09PTIsKCk9PmBFcnJvciBpbiByZXNpemVOZWFyZXN0TmVpZ2hib3I6IG5ldyBzaGFwZSBtdXN0IDJELCBidXQgZ290IHNoYXBlICR7ZX0uYCksQShyLmR0eXBlPT09ImZsb2F0MzIifHxyLmR0eXBlPT09ImludDMyIiwoKT0+ImBpbWFnZXNgIG11c3QgaGF2ZSBgaW50MzJgIG9yIGBmbG9hdDMyYCBhcyBkdHlwZSIpLEEocz09PSExfHx0PT09ITEsKCk9PiJFcnJvciBpbiByZXNpemVOZWFyZXN0TmVpZ2hib3I6IElmIGhhbGZQaXhlbENlbnRlcnMgaXMgdHJ1ZSwgYWxpZ25Db3JuZXJzIG11c3QgYmUgZmFsc2UuIik7bGV0IG89cixpPSExO3IucmFuaz09PTMmJihpPSEwLG89SihyLFsxLHIuc2hhcGVbMF0sci5zaGFwZVsxXSxyLnNoYXBlWzJdXSkpO2NvbnN0IGE9e2ltYWdlczpvfSxsPXthbGlnbkNvcm5lcnM6dCxoYWxmUGl4ZWxDZW50ZXJzOnMsc2l6ZTplfSxjPWoucnVuS2VybmVsKFVkLGEsbCk7cmV0dXJuIGk/SihjLFtjLnNoYXBlWzFdLGMuc2hhcGVbMl0sYy5zaGFwZVszXV0pOmN9Y29uc3QgV0k9Ryh7cmVzaXplTmVhcmVzdE5laWdoYm9yXzpQTX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB6TShuLGU9ImJpbmFyeSIsdD0hMSxzPS41KXtjb25zdCByPU8obiwiaW1hZ2UiLCJ0aHJlc2hvbGQiKSxvPS4yOTg5LGk9LjU4NyxhPS4xMTQsbD1yLnNoYXBlWzBdKnIuc2hhcGVbMV07bGV0IGM9WChfbihbc10pLDI1NSksaCxwLGYsZztpZihBKHIucmFuaz09PTMsKCk9PmBFcnJvciBpbiB0aHJlc2hvbGQ6IGltYWdlIG11c3QgYmUgcmFuayAzLGJ1dCBnb3QgcmFuayAke3IucmFua30uYCksQShyLnNoYXBlWzJdPT09M3x8ci5zaGFwZVsyXT09PTEsKCk9PmBFcnJvciBpbiB0aHJlc2hvbGQ6IGltYWdlIGNvbG9yIGNoYW5uZWwgbXVzdCBiZSBlcXVhbCB0byAzIG9yIDFidXQgZ290ICR7ci5zaGFwZVsyXX0uYCksQShyLmR0eXBlPT09ImludDMyInx8ci5kdHlwZT09PSJmbG9hdDMyIiwoKT0+YEVycm9yIGluIGR0eXBlOiBpbWFnZSBkdHlwZSBtdXN0IGJlIGludDMyIG9yIGZsb2F0MzIsYnV0IGdvdCBkdHlwZSAke3IuZHR5cGV9LmApLEEoZT09PSJvdHN1Inx8ZT09PSJiaW5hcnkiLCgpPT5gTWV0aG9kIG11c3QgYmUgYmluYXJ5IG9yIG90c3UsIGJ1dCB3YXMgJHtlfWApLHIuc2hhcGVbMl09PT0zKXtbaCxwLGZdPWVzKHIsWzEsMSwxXSwtMSk7Y29uc3QgYj1YKGgsbyksdj1YKHAsaSksUz1YKGYsYSk7Zz1tZShtZShiLHYpLFMpfWVsc2UgZz1uO2lmKGU9PT0ib3RzdSIpe2NvbnN0IGI9cmIoTmUoTmcoZyksImludDMyIiksZXIoW10pLDI1Nik7Yz1NTShiLGwpfWNvbnN0IHk9dD93aShnLGMpOmFzKGcsYyk7cmV0dXJuIE5lKFgoeSwyNTUpLCJpbnQzMiIpfWZ1bmN0aW9uIE1NKG4sZSl7bGV0IHQ9X24oWy0xXSkscz1fbihbMF0pLHI9X24oWzBdKSxvLGksYSxsLGMsaDtmb3IobGV0IHA9MDtwPG4uc2l6ZS0xO3ArKyl7bz1zdChuLDAscCsxKSxpPXN0KG4scCsxKSxjPU9lKFJlKG8pLGUpLGg9T2UoUmUoaSksZSk7Y29uc3QgZj1SZShYKG8saGEoMCxvLnNpemUpKSk7YT1PZShmLFJlKG8pKTtjb25zdCBnPU5hKGkuc2hhcGUsby5zaXplKSx5PW1lKGhhKDAsaS5zaXplKSxnKSx3PVgoaSx5KTtsPU9lKFJlKHcpLFJlKGkpKTtjb25zdCBiPUllKGEsbCksdj1JZShhLGwpLFM9WChjLGgpO3I9WChYKFMsYiksdik7Y29uc3QgJD1hcyhyLHMpO3M9dm4oJCxyLHMpLHQ9dm4oJCxfbihbcF0pLHQpfXJldHVybiB0fWNvbnN0IEJNPUcoe3RocmVzaG9sZF86ek19KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBWTShuLGUsdD0ibmVhcmVzdCIscz0iY29uc3RhbnQiLHI9MCxvKXtjb25zdCBpPU8obiwiaW1hZ2UiLCJ0cmFuc2Zvcm0iLCJmbG9hdDMyIiksYT1PKGUsInRyYW5zZm9ybXMiLCJ0cmFuc2Zvcm0iLCJmbG9hdDMyIik7QShpLnJhbms9PT00LCgpPT5gRXJyb3IgaW4gdHJhbnNmb3JtOiBpbWFnZSBtdXN0IGJlIHJhbmsgNCxidXQgZ290IHJhbmsgJHtpLnJhbmt9LmApLEEoYS5yYW5rPT09MiYmKGEuc2hhcGVbMF09PT1pLnNoYXBlWzBdfHxhLnNoYXBlWzBdPT09MSkmJmEuc2hhcGVbMV09PT04LCgpPT4iRXJyb3IgaW4gdHJhbnNmb3JtOiBJbnB1dCB0cmFuc2Zvcm0gc2hvdWxkIGJlIGJhdGNoIHggOCBvciAxIHggOCIpLEEobz09bnVsbHx8by5sZW5ndGg9PT0yLCgpPT5gRXJyb3IgaW4gdHJhbnNmb3JtOiBvdXRwdXRTaGFwZSBtdXN0IGJlIFtoZWlnaHQsIHdpZHRoXSBvciBudWxsLCBidXQgZ290ICR7b30uYCk7Y29uc3QgbD17aW1hZ2U6aSx0cmFuc2Zvcm1zOmF9LGM9e2ludGVycG9sYXRpb246dCxmaWxsTW9kZTpzLGZpbGxWYWx1ZTpyLG91dHB1dFNoYXBlOm99O3JldHVybiBqLnJ1bktlcm5lbChzZyxsLGMpfWNvbnN0IFdNPUcoe3RyYW5zZm9ybV86Vk19KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBVTShuLGUsdCl7Y29uc3Qgcz1PKG4sImEiLCJiYW5kUGFydCIpO0Eocy5yYW5rPj0yLCgpPT5gYmFuZFBhcnQoKTogUmFuayBtdXN0IGJlIGF0IGxlYXN0IDIsIGdvdCAke3MucmFua30uYCk7Y29uc3Qgcj1zLnNoYXBlLFtvLGldPXMuc2hhcGUuc2xpY2UoLTIpO2xldCBhLGw7dHlwZW9mIGU9PSJudW1iZXIiPyhBKGUlMT09PTAsKCk9PmBiYW5kUGFydCgpOiBudW1Mb3dlciBtdXN0IGJlIGFuIGludGVnZXIsIGdvdCAke2V9LmApLEEoZTw9bywoKT0+YGJhbmRQYXJ0KCk6IG51bUxvd2VyICgke2V9KSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gdGhlIG51bWJlciBvZiByb3dzICgke299KS5gKSxhPU8oZTwwP286ZSwibnVtTG93ZXIiLCJiYW5kUGFydCIpKTooQShlLmR0eXBlPT09ImludDMyIiwoKT0+ImJhbmRQYXJ0KCk6IG51bUxvd2VyJ3MgZHR5cGUgbXVzdCBiZSBhbiBpbnQzMi4iKSxhPXZuKGdsKGUsMCksbyxjaShlLG8pKSksdHlwZW9mIHQ9PSJudW1iZXIiPyhBKHQlMT09PTAsKCk9PmBiYW5kUGFydCgpOiBudW1VcHBlciBtdXN0IGJlIGFuIGludGVnZXIsIGdvdCAke3R9LmApLEEodDw9aSwoKT0+YGJhbmRQYXJ0KCk6IG51bVVwcGVyICgke3R9KSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gdGhlIG51bWJlciBvZiBjb2x1bW5zICgke2l9KS5gKSxsPU8odDwwP2k6dCwibnVtVXBwZXIiLCJiYW5kUGFydCIpKTooQSh0LmR0eXBlPT09ImludDMyIiwoKT0+ImJhbmRQYXJ0KCk6IG51bVVwcGVyJ3MgZHR5cGUgbXVzdCBiZSBhbiBpbnQzMi4iKSxsPXZuKGdsKHQsMCksaSxjaSh0LGkpKSk7Y29uc3QgYz1KKGhhKDAsbywxLCJpbnQzMiIpLFstMSwxXSksaD1oYSgwLGksMSwiaW50MzIiKSxwPUllKGMsaCksZj1Tcih3aShwLGEpLENvKHAsTnQobCkpKSxnPVl0KFtvLGldLHMuZHR5cGUpO3JldHVybiBKKG9zKHpzKEoocyxbLTEsbyxpXSkpLm1hcCh5PT52bihmLHksZykpKSxyKX1jb25zdCBqTT1HKHtiYW5kUGFydF86VU19KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBHTShuKXtsZXQgZTtpZihBcnJheS5pc0FycmF5KG4pKXtlPSExLEEobiE9bnVsbCYmbi5sZW5ndGg+MCwoKT0+IkdyYW0tU2NobWlkdCBwcm9jZXNzOiBpbnB1dCBtdXN0IG5vdCBiZSBudWxsLCB1bmRlZmluZWQsIG9yIGVtcHR5Iik7Y29uc3Qgcj1uWzBdLnNoYXBlWzBdO2ZvcihsZXQgbz0xO288bi5sZW5ndGg7KytvKUEobltvXS5zaGFwZVswXT09PXIsKCk9PmBHcmFtLVNjaG1pZHQ6IE5vbi11bmlxdWUgbGVuZ3RocyBmb3VuZCBpbiB0aGUgaW5wdXQgdmVjdG9yczogKCR7bltvXS5zaGFwZVswXX0gdnMuICR7cn0pYCl9ZWxzZSBlPSEwLG49ZXMobixuLnNoYXBlWzBdLDApLm1hcChyPT5TaShyLFswXSkpO0Eobi5sZW5ndGg8PW5bMF0uc2hhcGVbMF0sKCk9PmBHcmFtLVNjaG1pZHQ6IE51bWJlciBvZiB2ZWN0b3JzICgke24ubGVuZ3RofSkgZXhjZWVkcyBudW1iZXIgb2YgZGltZW5zaW9ucyAoJHtuWzBdLnNoYXBlWzBdfSkuYCk7Y29uc3QgdD1bXSxzPW47Zm9yKGxldCByPTA7cjxuLmxlbmd0aDsrK3IpdC5wdXNoKGoudGlkeSgoKT0+e2xldCBvPXNbcl07aWYocj4wKWZvcihsZXQgaT0wO2k8cjsrK2kpe2NvbnN0IGE9WChSZShYKHRbaV0sbykpLHRbaV0pO289SWUobyxhKX1yZXR1cm4gT2UobyxDdShvLCJldWNsaWRlYW4iKSl9KSk7cmV0dXJuIGU/b3ModCwwKTp0fWNvbnN0IEhNPUcoe2dyYW1TY2htaWR0XzpHTX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHFNKG4sZT0hMSl7aWYoQShuLnJhbms+PTIsKCk9PmBxcigpIHJlcXVpcmVzIGlucHV0IHRlbnNvciB0byBoYXZlIGEgcmFuayA+PSAyLCBidXQgZ290IHJhbmsgJHtuLnJhbmt9YCksbi5yYW5rPT09MilyZXR1cm4gUmsobixlKTt7Y29uc3QgdD1uLnNoYXBlLnNsaWNlKDAsbi5zaGFwZS5sZW5ndGgtMikucmVkdWNlKChsLGMpPT5sKmMpLHM9enMoSihuLFt0LG4uc2hhcGVbbi5zaGFwZS5sZW5ndGgtMl0sbi5zaGFwZVtuLnNoYXBlLmxlbmd0aC0xXV0pLDApLHI9W10sbz1bXTtzLmZvckVhY2gobD0+e2NvbnN0W2MsaF09UmsobCxlKTtyLnB1c2goYyksby5wdXNoKGgpfSk7Y29uc3QgaT1KKG9zKHIsMCksbi5zaGFwZSksYT1KKG9zKG8sMCksbi5zaGFwZSk7cmV0dXJuW2ksYV19fWZ1bmN0aW9uIFJrKG4sZT0hMSl7cmV0dXJuIGoudGlkeSgoKT0+e0Eobi5zaGFwZS5sZW5ndGg9PT0yLCgpPT5gcXIyZCgpIHJlcXVpcmVzIGEgMkQgVGVuc29yLCBidXQgZ290IGEgJHtuLnNoYXBlLmxlbmd0aH1EIFRlbnNvci5gKTtjb25zdCB0PW4uc2hhcGVbMF0scz1uLnNoYXBlWzFdO2xldCByPW1nKHQpLG89VnIobik7Y29uc3QgaT1jbChbWzFdXSxbMSwxXSk7bGV0IGE9VnIoaSk7Y29uc3QgbD10Pj1zP3M6dDtmb3IobGV0IGM9MDtjPGw7KytjKXtjb25zdCBoPW8scD1hLGY9cjtbYSxvLHJdPWoudGlkeSgoKT0+e2NvbnN0IGc9c3QobyxbYyxjXSxbdC1jLDFdKSx5PUN1KGcpLHc9c3QobyxbYyxjXSxbMSwxXSksYj12bihhcyh3LDApLGNsKFtbLTFdXSksY2woW1sxXV0pKSx2PUllKHcsWChiLHkpKSxTPU9lKGcsdik7Uy5zaGFwZVswXT09PTE/YT1WcihpKTphPVd0KFtpLHN0KFMsWzEsMF0sW1Muc2hhcGVbMF0tMSxTLnNoYXBlWzFdXSldLDApO2NvbnN0ICQ9TnQoT2UoWGUoYix2KSx5KSksaz1zdChvLFtjLDBdLFt0LWMsc10pLFQ9WCgkLGEpLEQ9dHQoYSk7aWYoYz09PTApbz1JZShrLFhlKFQsWGUoRCxrKSkpO2Vsc2V7Y29uc3QgRj1JZShrLFhlKFQsWGUoRCxrKSkpO289V3QoW3N0KG8sWzAsMF0sW2Msc10pLEZdLDApfWNvbnN0IEw9dHQoVCksej1zdChyLFswLGNdLFt0LHIuc2hhcGVbMV0tY10pO2lmKGM9PT0wKXI9SWUoeixYZShYZSh6LGEpLEwpKTtlbHNle2NvbnN0IEY9SWUoeixYZShYZSh6LGEpLEwpKTtyPVd0KFtzdChyLFswLDBdLFt0LGNdKSxGXSwxKX1yZXR1cm5bYSxvLHJdfSksWWUoW2gscCxmXSl9cmV0dXJuIWUmJnQ+cyYmKHI9c3QocixbMCwwXSxbdCxzXSksbz1zdChvLFswLDBdLFtzLHNdKSksW3Isb119KX1jb25zdCBLTT1HKHtxcl86cU19KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi92YXIgam47KGZ1bmN0aW9uKG4pe25bbi5OT05FPTBdPSJOT05FIixuW24uTUVBTj0xXT0iTUVBTiIsbltuLlNVTT0yXT0iU1VNIixuW24uU1VNX0JZX05PTlpFUk9fV0VJR0hUUz0zXT0iU1VNX0JZX05PTlpFUk9fV0VJR0hUUyJ9KShqbnx8KGpuPXt9KSk7ZnVuY3Rpb24gWE0obixlLHQ9am4uU1VNX0JZX05PTlpFUk9fV0VJR0hUUyl7Y29uc3Qgcz1PKG4sImxvc3NlcyIsImNvbXB1dGVXZWlnaHRlZExvc3MiKTtsZXQgcj1udWxsO2UhPW51bGwmJihyPU8oZSwid2VpZ2h0cyIsImNvbXB1dGVXZWlnaHRlZExvc3MiKSk7Y29uc3Qgbz1yPT1udWxsP3M6WChzLHIpO2lmKHQ9PT1qbi5OT05FKXJldHVybiBvO2lmKHQ9PT1qbi5TVU0pcmV0dXJuIFJlKG8pO2lmKHQ9PT1qbi5NRUFOKXtpZihyPT1udWxsKXJldHVybiBfdChvKTt7Y29uc3QgaT1zLnNpemUvci5zaXplLGE9T2UoUmUobyksUmUocikpO3JldHVybiBpPjE/T2UoYSxNZShpKSk6YX19aWYodD09PWpuLlNVTV9CWV9OT05aRVJPX1dFSUdIVFMpe2lmKHI9PW51bGwpcmV0dXJuIE9lKFJlKG8pLE1lKHMuc2l6ZSkpO3tjb25zdCBpPVgocixKbihzLnNoYXBlKSksYT1OZShSZShkYShpLE1lKDApKSksImZsb2F0MzIiKTtyZXR1cm4gT2UoUmUobyksYSl9fXRocm93IEVycm9yKGBVbmtub3duIHJlZHVjdGlvbjogJHt0fWApfWNvbnN0IElvPUcoe2NvbXB1dGVXZWlnaHRlZExvc3NfOlhNfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWU0obixlLHQscz1qbi5TVU1fQllfTk9OWkVST19XRUlHSFRTKXtjb25zdCByPU8obiwibGFiZWxzIiwiYWJzb2x1dGVEaWZmZXJlbmNlIiksbz1PKGUsInByZWRpY3Rpb25zIiwiYWJzb2x1dGVEaWZmZXJlbmNlIik7bGV0IGk9bnVsbDt0IT1udWxsJiYoaT1PKHQsIndlaWdodHMiLCJhYnNvbHV0ZURpZmZlcmVuY2UiKSksTm4oci5zaGFwZSxvLnNoYXBlLCJFcnJvciBpbiBhYnNvbHV0ZURpZmZlcmVuY2U6ICIpO2NvbnN0IGE9WHQoSWUocixvKSk7cmV0dXJuIElvKGEsaSxzKX1jb25zdCBRTT1HKHthYnNvbHV0ZURpZmZlcmVuY2VfOllNfSk7ZnVuY3Rpb24gWk0obixlLHQscyxyPWpuLlNVTV9CWV9OT05aRVJPX1dFSUdIVFMpe2NvbnN0IG89TyhuLCJsYWJlbHMiLCJjb3NpbmVEaXN0YW5jZSIpLGk9TyhlLCJwcmVkaWN0aW9ucyIsImNvc2luZURpc3RhbmNlIik7bGV0IGE9bnVsbDtzIT1udWxsJiYoYT1PKHMsIndlaWdodHMiLCJjb3NpbmVEaXN0YW5jZSIpKSxObihvLnNoYXBlLGkuc2hhcGUsIkVycm9yIGluIGNvc2luZURpc3RhbmNlOiAiKTtjb25zdCBsPU1lKDEpLGM9SWUobCxSZShYKG8saSksdCwhMCkpO3JldHVybiBJbyhjLGEscil9Y29uc3QgSk09Ryh7Y29zaW5lRGlzdGFuY2VfOlpNfSk7ZnVuY3Rpb24gZUIobixlLHQscz1qbi5TVU1fQllfTk9OWkVST19XRUlHSFRTKXtsZXQgcj1PKG4sImxhYmVscyIsImhpbmdlTG9zcyIpO2NvbnN0IG89TyhlLCJwcmVkaWN0aW9ucyIsImhpbmdlTG9zcyIpO2xldCBpPW51bGw7dCE9bnVsbCYmKGk9Tyh0LCJ3ZWlnaHRzIiwiaGluZ2VMb3NzIikpLE5uKHIuc2hhcGUsby5zaGFwZSwiRXJyb3IgaW4gaGluZ2VMb3NzOiAiKTtjb25zdCBhPU1lKDEpO3I9SWUoWChNZSgyKSxyKSxhKTtjb25zdCBsPUlyKEllKGEsWChyLG8pKSk7cmV0dXJuIElvKGwsaSxzKX1jb25zdCB0Qj1HKHtoaW5nZUxvc3NfOmVCfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gbkIobixlLHQscz0xLHI9am4uU1VNX0JZX05PTlpFUk9fV0VJR0hUUyl7Y29uc3Qgbz1PKG4sImxhYmVscyIsImh1YmVyTG9zcyIpLGk9TyhlLCJwcmVkaWN0aW9ucyIsImh1YmVyTG9zcyIpO2xldCBhPW51bGw7dCE9bnVsbCYmKGE9Tyh0LCJ3ZWlnaHRzIiwiaHViZXJMb3NzIikpLE5uKG8uc2hhcGUsaS5zaGFwZSwiRXJyb3IgaW4gaHViZXJMb3NzOiAiKTtjb25zdCBsPU1lKHMpLGM9WHQoSWUoaSxvKSksaD1jaShjLGwpLHA9SWUoYyxoKSxmPW1lKFgoTWUoLjUpLHl0KGgpKSxYKGwscCkpO3JldHVybiBJbyhmLGEscil9Y29uc3Qgc0I9Ryh7aHViZXJMb3NzXzpuQn0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHJCKG4sZSx0LHM9MWUtNyxyPWpuLlNVTV9CWV9OT05aRVJPX1dFSUdIVFMpe2NvbnN0IG89TyhuLCJsYWJlbHMiLCJsb2dMb3NzIiksaT1PKGUsInByZWRpY3Rpb25zIiwibG9nTG9zcyIpO2xldCBhPW51bGw7dCE9bnVsbCYmKGE9Tyh0LCJ3ZWlnaHRzIiwibG9nTG9zcyIpKSxObihvLnNoYXBlLGkuc2hhcGUsIkVycm9yIGluIGxvZ0xvc3M6ICIpO2NvbnN0IGw9TWUoMSksYz1NZShzKSxoPU50KFgobyx3cyhtZShpLGMpKSkpLHA9WChJZShsLG8pLHdzKG1lKEllKGwsaSksYykpKSxmPUllKGgscCk7cmV0dXJuIElvKGYsYSxyKX1jb25zdCBvQj1HKHtsb2dMb3NzXzpyQn0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGlCKG4sZSx0LHM9am4uU1VNX0JZX05PTlpFUk9fV0VJR0hUUyl7Y29uc3Qgcj1PKG4sImxhYmVscyIsIm1lYW5TcXVhcmVkRXJyb3IiKSxvPU8oZSwicHJlZGljdGlvbnMiLCJtZWFuU3F1YXJlZEVycm9yIik7bGV0IGk9bnVsbDt0IT1udWxsJiYoaT1PKHQsIndlaWdodHMiLCJtZWFuU3F1YXJlZEVycm9yIikpLE5uKHIuc2hhcGUsby5zaGFwZSwiRXJyb3IgaW4gbWVhblNxdWFyZWRFcnJvcjogIik7Y29uc3QgYT1EZyhyLG8pO3JldHVybiBJbyhhLGkscyl9Y29uc3QgYUI9Ryh7bWVhblNxdWFyZWRFcnJvcl86aUJ9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBsQihuLGUpe2NvbnN0IHQ9TyhuLCJsYWJlbHMiLCJzaWdtb2lkQ3Jvc3NFbnRyb3B5V2l0aExvZ2l0cyIpLHM9TyhlLCJsb2dpdHMiLCJzaWdtb2lkQ3Jvc3NFbnRyb3B5V2l0aExvZ2l0cyIpO05uKHQuc2hhcGUscy5zaGFwZSwiRXJyb3IgaW4gc2lnbW9pZENyb3NzRW50cm9weVdpdGhMb2dpdHM6ICIpO2NvbnN0IHI9SXIocyksbz1YKHMsdCksaT1jaChycyhOdChYdChzKSkpKTtyZXR1cm4gbWUoSWUocixvKSxpKX1mdW5jdGlvbiB1QihuLGUsdCxzPTAscj1qbi5TVU1fQllfTk9OWkVST19XRUlHSFRTKXtsZXQgbz1PKG4sIm11bHRpQ2xhc3NMYWJlbHMiLCJzaWdtb2lkQ3Jvc3NFbnRyb3B5Iik7Y29uc3QgaT1PKGUsImxvZ2l0cyIsInNpZ21vaWRDcm9zc0VudHJvcHkiKTtsZXQgYT1udWxsO2lmKHQhPW51bGwmJihhPU8odCwid2VpZ2h0cyIsInNpZ21vaWRDcm9zc0VudHJvcHkiKSksTm4oby5zaGFwZSxpLnNoYXBlLCJFcnJvciBpbiBzaWdtb2lkQ3Jvc3NFbnRyb3B5OiAiKSxzPjApe2NvbnN0IGM9TWUocyksaD1NZSgxKSxwPU1lKC41KTtvPW1lKFgobyxJZShoLGMpKSxYKHAsYykpfWNvbnN0IGw9bEIobyxpKTtyZXR1cm4gSW8obCxhLHIpfWNvbnN0IGNCPUcoe3NpZ21vaWRDcm9zc0VudHJvcHlfOnVCfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZEIobixlLHQ9LTEpe2lmKHQ9PT0tMSYmKHQ9ZS5yYW5rLTEpLHQhPT1lLnJhbmstMSl0aHJvdyBFcnJvcihgU29mdG1heCBjcm9zcyBlbnRyb3B5IGFsb25nIGEgbm9uLWxhc3QgZGltZW5zaW9uIGlzIG5vdCB5ZXQgc3VwcG9ydGVkLiBMYWJlbHMgLyBsb2dpdHMgd2FzIHJhbmsgJHtlLnJhbmt9IGFuZCBkaW0gd2FzICR7dH1gKTtyZXR1cm4gS3IoKHIsbyxpKT0+e2NvbnN0IGw9ZGgobyxbdF0sITApLGM9SWUoTmUobywiZmxvYXQzMiIpLGwpO2koW3IsY10pO2NvbnN0IGg9TnQoWChjLHIpKTtyZXR1cm57dmFsdWU6UmUoaCxbdF0pLGdyYWRGdW5jOihnLHkpPT57Y29uc3RbdyxiXT15LHY9VXQoZy5zaGFwZSxbdF0pO3JldHVybltYKEooZyx2KSxJZShOZSh3LCJmbG9hdDMyIikscnMoYikpKSxYKEooZyx2KSxJZShycyhiKSxOZSh3LCJmbG9hdDMyIikpKV19fX0pKG4sZSl9ZnVuY3Rpb24gaEIobixlLHQscz0wLHI9am4uU1VNX0JZX05PTlpFUk9fV0VJR0hUUyl7bGV0IG89TyhuLCJvbmVob3RMYWJlbHMiLCJzb2Z0bWF4Q3Jvc3NFbnRyb3B5Iik7Y29uc3QgaT1PKGUsImxvZ2l0cyIsInNvZnRtYXhDcm9zc0VudHJvcHkiKTtsZXQgYT1udWxsO2lmKHQhPW51bGwmJihhPU8odCwid2VpZ2h0cyIsInNvZnRtYXhDcm9zc0VudHJvcHkiKSksTm4oby5zaGFwZSxpLnNoYXBlLCJFcnJvciBpbiBzb2Z0bWF4Q3Jvc3NFbnRyb3B5OiAiKSxzPjApe2NvbnN0IGM9TWUocyksaD1NZSgxKSxwPU1lKG8uc2hhcGVbMV0pO289bWUoWChvLEllKGgsYykpLE9lKGMscCkpfWNvbnN0IGw9ZEIobyxpKTtyZXR1cm4gSW8obCxhLHIpfWNvbnN0IHBCPUcoe3NvZnRtYXhDcm9zc0VudHJvcHlfOmhCfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZkIobixlLHQscyl7Y29uc3Qgcj1PKG4sImluZGljZXMiLCJzcGFyc2VGaWxsRW1wdHlSb3dzIiwiaW50MzIiKSxvPU8oZSwidmFsdWVzIiwic3BhcnNlRmlsbEVtcHR5Um93cyIpLGk9Tyh0LCJkZW5zZVNoYXBlIiwic3BhcnNlRmlsbEVtcHR5Um93cyIsImludDMyIiksYT1PKHMsImRlZmF1bHRWYWx1ZSIsInNwYXJzZUZpbGxFbXB0eVJvd3MiLG8uZHR5cGUpO2lmKHIucmFuayE9PTIpdGhyb3cgbmV3IEVycm9yKGBJbmRpY2VzIHNob3VsZCBiZSBUZW5zb3IyRCBidXQgcmVjZWl2ZWQgc2hhcGUKICAgICAgICAke3Iuc2hhcGV9YCk7aWYoby5yYW5rIT09MSl0aHJvdyBuZXcgRXJyb3IoYFZhbHVlcyBzaG91bGQgYmUgVGVuc29yMUQgYnV0IHJlY2VpdmVkIHNoYXBlICR7by5zaGFwZX1gKTtpZihpLnJhbmshPT0xKXRocm93IG5ldyBFcnJvcihgRGVuc2Ugc2hhcGUgc2hvdWxkIGJlIFRlbnNvcjFEIGJ1dCByZWNlaXZlZCBzaGFwZSAke2kuc2hhcGV9YCk7aWYoYS5yYW5rIT09MCl0aHJvdyBuZXcgRXJyb3IoYERlZmF1bHQgdmFsdWUgc2hvdWxkIGJlIGEgc2NhbGFyIGJ1dCByZWNlaXZlZCBzaGFwZSAke2Euc2hhcGV9YCk7Y29uc3QgbD17aW5kaWNlczpyLHZhbHVlczpvLGRlbnNlU2hhcGU6aSxkZWZhdWx0VmFsdWU6YX0sYz1qLnJ1bktlcm5lbChIbSxsKTtyZXR1cm57b3V0cHV0SW5kaWNlczpjWzBdLG91dHB1dFZhbHVlczpjWzFdLGVtcHR5Um93SW5kaWNhdG9yOmNbMl0scmV2ZXJzZUluZGV4TWFwOmNbM119fWNvbnN0IG1CPUcoe3NwYXJzZUZpbGxFbXB0eVJvd3NfOmZCfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZ0IobixlLHQpe2NvbnN0IHM9TyhuLCJpbnB1dEluZGljZXMiLCJzcGFyc2VSZXNoYXBlIiwiaW50MzIiKSxyPU8oZSwiaW5wdXRTaGFwZSIsInNwYXJzZVJlc2hhcGUiLCJpbnQzMiIpLG89Tyh0LCJuZXdTaGFwZSIsInNwYXJzZVJlc2hhcGUiLCJpbnQzMiIpO2lmKHMucmFuayE9PTIpdGhyb3cgbmV3IEVycm9yKGBJbnB1dCBpbmRpY2VzIHNob3VsZCBiZSBUZW5zb3IyRCBidXQgcmVjZWl2ZWQgc2hhcGUKICAgICAgICAke3Muc2hhcGV9YCk7aWYoci5yYW5rIT09MSl0aHJvdyBuZXcgRXJyb3IoYElucHV0IHNoYXBlIHNob3VsZCBiZSBUZW5zb3IxRCBidXQgcmVjZWl2ZWQgc2hhcGUgJHtyLnNoYXBlfWApO2lmKG8ucmFuayE9PTEpdGhyb3cgbmV3IEVycm9yKGBOZXcgc2hhcGUgc2hvdWxkIGJlIFRlbnNvcjFEIGJ1dCByZWNlaXZlZCBzaGFwZSAke28uc2hhcGV9YCk7Y29uc3QgaT17aW5wdXRJbmRpY2VzOnMsaW5wdXRTaGFwZTpyLG5ld1NoYXBlOm99LGE9ai5ydW5LZXJuZWwocW0saSk7cmV0dXJue291dHB1dEluZGljZXM6YVswXSxvdXRwdXRTaGFwZTphWzFdfX1jb25zdCB5Qj1HKHtzcGFyc2VSZXNoYXBlXzpnQn0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHhCKG4sZSx0KXtjb25zdCBzPU8obiwiZGF0YSIsInNwYXJzZVNlZ21lbnRNZWFuIikscj1PKGUsImluZGljZXMiLCJzcGFyc2VTZWdtZW50TWVhbiIsImludDMyIiksbz1PKHQsInNlZ21lbnRJZHMiLCJzcGFyc2VTZWdtZW50TWVhbiIsImludDMyIik7aWYocy5yYW5rPDEpdGhyb3cgbmV3IEVycm9yKCJEYXRhIHNob3VsZCBiZSBhdCBsZWFzdCAxIGRpbWVuc2lvbmFsIGJ1dCByZWNlaXZlZCBzY2FsYXIiKTtpZihyLnJhbmshPT0xKXRocm93IG5ldyBFcnJvcihgSW5kaWNlcyBzaG91bGQgYmUgVGVuc29yMUQgYnV0IHJlY2VpdmVkIHNoYXBlCiAgICAgICAgICAke3Iuc2hhcGV9YCk7aWYoby5yYW5rIT09MSl0aHJvdyBuZXcgRXJyb3IoYFNlZ21lbnQgaWRzIHNob3VsZCBiZSBUZW5zb3IxRCBidXQgcmVjZWl2ZWQgc2hhcGUKICAgICAgICAgICR7by5zaGFwZX1gKTtjb25zdCBpPXtkYXRhOnMsaW5kaWNlczpyLHNlZ21lbnRJZHM6b307cmV0dXJuIGoucnVuS2VybmVsKEttLGkpfWNvbnN0IGJCPUcoe3NwYXJzZVNlZ21lbnRNZWFuXzp4Qn0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHdCKG4sZSx0KXtjb25zdCBzPU8obiwiZGF0YSIsInNwYXJzZVNlZ21lbnRTdW0iKSxyPU8oZSwiaW5kaWNlcyIsInNwYXJzZVNlZ21lbnRTdW0iLCJpbnQzMiIpLG89Tyh0LCJzZWdtZW50SWRzIiwic3BhcnNlU2VnbWVudFN1bSIsImludDMyIik7aWYocy5yYW5rPDEpdGhyb3cgbmV3IEVycm9yKCJEYXRhIHNob3VsZCBiZSBhdCBsZWFzdCAxIGRpbWVuc2lvbmFsIGJ1dCByZWNlaXZlZCBzY2FsYXIiKTtpZihyLnJhbmshPT0xKXRocm93IG5ldyBFcnJvcihgSW5kaWNlcyBzaG91bGQgYmUgVGVuc29yMUQgYnV0IHJlY2VpdmVkIHNoYXBlCiAgICAgICAgICR7ci5zaGFwZX1gKTtpZihvLnJhbmshPT0xKXRocm93IG5ldyBFcnJvcihgU2VnbWVudCBpZHMgc2hvdWxkIGJlIFRlbnNvcjFEIGJ1dCByZWNlaXZlZCBzaGFwZQogICAgICAgICAke28uc2hhcGV9YCk7Y29uc3QgaT17ZGF0YTpzLGluZGljZXM6cixzZWdtZW50SWRzOm99O3JldHVybiBqLnJ1bktlcm5lbChYbSxpKX1jb25zdCB2Qj1HKHtzcGFyc2VTZWdtZW50U3VtXzp3Qn0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFNCKG4sZSx0LHMscixvLGksYSl7Y29uc3QgbD1PKG4sImRhdGEiLCJzdHJpbmdOR3JhbXMiLCJzdHJpbmciKTtpZihsLmR0eXBlIT09InN0cmluZyIpdGhyb3cgbmV3IEVycm9yKCJEYXRhIG11c3QgYmUgb2YgZGF0YXR5cGUgc3RyaW5nIik7aWYobC5zaGFwZS5sZW5ndGghPT0xKXRocm93IG5ldyBFcnJvcihgRGF0YSBtdXN0IGJlIGEgdmVjdG9yLCBzYXc6ICR7bC5zaGFwZX1gKTtjb25zdCBjPU8oZSwiZGF0YVNwbGl0cyIsInN0cmluZ05HcmFtcyIpO2lmKGMuZHR5cGUhPT0iaW50MzIiKXRocm93IG5ldyBFcnJvcigiRGF0YSBzcGxpdHMgbXVzdCBiZSBvZiBkYXRhdHlwZSBpbnQzMiIpO2NvbnN0IGg9e3NlcGFyYXRvcjp0LG5HcmFtV2lkdGhzOnMsbGVmdFBhZDpyLHJpZ2h0UGFkOm8scGFkV2lkdGg6aSxwcmVzZXJ2ZVNob3J0U2VxdWVuY2VzOmF9LHA9e2RhdGE6bCxkYXRhU3BsaXRzOmN9LGY9ai5ydW5LZXJuZWwoSm0scCxoKTtyZXR1cm57bkdyYW1zOmZbMF0sbkdyYW1zU3BsaXRzOmZbMV19fWNvbnN0IE5CPUcoe3N0cmluZ05HcmFtc186U0J9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBrQihuLGUsdD0hMCl7Y29uc3Qgcz1PKG4sImlucHV0Iiwic3RyaW5nU3BsaXQiLCJzdHJpbmciKSxyPU8oZSwiZGVsaW1pdGVyIiwic3RyaW5nU3BsaXQiLCJzdHJpbmciKTtpZihzLnJhbmshPT0xKXRocm93IG5ldyBFcnJvcihgSW5wdXQgc2hvdWxkIGJlIFRlbnNvcjFEIGJ1dCByZWNlaXZlZCBzaGFwZSAke3Muc2hhcGV9YCk7aWYoci5yYW5rIT09MCl0aHJvdyBuZXcgRXJyb3IoYERlbGltaXRlciBzaG91bGQgYmUgYSBzY2FsYXIgYnV0IHJlY2VpdmVkIHNoYXBlICR7ci5zaGFwZX1gKTtjb25zdCBvPXtza2lwRW1wdHk6dH0saT17aW5wdXQ6cyxkZWxpbWl0ZXI6cn0sYT1qLnJ1bktlcm5lbChlZyxpLG8pO3JldHVybntpbmRpY2VzOmFbMF0sdmFsdWVzOmFbMV0sc2hhcGU6YVsyXX19Y29uc3QgQ0I9Ryh7c3RyaW5nU3BsaXRfOmtCfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gJEIobixlKXtjb25zdCB0PU8obiwiaW5wdXQiLCJzdHJpbmdUb0hhc2hCdWNrZXRGYXN0Iiwic3RyaW5nIikscz17bnVtQnVja2V0czplfTtpZihlPD0wKXRocm93IG5ldyBFcnJvcigiTnVtYmVyIG9mIGJ1Y2tldHMgbXVzdCBiZSBhdCBsZWFzdCAxIik7Y29uc3Qgcj17aW5wdXQ6dH07cmV0dXJuIGoucnVuS2VybmVsKHRnLHIscyl9Y29uc3QgSUI9Ryh7c3RyaW5nVG9IYXNoQnVja2V0RmFzdF86JEJ9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBUQihuLGUsdCxzPSEwKXtjb25zdCByPU8obiwiaW5wdXQiLCJzdGF0aWNSZWdleFJlcGxhY2UiLCJzdHJpbmciKSxvPXtwYXR0ZXJuOmUscmV3cml0ZTp0LHJlcGxhY2VHbG9iYWw6c307cmV0dXJuIGoucnVuS2VybmVsKFpkLHt4OnJ9LG8pfWNvbnN0IEVCPUcoe3N0YXRpY1JlZ2V4UmVwbGFjZV86VEJ9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBVST17ZmZ0OndoLGlmZnQ6d2wscmZmdDp2aCxpcmZmdDpSZ30sakk9e2hhbW1pbmdXaW5kb3c6c00saGFubldpbmRvdzpNSSxmcmFtZTpCSSxzdGZ0OmFNfSx4cj17ZmxpcExlZnRSaWdodDpkTSxncmF5c2NhbGVUb1JHQjpwTSxyZXNpemVOZWFyZXN0TmVpZ2hib3I6V0kscmVzaXplQmlsaW5lYXI6VkkscmdiVG9HcmF5c2NhbGU6bU0scm90YXRlV2l0aE9mZnNldDp5TSxjcm9wQW5kUmVzaXplOnVNLG5vbk1heFN1cHByZXNzaW9uOmJNLG5vbk1heFN1cHByZXNzaW9uQXN5bmM6SU0sbm9uTWF4U3VwcHJlc3Npb25XaXRoU2NvcmU6RU0sbm9uTWF4U3VwcHJlc3Npb25XaXRoU2NvcmVBc3luYzpETSxub25NYXhTdXBwcmVzc2lvblBhZGRlZDpfTSxub25NYXhTdXBwcmVzc2lvblBhZGRlZEFzeW5jOkZNLHRocmVzaG9sZDpCTSx0cmFuc2Zvcm06V019LEtiPXtiYW5kUGFydDpqTSxncmFtU2NobWlkdDpITSxxcjpLTX0sR0k9e2Fic29sdXRlRGlmZmVyZW5jZTpRTSxjb21wdXRlV2VpZ2h0ZWRMb3NzOklvLGNvc2luZURpc3RhbmNlOkpNLGhpbmdlTG9zczp0QixodWJlckxvc3M6c0IsbG9nTG9zczpvQixtZWFuU3F1YXJlZEVycm9yOmFCLHNpZ21vaWRDcm9zc0VudHJvcHk6Y0Isc29mdG1heENyb3NzRW50cm9weTpwQn0sSEk9e3NwYXJzZUZpbGxFbXB0eVJvd3M6bUIsc3BhcnNlUmVzaGFwZTp5QixzcGFyc2VTZWdtZW50TWVhbjpiQixzcGFyc2VTZWdtZW50U3VtOnZCfSxxST17c3RyaW5nTkdyYW1zOk5CLHN0cmluZ1NwbGl0OkNCLHN0cmluZ1RvSGFzaEJ1Y2tldEZhc3Q6SUIsc3RhdGljUmVnZXhSZXBsYWNlOkVCfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBSQj1uZXcgTWFwLEgwPW5ldyBNYXA7Y2xhc3MgJGF7Z2V0Q2xhc3NOYW1lKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IuY2xhc3NOYW1lfXN0YXRpYyBmcm9tQ29uZmlnKGUsdCl7cmV0dXJuIG5ldyBlKHQpfX1jbGFzcyBBc3tjb25zdHJ1Y3Rvcigpe3RoaXMuY2xhc3NOYW1lTWFwPXt9fXN0YXRpYyBnZXRNYXAoKXtyZXR1cm4gQXMuaW5zdGFuY2U9PW51bGwmJihBcy5pbnN0YW5jZT1uZXcgQXMpLEFzLmluc3RhbmNlfXN0YXRpYyByZWdpc3RlcihlKXtBcy5nZXRNYXAoKS5jbGFzc05hbWVNYXBbZS5jbGFzc05hbWVdPVtlLGUuZnJvbUNvbmZpZ119fWZ1bmN0aW9uIGdlKG4sZSx0KXtBKG4uY2xhc3NOYW1lIT1udWxsLCgpPT4iQ2xhc3MgYmVpbmcgcmVnaXN0ZXJlZCBkb2VzIG5vdCBoYXZlIHRoZSBzdGF0aWMgY2xhc3NOYW1lIHByb3BlcnR5IGRlZmluZWQuIiksQSh0eXBlb2Ygbi5jbGFzc05hbWU9PSJzdHJpbmciLCgpPT4iY2xhc3NOYW1lIGlzIHJlcXVpcmVkIHRvIGJlIGEgc3RyaW5nLCBidXQgZ290IHR5cGUgIit0eXBlb2Ygbi5jbGFzc05hbWUpLEEobi5jbGFzc05hbWUubGVuZ3RoPjAsKCk9PiJDbGFzcyBiZWluZyByZWdpc3RlcmVkIGhhcyBhbiBlbXB0eS1zdHJpbmcgYXMgaXRzIGNsYXNzTmFtZSwgd2hpY2ggaXMgZGlzYWxsb3dlZC4iKSx0eXBlb2YgZT4idSImJihlPSJDdXN0b20iKSx0eXBlb2YgdD4idSImJih0PW4uY2xhc3NOYW1lKTtjb25zdCBzPXQscj1lKyI+IitzO3JldHVybiBBcy5yZWdpc3RlcihuKSxSQi5zZXQocixuKSxIMC5zZXQobixyKSxufWZ1bmN0aW9uIERCKG4pe3JldHVybiBIMC5oYXMobik/SDAuZ2V0KG4pOm4uY2xhc3NOYW1lfWNvbnN0IEFCPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxTZXJpYWxpemFibGU6JGEsU2VyaWFsaXphdGlvbk1hcDpBcyxnZXRSZWdpc3RlcmVkTmFtZTpEQixyZWdpc3RlckNsYXNzOmdlfSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIFRvIGV4dGVuZHMgJGF7bWluaW1pemUoZSx0PSExLHMpe2NvbnN0e3ZhbHVlOnIsZ3JhZHM6b309dGhpcy5jb21wdXRlR3JhZGllbnRzKGUscyk7aWYocyE9bnVsbCl7Y29uc3QgaT1zLm1hcChhPT4oe25hbWU6YS5uYW1lLHRlbnNvcjpvW2EubmFtZV19KSk7dGhpcy5hcHBseUdyYWRpZW50cyhpKX1lbHNlIHRoaXMuYXBwbHlHcmFkaWVudHMobyk7cmV0dXJuIFllKG8pLHQ/cjooci5kaXNwb3NlKCksbnVsbCl9Z2V0IGl0ZXJhdGlvbnMoKXtyZXR1cm4gdGhpcy5pdGVyYXRpb25zXz09bnVsbCYmKHRoaXMuaXRlcmF0aW9uc189MCksdGhpcy5pdGVyYXRpb25zX31pbmNyZW1lbnRJdGVyYXRpb25zKCl7dGhpcy5pdGVyYXRpb25zXz10aGlzLml0ZXJhdGlvbnMrMX1jb21wdXRlR3JhZGllbnRzKGUsdCl7cmV0dXJuIEokKGUsdCl9ZGlzcG9zZSgpe3RoaXMuaXRlcmF0aW9uc18hPW51bGwmJlllKHRoaXMuaXRlcmF0aW9uc18pfWFzeW5jIHNhdmVJdGVyYXRpb25zKCl7cmV0dXJuIHRoaXMuaXRlcmF0aW9uc189PW51bGwmJih0aGlzLml0ZXJhdGlvbnNfPTApLHtuYW1lOiJpdGVyIix0ZW5zb3I6TWUodGhpcy5pdGVyYXRpb25zXywiaW50MzIiKX19YXN5bmMgZ2V0V2VpZ2h0cygpe3Rocm93IG5ldyBFcnJvcigiZ2V0V2VpZ2h0cygpIGlzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBvcHRpbWl6ZXIgeWV0LiIpfWFzeW5jIHNldFdlaWdodHMoZSl7dGhyb3cgbmV3IEVycm9yKGBzZXRXZWlnaHRzKCkgaXMgbm90IGltcGxlbWVudGVkIGZvciB0aGlzIG9wdGltaXplciBjbGFzcyAke3RoaXMuZ2V0Q2xhc3NOYW1lKCl9YCl9YXN5bmMgZXh0cmFjdEl0ZXJhdGlvbnMoZSl7cmV0dXJuIHRoaXMuaXRlcmF0aW9uc189KGF3YWl0IGVbMF0udGVuc29yLmRhdGEoKSlbMF0sZS5zbGljZSgxKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KFRvLFN5bWJvbC5oYXNJbnN0YW5jZSx7dmFsdWU6bj0+bi5taW5pbWl6ZSE9bnVsbCYmbi5jb21wdXRlR3JhZGllbnRzIT1udWxsJiZuLmFwcGx5R3JhZGllbnRzIT1udWxsfSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgWGIgZXh0ZW5kcyBUb3tzdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybiJBZGFkZWx0YSJ9Y29uc3RydWN0b3IoZSx0LHM9bnVsbCl7c3VwZXIoKSx0aGlzLmxlYXJuaW5nUmF0ZT1lLHRoaXMucmhvPXQsdGhpcy5lcHNpbG9uPXMsdGhpcy5hY2N1bXVsYXRlZEdyYWRzPVtdLHRoaXMuYWNjdW11bGF0ZWRVcGRhdGVzPVtdLHM9PW51bGwmJih0aGlzLmVwc2lsb249ai5iYWNrZW5kLmVwc2lsb24oKSl9YXBwbHlHcmFkaWVudHMoZSl7KEFycmF5LmlzQXJyYXkoZSk/ZS5tYXAocz0+cy5uYW1lKTpPYmplY3Qua2V5cyhlKSkuZm9yRWFjaCgocyxyKT0+e2NvbnN0IG89ai5yZWdpc3RlcmVkVmFyaWFibGVzW3NdLGk9ITE7dGhpcy5hY2N1bXVsYXRlZEdyYWRzW3JdPT1udWxsJiYodGhpcy5hY2N1bXVsYXRlZEdyYWRzW3JdPXtvcmlnaW5hbE5hbWU6YCR7c30vYWNjdW1fZ3JhZGAsdmFyaWFibGU6cmUoKCk9PnJ0KG8pLnZhcmlhYmxlKGkpKX0pLHRoaXMuYWNjdW11bGF0ZWRVcGRhdGVzW3JdPT1udWxsJiYodGhpcy5hY2N1bXVsYXRlZFVwZGF0ZXNbcl09e29yaWdpbmFsTmFtZTpgJHtzfS9hY2N1bV92YXJgLHZhcmlhYmxlOnJlKCgpPT5ydChvKS52YXJpYWJsZShpKSl9KTtjb25zdCBhPUFycmF5LmlzQXJyYXkoZSk/ZVtyXS50ZW5zb3I6ZVtzXTtpZihhPT1udWxsKXJldHVybjtjb25zdCBsPXRoaXMuYWNjdW11bGF0ZWRHcmFkc1tyXS52YXJpYWJsZSxjPXRoaXMuYWNjdW11bGF0ZWRVcGRhdGVzW3JdLnZhcmlhYmxlO3JlKCgpPT57Y29uc3QgaD1tZShYKGwsdGhpcy5yaG8pLFgoeXQoYSksMS10aGlzLnJobykpLHA9WChPZShwbihtZShjLHRoaXMuZXBzaWxvbikpLHBuKG1lKGwsdGhpcy5lcHNpbG9uKSkpLGEpLGY9bWUoWChjLHRoaXMucmhvKSxYKHl0KHApLDEtdGhpcy5yaG8pKTtsLmFzc2lnbihoKSxjLmFzc2lnbihmKTtjb25zdCBnPW1lKFgocCwtdGhpcy5sZWFybmluZ1JhdGUpLG8pO28uYXNzaWduKGcpfSl9KSx0aGlzLmluY3JlbWVudEl0ZXJhdGlvbnMoKX1kaXNwb3NlKCl7dGhpcy5hY2N1bXVsYXRlZFVwZGF0ZXMhPW51bGwmJihZZSh0aGlzLmFjY3VtdWxhdGVkR3JhZHMubWFwKGU9PmUudmFyaWFibGUpKSxZZSh0aGlzLmFjY3VtdWxhdGVkVXBkYXRlcy5tYXAoZT0+ZS52YXJpYWJsZSkpKX1hc3luYyBnZXRXZWlnaHRzKCl7Y29uc3QgZT1bLi4udGhpcy5hY2N1bXVsYXRlZEdyYWRzLC4uLnRoaXMuYWNjdW11bGF0ZWRVcGRhdGVzXTtyZXR1cm5bYXdhaXQgdGhpcy5zYXZlSXRlcmF0aW9ucygpXS5jb25jYXQoZS5tYXAodD0+KHtuYW1lOnQub3JpZ2luYWxOYW1lLHRlbnNvcjp0LnZhcmlhYmxlfSkpKX1hc3luYyBzZXRXZWlnaHRzKGUpe2U9YXdhaXQgdGhpcy5leHRyYWN0SXRlcmF0aW9ucyhlKTtjb25zdCB0PWUubGVuZ3RoLzIscz0hMTt0aGlzLmFjY3VtdWxhdGVkR3JhZHM9ZS5zbGljZSgwLHQpLm1hcChyPT4oe29yaWdpbmFsTmFtZTpyLm5hbWUsdmFyaWFibGU6ci50ZW5zb3IudmFyaWFibGUocyl9KSksdGhpcy5hY2N1bXVsYXRlZFVwZGF0ZXM9ZS5zbGljZSh0LHQqMikubWFwKHI9Pih7b3JpZ2luYWxOYW1lOnIubmFtZSx2YXJpYWJsZTpyLnRlbnNvci52YXJpYWJsZShzKX0pKX1nZXRDb25maWcoKXtyZXR1cm57bGVhcm5pbmdSYXRlOnRoaXMubGVhcm5pbmdSYXRlLHJobzp0aGlzLnJobyxlcHNpbG9uOnRoaXMuZXBzaWxvbn19c3RhdGljIGZyb21Db25maWcoZSx0KXtyZXR1cm4gbmV3IGUodC5sZWFybmluZ1JhdGUsdC5yaG8sdC5lcHNpbG9uKX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgWWIgZXh0ZW5kcyBUb3tzdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybiJBZGFncmFkIn1jb25zdHJ1Y3RvcihlLHQ9LjEpe3N1cGVyKCksdGhpcy5sZWFybmluZ1JhdGU9ZSx0aGlzLmluaXRpYWxBY2N1bXVsYXRvclZhbHVlPXQsdGhpcy5hY2N1bXVsYXRlZEdyYWRzPVtdfWFwcGx5R3JhZGllbnRzKGUpeyhBcnJheS5pc0FycmF5KGUpP2UubWFwKHM9PnMubmFtZSk6T2JqZWN0LmtleXMoZSkpLmZvckVhY2goKHMscik9Pntjb25zdCBvPWoucmVnaXN0ZXJlZFZhcmlhYmxlc1tzXTt0aGlzLmFjY3VtdWxhdGVkR3JhZHNbcl09PW51bGwmJih0aGlzLmFjY3VtdWxhdGVkR3JhZHNbcl09e29yaWdpbmFsTmFtZTpgJHtzfS9hY2N1bXVsYXRvcmAsdmFyaWFibGU6cmUoKCk9Pk5hKG8uc2hhcGUsdGhpcy5pbml0aWFsQWNjdW11bGF0b3JWYWx1ZSkudmFyaWFibGUoITEpKX0pO2NvbnN0IGk9QXJyYXkuaXNBcnJheShlKT9lW3JdLnRlbnNvcjplW3NdO2lmKGk9PW51bGwpcmV0dXJuO2NvbnN0IGE9dGhpcy5hY2N1bXVsYXRlZEdyYWRzW3JdLnZhcmlhYmxlO3JlKCgpPT57Y29uc3QgbD1tZShhLHl0KGkpKTthLmFzc2lnbihsKTtjb25zdCBjPW1lKFgoT2UoaSxwbihtZShsLGouYmFja2VuZC5lcHNpbG9uKCkpKSksLXRoaXMubGVhcm5pbmdSYXRlKSxvKTtvLmFzc2lnbihjKX0pfSksdGhpcy5pbmNyZW1lbnRJdGVyYXRpb25zKCl9ZGlzcG9zZSgpe3RoaXMuYWNjdW11bGF0ZWRHcmFkcyE9bnVsbCYmWWUodGhpcy5hY2N1bXVsYXRlZEdyYWRzLm1hcChlPT5lLnZhcmlhYmxlKSl9YXN5bmMgZ2V0V2VpZ2h0cygpe3JldHVyblthd2FpdCB0aGlzLnNhdmVJdGVyYXRpb25zKCldLmNvbmNhdCh0aGlzLmFjY3VtdWxhdGVkR3JhZHMubWFwKGU9Pih7bmFtZTplLm9yaWdpbmFsTmFtZSx0ZW5zb3I6ZS52YXJpYWJsZX0pKSl9YXN5bmMgc2V0V2VpZ2h0cyhlKXtlPWF3YWl0IHRoaXMuZXh0cmFjdEl0ZXJhdGlvbnMoZSk7Y29uc3QgdD0hMTt0aGlzLmFjY3VtdWxhdGVkR3JhZHM9ZS5tYXAocz0+KHtvcmlnaW5hbE5hbWU6cy5uYW1lLHZhcmlhYmxlOnMudGVuc29yLnZhcmlhYmxlKHQpfSkpfWdldENvbmZpZygpe3JldHVybntsZWFybmluZ1JhdGU6dGhpcy5sZWFybmluZ1JhdGUsaW5pdGlhbEFjY3VtdWxhdG9yVmFsdWU6dGhpcy5pbml0aWFsQWNjdW11bGF0b3JWYWx1ZX19c3RhdGljIGZyb21Db25maWcoZSx0KXtyZXR1cm4gbmV3IGUodC5sZWFybmluZ1JhdGUsdC5pbml0aWFsQWNjdW11bGF0b3JWYWx1ZSl9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIFFiIGV4dGVuZHMgVG97c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm4iQWRhbSJ9Y29uc3RydWN0b3IoZSx0LHMscj1udWxsKXtzdXBlcigpLHRoaXMubGVhcm5pbmdSYXRlPWUsdGhpcy5iZXRhMT10LHRoaXMuYmV0YTI9cyx0aGlzLmVwc2lsb249cix0aGlzLmFjY3VtdWxhdGVkRmlyc3RNb21lbnQ9W10sdGhpcy5hY2N1bXVsYXRlZFNlY29uZE1vbWVudD1bXSxyZSgoKT0+e3RoaXMuYWNjQmV0YTE9TWUodCkudmFyaWFibGUoKSx0aGlzLmFjY0JldGEyPU1lKHMpLnZhcmlhYmxlKCl9KSxyPT1udWxsJiYodGhpcy5lcHNpbG9uPWouYmFja2VuZC5lcHNpbG9uKCkpfWFwcGx5R3JhZGllbnRzKGUpe2NvbnN0IHQ9QXJyYXkuaXNBcnJheShlKT9lLm1hcChzPT5zLm5hbWUpOk9iamVjdC5rZXlzKGUpO3JlKCgpPT57Y29uc3Qgcz1JZSgxLHRoaXMuYWNjQmV0YTEpLHI9SWUoMSx0aGlzLmFjY0JldGEyKTt0LmZvckVhY2goKG8saSk9Pntjb25zdCBhPWoucmVnaXN0ZXJlZFZhcmlhYmxlc1tvXSxsPSExO3RoaXMuYWNjdW11bGF0ZWRGaXJzdE1vbWVudFtpXT09bnVsbCYmKHRoaXMuYWNjdW11bGF0ZWRGaXJzdE1vbWVudFtpXT17b3JpZ2luYWxOYW1lOmAke299L21gLHZhcmlhYmxlOnJlKCgpPT5ydChhKS52YXJpYWJsZShsKSl9KSx0aGlzLmFjY3VtdWxhdGVkU2Vjb25kTW9tZW50W2ldPT1udWxsJiYodGhpcy5hY2N1bXVsYXRlZFNlY29uZE1vbWVudFtpXT17b3JpZ2luYWxOYW1lOmAke299L3ZgLHZhcmlhYmxlOnJlKCgpPT5ydChhKS52YXJpYWJsZShsKSl9KTtjb25zdCBjPUFycmF5LmlzQXJyYXkoZSk/ZVtpXS50ZW5zb3I6ZVtvXTtpZihjPT1udWxsKXJldHVybjtjb25zdCBoPXRoaXMuYWNjdW11bGF0ZWRGaXJzdE1vbWVudFtpXS52YXJpYWJsZSxwPXRoaXMuYWNjdW11bGF0ZWRTZWNvbmRNb21lbnRbaV0udmFyaWFibGUsZj1tZShYKGgsdGhpcy5iZXRhMSksWChjLDEtdGhpcy5iZXRhMSkpLGc9bWUoWChwLHRoaXMuYmV0YTIpLFgoeXQoYyksMS10aGlzLmJldGEyKSkseT1PZShmLHMpLHc9T2UoZyxyKTtoLmFzc2lnbihmKSxwLmFzc2lnbihnKTtjb25zdCBiPW1lKFgoT2UoeSxtZShwbih3KSx0aGlzLmVwc2lsb24pKSwtdGhpcy5sZWFybmluZ1JhdGUpLGEpO2EuYXNzaWduKGIpfSksdGhpcy5hY2NCZXRhMS5hc3NpZ24oWCh0aGlzLmFjY0JldGExLHRoaXMuYmV0YTEpKSx0aGlzLmFjY0JldGEyLmFzc2lnbihYKHRoaXMuYWNjQmV0YTIsdGhpcy5iZXRhMikpfSksdGhpcy5pbmNyZW1lbnRJdGVyYXRpb25zKCl9ZGlzcG9zZSgpe3RoaXMuYWNjQmV0YTEuZGlzcG9zZSgpLHRoaXMuYWNjQmV0YTIuZGlzcG9zZSgpLHRoaXMuYWNjdW11bGF0ZWRGaXJzdE1vbWVudCE9bnVsbCYmWWUodGhpcy5hY2N1bXVsYXRlZEZpcnN0TW9tZW50Lm1hcChlPT5lLnZhcmlhYmxlKSksdGhpcy5hY2N1bXVsYXRlZFNlY29uZE1vbWVudCE9bnVsbCYmWWUodGhpcy5hY2N1bXVsYXRlZFNlY29uZE1vbWVudC5tYXAoZT0+ZS52YXJpYWJsZSkpfWFzeW5jIGdldFdlaWdodHMoKXtjb25zdCBlPVsuLi50aGlzLmFjY3VtdWxhdGVkRmlyc3RNb21lbnQsLi4udGhpcy5hY2N1bXVsYXRlZFNlY29uZE1vbWVudF07cmV0dXJuW2F3YWl0IHRoaXMuc2F2ZUl0ZXJhdGlvbnMoKV0uY29uY2F0KGUubWFwKHQ9Pih7bmFtZTp0Lm9yaWdpbmFsTmFtZSx0ZW5zb3I6dC52YXJpYWJsZX0pKSl9YXN5bmMgc2V0V2VpZ2h0cyhlKXtlPWF3YWl0IHRoaXMuZXh0cmFjdEl0ZXJhdGlvbnMoZSkscmUoKCk9Pnt0aGlzLmFjY0JldGExLmFzc2lnbihxcih0aGlzLmJldGExLHRoaXMuaXRlcmF0aW9uc18rMSkpLHRoaXMuYWNjQmV0YTIuYXNzaWduKHFyKHRoaXMuYmV0YTIsdGhpcy5pdGVyYXRpb25zXysxKSl9KTtjb25zdCB0PWUubGVuZ3RoLzIscz0hMTt0aGlzLmFjY3VtdWxhdGVkRmlyc3RNb21lbnQ9ZS5zbGljZSgwLHQpLm1hcChyPT4oe29yaWdpbmFsTmFtZTpyLm5hbWUsdmFyaWFibGU6ci50ZW5zb3IudmFyaWFibGUocyl9KSksdGhpcy5hY2N1bXVsYXRlZFNlY29uZE1vbWVudD1lLnNsaWNlKHQsdCoyKS5tYXAocj0+KHtvcmlnaW5hbE5hbWU6ci5uYW1lLHZhcmlhYmxlOnIudGVuc29yLnZhcmlhYmxlKHMpfSkpfWdldENvbmZpZygpe3JldHVybntsZWFybmluZ1JhdGU6dGhpcy5sZWFybmluZ1JhdGUsYmV0YTE6dGhpcy5iZXRhMSxiZXRhMjp0aGlzLmJldGEyLGVwc2lsb246dGhpcy5lcHNpbG9ufX1zdGF0aWMgZnJvbUNvbmZpZyhlLHQpe3JldHVybiBuZXcgZSh0LmxlYXJuaW5nUmF0ZSx0LmJldGExLHQuYmV0YTIsdC5lcHNpbG9uKX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgWmIgZXh0ZW5kcyBUb3tzdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybiJBZGFtYXgifWNvbnN0cnVjdG9yKGUsdCxzLHI9bnVsbCxvPTApe3N1cGVyKCksdGhpcy5sZWFybmluZ1JhdGU9ZSx0aGlzLmJldGExPXQsdGhpcy5iZXRhMj1zLHRoaXMuZXBzaWxvbj1yLHRoaXMuZGVjYXk9byx0aGlzLmFjY3VtdWxhdGVkRmlyc3RNb21lbnQ9W10sdGhpcy5hY2N1bXVsYXRlZFdlaWdodGVkSW5mTm9ybT1bXSxyZSgoKT0+e3RoaXMuaXRlcmF0aW9uPU1lKDApLnZhcmlhYmxlKCksdGhpcy5hY2NCZXRhMT1NZSh0KS52YXJpYWJsZSgpfSkscj09bnVsbCYmKHRoaXMuZXBzaWxvbj1qLmJhY2tlbmQuZXBzaWxvbigpKX1hcHBseUdyYWRpZW50cyhlKXtjb25zdCB0PUFycmF5LmlzQXJyYXkoZSk/ZS5tYXAocz0+cy5uYW1lKTpPYmplY3Qua2V5cyhlKTtyZSgoKT0+e2NvbnN0IHM9SWUoMSx0aGlzLmFjY0JldGExKSxyPU9lKC10aGlzLmxlYXJuaW5nUmF0ZSxtZShYKHRoaXMuaXRlcmF0aW9uLHRoaXMuZGVjYXkpLDEpKTt0LmZvckVhY2goKG8saSk9Pntjb25zdCBhPWoucmVnaXN0ZXJlZFZhcmlhYmxlc1tvXSxsPSExO3RoaXMuYWNjdW11bGF0ZWRGaXJzdE1vbWVudFtpXT09bnVsbCYmKHRoaXMuYWNjdW11bGF0ZWRGaXJzdE1vbWVudFtpXT17b3JpZ2luYWxOYW1lOmAke299L21gLHZhcmlhYmxlOnJ0KGEpLnZhcmlhYmxlKGwpfSksdGhpcy5hY2N1bXVsYXRlZFdlaWdodGVkSW5mTm9ybVtpXT09bnVsbCYmKHRoaXMuYWNjdW11bGF0ZWRXZWlnaHRlZEluZk5vcm1baV09e29yaWdpbmFsTmFtZTpgJHtvfS92YCx2YXJpYWJsZTpydChhKS52YXJpYWJsZShsKX0pO2NvbnN0IGM9QXJyYXkuaXNBcnJheShlKT9lW2ldLnRlbnNvcjplW29dO2lmKGM9PW51bGwpcmV0dXJuO2NvbnN0IGg9dGhpcy5hY2N1bXVsYXRlZEZpcnN0TW9tZW50W2ldLnZhcmlhYmxlLHA9dGhpcy5hY2N1bXVsYXRlZFdlaWdodGVkSW5mTm9ybVtpXS52YXJpYWJsZSxmPW1lKFgoaCx0aGlzLmJldGExKSxYKGMsMS10aGlzLmJldGExKSksZz1YKHAsdGhpcy5iZXRhMikseT1YdChjKSx3PVFyKGcseSk7aC5hc3NpZ24oZikscC5hc3NpZ24odyk7Y29uc3QgYj1tZShYKE9lKHIscyksT2UoZixtZSh3LHRoaXMuZXBzaWxvbikpKSxhKTthLmFzc2lnbihiKX0pLHRoaXMuaXRlcmF0aW9uLmFzc2lnbihtZSh0aGlzLml0ZXJhdGlvbiwxKSksdGhpcy5hY2NCZXRhMS5hc3NpZ24oWCh0aGlzLmFjY0JldGExLHRoaXMuYmV0YTEpKX0pLHRoaXMuaW5jcmVtZW50SXRlcmF0aW9ucygpfWRpc3Bvc2UoKXt0aGlzLmFjY0JldGExLmRpc3Bvc2UoKSx0aGlzLml0ZXJhdGlvbi5kaXNwb3NlKCksdGhpcy5hY2N1bXVsYXRlZEZpcnN0TW9tZW50IT1udWxsJiZZZSh0aGlzLmFjY3VtdWxhdGVkRmlyc3RNb21lbnQubWFwKGU9PmUudmFyaWFibGUpKSx0aGlzLmFjY3VtdWxhdGVkV2VpZ2h0ZWRJbmZOb3JtIT1udWxsJiZZZSh0aGlzLmFjY3VtdWxhdGVkV2VpZ2h0ZWRJbmZOb3JtLm1hcChlPT5lLnZhcmlhYmxlKSl9YXN5bmMgZ2V0V2VpZ2h0cygpe3Rocm93IG5ldyBFcnJvcigiZ2V0V2VpZ2h0cygpIGlzIG5vdCBpbXBsZW1lbnRlZCBmb3IgQWRhbWF4IHlldC4iKX1hc3luYyBzZXRXZWlnaHRzKGUpe3Rocm93IG5ldyBFcnJvcigic2V0V2VpZ2h0cygpIGlzIG5vdCBpbXBsZW1lbnRlZCBmb3IgQWRhbWF4IHlldC4iKX1nZXRDb25maWcoKXtyZXR1cm57bGVhcm5pbmdSYXRlOnRoaXMubGVhcm5pbmdSYXRlLGJldGExOnRoaXMuYmV0YTEsYmV0YTI6dGhpcy5iZXRhMixlcHNpbG9uOnRoaXMuZXBzaWxvbixkZWNheTp0aGlzLmRlY2F5fX1zdGF0aWMgZnJvbUNvbmZpZyhlLHQpe3JldHVybiBuZXcgZSh0LmxlYXJuaW5nUmF0ZSx0LmJldGExLHQuYmV0YTIsdC5lcHNpbG9uLHQuZGVjYXkpfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBqZyBleHRlbmRzIFRve3N0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuIlNHRCJ9Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmxlYXJuaW5nUmF0ZT1lLHRoaXMuc2V0TGVhcm5pbmdSYXRlKGUpfWFwcGx5R3JhZGllbnRzKGUpeyhBcnJheS5pc0FycmF5KGUpP2UubWFwKHM9PnMubmFtZSk6T2JqZWN0LmtleXMoZSkpLmZvckVhY2goKHMscik9Pntjb25zdCBvPUFycmF5LmlzQXJyYXkoZSk/ZVtyXS50ZW5zb3I6ZVtzXTtpZihvPT1udWxsKXJldHVybjtjb25zdCBpPWoucmVnaXN0ZXJlZFZhcmlhYmxlc1tzXTtyZSgoKT0+e2NvbnN0IGE9bWUoWCh0aGlzLmMsbyksaSk7aS5hc3NpZ24oYSl9KX0pLHRoaXMuaW5jcmVtZW50SXRlcmF0aW9ucygpfXNldExlYXJuaW5nUmF0ZShlKXt0aGlzLmxlYXJuaW5nUmF0ZT1lLHRoaXMuYyE9bnVsbCYmdGhpcy5jLmRpc3Bvc2UoKSx0aGlzLmM9ZW4oTWUoLWUpKX1kaXNwb3NlKCl7dGhpcy5jLmRpc3Bvc2UoKX1hc3luYyBnZXRXZWlnaHRzKCl7cmV0dXJuW2F3YWl0IHRoaXMuc2F2ZUl0ZXJhdGlvbnMoKV19YXN5bmMgc2V0V2VpZ2h0cyhlKXtpZihlPWF3YWl0IHRoaXMuZXh0cmFjdEl0ZXJhdGlvbnMoZSksZS5sZW5ndGghPT0wKXRocm93IG5ldyBFcnJvcigiU0dEIG9wdGltaXplciBkb2VzIG5vdCBoYXZlIHNldHRhYmxlIHdlaWdodHMuIil9Z2V0Q29uZmlnKCl7cmV0dXJue2xlYXJuaW5nUmF0ZTp0aGlzLmxlYXJuaW5nUmF0ZX19c3RhdGljIGZyb21Db25maWcoZSx0KXtyZXR1cm4gbmV3IGUodC5sZWFybmluZ1JhdGUpfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBKYiBleHRlbmRzIGpne3N0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuIk1vbWVudHVtIn1jb25zdHJ1Y3RvcihlLHQscz0hMSl7c3VwZXIoZSksdGhpcy5sZWFybmluZ1JhdGU9ZSx0aGlzLm1vbWVudHVtPXQsdGhpcy51c2VOZXN0ZXJvdj1zLHRoaXMuYWNjdW11bGF0aW9ucz1bXSx0aGlzLm09TWUodGhpcy5tb21lbnR1bSl9YXBwbHlHcmFkaWVudHMoZSl7KEFycmF5LmlzQXJyYXkoZSk/ZS5tYXAocz0+cy5uYW1lKTpPYmplY3Qua2V5cyhlKSkuZm9yRWFjaCgocyxyKT0+e2NvbnN0IG89ai5yZWdpc3RlcmVkVmFyaWFibGVzW3NdO3RoaXMuYWNjdW11bGF0aW9uc1tyXT09bnVsbCYmKHRoaXMuYWNjdW11bGF0aW9uc1tyXT17b3JpZ2luYWxOYW1lOmAke3N9L21vbWVudHVtYCx2YXJpYWJsZTpyZSgoKT0+cnQobykudmFyaWFibGUoITEpKX0pO2NvbnN0IGk9dGhpcy5hY2N1bXVsYXRpb25zW3JdLnZhcmlhYmxlLGE9QXJyYXkuaXNBcnJheShlKT9lW3JdLnRlbnNvcjplW3NdO2EhPW51bGwmJnJlKCgpPT57bGV0IGw7Y29uc3QgYz1tZShYKHRoaXMubSxpKSxhKTt0aGlzLnVzZU5lc3Rlcm92P2w9bWUoWCh0aGlzLmMsbWUoYSxYKGMsdGhpcy5tKSkpLG8pOmw9bWUoWCh0aGlzLmMsYyksbyksaS5hc3NpZ24oYyksby5hc3NpZ24obCl9KX0pLHRoaXMuaW5jcmVtZW50SXRlcmF0aW9ucygpfWRpc3Bvc2UoKXt0aGlzLm0uZGlzcG9zZSgpLHRoaXMuYWNjdW11bGF0aW9ucyE9bnVsbCYmWWUodGhpcy5hY2N1bXVsYXRpb25zLm1hcChlPT5lLnZhcmlhYmxlKSl9c2V0TW9tZW50dW0oZSl7dGhpcy5tb21lbnR1bT1lfWFzeW5jIGdldFdlaWdodHMoKXtyZXR1cm5bYXdhaXQgdGhpcy5zYXZlSXRlcmF0aW9ucygpXS5jb25jYXQodGhpcy5hY2N1bXVsYXRpb25zLm1hcChlPT4oe25hbWU6ZS5vcmlnaW5hbE5hbWUsdGVuc29yOmUudmFyaWFibGV9KSkpfWFzeW5jIHNldFdlaWdodHMoZSl7ZT1hd2FpdCB0aGlzLmV4dHJhY3RJdGVyYXRpb25zKGUpO2NvbnN0IHQ9ITE7dGhpcy5hY2N1bXVsYXRpb25zPWUubWFwKHM9Pih7b3JpZ2luYWxOYW1lOnMubmFtZSx2YXJpYWJsZTpzLnRlbnNvci52YXJpYWJsZSh0KX0pKX1nZXRDb25maWcoKXtyZXR1cm57bGVhcm5pbmdSYXRlOnRoaXMubGVhcm5pbmdSYXRlLG1vbWVudHVtOnRoaXMubW9tZW50dW0sdXNlTmVzdGVyb3Y6dGhpcy51c2VOZXN0ZXJvdn19c3RhdGljIGZyb21Db25maWcoZSx0KXtyZXR1cm4gbmV3IGUodC5sZWFybmluZ1JhdGUsdC5tb21lbnR1bSx0LnVzZU5lc3Rlcm92KX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgZXcgZXh0ZW5kcyBUb3tzdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybiJSTVNQcm9wIn1jb25zdHJ1Y3RvcihlLHQ9Ljkscz0wLHI9bnVsbCxvPSExKXtpZihzdXBlcigpLHRoaXMubGVhcm5pbmdSYXRlPWUsdGhpcy5kZWNheT10LHRoaXMubW9tZW50dW09cyx0aGlzLmVwc2lsb249cix0aGlzLmFjY3VtdWxhdGVkTWVhblNxdWFyZXM9W10sdGhpcy5hY2N1bXVsYXRlZE1vbWVudHM9W10sdGhpcy5hY2N1bXVsYXRlZE1lYW5HcmFkcz1bXSx0aGlzLmNlbnRlcmVkPW8scj09bnVsbCYmKHRoaXMuZXBzaWxvbj1qLmJhY2tlbmQuZXBzaWxvbigpKSxlPT1udWxsKXRocm93IG5ldyBFcnJvcigibGVhcm5pbmdSYXRlIGZvciBSTVNQcm9wT3B0aW1pemVyIG11c3QgYmUgZGVmaW5lZC4iKX1hcHBseUdyYWRpZW50cyhlKXsoQXJyYXkuaXNBcnJheShlKT9lLm1hcChzPT5zLm5hbWUpOk9iamVjdC5rZXlzKGUpKS5mb3JFYWNoKChzLHIpPT57Y29uc3Qgbz1qLnJlZ2lzdGVyZWRWYXJpYWJsZXNbc10saT0hMTt0aGlzLmFjY3VtdWxhdGVkTWVhblNxdWFyZXNbcl09PW51bGwmJih0aGlzLmFjY3VtdWxhdGVkTWVhblNxdWFyZXNbcl09e29yaWdpbmFsTmFtZTpgJHtzfS9ybXNgLHZhcmlhYmxlOnJlKCgpPT5ydChvKS52YXJpYWJsZShpKSl9KSx0aGlzLmFjY3VtdWxhdGVkTW9tZW50c1tyXT09bnVsbCYmKHRoaXMuYWNjdW11bGF0ZWRNb21lbnRzW3JdPXtvcmlnaW5hbE5hbWU6YCR7c30vbW9tZW50dW1gLHZhcmlhYmxlOnJlKCgpPT5ydChvKS52YXJpYWJsZShpKSl9KSx0aGlzLmFjY3VtdWxhdGVkTWVhbkdyYWRzW3JdPT1udWxsJiZ0aGlzLmNlbnRlcmVkJiYodGhpcy5hY2N1bXVsYXRlZE1lYW5HcmFkc1tyXT17b3JpZ2luYWxOYW1lOmAke3N9L21nYCx2YXJpYWJsZTpyZSgoKT0+cnQobykudmFyaWFibGUoaSkpfSk7Y29uc3QgYT1BcnJheS5pc0FycmF5KGUpP2Vbcl0udGVuc29yOmVbc107aWYoYT09bnVsbClyZXR1cm47Y29uc3QgbD10aGlzLmFjY3VtdWxhdGVkTWVhblNxdWFyZXNbcl0udmFyaWFibGUsYz10aGlzLmFjY3VtdWxhdGVkTW9tZW50c1tyXS52YXJpYWJsZTtyZSgoKT0+e2NvbnN0IGg9bWUoWChsLHRoaXMuZGVjYXkpLFgoeXQoYSksMS10aGlzLmRlY2F5KSk7aWYodGhpcy5jZW50ZXJlZCl7Y29uc3QgcD10aGlzLmFjY3VtdWxhdGVkTWVhbkdyYWRzW3JdLnZhcmlhYmxlLGY9bWUoWChwLHRoaXMuZGVjYXkpLFgoYSwxLXRoaXMuZGVjYXkpKSxnPU9lKFgoYSx0aGlzLmxlYXJuaW5nUmF0ZSkscG4oSWUoaCxtZSh5dChmKSx0aGlzLmVwc2lsb24pKSkpLHk9bWUoWChjLHRoaXMubW9tZW50dW0pLGcpO2wuYXNzaWduKGgpLHAuYXNzaWduKGYpLGMuYXNzaWduKHkpO2NvbnN0IHc9SWUobyx5KTtvLmFzc2lnbih3KX1lbHNle2NvbnN0IHA9bWUoWChsLHRoaXMuZGVjYXkpLFgoeXQoYSksMS10aGlzLmRlY2F5KSksZj1tZShYKGMsdGhpcy5tb21lbnR1bSksT2UoWChhLHRoaXMubGVhcm5pbmdSYXRlKSxwbihtZShwLHRoaXMuZXBzaWxvbikpKSk7bC5hc3NpZ24ocCksYy5hc3NpZ24oZik7Y29uc3QgZz1JZShvLGYpO28uYXNzaWduKGcpfX0pfSksdGhpcy5pbmNyZW1lbnRJdGVyYXRpb25zKCl9ZGlzcG9zZSgpe3RoaXMuYWNjdW11bGF0ZWRNZWFuU3F1YXJlcyE9bnVsbCYmWWUodGhpcy5hY2N1bXVsYXRlZE1lYW5TcXVhcmVzLm1hcChlPT5lLnZhcmlhYmxlKSksdGhpcy5hY2N1bXVsYXRlZE1lYW5HcmFkcyE9bnVsbCYmdGhpcy5jZW50ZXJlZCYmWWUodGhpcy5hY2N1bXVsYXRlZE1lYW5HcmFkcy5tYXAoZT0+ZS52YXJpYWJsZSkpLHRoaXMuYWNjdW11bGF0ZWRNb21lbnRzIT1udWxsJiZZZSh0aGlzLmFjY3VtdWxhdGVkTW9tZW50cy5tYXAoZT0+ZS52YXJpYWJsZSkpfWFzeW5jIGdldFdlaWdodHMoKXtjb25zdCBlPVsuLi50aGlzLmFjY3VtdWxhdGVkTWVhblNxdWFyZXMsLi4udGhpcy5hY2N1bXVsYXRlZE1vbWVudHNdO3JldHVybiB0aGlzLmNlbnRlcmVkJiZlLnB1c2goLi4udGhpcy5hY2N1bXVsYXRlZE1lYW5HcmFkcyksW2F3YWl0IHRoaXMuc2F2ZUl0ZXJhdGlvbnMoKV0uY29uY2F0KGUubWFwKHQ9Pih7bmFtZTp0Lm9yaWdpbmFsTmFtZSx0ZW5zb3I6dC52YXJpYWJsZX0pKSl9YXN5bmMgc2V0V2VpZ2h0cyhlKXtlPWF3YWl0IHRoaXMuZXh0cmFjdEl0ZXJhdGlvbnMoZSk7Y29uc3QgdD10aGlzLmNlbnRlcmVkP2UubGVuZ3RoLzM6ZS5sZW5ndGgvMixzPSExO3RoaXMuYWNjdW11bGF0ZWRNZWFuU3F1YXJlcz1lLnNsaWNlKDAsdCkubWFwKHI9Pih7b3JpZ2luYWxOYW1lOnIubmFtZSx2YXJpYWJsZTpyLnRlbnNvci52YXJpYWJsZShzKX0pKSx0aGlzLmFjY3VtdWxhdGVkTW9tZW50cz1lLnNsaWNlKHQsdCoyKS5tYXAocj0+KHtvcmlnaW5hbE5hbWU6ci5uYW1lLHZhcmlhYmxlOnIudGVuc29yLnZhcmlhYmxlKHMpfSkpLHRoaXMuY2VudGVyZWQmJih0aGlzLmFjY3VtdWxhdGVkTWVhbkdyYWRzPWUuc2xpY2UodCoyLHQqMykubWFwKHI9Pih7b3JpZ2luYWxOYW1lOnIubmFtZSx2YXJpYWJsZTpyLnRlbnNvci52YXJpYWJsZShzKX0pKSl9Z2V0Q29uZmlnKCl7cmV0dXJue2xlYXJuaW5nUmF0ZTp0aGlzLmxlYXJuaW5nUmF0ZSxkZWNheTp0aGlzLmRlY2F5LG1vbWVudHVtOnRoaXMubW9tZW50dW0sZXBzaWxvbjp0aGlzLmVwc2lsb24sY2VudGVyZWQ6dGhpcy5jZW50ZXJlZH19c3RhdGljIGZyb21Db25maWcoZSx0KXtyZXR1cm4gbmV3IGUodC5sZWFybmluZ1JhdGUsdC5kZWNheSx0Lm1vbWVudHVtLHQuZXBzaWxvbix0LmNlbnRlcmVkKX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgX0I9W1hiLFliLFFiLFpiLEpiLGV3LGpnXTtmdW5jdGlvbiBPQigpe2Zvcihjb25zdCBuIG9mIF9CKWdlKG4pfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEZCPSJtb2RlbCIsTEI9Ii5qc29uIixQQj0iLndlaWdodHMuYmluIjtmdW5jdGlvbiBEayhuKXtyZXR1cm4gbmV3IFByb21pc2UoZT0+c2V0VGltZW91dChlKSkudGhlbihuKX1jbGFzcyBwYXtjb25zdHJ1Y3RvcihlKXtpZighb2UoKS5nZXRCb29sKCJJU19CUk9XU0VSIikpdGhyb3cgbmV3IEVycm9yKCJicm93c2VyRG93bmxvYWRzKCkgY2Fubm90IHByb2NlZWQgYmVjYXVzZSB0aGUgY3VycmVudCBlbnZpcm9ubWVudCBpcyBub3QgYSBicm93c2VyLiIpO2Uuc3RhcnRzV2l0aChwYS5VUkxfU0NIRU1FKSYmKGU9ZS5zbGljZShwYS5VUkxfU0NIRU1FLmxlbmd0aCkpLChlPT1udWxsfHxlLmxlbmd0aD09PTApJiYoZT1GQiksdGhpcy5tb2RlbEpzb25GaWxlTmFtZT1lK0xCLHRoaXMud2VpZ2h0RGF0YUZpbGVOYW1lPWUrUEJ9YXN5bmMgc2F2ZShlKXtpZih0eXBlb2YgZG9jdW1lbnQ+InUiKXRocm93IG5ldyBFcnJvcigiQnJvd3NlciBkb3dubG9hZHMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCBzaW5jZSBgZG9jdW1lbnRgIGlzIG5vdCBwcmVzZW50Iik7Y29uc3QgdD0kci5qb2luKGUud2VpZ2h0RGF0YSkscz13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbdF0se3R5cGU6ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSJ9KSk7aWYoZS5tb2RlbFRvcG9sb2d5IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpdGhyb3cgbmV3IEVycm9yKCJCcm93c2VyRG93bmxvYWRzLnNhdmUoKSBkb2VzIG5vdCBzdXBwb3J0IHNhdmluZyBtb2RlbCB0b3BvbG9neSBpbiBiaW5hcnkgZm9ybWF0cyB5ZXQuIik7e2NvbnN0IHI9W3twYXRoczpbIi4vIit0aGlzLndlaWdodERhdGFGaWxlTmFtZV0sd2VpZ2h0czplLndlaWdodFNwZWNzfV0sbz1PJChlLHIpLGk9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KG8pXSx7dHlwZToiYXBwbGljYXRpb24vanNvbiJ9KSksYT10aGlzLm1vZGVsSnNvbkFuY2hvcj09bnVsbD9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik6dGhpcy5tb2RlbEpzb25BbmNob3I7aWYoYS5kb3dubG9hZD10aGlzLm1vZGVsSnNvbkZpbGVOYW1lLGEuaHJlZj1pLGF3YWl0IERrKCgpPT5hLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoImNsaWNrIikpKSxlLndlaWdodERhdGEhPW51bGwpe2NvbnN0IGw9dGhpcy53ZWlnaHREYXRhQW5jaG9yPT1udWxsP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTp0aGlzLndlaWdodERhdGFBbmNob3I7bC5kb3dubG9hZD10aGlzLndlaWdodERhdGFGaWxlTmFtZSxsLmhyZWY9cyxhd2FpdCBEaygoKT0+bC5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCJjbGljayIpKSl9cmV0dXJue21vZGVsQXJ0aWZhY3RzSW5mbzpzaChlKX19fX1wYS5VUkxfU0NIRU1FPSJkb3dubG9hZHM6Ly8iO2NsYXNzIHpCe2NvbnN0cnVjdG9yKGUpe2lmKGU9PW51bGx8fGUubGVuZ3RoPDEpdGhyb3cgbmV3IEVycm9yKGBXaGVuIGNhbGxpbmcgYnJvd3NlckZpbGVzLCBhdCBsZWFzdCAxIGZpbGUgaXMgcmVxdWlyZWQsIGJ1dCByZWNlaXZlZCAke2V9YCk7dGhpcy5qc29uRmlsZT1lWzBdLHRoaXMud2VpZ2h0c0ZpbGVzPWUuc2xpY2UoMSl9YXN5bmMgbG9hZCgpe3JldHVybiBuZXcgUHJvbWlzZSgoZSx0KT0+e2NvbnN0IHM9bmV3IEZpbGVSZWFkZXI7cy5vbmxvYWQ9cj0+e2NvbnN0IG89SlNPTi5wYXJzZShyLnRhcmdldC5yZXN1bHQpLGk9by5tb2RlbFRvcG9sb2d5O2lmKGk9PW51bGwpe3QobmV3IEVycm9yKGBtb2RlbFRvcG9sb2d5IGZpZWxkIGlzIG1pc3NpbmcgZnJvbSBmaWxlICR7dGhpcy5qc29uRmlsZS5uYW1lfWApKTtyZXR1cm59aWYoby53ZWlnaHRzTWFuaWZlc3Q9PW51bGwpe3QobmV3IEVycm9yKGB3ZWlnaHRNYW5pZmVzdCBmaWVsZCBpcyBtaXNzaW5nIGZyb20gZmlsZSAke3RoaXMuanNvbkZpbGUubmFtZX1gKSk7cmV0dXJufWlmKHRoaXMud2VpZ2h0c0ZpbGVzLmxlbmd0aD09PTApe2Uoe21vZGVsVG9wb2xvZ3k6aX0pO3JldHVybn1jb25zdCBsPVUxKG8sYz0+dGhpcy5sb2FkV2VpZ2h0cyhjKSk7ZShsKX0scy5vbmVycm9yPXI9PnQoYEZhaWxlZCB0byByZWFkIG1vZGVsIHRvcG9sb2d5IGFuZCB3ZWlnaHRzIG1hbmlmZXN0IEpTT04gZnJvbSBmaWxlICcke3RoaXMuanNvbkZpbGUubmFtZX0nLiBCcm93c2VyRmlsZXMgc3VwcG9ydHMgbG9hZGluZyBLZXJhcy1zdHlsZSB0Zi5Nb2RlbCBhcnRpZmFjdHMgb25seS5gKSxzLnJlYWRBc1RleHQodGhpcy5qc29uRmlsZSl9KX1sb2FkV2VpZ2h0cyhlKXtjb25zdCB0PVtdLHM9W107Zm9yKGNvbnN0IGkgb2YgZSl0LnB1c2goLi4uaS53ZWlnaHRzKSxzLnB1c2goLi4uaS5wYXRocyk7Y29uc3Qgcj10aGlzLmNoZWNrTWFuaWZlc3RBbmRXZWlnaHRGaWxlcyhlKSxvPXMubWFwKGk9PnRoaXMubG9hZFdlaWdodHNGaWxlKGkscltpXSkpO3JldHVybiBQcm9taXNlLmFsbChvKS50aGVuKGk9Plt0LGldKX1sb2FkV2VpZ2h0c0ZpbGUoZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKHMscik9Pntjb25zdCBvPW5ldyBGaWxlUmVhZGVyO28ub25sb2FkPWk9Pntjb25zdCBhPWkudGFyZ2V0LnJlc3VsdDtzKGEpfSxvLm9uZXJyb3I9aT0+cihgRmFpbGVkIHRvIHdlaWdodHMgZGF0YSBmcm9tIGZpbGUgb2YgcGF0aCAnJHtlfScuYCksby5yZWFkQXNBcnJheUJ1ZmZlcih0KX0pfWNoZWNrTWFuaWZlc3RBbmRXZWlnaHRGaWxlcyhlKXtjb25zdCB0PVtdLHM9dGhpcy53ZWlnaHRzRmlsZXMubWFwKG89PndrKG8ubmFtZSkpLHI9e307Zm9yKGNvbnN0IG8gb2YgZSlvLnBhdGhzLmZvckVhY2goaT0+e2NvbnN0IGE9d2soaSk7aWYodC5pbmRleE9mKGEpIT09LTEpdGhyb3cgbmV3IEVycm9yKGBEdXBsaWNhdGUgZmlsZSBiYXNlbmFtZSBmb3VuZCBpbiB3ZWlnaHRzIG1hbmlmZXN0OiAnJHthfSdgKTtpZih0LnB1c2goYSkscy5pbmRleE9mKGEpPT09LTEpdGhyb3cgbmV3IEVycm9yKGBXZWlnaHQgZmlsZSB3aXRoIGJhc2VuYW1lICcke2F9JyBpcyBub3QgcHJvdmlkZWQuYCk7cltpXT10aGlzLndlaWdodHNGaWxlc1tzLmluZGV4T2YoYSldfSk7aWYodC5sZW5ndGghPT10aGlzLndlaWdodHNGaWxlcy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBNaXNtYXRjaCBpbiB0aGUgbnVtYmVyIG9mIGZpbGVzIGluIHdlaWdodHMgbWFuaWZlc3QgKCR7dC5sZW5ndGh9KSBhbmQgdGhlIG51bWJlciBvZiB3ZWlnaHQgZmlsZXMgcHJvdmlkZWQgKCR7dGhpcy53ZWlnaHRzRmlsZXMubGVuZ3RofSkuYCk7cmV0dXJuIHJ9fWNvbnN0IE1CPW49Pm9lKCkuZ2V0Qm9vbCgiSVNfQlJPV1NFUiIpJiYhQXJyYXkuaXNBcnJheShuKSYmbi5zdGFydHNXaXRoKHBhLlVSTF9TQ0hFTUUpP0JCKG4uc2xpY2UocGEuVVJMX1NDSEVNRS5sZW5ndGgpKTpudWxsO0F0LnJlZ2lzdGVyU2F2ZVJvdXRlcihNQik7ZnVuY3Rpb24gQkIobj0ibW9kZWwiKXtyZXR1cm4gbmV3IHBhKG4pfWZ1bmN0aW9uIFZCKG4pe3JldHVybiBuZXcgekIobil9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQWsobixlLHQscyl7aShuKSx0PXQ/PzAscz1zPz8xLGEodCxzKTtsZXQgcj0wO2NvbnN0IG89bD0+KGwudGhlbihjPT57Y29uc3QgaD10KyArK3Ivbi5sZW5ndGgqKHMtdCk7cmV0dXJuIGUoaCksY30pLGwpO2Z1bmN0aW9uIGkobCl7QShsIT1udWxsJiZBcnJheS5pc0FycmF5KGwpJiZsLmxlbmd0aD4wLCgpPT4icHJvbWlzZXMgbXVzdCBiZSBhIG5vbmUgZW1wdHkgYXJyYXkiKX1mdW5jdGlvbiBhKGwsYyl7QShsPj0wJiZsPD0xLCgpPT5gUHJvZ3Jlc3MgZnJhY3Rpb24gbXVzdCBiZSBpbiByYW5nZSBbMCwgMV0sIGJ1dCBnb3Qgc3RhcnRGcmFjdGlvbiAke2x9YCksQShjPj0wJiZjPD0xLCgpPT5gUHJvZ3Jlc3MgZnJhY3Rpb24gbXVzdCBiZSBpbiByYW5nZSBbMCwgMV0sIGJ1dCBnb3QgZW5kRnJhY3Rpb24gJHtjfWApLEEoYz49bCwoKT0+YHN0YXJ0RnJhY3Rpb24gbXVzdCBiZSBubyBtb3JlIHRoYW4gZW5kRnJhY3Rpb24sIGJ1dCBnb3Qgc3RhcnRGcmFjdGlvbiAke2x9IGFuZCBlbmRGcmFjdGlvbiAke2N9YCl9cmV0dXJuIFByb21pc2UuYWxsKG4ubWFwKG8pKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9hc3luYyBmdW5jdGlvbiBLSShuLGUpe2U9PW51bGwmJihlPXt9KTtjb25zdCB0PWUuZmV0Y2hGdW5jPT1udWxsP29lKCkucGxhdGZvcm0uZmV0Y2g6ZS5mZXRjaEZ1bmMscz1uLm1hcChwPT50KHAsZS5yZXF1ZXN0SW5pdCx7aXNCaW5hcnk6ITB9KSksYT0oZS5vblByb2dyZXNzPT1udWxsP2F3YWl0IFByb21pc2UuYWxsKHMpOmF3YWl0IEFrKHMsZS5vblByb2dyZXNzLDAsLjUpKS5tYXAocD0+cC5hcnJheUJ1ZmZlcigpKTtyZXR1cm4gZS5vblByb2dyZXNzPT1udWxsP2F3YWl0IFByb21pc2UuYWxsKGEpOmF3YWl0IEFrKGEsZS5vblByb2dyZXNzLC41LDEpfWZ1bmN0aW9uIFdCKG4sZSl7dmFyIHQ7Y29uc3Qgcz1lLmZldGNoRnVuYz09bnVsbD9vZSgpLnBsYXRmb3JtLmZldGNoOmUuZmV0Y2hGdW5jO2xldCByPTAsbztyZXR1cm4odD1lLm9uUHJvZ3Jlc3MpPT09bnVsbHx8dD09PXZvaWQgMHx8dC5jYWxsKGUsMCksbmV3IFJlYWRhYmxlU3RyZWFtKHtwdWxsOmFzeW5jIGk9Pntmb3IodmFyIGE7cjxuLmxlbmd0aDspe298fChvPShhd2FpdCBzKG5bcl0sZS5yZXF1ZXN0SW5pdCx7aXNCaW5hcnk6ITB9KSkuYm9keS5nZXRSZWFkZXIoKSk7Y29uc3R7ZG9uZTpsLHZhbHVlOmN9PWF3YWl0IG8ucmVhZCgpO2lmKGwpe3IrKyxvPXZvaWQgMCwoYT1lLm9uUHJvZ3Jlc3MpPT09bnVsbHx8YT09PXZvaWQgMHx8YS5jYWxsKGUsci9uLmxlbmd0aCk7Y29udGludWV9aS5lbnF1ZXVlKGMpO3JldHVybn1pLmNsb3NlKCl9fSl9YXN5bmMgZnVuY3Rpb24gVUIobixlPSIiLHQscyl7cmV0dXJuIFhJKGk9PktJKGkse3JlcXVlc3RJbml0OnN9KSkobixlLHQpfWZ1bmN0aW9uIFhJKG4pe3JldHVybiBhc3luYyhlLHQ9IiIscyk9Pntjb25zdCByPWUubWFwKCgpPT4hMSksbz17fSxpPXMhPW51bGw/cy5tYXAoKCk9PiExKTpbXSxhPVtdO2lmKGUuZm9yRWFjaCgoZyx5KT0+e2xldCB3PTA7Zy53ZWlnaHRzLmZvckVhY2goYj0+e2NvbnN0IHY9InF1YW50aXphdGlvbiJpbiBiP2IucXVhbnRpemF0aW9uLmR0eXBlOmIuZHR5cGUsUz1vYVt2XSpjZShiLnNoYXBlKSwkPSgpPT57clt5XT0hMCxvW3ldPT1udWxsJiYob1t5XT1bXSksb1t5XS5wdXNoKHttYW5pZmVzdEVudHJ5OmIsZ3JvdXBPZmZzZXQ6dyxzaXplQnl0ZXM6U30pfTtzIT1udWxsP3MuZm9yRWFjaCgoayxUKT0+e2s9PT1iLm5hbWUmJigkKCksaVtUXT0hMCl9KTokKCksYS5wdXNoKGIubmFtZSksdys9U30pfSksIWkuZXZlcnkoZz0+Zykpe2NvbnN0IGc9cy5maWx0ZXIoKHksdyk9PiFpW3ddKTt0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIHdlaWdodHMgaW4gbWFuaWZlc3Qgd2l0aCBuYW1lczogJHtnLmpvaW4oIiwgIil9LiAKTWFuaWZlc3QgSlNPTiBoYXMgd2VpZ2h0cyB3aXRoIG5hbWVzOiAke2Euam9pbigiLCAiKX0uYCl9Y29uc3QgbD1yLnJlZHVjZSgoZyx5LHcpPT4oeSYmZy5wdXNoKHcpLGcpLFtdKSxjPVtdO2wuZm9yRWFjaChnPT57ZVtnXS5wYXRocy5mb3JFYWNoKHk9Pntjb25zdCB3PXQrKHQuZW5kc1dpdGgoIi8iKT8iIjoiLyIpK3k7Yy5wdXNoKHcpfSl9KTtjb25zdCBoPWF3YWl0IG4oYykscD17fTtsZXQgZj0wO3JldHVybiBsLmZvckVhY2goZz0+e2NvbnN0IHk9ZVtnXS5wYXRocy5sZW5ndGgsdz1uZXcgJHIoaC5zbGljZShmLGYreSkpO29bZ10uZm9yRWFjaCh2PT57Y29uc3QgUz13LnNsaWNlKHYuZ3JvdXBPZmZzZXQsdi5ncm91cE9mZnNldCt2LnNpemVCeXRlcyksJD1SJChTLFt2Lm1hbmlmZXN0RW50cnldKTtmb3IoY29uc3QgayBpbiAkKXBba109JFtrXX0pLGYrPXl9KSxwfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBqQj0iYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIixHQj0iYXBwbGljYXRpb24vanNvbiI7Y2xhc3MgdHd7Y29uc3RydWN0b3IoZSx0KXtpZih0aGlzLkRFRkFVTFRfTUVUSE9EPSJQT1NUIix0PT1udWxsJiYodD17fSksdGhpcy53ZWlnaHRQYXRoUHJlZml4PXQud2VpZ2h0UGF0aFByZWZpeCx0aGlzLndlaWdodFVybENvbnZlcnRlcj10LndlaWdodFVybENvbnZlcnRlcix0LmZldGNoRnVuYyE9bnVsbD8oQSh0eXBlb2YgdC5mZXRjaEZ1bmM9PSJmdW5jdGlvbiIsKCk9PiJNdXN0IHBhc3MgYSBmdW5jdGlvbiB0aGF0IG1hdGNoZXMgdGhlIHNpZ25hdHVyZSBvZiBgZmV0Y2hgIChzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ZldGNoX0FQSSkiKSx0aGlzLmZldGNoPXQuZmV0Y2hGdW5jKTp0aGlzLmZldGNoPW9lKCkucGxhdGZvcm0uZmV0Y2gsQShlIT1udWxsJiZlLmxlbmd0aD4wLCgpPT4iVVJMIHBhdGggZm9yIGh0dHAgbXVzdCBub3QgYmUgbnVsbCwgdW5kZWZpbmVkIG9yIGVtcHR5LiIpLEFycmF5LmlzQXJyYXkoZSkmJkEoZS5sZW5ndGg9PT0yLCgpPT5gVVJMIHBhdGhzIGZvciBodHRwIG11c3QgaGF2ZSBhIGxlbmd0aCBvZiAyLCAoYWN0dWFsIGxlbmd0aCBpcyAke2UubGVuZ3RofSkuYCksdGhpcy5wYXRoPWUsdC5yZXF1ZXN0SW5pdCE9bnVsbCYmdC5yZXF1ZXN0SW5pdC5ib2R5IT1udWxsKXRocm93IG5ldyBFcnJvcigicmVxdWVzdEluaXQgaXMgZXhwZWN0ZWQgdG8gaGF2ZSBubyBwcmUtZXhpc3RpbmcgYm9keSwgYnV0IGhhcyBvbmUuIik7dGhpcy5yZXF1ZXN0SW5pdD10LnJlcXVlc3RJbml0fHx7fSx0aGlzLmxvYWRPcHRpb25zPXR9YXN5bmMgc2F2ZShlKXtpZihlLm1vZGVsVG9wb2xvZ3kgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil0aHJvdyBuZXcgRXJyb3IoIkJyb3dzZXJIVFRQUmVxdWVzdC5zYXZlKCkgZG9lcyBub3Qgc3VwcG9ydCBzYXZpbmcgbW9kZWwgdG9wb2xvZ3kgaW4gYmluYXJ5IGZvcm1hdHMgeWV0LiIpO2NvbnN0IHQ9T2JqZWN0LmFzc2lnbih7bWV0aG9kOnRoaXMuREVGQVVMVF9NRVRIT0R9LHRoaXMucmVxdWVzdEluaXQpO3QuYm9keT1uZXcgRm9ybURhdGE7Y29uc3Qgcz1be3BhdGhzOlsiLi9tb2RlbC53ZWlnaHRzLmJpbiJdLHdlaWdodHM6ZS53ZWlnaHRTcGVjc31dLHI9TyQoZSxzKTtpZih0LmJvZHkuYXBwZW5kKCJtb2RlbC5qc29uIixuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocildLHt0eXBlOkdCfSksIm1vZGVsLmpzb24iKSxlLndlaWdodERhdGEhPW51bGwpe2NvbnN0IGk9JHIuam9pbihlLndlaWdodERhdGEpO3QuYm9keS5hcHBlbmQoIm1vZGVsLndlaWdodHMuYmluIixuZXcgQmxvYihbaV0se3R5cGU6akJ9KSwibW9kZWwud2VpZ2h0cy5iaW4iKX1jb25zdCBvPWF3YWl0IHRoaXMuZmV0Y2godGhpcy5wYXRoLHQpO2lmKG8ub2spcmV0dXJue21vZGVsQXJ0aWZhY3RzSW5mbzpzaChlKSxyZXNwb25zZXM6W29dfTt0aHJvdyBuZXcgRXJyb3IoYEJyb3dzZXJIVFRQUmVxdWVzdC5zYXZlKCkgZmFpbGVkIGR1ZSB0byBIVFRQIHJlc3BvbnNlIHN0YXR1cyAke28uc3RhdHVzfS5gKX1hc3luYyBsb2FkTW9kZWxKU09OKCl7Y29uc3QgZT1hd2FpdCB0aGlzLmZldGNoKHRoaXMucGF0aCx0aGlzLnJlcXVlc3RJbml0KTtpZighZS5vayl0aHJvdyBuZXcgRXJyb3IoYFJlcXVlc3QgdG8gJHt0aGlzLnBhdGh9IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICR7ZS5zdGF0dXN9LiBQbGVhc2UgdmVyaWZ5IHRoaXMgVVJMIHBvaW50cyB0byB0aGUgbW9kZWwgSlNPTiBvZiB0aGUgbW9kZWwgdG8gbG9hZC5gKTtsZXQgdDt0cnl7dD1hd2FpdCBlLmpzb24oKX1jYXRjaHtsZXQgaT1gRmFpbGVkIHRvIHBhcnNlIG1vZGVsIEpTT04gb2YgcmVzcG9uc2UgZnJvbSAke3RoaXMucGF0aH0uYDt0aHJvdyB0aGlzLnBhdGguZW5kc1dpdGgoIi5wYiIpP2krPSIgWW91ciBwYXRoIGNvbnRhaW5zIGEgLnBiIGZpbGUgZXh0ZW5zaW9uLiBTdXBwb3J0IGZvciAucGIgbW9kZWxzIGhhdmUgYmVlbiByZW1vdmVkIGluIFRlbnNvckZsb3cuanMgMS4wIGluIGZhdm9yIG9mIC5qc29uIG1vZGVscy4gWW91IGNhbiByZS1jb252ZXJ0IHlvdXIgUHl0aG9uIFRlbnNvckZsb3cgbW9kZWwgdXNpbmcgdGhlIFRlbnNvckZsb3cuanMgMS4wIGNvbnZlcnNpb24gc2NyaXB0cyBvciB5b3UgY2FuIGNvbnZlcnQgeW91ci5wYiBtb2RlbHMgd2l0aCB0aGUgJ3BiMmpzb24nTlBNIHNjcmlwdCBpbiB0aGUgdGVuc29yZmxvdy90ZmpzLWNvbnZlcnRlciByZXBvc2l0b3J5LiI6aSs9IiBQbGVhc2UgbWFrZSBzdXJlIHRoZSBzZXJ2ZXIgaXMgc2VydmluZyB2YWxpZCBKU09OIGZvciB0aGlzIHJlcXVlc3QuIixuZXcgRXJyb3IoaSl9Y29uc3Qgcz10Lm1vZGVsVG9wb2xvZ3kscj10LndlaWdodHNNYW5pZmVzdDtpZihzPT1udWxsJiZyPT1udWxsKXRocm93IG5ldyBFcnJvcihgVGhlIEpTT04gZnJvbSBIVFRQIHBhdGggJHt0aGlzLnBhdGh9IGNvbnRhaW5zIG5laXRoZXIgbW9kZWwgdG9wb2xvZ3kgb3IgbWFuaWZlc3QgZm9yIHdlaWdodHMuYCk7cmV0dXJuIHR9YXN5bmMgbG9hZCgpe2lmKHRoaXMubG9hZE9wdGlvbnMuc3RyZWFtV2VpZ2h0cylyZXR1cm4gdGhpcy5sb2FkU3RyZWFtKCk7Y29uc3QgZT1hd2FpdCB0aGlzLmxvYWRNb2RlbEpTT04oKTtyZXR1cm4gVTEoZSx0PT50aGlzLmxvYWRXZWlnaHRzKHQpKX1hc3luYyBsb2FkU3RyZWFtKCl7Y29uc3QgZT1hd2FpdCB0aGlzLmxvYWRNb2RlbEpTT04oKSx0PWF3YWl0IHRoaXMuZ2V0V2VpZ2h0VXJscyhlLndlaWdodHNNYW5pZmVzdCkscz1FZihlLndlaWdodHNNYW5pZmVzdCkscj0oKT0+V0IodCx0aGlzLmxvYWRPcHRpb25zKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHt3ZWlnaHRTcGVjczpzLGdldFdlaWdodFN0cmVhbTpyfSl9YXN5bmMgZ2V0V2VpZ2h0VXJscyhlKXtjb25zdCB0PUFycmF5LmlzQXJyYXkodGhpcy5wYXRoKT90aGlzLnBhdGhbMV06dGhpcy5wYXRoLFtzLHJdPUhCKHQpLG89dGhpcy53ZWlnaHRQYXRoUHJlZml4fHxzLGk9W10sYT1bXTtmb3IoY29uc3QgbCBvZiBlKWZvcihjb25zdCBjIG9mIGwucGF0aHMpdGhpcy53ZWlnaHRVcmxDb252ZXJ0ZXIhPW51bGw/YS5wdXNoKHRoaXMud2VpZ2h0VXJsQ29udmVydGVyKGMpKTppLnB1c2gobytjK3IpO3JldHVybiB0aGlzLndlaWdodFVybENvbnZlcnRlciYmaS5wdXNoKC4uLmF3YWl0IFByb21pc2UuYWxsKGEpKSxpfWFzeW5jIGxvYWRXZWlnaHRzKGUpe2NvbnN0IHQ9YXdhaXQgdGhpcy5nZXRXZWlnaHRVcmxzKGUpLHM9RWYoZSkscj1hd2FpdCBLSSh0LHRoaXMubG9hZE9wdGlvbnMpO3JldHVybltzLHJdfX10dy5VUkxfU0NIRU1FX1JFR0VYPS9eaHR0cHM/OlwvXC8vO2Z1bmN0aW9uIEhCKG4pe2NvbnN0IGU9bi5sYXN0SW5kZXhPZigiLyIpLHQ9bi5sYXN0SW5kZXhPZigiPyIpLHM9bi5zdWJzdHJpbmcoMCxlKSxyPXQ+ZT9uLnN1YnN0cmluZyh0KToiIjtyZXR1cm5bcysiLyIscl19ZnVuY3Rpb24gcTAobil7cmV0dXJuIG4ubWF0Y2godHcuVVJMX1NDSEVNRV9SRUdFWCkhPW51bGx9Y29uc3QgWUk9KG4sZSk9PntpZih0eXBlb2YgZmV0Y2g+InUiJiYoZT09bnVsbHx8ZS5mZXRjaEZ1bmM9PW51bGwpKXJldHVybiBudWxsO3tsZXQgdD0hMDtpZihBcnJheS5pc0FycmF5KG4pP3Q9bi5ldmVyeShzPT5xMChzKSk6dD1xMChuKSx0KXJldHVybiBudyhuLGUpfXJldHVybiBudWxsfTtBdC5yZWdpc3RlclNhdmVSb3V0ZXIoWUkpO0F0LnJlZ2lzdGVyTG9hZFJvdXRlcihZSSk7ZnVuY3Rpb24gbncobixlKXtyZXR1cm4gbmV3IHR3KG4sZSl9ZnVuY3Rpb24gcUIobixlKXtyZXR1cm4gbncobixlKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBmMHtjb25zdHJ1Y3RvcihlKXt0aGlzLm1vZGVsQXJ0aWZhY3RzPWV9bG9hZCgpe3JldHVybiB0aGlzLm1vZGVsQXJ0aWZhY3RzfX1jbGFzcyBRSXtjb25zdHJ1Y3RvcihlKXt0aGlzLnNhdmVIYW5kbGVyPWV9c2F2ZShlKXtyZXR1cm4gdGhpcy5zYXZlSGFuZGxlcihlKX19Y2xhc3MgS0J7Y29uc3RydWN0b3IoZSl7ZS5sb2FkJiYodGhpcy5sb2FkPSgpPT5Qcm9taXNlLnJlc29sdmUoZS5sb2FkKCkpKSxlLnNhdmUmJih0aGlzLnNhdmU9dD0+UHJvbWlzZS5yZXNvbHZlKGUuc2F2ZSh0KSkpfX1mdW5jdGlvbiBYQihuLGUsdCxzKXtjb25zdCByPWFyZ3VtZW50cztyZXR1cm4gbmV3IEtCKERmKC4uLnIpKX1mdW5jdGlvbiBEZihuLGUsdCxzKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTE/bi5tb2RlbFRvcG9sb2d5IT1udWxsfHxuLndlaWdodFNwZWNzIT1udWxsP25ldyBmMChuKTooY29uc29sZS53YXJuKCJQbGVhc2UgY2FsbCB0Zi5pby5mcm9tTWVtb3J5KCkgd2l0aCBvbmx5IG9uZSBhcmd1bWVudC4gVGhlIGFyZ3VtZW50IHNob3VsZCBiZSBvZiB0eXBlIE1vZGVsQXJ0aWZhY3RzLiBUaGUgbXVsdGktYXJndW1lbnQgc2lnbmF0dXJlIG9mIHRmLmlvLmZyb21NZW1vcnkoKSBoYXMgYmVlbiBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS4iKSxuZXcgZjAoe21vZGVsVG9wb2xvZ3k6bn0pKTooY29uc29sZS53YXJuKCJQbGVhc2UgY2FsbCB0Zi5pby5mcm9tTWVtb3J5KCkgd2l0aCBvbmx5IG9uZSBhcmd1bWVudC4gVGhlIGFyZ3VtZW50IHNob3VsZCBiZSBvZiB0eXBlIE1vZGVsQXJ0aWZhY3RzLiBUaGUgbXVsdGktYXJndW1lbnQgc2lnbmF0dXJlIG9mIHRmLmlvLmZyb21NZW1vcnkoKSBoYXMgYmVlbiBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS4iKSxuZXcgZjAoe21vZGVsVG9wb2xvZ3k6bix3ZWlnaHRTcGVjczplLHdlaWdodERhdGE6dCx0cmFpbmluZ0NvbmZpZzpzfSkpfWZ1bmN0aW9uIFlCKG4pe3JldHVybiBuZXcgUUkobil9ZnVuY3Rpb24gUUIobil7cmV0dXJuIG5ldyBRSShuKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBzdz1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsQ29tcG9zaXRlQXJyYXlCdWZmZXI6JHIsYnJvd3NlckZpbGVzOlZCLGJyb3dzZXJIVFRQUmVxdWVzdDpxQixjb25jYXRlbmF0ZUFycmF5QnVmZmVyczpfJCxjb3B5TW9kZWw6STMsZGVjb2RlV2VpZ2h0czpSJCxkZWNvZGVXZWlnaHRzU3RyZWFtOkEkLGVuY29kZVdlaWdodHM6TTAsZnJvbU1lbW9yeTpYQixmcm9tTWVtb3J5U3luYzpEZixnZXRMb2FkSGFuZGxlcnM6cDMsZ2V0TW9kZWxBcnRpZmFjdHNGb3JKU09OOlUxLGdldE1vZGVsQXJ0aWZhY3RzRm9ySlNPTlN5bmM6VzEsZ2V0TW9kZWxBcnRpZmFjdHNJbmZvRm9ySlNPTjpzaCxnZXRTYXZlSGFuZGxlcnM6RiQsZ2V0V2VpZ2h0U3BlY3M6RWYsaHR0cDpudyxpc0hUVFBTY2hlbWU6cTAsbGlzdE1vZGVsczpDMyxsb2FkV2VpZ2h0czpVQixtb3ZlTW9kZWw6VDMscmVnaXN0ZXJMb2FkUm91dGVyOmgzLHJlZ2lzdGVyU2F2ZVJvdXRlcjpkMyxyZW1vdmVNb2RlbDokMyx3ZWlnaHRzTG9hZGVyRmFjdG9yeTpYSSx3aXRoU2F2ZUhhbmRsZXI6WUIsd2l0aFNhdmVIYW5kbGVyU3luYzpRQn0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBaQihuLGUsdCl7Y29uc3Qgcz1PKG4sImxhYmVscyIsImNvbmZ1c2lvbk1hdHJpeCIpLHI9TyhlLCJwcmVkaWN0aW9ucyIsImNvbmZ1c2lvbk1hdHJpeCIpO0EodD09bnVsbHx8dD4wJiZOdW1iZXIuaXNJbnRlZ2VyKHQpLCgpPT5gSWYgcHJvdmlkZWQsIG51bUNsYXNzZXMgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIsIGJ1dCBnb3QgJHt0fWApLEEocy5yYW5rPT09MSwoKT0+YEV4cGVjdGVkIHRoZSByYW5rIG9mIGxhYmVscyB0byBiZSAxLCBidXQgZ290ICR7cy5yYW5rfWApLEEoci5yYW5rPT09MSwoKT0+YEV4cGVjdGVkIHRoZSByYW5rIG9mIHByZWRpY3Rpb25zIHRvIGJlIDEsIGJ1dCBnb3QgJHtyLnJhbmt9YCksQShzLnNoYXBlWzBdPT09ci5zaGFwZVswXSwoKT0+YE1pc21hdGNoIGluIHRoZSBudW1iZXIgb2YgZXhhbXBsZXM6ICR7cy5zaGFwZVswXX0gdnMuICR7ci5zaGFwZVswXX0uIExhYmVscyBhbmQgcHJlZGljdGlvbnMgc2hvdWxkIGhhdmUgdGhlIHNhbWUgbnVtYmVyIG9mIGVsZW1lbnRzLmApLEEodD4wJiZOdW1iZXIuaXNJbnRlZ2VyKHQpLCgpPT5gbnVtQ2xhc3NlcyBpcyByZXF1aXJlZCB0byBiZSBhIHBvc2l0aXZlIGludGVnZXIsIGJ1dCBnb3QgJHt0fWApO2NvbnN0IG89eWwoTmUocywiaW50MzIiKSx0KSxpPXlsKE5lKHIsImludDMyIiksdCksYT10dChvKSxsPVhlKGEsaSk7cmV0dXJuIE5lKGwsImludDMyIil9Y29uc3QgSkI9Ryh7Y29uZnVzaW9uTWF0cml4XzpaQn0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGVWPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxjb25mdXNpb25NYXRyaXg6SkJ9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovbGV0IFZpLF9rPSExO2Z1bmN0aW9uIFpJKG4sZT0zKXtpZihlPjQpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY29uc3RydWN0IFRlbnNvciB3aXRoIG1vcmUgdGhhbiA0IGNoYW5uZWxzIGZyb20gcGl4ZWxzLiIpO2lmKG49PW51bGwpdGhyb3cgbmV3IEVycm9yKCJwaXhlbHMgcGFzc2VkIHRvIHRmLmJyb3dzZXIuZnJvbVBpeGVscygpIGNhbiBub3QgYmUgbnVsbCIpO2xldCB0PSExLHM9ITEscj0hMSxvPSExLGk9ITEsYT0hMTtpZihuLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KXQ9ITA7ZWxzZSBpZih0eXBlb2YgSW1hZ2VEYXRhPCJ1IiYmbiBpbnN0YW5jZW9mIEltYWdlRGF0YSlzPSEwO2Vsc2UgaWYodHlwZW9mIEhUTUxWaWRlb0VsZW1lbnQ8InUiJiZuIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudClyPSEwO2Vsc2UgaWYodHlwZW9mIEhUTUxJbWFnZUVsZW1lbnQ8InUiJiZuIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudClvPSEwO2Vsc2UgaWYobi5nZXRDb250ZXh0IT1udWxsKWk9ITA7ZWxzZSBpZih0eXBlb2YgSW1hZ2VCaXRtYXA8InUiJiZuIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXApYT0hMDtlbHNlIHRocm93IG5ldyBFcnJvcihgcGl4ZWxzIHBhc3NlZCB0byB0Zi5icm93c2VyLmZyb21QaXhlbHMoKSBtdXN0IGJlIGVpdGhlciBhbiBIVE1MVmlkZW9FbGVtZW50LCBIVE1MSW1hZ2VFbGVtZW50LCBIVE1MQ2FudmFzRWxlbWVudCwgSW1hZ2VEYXRhIGluIGJyb3dzZXIsIG9yIE9mZnNjcmVlbkNhbnZhcywgSW1hZ2VEYXRhIGluIHdlYndvcmtlciBvciB7ZGF0YTogVWludDMyQXJyYXksIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyfSwgYnV0IHdhcyAke24uY29uc3RydWN0b3IubmFtZX1gKTtpZih6YyhJZixqLmJhY2tlbmROYW1lKSE9bnVsbCl7Y29uc3QgeT17cGl4ZWxzOm59LHc9e251bUNoYW5uZWxzOmV9O3JldHVybiBqLnJ1bktlcm5lbChJZix5LHcpfWNvbnN0W2MsaF09cj9bbi52aWRlb1dpZHRoLG4udmlkZW9IZWlnaHRdOltuLndpZHRoLG4uaGVpZ2h0XTtsZXQgcDtpZihpKXA9bi5nZXRDb250ZXh0KCIyZCIpLmdldEltYWdlRGF0YSgwLDAsYyxoKS5kYXRhO2Vsc2UgaWYoc3x8dClwPW4uZGF0YTtlbHNlIGlmKG98fHJ8fGEpe2lmKFZpPT1udWxsKWlmKHR5cGVvZiBkb2N1bWVudD4idSIpaWYodHlwZW9mIE9mZnNjcmVlbkNhbnZhczwidSImJnR5cGVvZiBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ8InUiKVZpPW5ldyBPZmZzY3JlZW5DYW52YXMoMSwxKS5nZXRDb250ZXh0KCIyZCIpO2Vsc2UgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcGFyc2UgaW5wdXQgaW4gY3VycmVudCBjb250ZXh0LiBSZWFzb246IE9mZnNjcmVlbkNhbnZhcyBDb250ZXh0MkQgcmVuZGVyaW5nIGlzIG5vdCBzdXBwb3J0ZWQuIik7ZWxzZSBWaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIse3dpbGxSZWFkRnJlcXVlbnRseTohMH0pO1ZpLmNhbnZhcy53aWR0aD1jLFZpLmNhbnZhcy5oZWlnaHQ9aCxWaS5kcmF3SW1hZ2UobiwwLDAsYyxoKSxwPVZpLmdldEltYWdlRGF0YSgwLDAsYyxoKS5kYXRhfWxldCBmO2lmKGU9PT00KWY9bmV3IEludDMyQXJyYXkocCk7ZWxzZXtjb25zdCB5PWMqaDtmPW5ldyBJbnQzMkFycmF5KHkqZSk7Zm9yKGxldCB3PTA7dzx5O3crKylmb3IobGV0IGI9MDtiPGU7KytiKWZbdyplK2JdPXBbdyo0K2JdfXJldHVybiB6YihmLFtoLGMsZV0sImludDMyIil9ZnVuY3Rpb24gdFYobil7cmV0dXJuIG4hPW51bGwmJm4uZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl9ZnVuY3Rpb24gblYoKXtyZXR1cm4gdHlwZW9mIHdpbmRvdzwidSImJnR5cGVvZiBJbWFnZUJpdG1hcDwidSImJndpbmRvdy5oYXNPd25Qcm9wZXJ0eSgiY3JlYXRlSW1hZ2VCaXRtYXAiKX1mdW5jdGlvbiBzVihuKXtyZXR1cm4gbiE9bnVsbCYmbi53aWR0aCE9PTAmJm4uaGVpZ2h0IT09MH1mdW5jdGlvbiByVihuKXtyZXR1cm4gblYoKSYmIShuIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXApJiZzVihuKSYmIXRWKG4pfWFzeW5jIGZ1bmN0aW9uIG9WKG4sZT0zKXtsZXQgdD1udWxsO2lmKG9lKCkuZ2V0Qm9vbCgiV1JBUF9UT19JTUFHRUJJVE1BUCIpJiZyVihuKSl7bGV0IHM7dHJ5e3M9YXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAobix7cHJlbXVsdGlwbHlBbHBoYToibm9uZSJ9KX1jYXRjaHtzPW51bGx9cyE9bnVsbCYmcy53aWR0aD09PW4ud2lkdGgmJnMuaGVpZ2h0PT09bi5oZWlnaHQ/dD1zOnQ9bn1lbHNlIHQ9bjtyZXR1cm4gWkkodCxlKX1mdW5jdGlvbiBKSShuKXtpZihuLnJhbmshPT0yJiZuLnJhbmshPT0zKXRocm93IG5ldyBFcnJvcihgdG9QaXhlbHMgb25seSBzdXBwb3J0cyByYW5rIDIgb3IgMyB0ZW5zb3JzLCBnb3QgcmFuayAke24ucmFua30uYCk7Y29uc3QgZT1uLnJhbms9PT0yPzE6bi5zaGFwZVsyXTtpZihlPjR8fGU9PT0yKXRocm93IG5ldyBFcnJvcihgdG9QaXhlbHMgb25seSBzdXBwb3J0cyBkZXB0aCBvZiBzaXplIDEsIDMgb3IgNCBidXQgZ290ICR7ZX1gKTtpZihuLmR0eXBlIT09ImZsb2F0MzIiJiZuLmR0eXBlIT09ImludDMyIil0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHR5cGUgZm9yIHRvUGl4ZWxzOiAke24uZHR5cGV9LiBQbGVhc2UgdXNlIGZsb2F0MzIgb3IgaW50MzIgdGVuc29ycy5gKX1mdW5jdGlvbiBpVihuKXtjb25zdCBlPW4/LmFscGhhfHwxO2lmKGU+MXx8ZTwwKXRocm93IG5ldyBFcnJvcihgQWxwaGEgdmFsdWUgJHtlfSBpcyBzdXBwb2VkIHRvIGJlIGluIHJhbmdlIFswIC0gMV0uYCl9YXN5bmMgZnVuY3Rpb24gYVYobixlKXtsZXQgdD1PKG4sImltZyIsInRvUGl4ZWxzIik7aWYoIShuIGluc3RhbmNlb2YgZHQpKXtjb25zdCBjPXQ7dD1OZShjLCJpbnQzMiIpLGMuZGlzcG9zZSgpfUpJKHQpO2NvbnN0W3Mscl09dC5zaGFwZS5zbGljZSgwLDIpLG89dC5yYW5rPT09Mj8xOnQuc2hhcGVbMl0saT1hd2FpdCB0LmRhdGEoKSxhPXQuZHR5cGU9PT0iZmxvYXQzMiI/MjU1OjEsbD1uZXcgVWludDhDbGFtcGVkQXJyYXkocipzKjQpO2ZvcihsZXQgYz0wO2M8cypyOysrYyl7Y29uc3QgaD1bMCwwLDAsMjU1XTtmb3IobGV0IGY9MDtmPG87ZisrKXtjb25zdCBnPWlbYypvK2ZdO2lmKHQuZHR5cGU9PT0iZmxvYXQzMiIpe2lmKGc8MHx8Zz4xKXRocm93IG5ldyBFcnJvcihgVGVuc29yIHZhbHVlcyBmb3IgYSBmbG9hdDMyIFRlbnNvciBtdXN0IGJlIGluIHRoZSByYW5nZSBbMCAtIDFdIGJ1dCBlbmNvdW50ZXJlZCAke2d9LmApfWVsc2UgaWYodC5kdHlwZT09PSJpbnQzMiImJihnPDB8fGc+MjU1KSl0aHJvdyBuZXcgRXJyb3IoYFRlbnNvciB2YWx1ZXMgZm9yIGEgaW50MzIgVGVuc29yIG11c3QgYmUgaW4gdGhlIHJhbmdlIFswIC0gMjU1XSBidXQgZW5jb3VudGVyZWQgJHtnfS5gKTtvPT09MT8oaFswXT1nKmEsaFsxXT1nKmEsaFsyXT1nKmEpOmhbZl09ZyphfWNvbnN0IHA9Yyo0O2xbcCswXT1NYXRoLnJvdW5kKGhbMF0pLGxbcCsxXT1NYXRoLnJvdW5kKGhbMV0pLGxbcCsyXT1NYXRoLnJvdW5kKGhbMl0pLGxbcCszXT1NYXRoLnJvdW5kKGhbM10pfWlmKGUhPW51bGwpe19rfHx6Yyh4bSxqLmJhY2tlbmROYW1lKSE9bnVsbCYmKGNvbnNvbGUud2FybigidGYuYnJvd3Nlci50b1BpeGVscyBpcyBub3QgZWZmaWNpZW50IHRvIGRyYXcgdGVuc29yIG9uIGNhbnZhcy4gUGxlYXNlIHRyeSB0Zi5icm93c2VyLmRyYXcgaW5zdGVhZC4iKSxfaz0hMCksZS53aWR0aD1yLGUuaGVpZ2h0PXM7Y29uc3QgYz1lLmdldENvbnRleHQoIjJkIiksaD1uZXcgSW1hZ2VEYXRhKGwscixzKTtjLnB1dEltYWdlRGF0YShoLDAsMCl9cmV0dXJuIHQhPT1uJiZ0LmRpc3Bvc2UoKSxsfWZ1bmN0aW9uIGxWKG4sZSx0KXtsZXQgcz1PKG4sImltZyIsImRyYXciKTtpZighKG4gaW5zdGFuY2VvZiBkdCkpe2NvbnN0IGk9cztzPU5lKGksImludDMyIiksaS5kaXNwb3NlKCl9SkkocyksaVYodD8uaW1hZ2VPcHRpb25zKTtjb25zdCByPXtpbWFnZTpzfSxvPXtjYW52YXM6ZSxvcHRpb25zOnR9O2oucnVuS2VybmVsKHhtLHIsbyl9Y29uc3QgdVY9Ryh7ZnJvbVBpeGVsc186Wkl9KSxjVj1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsZHJhdzpsVixmcm9tUGl4ZWxzOnVWLGZyb21QaXhlbHNBc3luYzpvVix0b1BpeGVsczphVn0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTtmdW5jdGlvbiBHZyhuLGUpe2NvbnN0IHQ9bi5zaGFwZS5sZW5ndGgscz1lLnNoYXBlLmxlbmd0aDtpZih0PDEpdGhyb3cgbmV3IEVycm9yKGB0Zi5nYXRoZXJORCgpIGV4cGVjdHMgdGhlIGlucHV0IHRvIGJlIHJhbmsgMSBvciBoaWdoZXIsIGJ1dCB0aGUgcmFuayB3YXMgJHt0fS5gKTtpZihzPDEpdGhyb3cgbmV3IEVycm9yKGB0Zi5nYXRoZXJORCgpIGV4cGVjdHMgdGhlIGluZGljZXMgdG8gYmUgcmFuayAxIG9yIGhpZ2hlciwgYnV0IHRoZSByYW5rIHdhcyAke3N9LmApO2lmKGUuZHR5cGUhPT0iaW50MzIiKXRocm93IG5ldyBFcnJvcihgdGYuZ2F0aGVyTkQoKSBleHBlY3RzIHRoZSBpbmRpY2VzIHRvIGJlIGludDMyIHR5cGUsIGJ1dCB0aGUgZHR5cGUgd2FzICR7ZS5kdHlwZX0uYCk7aWYoZS5zaGFwZVtzLTFdPnQpdGhyb3cgbmV3IEVycm9yKGBpbmRleCBpbm5lcm1vc3QgZGltZW5zaW9uIGxlbmd0aCBtdXN0IGJlIDw9IHRlbnNvciByYW5rOyBzYXc6ICR7ZS5zaGFwZVtzLTFdfSB2cy4gJHt0fWApO2lmKGNlKG4uc2hhcGUpPT09MCl0aHJvdyBuZXcgRXJyb3IoYFJlcXVlc3RlZCBtb3JlIHRoYW4gMCBlbnRyaWVzLCBidXQgaW5wdXQgaXMgZW1wdHkuIElucHV0IHNoYXBlOiAke24uc2hhcGV9LmApO2NvbnN0IHI9ZS5zaGFwZSxvPXJbci5sZW5ndGgtMV07bGV0IGk9MTtmb3IobGV0IHA9MDtwPHIubGVuZ3RoLTE7KytwKWkqPXJbcF07Y29uc3QgYT1uLnNoYXBlLGw9ci5zbGljZSgpO2wucG9wKCk7bGV0IGM9MTtmb3IobGV0IHA9bztwPHQ7KytwKWMqPWFbcF0sbC5wdXNoKGFbcF0pO2NvbnN0IGg9Wy4uLnplKG4uc2hhcGUpLm1hcChwPT5wL2MpLDFdLnNsaWNlKDAsbyk7cmV0dXJuW2wsaSxjLGhdfWNvbnN0IGRWPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxwcmVwYXJlQW5kVmFsaWRhdGU6R2d9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgSzA9LTIsaFY9LTE7ZnVuY3Rpb24gcncobixlLHQpe2NvbnN0IHM9bi5zaGFwZS5sZW5ndGg7QShzPT09ZS5sZW5ndGgsKCk9PmBFcnJvciBpbiBzbGljZSR7c31EOiBMZW5ndGggb2YgYmVnaW4gJHtlfSBtdXN0IG1hdGNoIHRoZSByYW5rIG9mIHRoZSBhcnJheSAoJHtzfSkuYCksQShzPT09dC5sZW5ndGgsKCk9PmBFcnJvciBpbiBzbGljZSR7c31EOiBMZW5ndGggb2Ygc2l6ZSAke3R9IG11c3QgbWF0Y2ggdGhlIHJhbmsgb2YgdGhlIGFycmF5ICgke3N9KS5gKTtmb3IobGV0IHI9MDtyPHM7KytyKUEoZVtyXSt0W3JdPD1uLnNoYXBlW3JdLCgpPT5gRXJyb3IgaW4gc2xpY2Uke3N9RDogYmVnaW5bJHtyfV0gKyBzaXplWyR7cn1dICgke2Vbcl0rdFtyXX0pIHdvdWxkIG92ZXJmbG93IGlucHV0LnNoYXBlWyR7cn1dICgke24uc2hhcGVbcl19KWApfWZ1bmN0aW9uIHBWKG4pe2NvbnN0IGU9W107bGV0IHQ9MDtmb3IoO24+MDspbiYxJiZlLnB1c2godCksbi89Mix0Kys7cmV0dXJuIGV9ZnVuY3Rpb24gb3cobixlLHQpe2NvbnN0IHM9W107Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspc1tyXT1NYXRoLmNlaWwoKGVbcl0tbltyXSkvdFtyXSk7cmV0dXJuIHN9ZnVuY3Rpb24gZTIobixlLHQscyl7Y29uc3Qgcj1bLi4ubl07Zm9yKGxldCBvPXIubGVuZ3RoO288cy5sZW5ndGg7bysrKXIucHVzaCgxKTtmb3IobGV0IG89MDtvPHQ7bysrKW89PT0wP3JbZV09MTooci5zcGxpY2UoZSwwLDEpLHIucG9wKCkpO3JldHVybiByfWZ1bmN0aW9uIHQyKG4sZSx0KXtyZXR1cm4gdDw9bj90OnQtKGUtMSl9ZnVuY3Rpb24gbjIobixlKXtjb25zdCB0PVtdO2ZvcihsZXQgcz0wO3M8bjtzKyspdC5wdXNoKGUrcyk7cmV0dXJuIHR9ZnVuY3Rpb24gZlYobixlLHQscyxyLG8saSxhLGwpe2NvbnN0IGM9bi5sZW5ndGg7bGV0IGg9bmV3IEFycmF5KGMpLHA9bmV3IEFycmF5KGMpLGY9bmV3IEFycmF5KGMpO2lmKGUubGVuZ3RoJiZ0PjApe2NvbnN0IGc9ZVswXSx5PXQrMTtoPXMyKGksZyx5LHMsbikscD1yMihhLGcseSxyLG4pLGY9ZTIobyxnLHksbil9ZWxzZSBmb3IobGV0IGc9MDtnPGM7ZysrKWhbZ109aTIoaSxzLG8sbixnLGwpLHBbZ109YTIoYSxyLG8sbixnLGwpLGZbZ109bzIobyxnLGwpO3JldHVybntiZWdpbjpoLGVuZDpwLHN0cmlkZXM6Zn19ZnVuY3Rpb24gczIobixlLHQscyxyKXtjb25zdCBvPVsuLi5yXSxpPW4yKHQsZSk7Zm9yKGxldCBhPTA7YTxvLmxlbmd0aDthKyspaWYoaS5pbmRleE9mKGEpPi0xKW9bYV09MDtlbHNle2NvbnN0IGw9dDIoZSx0LGEpO2xldCBjPXNbbF07biYxPDxsJiYoYz0wKSxvW2FdPWN9cmV0dXJuIG99ZnVuY3Rpb24gcjIobixlLHQscyxyKXtjb25zdCBvPVsuLi5yXSxpPW4yKHQsZSk7Zm9yKGxldCBhPTA7YTxvLmxlbmd0aDthKyspaWYoaS5pbmRleE9mKGEpPi0xKW9bYV09TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7ZWxzZXtjb25zdCBsPXQyKGUsdCxhKTtsZXQgYz1zW2xdO24mMTw8bCYmKGM9TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpLG9bYV09Y31mb3IobGV0IGE9MDthPG8ubGVuZ3RoO2ErKyl7Y29uc3QgbD1yW2FdO29bYV08MCYmKG9bYV0rPWwpLG9bYV09cmkoMCxvW2FdLHJbYV0pfXJldHVybiBvfWZ1bmN0aW9uIG8yKG4sZSx0KXtsZXQgcz1uW2VdO3JldHVybih0JjE8PGV8fHM9PW51bGwpJiYocz0xKSxzfWZ1bmN0aW9uIGkyKG4sZSx0LHMscixvKXtsZXQgaT1lW3JdO2NvbnN0IGE9dFtyXXx8MTsobiYxPDxyfHxvJjE8PHJ8fGk9PW51bGwpJiYoYT4wP2k9TnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI6aT1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUik7Y29uc3QgbD1zW3JdO3JldHVybiBpPDAmJihpKz1sKSxpPXJpKDAsaSxsLTEpLGl9ZnVuY3Rpb24gYTIobixlLHQscyxyLG8pe2xldCBpPWVbcl07Y29uc3QgYT10W3JdfHwxOyhuJjE8PHJ8fG8mMTw8cnx8aT09bnVsbCkmJihhPjA/aT1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUjppPU51bWJlci5NSU5fU0FGRV9JTlRFR0VSKTtjb25zdCBsPXNbcl07cmV0dXJuIGk8MCYmKGkrPWwpLGE+MD9pPXJpKDAsaSxsKTppPXJpKC0xLGksbC0xKSxpfWZ1bmN0aW9uIGl3KG4sZSx0KXtsZXQgcz10Lmxlbmd0aDtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKylpZih0W3JdPjEpe3M9cjticmVha31mb3IobGV0IHI9cysxO3I8dC5sZW5ndGg7cisrKWlmKGVbcl0+MHx8dFtyXSE9PW5bcl0pcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gYXcobixlKXtsZXQgdD1uLmxlbmd0aD4wP25bbi5sZW5ndGgtMV06MTtmb3IobGV0IHM9MDtzPG4ubGVuZ3RoLTE7cysrKXQrPW5bc10qZVtzXTtyZXR1cm4gdH1mdW5jdGlvbiBIZyhuLGUsdCl7bGV0IHM7Y29uc3Qgcj1uLnNoYXBlLmxlbmd0aDt0eXBlb2YgZT09Im51bWJlciI/cz1bZSwuLi5uZXcgQXJyYXkoci0xKS5maWxsKDApXTplLmxlbmd0aDxyP3M9ZS5jb25jYXQobmV3IEFycmF5KHItZS5sZW5ndGgpLmZpbGwoMCkpOnM9ZS5zbGljZSgpLHMuZm9yRWFjaChpPT57QShpIT09LTEsKCk9PiJzbGljZSgpIGRvZXMgbm90IHN1cHBvcnQgbmVnYXRpdmUgYmVnaW4gaW5kZXhpbmcuIil9KTtsZXQgbztyZXR1cm4gdD09bnVsbD9vPW5ldyBBcnJheShyKS5maWxsKC0xKTp0eXBlb2YgdD09Im51bWJlciI/bz1bdCwuLi5uZXcgQXJyYXkoci0xKS5maWxsKC0xKV06dC5sZW5ndGg8cj9vPXQuY29uY2F0KG5ldyBBcnJheShyLXQubGVuZ3RoKS5maWxsKC0xKSk6bz10LG89by5tYXAoKGksYSk9Pmk+PTA/aTooQShpPT09LTEsKCk9PmBOZWdhdGl2ZSBzaXplIHZhbHVlcyBzaG91bGQgYmUgZXhhY3RseSAtMSBidXQgZ290ICR7aX0gZm9yIHRoZSBzbGljZSgpIHNpemUgYXQgaW5kZXggJHthfS5gKSxuLnNoYXBlW2FdLXNbYV0pKSxbcyxvXX1mdW5jdGlvbiBsdyhuLGUsdCxzLHIsbyxpLGEsbCl7bGV0IGM7aWYocz09bnVsbD8oYz1uZXcgQXJyYXkoZS5sZW5ndGgpLGMuZmlsbCgxKSk6Yz1zLGkhPW51bGwmJihpJmktMSkhPT0wKXRocm93IG5ldyBFcnJvcigiTXVsdGlwbGUgZWxsaXBzZXMgaW4gc2xpY2UgaXMgbm90IGFsbG93ZWQuIik7bGV0IGg9ITE7Y29uc3QgcD17ZGltczpjLmxlbmd0aCxudW1BZGRBeGlzQWZ0ZXJFbGxpcHNpczowLGJlZ2luOmUuc2xpY2UoKSxlbmQ6dC5zbGljZSgpLHN0cmlkZXM6Yy5zbGljZSgpLGJlZ2luTWFzazpyLGVuZE1hc2s6byxlbGxpcHNpc01hc2s6aSxuZXdBeGlzTWFzazphLHNocmlua0F4aXNNYXNrOmx9O2ZvcihsZXQgJD0wOyQ8cC5kaW1zOyQrKyloJiYoMTw8JCZhKSE9PTAmJnAubnVtQWRkQXhpc0FmdGVyRWxsaXBzaXMrKywxPDwkJmkmJihoPSEwKTtofHwocC5lbGxpcHNpc01hc2t8PTE8PHAuZGltcyxwLmRpbXMrKyk7Y29uc3QgZj17ZGltczpuLmxlbmd0aCxiZWdpbk1hc2s6MCxlbmRNYXNrOjAsYmVnaW5WYWxpZDohMSxlbmRWYWxpZDohMX07bVYocCxmKTtsZXQgZz0hMCx5PSEwLHc9ITA7Y29uc3QgYj1bXSx2PVtdO2ZvcihsZXQgJD0wOyQ8bi5sZW5ndGg7KyskKXtpZihmLnN0cmlkZXNbJF09PT0wKXRocm93IEVycm9yKGBzdHJpZGVzWyR7JH1dIG11c3QgYmUgbm9uLXplcm9gKTtjb25zdCBrPSEhKGYuc2hyaW5rQXhpc01hc2smMTw8JCksVD1uWyRdO2lmKFQ9PT0tMSl7Yi5wdXNoKGs/MTotMSk7Y29udGludWV9Y29uc3QgRD1bZi5iZWdpbk1hc2smMTw8JCxmLmVuZE1hc2smMTw8JF0sTD1bZi5zdHJpZGVzWyRdPjA/MDotMSxmLnN0cmlkZXNbJF0+MD9UOlQtMV07aWYoayYmZi5zdHJpZGVzWyRdPD0wKXRocm93IEVycm9yKCJvbmx5IHN0cmlkZSAxIGFsbG93ZWQgb24gbm9uLXJhbmdlIGluZGV4aW5nLiIpO3c9dyYmZi5zdHJpZGVzWyRdPT09MTtjb25zdCB6PSEhKGYuYmVnaW5NYXNrJjE8PCQmJmYuZW5kTWFzayYxPDwkKTtpZihmLmJlZ2luVmFsaWQmJmYuZW5kVmFsaWQpe2lmKGspe2NvbnN0IE09Zi5iZWdpblskXTwwP1QrZi5iZWdpblskXTpmLmJlZ2luWyRdO2lmKGYuYmVnaW5bJF09TSxmLmVuZFskXT1mLmJlZ2luWyRdKzEsTTwwfHxNPj1UKXRocm93IEVycm9yKGBzbGljZSBpbmRleCAke2YuYmVnaW5bJF19IG9mIGRpbWVuc2lvbiAkeyR9IG91dCBvZiBib3VuZHMuYCl9ZWxzZSBmLmJlZ2luWyRdPU9rKGYuYmVnaW5bJF0sMCxmLnN0cmlkZXNbJF0sVCxELEwpLGYuZW5kWyRdPU9rKGYuZW5kWyRdLDEsZi5zdHJpZGVzWyRdLFQsRCxMKTtjb25zdCBFPWYuc3RyaWRlc1skXT09PTEmJmYuYmVnaW5bJF09PT0wJiZmLmVuZFskXT09PVQ7Zz1nJiZFLHk9eSYmKCQ9PT0wJiZmLnN0cmlkZXNbJF09PT0xfHxFKX1lbHNlIGc9ZyYmZi5zdHJpZGVzWyRdPT09MSYmeix5PXkmJigkPT09MCYmZi5zdHJpZGVzWyRdPT09MXx8eik7bGV0IEYsXz0hMTtpZihmLmJlZ2luVmFsaWQmJmYuZW5kVmFsaWQ/KEY9Zi5lbmRbJF0tZi5iZWdpblskXSxfPSEwKTprPyhGPTEsXz0hMCk6eiYmVD49MCYmKGYuc3RyaWRlc1skXTwwP0Y9LVQ6Rj1ULF89ITApLF8pe2xldCBFO0Y9PT0wfHxGPDAhPWYuc3RyaWRlc1skXTwwP0U9MDpFPU1hdGgudHJ1bmMoRi9mLnN0cmlkZXNbJF0pKyhGJWYuc3RyaWRlc1skXSE9PTA/MTowKSxiLnB1c2goRSl9ZWxzZSBiLnB1c2goLTEpfWZvcihsZXQgJD0wOyQ8Zi5maW5hbFNoYXBlR2F0aGVySW5kaWNlcy5sZW5ndGg7KyskKXtjb25zdCBrPWYuZmluYWxTaGFwZUdhdGhlckluZGljZXNbJF07az49MD92LnB1c2goYltrXSk6az09PUswJiZ2LnB1c2goMSl9cmV0dXJue2ZpbmFsU2hhcGVTcGFyc2U6di5maWx0ZXIoKCQsayk9PmYuZmluYWxTaGFwZUdhdGhlckluZGljZXNba10hPT1LMCksZmluYWxTaGFwZTp2LGlzSWRlbnRpdHk6ZyxzbGljZURpbTA6eSxpc1NpbXBsZVNsaWNlOncsYmVnaW46Zi5iZWdpbixlbmQ6Zi5lbmQsc3RyaWRlczpmLnN0cmlkZXN9fWZ1bmN0aW9uIG1WKG4sZSl7ZS5iZWdpbk1hc2s9MCxlLmVuZE1hc2s9MCxlLnNocmlua0F4aXNNYXNrPTA7bGV0IHQ9MDtlLmJlZ2luVmFsaWQ9bi5iZWdpbiE9bnVsbCxlLmVuZFZhbGlkPW4uZW5kIT1udWxsLGUuYmVnaW49bmV3IEFycmF5KGUuZGltcyksZS5lbmQ9bmV3IEFycmF5KGUuZGltcyksZS5zdHJpZGVzPW5ldyBBcnJheShlLmRpbXMpLGUuZmluYWxTaGFwZUdhdGhlckluZGljZXM9W10sZS5maW5hbFNoYXBlR2F0aGVySW5kaWNlc1NwYXJzZT1bXSxlLmlucHV0U2hhcGVHYXRoZXJJbmRpY2VzU3BhcnNlPW5ldyBBcnJheShlLmRpbXMpO2ZvcihsZXQgcz0wO3M8bi5kaW1zO3MrKylpZigxPDxzJm4uZWxsaXBzaXNNYXNrKXtjb25zdCByPU1hdGgubWluKGUuZGltcy0obi5kaW1zLXMpKzErbi5udW1BZGRBeGlzQWZ0ZXJFbGxpcHNpcyxlLmRpbXMpO2Zvcig7dDxyO3QrKyllLmJlZ2luW3RdPTAsZS5lbmRbdF09MCxlLnN0cmlkZXNbdF09MSxlLmJlZ2luTWFza3w9MTw8dCxlLmVuZE1hc2t8PTE8PHQsZS5maW5hbFNoYXBlR2F0aGVySW5kaWNlcy5wdXNoKHQpLGUuZmluYWxTaGFwZUdhdGhlckluZGljZXNTcGFyc2UucHVzaCgtMSksZS5pbnB1dFNoYXBlR2F0aGVySW5kaWNlc1NwYXJzZVt0XT1zfWVsc2UgaWYoMTw8cyZuLm5ld0F4aXNNYXNrKWUuZmluYWxTaGFwZUdhdGhlckluZGljZXMucHVzaChLMCksZS5maW5hbFNoYXBlR2F0aGVySW5kaWNlc1NwYXJzZS5wdXNoKC0xKTtlbHNle2lmKHQ9PT1lLmJlZ2luLmxlbmd0aCl0aHJvdyBFcnJvcihgSW5kZXggb3V0IG9mIHJhbmdlIHVzaW5nIGlucHV0IGRpbSAke3R9OyBpbnB1dCBoYXMgb25seSAke2UuZGltc30gZGltcywgJHtlLmJlZ2luLmxlbmd0aH0uYCk7bi5iZWdpbiE9bnVsbCYmKGUuYmVnaW5bdF09bi5iZWdpbltzXSksbi5lbmQhPW51bGwmJihlLmVuZFt0XT1uLmVuZFtzXSksZS5zdHJpZGVzW3RdPW4uc3RyaWRlc1tzXSxuLmJlZ2luTWFzayYxPDxzJiYoZS5iZWdpbk1hc2t8PTE8PHQpLG4uZW5kTWFzayYxPDxzJiYoZS5lbmRNYXNrfD0xPDx0KSxuLnNocmlua0F4aXNNYXNrJjE8PHM/KGUuZmluYWxTaGFwZUdhdGhlckluZGljZXMucHVzaChoViksZS5maW5hbFNoYXBlR2F0aGVySW5kaWNlc1NwYXJzZS5wdXNoKC0xKSxlLnNocmlua0F4aXNNYXNrfD0xPDx0KTooZS5maW5hbFNoYXBlR2F0aGVySW5kaWNlcy5wdXNoKHQpLGUuZmluYWxTaGFwZUdhdGhlckluZGljZXNTcGFyc2UucHVzaChzKSksZS5pbnB1dFNoYXBlR2F0aGVySW5kaWNlc1NwYXJzZVt0XT1zLHQrK319ZnVuY3Rpb24gT2sobixlLHQscyxyLG8pe2lmKHJbZV0pcmV0dXJuIHQ+MD9vW2VdOm9bZSsxJjFdO3tjb25zdCBpPW48MD9zK246bjtyZXR1cm4gaTxvWzBdP29bMF06aT5vWzFdP29bMV06aX19Y29uc3QgbDI9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGFzc2VydFBhcmFtc1ZhbGlkOnJ3LGNvbXB1dGVGbGF0T2Zmc2V0OmF3LGNvbXB1dGVPdXRTaGFwZTpvdyxnZXROb3JtYWxpemVkQXhlczpmVixpc1NsaWNlQ29udGlub3VzOml3LG1hc2tUb0F4ZXM6cFYscGFyc2VTbGljZVBhcmFtczpIZyxzbGljZUluZm86bHcsc3RhcnRGb3JBeGlzOmkyLHN0YXJ0SW5kaWNlc1dpdGhFbGlkZWREaW1zOnMyLHN0b3BGb3JBeGlzOmEyLHN0b3BJbmRpY2VzV2l0aEVsaWRlZERpbXM6cjIsc3RyaWRlc0ZvckF4aXM6bzIsc3RyaWRlc1dpdGhFbGlkZWREaW1zOmUyfSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKiBAbGljZW5zZSBTZWUgdGhlIExJQ0VOU0UgZmlsZS4gKi9jb25zdCBnVj0iNC4yMi4wIjsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyB1MntzdGF0aWMgc2dkKGUpe3JldHVybiBuZXcgamcoZSl9c3RhdGljIG1vbWVudHVtKGUsdCxzPSExKXtyZXR1cm4gbmV3IEpiKGUsdCxzKX1zdGF0aWMgcm1zcHJvcChlLHQ9Ljkscz0wLHI9bnVsbCxvPSExKXtyZXR1cm4gbmV3IGV3KGUsdCxzLHIsbyl9c3RhdGljIGFkYW0oZT0uMDAxLHQ9Ljkscz0uOTk5LHI9bnVsbCl7cmV0dXJuIG5ldyBRYihlLHQscyxyKX1zdGF0aWMgYWRhZGVsdGEoZT0uMDAxLHQ9Ljk1LHM9bnVsbCl7cmV0dXJuIG5ldyBYYihlLHQscyl9c3RhdGljIGFkYW1heChlPS4wMDIsdD0uOSxzPS45OTkscj1udWxsLG89MCl7cmV0dXJuIG5ldyBaYihlLHQscyxyLG8pfXN0YXRpYyBhZGFncmFkKGUsdD0uMSl7cmV0dXJuIG5ldyBZYihlLHQpfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBHaT11MjsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB5Vj10eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lPCJ1Ij9yZXF1ZXN0QW5pbWF0aW9uRnJhbWU6dHlwZW9mIHNldEltbWVkaWF0ZTwidSI/c2V0SW1tZWRpYXRlOm49Pm4oKTtmdW5jdGlvbiB1dygpe3JldHVybiBuZXcgUHJvbWlzZShuPT55VigoKT0+bigpKSl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gY3cobixlKXtjb25zdCB0PW5bMF0ubGVuZ3RoO24uZm9yRWFjaCgocixvKT0+e0Eoci5sZW5ndGg9PT10LCgpPT5gRXJyb3IgaW4gY29uY2F0JHt0fUQ6IHJhbmsgb2YgdGVuc29yc1ske299XSBtdXN0IGJlIHRoZSBzYW1lIGFzIHRoZSByYW5rIG9mIHRoZSByZXN0ICgke3R9KWApfSksQShlPj0wJiZlPHQsKCk9PmBFcnJvciBpbiBjb25jYXQke3R9RDogYXhpcyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgJHt0LTF9LmApO2NvbnN0IHM9blswXTtuLmZvckVhY2goKHIsbyk9Pntmb3IobGV0IGk9MDtpPHQ7aSsrKUEoaT09PWV8fHJbaV09PT1zW2ldLCgpPT5gRXJyb3IgaW4gY29uY2F0JHt0fUQ6IFNoYXBlIG9mIHRlbnNvcnNbJHtvfV0gKCR7cn0pIGRvZXMgbm90IG1hdGNoIHRoZSBzaGFwZSBvZiB0aGUgcmVzdCAoJHtzfSkgYWxvbmcgdGhlIG5vbi1jb25jYXRlbmF0ZWQgYXhpcyAke299LmApfSl9ZnVuY3Rpb24gV3IobixlKXtjb25zdCB0PW5bMF0uc2xpY2UoKTtmb3IobGV0IHM9MTtzPG4ubGVuZ3RoO3MrKyl0W2VdKz1uW3NdW2VdO3JldHVybiB0fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL3ZhciB5cjsoZnVuY3Rpb24obil7bltuLkZJUlNUX0RJTV9TSVpFPTBdPSJGSVJTVF9ESU1fU0laRSIsbltuLlZBTFVFX1JPV0lEUz0xXT0iVkFMVUVfUk9XSURTIixuW24uUk9XX0xFTkdUSFM9Ml09IlJPV19MRU5HVEhTIixuW24uUk9XX1NQTElUUz0zXT0iUk9XX1NQTElUUyIsbltuLlJPV19MSU1JVFM9NF09IlJPV19MSU1JVFMiLG5bbi5ST1dfU1RBUlRTPTVdPSJST1dfU1RBUlRTIn0pKHlyfHwoeXI9e30pKTtmdW5jdGlvbiBjMihuLGUsdCl7bGV0IHM9bmV3IEFycmF5O2lmKHQ9PW51bGwmJmU9PW51bGwpcmV0dXJuIHM7aWYoZT09bnVsbClmb3IoO3MubGVuZ3RoPG4rdC5sZW5ndGg7KXMucHVzaCgtMSk7ZWxzZSBzPWUuc2xpY2UoKTtpZih0PT1udWxsKXJldHVybiBzO2lmKG4rdC5sZW5ndGghPT1zLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoYHJ0IGlucHV0LnNoYXBlIGFuZCBzaGFwZT0ke2V9IGFyZSBpbmNvbXBhdGlibGU6IHJ0IGlucHV0LnJhbmsgPSAke24rdC5sZW5ndGh9LCBidXQgc2hhcGUucmFuayA9ICR7cy5sZW5ndGh9YCk7Zm9yKGxldCByPTE7cjx0Lmxlbmd0aDsrK3Ipe2NvbnN0IG89dFtyXSxpPXNbcy5sZW5ndGgtdC5sZW5ndGgrcl0sYT1zW2ldO2lmKG8+PTApaWYoYT49MCl7aWYoYSE9PW8pdGhyb3cgbmV3IEVycm9yKGBydCBpbnB1dC5zaGFwZSBhbmQgc2hhcGU9JHtlfSBhcmUgaW5jb21wYXRpYmxlOiBydCBpbnB1dC5zaGFwZVske3Irbn1dID0gJHtvfSBidXQgc2hhcGVbJHtyK259XSA9ICR7YX1gKX1lbHNlIHNbaV09b31yZXR1cm4gc31mdW5jdGlvbiBkMihuKXtjb25zdCBlPXtGSVJTVF9ESU1fU0laRTp5ci5GSVJTVF9ESU1fU0laRSxWQUxVRV9ST1dJRFM6eXIuVkFMVUVfUk9XSURTLFJPV19MRU5HVEhTOnlyLlJPV19MRU5HVEhTLFJPV19TUExJVFM6eXIuUk9XX1NQTElUUyxST1dfTElNSVRTOnlyLlJPV19MSU1JVFMsUk9XX1NUQVJUUzp5ci5ST1dfU1RBUlRTfSx0PVtdO2Zvcihjb25zdCBzIG9mIG4paWYocyBpbiBlKXQucHVzaChlW3NdKTtlbHNlIGJyZWFrO3JldHVybiB0fWZ1bmN0aW9uIGgyKG4pe3JldHVybiBuLmxlbmd0aD09PTA/MDpuWzBdPT09eXIuRklSU1RfRElNX1NJWkU/bi5sZW5ndGgtMTpuLmxlbmd0aH1mdW5jdGlvbiBwMihuLGUpe2lmKG49PW51bGx8fGU9PW51bGwpcmV0dXJuO2NvbnN0IHQ9bi5sZW5ndGgscz1lLmxlbmd0aDtpZih0Pj1zKXRocm93IG5ldyBFcnJvcihgZGVmYXVsdFZhbHVlLnNoYXBlPSR7bn0gYW5kIHJhZ2dlZCB0ZW5zb3IgZmxhdFZhbHVlcy5zaGFwZT0ke2V9LCBhcmUgaW5jb21wYXRpYmxlOiBkZWZhdWx0VmFsdWUucmFuayA9ICR7dH0gbXVzdCBiZSBsZXNzIHRoYW4gcmFnZ2VkIHRlbnNvciBpbnB1dCBmbGF0VmFsdWVzLnJhbmsgPSAke3N9KWApO2ZvcihsZXQgcj0wO3I8TWF0aC5taW4odCxzLTEpOysrcil7Y29uc3Qgbz1uW3JdLGk9ZVtyKzFdO2lmKG8+PTAmJmk+PTAmJm8hPT0xJiZvIT09aSl0aHJvdyBuZXcgRXJyb3IoYGRlZmF1bHRWYWx1ZS5zaGFwZT0ke259LCBhbmQgcmFnZ2VkIHRlbnNvciBpbnB1dCBmbGF0VmFsdWVzLnNoYXBlPSR7ZX0gYXJlIGluY29tcGF0aWJsZTogZGVmYXVsdFZhbHVlLnNoYXBlWyR7ci1uLmxlbmd0aH1dID0gJHtvfSBidXQgcmFnZ2VkIHRlbnNvciBpbnB1dC5mbGF0VmFsdWVzLnNoYXBlWyR7ci1uLmxlbmd0aH1dID0gJHtpfWApfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBkdz0zMDtmdW5jdGlvbiBxZyhuKXtyZXR1cm4gbjw9ZHc/bjprZihuLE1hdGguZmxvb3IoTWF0aC5zcXJ0KG4pKSl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gaHcobixlLHQpe2NvbnN0IHM9dCoodHlwZW9mIG49PSJudW1iZXIiP246blswXSkscj1lKih0eXBlb2Ygbj09Im51bWJlciI/bjpuWzFdKTtyZXR1cm5bcyxyXX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBTaChuLGUsdCxzPSEwKXtsZXQgcj1bXTtpZihzKXI9ci5jb25jYXQoZS5zbGljZSgwKSksci5wdXNoKG5bMF0vdCkscj1yLmNvbmNhdChuLnNsaWNlKDEpKTtlbHNle3I9ci5jb25jYXQoblswXSk7Y29uc3Qgbz1lLmxlbmd0aDtmb3IobGV0IGk9MDtpPG87KytpKXI9ci5jb25jYXQoW25baSsxXS9lW2ldLGVbaV1dKTtyPXIuY29uY2F0KG4uc2xpY2UobysxKSl9cmV0dXJuIHJ9ZnVuY3Rpb24gTmgobixlLHQ9ITApe2NvbnN0IHM9W107aWYodCl7cy5wdXNoKGUpO2ZvcihsZXQgcj1lKzE7cjxuOysrcilyPD0yKmU/KHMucHVzaChyKSxzLnB1c2goci0oZSsxKSkpOnMucHVzaChyKX1lbHNle2NvbnN0IHI9W10sbz1bXTtmb3IobGV0IGk9MTtpPG47KytpKWk+PWUqMisxfHxpJTI9PT0xP28ucHVzaChpKTpyLnB1c2goaSk7cy5wdXNoKC4uLnIpLHMucHVzaCgwKSxzLnB1c2goLi4ubyl9cmV0dXJuIHN9ZnVuY3Rpb24ga2gobixlLHQscz0hMCl7Y29uc3Qgcj1bXTtzP3IucHVzaChuWzBdL3QpOnIucHVzaChuWzBdKnQpO2ZvcihsZXQgbz0xO288bi5sZW5ndGg7KytvKW88PWUubGVuZ3RoP3M/ci5wdXNoKGVbby0xXSpuW29dKTpyLnB1c2gobltvXS9lW28tMV0pOnIucHVzaChuW29dKTtyZXR1cm4gcn1mdW5jdGlvbiBwdyhuLGUpe2NvbnN0IHQ9WzBdO2ZvcihsZXQgcz0wO3M8ZTsrK3MpdC5wdXNoKG5bc11bMF0pO3JldHVybiB0fWZ1bmN0aW9uIGZ3KG4sZSx0KXtjb25zdCBzPW4uc2xpY2UoMCwxKTtmb3IobGV0IHI9MDtyPHQ7KytyKXMucHVzaChuW3IrMV0tZVtyXVswXS1lW3JdWzFdKTtyZXR1cm4gc30vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBLZz0xLjc1ODA5OTM0MDg0NzM3NjgsWGc9MS4wNTA3MDA5ODczNTU0ODA1Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IG13PS4zMjc1OTExLGd3PS4yNTQ4Mjk1OTIseXc9LS4yODQ0OTY3MzYseHc9MS40MjE0MTM3NDEsYnc9LTEuNDUzMTUyMDI3LHd3PTEuMDYxNDA1NDI5Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGJvKG4sZSl7aWYobi5sZW5ndGghPT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBtZXJnZSByZWFsIGFuZCBpbWFnIGFycmF5cyBvZiBkaWZmZXJlbnQgbGVuZ3Rocy4gcmVhbDoke24ubGVuZ3RofSwgaW1hZzogJHtlLmxlbmd0aH0uYCk7Y29uc3QgdD1uZXcgRmxvYXQzMkFycmF5KG4ubGVuZ3RoKjIpO2ZvcihsZXQgcz0wO3M8dC5sZW5ndGg7cys9Mil0W3NdPW5bcy8yXSx0W3MrMV09ZVtzLzJdO3JldHVybiB0fWZ1bmN0aW9uIGYyKG4pe2NvbnN0IGU9bmV3IEZsb2F0MzJBcnJheShuLmxlbmd0aC8yKSx0PW5ldyBGbG9hdDMyQXJyYXkobi5sZW5ndGgvMik7Zm9yKGxldCBzPTA7czxuLmxlbmd0aDtzKz0yKWVbcy8yXT1uW3NdLHRbcy8yXT1uW3MrMV07cmV0dXJue3JlYWw6ZSxpbWFnOnR9fWZ1bmN0aW9uIG0yKG4pe2NvbnN0IGU9TWF0aC5jZWlsKG4ubGVuZ3RoLzQpLHQ9bmV3IEZsb2F0MzJBcnJheShlKSxzPW5ldyBGbG9hdDMyQXJyYXkoZSk7Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKz00KXRbTWF0aC5mbG9vcihyLzQpXT1uW3JdLHNbTWF0aC5mbG9vcihyLzQpXT1uW3IrMV07cmV0dXJue3JlYWw6dCxpbWFnOnN9fWZ1bmN0aW9uIGcyKG4pe2NvbnN0IGU9TWF0aC5mbG9vcihuLmxlbmd0aC80KSx0PW5ldyBGbG9hdDMyQXJyYXkoZSkscz1uZXcgRmxvYXQzMkFycmF5KGUpO2ZvcihsZXQgcj0yO3I8bi5sZW5ndGg7cis9NCl0W01hdGguZmxvb3Ioci80KV09bltyXSxzW01hdGguZmxvb3Ioci80KV09bltyKzFdO3JldHVybntyZWFsOnQsaW1hZzpzfX1mdW5jdGlvbiB2dyhuLGUpe2NvbnN0IHQ9bltlKjJdLHM9bltlKjIrMV07cmV0dXJue3JlYWw6dCxpbWFnOnN9fWZ1bmN0aW9uIHkyKG4sZSx0LHMpe25bcyoyXT1lLG5bcyoyKzFdPXR9ZnVuY3Rpb24geDIobixlKXtjb25zdCB0PW5ldyBGbG9hdDMyQXJyYXkobi8yKSxzPW5ldyBGbG9hdDMyQXJyYXkobi8yKTtmb3IobGV0IHI9MDtyPE1hdGguY2VpbChuLzIpO3IrKyl7Y29uc3Qgbz0oZT8yOi0yKSpNYXRoLlBJKihyL24pO3Rbcl09TWF0aC5jb3Mobyksc1tyXT1NYXRoLnNpbihvKX1yZXR1cm57cmVhbDp0LGltYWc6c319ZnVuY3Rpb24gYjIobixlLHQpe2NvbnN0IHM9KHQ/MjotMikqTWF0aC5QSSoobi9lKSxyPU1hdGguY29zKHMpLG89TWF0aC5zaW4ocyk7cmV0dXJue3JlYWw6cixpbWFnOm99fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IG0wPSItPiIseFY9Ly0+L2csRms9IiwiLExrPSIuLi4iO2Z1bmN0aW9uIFN3KG4sZSl7bj1uLnJlcGxhY2UoL1xzL2csIiIpO2NvbnN0IHQ9KG4ubGVuZ3RoLW4ucmVwbGFjZSh4ViwiIikubGVuZ3RoKS9tMC5sZW5ndGg7aWYodDwxKXRocm93IG5ldyBFcnJvcigiRXF1YXRpb25zIHdpdGhvdXQgYW4gYXJyb3cgYXJlIG5vdCBzdXBwb3J0ZWQuIik7aWYodD4xKXRocm93IG5ldyBFcnJvcihgRXF1YXRpb24gbXVzdCBjb250YWluIGV4YWN0bHkgb25lIGFycm93ICgiJHttMH0iKS5gKTtjb25zdFtzLHJdPW4uc3BsaXQobTApO0Eocy5pbmRleE9mKExrKT09PS0xLCgpPT5gVGhlIGVsbGlwc2lzIG5vdGF0aW9uICgiJHtMa30iKSBpcyBub3Qgc3VwcG9ydGVkIHlldC5gKTtjb25zdCBvPXMuc3BsaXQoRmspLGk9by5sZW5ndGg7aWYoZSE9PWkpdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCAke2l9IGlucHV0IHRlbnNvcnMsIHJlY2VpdmVkICR7ZX1gKTtpZihpPjIpdGhyb3cgbmV3IEVycm9yKCJTdXBwb3J0IGZvciBtb3JlIHRoYW4gMiBpbnB1dCB0ZW5zb3JzIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQuIik7Y29uc3QgYT1bXTtmb3IobGV0IGY9MDtmPHIubGVuZ3RoOysrZil7Y29uc3QgZz1yW2ZdO2lmKCFvLnNvbWUoeT0+eS5pbmRleE9mKGcpIT09LTEpKXRocm93IG5ldyBFcnJvcihgT3V0cHV0IHN1YnNjcmlwdHMgY29udGFpbiB0aGUgbGFiZWwgJHtnfSBub3QgcHJlc2VudCBpbiB0aGUgaW5wdXQgc3Vic2NyaXB0cy5gKTthLmluZGV4T2YoZyk9PT0tMSYmYS5wdXNoKGcpfWZvcihsZXQgZj0wO2Y8cy5sZW5ndGg7KytmKXtjb25zdCBnPXNbZl07YS5pbmRleE9mKGcpPT09LTEmJmchPT1GayYmYS5wdXNoKGcpfWNvbnN0IGw9bmV3IEFycmF5KG8ubGVuZ3RoKTtmb3IobGV0IGY9MDtmPGk7KytmKXtpZihuZXcgU2V0KG9bZl0uc3BsaXQoIiIpKS5zaXplIT09b1tmXS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBGb3VuZCBkdXBsaWNhdGUgYXhlcyBpbiBpbnB1dCBjb21wb25lbnQgJHtvW2ZdfS4gU3VwcG9ydCBmb3IgZHVwbGljYXRlIGF4ZXMgaW4gaW5wdXQgaXMgbm90IGltcGxlbWVudGVkIHlldC5gKTtsW2ZdPVtdO2ZvcihsZXQgZz0wO2c8b1tmXS5sZW5ndGg7KytnKWxbZl0ucHVzaChhLmluZGV4T2Yob1tmXVtnXSkpfWNvbnN0IGM9YS5sZW5ndGgsaD1yLmxlbmd0aCxwPVtdO2ZvcihsZXQgZj1oO2Y8YzsrK2YpcC5wdXNoKGYpO3JldHVybnthbGxEaW1zOmEsc3VtbWVkRGltczpwLGlkRGltczpsfX1mdW5jdGlvbiBOdyhuLGUpe2xldCB0PW5ldyBBcnJheShuKTt0LmZpbGwoLTEpO2ZvcihsZXQgcj0wO3I8ZS5sZW5ndGg7KytyKXRbZVtyXV09cjtjb25zdCBzPVtdO2ZvcihsZXQgcj0wO3I8bjsrK3IpdFtyXT09PS0xJiZzLnB1c2gocik7cmV0dXJuIHQ9dC5maWx0ZXIocj0+ciE9PS0xKSx7cGVybXV0YXRpb25JbmRpY2VzOnQsZXhwYW5kRGltczpzfX1mdW5jdGlvbiBrdyhuLGUsdCl7Y29uc3Qgcz1uZXcgQXJyYXkobik7Zm9yKGxldCByPTA7cjx0Lmxlbmd0aDsrK3Ipe2NvbnN0IG89dFtyXS5zaGFwZTtmb3IobGV0IGk9MDtpPGVbcl0ubGVuZ3RoOysraSlzW2Vbcl1baV1dPT09dm9pZCAwP3NbZVtyXVtpXV09b1tpXTpBKHNbZVtyXVtpXV09PT1vW2ldLCgpPT5gRXhwZWN0ZWQgZGltZW5zaW9uICR7c1tlW3JdW2ldXX0gYXQgYXhpcyAke2l9IG9mIGlucHV0IHNoYXBlZCAke0pTT04uc3RyaW5naWZ5KG8pfSwgYnV0IGdvdCBkaW1lbnNpb24gJHtvW2ldfWApfX1mdW5jdGlvbiBDdyhuLGUpe2NvbnN0IHQ9bixzPVtdO2xldCByPTA7bi5sZW5ndGg9PT0wJiZ0LnB1c2goLTEpLHI9bi5sZW5ndGgrMTtmb3IobGV0IGk9MDtpPHI7KytpKXMucHVzaChbXSk7Y29uc3Qgbz1bXTtmb3IobGV0IGk9MDtpPHQubGVuZ3RoOysraSl7Y29uc3QgYT10W2ldLGw9YlYoZSxhKTtmb3IoY29uc3QgYyBvZiBsKW8uaW5kZXhPZihjKT09PS0xJiYoc1tpXS5wdXNoKGMpLG8ucHVzaChjKSl9cmV0dXJue3BhdGg6dCxzdGVwczpzfX1mdW5jdGlvbiAkdyhuKXtyZXR1cm4gbi5ldmVyeSgoZSx0KT0+ZT09PXQpfWZ1bmN0aW9uIGJWKG4sZSl7Y29uc3QgdD1bXTtmb3IobGV0IHM9MDtzPG4ubGVuZ3RoOysrcykobltzXS5sZW5ndGg9PT0wfHxuW3NdLmluZGV4T2YoZSkhPT0tMXx8ZT09PS0xKSYmdC5wdXNoKHMpO3JldHVybiB0fWZ1bmN0aW9uIEl3KG4sZSx0PTApe2xldCBzPVtdO2lmKHR5cGVvZiBlPT0ibnVtYmVyIilBKG4uc2hhcGVbdF0lZT09PTAsKCk9PiJOdW1iZXIgb2Ygc3BsaXRzIG11c3QgZXZlbmx5IGRpdmlkZSB0aGUgYXhpcy4iKSxzPW5ldyBBcnJheShlKS5maWxsKG4uc2hhcGVbdF0vZSk7ZWxzZXtjb25zdCByPWUucmVkdWNlKChpLGEpPT4oYT09PS0xJiYoaSs9MSksaSksMCk7QShyPD0xLCgpPT4iVGhlcmUgc2hvdWxkIGJlIG9ubHkgb25lIG5lZ2F0aXZlIHZhbHVlIGluIHNwbGl0IGFycmF5LiIpO2NvbnN0IG89ZS5pbmRleE9mKC0xKTtpZihvIT09LTEpe2NvbnN0IGk9ZS5yZWR1Y2UoKGEsbCk9Pmw+MD9hK2w6YSk7ZVtvXT1uLnNoYXBlW3RdLWl9QShuLnNoYXBlW3RdPT09ZS5yZWR1Y2UoKGksYSk9PmkrYSksKCk9PiJUaGUgc3VtIG9mIHNpemVzIG11c3QgbWF0Y2ggdGhlIHNpemUgb2YgdGhlIGF4aXMgZGltZW5zaW9uLiIpLHM9ZX1yZXR1cm4gc30vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB3MihuKXtyZXR1cm5gUmVjZWl2ZWQgU3BhcnNlVGVuc29yIHdpdGggZGVuc2VTaGFwZVswXSA9IDAgYnV0CiAgaW5kaWNlcy5zaGFwZVswXSA9ICR7bn1gfWZ1bmN0aW9uIHYyKG4sZSl7cmV0dXJuYGluZGljZXMoJHtufSwgMCkgaXMgaW52YWxpZDogJHtlfSA8IDBgfWZ1bmN0aW9uIFMyKG4sZSx0KXtyZXR1cm5gaW5kaWNlcygke259LCAwKSBpcyBpbnZhbGlkOiAke2V9ID49ICR7dH1gfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE4yKG4sZSl7cmV0dXJuYG9ubHkgb25lIG91dHB1dCBkaW1lbnNpb24gbWF5IGJlIC0xLCBub3QgYm90aCAke259IGFuZCAke2V9YH1mdW5jdGlvbiBrMihuLGUpe3JldHVybmBzaXplICR7bn0gbXVzdCBiZSBub24tbmVnYXRpdmUsIG5vdCAke2V9YH1mdW5jdGlvbiBDMigpe3JldHVybiJyZXNoYXBlIGNhbm5vdCBpbmZlciB0aGUgbWlzc2luZyBpbnB1dCBzaXplIGZvciBhbiBlbXB0eSB0ZW5zb3IgdW5sZXNzIGFsbCBzcGVjaWZpZWQgaW5wdXQgc2l6ZXMgYXJlIG5vbi16ZXJvIn1mdW5jdGlvbiAkMihuLGUpe2NvbnN0IHQ9Y2Uobikscz1jZShlKTtyZXR1cm5gSW5wdXQgdG8gcmVzaGFwZSBpcyBhIFNwYXJzZVRlbnNvciB3aXRoICR7dH0KICBkZW5zZSB2YWx1ZXMsIGJ1dCB0aGUgcmVxdWVzdGVkIHNoYXBlIHJlcXVpcmVzIGEgbXVsdGlwbGUgb2YgJHtzfS4gaW5wdXRTaGFwZT0ke259IG91dHB1dFNoYXBlPSAke2V9YH1mdW5jdGlvbiBJMihuLGUpe2NvbnN0IHQ9Y2Uobikscz1jZShlKTtyZXR1cm5gSW5wdXQgdG8gcmVzaGFwZSBpcyBhIHRlbnNvciB3aXRoICR7dH0gZGVuc2UgdmFsdWVzLCBidXQgdGhlIHJlcXVlc3RlZCBzaGFwZSBoYXMgJHtzfS4gaW5wdXRTaGFwZT0ke259IG91dHB1dFNoYXBlPSR7ZX1gfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFgwKCl7cmV0dXJuInNlZ21lbnQgaWRzIG11c3QgYmUgPj0gMCJ9ZnVuY3Rpb24gVDIoKXtyZXR1cm4ic2VnbWVudCBpZHMgYXJlIG5vdCBpbmNyZWFzaW5nIn1mdW5jdGlvbiBFMihuLGUpe3JldHVybmBTZWdtZW50IGlkICR7bn0gb3V0IG9mIHJhbmdlIFswLCAke2V9KSwgcG9zc2libHkgYmVjYXVzZSBzZWdtZW50SWRzIGlucHV0IGlzIG5vdCBzb3J0ZWQuYH1mdW5jdGlvbiBSMihuLGUsdCl7cmV0dXJuYEJhZDogaW5kaWNlc1ske259XSA9PSAke2V9IG91dCBvZiByYW5nZSBbMCwgJHt0fSlgfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEQyKG4sZSl7bGV0IHQ9ITEscztmb3Iobjw9ZHc/KHM9bix0PSEwKTpzPWtmKG4sTWF0aC5mbG9vcihNYXRoLnNxcnQobikpKTshdDspcz5lfHxzPT09bj90PSEwOnM9a2YobixzKzEpO3JldHVybiBzfWZ1bmN0aW9uIEEyKG4sZSx0KXtjb25zdCBzPVtdLHI9bi5sZW5ndGg7Zm9yKGxldCBvPTA7bzxyO28rKylvIT09ZT9zLnB1c2gobltvXSk6cy5wdXNoKHQpO3JldHVybiBzfWZ1bmN0aW9uIFR3KG4sZSx0LHMpe2NvbnN0IHI9ZS5zaGFwZS5sZW5ndGgsbz1uLnNoYXBlLmxlbmd0aDtpZihzIT09MCYmKHM8LXJ8fHM+cikpdGhyb3cgbmV3IEVycm9yKGBFeHBlY3QgYmF0Y2hEaW1zIGluIHRoZSByYW5nZSBvZiBbLSR7cn0sICR7cn1dLCBidXQgZ290ICR7c31gKTtpZihzPDAmJihzKz1yKSxzPm8pdGhyb3cgbmV3IEVycm9yKGBiYXRjaERpbXMgKCR7c30pIG11c3QgYmUgbGVzcyB0aGFuIHJhbmsoeCkgKAogICAgJHtvfSkuYCk7aWYodDxzKXRocm93IG5ldyBFcnJvcihgYmF0Y2hEaW1zICgke3N9KSBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byBheGlzICgke3R9KS5gKTtmb3IobGV0IHA9MDtwPHM7KytwKWlmKG4uc2hhcGVbcF0hPT1lLnNoYXBlW3BdKXRocm93IG5ldyBFcnJvcihgeC5zaGFwZVske3B9XTogJHtuLnNoYXBlW3BdfSBzaG91bGQgYmUgZXF1YWwgdG8gaW5kaWNlcy5zaGFwZVske3B9XTogJHtlLnNoYXBlW3BdfS5gKTtjb25zdCBpPW4uc2hhcGVbdF0sYT1bXTtsZXQgbD0xLGM9MSxoPTE7Zm9yKGxldCBwPTA7cDxzOysrcClhLnB1c2gobi5zaGFwZVtwXSksbCo9bi5zaGFwZVtwXTtmb3IobGV0IHA9cztwPHQ7cCsrKWEucHVzaChuLnNoYXBlW3BdKSxjKj1uLnNoYXBlW3BdO2ZvcihsZXQgcD1zO3A8cjtwKyspYS5wdXNoKGUuc2hhcGVbcF0pO2ZvcihsZXQgcD10KzE7cDxvO3ArKylhLnB1c2gobi5zaGFwZVtwXSksaCo9bi5zaGFwZVtwXTtyZXR1cm57YmF0Y2hTaXplOmwsc2xpY2VTaXplOmgsb3V0ZXJTaXplOmMsZGltU2l6ZTppLG91dHB1dFNoYXBlOmF9fWNvbnN0IHdWPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxjb2xsZWN0R2F0aGVyT3BTaGFwZUluZm86VHcsY29tcHV0ZU91dFNoYXBlOkEyLHNlZ09wQ29tcHV0ZU9wdGltYWxXaW5kb3dTaXplOkQyfSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHdvKG4pe3RyeXtyZXR1cm4gbi5tYXAoZT0+Z28oZSkpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRlY29kZSBlbmNvZGVkIHN0cmluZyBieXRlcyBpbnRvIHV0Zi04LCBlcnJvcjogJHtlfWApfX1mdW5jdGlvbiBfMihuKXtyZXR1cm4gbi5tYXAoZT0+QnIoZSkpfWNvbnN0IE8yPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxFUkZfQTE6Z3csRVJGX0EyOnl3LEVSRl9BMzp4dyxFUkZfQTQ6YncsRVJGX0E1Ond3LEVSRl9QOm13LFBBUkFMTEVMSVpFX1RIUkVTSE9MRDpkdyxnZXQgUm93UGFydGl0aW9uVHlwZSgpe3JldHVybiB5cn0sU0VMVV9TQ0FMRTpYZyxTRUxVX1NDQUxFQUxQSEE6S2csYXBwbHlBY3RpdmF0aW9uOk1nLGFzc2VydEFuZEdldEJyb2FkY2FzdFNoYXBlOkhlLGFzc2VydEF4ZXNBcmVJbm5lck1vc3REaW1zOkNuLGFzc2VydFBhcmFtc0NvbnNpc3RlbnQ6Y3csYXNzaWduVG9UeXBlZEFycmF5OnkyLGF4ZXNBcmVJbm5lck1vc3REaW1zOnliLGNhbGN1bGF0ZVNoYXBlczpOaSxjaGVja0VpbnN1bURpbVNpemVzOmt3LGNoZWNrUGFkT25EaW1Sb3VuZGluZ01vZGU6cW4sY29tYmluZUxvY2F0aW9uczpZJCxjb21iaW5lUmFnZ2VkVGVuc29yVG9UZW5zb3JTaGFwZXM6YzIsY29tcGxleFdpdGhFdmVuSW5kZXg6bTIsY29tcGxleFdpdGhPZGRJbmRleDpnMixjb21wdXRlQ29udjJESW5mbzpmbixjb21wdXRlQ29udjNESW5mbzp4aSxjb21wdXRlRGVmYXVsdFBhZDpKMSxjb21wdXRlRGlsYXRpb24yREluZm86cmgsY29tcHV0ZU9wdGltYWxXaW5kb3dTaXplOnFnLGNvbXB1dGVPdXRBbmRSZWR1Y2VTaGFwZXM6bW4sY29tcHV0ZU91dFNoYXBlOldyLGNvbXB1dGVQb29sMkRJbmZvOm5yLGNvbXB1dGVQb29sM0RJbmZvOk5vLGNvbnZlcnRDb252MkREYXRhRm9ybWF0OmtvLGRlY29kZUVpbnN1bUVxdWF0aW9uOlN3LGVpdGhlclN0cmlkZXNPckRpbGF0aW9uc0FyZU9uZTprbixleHBhbmRTaGFwZVRvS2VlcERpbTpVdCxleHBvbmVudDpiMixleHBvbmVudHM6eDIsZnJvbVN0cmluZ0FycmF5VG9VaW50ODpfMixmcm9tVWludDhUb1N0cmluZ0FycmF5OndvLGdldEF4ZXNQZXJtdXRhdGlvbjpMdCxnZXRCcm9hZGNhc3REaW1zOmNhLGdldENvbXBsZXhXaXRoSW5kZXg6dncsZ2V0RWluc3VtQ29tcHV0ZVBhdGg6Q3csZ2V0RWluc3VtUGVybXV0YXRpb246TncsZ2V0RnVzZWRCaWFzR3JhZGllbnQ6emcsZ2V0RnVzZWREeUFjdGl2YXRpb246UGcsZ2V0SW1hZ2VDZW50ZXI6aHcsZ2V0SW5uZXJNb3N0QXhlczpqdCxnZXRQZXJtdXRlZDpOaCxnZXRSYWdnZWRSYW5rOmgyLGdldFJlZHVjdGlvbkF4ZXM6WnQsZ2V0UmVzaGFwZWQ6U2gsZ2V0UmVzaGFwZWRQZXJtdXRlZDpraCxnZXRSb3dQYXJ0aXRpb25UeXBlc0hlbHBlcjpkMixnZXRTbGljZUJlZ2luQ29vcmRzOnB3LGdldFNsaWNlU2l6ZTpmdyxnZXRTcGFyc2VGaWxsRW1wdHlSb3dzSW5kaWNlc0RlbnNlU2hhcGVNaXNtYXRjaDp3MixnZXRTcGFyc2VGaWxsRW1wdHlSb3dzTmVnYXRpdmVJbmRleEVycm9yTWVzc2FnZTp2MixnZXRTcGFyc2VGaWxsRW1wdHlSb3dzT3V0T2ZSYW5nZUluZGV4RXJyb3JNZXNzYWdlOlMyLGdldFNwYXJzZVJlc2hhcGVFbXB0eVRlbnNvclplcm9PdXRwdXREaW1FcnJvck1lc3NhZ2U6QzIsZ2V0U3BhcnNlUmVzaGFwZUlucHV0T3V0cHV0TWlzbWF0Y2hFcnJvck1lc3NhZ2U6STIsZ2V0U3BhcnNlUmVzaGFwZUlucHV0T3V0cHV0TXVsdGlwbGVFcnJvck1lc3NhZ2U6JDIsZ2V0U3BhcnNlUmVzaGFwZU11bHRpcGxlTmVnYXRpdmVPbmVPdXRwdXREaW1FcnJvck1lc3NhZ2U6TjIsZ2V0U3BhcnNlUmVzaGFwZU5lZ2F0aXZlT3V0cHV0RGltRXJyb3JNZXNzYWdlOmsyLGdldFNwYXJzZVNlZ21lbnRSZWR1Y3Rpb25JbmRpY2VzT3V0T2ZSYW5nZUVycm9yTWVzc2FnZTpSMixnZXRTcGFyc2VTZWdtZW50UmVkdWN0aW9uTmVnYXRpdmVTZWdtZW50SWRzRXJyb3JNZXNzYWdlOlgwLGdldFNwYXJzZVNlZ21lbnRSZWR1Y3Rpb25Ob25JbmNyZWFzaW5nU2VnbWVudElkc0Vycm9yTWVzc2FnZTpUMixnZXRTcGFyc2VTZWdtZW50UmVkdWN0aW9uU2VnbWVudElkT3V0T2ZSYW5nZUVycm9yTWVzc2FnZTpFMixnZXRVbmRvQXhlc1Blcm11dGF0aW9uOmJpLGlzSWRlbnRpdHlQZXJtdXRhdGlvbjokdyxsb2c6ZEYsbWVyZ2VSZWFsQW5kSW1hZ0FycmF5czpibyxwcmVwYXJlQW5kVmFsaWRhdGU6R2cscHJlcGFyZVNwbGl0U2l6ZTpJdyxzZWdtZW50X3V0aWw6d1Ysc2hvdWxkRnVzZTpCZyxzbGljZV91dGlsOmwyLHNwbGl0UmVhbEFuZEltYWdBcnJheXM6ZjIsc3RyaWRlc09yRGlsYXRpb25zQXJlUG9zaXRpdmU6dWEsdHVwbGVWYWx1ZXNBcmVPbmU6bGksdXBjYXN0VHlwZTp0cyx2YWxpZGF0ZURlZmF1bHRWYWx1ZVNoYXBlOnAyLHZhbGlkYXRlSW5wdXQ6QWcsdmFsaWRhdGVVcGRhdGVTaGFwZTpNYix3YXJuOkRzfSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHZWPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxub25NYXhTdXBwcmVzc2lvblYzSW1wbDpWZyxub25NYXhTdXBwcmVzc2lvblY0SW1wbDpXZyxub25NYXhTdXBwcmVzc2lvblY1SW1wbDpVZyx3aGVyZUltcGw6Rmd9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovT0IoKTtjb25zdCBTVj1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsQWJzOkpjLEFjb3M6SWwsQWNvc2g6VGwsQWRhZGVsdGFPcHRpbWl6ZXI6WGIsQWRhZ3JhZE9wdGltaXplcjpZYixBZGFtT3B0aW1pemVyOlFiLEFkYW1heE9wdGltaXplcjpaYixBZGQ6U2EsQWRkTjplZCxBbGw6dG0sQW55Om5tLEFyZ01heDp0ZCxBcmdNaW46bmQsQXNpbjpFbCxBc2luaDpSbCxBdGFuOkRsLEF0YW4yOl9sLEF0YW5oOkFsLEF2Z1Bvb2w6c2QsQXZnUG9vbDNEOnJkLEF2Z1Bvb2wzREdyYWQ6cm0sQXZnUG9vbEdyYWQ6c20sQmF0Y2hNYXRNdWw6b2QsQmF0Y2hUb1NwYWNlTkQ6aWQsQmluY291bnQ6b20sQml0d2lzZUFuZDphZCxCcm9hZGNhc3RBcmdzOmltLEJyb2FkY2FzdFRvOnAkLENhc3Q6T2wsQ2VpbDpGbCxDbGlwQnlWYWx1ZTpMbCxDb21wbGV4OmFtLENvbXBsZXhBYnM6bGQsQ29uY2F0OnVkLENvbnYyRDpjZCxDb252MkRCYWNrcHJvcEZpbHRlcjpsbSxDb252MkRCYWNrcHJvcElucHV0OmRkLENvbnYzRDpoZCxDb252M0RCYWNrcHJvcEZpbHRlclYyOnVtLENvbnYzREJhY2twcm9wSW5wdXRWMjpjbSxDb3M6UGwsQ29zaDp6bCxDcm9wQW5kUmVzaXplOmhtLEN1bXByb2Q6ZG0sQ3Vtc3VtOnBkLERhdGFTdG9yYWdlOiQxLERlbnNlQmluY291bnQ6cG0sRGVwdGhUb1NwYWNlOmZtLERlcHRod2lzZUNvbnYyZE5hdGl2ZTpmZCxEZXB0aHdpc2VDb252MmROYXRpdmVCYWNrcHJvcEZpbHRlcjptbSxEZXB0aHdpc2VDb252MmROYXRpdmVCYWNrcHJvcElucHV0OmdtLERpYWc6eW0sRGlsYXRpb24yRDptZCxEaWxhdGlvbjJEQmFja3Byb3BGaWx0ZXI6JGYsRGlsYXRpb24yREJhY2twcm9wSW5wdXQ6Q2YsRHJhdzp4bSxnZXQgRU5WKCl7cmV0dXJuIEQxfSxFaW5zdW06Ym0sRWx1OkJsLEVsdUdyYWQ6d20sRW52aXJvbm1lbnQ6ZCQsRXF1YWw6Z2QsRXJmOlZsLEV4cDpXbCxFeHBhbmREaW1zOnlkLEV4cG0xOlVsLEZGVDp2bSxGaWxsOlNtLEZsaXBMZWZ0UmlnaHQ6Tm0sRmxvb3I6amwsRmxvb3JEaXY6R2wsRnJvbVBpeGVsczpJZixGdXNlZEJhdGNoTm9ybTp4ZCxGdXNlZENvbnYyRDpGYyxGdXNlZERlcHRod2lzZUNvbnYyRDpMYyxHYXRoZXJOZDprbSxHYXRoZXJWMjpiZCxHcmVhdGVyOndkLEdyZWF0ZXJFcXVhbDpIbCxJRkZUOkNtLElkZW50aXR5OnFsLEltYWc6JG0sSXNGaW5pdGU6S2wsSXNJbmY6WGwsSXNOYW46WWwsS2VybmVsQmFja2VuZDpaZixMUk46SWQsTFJOR3JhZDpUbSxMZWFreVJlbHU6dmQsTGVzczpTZCxMZXNzRXF1YWw6TmQsTGluU3BhY2U6SW0sTG9nOlFsLExvZzFwOlpsLExvZ1NvZnRtYXg6ZiQsTG9naWNhbEFuZDprZCxMb2dpY2FsTm90OkNkLExvZ2ljYWxPcjokZCxMb2dpY2FsWG9yOmlGLExvd2VyQm91bmQ6YUYsTWF0cml4QmFuZFBhcnQ6bEYsTWF4OlRkLE1heFBvb2w6RWQsTWF4UG9vbDNEOlJkLE1heFBvb2wzREdyYWQ6Um0sTWF4UG9vbEdyYWQ6RW0sTWF4UG9vbFdpdGhBcmdtYXg6RG0sTWF4aW11bTpKbCxNZWFuOkRkLE1pbjpBZCxNaW5pbXVtOmV1LE1pcnJvclBhZDpfZCxNb2Q6dHUsTW9tZW50dW1PcHRpbWl6ZXI6SmIsTXVsdGlub21pYWw6QW0sTXVsdGlwbHk6bnUsTmVnOk9kLE5vbk1heFN1cHByZXNzaW9uVjM6X20sTm9uTWF4U3VwcHJlc3Npb25WNDpPbSxOb25NYXhTdXBwcmVzc2lvblY1OkZtLE5vdEVxdWFsOkZkLE9QX1NDT1BFX1NVRkZJWDpQMSxPbmVIb3Q6UGQsT25lc0xpa2U6TGQsT3B0aW1pemVyOlRvLE9wdGltaXplckNvbnN0cnVjdG9yczp1MixQYWNrOnpkLFBhZFYyOk1kLFBvb2w6dUYsUG93OnN1LFByZWx1OkJkLFByb2Q6VmQsUk1TUHJvcE9wdGltaXplcjpldyxSYWdnZWRHYXRoZXI6TG0sUmFnZ2VkUmFuZ2U6UG0sUmFnZ2VkVGVuc29yVG9UZW5zb3I6em0sUmFuZ2U6TW0sZ2V0IFJhbmsoKXtyZXR1cm4gQTB9LFJlYWw6Qm0sUmVhbERpdjpNbCxSZWNpcHJvY2FsOnJ1LGdldCBSZWR1Y3Rpb24oKXtyZXR1cm4gam59LFJlbHU6b3UsUmVsdTY6aXUsUmVzaGFwZTpXZCxSZXNpemVCaWxpbmVhcjpqZCxSZXNpemVCaWxpbmVhckdyYWQ6V20sUmVzaXplTmVhcmVzdE5laWdoYm9yOlVkLFJlc2l6ZU5lYXJlc3ROZWlnaGJvckdyYWQ6Vm0sUmV2ZXJzZTpHZCxSb3RhdGVXaXRoT2Zmc2V0Om9nLFJvdW5kOmF1LFJzcXJ0Omx1LFNHRE9wdGltaXplcjpqZyxTY2F0dGVyTmQ6VW0sU2VhcmNoU29ydGVkOkdtLFNlbGVjdDpIZCxTZWx1OnV1LFNpZ21vaWQ6cHUsU2lnbjpodSxTaW46Y3UsU2luaDpkdSxTbGljZTpxZCxTb2Z0bWF4OlFkLFNvZnRwbHVzOmZ1LFNwYWNlVG9CYXRjaE5EOlhkLFNwYXJzZUZpbGxFbXB0eVJvd3M6SG0sU3BhcnNlUmVzaGFwZTpxbSxTcGFyc2VTZWdtZW50TWVhbjpLbSxTcGFyc2VTZWdtZW50U3VtOlhtLFNwYXJzZVRvRGVuc2U6WW0sU3BsaXRWOllkLFNxcnQ6bXUsU3F1YXJlOlFtLFNxdWFyZWREaWZmZXJlbmNlOmd1LFN0YXRpY1JlZ2V4UmVwbGFjZTpaZCxTdGVwOnZ1LFN0cmlkZWRTbGljZTpabSxTdHJpbmdOR3JhbXM6Sm0sU3RyaW5nU3BsaXQ6ZWcsU3RyaW5nVG9IYXNoQnVja2V0RmFzdDp0ZyxTdWI6eXUsU3VtOktkLFRhbjp4dSxUYW5oOmJ1LFRlbnNvcjpkdCxUZW5zb3JCdWZmZXI6UXQsVGVuc29yU2NhdHRlclVwZGF0ZTpqbSxUaWxlOnd1LFRvcEs6bmcsVHJhbnNmb3JtOnNnLFRyYW5zcG9zZTplYSxVbmlxdWU6cmcsVW5wYWNrOkpkLFVuc29ydGVkU2VnbWVudFN1bTplaCxVcHBlckJvdW5kOmNGLFZhcmlhYmxlOk1jLFplcm9zTGlrZTp0aCxfRnVzZWRNYXRNdWw6T2MsYWJzOlh0LGFjb3M6RzEsYWNvc2g6SDEsYWRkOm1lLGFkZE46VSQsYWxsOnVnLGFueTpWYyxhcmdNYXg6bGEsYXJnTWluOnExLGFzaW46SzEsYXNpbmg6WDEsYXRhbjpZMSxhdGFuMjpRMSxhdGFuaDpaMSxhdmdQb29sOm9oLGF2Z1Bvb2wzZDplYixiYWNrZW5kOkIxLGJhY2tlbmRfdXRpbDpPMixiYXNpY0xTVE1DZWxsOmokLGJhdGNoTm9ybTpTdSxiYXRjaE5vcm0yZDp0YixiYXRjaE5vcm0zZDpuYixiYXRjaE5vcm00ZDpzYixiYXRjaFRvU3BhY2VORDppaCxiaW5jb3VudDpyYixiaXR3aXNlQW5kOkckLGJvb2xlYW5NYXNrQXN5bmM6RUksYnJvYWRjYXN0QXJnczpIJCxicm9hZGNhc3RUbzp0YSxicm9hZGNhc3RfdXRpbDpVTCxicm93c2VyOmNWLGJ1ZmZlcjpxZSxjYXN0Ok5lLGNlaWw6b2IsY2xpcEJ5VmFsdWU6c3MsY2xvbmU6VnIsY29tcGxleDp5byxjb25jYXQ6V3QsY29uY2F0MWQ6aWIsY29uY2F0MmQ6YWIsY29uY2F0M2Q6bGIsY29uY2F0NGQ6dWIsY29udjFkOmNnLGNvbnYyZDp4byxjb252MmRUcmFuc3Bvc2U6ZGcsY29udjNkOmRiLGNvbnYzZFRyYW5zcG9zZTpoYixjb3B5UmVnaXN0ZXJlZEtlcm5lbHM6ZkYsY29zOmFoLGNvc2g6aGcsY29zaW5lV2luZG93OkxnLGN1bXByb2Q6amMsY3Vtc3VtOnBnLGN1c3RvbUdyYWQ6S3IsZGVuc2VCaW5jb3VudDpSZixkZXByZWNhdGlvbldhcm46cUYsZGVwdGhUb1NwYWNlOnBiLGRlcHRod2lzZUNvbnYyZDpOdSxkZXZpY2VfdXRpbDpWRixkaWFnOkskLGRpbGF0aW9uMmQ6ZmIsZGlzYWJsZURlcHJlY2F0aW9uV2FybmluZ3M6SEYsZGlzcG9zZTpZZSxkaXNwb3NlVmFyaWFibGVzOktGLGRpdjpPZSxkaXZOb05hbjptYixkb3Q6Z2IsZHJvcG91dDpqYixlaW5zdW06cWksZWx1Omt1LGVuYWJsZURlYnVnTW9kZTpHRixlbmFibGVQcm9kTW9kZTpqRixlbmNsb3NpbmdQb3dlck9mVHdvOkdiLGVuZ2luZTptcixlbnN1cmVTaGFwZTpYJCxlbnY6b2UsZXF1YWw6dHIsZXJmOmZnLGV1Y2xpZGVhbk5vcm06eGIsZXhwOnJzLGV4cGFuZERpbXM6QW4sZXhwbTE6YmIsZXllOm1nLGZmdDp3aCxmaWxsOk5hLGZpbmRCYWNrZW5kOkpGLGZpbmRCYWNrZW5kRmFjdG9yeTplMyxmbG9vcjokdSxmbG9vckRpdjpsZyxmdXNlZDp6SSxnYXRoZXI6SXUsZ2F0aGVyTkQ6X0ksZ2F0aGVyX3V0aWw6ZFYsZ2V0QmFja2VuZDp6MSxnZXRHcmFkaWVudDpSMCxnZXRLZXJuZWw6emMsZ2V0S2VybmVsc0ZvckJhY2tlbmQ6VGYsZ3JhZDokUCxncmFkczpJUCxncmVhdGVyOmFzLGdyZWF0ZXJFcXVhbDpDbyxpZmZ0OndsLGltYWc6bGgsaW1hZ2U6eHIsaW5Ub3BLQXN5bmM6T0ksaW86c3csaXJmZnQ6UmcsaXNGaW5pdGU6d2IsaXNJbmY6dmIsaXNOYU46U2Isa2VlcDplbixrZXJuZWxfaW1wbHM6dlYsbGVha3lSZWx1OnVoLGxlc3M6Z2wsbGVzc0VxdWFsOndpLGxpbmFsZzpLYixsaW5zcGFjZTpaJCxsb2NhbFJlc3BvbnNlTm9ybWFsaXphdGlvbjpOYixsb2c6d3MsbG9nMXA6Y2gsbG9nU2lnbW9pZDprYixsb2dTb2Z0bWF4OnlnLGxvZ1N1bUV4cDpkaCxsb2dpY2FsQW5kOlNyLGxvZ2ljYWxOb3Q6aGgsbG9naWNhbE9yOnhnLGxvZ2ljYWxYb3I6Q2IsbG9zc2VzOkdJLGxvd2VyQm91bmQ6ZUksbWF0TXVsOlhlLG1hdGg6ZVYsbWF4OkxzLG1heFBvb2w6cGgsbWF4UG9vbDNkOiRiLG1heFBvb2xXaXRoQXJnbWF4OnRJLG1heGltdW06UXIsbWVhbjpfdCxtZW1vcnk6ejAsbWVzaGdyaWQ6bkksbWluOm1sLG1pbmltdW06Y2ksbWlycm9yUGFkOkliLG1vZDpUYixtb21lbnRzOmZoLG1vdmluZ0F2ZXJhZ2U6UkksbXVsOlgsbXVsdGlSTk5DZWxsOnNJLG11bHRpbm9taWFsOnJJLG5lZzpOdCxuZXh0RnJhbWU6dXcsbm9ybTpDdSxub3RFcXVhbDpkYSxvbmVIb3Q6eWwsb25lczpKbixvbmVzTGlrZTp2cyxvcDpHLG91dGVyUHJvZHVjdDpvSSxwYWQ6JG8scGFkMWQ6aUkscGFkMmQ6YUkscGFkM2Q6bEkscGFkNGQ6dUkscG9vbDpFYixwb3c6cXIscHJlbHU6Z2gscHJpbnQ6ajEscHJvZDpSYixwcm9maWxlOlhGLHJhZ2dlZEdhdGhlcjpjSSxyYWdnZWRSYW5nZTpkSSxyYWdnZWRUZW5zb3JUb1RlbnNvcjpoSSxyYW5kOnBJLHJhbmRvbUdhbW1hOmdJLHJhbmRvbU5vcm1hbDp2ZyxyYW5kb21TdGFuZGFyZE5vcm1hbDp5SSxyYW5kb21Vbmlmb3JtOnZpLHJhbmRvbVVuaWZvcm1JbnQ6eEkscmFuZ2U6aGEscmVhZHk6RSQscmVhbDp4bCxyZWNpcHJvY2FsOk9iLHJlZ2lzdGVyQmFja2VuZDpNMSxyZWdpc3RlckdyYWRpZW50Om0kLHJlZ2lzdGVyS2VybmVsOmlnLHJlbHU6SXIscmVsdTY6U2cscmVtb3ZlQmFja2VuZDpaRixyZXNoYXBlOkoscmV2ZXJzZTpQcyxyZXZlcnNlMWQ6YkkscmV2ZXJzZTJkOndJLHJldmVyc2UzZDp2SSxyZXZlcnNlNGQ6U0kscmZmdDp2aCxyb3VuZDpOZyxyc3FydDprZyxzY2FsYXI6TWUsc2NhdHRlck5EOkRJLHNjYXR0ZXJfdXRpbDpENCxzZWFyY2hTb3J0ZWQ6Ymcsc2VsdTpDZyxzZXBhcmFibGVDb252MmQ6JGcsc2VyaWFsaXphdGlvbjpBQixzZXRCYWNrZW5kOlFGLHNldFBsYXRmb3JtOnQzLHNldGRpZmYxZEFzeW5jOk5JLHNpZ21vaWQ6d3Isc2lnbjpGYixzaWduYWw6akksc2luOklnLHNpbmg6VGcsc2xpY2U6c3Qsc2xpY2UxZDp5aCxzbGljZTJkOkVnLHNsaWNlM2Q6eGgsc2xpY2U0ZDpibCxzbGljZV91dGlsOmwyLHNvZnRtYXg6Ymgsc29mdHBsdXM6a2Esc3BhY2VUb0JhdGNoTkQ6bWgsc3BhcnNlOkhJLHNwYXJzZVRvRGVuc2U6QUksc3BlY3RyYWw6VUksc3BsaXQ6ZXMsc3FydDpwbixzcXVhcmU6eXQsc3F1YXJlZERpZmZlcmVuY2U6RGcsc3F1ZWV6ZTpTaSxzdGFjazpvcyxzdGVwOkNhLHN0cmlkZWRTbGljZTpMYixzdHJpbmc6cUksc3ViOkllLHN1bTpSZSxzdW1PdXRUeXBlOmFnLHRhbjpQYix0YW5oOnVpLHRlbnNvcjplcix0ZW5zb3IxZDpfbix0ZW5zb3IyZDpjbCx0ZW5zb3IzZDp6Yix0ZW5zb3I0ZDprSSx0ZW5zb3I1ZDpDSSx0ZW5zb3I2ZDokSSx0ZW5zb3JTY2F0dGVyVXBkYXRlOklJLHRlbnNvcl91dGlsOkxGLHRlc3RfdXRpbDpqeix0aWR5OnJlLHRpbGU6X3MsdGltZTpZRix0b3BrOkJiLHRyYWluOkdpLHRyYW5zcG9zZTp0dCx0cnVuY2F0ZWROb3JtYWw6X2csdW5pcXVlOlZiLHVucmVnaXN0ZXJHcmFkaWVudDpwRix1bnJlZ2lzdGVyS2VybmVsOmhGLHVuc29ydGVkU2VnbWVudFN1bTpPZyx1bnN0YWNrOnpzLHVwY2FzdFR5cGU6dHMsdXBwZXJCb3VuZDpUSSx1dGlsOk5GLHZhbHVlQW5kR3JhZDpUUCx2YWx1ZUFuZEdyYWRzOkVQLHZhcmlhYmxlOldiLHZhcmlhYmxlR3JhZHM6SiQsdmVyc2lvbl9jb3JlOmdWLHdoZXJlOnZuLHdoZXJlQXN5bmM6VWIsemVyb3M6WXQsemVyb3NMaWtlOnJ0fSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEYyPXtrZXJuZWxOYW1lOkpjLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9PlgobixDYShOZSh0LCJmbG9hdDMyIiksLTEpKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBOVj17a2VybmVsTmFtZTpJbCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT57Y29uc3Qgcz15dChOZSh0LCJmbG9hdDMyIikpLHI9cG4oSWUoTWUoMSkscykpO3JldHVybiBOdChPZShuLHIpKX19fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qga1Y9e2tlcm5lbE5hbWU6VGwsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57eDooKT0+e2NvbnN0IHM9cG4oSWUoeXQoTmUodCwiZmxvYXQzMiIpKSwxKSk7cmV0dXJuIE9lKG4scyl9fX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IENWPXtrZXJuZWxOYW1lOlNhLGlucHV0c1RvU2F2ZTpbImEiLCJiIl0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0LHNdPWUscj1IZSh0LnNoYXBlLHMuc2hhcGUpO3JldHVybnthOigpPT57bGV0IGE9bjtjb25zdCBsPVp0KHQuc2hhcGUscik7cmV0dXJuIGwubGVuZ3RoPjAmJihhPVJlKGEsbCkpLEooYSx0LnNoYXBlKX0sYjooKT0+e2xldCBhPW47Y29uc3QgbD1adChzLnNoYXBlLHIpO3JldHVybiBsLmxlbmd0aD4wJiYoYT1SZShhLGwpKSxKKGEscy5zaGFwZSl9fX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0ICRWPXtrZXJuZWxOYW1lOmVkLHNhdmVBbGxJbnB1dHM6ITAsZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdCB0PXt9O3JldHVybiBlLmZvckVhY2goKHMscik9Pnt0W3JdPSgpPT5uLmNsb25lKCl9KSx0fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgSVY9e2tlcm5lbE5hbWU6dGQsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57eDooKT0+cnQodCl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgVFY9e2tlcm5lbE5hbWU6bmQsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57eDooKT0+cnQodCl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRVY9e2tlcm5lbE5hbWU6RWwsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57eDooKT0+T2UobixwbihJZShNZSgxKSx5dChOZSh0LCJmbG9hdDMyIikpKSkpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFJWPXtrZXJuZWxOYW1lOlJsLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9Pntjb25zdCBzPXBuKG1lKE1lKDEpLHl0KE5lKHQsImZsb2F0MzIiKSkpKTtyZXR1cm4gT2UobixzKX19fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRFY9e2tlcm5lbE5hbWU6X2wsaW5wdXRzVG9TYXZlOlsiYSIsImIiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3Qsc109ZSxyPUhlKHQuc2hhcGUscy5zaGFwZSk7cmV0dXJue2E6KCk9Pntjb25zdCBhPW1lKHl0KHQpLHl0KHMpKTtsZXQgbD1YKG4sT2UocyxhKSk7Y29uc3QgYz1adCh0LnNoYXBlLHIpO3JldHVybiBjLmxlbmd0aD4wJiYobD1SZShsLGMpKSxKKGwsdC5zaGFwZSl9LGI6KCk9Pntjb25zdCBhPW1lKHl0KHQpLHl0KHMpKTtsZXQgbD1OdChYKG4sT2UodCxhKSkpO2NvbnN0IGM9WnQocy5zaGFwZSxyKTtyZXR1cm4gYy5sZW5ndGg+MCYmKGw9UmUobCxjKSksSihsLHMuc2hhcGUpfX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBBVj17a2VybmVsTmFtZTpEbCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT5PZShuLG1lKHl0KE5lKHQsImZsb2F0MzIiKSksMSkpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IF9WPXtrZXJuZWxOYW1lOkFsLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9Pk9lKG4sSWUoTWUoMSkseXQoTmUodCwiZmxvYXQzMiIpKSkpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE9WKG4sZSx0LHMscixvKXtjb25zdCBpPU8obiwiZHkiLCJhdmdQb29sM2RHcmFkIiksYT1PKGUsImlucHV0IiwiYXZnUG9vbDNkR3JhZCIpO2xldCBsPWksYz1hLGg9ITE7YS5yYW5rPT09NCYmKGg9ITAsbD1KKGksWzEsaS5zaGFwZVswXSxpLnNoYXBlWzFdLGkuc2hhcGVbMl0saS5zaGFwZVszXV0pLGM9SihhLFsxLGEuc2hhcGVbMF0sYS5zaGFwZVsxXSxhLnNoYXBlWzJdLGEuc2hhcGVbM11dKSksQShsLnJhbms9PT01LCgpPT5gRXJyb3IgaW4gYXZnUG9vbDNkR3JhZDogZHkgbXVzdCBiZSByYW5rIDUgYnV0IGdvdCByYW5rICR7bC5yYW5rfS5gKSxBKGMucmFuaz09PTUsKCk9PmBFcnJvciBpbiBhdmdQb29sM2RHcmFkOiBpbnB1dCBtdXN0IGJlIHJhbmsgNSBidXQgZ290IHJhbmsgJHtjLnJhbmt9LmApLHFuKCJhdmdQb29sM2RHcmFkIixyLG8pO2NvbnN0IHA9e2R5OmwsaW5wdXQ6Y30sZj17ZmlsdGVyU2l6ZTp0LHN0cmlkZXM6cyxwYWQ6cixkaW1Sb3VuZGluZ01vZGU6b30sZz1qLnJ1bktlcm5lbChybSxwLGYpO3JldHVybiBoP0ooZyxbZy5zaGFwZVsxXSxnLnNoYXBlWzJdLGcuc2hhcGVbM10sZy5zaGFwZVs0XV0pOmd9Y29uc3QgRlY9Ryh7YXZnUG9vbDNkR3JhZF86T1Z9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBMVj17a2VybmVsTmFtZTpyZCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0W3NdPWUse2ZpbHRlclNpemU6cixzdHJpZGVzOm8scGFkOmksZGltUm91bmRpbmdNb2RlOmF9PXQ7cmV0dXJue3g6KCk9PkZWKG4scyxyLG8saSxhKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBQVihuLGUsdCxzLHIpe2NvbnN0IG89TyhuLCJkeSIsImF2Z1Bvb2xHcmFkIiksaT1PKGUsImlucHV0IiwiYXZnUG9vbEdyYWQiKTtBKGkucmFuaz09PW8ucmFuaywoKT0+YFJhbmsgb2YgaW5wdXQgKCR7aS5yYW5rfSkgZG9lcyBub3QgbWF0Y2ggcmFuayBvZiBkeSAoJHtvLnJhbmt9KWApO2xldCBhPWksbD1vLGM9ITE7aS5yYW5rPT09MyYmKGM9ITAsYT1KKGksWzEsaS5zaGFwZVswXSxpLnNoYXBlWzFdLGkuc2hhcGVbMl1dKSxsPUoobyxbMSxvLnNoYXBlWzBdLG8uc2hhcGVbMV0sby5zaGFwZVsyXV0pKSxBKGwucmFuaz09PTQsKCk9PmBFcnJvciBpbiBhdmdQb29sR3JhZDogZHkgbXVzdCBiZSByYW5rIDQgYnV0IGdvdCByYW5rICR7bC5yYW5rfS5gKSxBKGEucmFuaz09PTQsKCk9PmBFcnJvciBpbiBhdmdQb29sR3JhZDogaW5wdXQgbXVzdCBiZSByYW5rIDQgYnV0IGdvdCByYW5rICR7YS5yYW5rfS5gKTtjb25zdCBoPXtkeTpsLGlucHV0OmF9LHA9e2ZpbHRlclNpemU6dCxzdHJpZGVzOnMscGFkOnJ9LGY9ai5ydW5LZXJuZWwoc20saCxwKTtyZXR1cm4gYz9KKGYsW2Yuc2hhcGVbMV0sZi5zaGFwZVsyXSxmLnNoYXBlWzNdXSk6Zn1jb25zdCB6Vj1HKHthdmdQb29sR3JhZF86UFZ9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBNVj17a2VybmVsTmFtZTpzZCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0W3NdPWUse2ZpbHRlclNpemU6cixzdHJpZGVzOm8scGFkOml9PXQ7cmV0dXJue3g6KCk9PnpWKG4scyxyLG8saSl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgQlY9e2tlcm5lbE5hbWU6b2QsaW5wdXRzVG9TYXZlOlsiYSIsImIiXSxncmFkRnVuYzoobixlLHQpPT57Y29uc3RbcyxyXT1lLHt0cmFuc3Bvc2VBOm8sdHJhbnNwb3NlQjppfT10O3JldHVybiFvJiYhaT97YTooKT0+WGUobixyLCExLCEwKSxiOigpPT5YZShzLG4sITAsITEpfTohbyYmaT97YTooKT0+WGUobixyLCExLCExKSxiOigpPT5YZShuLHMsITAsITEpfTpvJiYhaT97YTooKT0+WGUocixuLCExLCEwKSxiOigpPT5YZShzLG4sITEsITEpfTp7YTooKT0+WGUocixuLCEwLCEwKSxiOigpPT5YZShuLHMsITAsITApfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFZWPXtrZXJuZWxOYW1lOmlkLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdHtibG9ja1NoYXBlOnMsY3JvcHM6cn09dDtyZXR1cm57eDooKT0+bWgobixzLHIpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFdWPXtrZXJuZWxOYW1lOnAkLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdCBzPXQscj1zLmlucHV0U2hhcGUsbz1zLnNoYXBlLGk9QXJyYXkuZnJvbShvKTtmb3IobGV0IGw9ci5sZW5ndGgtMTtsPj0wO2wtLSlpZihyW2xdPT09b1tsXSlpW2xdPTE7ZWxzZSBpZihyW2xdIT09MSl0aHJvdyBuZXcgRXJyb3IoYGJyb2FkY2FzdFRvKCk6IFske3J9XSBjYW5ub3QgYmUgYnJvYWRjYXN0IHRvIFske299XS5gKTtjb25zdCBhPVtdO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF0+MSYmYS5wdXNoKGwpO3JldHVybnt4OigpPT5SZShuLGEsITApfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFVWPXtrZXJuZWxOYW1lOk9sLGdyYWRGdW5jOm49Pih7eDooKT0+bi5jbG9uZSgpfSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGpWPXtrZXJuZWxOYW1lOkZsLGdyYWRGdW5jOm49Pih7eDooKT0+cnQobil9KX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgR1Y9e2tlcm5lbE5hbWU6TGwsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdFtzXT1lLHtjbGlwVmFsdWVNaW46cixjbGlwVmFsdWVNYXg6b309dDtyZXR1cm57eDooKT0+dm4oU3IoQ28ocyxyKSx3aShzLG8pKSxuLHJ0KG4pKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBIVj17a2VybmVsTmFtZTpsZCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6RjIuZ3JhZEZ1bmN9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHFWPXtrZXJuZWxOYW1lOnVkLHNhdmVBbGxJbnB1dHM6ITAsZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0IHM9ZS5tYXAobD0+bC5zaGFwZSkse2F4aXM6cn09dCxvPVFlKHIsZVswXS5zaGFwZSlbMF0saT1zLm1hcChsPT5sW29dKTtyZXR1cm4gZXMobixpLG8pLm1hcChsPT4oKT0+bCl9fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBLVj17a2VybmVsTmFtZTpjZCxpbnB1dHNUb1NhdmU6WyJ4IiwiZmlsdGVyIl0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0W3Mscl09ZSx7ZGlsYXRpb25zOm8sc3RyaWRlczppLHBhZDphLGRhdGFGb3JtYXQ6bH09dDtyZXR1cm4gQShsaShvKSwoKT0+YEVycm9yIGluIGdyYWRpZW50IG9mIGNvbnYyRDogZGlsYXRpb24gcmF0ZXMgZ3JlYXRlciB0aGFuIDEgYXJlIG5vdCB5ZXQgc3VwcG9ydGVkIGluIGdyYWRpZW50cy4gR290IGRpbGF0aW9ucyAnJHtvfSdgKSx7eDooKT0+Y2Iocy5zaGFwZSxuLHIsaSxhLGwpLGZpbHRlcjooKT0+SGIocyxuLHIuc2hhcGUsaSxhLGwpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFhWPXtrZXJuZWxOYW1lOmRkLGlucHV0c1RvU2F2ZTpbImR5IiwiZmlsdGVyIl0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0W3Mscl09ZSx7c3RyaWRlczpvLHBhZDppLGRhdGFGb3JtYXQ6YSxkaW1Sb3VuZGluZ01vZGU6bH09dDtyZXR1cm57ZHk6KCk9PnhvKG4scixvLGksYSwxLGwpLGZpbHRlcjooKT0+SGIobixzLHIuc2hhcGUsbyxpLGEsbCl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWVYobixlLHQscyxyKXtsZXQgbz1uO24ucmFuaz09PTQmJihvPUoobixbMSxuLnNoYXBlWzBdLG4uc2hhcGVbMV0sbi5zaGFwZVsyXSxuLnNoYXBlWzNdXSkpO2xldCBpPWU7aS5yYW5rPT09NCYmKGk9SihlLFsxLGUuc2hhcGVbMF0sZS5zaGFwZVsxXSxlLnNoYXBlWzJdLGUuc2hhcGVbM11dKSksQShvLnJhbms9PT01LCgpPT5gRXJyb3IgaW4gY29udjNkRGVyRmlsdGVyOiBpbnB1dCBtdXN0IGJlIHJhbmsgNSwgYnV0IGdvdCBzaGFwZSAke28uc2hhcGV9LmApLEEoaS5yYW5rPT09NSwoKT0+YEVycm9yIGluIGNvbnYzZERlckZpbHRlcjogZHkgbXVzdCBiZSByYW5rIDUsIGJ1dCBnb3Qgc2hhcGUgJHtpLnNoYXBlfS5gKSxBKHQubGVuZ3RoPT09NSwoKT0+YEVycm9yIGluIGNvbnYzZERlckZpbHRlcjogZmlsdGVyU2hhcGUgbXVzdCBiZSBsZW5ndGggNSwgYnV0IGdvdCAke3R9LmApLEEoby5zaGFwZVs0XT09PXRbM10sKCk9PmBFcnJvciBpbiBjb252M2REZXJGaWx0ZXI6IGRlcHRoIG9mIGlucHV0ICR7by5zaGFwZVs0XX0pIG11c3QgbWF0Y2ggaW5wdXQgZGVwdGggaW4gZmlsdGVyICgke3RbM119LmApLEEoaS5zaGFwZVs0XT09PXRbNF0sKCk9PmBFcnJvciBpbiBjb252M2REZXJGaWx0ZXI6IGRlcHRoIG9mIGR5ICgke2kuc2hhcGVbNF19KSBtdXN0IG1hdGNoIG91dHB1dCBkZXB0aCBmb3IgZmlsdGVyICgke3RbNF19KS5gKTtjb25zdCBhPXt4Om8sZHk6aX0sbD17c3RyaWRlczpzLHBhZDpyLGZpbHRlclNoYXBlOnR9O3JldHVybiBqLnJ1bktlcm5lbCh1bSxhLGwpfWNvbnN0IFFWPUcoe2NvbnYzREJhY2twcm9wRmlsdGVyXzpZVn0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFpWPXtrZXJuZWxOYW1lOmhkLGlucHV0c1RvU2F2ZTpbIngiLCJmaWx0ZXIiXSxncmFkRnVuYzoobixlLHQpPT57Y29uc3R7ZGlsYXRpb25zOnMsc3RyaWRlczpyLHBhZDpvfT10O0EobGkocyksKCk9PmBFcnJvciBpbiBncmFkaWVudCBvZiBjb252M0Q6IGRpbGF0aW9uIHJhdGVzIGdyZWF0ZXIgdGhhbiAxIGFyZSBub3QgeWV0IHN1cHBvcnRlZCBpbiBncmFkaWVudHMuIEdvdCBkaWxhdGlvbnMgJyR7c30nYCk7Y29uc3RbaSxhXT1lO3JldHVybnt4OigpPT5xJChpLnNoYXBlLG4sYSxyLG8pLGZpbHRlcjooKT0+UVYoaSxuLGEuc2hhcGUscixvKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBKVj17a2VybmVsTmFtZTpQbCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT5YKE50KElnKE5lKHQsImZsb2F0MzIiKSkpLG4pfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGVXPXtrZXJuZWxOYW1lOnpsLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9PlgoVGcoTmUodCwiZmxvYXQzMiIpKSxuKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB0Vz17a2VybmVsTmFtZTpwZCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0W3NdPWUse2F4aXM6cixleGNsdXNpdmU6byxyZXZlcnNlOml9PXQ7cmV0dXJue3g6KCk9Pntjb25zdCBhPUx0KFtyXSxzLnJhbmspO2xldCBsPXBnKG4scixvLCFpKTtyZXR1cm4gYSE9bnVsbCYmKGw9dHQobCxhKSksbH19fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgblc9e2tlcm5lbE5hbWU6ZmQsaW5wdXRzVG9TYXZlOlsieCIsImZpbHRlciJdLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdHtkaWxhdGlvbnM6cyxzdHJpZGVzOnIscGFkOm8sZGltUm91bmRpbmdNb2RlOml9PXQsYT1zPz9bMSwxXTtBKGxpKGEpLCgpPT5gRXJyb3IgaW4gZ3JhZGllbnQgb2YgZGVwdGh3aXNlQ29udjJkTmF0aXZlOiBkaWxhdGlvbiByYXRlcyBncmVhdGVyIHRoYW4gMSBhcmUgbm90IHlldCBzdXBwb3J0ZWQuIEdvdCBkaWxhdGlvbnMgJyR7YX0nYCk7Y29uc3RbbCxjXT1lO3JldHVybiBBKGwucmFuaz09PTQsKCk9PmBFcnJvciBpbiBncmFkaWVudCBvZiBkZXB0aHdpc2VDb252MmROYXRpdmU6IGlucHV0IG11c3QgYmUgcmFuayA0LCBidXQgZ290IHJhbmsgJHtsLnJhbmt9LmApLEEoYy5yYW5rPT09NCwoKT0+YEVycm9yIGluIGdyYWRpZW50IG9mIGRlcHRod2lzZUNvbnYyZE5hdGl2ZTogZmlsdGVyIG11c3QgYmUgcmFuayA0LCBidXQgZ290IHJhbmsgJHtjLnJhbmt9LmApLEEobC5zaGFwZVszXT09PWMuc2hhcGVbMl0sKCk9PmBFcnJvciBpbiBncmFkaWVudCBvZiBkZXB0aHdpc2VDb252MmQ6IG51bWJlciBvZiBpbnB1dCBjaGFubmVscyAoJHtsLnNoYXBlWzNdfSkgbXVzdCBtYXRjaCB0aGUgaW5DaGFubmVscyBkaW1lbnNpb24gaW4gZmlsdGVyICR7Yy5zaGFwZVsyXX0uYCksQShrbihyLGEpLCgpPT5gRXJyb3IgaW4gZ3JhZGllbnQgb2YgZGVwdGh3aXNlQ29udjJkOiBFaXRoZXIgc3RyaWRlcyBvciBkaWxhdGlvbnMgbXVzdCBiZSAgMS4gR290IHN0cmlkZXMgJHtyfSBhbmQgZGlsYXRpb25zICcke2F9Jy5gKSxxbigiZGVwdGh3aXNlQ29udjJkIixvLGkpLHt4OigpPT5QSShsLnNoYXBlLG4sYyxyLG8sYSxpKSxmaWx0ZXI6KCk9PkxJKGwsbixjLnNoYXBlLHIsbyxhLGkpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHNXPXtrZXJuZWxOYW1lOm1kLGlucHV0c1RvU2F2ZTpbIngiLCJmaWx0ZXIiXSxncmFkRnVuYzoobixlLHQpPT57Y29uc3RbcyxyXT1lLG89e3g6cyxmaWx0ZXI6cixkeTpufSxpPXt4OnMsZmlsdGVyOnIsZHk6bn07cmV0dXJue3g6KCk9PmoucnVuS2VybmVsKENmLG8sdCksZmlsdGVyOigpPT5qLnJ1bktlcm5lbCgkZixpLHQpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHJXPXtrZXJuZWxOYW1lOkJsLG91dHB1dHNUb1NhdmU6WyEwXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWUscz17ZHk6bix5OnR9O3JldHVybnt4OigpPT5qLnJ1bktlcm5lbCh3bSxzKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBvVz17a2VybmVsTmFtZTpWbCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lLHM9WChycyhOdCh5dCh0KSkpLDIvTWF0aC5zcXJ0KE1hdGguUEkpKTtyZXR1cm57eDooKT0+WChuLHMpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGlXPXtrZXJuZWxOYW1lOldsLG91dHB1dHNUb1NhdmU6WyEwXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9Plgobix0KX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBhVz17a2VybmVsTmFtZTp5ZCxpbnB1dHNUb1NhdmU6WyJpbnB1dCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57aW5wdXQ6KCk9Pkoobix0LnNoYXBlKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBsVz17a2VybmVsTmFtZTpVbCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT5YKG4scnModCkpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHVXPXtrZXJuZWxOYW1lOmpsLGdyYWRGdW5jOm49Pih7eDooKT0+cnQobil9KX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgY1c9e2tlcm5lbE5hbWU6R2wsaW5wdXRzVG9TYXZlOlsiYSIsImIiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3Qsc109ZSxyPUhlKHQuc2hhcGUscy5zaGFwZSk7cmV0dXJue2E6KCk9Pntjb25zdCBhPU9lKG4sTmUocywiZmxvYXQzMiIpKSxsPVp0KHQuc2hhcGUscik7cmV0dXJuIGwubGVuZ3RoPjA/SihSZShhLGwpLHQuc2hhcGUpOmF9LGI6KCk9PntsZXQgYT1YKG4sTmUodCwiZmxvYXQzMiIpKTtjb25zdCBsPVp0KHMuc2hhcGUscik7bC5sZW5ndGg+MCYmKGE9SihSZShhLGwpLHMuc2hhcGUpKTtjb25zdCBjPXl0KHMpO3JldHVybiBOdChPZShhLE5lKGMsImZsb2F0MzIiKSkpfX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBkVz17a2VybmVsTmFtZTp4ZCxpbnB1dHNUb1NhdmU6WyJ4IiwibWVhbiIsInZhcmlhbmNlIiwic2NhbGUiXSxncmFkRnVuYzoobixlLHQpPT57Y29uc3R7dmFyaWFuY2VFcHNpbG9uOnN9PXQsW3IsbyxpLGFdPWUsbD1hPz9NZSgxKSxjPVp0KG8uc2hhcGUsci5zaGFwZSksaD1bXTtpZihvLnJhbms9PT0xKXtmb3IobGV0IGs9MDtrPHIuc2hhcGUubGVuZ3RoLTE7KytrKWgucHVzaChyLnNoYXBlW2tdKTtoLnB1c2goMSl9Y29uc3QgcD1JZShyLG8pLGY9WChuLGwpLGc9a2cobWUoaSxNZShzKSkpLHk9WChYKFgoZyxnKSxnKSxNZSgtLjUpKTtyZXR1cm57eDooKT0+by5yYW5rPT09MT9KKFgoWChuLF9zKEooZyxbMSwxLDEsby5zaGFwZVswXV0pLGgpKSxsKSxyLnNoYXBlKTpKKFgoWChuLGcpLGwpLHIuc2hhcGUpLG1lYW46KCk9PntsZXQgaz1YKFgoZyxNZSgtMSkpLGYpO3JldHVybiBvLnJhbms9PT0xJiYoaz1SZShrLGMpKSxKKGssby5zaGFwZSl9LHZhcmlhbmNlOigpPT57bGV0IGs9WChYKHkscCksZik7cmV0dXJuIG8ucmFuaz09PTEmJihrPVJlKGssYykpLEooayxvLnNoYXBlKX0sc2NhbGU6KCk9Pntjb25zdCBrPVgocCxnKTtsZXQgVD1YKG4sayk7cmV0dXJuIG8ucmFuaz09PTEmJihUPVJlKFQsYykpLEooVCxvLnNoYXBlKX0sb2Zmc2V0OigpPT57bGV0IGs9bjtyZXR1cm4gby5yYW5rPT09MSYmKGs9UmUoayxjKSksSihrLG8uc2hhcGUpfX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBoVz17a2VybmVsTmFtZTpiZCxpbnB1dHNUb1NhdmU6WyJ4IiwiaW5kaWNlcyJdLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdFtzLHJdPWUse2F4aXM6byxiYXRjaERpbXM6aX09dCxhPVFlKG8scy5zaGFwZSlbMF0sbD0oYyxoLHApPT4oKT0+e2NvbnN0IGY9Yy5zaGFwZSxnPWguc2l6ZSx5PWYuc2xpY2UoMCxhKSx3PXkubGVuZ3RoLGI9Zi5zbGljZShvLGYubGVuZ3RoKS5zbGljZSgxKSx2PWIubGVuZ3RoLFM9UGsoMCx3KSwkPVBrKHcrMSx3KzErdiksaz16ayhbeSxbZ10sYl0pLFQ9SihwLGspLEQ9SihoLFtnXSksTD16ayhbW3ddLFMsJF0pLHo9dHQoVCxMKTtsZXQgRj1PZyh6LEQsYy5zaGFwZVthXSk7Y29uc3QgXz1iaShMKTtyZXR1cm4gRj10dChGLF8pLEZ9O2lmKGk9PT0xKXtjb25zdCBjPXMuc2hhcGVbMF0saD1zLnNwbGl0KGMsMCk7cmV0dXJue3g6KCk9Pm9zKGgubWFwKChnLHkpPT5sKGcsci5zbGljZSh5LDEpLG4uc2xpY2UoeSwxKSkoKSkpLnJlc2hhcGUocy5zaGFwZSksaW5kaWNlczooKT0+cn19ZWxzZSByZXR1cm57eDpsKHMscixuKSxpbmRpY2VzOigpPT5yfX19O2Z1bmN0aW9uIFBrKG4sZSl7Y29uc3QgdD1bXTtmb3IobGV0IHM9bjtzPGU7KytzKXQucHVzaChzKTtyZXR1cm4gdH1mdW5jdGlvbiB6ayhuKXtjb25zdCBlPVtdO2ZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7Kyt0KWZvcihsZXQgcz0wO3M8blt0XS5sZW5ndGg7KytzKWUucHVzaChuW3RdW3NdKTtyZXR1cm4gZX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBwVz17a2VybmVsTmFtZTpIbCxpbnB1dHNUb1NhdmU6WyJhIiwiYiJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdCxzXT1lO3JldHVybnthOigpPT5ydCh0KSxiOigpPT5ydChzKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBmVz17a2VybmVsTmFtZTpxbCxncmFkRnVuYzpuPT4oe3g6KCk9Pk5lKG4sImZsb2F0MzIiKX0pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBtVz17a2VybmVsTmFtZTpLbCxncmFkRnVuYzpuPT4oe3g6KCk9PnJ0KG4pfSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGdXPXtrZXJuZWxOYW1lOlhsLGdyYWRGdW5jOm49Pih7eDooKT0+cnQobil9KX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgeVc9e2tlcm5lbE5hbWU6WWwsZ3JhZEZ1bmM6bj0+KHt4OigpPT5ydChuKX0pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB4Vz17a2VybmVsTmFtZTp2ZCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0W3NdPWUse2FscGhhOnJ9PXQsbz1hcyhzLDApO3JldHVybnt4OigpPT52bihvLG4sWChuLHIpKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBiVz17a2VybmVsTmFtZTpabCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT5PZShuLG1lKHQsMSkpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHdXPXtrZXJuZWxOYW1lOlFsLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9Pk9lKG4sTmUodCwiZmxvYXQzMiIpKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB2Vz17a2VybmVsTmFtZTpmJCxpbnB1dHNUb1NhdmU6W10sb3V0cHV0c1RvU2F2ZTpbITBdLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdFtzXT1lLHtheGlzOnJ9PXQ7cmV0dXJue2xvZ2l0czooKT0+e2NvbnN0IGk9cnMocyk7cmV0dXJuIEllKG4sWChSZShuLHIsITApLGkpKX19fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gU1cobixlLHQscz01LHI9MSxvPTEsaT0uNSl7Y29uc3QgYT17eDpuLHk6ZSxkeTp0fSxsPXtkZXB0aFJhZGl1czpzLGJpYXM6cixhbHBoYTpvLGJldGE6aX07cmV0dXJuIGoucnVuS2VybmVsKFRtLGEsbCl9Y29uc3QgTlc9Ryh7bG9jYWxSZXNwb25zZU5vcm1hbGl6YXRpb25CYWNrcHJvcF86U1d9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBrVz17a2VybmVsTmFtZTpJZCxpbnB1dHNUb1NhdmU6WyJ4Il0sb3V0cHV0c1RvU2F2ZTpbITBdLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdFtzLHJdPWUse2RlcHRoUmFkaXVzOm8sYmlhczppLGFscGhhOmEsYmV0YTpsfT10O3JldHVybnt4OigpPT5OVyhzLHIsbixvLGksYSxsKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBMMihuLGUsdCxzKXtyZXR1cm4gZS5yYW5rPHQucmFuayYmKGU9SihlLFV0KGUuc2hhcGUscykpKSxuLnJhbms8dC5yYW5rJiYobj1KKG4sVXQobi5zaGFwZSxzKSkpLHt4OigpPT5YKG4sTmUodHIodCxlKSxuLmR0eXBlKSl9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IE1rPXtrZXJuZWxOYW1lOlRkLGlucHV0c1RvU2F2ZTpbIngiXSxvdXRwdXRzVG9TYXZlOlshMF0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0IHM9dCx7cmVkdWN0aW9uSW5kaWNlczpyfT1zLG89ZVswXSxpPWVbMV0sYT1RZShyLG8uc2hhcGUpLGw9TDIobixpLG8sYSk7cmV0dXJue3g6KCk9PmwueCgpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IENXPXtrZXJuZWxOYW1lOkpsLGlucHV0c1RvU2F2ZTpbImEiLCJiIl0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0LHNdPWU7cmV0dXJue2E6KCk9PlgobixOZShDbyh0LHMpLCJmbG9hdDMyIikpLGI6KCk9PlgobixOZShnbCh0LHMpLCJmbG9hdDMyIikpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uICRXKG4sZSx0LHMscixvLGkpe2NvbnN0IGE9TyhuLCJkeSIsIm1heFBvb2wzZEdyYWQiKSxsPU8oZSwiaW5wdXQiLCJtYXhQb29sM2RHcmFkIiksYz1PKHQsIm91dHB1dCIsIm1heFBvb2wzZEdyYWQiKTtsZXQgaD1hLHA9bCxmPWMsZz0hMTtsLnJhbms9PT00JiYoZz0hMCxoPUooYSxbMSxhLnNoYXBlWzBdLGEuc2hhcGVbMV0sYS5zaGFwZVsyXSxhLnNoYXBlWzNdXSkscD1KKGwsWzEsbC5zaGFwZVswXSxsLnNoYXBlWzFdLGwuc2hhcGVbMl0sbC5zaGFwZVszXV0pLGY9SihjLFsxLGMuc2hhcGVbMF0sYy5zaGFwZVsxXSxjLnNoYXBlWzJdLGMuc2hhcGVbM11dKSksQShoLnJhbms9PT01LCgpPT5gRXJyb3IgaW4gbWF4UG9vbDNkR3JhZDogZHkgbXVzdCBiZSByYW5rIDUgYnV0IGdvdCByYW5rICR7aC5yYW5rfS5gKSxBKHAucmFuaz09PTUsKCk9PmBFcnJvciBpbiBtYXhQb29sM2RHcmFkOiBpbnB1dCBtdXN0IGJlIHJhbmsgNSBidXQgZ290IHJhbmsgJHtwLnJhbmt9LmApLEEoZi5yYW5rPT09NSwoKT0+YEVycm9yIGluIG1heFBvb2wzZEdyYWQ6IG91dHB1dCBtdXN0IGJlIHJhbmsgNSBidXQgZ290IHJhbmsgJHtmLnJhbmt9LmApLHFuKCJtYXhQb29sM2RHcmFkIixvLGkpO2NvbnN0IHk9e2R5OmgsaW5wdXQ6cCxvdXRwdXQ6Zn0sdz17ZmlsdGVyU2l6ZTpzLHN0cmlkZXM6cixwYWQ6byxkaW1Sb3VuZGluZ01vZGU6aX0sYj1qLnJ1bktlcm5lbChSbSx5LHcpO3JldHVybiBnP0ooYixbYi5zaGFwZVsxXSxiLnNoYXBlWzJdLGIuc2hhcGVbM10sYi5zaGFwZVs0XV0pOmJ9Y29uc3QgSVc9Ryh7bWF4UG9vbDNkR3JhZF86JFd9KTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBUVz17a2VybmVsTmFtZTpSZCxpbnB1dHNUb1NhdmU6WyJ4Il0sb3V0cHV0c1RvU2F2ZTpbITBdLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdFtzLHJdPWUse2ZpbHRlclNpemU6byxzdHJpZGVzOmkscGFkOmEsZGltUm91bmRpbmdNb2RlOmx9PXQ7cmV0dXJue3g6KCk9PklXKG4scyxyLG8saSxhLGwpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEVXKG4sZSx0LHMscixvLGkpe2NvbnN0IGE9TyhuLCJkeSIsIm1heFBvb2xHcmFkIiksbD1PKGUsImlucHV0IiwibWF4UG9vbEdyYWQiKSxjPU8odCwib3V0cHV0IiwibWF4UG9vbEdyYWQiKTtBKGwucmFuaz09PWEucmFuaywoKT0+YFJhbmsgb2YgaW5wdXQgKCR7bC5yYW5rfSkgZG9lcyBub3QgbWF0Y2ggcmFuayBvZiBkeSAoJHthLnJhbmt9KWApLEEoYS5yYW5rPT09NCwoKT0+YEVycm9yIGluIG1heFBvb2xHcmFkOiBkeSBtdXN0IGJlIHJhbmsgNCBidXQgZ290IHJhbmsgJHthLnJhbmt9LmApLEEobC5yYW5rPT09NCwoKT0+YEVycm9yIGluIG1heFBvb2xHcmFkOiBpbnB1dCBtdXN0IGJlIHJhbmsgNCBidXQgZ290IHJhbmsgJHtsLnJhbmt9LmApLHFuKCJtYXhQb29sR3JhZCIsbyxpKTtjb25zdCBoPXtkeTphLGlucHV0Omwsb3V0cHV0OmN9LHA9e2ZpbHRlclNpemU6cyxzdHJpZGVzOnIscGFkOm8sZGltUm91bmRpbmdNb2RlOml9O3JldHVybiBqLnJ1bktlcm5lbChFbSxoLHApfWNvbnN0IFJXPUcoe21heFBvb2xHcmFkXzpFV30pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IERXPXtrZXJuZWxOYW1lOkVkLGlucHV0c1RvU2F2ZTpbIngiXSxvdXRwdXRzVG9TYXZlOlshMF0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0W3Mscl09ZSx7ZmlsdGVyU2l6ZTpvLHN0cmlkZXM6aSxwYWQ6YX09dDtyZXR1cm57eDooKT0+UlcobixzLHIsbyxpLGEpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEFXPXtrZXJuZWxOYW1lOkRkLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlLHQpPT57Y29uc3Rbc109ZSx7YXhpczpyfT10LG89UWUocixzLnNoYXBlKSxhPW1uKHMuc2hhcGUsbylbMV0sbD1jZShhKTtyZXR1cm57eDooKT0+e2NvbnN0IGg9cy5zaGFwZS5zbGljZSgpO28uZm9yRWFjaChnPT57aFtnXT0xfSk7Y29uc3QgcD1KKG4saCk7cmV0dXJuIE9lKFgocCxKbihzLnNoYXBlLCJmbG9hdDMyIikpLGwpfX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBfVz17a2VybmVsTmFtZTpBZCxpbnB1dHNUb1NhdmU6WyJ4Il0sb3V0cHV0c1RvU2F2ZTpbITBdLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdCBzPXQse2F4aXM6cn09cyxbbyxpXT1lLGE9UWUocixvLnNoYXBlKSxsPUwyKG4saSxvLGEpO3JldHVybnt4OigpPT5sLngoKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBPVz17a2VybmVsTmFtZTpldSxpbnB1dHNUb1NhdmU6WyJhIiwiYiJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdCxzXT1lO3JldHVybnthOigpPT5YKG4sTmUod2kodCxzKSwiZmxvYXQzMiIpKSxiOigpPT5YKG4sTmUoYXModCxzKSwiZmxvYXQzMiIpKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBGVz17a2VybmVsTmFtZTpfZCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0IHM9ZVswXSx7cGFkZGluZ3M6cn09dCxvPXIubWFwKGk9PmlbMF0pO3JldHVybnt4OigpPT5zdChuLG8scy5zaGFwZSl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgTFc9e2tlcm5lbE5hbWU6dHUsaW5wdXRzVG9TYXZlOlsiYSIsImIiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3Qsc109ZSxyPUhlKHQuc2hhcGUscy5zaGFwZSk7cmV0dXJue2E6KCk9Pntjb25zdCBhPVp0KHQuc2hhcGUscik7cmV0dXJuIGEubGVuZ3RoPjA/SihSZShuLGEpLHQuc2hhcGUpOm59LGI6KCk9Pntjb25zdCBhPVgobixOdCgkdShPZSh0LHMpKSkpLGw9WnQocy5zaGFwZSxyKTtyZXR1cm4gbC5sZW5ndGg+MD9KKFJlKGEsbCkscy5zaGFwZSk6YX19fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgUFc9e2tlcm5lbE5hbWU6bnUsaW5wdXRzVG9TYXZlOlsiYSIsImIiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3Qsc109ZSxyPUhlKHQuc2hhcGUscy5zaGFwZSk7cmV0dXJue2E6KCk9Pntjb25zdCBhPVgobixOZShzLCJmbG9hdDMyIikpLGw9WnQodC5zaGFwZSxyKTtyZXR1cm4gbC5sZW5ndGg+MD9KKFJlKGEsbCksdC5zaGFwZSk6YX0sYjooKT0+e2NvbnN0IGE9WChuLE5lKHQsImZsb2F0MzIiKSksbD1adChzLnNoYXBlLHIpO3JldHVybiBsLmxlbmd0aD4wP0ooUmUoYSxsKSxzLnNoYXBlKTphfX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB6Vz17a2VybmVsTmFtZTpPZCxncmFkRnVuYzpuPT4oe3g6KCk9Pk50KG4pfSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IE1XPXtrZXJuZWxOYW1lOlBkLGlucHV0c1RvU2F2ZTpbImluZGljZXMiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0IHQ9ZVswXTtyZXR1cm57aW5kaWNlczooKT0+WXQodC5zaGFwZSwiZmxvYXQzMiIpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEJXPXtrZXJuZWxOYW1lOkxkLGdyYWRGdW5jOm49Pih7eDooKT0+cnQobil9KX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgVlc9e2tlcm5lbE5hbWU6emQsc2F2ZUFsbElucHV0czohMCxncmFkRnVuYzoobixlLHQpPT57Y29uc3R7YXhpczpzfT10O3JldHVybiB6cyhuLHMpLm1hcChvPT4oKT0+byl9fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBCaz17a2VybmVsTmFtZTpNZCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0IHM9ZVswXSx7cGFkZGluZ3M6cn09dCxvPXIubWFwKGk9PmlbMF0pO3JldHVybnt4OigpPT5zdChuLG8scy5zaGFwZSl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgV1c9e2tlcm5lbE5hbWU6c3UsaW5wdXRzVG9TYXZlOlsiYSIsImIiXSxvdXRwdXRzVG9TYXZlOlshMF0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0LHMscl09ZSxvPXQsaT1zLGE9SGUoby5zaGFwZSxpLnNoYXBlKTtyZXR1cm57YTooKT0+e2NvbnN0IGg9TmUoaSwiZmxvYXQzMiIpO2xldCBwPVgobixYKGgscXIobyxJZShoLE1lKDEpKSkpKTtjb25zdCBmPVp0KG8uc2hhcGUsYSk7cmV0dXJuIGYubGVuZ3RoPjAmJihwPVJlKHAsZikpLEoocCxvLnNoYXBlKX0sYjooKT0+e2NvbnN0IGg9YXMobywwKSxwPXZuKGgsd3MobykscnQobykpO2xldCBmPVgobixYKHIscCkpO2NvbnN0IGc9WnQoaS5zaGFwZSxhKTtyZXR1cm4gZy5sZW5ndGg+MCYmKGY9UmUoZixnKSksSihmLGkuc2hhcGUpfX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBVVz17a2VybmVsTmFtZTpCZCxpbnB1dHNUb1NhdmU6WyJ4IiwiYWxwaGEiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3Qsc109ZSxyPWFzKHQsMCk7cmV0dXJue3g6KCk9PnZuKHIsbixYKG4scykpLGFscGhhOigpPT57bGV0IG89dm4ocixydChuKSxYKG4sdCkpO2NvbnN0IGk9WnQocy5zaGFwZSxuLnNoYXBlKTtyZXR1cm4gaS5sZW5ndGg+MCYmKG89UmUobyxpKSksSihvLHMuc2hhcGUpfX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBqVyhuLGUsdCl7Y29uc3Qgcz1uLnNoYXBlLnNsaWNlKCk7c1t0XT0xO2NvbnN0IHI9SihlLHMpLG89amMobix0LCEwLCExKSxpPWpjKG4sdCwhMCwhMCksYT1YKG8saSk7cmV0dXJuIFgocixhKX1mdW5jdGlvbiBHVyhuLGUsdCl7Y29uc3Qgcz1uLnNoYXBlLmxlbmd0aCxyPXMtdC5sZW5ndGgsbz1MdCh0LHMpO2xldCBpPW47byE9bnVsbCYmKGk9dHQobixvKSk7Y29uc3QgYT1pLnNoYXBlLnNsaWNlKCksYz1hLnNwbGljZShzLXQubGVuZ3RoLHQubGVuZ3RoKS5yZWR1Y2UoKGYsZyk9PmYqZywxKTthLnB1c2goYyk7Y29uc3QgaD1pLnJlc2hhcGUoYSk7bGV0IHA9alcoaCxlLHIpO2lmKHA9cC5yZXNoYXBlKGkuc2hhcGUpLG8hPW51bGwpe2NvbnN0IGY9Ymkobyk7cD10dChwLGYpfXJldHVybiBwfWNvbnN0IEhXPXtrZXJuZWxOYW1lOlZkLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlLHQpPT57Y29uc3Rbc109ZSx7YXhpczpyfT10O2xldCBvPVtdO3JldHVybiByPT1udWxsP289cy5zaGFwZS5tYXAoKGksYSk9PmEpOnR5cGVvZiByPT0ibnVtYmVyIj9vPVtyXTpvPXIse3g6KCk9PkdXKHMsbixvKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBxVz17a2VybmVsTmFtZTpNbCxpbnB1dHNUb1NhdmU6WyJhIiwiYiJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdCxzXT1lLHI9SGUodC5zaGFwZSxzLnNoYXBlKTtyZXR1cm57YTooKT0+e2NvbnN0IGE9T2UobixOZShzLCJmbG9hdDMyIikpLGw9WnQodC5zaGFwZSxyKTtyZXR1cm4gbC5sZW5ndGg+MD9KKFJlKGEsbCksdC5zaGFwZSk6YX0sYjooKT0+e2xldCBhPVgobixOZSh0LCJmbG9hdDMyIikpO2NvbnN0IGw9WnQocy5zaGFwZSxyKTtsLmxlbmd0aD4wJiYoYT1KKFJlKGEsbCkscy5zaGFwZSkpO2NvbnN0IGM9eXQocyk7cmV0dXJuIE50KE9lKGEsTmUoYywiZmxvYXQzMiIpKSl9fX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEtXPXtrZXJuZWxOYW1lOnJ1LGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9Pk9lKG4sTnQoeXQodCkpKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBYVz17a2VybmVsTmFtZTppdSxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lLHM9WCh3aSh0LDYpLENhKHQpKTtyZXR1cm57eDooKT0+WChuLE5lKHMsImZsb2F0MzIiKSl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgWVc9e2tlcm5lbE5hbWU6b3UsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57eDooKT0+WChuLE5lKENhKHQpLCJmbG9hdDMyIikpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFFXPXtrZXJuZWxOYW1lOldkLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9Pkoobix0LnNoYXBlKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBaVz17a2VybmVsTmFtZTpqZCxpbnB1dHNUb1NhdmU6WyJpbWFnZXMiXSxncmFkRnVuYzoobixlLHQpPT57Y29uc3Rbc109ZSxyPXtkeTpuLGltYWdlczpzfTtyZXR1cm57aW1hZ2VzOigpPT5qLnJ1bktlcm5lbChXbSxyLHQpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEpXPXtrZXJuZWxOYW1lOlVkLGlucHV0c1RvU2F2ZTpbImltYWdlcyJdLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdFtzXT1lLHI9e2R5Om4saW1hZ2VzOnN9O3JldHVybntpbWFnZXM6KCk9PmoucnVuS2VybmVsKFZtLHIsdCl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgZVU9e2tlcm5lbE5hbWU6R2QsZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0e2RpbXM6c309dCxyPVFlKHMsbi5zaGFwZSk7cmV0dXJue3g6KCk9PlBzKG4scil9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgdFU9e2tlcm5lbE5hbWU6YXUsZ3JhZEZ1bmM6bj0+KHt4OigpPT5ydChuKX0pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBuVT17a2VybmVsTmFtZTpsdSxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT5OdChPZShuLFgocXIodCwxLjUpLDIpKSl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgc1U9e2tlcm5lbE5hbWU6SGQsaW5wdXRzVG9TYXZlOlsiY29uZGl0aW9uIl0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybntjb25kaXRpb246KCk9Pk5lKHJ0KHQpLCJmbG9hdDMyIiksdDooKT0+WChuLE5lKHQsbi5kdHlwZSkpLGU6KCk9PlgobixOZShoaCh0KSxuLmR0eXBlKSl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgclU9e2tlcm5lbE5hbWU6dXUsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57eDooKT0+e2NvbnN0IHM9YXModCxNZSgwKSkscj1NZShLZyksbz1NZShYZyksaT1YKG4sbyksYT1YKFgobixyKSxycyhOZSh0LCJmbG9hdDMyIikpKTtyZXR1cm4gdm4ocyxpLGEpfX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBvVT17a2VybmVsTmFtZTpwdSxvdXRwdXRzVG9TYXZlOlshMF0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT5YKG4sWCh0LEllKE1lKDEpLHQpKSl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgaVU9e2tlcm5lbE5hbWU6aHUsZ3JhZEZ1bmM6bj0+KHt4OigpPT5ydChuKX0pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBhVT17a2VybmVsTmFtZTpjdSxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT5YKGFoKE5lKHQsImZsb2F0MzIiKSksbil9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgbFU9e2tlcm5lbE5hbWU6ZHUsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57eDooKT0+WChoZyhOZSh0LCJmbG9hdDMyIikpLG4pfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHVVPXtrZXJuZWxOYW1lOnFkLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlLHQpPT57Y29uc3Rbc109ZSx7YmVnaW46cixzaXplOm99PXQsaT1zLnNoYXBlLFthLGxdPUhnKHMscixvKSxjPVtdO2ZvcihsZXQgaD0wO2g8bi5yYW5rO2grKyljLnB1c2goW2FbaF0saVtoXS1hW2hdLWxbaF1dKTtyZXR1cm57eDooKT0+JG8obixjKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBjVT17a2VybmVsTmFtZTpRZCxvdXRwdXRzVG9TYXZlOlshMF0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0W3NdPWUse2RpbTpyfT10LG89ITAsaT1YKG4scyk7cmV0dXJue2xvZ2l0czooKT0+SWUoaSxYKFJlKGksW3JdLG8pLHMpKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBkVT17a2VybmVsTmFtZTpmdSxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT5YKG4sd3IodCkpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFZrPXtrZXJuZWxOYW1lOlhkLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdHtibG9ja1NoYXBlOnMscGFkZGluZ3M6cn09dDtyZXR1cm57eDooKT0+aWgobixzLHIpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFdrPXtrZXJuZWxOYW1lOllkLGdyYWRGdW5jOihuLGUsdCk9Pntjb25zdHtheGlzOnN9PXQ7cmV0dXJue3g6KCk9Pld0KG4scyl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgaFU9e2tlcm5lbE5hbWU6bXUsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57eDooKT0+T2UobixYKHBuKE5lKHQsImZsb2F0MzIiKSksMikpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHBVPXtrZXJuZWxOYW1lOlFtLGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9PlgobixYKE5lKHQsImZsb2F0MzIiKSwyKSl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgZlU9e2tlcm5lbE5hbWU6Z3UsaW5wdXRzVG9TYXZlOlsiYSIsImIiXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3Qsc109ZSxyPU1lKDIpO3JldHVybnthOigpPT5YKG4sWChyLEllKHQscykpKSxiOigpPT5YKG4sWChyLEllKHMsdCkpKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBtVT17a2VybmVsTmFtZTp2dSxncmFkRnVuYzpuPT4oe3g6KCk9PnJ0KG4pfSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGdVPXtrZXJuZWxOYW1lOnl1LGlucHV0c1RvU2F2ZTpbImEiLCJiIl0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0LHNdPWUscj1IZSh0LnNoYXBlLHMuc2hhcGUpO3JldHVybnthOigpPT57bGV0IGE9bjtjb25zdCBsPVp0KHQuc2hhcGUscik7cmV0dXJuIGwubGVuZ3RoPjAmJihhPVJlKGEsbCkpLEooYSx0LnNoYXBlKX0sYjooKT0+e2xldCBhPW47Y29uc3QgbD1adChzLnNoYXBlLHIpO3JldHVybiBsLmxlbmd0aD4wJiYoYT1SZShhLGwpKSxKKE50KGEpLHMuc2hhcGUpfX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB5VT17a2VybmVsTmFtZTpLZCxpbnB1dHNUb1NhdmU6WyJ4Il0sZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0W3NdPWUscj1zLnNoYXBlLnNsaWNlKCkse2F4aXM6b309dDtRZShvLHMuc2hhcGUpLmZvckVhY2goYz0+e3JbY109MX0pO2NvbnN0IGE9SihuLHIpLGw9WChhLEpuKHMuc2hhcGUsImZsb2F0MzIiKSk7cmV0dXJue3g6KCk9Pmx9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgeFU9e2tlcm5lbE5hbWU6eHUsaW5wdXRzVG9TYXZlOlsieCJdLGdyYWRGdW5jOihuLGUpPT57Y29uc3RbdF09ZTtyZXR1cm57eDooKT0+T2Uobix5dChhaCh0KSkpfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGJVPXtrZXJuZWxOYW1lOmJ1LG91dHB1dHNUb1NhdmU6WyEwXSxncmFkRnVuYzoobixlKT0+e2NvbnN0W3RdPWU7cmV0dXJue3g6KCk9PlgoSWUoTWUoMSkseXQodCkpLG4pfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHdVPXtrZXJuZWxOYW1lOnd1LGlucHV0c1RvU2F2ZTpbIngiXSxncmFkRnVuYzoobixlLHQpPT57Y29uc3Rbc109ZSx7cmVwczpyfT10O3JldHVybnt4OigpPT57bGV0IGk9cnQocyk7aWYocy5yYW5rPT09MSlmb3IobGV0IGE9MDthPHJbMF07KythKWk9bWUoaSxzdChuLFthKnMuc2hhcGVbMF1dLFtzLnNoYXBlWzBdXSkpO2Vsc2UgaWYocy5yYW5rPT09Milmb3IobGV0IGE9MDthPHJbMF07KythKWZvcihsZXQgbD0wO2w8clsxXTsrK2wpaT1tZShpLHN0KG4sW2Eqcy5zaGFwZVswXSxsKnMuc2hhcGVbMV1dLFtzLnNoYXBlWzBdLHMuc2hhcGVbMV1dKSk7ZWxzZSBpZihzLnJhbms9PT0zKWZvcihsZXQgYT0wO2E8clswXTsrK2EpZm9yKGxldCBsPTA7bDxyWzFdOysrbClmb3IobGV0IGM9MDtjPHJbMl07KytjKWk9bWUoaSxzdChuLFthKnMuc2hhcGVbMF0sbCpzLnNoYXBlWzFdLGMqcy5zaGFwZVsyXV0sW3Muc2hhcGVbMF0scy5zaGFwZVsxXSxzLnNoYXBlWzJdXSkpO2Vsc2UgaWYocy5yYW5rPT09NClmb3IobGV0IGE9MDthPHJbMF07KythKWZvcihsZXQgbD0wO2w8clsxXTsrK2wpZm9yKGxldCBjPTA7YzxyWzJdOysrYylmb3IobGV0IGg9MDtoPHJbM107KytoKWk9bWUoaSxzdChuLFthKnMuc2hhcGVbMF0sbCpzLnNoYXBlWzFdLGMqcy5zaGFwZVsyXSxoKnMuc2hhcGVbM11dLFtzLnNoYXBlWzBdLHMuc2hhcGVbMV0scy5zaGFwZVsyXSxzLnNoYXBlWzNdXSkpO2Vsc2UgdGhyb3cgbmV3IEVycm9yKGBHcmFkaWVudCBmb3IgdGlsZSBvcGVyYXRpb24gaXMgbm90IGltcGxlbWVudGVkIGZvciByYW5rLSR7cy5yYW5rfSB0ZW5zb3JzIHlldC5gKTtyZXR1cm4gaX19fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgdlU9e2tlcm5lbE5hbWU6ZWEsZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0IHM9dCx7cGVybTpyfT1zLG89Ymkocik7cmV0dXJue3g6KCk9PnR0KG4sbyl9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgU1U9e2tlcm5lbE5hbWU6SmQsZ3JhZEZ1bmM6KG4sZSx0KT0+e2NvbnN0IHM9dCx7YXhpczpyfT1zO3JldHVybnt2YWx1ZTooKT0+b3MobixyKX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBOVT17a2VybmVsTmFtZTplaCxpbnB1dHNUb1NhdmU6WyJzZWdtZW50SWRzIl0sZ3JhZEZ1bmM6KG4sZSk9Pntjb25zdFt0XT1lO3JldHVybnt4OigpPT5rVShuLHQpfX19O2Z1bmN0aW9uIGtVKG4sZSl7Y29uc3QgdD1RcihlLHJ0KGUpKSxzPUl1KG4sdCk7bGV0IHI9Q28oZSxNZSgwLCJpbnQzMiIpKTtjb25zdCBvPXMucmFuay1yLnJhbms7Zm9yKGxldCBhPTA7YTxvOysrYSlyPUFuKHIsYSsxKTtyPVNyKHIsSm4ocy5zaGFwZSwiYm9vbCIpKTtjb25zdCBpPXJ0KHMpO3JldHVybiB2bihyLHMsaSl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgQ1U9e2tlcm5lbE5hbWU6dGgsZ3JhZEZ1bmM6bj0+KHt4OigpPT5ydChuKX0pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCAkVT1bRjIsTlYsa1YsQ1YsJFYsSVYsVFYsRVYsUlYsRFYsQVYsX1YsTFYsTVYsQlYsVlYsV1YsVVYsalYsR1YsSFYscVYsWFYsS1YsWlYsSlYsZVcsdFcsblcsc1cscVcsclcsb1csaVcsYVcsbFcsY1csdVcsZFcsaFcscFcsZlcsbVcsZ1cseVcseFcsYlcsd1csdlcsa1csTWssTWssQ1csVFcsRFcsQVcsX1csT1csRlcsTFcsUFcselcsTVcsQlcsVlcsQmssQmssV1csVVcsSFcsS1csWFcsWVcsUVcsWlcsSlcsZVUsdFUsblUsc1UsclUsb1UsaVUsYVUsbFUsdVUsY1UsZFUsVmssVmssV2ssV2ssaFUsZlUscFUsbVUsZ1UseVUseFUsYlUsd1UsdlUsU1UsTlUsQ1VdO2Zvcihjb25zdCBuIG9mICRVKW0kKG4pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmFicz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFh0KHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5hY29zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksRzEodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmFjb3NoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksSDEodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmFkZD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxtZSh0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5hbGw9ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSx1Zyh0aGlzLG4sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmFueT1mdW5jdGlvbihuLGUpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFZjKHRoaXMsbixlKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuYXJnTWF4PWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLGxhKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmFyZ01pbj1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxxMSh0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5hc1NjYWxhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLEEodGhpcy5zaXplPT09MSwoKT0+IlRoZSBhcnJheSBtdXN0IGhhdmUgb25seSAxIGVsZW1lbnQuIiksSih0aGlzLFtdKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuYXNUeXBlPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLE5lKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmFzMUQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxKKHRoaXMsW3RoaXMuc2l6ZV0pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5hczJEPWZ1bmN0aW9uKG4sZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksSih0aGlzLFtuLGVdKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuYXMzRD1mdW5jdGlvbihuLGUsdCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksSih0aGlzLFtuLGUsdF0pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5hczREPWZ1bmN0aW9uKG4sZSx0LHMpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLEoodGhpcyxbbixlLHQsc10pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5hczVEPWZ1bmN0aW9uKG4sZSx0LHMscil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksSih0aGlzLFtuLGUsdCxzLHJdKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuYXNpbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLEsxKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5hc2luaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFgxKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5hdGFuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksWTEodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmF0YW4yPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFExKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmF0YW5oPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksWjEodGhpcyl9O2hlKCkucHJvdG90eXBlLmF2Z1Bvb2w9ZnVuY3Rpb24obixlLHQscyl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksb2godGhpcyxuLGUsdCxzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuYmF0Y2hUb1NwYWNlTkQ9ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxpaCh0aGlzLG4sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmJhdGNoTm9ybT1mdW5jdGlvbihuLGUsdCxzLHIpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFN1KHRoaXMsbixlLHQscyxyKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuYnJvYWRjYXN0VG89ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksdGEodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuY2FzdD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxOZSh0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5jZWlsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksb2IodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmNsaXBCeVZhbHVlPWZ1bmN0aW9uKG4sZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksc3ModGhpcyxuLGUpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5jb25jYXQ9ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxuIGluc3RhbmNlb2YgZHQmJihuPVtuXSksV3QoW3RoaXMsLi4ubl0sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmNvbnYxZD1mdW5jdGlvbihuLGUsdCxzLHIsbyl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksY2codGhpcyxuLGUsdCxzLHIsbyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmNvbnYyZFRyYW5zcG9zZT1mdW5jdGlvbihuLGUsdCxzLHIpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLGRnKHRoaXMsbixlLHQscyxyKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuY29udjJkPWZ1bmN0aW9uKG4sZSx0LHMscixvKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSx4byh0aGlzLG4sZSx0LHMscixvKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuY29zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksYWgodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmNvc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxoZyh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuY3VtcHJvZD1mdW5jdGlvbihuLGUsdCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksamModGhpcyxuLGUsdCl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmN1bXN1bT1mdW5jdGlvbihuLGUsdCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCkscGcodGhpcyxuLGUsdCl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmRlcHRoVG9TcGFjZT1mdW5jdGlvbihuLGUpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHBiKHRoaXMsbixlKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZGVwdGh3aXNlQ29udjJkPWZ1bmN0aW9uKG4sZSx0LHMscixvKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxOdSh0aGlzLG4sZSx0LHMscixvKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZGlsYXRpb24yZD1mdW5jdGlvbihuLGUsdCxzLHIpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLGZiKHRoaXMsbixlLHQscyxyKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZGl2Tm9OYW49ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksbWIodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZGl2PWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLE9lKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmRvdD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxnYih0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5lbHU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxrdSh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZXF1YWw9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksdHIodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZXJmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksZmcodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmV1Y2xpZGVhbk5vcm09ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSx4Yih0aGlzLG4sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmV4cD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHJzKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5leHBhbmREaW1zPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLEFuKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmV4cG0xPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksYmIodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmZmdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHdoKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5mbGF0dGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksSih0aGlzLFt0aGlzLnNpemVdKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZmxvb3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSwkdSh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZmxvb3JEaXY9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksbGcodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZ2F0aGVyPWZ1bmN0aW9uKG4sZSx0KXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxJdSh0aGlzLG4sZSx0KX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuZ3JlYXRlckVxdWFsPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLENvKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmdyZWF0ZXI9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksYXModGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuaWZmdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHdsKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5pcmZmdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFJnKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5pc0Zpbml0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHdiKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5pc0luZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHZiKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5pc05hTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFNiKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5sZWFreVJlbHU9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksdWgodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubGVzc0VxdWFsPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHdpKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmxlc3M9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksZ2wodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubG9jYWxSZXNwb25zZU5vcm1hbGl6YXRpb249ZnVuY3Rpb24obixlLHQscyl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksTmIodGhpcyxuLGUsdCxzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubG9nU2lnbW9pZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLGtiKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5sb2dTb2Z0bWF4PWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHlnKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmxvZ1N1bUV4cD1mdW5jdGlvbihuLGUpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLGRoKHRoaXMsbixlKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksd3ModGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmxvZzFwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksY2godGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLmxvZ2ljYWxBbmQ9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksU3IodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubG9naWNhbE5vdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLGhoKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5sb2dpY2FsT3I9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCkseGcodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubG9naWNhbFhvcj1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxDYih0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5tYXRNdWw9ZnVuY3Rpb24obixlLHQpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFhlKHRoaXMsbixlLHQpfTtoZSgpLnByb3RvdHlwZS5tYXhQb29sPWZ1bmN0aW9uKG4sZSx0LHMpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHBoKHRoaXMsbixlLHQscyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLm1heD1mdW5jdGlvbihuLGUpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLExzKHRoaXMsbixlKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubWF4aW11bT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxRcih0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5tZWFuPWZ1bmN0aW9uKG4sZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksX3QodGhpcyxuLGUpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5taW49ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxtbCh0aGlzLG4sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLm1pbmltdW09ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksY2kodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubWlycm9yUGFkPWZ1bmN0aW9uKG4sZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksSWIodGhpcyxuLGUpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5tb2Q9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksVGIodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubXVsPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFgodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUubmVnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksTnQodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLm5vcm09ZnVuY3Rpb24obixlLHQpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLEN1KHRoaXMsbixlLHQpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5ub3RFcXVhbD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxkYSh0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5vbmVIb3Q9ZnVuY3Rpb24obixlPTEsdD0wKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSx5bCh0aGlzLG4sZSx0KX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUub25lc0xpa2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSx2cyh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUucGFkPWZ1bmN0aW9uKG4sZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksJG8odGhpcyxuLGUpfTtoZSgpLnByb3RvdHlwZS5wb29sPWZ1bmN0aW9uKG4sZSx0LHMscixvKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxFYih0aGlzLG4sZSx0LHMscixvKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUucG93PWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHFyKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnByZWx1PWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLGdoKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnByb2Q9ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxSYih0aGlzLG4sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnJlY2lwcm9jYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxPYih0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUucmVsdT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLElyKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5yZWx1Nj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFNnKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5yZXNoYXBlQXM9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksSih0aGlzLG4uc2hhcGUpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5yZXNoYXBlPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLEoodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUucmVzaXplQmlsaW5lYXI9ZnVuY3Rpb24obixlLHQpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFZJKHRoaXMsbixlLHQpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5yZXNpemVOZWFyZXN0TmVpZ2hib3I9ZnVuY3Rpb24obixlLHQpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFdJKHRoaXMsbixlLHQpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5yZXZlcnNlPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFBzKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnJmZnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSx2aCh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUucm91bmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxOZyh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUucnNxcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxrZyh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuc2VsdT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLENnKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5zZXBhcmFibGVDb252MmQ9ZnVuY3Rpb24obixlLHQscyxyLG8pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLCRnKHRoaXMsbixlLHQscyxyLG8pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5zaWdtb2lkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksd3IodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnNpZ249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxGYih0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuc2luPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksSWcodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnNpbmg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxUZyh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxzdCh0aGlzLG4sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnNvZnRtYXg9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksYmgodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuc29mdHBsdXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxrYSh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuc3BhY2VUb0JhdGNoTkQ9ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxtaCh0aGlzLG4sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnNwbGl0PWZ1bmN0aW9uKG4sZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksZXModGhpcyxuLGUpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5zcXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCkscG4odGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnNxdWFyZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHl0KHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5zcXVhcmVkRGlmZmVyZW5jZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxEZyh0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5zcXVlZXplPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFNpKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnN0YWNrPWZ1bmN0aW9uKG4sZSl7dGhpcy50aHJvd0lmRGlzcG9zZWQoKTtjb25zdCB0PW4gaW5zdGFuY2VvZiBkdD9bdGhpcyxuXTpbdGhpcywuLi5uXTtyZXR1cm4gb3ModCxlKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUuc3RlcD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxDYSh0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5zdHJpZGVkU2xpY2U9ZnVuY3Rpb24obixlLHQscyxyLG8saSxhKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxMYih0aGlzLG4sZSx0LHMscixvLGksYSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnN1Yj1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxJZSh0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS5zdW09ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxSZSh0aGlzLG4sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnRhbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLFBiKHRoaXMpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS50YW5oPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksdWkodGhpcyl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnRpbGU9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksX3ModGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUudG9Cb29sPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksTmUodGhpcywiYm9vbCIpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS50b0Zsb2F0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksTmUodGhpcywiZmxvYXQzMiIpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS50b0ludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLE5lKHRoaXMsImludDMyIil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnRvcGs9ZnVuY3Rpb24obixlKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxCYih0aGlzLG4sZSl9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLnRyYW5zcG9zZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSx0dCh0aGlzLG4pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS51bmlxdWU9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksVmIodGhpcyxuKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovaGUoKS5wcm90b3R5cGUudW5zb3J0ZWRTZWdtZW50U3VtPWZ1bmN0aW9uKG4sZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksT2codGhpcyxuLGUpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS51bnN0YWNrPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHpzKHRoaXMsbil9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2hlKCkucHJvdG90eXBlLndoZXJlPWZ1bmN0aW9uKG4sZSl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksdm4obix0aGlzLGUpfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9oZSgpLnByb3RvdHlwZS56ZXJvc0xpa2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxydCh0aGlzKX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgRnIgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSxPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxGci5wcm90b3R5cGUpfX1jbGFzcyBacyBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLFpzLnByb3RvdHlwZSl9fWNsYXNzIGVlIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsZWUucHJvdG90eXBlKX19Y2xhc3MgS2UgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSxPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxLZS5wcm90b3R5cGUpfX1jbGFzcyBFdyBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLEV3LnByb3RvdHlwZSl9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIFAye2NvbnN0cnVjdG9yKGUpe3RoaXMubWF4RW50cmllcz1lfHwxMDAsdGhpcy5jYWNoZT1uZXcgTWFwfWdldChlKXtsZXQgdDtyZXR1cm4gdGhpcy5jYWNoZS5oYXMoZSkmJih0PXRoaXMuY2FjaGUuZ2V0KGUpLHRoaXMuY2FjaGUuZGVsZXRlKGUpLHRoaXMuY2FjaGUuc2V0KGUsdCkpLHR9cHV0KGUsdCl7aWYodGhpcy5jYWNoZS5oYXMoZSkpdGhpcy5jYWNoZS5kZWxldGUoZSk7ZWxzZSBpZih0aGlzLmNhY2hlLnNpemU+PXRoaXMubWF4RW50cmllcyl7Y29uc3Qgcz10aGlzLmNhY2hlLmtleXMoKS5uZXh0KCkudmFsdWU7dGhpcy5jYWNoZS5kZWxldGUocyl9dGhpcy5jYWNoZS5zZXQoZSx0KX1nZXRNYXhFbnRyaWVzKCl7cmV0dXJuIHRoaXMubWF4RW50cmllc31zZXRNYXhFbnRyaWVzKGUpe2lmKGU8MCl0aHJvdyBuZXcgRXJyb3IoYFRoZSBtYXhFbnRyaWVzIG9mIExSVSBjYWNoZXMgbXVzdCBiZSBhdCBsZWFzdCAwLCBidXQgZ290ICR7ZX0uYCk7aWYodGhpcy5tYXhFbnRyaWVzPmUpZm9yKGxldCB0PTA7dDx0aGlzLm1heEVudHJpZXMtZTt0Kyspe2NvbnN0IHM9dGhpcy5jYWNoZS5rZXlzKCkubmV4dCgpLnZhbHVlO3RoaXMuY2FjaGUuZGVsZXRlKHMpfXRoaXMubWF4RW50cmllcz1lfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBmYShuLGUpe2lmKEFycmF5LmlzQXJyYXkobikpe2xldCB0PVtdO2ZvcihsZXQgcz0wO3M8ZTtzKyspdD10LmNvbmNhdChuKTtyZXR1cm4gdH1lbHNle2NvbnN0IHQ9bmV3IEFycmF5KGUpO3JldHVybiB0LmZpbGwobiksdH19ZnVuY3Rpb24gTHIobixlKXtpZighbil0aHJvdyBuZXcgRXcoZSl9ZnVuY3Rpb24gVWsobixlKXtsZXQgdD0wO2Zvcihjb25zdCBzIG9mIG4pcz09PWUmJnQrKztyZXR1cm4gdH1mdW5jdGlvbiBabihuKXtyZXR1cm4gbi5sZW5ndGg9PT0xP25bMF06bn1mdW5jdGlvbiBmdChuKXtyZXR1cm4gQXJyYXkuaXNBcnJheShuKT9uOltuXX1mdW5jdGlvbiB1byhuKXtjb25zdCB0PW4ucmVwbGFjZSgvKC4pKFtBLVpdW2EtejAtOV0rKS9nLCIkMV8kMiIpLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIiQxXyQyIikudG9Mb3dlckNhc2UoKTtyZXR1cm4gdFswXSE9PSJfIj90OiJwcml2YXRlIit0fWZ1bmN0aW9uIEtpKG4pe3JldHVybiBuLmxlbmd0aDw9MXx8bi5pbmRleE9mKCJfIik9PT0tMT9uOm4ucmVwbGFjZSgvW19dKyhcd3wkKS9nLChlLHQpPT50LnRvVXBwZXJDYXNlKCkpfWxldCBLcz17fTtmdW5jdGlvbiBSdyhuKXtpZihuPT1udWxsKXJldHVybiBudWxsO2NvbnN0IGU9e307cmV0dXJuIGUuY2xhc3NOYW1lPW4uZ2V0Q2xhc3NOYW1lKCksZS5jb25maWc9bi5nZXRDb25maWcoKSxlfWZ1bmN0aW9uIFkwKG4pe2lmKCEobj09bnVsbHx8dHlwZW9mIG4hPSJvYmplY3QiKSlpZihBcnJheS5pc0FycmF5KG4pKW4uZm9yRWFjaChlPT5ZMChlKSk7ZWxzZXtjb25zdCBlPU9iamVjdC5rZXlzKG4pO2Zvcihjb25zdCB0IG9mIGUpe2NvbnN0IHM9blt0XTtzIT1udWxsJiZ0eXBlb2Ygcz09Im9iamVjdCImJighQXJyYXkuaXNBcnJheShzKSYmcy50eXBlPT09Im5kYXJyYXkiJiZ0eXBlb2Ygcy52YWx1ZT09Im51bWJlciI/blt0XT1zLnZhbHVlOlkwKHMpKX19fWZ1bmN0aW9uIENoKG4sZT17fSx0PXt9LHM9Im9iamVjdCIscj0hMSl7aWYodHlwZW9mIG49PSJzdHJpbmciKXtjb25zdCBvPW47bGV0IGk7aWYobyBpbiB0KWk9dFtvXTtlbHNlIGlmKG8gaW4gS3MpaT1Lc1tvXTtlbHNlIGlmKGk9ZVtvXSxpPT1udWxsKXRocm93IG5ldyBlZShgVW5rbm93biAke3N9OiAke259LiBUaGlzIG1heSBiZSBkdWUgdG8gb25lIG9mIHRoZSBmb2xsb3dpbmcgcmVhc29uczoKMS4gVGhlICR7c30gaXMgZGVmaW5lZCBpbiBQeXRob24sIGluIHdoaWNoIGNhc2UgaXQgbmVlZHMgdG8gYmUgcG9ydGVkIHRvIFRlbnNvckZsb3cuanMgb3IgeW91ciBKYXZhU2NyaXB0IGNvZGUuCjIuIFRoZSBjdXN0b20gJHtzfSBpcyBkZWZpbmVkIGluIEphdmFTY3JpcHQsIGJ1dCBpcyBub3QgcmVnaXN0ZXJlZCBwcm9wZXJseSB3aXRoIHRmLnNlcmlhbGl6YXRpb24ucmVnaXN0ZXJDbGFzcygpLmApO3JldHVybiBpfWVsc2V7Y29uc3Qgbz1uO2lmKG8uY2xhc3NOYW1lPT1udWxsfHxvLmNvbmZpZz09bnVsbCl0aHJvdyBuZXcgZWUoYCR7c306IEltcHJvcGVyIGNvbmZpZyBmb3JtYXQ6ICR7SlNPTi5zdHJpbmdpZnkobyl9LgonY2xhc3NOYW1lJyBhbmQgJ2NvbmZpZycgbXVzdCBzZXQuYCk7Y29uc3QgaT1vLmNsYXNzTmFtZTtsZXQgYSxsO2lmKGkgaW4gdD9bYSxsXT10W2ldOmkgaW4gS3M/W2EsbF09S3MuY2xhc3NOYW1lOmkgaW4gZSYmKFthLGxdPWVbaV0pLGE9PW51bGwpdGhyb3cgbmV3IGVlKGBVbmtub3duICR7c306ICR7aX0uIFRoaXMgbWF5IGJlIGR1ZSB0byBvbmUgb2YgdGhlIGZvbGxvd2luZyByZWFzb25zOgoxLiBUaGUgJHtzfSBpcyBkZWZpbmVkIGluIFB5dGhvbiwgaW4gd2hpY2ggY2FzZSBpdCBuZWVkcyB0byBiZSBwb3J0ZWQgdG8gVGVuc29yRmxvdy5qcyBvciB5b3VyIEphdmFTY3JpcHQgY29kZS4KMi4gVGhlIGN1c3RvbSAke3N9IGlzIGRlZmluZWQgaW4gSmF2YVNjcmlwdCwgYnV0IGlzIG5vdCByZWdpc3RlcmVkIHByb3Blcmx5IHdpdGggdGYuc2VyaWFsaXphdGlvbi5yZWdpc3RlckNsYXNzKCkuYCk7aWYobCE9bnVsbCl7Y29uc3QgYz17fTtmb3IoY29uc3QgZyBvZiBPYmplY3Qua2V5cyhLcykpY1tnXT1Lc1tnXTtmb3IoY29uc3QgZyBvZiBPYmplY3Qua2V5cyh0KSljW2ddPXRbZ107Y29uc3QgaD1vLmNvbmZpZztoLmN1c3RvbU9iamVjdHM9Yztjb25zdCBwPU9iamVjdC5hc3NpZ24oe30sS3MpO2Zvcihjb25zdCBnIG9mIE9iamVjdC5rZXlzKHQpKUtzW2ddPXRbZ107WTAoby5jb25maWcpO2NvbnN0IGY9bChhLG8uY29uZmlnLHQscik7cmV0dXJuIEtzPU9iamVjdC5hc3NpZ24oe30scCksZn1lbHNle2NvbnN0IGM9T2JqZWN0LmFzc2lnbih7fSxLcyk7Zm9yKGNvbnN0IHAgb2YgT2JqZWN0LmtleXModCkpS3NbcF09dFtwXTtjb25zdCBoPW5ldyBhKG8uY29uZmlnKTtyZXR1cm4gS3M9T2JqZWN0LmFzc2lnbih7fSxjKSxofX19ZnVuY3Rpb24gSVUobixlKXtyZXR1cm4gbjxlPy0xOm4+ZT8xOjB9ZnVuY3Rpb24gWXAobixlKXtyZXR1cm4tMSpJVShuLGUpfWZ1bmN0aW9uIG5pKG4pe2lmKG49PW51bGwpcmV0dXJuIG47Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBvZiBuKWUuaW5kZXhPZih0KT09PS0xJiZlLnB1c2godCk7cmV0dXJuIGV9ZnVuY3Rpb24gVFUobil7aWYobj09bnVsbCl0aHJvdyBuZXcgZWUoYEludmFsaWQgdmFsdWUgaW4gb2JqOiAke0pTT04uc3RyaW5naWZ5KG4pfWApO2Zvcihjb25zdCBlIGluIG4paWYobi5oYXNPd25Qcm9wZXJ0eShlKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBJYShuLGUsdCl7aWYodCE9bnVsbCYmbi5pbmRleE9mKHQpPDApdGhyb3cgbmV3IGVlKGAke3R9IGlzIG5vdCBhIHZhbGlkICR7ZX0uICBWYWxpZCB2YWx1ZXMgYXJlICR7bn0gb3IgbnVsbC91bmRlZmluZWQuYCl9ZnVuY3Rpb24gRHcobixlLHQ9MCxzPTEvMCl7cmV0dXJuIExyKHQ+PTApLExyKHM+PXQpLEFycmF5LmlzQXJyYXkobikmJm4ubGVuZ3RoPj10JiZuLmxlbmd0aDw9cyYmbi5ldmVyeShyPT50eXBlb2Ygcj09PWUpfWZ1bmN0aW9uIGRuKG4sZSl7QXJyYXkuaXNBcnJheShuKT8oQShuLmxlbmd0aD4wLCgpPT5gJHtlfSBpcyB1bmV4cGVjdGVkbHkgYW4gZW1wdHkgYXJyYXkuYCksbi5mb3JFYWNoKCh0LHMpPT5kbih0LGBlbGVtZW50ICR7cysxfSBvZiAke2V9YCkpKTpBKE51bWJlci5pc0ludGVnZXIobikmJm4+MCwoKT0+YEV4cGVjdGVkICR7ZX0gdG8gYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLCBidXQgZ290ICR7ejIobil9LmApfWZ1bmN0aW9uIHoyKG4pe3JldHVybiBuPT09bnVsbD8ibnVsbCI6QXJyYXkuaXNBcnJheShuKT8iWyIrbi5tYXAoZT0+ejIoZSkpLmpvaW4oIiwiKSsiXSI6dHlwZW9mIG49PSJzdHJpbmciP2AiJHtufSJgOmAke259YH1mdW5jdGlvbiBFVShuLGUsdCl7bGV0IHM9dCE9bnVsbD90KCk6Vm4oKSxyO3JldHVybiguLi5pKT0+e2NvbnN0IGE9dCE9bnVsbD90KCk6Vm4oKTtyZXR1cm4gYS1zPGV8fChzPWEscj1uKC4uLmkpKSxyfX1mdW5jdGlvbiBNMihuKXtyZXR1cm4gbj09PSJyZWx1Ij8icmVsdSI6bj09PSJsaW5lYXIiPyJsaW5lYXIiOm49PT0iZWx1Ij8iZWx1IjpudWxsfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2xldCBSVT0wO2Z1bmN0aW9uIEIyKCl7cmV0dXJuIFJVKyt9Y29uc3QgUXA9e307ZnVuY3Rpb24gWWcobj0iIil7cmV0dXJuIG4gaW4gUXB8fChRcFtuXT0wKSxRcFtuXSs9MSxuK1FwW25dLnRvU3RyaW5nKCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRFU9WyJjaGFubmVsc0ZpcnN0IiwiY2hhbm5lbHNMYXN0Il0sQVU9WyJuZWFyZXN0IiwiYmlsaW5lYXIiXSxfVT1bInZhbGlkIiwic2FtZSIsImNhdXNhbCJdLE9VPVsibWF4IiwiYXZnIl0sRlU9WyJzdW0iLCJtdWwiLCJjb25jYXQiLCJhdmUiXTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBzbD1uZXcgTWFwO2Z1bmN0aW9uIEd0KG4pe0lhKERVLCJEYXRhRm9ybWF0IixuKX1mdW5jdGlvbiBMVShuKXtJYShBVSwiSW50ZXJwb2xhdGlvbkZvcm1hdCIsbil9ZnVuY3Rpb24gTXMobil7SWEoX1UsIlBhZGRpbmdNb2RlIixuKX1mdW5jdGlvbiBWMihuKXtJYShPVSwiUG9vbE1vZGUiLG4pfWNvbnN0IEFjPVtdLGprPSIvIjtmdW5jdGlvbiBuYShuLGUpe0FjLnB1c2gobik7dHJ5e2NvbnN0IHQ9ZSgpO3JldHVybiBBYy5wb3AoKSx0fWNhdGNoKHQpe3Rocm93IEFjLnBvcCgpLHR9fWZ1bmN0aW9uIFBVKCl7cmV0dXJuIEFjLmxlbmd0aD09PTA/IiI6QWMuam9pbihqaykramt9ZnVuY3Rpb24gVzIobil7aWYoIWoyKG4pKXRocm93IG5ldyBFcnJvcigiTm90IGEgdmFsaWQgdGVuc29yIG5hbWU6ICciK24rIiciKTtyZXR1cm4gUFUoKStufWZ1bmN0aW9uIFUyKG4pe2lmKCFqMihuKSl0aHJvdyBuZXcgRXJyb3IoIk5vdCBhIHZhbGlkIHRlbnNvciBuYW1lOiAnIituKyInIik7c2wuaGFzKG4pfHxzbC5zZXQobiwwKTtjb25zdCBlPXNsLmdldChuKTtpZihzbC5zZXQobixzbC5nZXQobikrMSksZT4wKXtjb25zdCB0PWAke259XyR7ZX1gO3JldHVybiBzbC5zZXQodCwxKSx0fWVsc2UgcmV0dXJuIG59Y29uc3QgelU9bmV3IFJlZ0V4cCgvXltBLVphLXowLTldWy1BLVphLXowLTlcLl9cL10qJC8pO2Z1bmN0aW9uIGoyKG4pe3JldHVybiEhbi5tYXRjaCh6VSl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gTVUobil7cmV0dXJuIG49PT1wYXJzZUludChuLnRvU3RyaW5nKCksMTApfWZ1bmN0aW9uIHNpKG4sZSx0KXtlPT1udWxsJiYoZT0wKSx0PT1udWxsJiYodD1uLmxlbmd0aCk7bGV0IHM9MTtmb3IobGV0IHI9ZTtyPHQ7KytyKXMqPW5bcl07cmV0dXJuIHN9ZnVuY3Rpb24gdmwobil7aWYobi5sZW5ndGg9PT0wKXJldHVybiBOdW1iZXIuTmFOO2xldCBlPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtmb3IobGV0IHQ9MDt0PG4ubGVuZ3RoO3QrKyl7Y29uc3Qgcz1uW3RdO3M8ZSYmKGU9cyl9cmV0dXJuIGV9ZnVuY3Rpb24gZGkobil7aWYobi5sZW5ndGg9PT0wKXJldHVybiBOdW1iZXIuTmFOO2xldCBlPU51bWJlci5ORUdBVElWRV9JTkZJTklUWTtmb3IobGV0IHQ9MDt0PG4ubGVuZ3RoO3QrKyl7Y29uc3Qgcz1uW3RdO3M+ZSYmKGU9cyl9cmV0dXJuIGV9ZnVuY3Rpb24gTnIobixlKXtpZihlPG4pdGhyb3cgbmV3IGVlKGBlbmQgKCR7ZX0pIDwgYmVnaW4gKCR7bn0pIGlzIGZvcmJpZGRlbi5gKTtjb25zdCB0PVtdO2ZvcihsZXQgcz1uO3M8ZTsrK3MpdC5wdXNoKHMpO3JldHVybiB0fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2xldCBnMDtmdW5jdGlvbiB0bigpe3JldHVybiBnMD09bnVsbCYmKGcwPUIxKCkuZXBzaWxvbigpKSxnMH1mdW5jdGlvbiBrcigpe3JldHVybiJjaGFubmVsc0xhc3QifS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFVyKG4sZSl7cmV0dXJuIE5lKG4sZSl9ZnVuY3Rpb24gJGgobixlPS0xKXtjb25zdCB0PW4uc2hhcGUuc2xpY2UoKTtyZXR1cm4gZTwwJiYoZT10Lmxlbmd0aCtlKzEpLHQuc3BsaWNlKGUsMCwxKSxKKG4sdCl9ZnVuY3Rpb24gQlUobixlKXtyZXR1cm4gcmUoKCk9PntpZihuLnNoYXBlLmxlbmd0aCE9PTIpdGhyb3cgbmV3IGVlKGByZXBlYXQoKSBleHBlY3RzIGEgcmFuay0yIHRlbnNvciwgYnV0IHJlY2VpdmVkIGEgcmFuay0ke24uc2hhcGUubGVuZ3RofSB0ZW5zb3IuYCk7Y29uc3QgdD0kaChuLDEpO3JldHVybiBRMCh0LFsxLGUsMV0pfSl9ZnVuY3Rpb24gVlUobil7Y29uc3QgZT1bc2kobi5zaGFwZSldO3JldHVybiBKKG4sZSl9ZnVuY3Rpb24gV1Uobil7aWYobi5yYW5rPD0xKXRocm93IG5ldyBlZShgYmF0Y2hGbGF0dGVuIHJlcXVpcmVzIGEgbWluaW11bSByYW5rIG9mIDIuIEdvdCByYW5rOiAke24ucmFua30uYCk7Y29uc3QgZT1bbi5zaGFwZVswXSxzaShuLnNoYXBlLDEpXTtyZXR1cm4gSihuLGUpfWZ1bmN0aW9uIHNhKG4sZSx0KXtyZXR1cm4gcmUoKCk9Pntzd2l0Y2gobi5yYW5rKXtjYXNlIDE6cmV0dXJuIHloKG4sZSx0KTtjYXNlIDI6cmV0dXJuIEVnKG4sW2UsMF0sW3Qsbi5zaGFwZVsxXV0pO2Nhc2UgMzpyZXR1cm4geGgobixbZSwwLDBdLFt0LG4uc2hhcGVbMV0sbi5zaGFwZVsyXV0pO2Nhc2UgNDpyZXR1cm4gYmwobixbZSwwLDAsMF0sW3Qsbi5zaGFwZVsxXSxuLnNoYXBlWzJdLG4uc2hhcGVbM11dKTtjYXNlIDU6cmV0dXJuIHN0KG4sW2UsMCwwLDAsMF0sW3Qsbi5zaGFwZVsxXSxuLnNoYXBlWzJdLG4uc2hhcGVbM10sbi5zaGFwZVs0XV0pO2Nhc2UgNjpyZXR1cm4gc3QobixbZSwwLDAsMCwwLDBdLFt0LG4uc2hhcGVbMV0sbi5zaGFwZVsyXSxuLnNoYXBlWzNdLG4uc2hhcGVbNF0sbi5zaGFwZVs1XV0pO2RlZmF1bHQ6dGhyb3cgbmV3IGVlKGBzbGljZUFsb25nRmlyc3RBeGlzKCkgcmVjZWl2ZWQgYW4gdW5zdXBwb3J0ZWQgdGVuc29yIHJhbms6ICR7bi5yYW5rfWApfX0pfWZ1bmN0aW9uIHkwKG4sZSx0KXtyZXR1cm4gcmUoKCk9Pntzd2l0Y2gobi5yYW5rKXtjYXNlIDE6cmV0dXJuIHloKG4sZSx0KTtjYXNlIDI6cmV0dXJuIEVnKG4sWzAsZV0sW24uc2hhcGVbMF0sdF0pO2Nhc2UgMzpyZXR1cm4geGgobixbMCwwLGVdLFtuLnNoYXBlWzBdLG4uc2hhcGVbMV0sdF0pO2Nhc2UgNDpyZXR1cm4gYmwobixbMCwwLDAsZV0sW24uc2hhcGVbMF0sbi5zaGFwZVsxXSxuLnNoYXBlWzJdLHRdKTtkZWZhdWx0OnRocm93IG5ldyBlZShgc2xpY2VBbG9uZ0xhc3RBeGlzKCkgcmVjZWl2ZWQgYW4gdW5zdXBwb3J0ZWQgdGVuc29yIHJhbms6ICR7bi5yYW5rfWApfX0pfWZ1bmN0aW9uIFpwKG4sZSx0LHMpe3JldHVybiByZSgoKT0+e3N3aXRjaChuLnJhbmspe2Nhc2UgMTpyZXR1cm4geWgobixlLHQpO2Nhc2UgMjpzd2l0Y2gocyl7Y2FzZSAxOnJldHVybiBzYShuLGUsdCk7Y2FzZSAyOnJldHVybiB5MChuLGUsdCk7ZGVmYXVsdDp0aHJvdyBuZXcgZWUoYFRoZSBheGlzIGlzIG5vdCB3aXRoaW4gdGhlIHJhbmsgb2YgdGhlIHRlbnNvciAke3N9YCl9Y2FzZSAzOnN3aXRjaChzKXtjYXNlIDE6cmV0dXJuIHNhKG4sZSx0KTtjYXNlIDI6cmV0dXJuIHhoKG4sWzAsZSwwXSxbbi5zaGFwZVswXSx0LG4uc2hhcGVbMl1dKTtjYXNlIDM6cmV0dXJuIHkwKG4sZSx0KTtkZWZhdWx0OnRocm93IG5ldyBlZShgVGhlIGF4aXMgaXMgbm90IHdpdGhpbiB0aGUgcmFuayBvZiB0aGUgdGVuc29yICR7c31gKX1jYXNlIDQ6c3dpdGNoKHMpe2Nhc2UgMTpyZXR1cm4gc2EobixlLHQpO2Nhc2UgMjpyZXR1cm4gYmwobixbMCxlLDAsMF0sW24uc2hhcGVbMF0sdCxuLnNoYXBlWzJdLG4uc2hhcGVbM11dKTtjYXNlIDM6cmV0dXJuIGJsKG4sWzAsMCxlLDBdLFtuLnNoYXBlWzBdLG4uc2hhcGVbMV0sdCxuLnNoYXBlWzNdXSk7Y2FzZSA0OnJldHVybiB5MChuLGUsdCk7ZGVmYXVsdDp0aHJvdyBuZXcgZWUoYFRoZSBheGlzIGlzIG5vdCB3aXRoaW4gdGhlIHJhbmsgb2YgdGhlIHRlbnNvciAke3N9YCl9ZGVmYXVsdDp0aHJvdyBuZXcgZWUoYHNsaWNlQWxvbmdMYXN0QXhpcygpIHJlY2VpdmVkIGFuIHVuc3VwcG9ydGVkIHRlbnNvciByYW5rOiAke24ucmFua31gKX19KX1mdW5jdGlvbiBBdyhuLGU9LTEpe2xldCB0O3JldHVybiBlPDAmJih0PW5bMF0ucmFuayx0IT09MD9lPXQ6ZT0wKSxlPT09blswXS5yYW5rJiYoZT0tMSksV3QobixlKX1mdW5jdGlvbiBHayhuLGUpe3N3aXRjaChuLnJhbmspe2Nhc2UgMTpyZXR1cm4gaWIoW24sZV0pO2Nhc2UgMjpyZXR1cm4gYWIoW24sZV0sMCk7Y2FzZSAzOnJldHVybiBsYihbbixlXSwwKTtjYXNlIDQ6cmV0dXJuIHViKFtuLGVdLDApO2RlZmF1bHQ6dGhyb3cgbmV3IGVlKGBjb25jYXRBbG9uZ0ZpcnN0QXhpcygpIHJlY2VpdmVkIGFuIHVuc3VwcG9ydGVkIHRlbnNvciByYW5rOiAke24ucmFua31gKX19ZnVuY3Rpb24gUTAobixlKXtpZihBcnJheS5pc0FycmF5KGUpfHwoZT1bZV0pLG4ucmFuayE9PWUubGVuZ3RoKXRocm93IG5ldyBlZShgVGhlIGxlbmd0aCBvZiBpbnB1dCBuICgke2UubGVuZ3RofSkgZG9lcyBub3QgbWF0Y2ggdGhlIG51bWJlciBvZiBkaW1lbnNpb25zIGluIGlucHV0IHggKCR7bi5yYW5rfSlgKTtyZXR1cm4gX3MobixlKX1mdW5jdGlvbiBRZyhuLGU9MCx0PTEscyxyKXtyZXR1cm4gdmcobixlLHQscyxyKX1mdW5jdGlvbiBqcihuLGUsdCxzKXtpZihuLnJhbms8Mnx8ZS5yYW5rPDIpdGhyb3cgbmV3IEtlKGBkb3QgcmVxdWlyZXMgYm90aCBpbnB1dHMgdG8gYmUgcmFuayA+PSAyIGJ1dCBnb3QgeCBzaGFwZSA9ICR7bi5zaGFwZX0gYW5kIHkgc2hhcGUgPSAke2Uuc2hhcGV9YCk7aWYoZS5yYW5rPj0zKXtjb25zdCByPW4uc2hhcGUuc2xpY2UoLTEpWzBdLG89ZS5zaGFwZS5zbGljZSgtMilbMF07aWYociE9PW8pdGhyb3cgbmV3IEtlKGBJZiByYW5rIHkgPj0gMywgdGhlbiB0aGUgc2Vjb25kIGxhc3QgZGltIG9mIHkgbXVzdCBlcXVhbCB0aGUgbGFzdCBkaW0gb2YgeCBidXQgZ290IHggc2hhcGUgPSAke24uc2hhcGV9IGFuZCAgeSBzaGFwZSA9ICR7ZS5zaGFwZX1gKX1pZihuLnJhbms9PT0yJiZlLnJhbms9PT0yKXJldHVybiBHMCh7YTpuLGI6ZSx0cmFuc3Bvc2VBOiExLHRyYW5zcG9zZUI6ITEsYmlhczpzP1owKG4ucmFuayxzLGtyKCkpOm51bGwsYWN0aXZhdGlvbjp0fSk7e2NvbnN0IHI9bi5zaGFwZS5zbGljZSgpLG89ci5wb3AoKTtuPUoobixbLTEsb10pO2NvbnN0IGk9ZS5zaGFwZS5zbGljZSgpLGE9aS5wb3AoKSxsPWkucG9wKCksYz1bLi4uaSxhXSxoPUFycmF5LmZyb20oe2xlbmd0aDplLnJhbmt9LCh5LHcpPT53PT09MD9lLnJhbmstMjp3PD1lLnJhbmstMj93LTE6dyk7ZT1KKHR0KGUsaCksW2wsLTFdKTtjb25zdCBwPVsuLi5yLC4uLmNdO3JldHVybiBKKEcwKHthOm4sYjplLHRyYW5zcG9zZUE6ITEsdHJhbnNwb3NlQjohMSxiaWFzOnM/WjAobi5yYW5rLHMsa3IoKSk6bnVsbCxhY3RpdmF0aW9uOnR9KSxwKX19ZnVuY3Rpb24gRzIobixlLHQpe3JldHVybiByZSgoKT0+KEFycmF5LmlzQXJyYXkoZSk/ZT1fbihlLCJpbnQzMiIpOmU9TmUoZSwiaW50MzIiKSxJdShuLGUsdCkpKX1mdW5jdGlvbiBJaChuKXtyZXR1cm4gWChuLG4pfWZ1bmN0aW9uIFowKG4sZSx0KXtjb25zdCBzPWUuc2hhcGU7aWYoZS5yYW5rIT09MSYmZS5yYW5rIT09bil0aHJvdyBuZXcgZWUoYFVuZXhwZWN0ZWQgYmlhcyBkaW1lbnNpb25zOiAke2UucmFua307IGV4cGVjdGVkIGl0IHRvIGJlIDEgb3IgJHtufWApO2lmKG49PT01KXtpZih0PT09ImNoYW5uZWxzRmlyc3QiKXJldHVybiBzLmxlbmd0aD09PTE/SihlLFsxLHNbMF0sMSwxLDFdKTpKKGUsWzEsc1szXSxzWzBdLHNbMV0sc1syXV0pO2lmKHQ9PT0iY2hhbm5lbHNMYXN0IilyZXR1cm4gcy5sZW5ndGg9PT0xP0ooZSxbMSwxLDEsMSxzWzBdXSk6SihlLFsxXS5jb25jYXQocykpfWVsc2UgaWYobj09PTQpe2lmKHQ9PT0iY2hhbm5lbHNGaXJzdCIpcmV0dXJuIHMubGVuZ3RoPT09MT9KKGUsWzEsc1swXSwxLDFdKTpKKGUsWzEsc1syXSxzWzBdLHNbMV1dKTtpZih0PT09ImNoYW5uZWxzTGFzdCIpcmV0dXJuIHMubGVuZ3RoPT09MT9KKGUsWzEsMSwxLHNbMF1dKTpKKGUsWzFdLmNvbmNhdChzKSl9ZWxzZSBpZihuPT09Myl7aWYodD09PSJjaGFubmVsc0ZpcnN0IilyZXR1cm4gcy5sZW5ndGg9PT0xP0ooZSxbMSxzWzBdLDFdKTpKKGUsWzEsc1sxXSxzWzBdXSk7aWYodD09PSJjaGFubmVsc0xhc3QiKXJldHVybiBzLmxlbmd0aD09PTE/SihlLFsxLDEsc1swXV0pOkooZSxbMV0uY29uY2F0KHMpKX1lbHNlIGlmKG48MylyZXR1cm4gZTt0aHJvdyBuZXcgZWUoYFVuc3VwcG9ydGVkIGlucHV0IHJhbmsgYnkgYmlhc0FkZDogJHtlLnJhbmt9YCl9ZnVuY3Rpb24gVHIobixlLHQpe3JldHVybiByZSgoKT0+KHQ9PW51bGwmJih0PWtyKCkpLEd0KHQpLG1lKG4sWjAobi5yYW5rLGUsdCkpKSl9ZnVuY3Rpb24gVVUobixlPTEpe2lmKGUhPT0xKXRocm93IG5ldyBLZShgU3VwcG9ydCBmb3IgYWxwaGEgdmFsdWVzIG90aGVyIHRoYW4gMSAoJHtlfSkgaXMgbm90IGltcGxlbWVudGVkIHlldC5gKTtyZXR1cm4ga3Uobil9ZnVuY3Rpb24galUobil7cmV0dXJuIHJlKCgpPT5PZShuLG1lKFh0KG4pLDEpKSl9ZnVuY3Rpb24gSDIobixlLHQscyl7cmV0dXJuIHJlKCgpPT5qYihuLGUsdCxzKSl9ZnVuY3Rpb24gR1Uobil7cmV0dXJuIHJlKCgpPT57Y29uc3QgZT1tZSguNSxYKC4yLG4pKTtyZXR1cm4gc3MoZSwwLDEpfSl9ZnVuY3Rpb24gVGgobixlLHQ9ITEpe3JldHVybiB0P24oKTplKCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgSFU9WyJmYW5JbiIsImZhbk91dCIsImZhbkF2ZyJdLHFVPVsibm9ybWFsIiwidW5pZm9ybSIsInRydW5jYXRlZE5vcm1hbCJdOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEtVKG4pe0lhKEhVLCJGYW5Nb2RlIixuKX1mdW5jdGlvbiBYVShuKXtJYShxVSwiRGlzdHJpYnV0aW9uIixuKX1jbGFzcyBzciBleHRlbmRzICRhe2Zyb21Db25maWdVc2VzQ3VzdG9tT2JqZWN0cygpe3JldHVybiExfWdldENvbmZpZygpe3JldHVybnt9fX1jbGFzcyBxMiBleHRlbmRzIHNye2FwcGx5KGUsdCl7cmV0dXJuIFl0KGUsdCl9fXEyLmNsYXNzTmFtZT0iWmVyb3MiO2dlKHEyKTtjbGFzcyBfdyBleHRlbmRzIHNye2FwcGx5KGUsdCl7cmV0dXJuIEpuKGUsdCl9fV93LmNsYXNzTmFtZT0iT25lcyI7Z2UoX3cpO2NsYXNzIEsyIGV4dGVuZHMgc3J7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoKSx0eXBlb2YgZSE9Im9iamVjdCIpdGhyb3cgbmV3IGVlKGBFeHBlY3RlZCBhcmd1bWVudCBvZiB0eXBlIENvbnN0YW50Q29uZmlnIGJ1dCBnb3QgJHtlfWApO2lmKGUudmFsdWU9PT12b2lkIDApdGhyb3cgbmV3IGVlKGBjb25maWcgbXVzdCBoYXZlIHZhbHVlIHNldCBidXQgZ290ICR7ZX1gKTt0aGlzLnZhbHVlPWUudmFsdWV9YXBwbHkoZSx0KXtyZXR1cm4gcmUoKCk9PlgoTWUodGhpcy52YWx1ZSksSm4oZSx0KSkpfWdldENvbmZpZygpe3JldHVybnt2YWx1ZTp0aGlzLnZhbHVlfX19SzIuY2xhc3NOYW1lPSJDb25zdGFudCI7Z2UoSzIpO2NsYXNzIFgyIGV4dGVuZHMgc3J7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLkRFRkFVTFRfTUlOVkFMPS0uMDUsdGhpcy5ERUZBVUxUX01BWFZBTD0uMDUsdGhpcy5taW52YWw9ZS5taW52YWx8fHRoaXMuREVGQVVMVF9NSU5WQUwsdGhpcy5tYXh2YWw9ZS5tYXh2YWx8fHRoaXMuREVGQVVMVF9NQVhWQUwsdGhpcy5zZWVkPWUuc2VlZH1hcHBseShlLHQpe3JldHVybiB2aShlLHRoaXMubWludmFsLHRoaXMubWF4dmFsLHQsdGhpcy5zZWVkKX1nZXRDb25maWcoKXtyZXR1cm57bWludmFsOnRoaXMubWludmFsLG1heHZhbDp0aGlzLm1heHZhbCxzZWVkOnRoaXMuc2VlZH19fVgyLmNsYXNzTmFtZT0iUmFuZG9tVW5pZm9ybSI7Z2UoWDIpO2NsYXNzIFkyIGV4dGVuZHMgc3J7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLkRFRkFVTFRfTUVBTj0wLHRoaXMuREVGQVVMVF9TVERERVY9LjA1LHRoaXMubWVhbj1lLm1lYW58fHRoaXMuREVGQVVMVF9NRUFOLHRoaXMuc3RkZGV2PWUuc3RkZGV2fHx0aGlzLkRFRkFVTFRfU1REREVWLHRoaXMuc2VlZD1lLnNlZWR9YXBwbHkoZSx0KXtpZih0PXR8fCJmbG9hdDMyIix0IT09ImZsb2F0MzIiJiZ0IT09ImludDMyIil0aHJvdyBuZXcgS2UoYHJhbmRvbU5vcm1hbCBkb2VzIG5vdCBzdXBwb3J0IGRUeXBlICR7dH0uYCk7cmV0dXJuIFFnKGUsdGhpcy5tZWFuLHRoaXMuc3RkZGV2LHQsdGhpcy5zZWVkKX1nZXRDb25maWcoKXtyZXR1cm57bWVhbjp0aGlzLm1lYW4sc3RkZGV2OnRoaXMuc3RkZGV2LHNlZWQ6dGhpcy5zZWVkfX19WTIuY2xhc3NOYW1lPSJSYW5kb21Ob3JtYWwiO2dlKFkyKTtjbGFzcyBRMiBleHRlbmRzIHNye2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5ERUZBVUxUX01FQU49MCx0aGlzLkRFRkFVTFRfU1REREVWPS4wNSx0aGlzLm1lYW49ZS5tZWFufHx0aGlzLkRFRkFVTFRfTUVBTix0aGlzLnN0ZGRldj1lLnN0ZGRldnx8dGhpcy5ERUZBVUxUX1NURERFVix0aGlzLnNlZWQ9ZS5zZWVkfWFwcGx5KGUsdCl7aWYodD10fHwiZmxvYXQzMiIsdCE9PSJmbG9hdDMyIiYmdCE9PSJpbnQzMiIpdGhyb3cgbmV3IEtlKGB0cnVuY2F0ZWROb3JtYWwgZG9lcyBub3Qgc3VwcG9ydCBkVHlwZSAke3R9LmApO3JldHVybiBfZyhlLHRoaXMubWVhbix0aGlzLnN0ZGRldix0LHRoaXMuc2VlZCl9Z2V0Q29uZmlnKCl7cmV0dXJue21lYW46dGhpcy5tZWFuLHN0ZGRldjp0aGlzLnN0ZGRldixzZWVkOnRoaXMuc2VlZH19fVEyLmNsYXNzTmFtZT0iVHJ1bmNhdGVkTm9ybWFsIjtnZShRMik7Y2xhc3MgWjIgZXh0ZW5kcyBzcntjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuZ2Fpbj1lLmdhaW4hPW51bGw/ZS5nYWluOjF9YXBwbHkoZSx0KXtyZXR1cm4gcmUoKCk9PntpZihlLmxlbmd0aCE9PTJ8fGVbMF0hPT1lWzFdKXRocm93IG5ldyBlZSgiSWRlbnRpdHkgbWF0cml4IGluaXRpYWxpemVyIGNhbiBvbmx5IGJlIHVzZWQgZm9yIDJEIHNxdWFyZSBtYXRyaWNlcy4iKTtyZXR1cm4gWCh0aGlzLmdhaW4sbWcoZVswXSkpfSl9Z2V0Q29uZmlnKCl7cmV0dXJue2dhaW46dGhpcy5nYWlufX19WjIuY2xhc3NOYW1lPSJJZGVudGl0eSI7Z2UoWjIpO2Z1bmN0aW9uIFlVKG4sZT0iY2hhbm5lbHNMYXN0Iil7bGV0IHQscztpZihHdChlKSxuLmxlbmd0aD09PTIpdD1uWzBdLHM9blsxXTtlbHNlIGlmKFszLDQsNV0uaW5kZXhPZihuLmxlbmd0aCkhPT0tMSl7aWYoZT09PSJjaGFubmVsc0ZpcnN0Iil7Y29uc3Qgcj1zaShuLDIpO3Q9blsxXSpyLHM9blswXSpyfWVsc2UgaWYoZT09PSJjaGFubmVsc0xhc3QiKXtjb25zdCByPXNpKG4sMCxuLmxlbmd0aC0yKTt0PW5bbi5sZW5ndGgtMl0qcixzPW5bbi5sZW5ndGgtMV0qcn19ZWxzZXtjb25zdCByPXNpKG4pO3Q9TWF0aC5zcXJ0KHIpLHM9TWF0aC5zcXJ0KHIpfXJldHVyblt0LHNdfWNsYXNzIFNzIGV4dGVuZHMgc3J7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoKSxlLnNjYWxlPDApdGhyb3cgbmV3IGVlKGBzY2FsZSBtdXN0IGJlIGEgcG9zaXRpdmUgZmxvYXQuIEdvdDogJHtlLnNjYWxlfWApO3RoaXMuc2NhbGU9ZS5zY2FsZT09bnVsbD8xOmUuc2NhbGUsdGhpcy5tb2RlPWUubW9kZT09bnVsbD8iZmFuSW4iOmUubW9kZSxLVSh0aGlzLm1vZGUpLHRoaXMuZGlzdHJpYnV0aW9uPWUuZGlzdHJpYnV0aW9uPT1udWxsPyJub3JtYWwiOmUuZGlzdHJpYnV0aW9uLFhVKHRoaXMuZGlzdHJpYnV0aW9uKSx0aGlzLnNlZWQ9ZS5zZWVkfWFwcGx5KGUsdCl7Y29uc3Qgcz1ZVShlKSxyPXNbMF0sbz1zWzFdO2xldCBpPXRoaXMuc2NhbGU7aWYodGhpcy5tb2RlPT09ImZhbkluIj9pLz1NYXRoLm1heCgxLHIpOnRoaXMubW9kZT09PSJmYW5PdXQiP2kvPU1hdGgubWF4KDEsbyk6aS89TWF0aC5tYXgoMSwocitvKS8yKSx0aGlzLmRpc3RyaWJ1dGlvbj09PSJub3JtYWwiKXtjb25zdCBhPU1hdGguc3FydChpKTtpZih0PXR8fCJmbG9hdDMyIix0IT09ImZsb2F0MzIiJiZ0IT09ImludDMyIil0aHJvdyBuZXcgS2UoYCR7dGhpcy5nZXRDbGFzc05hbWUoKX0gZG9lcyBub3Qgc3VwcG9ydCBkVHlwZSAke3R9LmApO3JldHVybiBfZyhlLDAsYSx0LHRoaXMuc2VlZCl9ZWxzZXtjb25zdCBhPU1hdGguc3FydCgzKmkpO3JldHVybiB2aShlLC1hLGEsdCx0aGlzLnNlZWQpfX1nZXRDb25maWcoKXtyZXR1cm57c2NhbGU6dGhpcy5zY2FsZSxtb2RlOnRoaXMubW9kZSxkaXN0cmlidXRpb246dGhpcy5kaXN0cmlidXRpb24sc2VlZDp0aGlzLnNlZWR9fX1Tcy5jbGFzc05hbWU9IlZhcmlhbmNlU2NhbGluZyI7Z2UoU3MpO2NsYXNzIE93IGV4dGVuZHMgU3N7Y29uc3RydWN0b3IoZSl7c3VwZXIoe3NjYWxlOjEsbW9kZToiZmFuQXZnIixkaXN0cmlidXRpb246InVuaWZvcm0iLHNlZWQ6ZT09bnVsbD9udWxsOmUuc2VlZH0pfWdldENsYXNzTmFtZSgpe3JldHVybiBTcy5jbGFzc05hbWV9fU93LmNsYXNzTmFtZT0iR2xvcm90VW5pZm9ybSI7Z2UoT3cpO2NsYXNzIEZ3IGV4dGVuZHMgU3N7Y29uc3RydWN0b3IoZSl7c3VwZXIoe3NjYWxlOjEsbW9kZToiZmFuQXZnIixkaXN0cmlidXRpb246Im5vcm1hbCIsc2VlZDplPT1udWxsP251bGw6ZS5zZWVkfSl9Z2V0Q2xhc3NOYW1lKCl7cmV0dXJuIFNzLmNsYXNzTmFtZX19RncuY2xhc3NOYW1lPSJHbG9yb3ROb3JtYWwiO2dlKEZ3KTtjbGFzcyBMdyBleHRlbmRzIFNze2NvbnN0cnVjdG9yKGUpe3N1cGVyKHtzY2FsZToyLG1vZGU6ImZhbkluIixkaXN0cmlidXRpb246Im5vcm1hbCIsc2VlZDplPT1udWxsP251bGw6ZS5zZWVkfSl9Z2V0Q2xhc3NOYW1lKCl7cmV0dXJuIFNzLmNsYXNzTmFtZX19THcuY2xhc3NOYW1lPSJIZU5vcm1hbCI7Z2UoTHcpO2NsYXNzIFB3IGV4dGVuZHMgU3N7Y29uc3RydWN0b3IoZSl7c3VwZXIoe3NjYWxlOjIsbW9kZToiZmFuSW4iLGRpc3RyaWJ1dGlvbjoidW5pZm9ybSIsc2VlZDplPT1udWxsP251bGw6ZS5zZWVkfSl9Z2V0Q2xhc3NOYW1lKCl7cmV0dXJuIFNzLmNsYXNzTmFtZX19UHcuY2xhc3NOYW1lPSJIZVVuaWZvcm0iO2dlKFB3KTtjbGFzcyB6dyBleHRlbmRzIFNze2NvbnN0cnVjdG9yKGUpe3N1cGVyKHtzY2FsZToxLG1vZGU6ImZhbkluIixkaXN0cmlidXRpb246Im5vcm1hbCIsc2VlZDplPT1udWxsP251bGw6ZS5zZWVkfSl9Z2V0Q2xhc3NOYW1lKCl7cmV0dXJuIFNzLmNsYXNzTmFtZX19encuY2xhc3NOYW1lPSJMZUN1bk5vcm1hbCI7Z2UoencpO2NsYXNzIE13IGV4dGVuZHMgU3N7Y29uc3RydWN0b3IoZSl7c3VwZXIoe3NjYWxlOjEsbW9kZToiZmFuSW4iLGRpc3RyaWJ1dGlvbjoidW5pZm9ybSIsc2VlZDplPT1udWxsP251bGw6ZS5zZWVkfSl9Z2V0Q2xhc3NOYW1lKCl7cmV0dXJuIFNzLmNsYXNzTmFtZX19TXcuY2xhc3NOYW1lPSJMZUN1blVuaWZvcm0iO2dlKE13KTtjbGFzcyBKMiBleHRlbmRzIHNye2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5ERUZBVUxUX0dBSU49MSx0aGlzLkVMRU1FTlRTX1dBUk5fU0xPVz0yZTMsdGhpcy5nYWluPWUuZ2Fpbj09bnVsbD90aGlzLkRFRkFVTFRfR0FJTjplLmdhaW4sdGhpcy5zZWVkPWUuc2VlZH1hcHBseShlLHQpe3JldHVybiByZSgoKT0+e2lmKGUubGVuZ3RoPDIpdGhyb3cgbmV3IEtlKCJTaGFwZSBtdXN0IGJlIGF0IGxlYXN0IDJELiIpO2lmKHQhPT0iaW50MzIiJiZ0IT09ImZsb2F0MzIiJiZ0IT09dm9pZCAwKXRocm93IG5ldyBUeXBlRXJyb3IoYFVuc3VwcG9ydGVkIGRhdGEgdHlwZSAke3R9LmApO3Q9dDtjb25zdCBzPWNlKGUuc2xpY2UoMCwtMSkpLHI9ZVtlLmxlbmd0aC0xXSxvPXMqcjtvPnRoaXMuRUxFTUVOVFNfV0FSTl9TTE9XJiZjb25zb2xlLndhcm4oYE9ydGhvZ29uYWwgaW5pdGlhbGl6ZXIgaXMgYmVpbmcgY2FsbGVkIG9uIGEgbWF0cml4IHdpdGggbW9yZSB0aGFuICR7dGhpcy5FTEVNRU5UU19XQVJOX1NMT1d9ICgke299KSBlbGVtZW50czogU2xvd25lc3MgbWF5IHJlc3VsdC5gKTtjb25zdCBpPVtNYXRoLm1heChyLHMpLE1hdGgubWluKHIscyldLGE9UWcoaSwwLDEsdCx0aGlzLnNlZWQpLGw9S2IucXIoYSwhMSk7bGV0IGM9bFswXTtjb25zdCBwPWxbMV0uZmxhdHRlbigpLnN0cmlkZWRTbGljZShbMF0sW01hdGgubWluKHIscykqTWF0aC5taW4ocixzKV0sW01hdGgubWluKHIscykrMV0pO3JldHVybiBjPVgoYyxwLnNpZ24oKSksczxyJiYoYz1jLnRyYW5zcG9zZSgpKSxYKE1lKHRoaXMuZ2FpbiksYy5yZXNoYXBlKGUpKX0pfWdldENvbmZpZygpe3JldHVybntnYWluOnRoaXMuZ2FpbixzZWVkOnRoaXMuc2VlZH19fUoyLmNsYXNzTmFtZT0iT3J0aG9nb25hbCI7Z2UoSjIpO2NvbnN0IEhrPXtjb25zdGFudDoiQ29uc3RhbnQiLGdsb3JvdE5vcm1hbDoiR2xvcm90Tm9ybWFsIixnbG9yb3RVbmlmb3JtOiJHbG9yb3RVbmlmb3JtIixoZU5vcm1hbDoiSGVOb3JtYWwiLGhlVW5pZm9ybToiSGVVbmlmb3JtIixpZGVudGl0eToiSWRlbnRpdHkiLGxlQ3VuTm9ybWFsOiJMZUN1bk5vcm1hbCIsbGVDdW5Vbmlmb3JtOiJMZUN1blVuaWZvcm0iLG9uZXM6Ik9uZXMiLG9ydGhvZ29uYWw6Ik9ydGhvZ29uYWwiLHJhbmRvbU5vcm1hbDoiUmFuZG9tTm9ybWFsIixyYW5kb21Vbmlmb3JtOiJSYW5kb21Vbmlmb3JtIix0cnVuY2F0ZWROb3JtYWw6IlRydW5jYXRlZE5vcm1hbCIsdmFyaWFuY2VTY2FsaW5nOiJWYXJpYW5jZVNjYWxpbmciLHplcm9zOiJaZXJvcyJ9O2Z1bmN0aW9uIHFrKG4sZT17fSl7cmV0dXJuIENoKG4sQXMuZ2V0TWFwKCkuY2xhc3NOYW1lTWFwLGUsImluaXRpYWxpemVyIil9ZnVuY3Rpb24gT3Qobil7cmV0dXJuIFJ3KG4pfWZ1bmN0aW9uIFR0KG4pe2lmKHR5cGVvZiBuPT0ic3RyaW5nIil7Y29uc3QgZT1uIGluIEhrP0hrW25dOm47aWYoZT09PSJHbG9yb3ROb3JtYWwiKXJldHVybiBuZXcgRnc7aWYoZT09PSJHbG9yb3RVbmlmb3JtIilyZXR1cm4gbmV3IE93O2lmKGU9PT0iSGVOb3JtYWwiKXJldHVybiBuZXcgTHc7aWYoZT09PSJIZVVuaWZvcm0iKXJldHVybiBuZXcgUHc7aWYoZT09PSJMZUN1bk5vcm1hbCIpcmV0dXJuIG5ldyB6dztpZihlPT09IkxlQ3VuVW5pZm9ybSIpcmV0dXJuIG5ldyBNdzt7Y29uc3QgdD17fTtyZXR1cm4gdC5jbGFzc05hbWU9ZSx0LmNvbmZpZz17fSxxayh0KX19ZWxzZSByZXR1cm4gbiBpbnN0YW5jZW9mIHNyP246cWsobil9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gSjAobil7cmV0dXJuIEFycmF5LmlzQXJyYXkobikmJkFycmF5LmlzQXJyYXkoblswXSl9ZnVuY3Rpb24gQWYobil7cmV0dXJuIG4ubGVuZ3RoPT09MD9bXTpBcnJheS5pc0FycmF5KG5bMF0pP246W25dfWZ1bmN0aW9uIGplKG4pe2xldCBlO2lmKEFycmF5LmlzQXJyYXkobikpe2lmKG4ubGVuZ3RoIT09MSl0aHJvdyBuZXcgZWUoYEV4cGVjdGVkIFRlbnNvciBsZW5ndGggdG8gYmUgMTsgZ290ICR7bi5sZW5ndGh9YCk7ZT1uWzBdfWVsc2UgZT1uO3JldHVybiBlfWZ1bmN0aW9uIGF0KG4pe2lmKEFycmF5LmlzQXJyYXkobikmJkFycmF5LmlzQXJyYXkoblswXSkpe2lmKG4ubGVuZ3RoPT09MSlyZXR1cm4gbj1uLG5bMF07dGhyb3cgbmV3IGVlKGBFeHBlY3RlZCBleGFjdGx5IDEgU2hhcGU7IGdvdCAke24ubGVuZ3RofWApfWVsc2UgcmV0dXJuIG59LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gX2Yobil7bGV0IGU9MDtmb3IoY29uc3QgdCBvZiBuKXQuc2hhcGUubGVuZ3RoPT09MD9lKz0xOmUrPXQuc2hhcGUucmVkdWNlKChzLHIpPT5zKnIpO3JldHVybiBlfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEtrPSJWYXJpYWJsZSI7Y2xhc3MgUVV7Y29uc3RydWN0b3IoZSx0PSJmbG9hdDMyIixzPUtrLHI9ITAsbz1udWxsKXt0aGlzLmR0eXBlPXQ/PyJmbG9hdDMyIix0aGlzLnNoYXBlPWUuc2hhcGUsdGhpcy5pZD1CMigpLHM9cz8/S2ssdGhpcy5vcmlnaW5hbE5hbWU9VzIocyksdGhpcy5uYW1lPVUyKHRoaXMub3JpZ2luYWxOYW1lKSx0aGlzLnRyYWluYWJsZV89cix0aGlzLmNvbnN0cmFpbnQ9byx0aGlzLnZhbD1XYihlLHRoaXMudHJhaW5hYmxlXyx0aGlzLm5hbWUsdGhpcy5kdHlwZSl9cmVhZCgpe3JldHVybiB0aGlzLmFzc2VydE5vdERpc3Bvc2VkKCksdGhpcy52YWx9d3JpdGUoZSl7cmV0dXJuIHRoaXMuYXNzZXJ0Tm90RGlzcG9zZWQoKSxaVSh0aGlzLnZhbCxlKSx0aGlzLnZhbC5pZCE9PWUuaWQmJih0aGlzLnZhbC5hc3NpZ24oZSksdGhpcy5jb25zdHJhaW50IT1udWxsJiZ0aGlzLnZhbC5hc3NpZ24odGhpcy5jb25zdHJhaW50LmFwcGx5KHRoaXMudmFsKSkpLHRoaXN9ZGlzcG9zZSgpe3RoaXMuYXNzZXJ0Tm90RGlzcG9zZWQoKSx0aGlzLnZhbC5kaXNwb3NlKCl9YXNzZXJ0Tm90RGlzcG9zZWQoKXtpZih0aGlzLnZhbC5pc0Rpc3Bvc2VkKXRocm93IG5ldyBFcnJvcihgTGF5ZXJzVmFyaWFibGUgJHt0aGlzLm5hbWV9IGlzIGFscmVhZHkgZGlzcG9zZWQuYCl9Z2V0IHRyYWluYWJsZSgpe3JldHVybiB0aGlzLnRyYWluYWJsZV99c2V0IHRyYWluYWJsZShlKXt0aGlzLnRyYWluYWJsZV89ZSx0aGlzLnZhbC50cmFpbmFibGU9ZX19ZnVuY3Rpb24gWlUobixlKXtpZihuLnNoYXBlLnRvU3RyaW5nKCkhPT1lLnNoYXBlLnRvU3RyaW5nKCkpdGhyb3cgbmV3IEVycm9yKCJTaGFwZSBtaXNtYXRjaDogIitKU09OLnN0cmluZ2lmeShuLnNoYXBlKSsiIHZzLiAiK0pTT04uc3RyaW5naWZ5KGUuc2hhcGUpKX1mdW5jdGlvbiBlMShuKXtyZXR1cm4gbi5tYXAoZT0+ZS5yZWFkKCkpfWZ1bmN0aW9uIEJ3KG4pe24uZm9yRWFjaChlPT57ZVswXS53cml0ZShlWzFdKX0pfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIG5ue2NvbnN0cnVjdG9yKGUpe3RoaXMuZHR5cGU9ZS5kdHlwZSx0aGlzLnNoYXBlPWUuc2hhcGUsZS5zaGFwZSE9bnVsbD90aGlzLm5kaW09ZS5zaGFwZS5sZW5ndGg6dGhpcy5uZGltPWUubmRpbSx0aGlzLm1heE5EaW09ZS5tYXhORGltLHRoaXMubWluTkRpbT1lLm1pbk5EaW0sdGhpcy5heGVzPWUuYXhlc3x8e319fWNsYXNzIFhye2NvbnN0cnVjdG9yKGUsdCxzLHIsbyxpLGEpe3RoaXMuZHR5cGU9ZSx0aGlzLnNoYXBlPXQsdGhpcy5zb3VyY2VMYXllcj1zLHRoaXMuaW5wdXRzPXIsdGhpcy5jYWxsQXJncz1vLHRoaXMub3V0cHV0VGVuc29ySW5kZXg9YSx0aGlzLmlkPUIyKCksaSE9bnVsbCYmKHRoaXMub3JpZ2luYWxOYW1lPVcyKGkpLHRoaXMubmFtZT1VMih0aGlzLm9yaWdpbmFsTmFtZSkpLHRoaXMucmFuaz10Lmxlbmd0aH19bGV0IEpVPTA7Y2xhc3MgWmd7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmNhbGxBcmdzPXQsdGhpcy5pZD1KVSsrLHRoaXMub3V0Ym91bmRMYXllcj1lLm91dGJvdW5kTGF5ZXIsdGhpcy5pbmJvdW5kTGF5ZXJzPWUuaW5ib3VuZExheWVycyx0aGlzLm5vZGVJbmRpY2VzPWUubm9kZUluZGljZXMsdGhpcy50ZW5zb3JJbmRpY2VzPWUudGVuc29ySW5kaWNlcyx0aGlzLmlucHV0VGVuc29ycz1lLmlucHV0VGVuc29ycyx0aGlzLm91dHB1dFRlbnNvcnM9ZS5vdXRwdXRUZW5zb3JzLHRoaXMuaW5wdXRNYXNrcz1lLmlucHV0TWFza3MsdGhpcy5vdXRwdXRNYXNrcz1lLm91dHB1dE1hc2tzLHRoaXMuaW5wdXRTaGFwZXM9ZS5pbnB1dFNoYXBlcyx0aGlzLm91dHB1dFNoYXBlcz1lLm91dHB1dFNoYXBlcztmb3IoY29uc3QgcyBvZiBlLmluYm91bmRMYXllcnMpcz8ub3V0Ym91bmROb2Rlcy5wdXNoKHRoaXMpO2Uub3V0Ym91bmRMYXllci5pbmJvdW5kTm9kZXMucHVzaCh0aGlzKX1nZXRDb25maWcoKXtjb25zdCBlPVtdO2Zvcihjb25zdCB0IG9mIHRoaXMuaW5ib3VuZExheWVycyl0IT1udWxsP2UucHVzaCh0Lm5hbWUpOmUucHVzaChudWxsKTtyZXR1cm57b3V0Ym91bmRMYXllcjp0aGlzLm91dGJvdW5kTGF5ZXI/dGhpcy5vdXRib3VuZExheWVyLm5hbWU6bnVsbCxpbmJvdW5kTGF5ZXJzOmUsbm9kZUluZGljZXM6dGhpcy5ub2RlSW5kaWNlcyx0ZW5zb3JJbmRpY2VzOnRoaXMudGVuc29ySW5kaWNlc319fWxldCBlaj0wO2NsYXNzIFplIGV4dGVuZHMgJGF7Y29uc3RydWN0b3IoZT17fSl7c3VwZXIoKSx0aGlzLl9jYWxsSG9vaz1udWxsLHRoaXMuX2FkZGVkV2VpZ2h0TmFtZXM9W10sdGhpcy5fc3RhdGVmdWw9ITEsdGhpcy5pZD1laisrLHRoaXMuYWN0aXZpdHlSZWd1bGFyaXplcj1udWxsLHRoaXMuaW5wdXRTcGVjPW51bGwsdGhpcy5zdXBwb3J0c01hc2tpbmc9ITEsdGhpcy5fdHJhaW5hYmxlV2VpZ2h0cz1bXSx0aGlzLl9ub25UcmFpbmFibGVXZWlnaHRzPVtdLHRoaXMuX2xvc3Nlcz1bXSx0aGlzLl91cGRhdGVzPVtdLHRoaXMuX2J1aWx0PSExLHRoaXMuaW5ib3VuZE5vZGVzPVtdLHRoaXMub3V0Ym91bmROb2Rlcz1bXTtsZXQgdD1lLm5hbWU7aWYoIXQpe2NvbnN0IHM9dGhpcy5nZXRDbGFzc05hbWUoKTt0PXVvKHMpKyJfIitZZyhzKX1pZih0aGlzLm5hbWU9dCx0aGlzLnRyYWluYWJsZV89ZS50cmFpbmFibGU9PW51bGw/ITA6ZS50cmFpbmFibGUsZS5pbnB1dFNoYXBlIT1udWxsfHxlLmJhdGNoSW5wdXRTaGFwZSE9bnVsbCl7bGV0IHM7aWYoZS5iYXRjaElucHV0U2hhcGUhPW51bGwpcz1lLmJhdGNoSW5wdXRTaGFwZTtlbHNlIGlmKGUuaW5wdXRTaGFwZSE9bnVsbCl7bGV0IG89bnVsbDtlLmJhdGNoU2l6ZSE9bnVsbCYmKG89ZS5iYXRjaFNpemUpLHM9W29dLmNvbmNhdChlLmlucHV0U2hhcGUpfXRoaXMuYmF0Y2hJbnB1dFNoYXBlPXM7bGV0IHI9ZS5kdHlwZTtyPT1udWxsJiYocj1lLmlucHV0RFR5cGUpLHI9PW51bGwmJihyPSJmbG9hdDMyIiksdGhpcy5kdHlwZT1yfWUud2VpZ2h0cyE9bnVsbD90aGlzLmluaXRpYWxXZWlnaHRzPWUud2VpZ2h0czp0aGlzLmluaXRpYWxXZWlnaHRzPW51bGwsdGhpcy5fcmVmQ291bnQ9bnVsbCx0aGlzLmZhc3RXZWlnaHRJbml0RHVyaW5nQnVpbGQ9ITF9c3RhdGljIG5vZGVLZXkoZSx0KXtyZXR1cm4gZS5uYW1lKyJfaWItIit0LnRvU3RyaW5nKCl9Z2V0Tm9kZUF0SW5kZXgoZSx0KXtpZih0aGlzLmluYm91bmROb2Rlcy5sZW5ndGg9PT0wKXRocm93IG5ldyBacyhgVGhlIGxheWVyIGhhcyBuZXZlciBiZWVuIGNhbGxlZCBhbmQgdGh1cyBoYXMgbm8gZGVmaW5lZCAke3R9LmApO2lmKHRoaXMuaW5ib3VuZE5vZGVzLmxlbmd0aDw9ZSl0aHJvdyBuZXcgZWUoYEFza2VkIHRvIGdldCAke3R9IGF0IG5vZGUgJHtlfSwgYnV0IHRoZSBsYXllciBoYXMgb25seSAke3RoaXMuaW5ib3VuZE5vZGVzLmxlbmd0aH0gaW5ib3VuZCBub2Rlcy5gKTtyZXR1cm4gdGhpcy5pbmJvdW5kTm9kZXNbZV19Z2V0SW5wdXRBdChlKXtyZXR1cm4gWm4odGhpcy5nZXROb2RlQXRJbmRleChlLCJpbnB1dCIpLmlucHV0VGVuc29ycyl9Z2V0T3V0cHV0QXQoZSl7cmV0dXJuIFpuKHRoaXMuZ2V0Tm9kZUF0SW5kZXgoZSwib3V0cHV0Iikub3V0cHV0VGVuc29ycyl9Z2V0IGlucHV0KCl7aWYodGhpcy5pbmJvdW5kTm9kZXMubGVuZ3RoPjEpdGhyb3cgbmV3IEZyKGBMYXllciAke3RoaXMubmFtZX0gaGFzIG11bHRpcGxlIGluYm91bmQgbm9kZXMsIGhlbmNlIHRoZSBub3Rpb24gb2YgImxheWVyIGlucHV0IiBpcyBpbGwtZGVmaW5lZC4gVXNlIFxgZ2V0SW5wdXRBdChub2RlSW5kZXgpXGAgaW5zdGVhZC5gKTtpZih0aGlzLmluYm91bmROb2Rlcy5sZW5ndGg9PT0wKXRocm93IG5ldyBGcihgTGF5ZXIgJHt0aGlzLm5hbWV9IGlzIG5vdCBjb25uZWN0ZWQsIG5vIGlucHV0IHRvIHJldHVybi5gKTtyZXR1cm4gWm4odGhpcy5nZXROb2RlQXRJbmRleCgwLCJpbnB1dCIpLmlucHV0VGVuc29ycyl9Z2V0IG91dHB1dCgpe2lmKHRoaXMuaW5ib3VuZE5vZGVzLmxlbmd0aD09PTApdGhyb3cgbmV3IEZyKGBMYXllciAke3RoaXMubmFtZX0gaGFzIG5vIGluYm91bmQgbm9kZXMuYCk7aWYodGhpcy5pbmJvdW5kTm9kZXMubGVuZ3RoPjEpdGhyb3cgbmV3IEZyKGBMYXllciAke3RoaXMubmFtZX0gaGFzIG11bHRpcGxlIGluYm91bmQgbm9kZXMsIGhlbmNlIHRoZSBub3Rpb24gb2YgImxheWVyIG91dHB1dCIgaXMgaWxsLWRlZmluZWQuIFVzZSBcYGdldE91dHB1dEF0KG5vZGVJbmRleClcYCBpbnN0ZWFkLmApO3JldHVybiBabih0aGlzLmdldE5vZGVBdEluZGV4KDAsIm91dHB1dCIpLm91dHB1dFRlbnNvcnMpfWdldCBsb3NzZXMoKXtyZXR1cm4gdGhpcy5fbG9zc2VzfWNhbGN1bGF0ZUxvc3Nlcygpe3JldHVybiB0aGlzLmxvc3Nlcy5tYXAoZT0+ZSgpKX1nZXQgdXBkYXRlcygpe3JldHVybiB0aGlzLl91cGRhdGVzfWdldCBidWlsdCgpe3JldHVybiB0aGlzLl9idWlsdH1zZXQgYnVpbHQoZSl7dGhpcy5fYnVpbHQ9ZX1nZXQgdHJhaW5hYmxlKCl7cmV0dXJuIHRoaXMudHJhaW5hYmxlX31zZXQgdHJhaW5hYmxlKGUpe3RoaXMuX3RyYWluYWJsZVdlaWdodHMuZm9yRWFjaCh0PT50LnRyYWluYWJsZT1lKSx0aGlzLnRyYWluYWJsZV89ZX1nZXQgdHJhaW5hYmxlV2VpZ2h0cygpe3JldHVybiB0aGlzLnRyYWluYWJsZV8/dGhpcy5fdHJhaW5hYmxlV2VpZ2h0cy5maWx0ZXIoZT0+ZS50cmFpbmFibGUpOltdfXNldCB0cmFpbmFibGVXZWlnaHRzKGUpe3RoaXMuX3RyYWluYWJsZVdlaWdodHM9ZX1nZXQgbm9uVHJhaW5hYmxlV2VpZ2h0cygpe3JldHVybiB0aGlzLnRyYWluYWJsZT90aGlzLl90cmFpbmFibGVXZWlnaHRzLmZpbHRlcihlPT4hZS50cmFpbmFibGUpLmNvbmNhdCh0aGlzLl9ub25UcmFpbmFibGVXZWlnaHRzKTp0aGlzLl90cmFpbmFibGVXZWlnaHRzLmNvbmNhdCh0aGlzLl9ub25UcmFpbmFibGVXZWlnaHRzKX1zZXQgbm9uVHJhaW5hYmxlV2VpZ2h0cyhlKXt0aGlzLl9ub25UcmFpbmFibGVXZWlnaHRzPWV9Z2V0IHdlaWdodHMoKXtyZXR1cm4gdGhpcy50cmFpbmFibGVXZWlnaHRzLmNvbmNhdCh0aGlzLm5vblRyYWluYWJsZVdlaWdodHMpfWdldCBzdGF0ZWZ1bCgpe3JldHVybiB0aGlzLl9zdGF0ZWZ1bH1yZXNldFN0YXRlcygpe2lmKCF0aGlzLnN0YXRlZnVsKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGNhbGwgdGhlIHJlc2V0U3RhdGVzKCkgbWV0aG9kIG9mIGEgbm9uLXN0YXRlZnVsIExheWVyIG9iamVjdC4iKX1hc3NlcnRJbnB1dENvbXBhdGliaWxpdHkoZSl7Y29uc3QgdD1mdChlKTtpZih0aGlzLmlucHV0U3BlYz09bnVsbHx8dGhpcy5pbnB1dFNwZWMubGVuZ3RoPT09MClyZXR1cm47Y29uc3Qgcz1mdCh0aGlzLmlucHV0U3BlYyk7aWYodC5sZW5ndGghPT1zLmxlbmd0aCl0aHJvdyBuZXcgZWUoYExheWVyICR7dGhpcy5uYW1lfSBleHBlY3RzICR7cy5sZW5ndGh9IGlucHV0cywgYnV0IGl0IHJlY2VpdmVkICR7dC5sZW5ndGh9IGlucHV0IHRlbnNvcnMuIElucHV0IHJlY2VpdmVkOiAke2V9YCk7Zm9yKGxldCByPTA7cjx0Lmxlbmd0aDtyKyspe2NvbnN0IG89dFtyXSxpPXNbcl07aWYoaT09bnVsbCljb250aW51ZTtjb25zdCBhPW8ucmFuaztpZihpLm5kaW0hPW51bGwmJmEhPT1pLm5kaW0pdGhyb3cgbmV3IGVlKGBJbnB1dCAke3J9IGlzIGluY29tcGF0aWJsZSB3aXRoIGxheWVyICR7dGhpcy5uYW1lfTogZXhwZWN0ZWQgbmRpbT0ke2kubmRpbX0sIGZvdW5kIG5kaW09JHthfWApO2lmKGkubWF4TkRpbSE9bnVsbCYmYT5pLm1heE5EaW0pdGhyb3cgbmV3IGVlKGBJbnB1dCAke3J9IGlzIGluY29tcGF0aWJsZSB3aXRoIGxheWVyICR7dGhpcy5uYW1lfTogZXhwZWN0ZWQgbWF4X25kaW09JHtpLm1heE5EaW19LCBmb3VuZCBuZGltPSR7YX1gKTtpZihpLm1pbk5EaW0hPW51bGwmJmE8aS5taW5ORGltKXRocm93IG5ldyBlZShgSW5wdXQgJHtyfSBpcyBpbmNvbXBhdGlibGUgd2l0aCBsYXllciAke3RoaXMubmFtZX06IGV4cGVjdGVkIG1pbl9uZGltPSR7aS5taW5ORGltfSwgZm91bmQgbmRpbT0ke2F9LmApO2lmKGkuZHR5cGUhPW51bGwmJm8uZHR5cGUhPT1pLmR0eXBlKXRocm93IG5ldyBlZShgSW5wdXQgJHtyfSBpcyBpbmNvbXBhdGlibGUgd2l0aCBsYXllciAke3RoaXMubmFtZX0gOiBleHBlY3RlZCBkdHlwZT0ke2kuZHR5cGV9LCBmb3VuZCBkdHlwZT0ke28uZHR5cGV9LmApO2lmKGkuYXhlcyl7Y29uc3QgbD1vLnNoYXBlO2Zvcihjb25zdCBjIGluIGkuYXhlcyl7Y29uc3QgaD1OdW1iZXIoYykscD1pLmF4ZXNbY10sZj1oPj0wP2xbaF06bFtsLmxlbmd0aCtoXTtpZihwIT1udWxsJiZbcCxudWxsXS5pbmRleE9mKGYpPT09LTEpdGhyb3cgbmV3IGVlKGBJbnB1dCAke3J9IGlzIGluY29tcGF0aWJsZSB3aXRoIGxheWVyICR7dGhpcy5uYW1lfTogZXhwZWN0ZWQgYXhpcyAke2h9IG9mIGlucHV0IHNoYXBlIHRvIGhhdmUgdmFsdWUgJHtwfSBidXQgZ290IHNoYXBlICR7bH0uYCl9fWlmKGkuc2hhcGUhPW51bGwpZm9yKGxldCBsPTA7bDxpLnNoYXBlLmxlbmd0aDsrK2wpe2NvbnN0IGM9aS5zaGFwZVtsXSxoPW8uc2hhcGVbbF07aWYoYyE9bnVsbCYmaCE9bnVsbCYmYyE9PWgpdGhyb3cgbmV3IGVlKGBJbnB1dCAke3J9IGlzIGluY29tcGF0aWJsZSB3aXRoIGxheWVyICR7dGhpcy5uYW1lfTogZXhwZWN0ZWQgc2hhcGU9JHtpLnNoYXBlfSwgZm91bmQgc2hhcGU9JHtvLnNoYXBlfS5gKX19fWNhbGwoZSx0KXtyZXR1cm4gZX1pbnZva2VDYWxsSG9vayhlLHQpe3RoaXMuX2NhbGxIb29rIT1udWxsJiZ0aGlzLl9jYWxsSG9vayhlLHQpfXNldENhbGxIb29rKGUpe3RoaXMuX2NhbGxIb29rPWV9Y2xlYXJDYWxsSG9vaygpe3RoaXMuX2NhbGxIb29rPW51bGx9YXBwbHkoZSx0KXt0PXR8fHt9LHRoaXMuYXNzZXJ0Tm90RGlzcG9zZWQoKTtjb25zdCBzPWZ0KGUpLHI9c2ooZSksbz1yaihlKTtpZihyPT09byl0aHJvdyBuZXcgZWUoIkFyZ3VtZW50cyB0byBhcHBseSgpIG11c3QgYmUgYWxsIFN5bWJvbGljVGVuc29ycyBvciBhbGwgVGVuc29ycyIpO3JldHVybiBuYSh0aGlzLm5hbWUsKCk9PntpZighdGhpcy5idWlsdCl7dGhpcy5hc3NlcnRJbnB1dENvbXBhdGliaWxpdHkoZSk7Y29uc3QgaT1bXTtmb3IoY29uc3QgYSBvZiBmdChlKSlpLnB1c2goYS5zaGFwZSk7dGhpcy5idWlsZChabihpKSksdGhpcy5idWlsdD0hMCx0aGlzLmluaXRpYWxXZWlnaHRzJiZ0aGlzLnNldFdlaWdodHModGhpcy5pbml0aWFsV2VpZ2h0cyksdGhpcy5fcmVmQ291bnQ9PT1udWxsJiZvJiYodGhpcy5fcmVmQ291bnQ9MSl9aWYodGhpcy5hc3NlcnRJbnB1dENvbXBhdGliaWxpdHkoZSksbyl7bGV0IGk9dGhpcy5jYWxsKGUsdCk7dGhpcy5zdXBwb3J0c01hc2tpbmcmJnRoaXMuc2V0TWFza01ldGFkYXRhKGUsaSk7Y29uc3QgYT1mdChpKSxsPVtdO2ZvcihsZXQgYyBvZiBhKXMuaW5kZXhPZihjKSE9PS0xJiYoYz1jLmNsb25lKCkpLGwucHVzaChjKTtpZihpPVpuKGwpLHRoaXMuYWN0aXZpdHlSZWd1bGFyaXplciE9bnVsbCl0aHJvdyBuZXcgS2UoIkxheWVyIGludm9jYXRpb24gaW4gdGhlIHByZXNlbmNlIG9mIGFjdGl2aXR5IHJlZ3VsYXJpemVyKHMpIGlzIG5vdCBzdXBwb3J0ZWQgeWV0LiIpO3JldHVybiBpfWVsc2V7Y29uc3QgaT10aihlKSxhPXRoaXMuY29tcHV0ZU91dHB1dFNoYXBlKGkpO2xldCBsO2NvbnN0IGM9bmooZSk7aWYodGhpcy53YXJuT25JbmNvbXBhdGlibGVJbnB1dFNoYXBlKEFycmF5LmlzQXJyYXkoZSk/aVswXTppKSxhIT1udWxsJiZhLmxlbmd0aD4wJiZBcnJheS5pc0FycmF5KGFbMF0pP2w9YS5tYXAoKGgscCk9Pm5ldyBYcihjLGgsdGhpcyxmdChlKSx0LHRoaXMubmFtZSxwKSk6bD1uZXcgWHIoYyxhLHRoaXMsZnQoZSksdCx0aGlzLm5hbWUpLHRoaXMuYWRkSW5ib3VuZE5vZGUoZSxsLG51bGwsbnVsbCxpLGEsdCksdGhpcy5fcmVmQ291bnQrKyx0aGlzLmFjdGl2aXR5UmVndWxhcml6ZXIhPW51bGwpdGhyb3cgbmV3IEtlKCJMYXllciBpbnZvY2F0aW9uIGluIHRoZSBwcmVzZW5jZSBvZiBhY3Rpdml0eSByZWd1bGFyaXplcihzKSBpcyBub3Qgc3VwcG9ydGVkIHlldC4iKTtyZXR1cm4gbH19KX13YXJuT25JbmNvbXBhdGlibGVJbnB1dFNoYXBlKGUpe2lmKHRoaXMuYmF0Y2hJbnB1dFNoYXBlIT1udWxsKWlmKGUubGVuZ3RoIT09dGhpcy5iYXRjaElucHV0U2hhcGUubGVuZ3RoKWNvbnNvbGUud2FybihgVGhlIHJhbmsgb2YgdGhlIGlucHV0IHRlbnNvciBwcm92aWRlZCAoc2hhcGU6ICR7SlNPTi5zdHJpbmdpZnkoZSl9KSBkb2VzIG5vdCBtYXRjaCB0aGF0IG9mIHRoZSBiYXRjaElucHV0U2hhcGUgKCR7SlNPTi5zdHJpbmdpZnkodGhpcy5iYXRjaElucHV0U2hhcGUpfSkgb2YgdGhlIGxheWVyICR7dGhpcy5uYW1lfWApO2Vsc2V7bGV0IHQ9ITE7dGhpcy5iYXRjaElucHV0U2hhcGUuZm9yRWFjaCgocyxyKT0+e3MhPW51bGwmJmVbcl0hPW51bGwmJmVbcl0hPT1zJiYodD0hMCl9KSx0JiZjb25zb2xlLndhcm4oYFRoZSBzaGFwZSBvZiB0aGUgaW5wdXQgdGVuc29yICgke0pTT04uc3RyaW5naWZ5KGUpfSkgZG9lcyBub3QgbWF0Y2ggdGhlIGV4cGVjdGF0aW9uIG9mIGxheWVyICR7dGhpcy5uYW1lfTogJHtKU09OLnN0cmluZ2lmeSh0aGlzLmJhdGNoSW5wdXRTaGFwZSl9YCl9fWdldCBvdXRwdXRTaGFwZSgpe2lmKHRoaXMuaW5ib3VuZE5vZGVzPT1udWxsfHx0aGlzLmluYm91bmROb2Rlcy5sZW5ndGg9PT0wKXRocm93IG5ldyBGcihgVGhlIGxheWVyICR7dGhpcy5uYW1lfSBoYXMgbmV2ZXIgYmVlbiBjYWxsZWQgYW5kIHRodXMgaGFzIG5vIGRlZmluZWQgb3V0cHV0IHNoYXBlLmApO2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2YgdGhpcy5pbmJvdW5kTm9kZXMpe2NvbnN0IHM9SlNPTi5zdHJpbmdpZnkodC5vdXRwdXRTaGFwZXMpO2UuaW5kZXhPZihzKT09PS0xJiZlLnB1c2gocyl9aWYoZS5sZW5ndGg9PT0xKXtjb25zdCB0PXRoaXMuaW5ib3VuZE5vZGVzWzBdLm91dHB1dFNoYXBlcztyZXR1cm4gQXJyYXkuaXNBcnJheSh0KSYmQXJyYXkuaXNBcnJheSh0WzBdKSYmdC5sZW5ndGg9PT0xP3RbMF06dH1lbHNlIHRocm93IG5ldyBGcihgVGhlIGxheWVyICR7dGhpcy5uYW1lfSBoYXMgbXVsdGlwbGUgaW5ib3VuZCBub2RlcyB3aXRoIGRpZmZlcmVudCBvdXRwdXQgc2hhcGVzLiBIZW5jZSB0aGUgbm90aW9uIG9mICJvdXRwdXQgc2hhcGUiIGlzIGlsbC1kZWZpbmVkIGZvciB0aGUgbGF5ZXIuYCl9Y291bnRQYXJhbXMoKXtpZighdGhpcy5idWlsdCl0aHJvdyBuZXcgWnMoYFlvdSB0cmllZCB0byBjYWxsIGNvdW50UGFyYW1zKCkgb24gJHt0aGlzLm5hbWV9LCBidXQgdGhlIGxheWVyIGlzIG5vdCBidWlsdCB5ZXQuIEJ1aWxkIGl0IGZpcnN0IGJ5IGNhbGxpbmcgYnVpbGQoYmF0Y2hJbnB1dFNoYXBlKS5gKTtyZXR1cm4gX2YodGhpcy53ZWlnaHRzKX1idWlsZChlKXt0aGlzLmJ1aWx0PSEwfWdldFdlaWdodHMoZT0hMSl7cmV0dXJuIGUxKGU/dGhpcy50cmFpbmFibGVXZWlnaHRzOnRoaXMud2VpZ2h0cyl9c2V0V2VpZ2h0cyhlKXtyZSgoKT0+e2NvbnN0IHQ9dGhpcy53ZWlnaHRzO2lmKHQubGVuZ3RoIT09ZS5sZW5ndGgpdGhyb3cgbmV3IGVlKGBZb3UgY2FsbGVkIHNldFdlaWdodHMod2VpZ2h0cykgb24gbGF5ZXIgIiR7dGhpcy5uYW1lfSIgd2l0aCBhIHdlaWdodCBsaXN0IG9mIGxlbmd0aCAke2UubGVuZ3RofSwgYnV0IHRoZSBsYXllciB3YXMgZXhwZWN0aW5nICR7dC5sZW5ndGh9IHdlaWdodHMuIFByb3ZpZGVkIHdlaWdodHM6ICR7ZX0uLi5gKTtpZih0Lmxlbmd0aD09PTApcmV0dXJuO2NvbnN0IHM9W10scj1lMSh0KTtmb3IobGV0IG89MDtvPHIubGVuZ3RoOysrbyl7Y29uc3QgaT1yW29dLGE9dFtvXSxsPWVbb107aWYoIUplKGkuc2hhcGUsbC5zaGFwZSkpdGhyb3cgbmV3IGVlKGBMYXllciB3ZWlnaHQgc2hhcGUgJHtpLnNoYXBlfSBub3QgY29tcGF0aWJsZSB3aXRoIHByb3ZpZGVkIHdlaWdodCBzaGFwZSAke2wuc2hhcGV9YCk7cy5wdXNoKFthLGxdKX1CdyhzKX0pfWFkZFdlaWdodChlLHQscyxyLG8saSxhLGwpe2lmKHRoaXMuX2FkZGVkV2VpZ2h0TmFtZXMuaW5kZXhPZihlKSE9PS0xKXRocm93IG5ldyBlZShgRHVwbGljYXRlIHdlaWdodCBuYW1lICR7ZX0gZm9yIGxheWVyICR7dGhpcy5uYW1lfWApO3RoaXMuX2FkZGVkV2VpZ2h0TmFtZXMucHVzaChlKSxzPT1udWxsJiYocz0iZmxvYXQzMiIpLHRoaXMuZmFzdFdlaWdodEluaXREdXJpbmdCdWlsZCYmKHI9bCE9bnVsbD9sKCk6VHQoInplcm9zIikpO2NvbnN0IGM9ci5hcHBseSh0LHMpLGg9bmV3IFFVKGMscyxlLGksYSk7cmV0dXJuIGMuZGlzcG9zZSgpLG8hPW51bGwmJnRoaXMuYWRkTG9zcygoKT0+by5hcHBseShoLnJlYWQoKSkpLGk9PW51bGwmJihpPSEwKSxpP3RoaXMuX3RyYWluYWJsZVdlaWdodHMucHVzaChoKTp0aGlzLl9ub25UcmFpbmFibGVXZWlnaHRzLnB1c2goaCksaH1zZXRGYXN0V2VpZ2h0SW5pdER1cmluZ0J1aWxkKGUpe3RoaXMuZmFzdFdlaWdodEluaXREdXJpbmdCdWlsZD1lfWFkZExvc3MoZSl7ZT09bnVsbHx8QXJyYXkuaXNBcnJheShlKSYmZS5sZW5ndGg9PT0wfHwoZT1mdChlKSx0aGlzLl9sb3NzZXMhPT12b2lkIDAmJnRoaXMuX2xvc3NlcyE9PW51bGwmJnRoaXMubG9zc2VzLnB1c2goLi4uZSkpfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtyZXR1cm4gZX1jb21wdXRlTWFzayhlLHQpe2lmKCF0aGlzLnN1cHBvcnRzTWFza2luZyl7aWYodCE9bnVsbClpZihBcnJheS5pc0FycmF5KHQpKXQuZm9yRWFjaChzPT57aWYocyE9bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKGBMYXllciAke3RoaXMubmFtZX0gZG9lcyBub3Qgc3VwcG9ydCBtYXNraW5nLCBidXQgd2FzIHBhc3NlZCBhbiBpbnB1dE1hc2suYCl9KTtlbHNlIHRocm93IG5ldyBUeXBlRXJyb3IoYExheWVyICR7dGhpcy5uYW1lfSBkb2VzIG5vdCBzdXBwb3J0IG1hc2tpbmcsIGJ1dCB3YXMgcGFzc2VkIGFuIGlucHV0TWFzay5gKTtyZXR1cm4gbnVsbH1yZXR1cm4gdH1zZXRNYXNrTWV0YWRhdGEoZSx0LHMpe2lmKCF0aGlzLnN1cHBvcnRzTWFza2luZylyZXR1cm47Y29uc3Qgcj10aGlzLmNvbXB1dGVNYXNrKGUscyksbz1mdCh0KSxpPWZ0KHIpO2lmKG8ubGVuZ3RoIT09aS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGAke3RoaXMubmFtZX0gb3V0cHV0cyAke28ubGVuZ3RofSB0ZW5zb3JzIGJ1dCAke28ubGVuZ3RofSBtYXNrcyBmb3IgdGhvc2UgdGVuc29yc2ApO2ZvcihsZXQgYT0wO2E8by5sZW5ndGg7YSsrKW9bYV0ua2VyYXNNYXNrPWlbYV19YWRkSW5ib3VuZE5vZGUoZSx0LHMscixvLGksYT1udWxsKXtjb25zdCBsPWZ0KGUpO3Q9ZnQodCkscz1mdChzKSxyPWZ0KHIpLG89QWYobyksaT1BZihpKTtjb25zdCBjPVtdLGg9W10scD1bXTtmb3IoY29uc3QgZiBvZiBsKWMucHVzaChmLnNvdXJjZUxheWVyKSxoLnB1c2goZi5ub2RlSW5kZXgpLHAucHVzaChmLnRlbnNvckluZGV4KTtuZXcgWmcoe291dGJvdW5kTGF5ZXI6dGhpcyxpbmJvdW5kTGF5ZXJzOmMsbm9kZUluZGljZXM6aCx0ZW5zb3JJbmRpY2VzOnAsaW5wdXRUZW5zb3JzOmwsb3V0cHV0VGVuc29yczp0LGlucHV0TWFza3M6cyxvdXRwdXRNYXNrczpyLGlucHV0U2hhcGVzOm8sb3V0cHV0U2hhcGVzOml9LGEpO2ZvcihsZXQgZj0wO2Y8dC5sZW5ndGg7ZisrKXRbZl0uc291cmNlTGF5ZXI9dGhpcyx0W2ZdLm5vZGVJbmRleD10aGlzLmluYm91bmROb2Rlcy5sZW5ndGgtMSx0W2ZdLnRlbnNvckluZGV4PWZ9Z2V0Q29uZmlnKCl7Y29uc3QgZT17bmFtZTp0aGlzLm5hbWUsdHJhaW5hYmxlOnRoaXMudHJhaW5hYmxlfTtyZXR1cm4gdGhpcy5iYXRjaElucHV0U2hhcGUhPW51bGwmJihlLmJhdGNoSW5wdXRTaGFwZT10aGlzLmJhdGNoSW5wdXRTaGFwZSksdGhpcy5kdHlwZSE9bnVsbCYmKGUuZHR5cGU9dGhpcy5kdHlwZSksZX1kaXNwb3NlV2VpZ2h0cygpe3JldHVybiB0aGlzLndlaWdodHMuZm9yRWFjaChlPT5lLmRpc3Bvc2UoKSksdGhpcy53ZWlnaHRzLmxlbmd0aH1hc3NlcnROb3REaXNwb3NlZCgpe2lmKHRoaXMuX3JlZkNvdW50PT09MCl0aHJvdyBuZXcgRXJyb3IoYExheWVyICcke3RoaXMubmFtZX0nIGlzIGFscmVhZHkgZGlzcG9zZWQuYCl9ZGlzcG9zZSgpe2lmKCF0aGlzLmJ1aWx0KXRocm93IG5ldyBFcnJvcihgQ2Fubm90IGRpc3Bvc2UgTGF5ZXIgJHt0aGlzLm5hbWV9IGJlY2F1c2UgaXQgaGFzIG5vdCBiZWVuIGJ1aWx0IHlldC5gKTtpZih0aGlzLl9yZWZDb3VudD09PW51bGwpdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZGlzcG9zZSBMYXllciAke3RoaXMubmFtZX0gYmVjYXVzZSBpdCBoYXMgbm90IGJlZW4gdXNlZCB5ZXQuYCk7dGhpcy5hc3NlcnROb3REaXNwb3NlZCgpO2xldCBlPTA7cmV0dXJuLS10aGlzLl9yZWZDb3VudD09PTAmJihlPXRoaXMuZGlzcG9zZVdlaWdodHMoKSkse3JlZkNvdW50QWZ0ZXJEaXNwb3NlOnRoaXMuX3JlZkNvdW50LG51bURpc3Bvc2VkVmFyaWFibGVzOmV9fX1mdW5jdGlvbiB0aihuKXtuPWZ0KG4pO2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2YgbillLnB1c2godC5zaGFwZSk7cmV0dXJuIFpuKGUpfWZ1bmN0aW9uIG5qKG4pe3JldHVybiJmbG9hdDMyIn1mdW5jdGlvbiBlVChuLGUsdCl7aWYoKGU9PW51bGx8fHQhPW51bGwmJnQ+MCkmJihlPW4uc291cmNlTGF5ZXIsdD1uLm5vZGVJbmRleCksZS5pbmJvdW5kTm9kZXMubGVuZ3RoPT09MClyZXR1cm5bbl07e2NvbnN0IHM9ZS5pbmJvdW5kTm9kZXNbdF07aWYocy5pbmJvdW5kTGF5ZXJzLmxlbmd0aD09PTApcmV0dXJuIHMuaW5wdXRUZW5zb3JzO3tjb25zdCByPVtdO2ZvcihsZXQgbz0wO288cy5pbmJvdW5kTGF5ZXJzLmxlbmd0aDtvKyspe2NvbnN0IGk9cy5pbnB1dFRlbnNvcnNbb10sYT1zLmluYm91bmRMYXllcnNbb10sbD1zLm5vZGVJbmRpY2VzW29dLGM9ZVQoaSxhLGwpO2Zvcihjb25zdCBoIG9mIGMpci5pbmRleE9mKGgpPT09LTEmJnIucHVzaChoKX1yZXR1cm4gcn19fWZ1bmN0aW9uIHNqKG4pe2xldCBlPSEwO2Zvcihjb25zdCB0IG9mIGZ0KG4pKWlmKCEodCBpbnN0YW5jZW9mIFhyKSl7ZT0hMTticmVha31yZXR1cm4gZX1mdW5jdGlvbiByaihuKXtsZXQgZT0hMDtmb3IoY29uc3QgdCBvZiBmdChuKSlpZih0IGluc3RhbmNlb2YgWHIpe2U9ITE7YnJlYWt9cmV0dXJuIGV9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgRWggZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtpZihzdXBlcih7ZHR5cGU6ZS5kdHlwZSxuYW1lOmUubmFtZSE9bnVsbD9lLm5hbWU6WWcoImlucHV0IikudG9TdHJpbmcoKX0pLGUuYmF0Y2hTaXplPT1udWxsJiYoZS5iYXRjaFNpemU9bnVsbCksZS5zcGFyc2U9PW51bGwmJihlLnNwYXJzZT0hMSksdGhpcy50cmFpbmFibGU9ITEsdGhpcy5idWlsdD0hMCx0aGlzLnNwYXJzZT1lLnNwYXJzZSxlLmlucHV0U2hhcGUhPW51bGwmJmUuYmF0Y2hJbnB1dFNoYXBlIT1udWxsKXRocm93IG5ldyBlZSgiT25seSBwcm92aWRlIHRoZSBpbnB1dFNoYXBlIE9SIGJhdGNoSW5wdXRTaGFwZSBhcmd1bWVudCB0byBpbnB1dExheWVyLCBub3QgYm90aCBhdCB0aGUgc2FtZSB0aW1lLiIpO2xldCB0PWUuYmF0Y2hJbnB1dFNoYXBlO2lmKHQ9PW51bGwpe2lmKGUuaW5wdXRTaGFwZT09bnVsbCl0aHJvdyBuZXcgZWUoIkFuIElucHV0TGF5ZXIgc2hvdWxkIGJlIHBhc3NlZCBlaXRoZXIgYSBgYmF0Y2hJbnB1dFNoYXBlYCBvciBhbiBgaW5wdXRTaGFwZWAuIik7dD1bZS5iYXRjaFNpemVdLmNvbmNhdChlLmlucHV0U2hhcGUpfWVsc2UgaWYoZS5iYXRjaFNpemUhPW51bGwpdGhyb3cgbmV3IGVlKCJDYW5ub3Qgc3BlY2lmeSBiYXRjaFNpemUgaWYgYmF0Y2hJbnB1dFNoYXBlIGlzIHNwZWNpZmllZCB3aGVuIGNyZWF0aW5nIGFuIElucHV0TGF5ZXIuIik7Y29uc3Qgcz1lLmR0eXBlfHwiZmxvYXQzMiI7dGhpcy5iYXRjaElucHV0U2hhcGU9dCx0aGlzLmR0eXBlPXMsdGhpcy5pbnB1dFNwZWM9W3tzaGFwZTp0fV07Y29uc3Qgcj1uZXcgWHIodGhpcy5kdHlwZSx0aGlzLmJhdGNoSW5wdXRTaGFwZSx0aGlzLFtdLHt9LHRoaXMubmFtZSk7ci5ub2RlSW5kZXg9MCxyLnRlbnNvckluZGV4PTAsbmV3IFpnKHtvdXRib3VuZExheWVyOnRoaXMsaW5ib3VuZExheWVyczpbXSxub2RlSW5kaWNlczpbXSx0ZW5zb3JJbmRpY2VzOltdLGlucHV0VGVuc29yczpbcl0sb3V0cHV0VGVuc29yczpbcl0saW5wdXRNYXNrczpbbnVsbF0sb3V0cHV0TWFza3M6W251bGxdLGlucHV0U2hhcGVzOlt0XSxvdXRwdXRTaGFwZXM6W3RdfSl9YXBwbHkoZSx0KXt0aHJvdyBuZXcgZWUoYENhbm5vdCBwYXNzIGFueSBpbnB1dCB0byBhbiBJbnB1dExheWVyJ3MgYXBwbHkoKSBtZXRob2QuIElucHV0TGF5ZXIgbmFtZTogJHt0aGlzLm5hbWV9YCl9ZGlzcG9zZSgpe3JldHVybntyZWZDb3VudEFmdGVyRGlzcG9zZTp0aGlzLl9yZWZDb3VudCxudW1EaXNwb3NlZFZhcmlhYmxlczowfX1nZXRDb25maWcoKXtyZXR1cm57YmF0Y2hJbnB1dFNoYXBlOnRoaXMuYmF0Y2hJbnB1dFNoYXBlLGR0eXBlOnRoaXMuZHR5cGUsc3BhcnNlOnRoaXMuc3BhcnNlLG5hbWU6dGhpcy5uYW1lfX19RWguY2xhc3NOYW1lPSJJbnB1dExheWVyIjtnZShFaCk7ZnVuY3Rpb24gb2oobil7aWYobi5iYXRjaFNoYXBlPT1udWxsJiZuLnNoYXBlPT1udWxsKXRocm93IG5ldyBFcnJvcigiUGxlYXNlIHByb3ZpZGUgdG8gSW5wdXQgZWl0aGVyIGEgYHNoYXBlYCBvciBhIGBiYXRjaFNoYXBlYCBhcmd1bWVudC4gTm90ZSB0aGF0IGBzaGFwZWAgZG9lcyBub3QgaW5jbHVkZSB0aGUgYmF0Y2ggZGltZW5zaW9uLiIpO2lmKG4uYmF0Y2hTaGFwZSE9bnVsbCYmbi5zaGFwZSE9bnVsbCl0aHJvdyBuZXcgZWUoIlBsZWFzZSBwcm92aWRlIGVpdGhlciBhIGBzaGFwZWAgb3IgYGJhdGNoU2hhcGVgIGFyZ3VtZW50IHRvIElucHV0LCBidXQgbm90IGJvdGguIik7bGV0IGU9bi5iYXRjaFNoYXBlO24uc2hhcGUhPW51bGwmJmU9PW51bGwmJihlPVtudWxsXS5jb25jYXQobi5zaGFwZSkpO2xldCB0PW4uZHR5cGU7cmV0dXJuIHQ9PW51bGwmJih0PSJmbG9hdDMyIiksbmV3IEVoKHtiYXRjaElucHV0U2hhcGU6ZSxuYW1lOm4ubmFtZSxkdHlwZTp0LHNwYXJzZTpuLnNwYXJzZX0pLmluYm91bmROb2Rlc1swXS5vdXRwdXRUZW5zb3JzWzBdfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGlqKG4sZSl7aWYobi5kdHlwZT09bnVsbHx8bi5kdHlwZT09PWUuZHR5cGUpcmV0dXJuIGU7dHJ5e3JldHVybiBOZShlLG4uZHR5cGUpfWNhdGNoe3Rocm93IG5ldyBlZShgVGhlIGR0eXBlIG9mIHRoZSBmZWVkICgke2UuZHR5cGV9KSBjYW4gbm90IGJlIGNhc3QgdG8gdGhlIGR0eXBlIG9mIHRoZSBrZXkgJyR7bi5uYW1lfScgKCR7bi5kdHlwZX0pLmApfX1jbGFzcyBKb3tjb25zdHJ1Y3RvcihlKXtpZih0aGlzLmlkMlZhbHVlPXt9LHRoaXMuaWQyTWFzaz17fSx0aGlzLm5hbWUySWQ9e30sZSBpbnN0YW5jZW9mIEpvKWZvcihjb25zdCB0IGluIGUuaWQyVmFsdWUpdGhpcy5pZDJWYWx1ZVt0XT1lLmlkMlZhbHVlW3RdLHQgaW4gZS5pZDJNYXNrJiYodGhpcy5pZDJNYXNrW3RdPWUuaWQyTWFza1t0XSk7ZWxzZXtpZihlPT1udWxsKXJldHVybjtmb3IoY29uc3QgdCBvZiBlKXRoaXMuYWRkKHQua2V5LHQudmFsdWUpfX1hZGQoZSx0LHMpe2lmKHRoaXMuaWQyVmFsdWVbZS5pZF09PW51bGwpdGhpcy5pZDJWYWx1ZVtlLmlkXT1paihlLHQpLHRoaXMubmFtZTJJZFtlLm5hbWVdPWUuaWQscyE9bnVsbCYmKHRoaXMuaWQyTWFza1tlLmlkXT1zKTtlbHNlIHRocm93IG5ldyBlZShgRHVwbGljYXRlIGtleTogbmFtZT0ke2UubmFtZX0sIGlkPSR7ZS5pZH1gKTtyZXR1cm4gdGhpc31hZGRGZWVkKGUpe3RoaXMuYWRkKGUua2V5LGUudmFsdWUpfWhhc0tleShlKXtyZXR1cm4gdGhpcy5pZDJWYWx1ZVtlLmlkXSE9bnVsbH1uYW1lcygpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLm5hbWUySWQpfWdldFZhbHVlKGUpe2lmKGUgaW5zdGFuY2VvZiBYcil7aWYodGhpcy5pZDJWYWx1ZVtlLmlkXT09bnVsbCl0aHJvdyBuZXcgZWUoYE5vbmV4aXN0ZW50IGtleTogJHtlLm5hbWV9YCk7cmV0dXJuIHRoaXMuaWQyVmFsdWVbZS5pZF19ZWxzZXtjb25zdCB0PXRoaXMubmFtZTJJZFtlXTtpZih0PT1udWxsKXRocm93IG5ldyBlZShgRmVlZCBkaWN0IGhhcyBubyBTeW1ib2xpY1RlbnNvciBuYW1lOiAke2V9YCk7cmV0dXJuIHRoaXMuaWQyVmFsdWVbdF19fWdldE1hc2soZSl7aWYoZSBpbnN0YW5jZW9mIFhyKXtpZih0aGlzLmlkMlZhbHVlW2UuaWRdPT1udWxsKXRocm93IG5ldyBlZShgTm9uZXhpc3RlbnQga2V5OiAke2UubmFtZX1gKTtyZXR1cm4gdGhpcy5pZDJNYXNrW2UuaWRdfWVsc2V7Y29uc3QgdD10aGlzLm5hbWUySWRbZV07aWYodD09bnVsbCl0aHJvdyBuZXcgZWUoYEZlZWQgZGljdCBoYXMgbm8gU3ltYm9saWNUZW5zb3IgbmFtZTogJHtlfWApO3JldHVybiB0aGlzLmlkMk1hc2tbdF19fWRpc3Bvc2VNYXNrcygpe3RoaXMuaWQyTWFzayE9bnVsbCYmWWUodGhpcy5pZDJNYXNrKX19Y29uc3QgT2Y9bmV3IFAyLEZmPW5ldyBQMjtmdW5jdGlvbiBhaihuKXtPZj8uc2V0TWF4RW50cmllcyhuKSxGZj8uc2V0TWF4RW50cmllcyhuKX1mdW5jdGlvbiBJYyhuLGUsdCxzKXtjb25zdCByPXQ9PW51bGw/ITE6dC50cmFpbmluZyxvPUFycmF5LmlzQXJyYXkobiksaT1vP246W25dLGE9aS5tYXAoeT0+eS5uYW1lKSxsPVtdLGM9ZS5uYW1lcygpO2Zvcihjb25zdCB5IG9mIGEpYy5pbmRleE9mKHkpIT09LTE/bC5wdXNoKGUuZ2V0VmFsdWUoeSkpOmwucHVzaChudWxsKTtjb25zdCBoPWEuam9pbigiLCIpKyJ8IitlLm5hbWVzKCkuc29ydCgpLmpvaW4oIiwiKTtsZXQgcD1PZi5nZXQoaCksZjtpZihwPT1udWxsKXtjb25zdCB5PWxqKGksZSk7cD15LnNvcnRlZCxmPXkucmVjaXBpZW50Q291bnRzLE9mLnB1dChoLHApLEZmLnB1dChoLGYpfWY9e30scnx8T2JqZWN0LmFzc2lnbihmLEZmLmdldChoKSk7Y29uc3QgZz1uZXcgSm8oZSk7Zm9yKGxldCB5PTA7eTxwLmxlbmd0aDsrK3kpe2NvbnN0IHc9cFt5XSxiPXcuc291cmNlTGF5ZXI7aWYoYiBpbnN0YW5jZW9mIEVoKWNvbnRpbnVlO2NvbnN0IHY9W10sUz1bXSwkPVtdO2xldCBrPSExO2Zvcihjb25zdCBGIG9mIHcuaW5wdXRzKXtjb25zdCBfPWcuZ2V0VmFsdWUoRiksRT1nLmdldE1hc2soRik7di5wdXNoKF8pLFMucHVzaChFKSxFIT1udWxsJiYoaz0hMCkscnx8KGZbRi5uYW1lXS0tLGZbRi5uYW1lXT09PTAmJiFlLmhhc0tleShGKSYmYS5pbmRleE9mKEYubmFtZSk9PT0tMSYmIV8uaXNEaXNwb3NlZCYmRi5zb3VyY2VMYXllci5zdGF0ZWZ1bCE9PSEwJiYkLnB1c2goXykpfWsmJih0PXR8fHt9LHQubWFzaz1TWzBdKTtjb25zdCBUPWZ0KGIuYXBwbHkodix0KSk7bGV0IEQ9bnVsbDtiLnN1cHBvcnRzTWFza2luZyYmKEQ9Yi5jb21wdXRlTWFzayh2LFMpKTtjb25zdCBMPWNqKHcpLHo9QXJyYXkuaXNBcnJheShMKT9MOltMXTtmb3IobGV0IEY9MDtGPHoubGVuZ3RoOysrRil7Zy5oYXNLZXkoeltGXSl8fGcuYWRkKHpbRl0sVFtGXSxBcnJheS5pc0FycmF5KEQpP0RbMF06RCk7Y29uc3QgXz1hLmluZGV4T2YoeltGXS5uYW1lKTtfIT09LTEmJihsW19dPVRbRl0pfXJ8fFllKCQpfXJldHVybiBnLmRpc3Bvc2VNYXNrcygpLG8/bDpsWzBdfWZ1bmN0aW9uIGxqKG4sZSl7QShuIT1udWxsJiZuLmxlbmd0aD4wLCgpPT4iRXhwZWN0ZWQgYXQgbGVhc3Qgb25lIGZldGNoLCBnb3Qgbm9uZSIpO2xldCB0PVtdLHM9e307aWYobi5sZW5ndGg9PT0xKXtjb25zdCByPVhrKG5bMF0sZSk7dD1yLnNvcnRlZCxzPXIucmVjaXBpZW50TWFwfWVsc2V7Y29uc3Qgcj1uZXcgU2V0O2Zvcihjb25zdCBvIG9mIG4pe2NvbnN0e3NvcnRlZDppLHJlY2lwaWVudE1hcDphfT1YayhvLGUpO2Zvcihjb25zdCBsIG9mIGkpci5oYXMobC5uYW1lKXx8KHQucHVzaChsKSxyLmFkZChsLm5hbWUpKTtmb3IoY29uc3QgbCBpbiBhKXNbbF09PW51bGwmJihzW2xdPW5ldyBTZXQpLGFbbF0uZm9yRWFjaChjPT5zW2xdLmFkZChjKSl9fXJldHVybntzb3J0ZWQ6dCxyZWNpcGllbnRDb3VudHM6dWoocyl9fWZ1bmN0aW9uIHVqKG4pe2NvbnN0IGU9e307Zm9yKGNvbnN0IHQgaW4gbillW3RdPW5bdF0uc2l6ZTtyZXR1cm4gZX1mdW5jdGlvbiBYayhuLGUpe2NvbnN0IHQ9bmV3IFNldCxzPVtdLHI9e307Zm9yKGNvbnN0IGEgb2YgZS5uYW1lcygpKXQuYWRkKGEpO2NvbnN0IG89W10saT1bXTtmb3Ioby5wdXNoKG4pO28ubGVuZ3RoPjA7KXtjb25zdCBhPW9bby5sZW5ndGgtMV07aWYodC5oYXMoYS5uYW1lKSl7by5wb3AoKTtjb250aW51ZX1jb25zdCBsPWlbaS5sZW5ndGgtMV09PT1vLmxlbmd0aC0xO2lmKGEuaW5wdXRzLmxlbmd0aD09PTB8fGwpby5wb3AoKSxzLnB1c2goYSksdC5hZGQoYS5uYW1lKSxsJiZpLnBvcCgpO2Vsc2V7aS5wdXNoKG8ubGVuZ3RoLTEpO2Zvcihjb25zdCBjIG9mIGEuaW5wdXRzKXJbYy5uYW1lXT09bnVsbCYmKHJbYy5uYW1lXT1uZXcgU2V0KSxyW2MubmFtZV0uYWRkKGEubmFtZSksIXQuaGFzKGMubmFtZSkmJm8ucHVzaChjKX19cmV0dXJue3NvcnRlZDpzLHJlY2lwaWVudE1hcDpyfX1mdW5jdGlvbiBjaihuKXtsZXQgZTtpZihuLnNvdXJjZUxheWVyLmluYm91bmROb2Rlcy5sZW5ndGg9PT0xKWU9bi5zb3VyY2VMYXllci5vdXRwdXQ7ZWxzZXtsZXQgdD1udWxsO2ZvcihsZXQgcz0wO3M8bi5zb3VyY2VMYXllci5pbmJvdW5kTm9kZXMubGVuZ3RoOysrcylmb3IoY29uc3QgciBvZiBuLnNvdXJjZUxheWVyLmluYm91bmROb2Rlc1tzXS5vdXRwdXRUZW5zb3JzKWlmKHIuaWQ9PT1uLmlkKXt0PXM7YnJlYWt9ZT1uLnNvdXJjZUxheWVyLmdldE91dHB1dEF0KHQpfXJldHVybiBlfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGRqPW9lKCk7ZGoucmVnaXN0ZXJGbGFnKCJUT1BPTE9HSUNBTF9TT1JUX0NBQ0hFX01BWF9FTlRSSUVTIiwoKT0+MTAwLGFqKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBWdyhuLGUpe3JldHVybiByZSgoKT0+cG4oUmUoWChuLG4pLGUsITApKSl9Y2xhc3MgUmggZXh0ZW5kcyAkYXtnZXRDb25maWcoKXtyZXR1cm57fX19Y2xhc3MgdFQgZXh0ZW5kcyBSaHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuZGVmYXVsdE1heFZhbHVlPTIsdGhpcy5kZWZhdWx0QXhpcz0wLHRoaXMubWF4VmFsdWU9ZS5tYXhWYWx1ZSE9bnVsbD9lLm1heFZhbHVlOnRoaXMuZGVmYXVsdE1heFZhbHVlLHRoaXMuYXhpcz1lLmF4aXMhPW51bGw/ZS5heGlzOnRoaXMuZGVmYXVsdEF4aXN9YXBwbHkoZSl7cmV0dXJuIHJlKCgpPT57Y29uc3QgdD1WdyhlLHRoaXMuYXhpcykscz1zcyh0LDAsdGhpcy5tYXhWYWx1ZSk7cmV0dXJuIFgoZSxPZShzLG1lKHRuKCksdCkpKX0pfWdldENvbmZpZygpe3JldHVybnttYXhWYWx1ZTp0aGlzLm1heFZhbHVlLGF4aXM6dGhpcy5heGlzfX19dFQuY2xhc3NOYW1lPSJNYXhOb3JtIjtnZSh0VCk7Y2xhc3MgblQgZXh0ZW5kcyBSaHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuZGVmYXVsdEF4aXM9MCx0aGlzLmF4aXM9ZS5heGlzIT1udWxsP2UuYXhpczp0aGlzLmRlZmF1bHRBeGlzfWFwcGx5KGUpe3JldHVybiByZSgoKT0+T2UoZSxtZSh0bigpLFZ3KGUsdGhpcy5heGlzKSkpKX1nZXRDb25maWcoKXtyZXR1cm57YXhpczp0aGlzLmF4aXN9fX1uVC5jbGFzc05hbWU9IlVuaXROb3JtIjtnZShuVCk7Y2xhc3Mgc1QgZXh0ZW5kcyBSaHthcHBseShlKXtyZXR1cm4gSXIoZSl9fXNULmNsYXNzTmFtZT0iTm9uTmVnIjtnZShzVCk7Y2xhc3MgclQgZXh0ZW5kcyBSaHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuZGVmYXVsdE1pblZhbHVlPTAsdGhpcy5kZWZhdWx0TWF4VmFsdWU9MSx0aGlzLmRlZmF1bHRSYXRlPTEsdGhpcy5kZWZhdWx0QXhpcz0wLHRoaXMubWluVmFsdWU9ZS5taW5WYWx1ZSE9bnVsbD9lLm1pblZhbHVlOnRoaXMuZGVmYXVsdE1pblZhbHVlLHRoaXMubWF4VmFsdWU9ZS5tYXhWYWx1ZSE9bnVsbD9lLm1heFZhbHVlOnRoaXMuZGVmYXVsdE1heFZhbHVlLHRoaXMucmF0ZT1lLnJhdGUhPW51bGw/ZS5yYXRlOnRoaXMuZGVmYXVsdFJhdGUsdGhpcy5heGlzPWUuYXhpcyE9bnVsbD9lLmF4aXM6dGhpcy5kZWZhdWx0QXhpc31hcHBseShlKXtyZXR1cm4gcmUoKCk9Pntjb25zdCB0PVZ3KGUsdGhpcy5heGlzKSxzPW1lKFgodGhpcy5yYXRlLHNzKHQsdGhpcy5taW5WYWx1ZSx0aGlzLm1heFZhbHVlKSksWCgxLXRoaXMucmF0ZSx0KSk7cmV0dXJuIFgoZSxPZShzLG1lKHRuKCksdCkpKX0pfWdldENvbmZpZygpe3JldHVybnttaW5WYWx1ZTp0aGlzLm1pblZhbHVlLG1heFZhbHVlOnRoaXMubWF4VmFsdWUscmF0ZTp0aGlzLnJhdGUsYXhpczp0aGlzLmF4aXN9fX1yVC5jbGFzc05hbWU9Ik1pbk1heE5vcm0iO2dlKHJUKTtjb25zdCBZaz17bWF4Tm9ybToiTWF4Tm9ybSIsbWluTWF4Tm9ybToiTWluTWF4Tm9ybSIsbm9uTmVnOiJOb25OZWciLHVuaXROb3JtOiJVbml0Tm9ybSJ9O2Z1bmN0aW9uIHNuKG4pe3JldHVybiBSdyhuKX1mdW5jdGlvbiBRayhuLGU9e30pe3JldHVybiBDaChuLEFzLmdldE1hcCgpLmNsYXNzTmFtZU1hcCxlLCJjb25zdHJhaW50Iil9ZnVuY3Rpb24gcm4obil7aWYobj09bnVsbClyZXR1cm4gbnVsbDtpZih0eXBlb2Ygbj09InN0cmluZyIpe2NvbnN0IHQ9e2NsYXNzTmFtZTpuIGluIFlrP1lrW25dOm4sY29uZmlnOnt9fTtyZXR1cm4gUWsodCl9ZWxzZSByZXR1cm4gbiBpbnN0YW5jZW9mIFJoP246UWsobil9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovYXN5bmMgZnVuY3Rpb24gV2kobil7aWYobj09bnVsbClyZXR1cm47Y29uc3QgZT1bXSx0PVtdLHM9W107Zm9yKGNvbnN0IHIgaW4gbil7Y29uc3Qgbz1uW3JdO2lmKHR5cGVvZiBvIT0ibnVtYmVyIil7Y29uc3QgaT1vO2UucHVzaChpLmRhdGEoKSksdC5wdXNoKHIpLHMucHVzaChpKX19aWYoZS5sZW5ndGg+MCl7Y29uc3Qgcj1hd2FpdCBQcm9taXNlLmFsbChlKTtmb3IobGV0IG89MDtvPHIubGVuZ3RoOysrbyluW3Rbb11dPXJbb11bMF07WWUocyl9fWZ1bmN0aW9uIG9UKG4pe2lmKG4hPW51bGwpZm9yKGNvbnN0IGUgaW4gbil7Y29uc3QgdD1uW2VdO3R5cGVvZiB0IT0ibnVtYmVyIiYmdC5kaXNwb3NlKCl9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL3ZhciBaazsoZnVuY3Rpb24obil7bltuLlNJTEVOVD0wXT0iU0lMRU5UIixuW24uVkVSQk9TRT0xXT0iVkVSQk9TRSJ9KShaa3x8KFprPXt9KSk7Y29uc3QgaGo9MTI1O2NsYXNzIEdje2NvbnN0cnVjdG9yKCl7dGhpcy52YWxpZGF0aW9uRGF0YT1udWxsfXNldFBhcmFtcyhlKXt0aGlzLnBhcmFtcz1lfWFzeW5jIG9uRXBvY2hCZWdpbihlLHQpe31hc3luYyBvbkVwb2NoRW5kKGUsdCl7fWFzeW5jIG9uQmF0Y2hCZWdpbihlLHQpe31hc3luYyBvbkJhdGNoRW5kKGUsdCl7fWFzeW5jIG9uVHJhaW5CZWdpbihlKXt9YXN5bmMgb25UcmFpbkVuZChlKXt9c2V0TW9kZWwoZSl7fX1jbGFzcyBwantjb25zdHJ1Y3RvcihlLHQ9MTApe2U9PW51bGwmJihlPVtdKSx0aGlzLmNhbGxiYWNrcz1lLHRoaXMucXVldWVMZW5ndGg9dH1hcHBlbmQoZSl7dGhpcy5jYWxsYmFja3MucHVzaChlKX1zZXRQYXJhbXMoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jYWxsYmFja3MpdC5zZXRQYXJhbXMoZSl9c2V0TW9kZWwoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jYWxsYmFja3MpdC5zZXRNb2RlbChlKX1hc3luYyBvbkVwb2NoQmVnaW4oZSx0KXt0PT1udWxsJiYodD17fSk7Zm9yKGNvbnN0IHMgb2YgdGhpcy5jYWxsYmFja3MpYXdhaXQgcy5vbkVwb2NoQmVnaW4oZSx0KX1hc3luYyBvbkVwb2NoRW5kKGUsdCl7dD09bnVsbCYmKHQ9e30pO2Zvcihjb25zdCBzIG9mIHRoaXMuY2FsbGJhY2tzKWF3YWl0IHMub25FcG9jaEVuZChlLHQpfWFzeW5jIG9uQmF0Y2hCZWdpbihlLHQpe3Q9PW51bGwmJih0PXt9KTtmb3IoY29uc3QgcyBvZiB0aGlzLmNhbGxiYWNrcylhd2FpdCBzLm9uQmF0Y2hCZWdpbihlLHQpfWFzeW5jIG9uQmF0Y2hFbmQoZSx0KXt0PT1udWxsJiYodD17fSk7Zm9yKGNvbnN0IHMgb2YgdGhpcy5jYWxsYmFja3MpYXdhaXQgcy5vbkJhdGNoRW5kKGUsdCl9YXN5bmMgb25UcmFpbkJlZ2luKGUpe2U9PW51bGwmJihlPXt9KTtmb3IoY29uc3QgdCBvZiB0aGlzLmNhbGxiYWNrcylhd2FpdCB0Lm9uVHJhaW5CZWdpbihlKX1hc3luYyBvblRyYWluRW5kKGUpe2U9PW51bGwmJihlPXt9KTtmb3IoY29uc3QgdCBvZiB0aGlzLmNhbGxiYWNrcylhd2FpdCB0Lm9uVHJhaW5FbmQoZSl9fWNsYXNzIGZqIGV4dGVuZHMgR2N7Y29uc3RydWN0b3IoKXtzdXBlcigpfWFzeW5jIG9uRXBvY2hCZWdpbihlKXt0aGlzLnNlZW49MCx0aGlzLnRvdGFscz17fX1hc3luYyBvbkJhdGNoRW5kKGUsdCl7dD09bnVsbCYmKHQ9e30pO2NvbnN0IHM9dC5zaXplPT1udWxsPzA6dC5zaXplO3RoaXMuc2Vlbis9cztmb3IoY29uc3QgciBpbiB0KXtjb25zdCBvPXRbcl07aWYodHlwZW9mIG89PSJudW1iZXIiKXRoaXMudG90YWxzLmhhc093blByb3BlcnR5KHIpfHwodGhpcy50b3RhbHNbcl09MCksdGhpcy50b3RhbHNbcl09dGhpcy50b3RhbHNbcl0rbypzO2Vsc2V7bGV0IGk7ciBpbiB0aGlzLnRvdGFscz9pPXRoaXMudG90YWxzW3JdOnRoaXMudG90YWxzW3JdPTA7Y29uc3QgYT1yZSgoKT0+bWUodGhpcy50b3RhbHNbcl0sWChvLHMpKSk7dGhpcy50b3RhbHNbcl09YSxpPy5kaXNwb3NlKCl9fX1hc3luYyBvbkVwb2NoRW5kKGUsdCl7aWYodCE9bnVsbClmb3IoY29uc3QgcyBvZiB0aGlzLnBhcmFtcy5tZXRyaWNzKXRoaXMudG90YWxzW3NdIT1udWxsJiYodHlwZW9mIHRoaXMudG90YWxzW3NdPT0ibnVtYmVyIj90W3NdPXRoaXMudG90YWxzW3NdL3RoaXMuc2VlbjpyZSgoKT0+e2NvbnN0IHI9WChPZSgxLHRoaXMuc2VlbiksdGhpcy50b3RhbHNbc10pO3Rbc109cix0aGlzLnRvdGFsc1tzXS5kaXNwb3NlKCksZW4odFtzXSl9KSl9fWNsYXNzIG1qIGV4dGVuZHMgR2N7YXN5bmMgb25UcmFpbkJlZ2luKGUpe3RoaXMuZXBvY2g9W10sdGhpcy5oaXN0b3J5PXt9fWFzeW5jIG9uRXBvY2hFbmQoZSx0KXt0PT1udWxsJiYodD17fSksdGhpcy5lcG9jaC5wdXNoKGUpO2Zvcihjb25zdCBzIGluIHQpdGhpcy5oaXN0b3J5W3NdPT1udWxsJiYodGhpcy5oaXN0b3J5W3NdPVtdKSx0aGlzLmhpc3Rvcnlbc10ucHVzaCh0W3NdKX1hc3luYyBzeW5jRGF0YSgpe2NvbnN0IGU9W10sdD1bXSxzPVtdO2Zvcihjb25zdCBvIGluIHRoaXMuaGlzdG9yeSl7Y29uc3QgaT10aGlzLmhpc3Rvcnlbb107Zm9yKGxldCBhPTA7YTxpLmxlbmd0aDsrK2EpaWYodHlwZW9mIGlbYV0hPSJudW1iZXIiKXtjb25zdCBsPWlbYV07ZS5wdXNoKGwuZGF0YSgpKSx0LnB1c2gobykscy5wdXNoKGEpfX1jb25zdCByPWF3YWl0IFByb21pc2UuYWxsKGUpO2ZvcihsZXQgbz0wO288ci5sZW5ndGg7KytvKXRoaXMuaGlzdG9yeVt0W29dXVtzW29dXS5kaXNwb3NlKCksdGhpcy5oaXN0b3J5W3Rbb11dW3Nbb11dPXJbb11bMF19fWNsYXNzIGdqIGV4dGVuZHMgR2N7Y29uc3RydWN0b3IoZSx0KXtpZihzdXBlcigpLHRoaXMuY3VycmVudEVwb2NoPTAsdGhpcy5ub3dGdW5jPWUubm93RnVuYyx0aGlzLm5leHRGcmFtZUZ1bmM9ZS5uZXh0RnJhbWVGdW5jfHx1dyx0aGlzLnlpZWxkRXZlcnk9dHx8ImF1dG8iLHRoaXMueWllbGRFdmVyeT09PSJhdXRvIiYmKHRoaXMueWllbGRFdmVyeT1oaiksdGhpcy55aWVsZEV2ZXJ5PT09Im5ldmVyIiYmZS5vbllpZWxkIT1udWxsKXRocm93IG5ldyBFcnJvcigieWllbGRFdmVyeSBpcyBgbmV2ZXJgIGJ1dCB5b3UgcHJvdmlkZWQgYW4gYG9uWWllbGRgIGNhbGxiYWNrLiBFaXRoZXIgY2hhbmdlIGB5aWVsZEV2ZXJ5YCBvciByZW1vdmUgdGhlIGNhbGxiYWNrIik7TmYodGhpcy55aWVsZEV2ZXJ5KSYmKHRoaXMubWF5YmVXYWl0PUVVKHRoaXMubWF5YmVXYWl0LmJpbmQodGhpcyksdGhpcy55aWVsZEV2ZXJ5LHRoaXMubm93RnVuYykpLHRoaXMudHJhaW5CZWdpbj1lLm9uVHJhaW5CZWdpbix0aGlzLnRyYWluRW5kPWUub25UcmFpbkVuZCx0aGlzLmVwb2NoQmVnaW49ZS5vbkVwb2NoQmVnaW4sdGhpcy5lcG9jaEVuZD1lLm9uRXBvY2hFbmQsdGhpcy5iYXRjaEJlZ2luPWUub25CYXRjaEJlZ2luLHRoaXMuYmF0Y2hFbmQ9ZS5vbkJhdGNoRW5kLHRoaXMueWllbGQ9ZS5vbllpZWxkfWFzeW5jIG1heWJlV2FpdChlLHQscyl7Y29uc3Qgcj1bXTt0aGlzLnlpZWxkIT1udWxsJiYoYXdhaXQgV2kocyksci5wdXNoKHRoaXMueWllbGQoZSx0LHMpKSksci5wdXNoKHRoaXMubmV4dEZyYW1lRnVuYygpKSxhd2FpdCBQcm9taXNlLmFsbChyKX1hc3luYyBvbkVwb2NoQmVnaW4oZSx0KXt0aGlzLmN1cnJlbnRFcG9jaD1lLHRoaXMuZXBvY2hCZWdpbiE9bnVsbCYmKGF3YWl0IFdpKHQpLGF3YWl0IHRoaXMuZXBvY2hCZWdpbihlLHQpKX1hc3luYyBvbkVwb2NoRW5kKGUsdCl7Y29uc3Qgcz1bXTt0aGlzLmVwb2NoRW5kIT1udWxsJiYoYXdhaXQgV2kodCkscy5wdXNoKHRoaXMuZXBvY2hFbmQoZSx0KSkpLHRoaXMueWllbGRFdmVyeT09PSJlcG9jaCImJnMucHVzaCh0aGlzLm5leHRGcmFtZUZ1bmMoKSksYXdhaXQgUHJvbWlzZS5hbGwocyl9YXN5bmMgb25CYXRjaEJlZ2luKGUsdCl7dGhpcy5iYXRjaEJlZ2luIT1udWxsJiYoYXdhaXQgV2kodCksYXdhaXQgdGhpcy5iYXRjaEJlZ2luKGUsdCkpfWFzeW5jIG9uQmF0Y2hFbmQoZSx0KXtjb25zdCBzPVtdO3RoaXMuYmF0Y2hFbmQhPW51bGwmJihhd2FpdCBXaSh0KSxzLnB1c2godGhpcy5iYXRjaEVuZChlLHQpKSksdGhpcy55aWVsZEV2ZXJ5PT09ImJhdGNoIj9zLnB1c2godGhpcy5uZXh0RnJhbWVGdW5jKCkpOk5mKHRoaXMueWllbGRFdmVyeSkmJnMucHVzaCh0aGlzLm1heWJlV2FpdCh0aGlzLmN1cnJlbnRFcG9jaCxlLHQpKSxhd2FpdCBQcm9taXNlLmFsbChzKX1hc3luYyBvblRyYWluQmVnaW4oZSl7dGhpcy50cmFpbkJlZ2luIT1udWxsJiYoYXdhaXQgV2koZSksYXdhaXQgdGhpcy50cmFpbkJlZ2luKGUpKX1hc3luYyBvblRyYWluRW5kKGUpe3RoaXMudHJhaW5FbmQhPW51bGwmJihhd2FpdCBXaShlKSxhd2FpdCB0aGlzLnRyYWluRW5kKGUpKX19ZnVuY3Rpb24gaVQobixlKXtyZXR1cm4gbj09bnVsbCYmKG49e30pLG4gaW5zdGFuY2VvZiBHYz9bbl06QXJyYXkuaXNBcnJheShuKSYmblswXWluc3RhbmNlb2YgR2M/bjpmdChuKS5tYXAocz0+bmV3IGdqKHMsZSkpfWNsYXNzIFlze2NvbnN0cnVjdG9yKCl7fXN0YXRpYyByZWdpc3RlckNhbGxiYWNrQ29uc3RydWN0b3IoZSx0KXtBKGU+PTAmJk51bWJlci5pc0ludGVnZXIoZSksKCk9PmBWZXJib3NpdHkgbGV2ZWwgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gaW50ZWdlciA+PSAwLCBidXQgZ290ICR7ZX1gKSxZcy5jaGVja0ZvckR1cGxpY2F0ZSh0KSxZcy5jb25zdHJ1Y3RvcnNbZV09PW51bGwmJihZcy5jb25zdHJ1Y3RvcnNbZV09W10pLFlzLmNvbnN0cnVjdG9yc1tlXS5wdXNoKHQpfXN0YXRpYyBjaGVja0ZvckR1cGxpY2F0ZShlKXtmb3IoY29uc3QgdCBpbiBZcy5jb25zdHJ1Y3RvcnMpWXMuY29uc3RydWN0b3JzWyt0XS5mb3JFYWNoKHI9PntpZihyPT09ZSl0aHJvdyBuZXcgZWUoIkR1cGxpY2F0ZSBjYWxsYmFjayBjb25zdHJ1Y3Rvci4iKX0pfXN0YXRpYyBjbGVhcigpe1lzLmNvbnN0cnVjdG9ycz17fX1zdGF0aWMgY3JlYXRlQ2FsbGJhY2tzKGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IHMgaW4gWXMuY29uc3RydWN0b3JzKXtjb25zdCByPStzO2U+PXImJnQucHVzaCguLi5Zcy5jb25zdHJ1Y3RvcnNbcl0pfXJldHVybiB0Lm1hcChzPT5uZXcgcyl9fVlzLmNvbnN0cnVjdG9ycz17fTtmdW5jdGlvbiBhVChuLGUsdCxzLHIsbyxpLGEsbCl7Y29uc3QgYz1uZXcgbWosaD1bbmV3IGZqLC4uLllzLmNyZWF0ZUNhbGxiYWNrcyhlKV07biE9bnVsbCYmaC5wdXNoKC4uLm4pLGgucHVzaChjKTtjb25zdCBwPW5ldyBwaihoKTtyZXR1cm4gcC5zZXRQYXJhbXMoe2Vwb2Noczp0LGluaXRpYWxFcG9jaDpzLHNhbXBsZXM6cixzdGVwczpvLGJhdGNoU2l6ZTppLHZlcmJvc2U6ZSxkb1ZhbGlkYXRpb246YSxtZXRyaWNzOmx9KSx7Y2FsbGJhY2tMaXN0OnAsaGlzdG9yeTpjfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBtbyhuLGU9e30sdD0hMSl7cmV0dXJuIENoKG4sQXMuZ2V0TWFwKCkuY2xhc3NOYW1lTWFwLGUsImxheWVyIix0KX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBMZihuLGUpe3JldHVybiByZSgoKT0+e24uZHR5cGUhPT0iZmxvYXQzMiImJihuPU5lKG4sImZsb2F0MzIiKSk7Y29uc3QgdD1SZShJaChuKSxlLCEwKSxzPU5hKHQuc2hhcGUsdG4oKSkscj1wbihRcih0LHMpKTtyZXR1cm4gT2UobixyKX0pfWZ1bmN0aW9uIEpnKG4sZSl7cmV0dXJuIHJlKCgpPT5fdChJaChJZShlLG4pKSwtMSkpfWZ1bmN0aW9uIFd3KG4sZSl7cmV0dXJuIHJlKCgpPT5fdChYdChJZShlLG4pKSwtMSkpfWZ1bmN0aW9uIFV3KG4sZSl7cmV0dXJuIHJlKCgpPT57Y29uc3QgdD1JZShuLGUpLHM9c3MoWHQobiksdG4oKSxOdW1iZXIuTUFYX1ZBTFVFKSxyPVh0KE9lKHQscykpO3JldHVybiBYKDEwMCxfdChyLC0xKSl9KX1mdW5jdGlvbiB5aihuLGUpe3JldHVybiByZSgoKT0+e2NvbnN0IHQ9c3MoZSx0bigpLE51bWJlci5NQVhfVkFMVUUpLHM9d3MobWUoMSx0KSkscj1zcyhuLHRuKCksTnVtYmVyLk1BWF9WQUxVRSksbz13cyhtZSgxLHIpKTtyZXR1cm4gX3QoSWgoSWUocyxvKSksLTEpfSl9ZnVuY3Rpb24geGoobixlKXtyZXR1cm4gcmUoKCk9Pntjb25zdCB0PVFyKDAsSWUoMSxYKG4sZSkpKTtyZXR1cm4gX3QoSWgodCksLTEpfSl9ZnVuY3Rpb24gYmoobixlKXtyZXR1cm4gcmUoKCk9Pntjb25zdCB0PVFyKDAsSWUoMSxYKG4sZSkpKTtyZXR1cm4gX3QodCwtMSl9KX1mdW5jdGlvbiB3aihuLGUpe3JldHVybiByZSgoKT0+e2NvbnN0IHQ9UmUoWChuLGUpLC0xKSxzPUxzKFgoSWUoMSxuKSxlKSwtMSk7cmV0dXJuIFFyKDAsbWUoMSxJZShzLHQpKSl9KX1mdW5jdGlvbiB2aihuLGUpe3JldHVybiByZSgoKT0+e2NvbnN0IHQ9TWF0aC5sb2coMikscz1JZShlLG4pLHI9SWUobWUocyxrYShYKC0yLHMpKSksdCk7cmV0dXJuIF90KHIsLTEpfSl9ZnVuY3Rpb24gSGMobixlLHQ9ITEpe3JldHVybiByZSgoKT0+e2lmKHQpZT1iaChlKTtlbHNle2NvbnN0IHM9UmUoZSxlLnNoYXBlLmxlbmd0aC0xLCEwKTtlPU9lKGUscyl9cmV0dXJuIGU9c3MoZSx0bigpLDEtdG4oKSksTnQoUmUoWChOZShuLCJmbG9hdDMyIiksd3MoZSkpLGUuc2hhcGUubGVuZ3RoLTEpKX0pfWZ1bmN0aW9uIFBmKG4sZSx0PSExKXtyZXR1cm4gcmUoKCk9Pntjb25zdCBzPU5lKCR1KFZVKG4pKSwiaW50MzIiKTtlPXNzKGUsdG4oKSwxLXRuKCkpO2NvbnN0IHI9ZS5zaGFwZSxvPUooeWwocyxyW3IubGVuZ3RoLTFdKSxyKTtyZXR1cm4gSGMobyxlLHQpfSl9ZnVuY3Rpb24gU2oobixlKXtpZighSmUobi5zaGFwZSxlLnNoYXBlKSl0aHJvdyBuZXcgZWUoYGxvZ2l0cyBhbmQgbGFiZWxzIG11c3QgaGF2ZSB0aGUgc2FtZSBzaGFwZSwgYnV0IGdvdCBzaGFwZXMgJHtKU09OLnN0cmluZ2lmeShuLnNoYXBlKX0gYW5kICR7SlNPTi5zdHJpbmdpZnkoZS5zaGFwZSl9YCk7cmV0dXJuIHJlKCgpPT57Y29uc3QgdD1JcihlKSxzPU50KFh0KGUpKTtyZXR1cm4gbWUoSWUodCxYKGUsbikpLGNoKHJzKHMpKSl9KX1mdW5jdGlvbiBleShuLGUpe3JldHVybiByZSgoKT0+e2xldCB0O3JldHVybiB0PXNzKGUsdG4oKSwxLXRuKCkpLHQ9d3MoT2UodCxJZSgxLHQpKSksX3QoU2oobix0KSwtMSl9KX1mdW5jdGlvbiBOaihuLGUpe3JldHVybiByZSgoKT0+e2NvbnN0IHQ9c3Mobix0bigpLDEpLHM9c3MoZSx0bigpLDEpO3JldHVybiBSZShYKG4sd3MoT2UodCxzKSkpLC0xKX0pfWZ1bmN0aW9uIGtqKG4sZSl7cmV0dXJuIHJlKCgpPT57Y29uc3QgdD13cyhtZSh0bigpLGUpKTtyZXR1cm4gX3QoSWUoZSxYKG4sdCkpLC0xKX0pfWZ1bmN0aW9uIGxUKG4sZSl7cmV0dXJuIHJlKCgpPT57Y29uc3QgdD1MZihuLC0xKSxzPUxmKGUsLTEpLHI9WCh0LHMpO3JldHVybiBOdChSZShyLC0xKSl9KX1jb25zdCB6Zj17bWVhblNxdWFyZWRFcnJvcjpKZyxtZWFuQWJzb2x1dGVFcnJvcjpXdyxtZWFuQWJzb2x1dGVQZXJjZW50YWdlRXJyb3I6VXcsbWVhblNxdWFyZWRMb2dhcml0aG1pY0Vycm9yOnlqLHNxdWFyZWRIaW5nZTp4aixoaW5nZTpiaixjYXRlZ29yaWNhbEhpbmdlOndqLGxvZ2Nvc2g6dmosY2F0ZWdvcmljYWxDcm9zc2VudHJvcHk6SGMsc3BhcnNlQ2F0ZWdvcmljYWxDcm9zc2VudHJvcHk6UGYsYmluYXJ5Q3Jvc3NlbnRyb3B5OmV5LGt1bGxiYWNrTGVpYmxlckRpdmVyZ2VuY2U6TmoscG9pc3Nvbjpraixjb3NpbmVQcm94aW1pdHk6bFR9O2Z1bmN0aW9uIHgwKG4pe2lmKHR5cGVvZiBuPT0ic3RyaW5nIil7aWYobiBpbiB6ZilyZXR1cm4gemZbbl07bGV0IGU9YFVua25vd24gbG9zcyAke259YDt0aHJvdyBuLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInNvZnRtYXhjcm9zc2VudHJvcHkiKSYmKGU9YFVua25vd24gbG9zcyAke259LiBVc2UgImNhdGVnb3JpY2FsQ3Jvc3NlbnRyb3B5IiBhcyB0aGUgc3RyaW5nIG5hbWUgZm9yIHRmLmxvc3Nlcy5zb2Z0bWF4Q3Jvc3NFbnRyb3B5YCksbmV3IGVlKGUpfWVsc2UgcmV0dXJuIG59LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdVQobixlKXtyZXR1cm4gcmUoKCk9Pntjb25zdCB0PVgoLjUsdnMoZSkpLHM9VXIoYXMoZSx0KSxuLmR0eXBlKTtyZXR1cm4gX3QodHIobixzKSwtMSl9KX1mdW5jdGlvbiBjVChuLGUpe3JldHVybiByZSgoKT0+VXIodHIobGEobiwtMSksbGEoZSwtMSkpLCJmbG9hdDMyIikpfWZ1bmN0aW9uIENqKG4sZSl7cmV0dXJuIHJlKCgpPT5OZShSZShTcih0cihuLDEpLHRyKGUsMSkpKSwiZmxvYXQzMiIpKX1mdW5jdGlvbiAkaihuLGUpe3JldHVybiByZSgoKT0+TmUoUmUoU3IodHIobiwwKSx0cihlLDEpKSksImZsb2F0MzIiKSl9ZnVuY3Rpb24gSWoobixlKXtyZXR1cm4gcmUoKCk9Pntjb25zdCB0PUNqKG4sZSkscz0kaihuLGUpLHI9bWUodCxzKTtyZXR1cm4gTmUodm4oYXMociwwKSxPZSh0LHIpLDApLCJmbG9hdDMyIil9KX1mdW5jdGlvbiBUaihuLGUpe3JldHVybiBleShuLGUpfWZ1bmN0aW9uIEVqKG4sZSl7cmV0dXJuIG4ucmFuaz09PWUucmFuayYmKG49U2kobixbbi5yYW5rLTFdKSksZT1sYShlLC0xKSxlLmR0eXBlIT09bi5kdHlwZSYmKGU9TmUoZSxuLmR0eXBlKSksTmUodHIobixlKSwiZmxvYXQzMiIpfWNvbnN0IFJqPUpnLERqPUpnLEFqPVd3LF9qPVd3LE9qPVV3LEZqPVV3LGRUPUhjLExqPWxULGhUPVBmLE1mPXtiaW5hcnlBY2N1cmFjeTp1VCxjYXRlZ29yaWNhbEFjY3VyYWN5OmNULHByZWNpc2lvbjpJaixjYXRlZ29yaWNhbENyb3NzZW50cm9weTpkVCxzcGFyc2VDYXRlZ29yaWNhbENyb3NzZW50cm9weTpoVCxtc2U6UmosTVNFOkRqLG1hZTpBaixNQUU6X2osbWFwZTpPaixNQVBFOkZqLGNvc2luZTpMan07ZnVuY3Rpb24gUGoobil7aWYodHlwZW9mIG49PSJzdHJpbmciJiZuIGluIE1mKXJldHVybiBNZltuXTtpZih0eXBlb2YgbiE9InN0cmluZyImJm4hPW51bGwpcmV0dXJuIG47dGhyb3cgbmV3IGVlKGBVbmtub3duIG1ldHJpYyAke259YCl9ZnVuY3Rpb24gSnAobil7aWYoTHIobiE9PW51bGwsYFVua25vd24gTG9zc09yTWV0cmljRm4gJHtufWApLHR5cGVvZiBuPT0ic3RyaW5nIilyZXR1cm4gbjt7bGV0IGU7Zm9yKGNvbnN0IHQgb2YgT2JqZWN0LmtleXMoemYpKWlmKHpmW3RdPT09bil7ZT10O2JyZWFrfWlmKGUhPT12b2lkIDApcmV0dXJuIGU7Zm9yKGNvbnN0IHQgb2YgT2JqZWN0LmtleXMoTWYpKWlmKE1mW3RdPT09bil7ZT10O2JyZWFrfXJldHVybiBlIT09dm9pZCAwP2U6bi5uYW1lfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB6aihuKXtjb25zdCBlPXtBZGFncmFkOigpPT5HaS5hZGFncmFkKC4wMSksQWRhZGVsdGE6KCk9PkdpLmFkYWRlbHRhKDEsLjk1LHRuKCkpLEFkYW06KCk9PkdpLmFkYW0oLjAwMSwuOSwuOTk5LHRuKCkpLEFkYW1heDooKT0+R2kuYWRhbWF4KC4wMDIsLjksLjk5OSx0bigpLDApLFJNU1Byb3A6KCk9PkdpLnJtc3Byb3AoLjAwMSwuOSwwLHRuKCkpLFNHRDooKT0+R2kuc2dkKC4wMSl9O2lmKGUuYWRhZ3JhZD1lLkFkYWdyYWQsZS5hZGFkZWx0YT1lLkFkYWRlbHRhLGUuYWRhbT1lLkFkYW0sZS5hZGFtYXg9ZS5BZGFtYXgsZS5ybXNwcm9wPWUuUk1TUHJvcCxlLnNnZD1lLlNHRCxuIGluIGUpcmV0dXJuIGVbbl0oKTt0aHJvdyBuZXcgZWUoYFVua25vd24gT3B0aW1pemVyICR7bn1gKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBKaz0xKjEwMjQqMTAyNDtmdW5jdGlvbiBlQyhuLGUsdD0hMSl7aWYobj09bnVsbHx8dHlwZW9mIG4hPSJvYmplY3QifHxPYmplY3QuZ2V0UHJvdG90eXBlT2YobikhPT1PYmplY3QucHJvdG90eXBlfHwhdDEobikpdGhyb3cgbmV3IEVycm9yKCJVc2VyLWRlZmluZWQgbWV0YWRhdGEgaXMgZXhwZWN0ZWQgdG8gYmUgYSBKU09OIG9iamVjdCwgYnV0IGlzIG5vdC4iKTtpZih0KXtjb25zdCBzPUpTT04uc3RyaW5naWZ5KG4pO3MubGVuZ3RoPkprJiZjb25zb2xlLndhcm4oYFVzZXItZGVmaW5lZCBtZXRhZGF0YSBvZiBtb2RlbCAiJHtlfSIgaXMgdG9vIGxhcmdlIGluIHNpemUgKGxlbmd0aD0ke3MubGVuZ3RofSB3aGVuIHNlcmlhbGl6ZWQpLiBJdCBpcyBub3QgcmVjb21tZW5kZWQgdG8gc3RvcmUgc3VjaCBsYXJnZSBvYmplY3RzIGluIHVzZXItZGVmaW5lZCBtZXRhZGF0YS4gUGxlYXNlIG1ha2Ugc3VyZSBpdHMgc2VyaWFsaXplZCBsZW5ndGggaXMgPD0gJHtKa30uYCl9fWZ1bmN0aW9uIHQxKG4pe2lmKG49PT1udWxsKXJldHVybiEwO2lmKHR5cGVvZiBuPT0ib2JqZWN0IilpZihPYmplY3QuZ2V0UHJvdG90eXBlT2Yobik9PT1PYmplY3QucHJvdG90eXBlKXtjb25zdCBlPU9iamVjdC5rZXlzKG4pO2Zvcihjb25zdCB0IG9mIGUpaWYodHlwZW9mIHQhPSJzdHJpbmcifHwhdDEoblt0XSkpcmV0dXJuITE7cmV0dXJuITB9ZWxzZSBpZihBcnJheS5pc0FycmF5KG4pKXtmb3IoY29uc3QgZSBvZiBuKWlmKCF0MShlKSlyZXR1cm4hMTtyZXR1cm4hMH1lbHNlIHJldHVybiExO2Vsc2V7Y29uc3QgZT10eXBlb2YgbjtyZXR1cm4gZT09PSJzdHJpbmcifHxlPT09Im51bWJlciJ8fGU9PT0iYm9vbGVhbiJ9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE1qKG4sZSx0LHM9Y29uc29sZS5sb2cpe2NvbnN0IHI9Vmoobiksbz1bIkxheWVyICh0eXBlKSIsIklucHV0IFNoYXBlIiwiT3V0cHV0IHNoYXBlIiwiUGFyYW0gIyJdO3I/KGU9ZXx8OTAsdD10fHxbLjMyLC42MSwuODksMV0pOihlPWV8fDExNSx0PXR8fFsuMjQsLjQ4LC43LC44LDFdKSx0W3QubGVuZ3RoLTFdPD0xJiYodD10Lm1hcChoPT5NYXRoLmZsb29yKGUqaCkpKTtsZXQgaTtpZighcil7by5wdXNoKCJSZWNlaXZlcyBpbnB1dHMiKSxpPVtdO2Zvcihjb25zdCBoIGluIG4ubm9kZXNCeURlcHRoKWkucHVzaCguLi5uLm5vZGVzQnlEZXB0aFtoXSl9cygiXyIucmVwZWF0KGUpKSxCZihvLHQscykscygiPSIucmVwZWF0KGUpKTtjb25zdCBhPW4ubGF5ZXJzO2ZvcihsZXQgaD0wO2g8YS5sZW5ndGg7KytoKXI/V2ooYVtoXSx0LHMpOlVqKGFbaF0sdCxpLHMpLHMoKGg9PT1hLmxlbmd0aC0xPyI9IjoiXyIpLnJlcGVhdChlKSk7bi5jaGVja1RyYWluYWJsZVdlaWdodHNDb25zaXN0ZW5jeSgpO2NvbnN0IGw9QmoobiksYz1fZihuLm5vblRyYWluYWJsZVdlaWdodHMpO3MoYFRvdGFsIHBhcmFtczogJHtsK2N9YCkscyhgVHJhaW5hYmxlIHBhcmFtczogJHtsfWApLHMoYE5vbi10cmFpbmFibGUgcGFyYW1zOiAke2N9YCkscygiXyIucmVwZWF0KGUpKX1mdW5jdGlvbiBCaihuKXtsZXQgZTtyZXR1cm4gbi5jb2xsZWN0ZWRUcmFpbmFibGVXZWlnaHRzIT1udWxsP2U9X2Yobi5jb2xsZWN0ZWRUcmFpbmFibGVXZWlnaHRzKTplPV9mKG4udHJhaW5hYmxlV2VpZ2h0cyksZX1mdW5jdGlvbiBWaihuKXtsZXQgZT0hMDtjb25zdCB0PVtdLHM9W107Zm9yKGNvbnN0IHIgaW4gbi5ub2Rlc0J5RGVwdGgpdC5wdXNoKG4ubm9kZXNCeURlcHRoW3JdKTtmb3IoY29uc3QgciBvZiB0KXtpZihyLmxlbmd0aD4xfHxyLmxlbmd0aD09PTEmJnJbMF0uaW5ib3VuZExheWVycy5sZW5ndGg+MSl7ZT0hMTticmVha31zLnB1c2goLi4ucil9aWYoZSlmb3IoY29uc3QgciBvZiBuLmxheWVycyl7bGV0IG89ITE7Zm9yKGNvbnN0IGkgb2Ygci5pbmJvdW5kTm9kZXMpaWYocy5pbmRleE9mKGkpIT09LTEpaWYobyl7ZT0hMTticmVha31lbHNlIG89ITA7aWYoIWUpYnJlYWt9cmV0dXJuIGV9ZnVuY3Rpb24gQmYobixlLHQ9Y29uc29sZS5sb2cpe2xldCBzPSIiO2ZvcihsZXQgcj0wO3I8bi5sZW5ndGg7KytyKXI+MCYmKHM9cy5zbGljZSgwLHMubGVuZ3RoLTEpKyIgIikscys9bltyXSxzPXMuc2xpY2UoMCxlW3JdKSxzKz0iICIucmVwZWF0KGVbcl0tcy5sZW5ndGgpO3Qocyl9ZnVuY3Rpb24gV2oobixlLHQpe2xldCBzLHI7dHJ5e3I9bi5pbmJvdW5kTm9kZXMubWFwKGw9PkpTT04uc3RyaW5naWZ5KGwuaW5wdXRTaGFwZXMpKS5qb2luKCIsIil9Y2F0Y2h7cj0ibXVsdGlwbGUifXRyeXtzPUpTT04uc3RyaW5naWZ5KG4ub3V0cHV0U2hhcGUpfWNhdGNoe3M9Im11bHRpcGxlIn1jb25zdCBvPW4ubmFtZSxpPW4uZ2V0Q2xhc3NOYW1lKCksYT1bYCR7b30gKCR7aX0pYCxyLHMsbi5jb3VudFBhcmFtcygpLnRvU3RyaW5nKCldO0JmKGEsZSx0KX1mdW5jdGlvbiBVaihuLGUsdCxzKXtsZXQgcixvO3RyeXtvPW4uaW5ib3VuZE5vZGVzLm1hcChwPT5KU09OLnN0cmluZ2lmeShwLmlucHV0U2hhcGVzKSkuam9pbigiLCIpfWNhdGNoe289Im11bHRpcGxlIn10cnl7cj1KU09OLnN0cmluZ2lmeShuLm91dHB1dFNoYXBlKX1jYXRjaHtyPSJtdWx0aXBsZSJ9Y29uc3QgaT1bXTtmb3IoY29uc3QgcCBvZiBuLmluYm91bmROb2RlcylpZighKHQhPW51bGwmJnQubGVuZ3RoPjAmJnQuaW5kZXhPZihwKT09PS0xKSlmb3IobGV0IGY9MDtmPHAuaW5ib3VuZExheWVycy5sZW5ndGg7KytmKXtjb25zdCBnPXAuaW5ib3VuZExheWVyc1tmXS5uYW1lLHk9cC5ub2RlSW5kaWNlc1tmXSx3PXAudGVuc29ySW5kaWNlc1tmXTtpLnB1c2goYCR7Z31bJHt5fV1bJHt3fV1gKX1jb25zdCBhPW4ubmFtZSxsPW4uZ2V0Q2xhc3NOYW1lKCksYz1pLmxlbmd0aD09PTA/IiI6aVswXSxoPVtgJHthfSAoJHtsfSlgLG8scixuLmNvdW50UGFyYW1zKCkudG9TdHJpbmcoKSxjXTtCZihoLGUscyk7Zm9yKGxldCBwPTE7cDxpLmxlbmd0aDsrK3ApQmYoWyIiLCIiLCIiLCIiLGlbcF1dLGUscyl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcFQobixlLHQpe3JldHVybihuPT09ImluYm91bmROb2RlcyJ8fG49PT0ib3V0cHV0TGF5ZXJzInx8bj09PSJpbnB1dExheWVycyIpJiZlPT09MCYmdHlwZW9mIHQ9PSJzdHJpbmcifWZ1bmN0aW9uIG4xKG4sZSl7aWYobj09PW51bGwpcmV0dXJuIG51bGw7aWYodHlwZW9mIG49PSJzdHJpbmciKXJldHVybiBLaShuKTtpZih0eXBlb2Ygbj09Im51bWJlciJ8fHR5cGVvZiBuPT0iYm9vbGVhbiIpcmV0dXJuIG47aWYobiBpbnN0YW5jZW9mIEFycmF5KXtjb25zdCB0PVtdLHM9bi5sZW5ndGg7Zm9yKGxldCByPTA7cjxzOysrcil7Y29uc3Qgbz1uW3JdO3BUKGUscixvKT90LnB1c2gobyk6dC5wdXNoKG4xKG8sZSkpfXJldHVybiB0fWVsc2V7Y29uc3QgdD17fTtmb3IoY29uc3QgcyBvZiBPYmplY3Qua2V5cyhuKSl7Y29uc3Qgcj1uW3NdO2lmKHM9PT0ibmFtZSImJnR5cGVvZiByPT0ic3RyaW5nIil0W3NdPXI7ZWxzZXtjb25zdCBvPUtpKHMpO3Rbb109bjEocixvKX19cmV0dXJuIHR9fWZ1bmN0aW9uIHMxKG4sZSl7aWYobj09bnVsbClyZXR1cm4gbnVsbDtpZih0eXBlb2Ygbj09InN0cmluZyIpcmV0dXJuIHVvKG4pO2lmKHR5cGVvZiBuPT0ibnVtYmVyInx8dHlwZW9mIG49PSJib29sZWFuIilyZXR1cm4gbjtpZihuIGluc3RhbmNlb2YgQXJyYXkpe2NvbnN0IHQ9W10scz1uLmxlbmd0aDtmb3IobGV0IHI9MDtyPHM7KytyKXtjb25zdCBvPW5bcl07cFQoZSxyLG8pP3QucHVzaChvKTp0LnB1c2goczEobyxlKSl9cmV0dXJuIHR9ZWxzZXtjb25zdCB0PXt9O2Zvcihjb25zdCBzIG9mIE9iamVjdC5rZXlzKG4pKXtjb25zdCByPW5bc10sbz11byhzKTsocz09PSJuYW1lInx8cz09PSJjbGFzc05hbWUiKSYmdHlwZW9mIHI9PSJzdHJpbmciP3Rbb109cjp0W29dPXMxKHIscyl9cmV0dXJuIHR9fS8qKiBAbGljZW5zZSBTZWUgdGhlIExJQ0VOU0UgZmlsZS4gKi9jb25zdCBmVD0iNC4yMi4wIjsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBqaj1uPT57Y29uc3QgZT1PYmplY3Qua2V5cyhuKTtpZihlLmxlbmd0aD09PTApcmV0dXJuITE7Y29uc3QgdD1lWzBdLnNwbGl0KCIvIik7cmV0dXJuIWlzTmFOKHBhcnNlSW50KHRbdC5sZW5ndGgtMV0sMTApKX07Y2xhc3MgZnIgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtpZihzdXBlcih7fSksdGhpcy5jb250YWluZXJOb2Rlcz1uZXcgU2V0LHRoaXMubmFtZT1lLm5hbWUsdGhpcy5uYW1lPT1udWxsKXtjb25zdCBTPXRoaXMuZ2V0Q2xhc3NOYW1lKCkudG9Mb3dlckNhc2UoKTt0aGlzLm5hbWU9WWcoUyl9aWYodGhpcy5zdXBwb3J0c01hc2tpbmc9ITEsdGhpcy50cmFpbmFibGVfPSEwLEFycmF5LmlzQXJyYXkoZS5pbnB1dHMpP3RoaXMuaW5wdXRzPWUuaW5wdXRzLnNsaWNlKCk6dGhpcy5pbnB1dHM9W2UuaW5wdXRzXSxBcnJheS5pc0FycmF5KGUub3V0cHV0cyk/dGhpcy5vdXRwdXRzPWUub3V0cHV0cy5zbGljZSgpOnRoaXMub3V0cHV0cz1bZS5vdXRwdXRzXSxuaSh0aGlzLmlucHV0cykubGVuZ3RoIT09dGhpcy5pbnB1dHMubGVuZ3RoKXRocm93IG5ldyBlZShgVGhlIGxpc3Qgb2YgaW5wdXRzIHBhc3NlZCB0byB0aGUgbW9kZWwgaXMgcmVkdW5kYW50LiBBbGwgaW5wdXRzIHNob3VsZCBvbmx5IGFwcGVhciBvbmNlLiBGb3VuZDogJHt0aGlzLmlucHV0cy5tYXAoUz0+Uy5uYW1lKX1gKTtuaSh0aGlzLm91dHB1dHMpLmxlbmd0aCE9PXRoaXMub3V0cHV0cy5sZW5ndGgmJmNvbnNvbGUud2FybihgVGhlIGxpc3Qgb2Ygb3V0cHV0cyBwYXNzZWQgdG8gdGhlIG1vZGVsIGlzIHJlZHVuZGFudC4gQWxsIG91dHB1dHMgc2hvdWxkIG9ubHkgYXBwZWFyIG9uY2UuIEZvdW5kOiAke3RoaXMub3V0cHV0cy5tYXAoUz0+Uy5uYW1lKX1gKSx0aGlzLmlucHV0TGF5ZXJzPVtdLHRoaXMuaW5wdXRMYXllcnNOb2RlSW5kaWNlcz1bXSx0aGlzLmlucHV0TGF5ZXJzVGVuc29ySW5kaWNlcz1bXSx0aGlzLm91dHB1dExheWVycz1bXSx0aGlzLm91dHB1dExheWVyc05vZGVJbmRpY2VzPVtdLHRoaXMub3V0cHV0TGF5ZXJzVGVuc29ySW5kaWNlcz1bXSx0aGlzLmxheWVycz1bXSx0aGlzLmludGVybmFsQ29udGFpbmVyUmVmcz1bXTtmb3IoY29uc3QgUyBvZiB0aGlzLm91dHB1dHMpe2NvbnN0ICQ9Uy5zb3VyY2VMYXllcixrPVMubm9kZUluZGV4LFQ9Uy50ZW5zb3JJbmRleDt0aGlzLm91dHB1dExheWVycy5wdXNoKCQpLHRoaXMub3V0cHV0TGF5ZXJzTm9kZUluZGljZXMucHVzaChrKSx0aGlzLm91dHB1dExheWVyc1RlbnNvckluZGljZXMucHVzaChUKX1mb3IoY29uc3QgUyBvZiB0aGlzLmlucHV0cyl7Y29uc3QgJD1TLnNvdXJjZUxheWVyLGs9Uy5ub2RlSW5kZXgsVD1TLnRlbnNvckluZGV4O0xyKGs9PT0wLCJpbnB1dCBsYXllciBoYXMgPjEgbm9kZXMiKSxMcihUPT09MCwiaW5wdXQgbGF5ZXIgaGFzID4xIHRlbnNvcnMiKSx0aGlzLmlucHV0TGF5ZXJzLnB1c2goJCksdGhpcy5pbnB1dExheWVyc05vZGVJbmRpY2VzLnB1c2goayksdGhpcy5pbnB1dExheWVyc1RlbnNvckluZGljZXMucHVzaChUKX10aGlzLmlucHV0TmFtZXM9W10sdGhpcy5vdXRwdXROYW1lcz1bXSx0aGlzLmZlZWRJbnB1dFNoYXBlcz1bXSx0aGlzLmZlZWRJbnB1dE5hbWVzPVtdLHRoaXMuZmVlZE91dHB1dE5hbWVzPVtdO2ZvcihsZXQgUz0wO1M8dGhpcy5pbnB1dExheWVycy5sZW5ndGg7UysrKXtjb25zdCAkPXRoaXMuaW5wdXRMYXllcnNbU107aWYoISgkIGluc3RhbmNlb2YgRWgpKXRocm93IG5ldyBUeXBlRXJyb3IoYElucHV0IGxheWVycyB0byBhIExheWVyc01vZGVsIG11c3QgYmUgSW5wdXRMYXllciBvYmplY3RzLiBSZWNlaXZlZCBpbnB1dHM6ICR7ZS5pbnB1dHN9LiBJbnB1dCAke1N9ICgwLWJhc2VkKSBvcmlnaW5hdGVzIGZyb20gbGF5ZXIgdHlwZSAkeyQuZ2V0Q2xhc3NOYW1lKCl9LmApO3RoaXMuaW5wdXROYW1lcy5wdXNoKCQubmFtZSksdGhpcy5mZWVkSW5wdXRTaGFwZXMucHVzaCgkLmJhdGNoSW5wdXRTaGFwZSksdGhpcy5mZWVkSW5wdXROYW1lcy5wdXNoKCQubmFtZSl9Zm9yKGNvbnN0IFMgb2YgdGhpcy5vdXRwdXRMYXllcnMpdGhpcy5vdXRwdXROYW1lcy5wdXNoKFMubmFtZSk7dGhpcy5pbnRlcm5hbElucHV0U2hhcGVzPXRoaXMuaW5wdXRzLm1hcChTPT5TLnNoYXBlKSx0aGlzLmludGVybmFsT3V0cHV0U2hhcGVzPXRoaXMub3V0cHV0cy5tYXAoUz0+Uy5zaGFwZSk7Y29uc3QgdD17fSxzPXt9LHI9e30sbz17fSxpPXt9LGE9W10sbD0oUywkLGssVCxELEwpPT57KFQ9PW51bGx8fEQ9PW51bGx8fEw9PW51bGwpJiYoVD1TLnNvdXJjZUxheWVyLEQ9Uy5ub2RlSW5kZXgsTD1TLnRlbnNvckluZGV4KTtjb25zdCB6PVQuaW5ib3VuZE5vZGVzW0RdO2lmKGsuaW5kZXhPZih6KSE9PS0xKXRocm93IG5ldyBacyhgVGhlIHRlbnNvciAke1MubmFtZX0gYXQgbGF5ZXIgIiR7VC5uYW1lfSIgaXMgcGFydCBvZiBhIGN5Y2xlLmApO2lmKCQuaW5kZXhPZih6KSE9PS0xKXJldHVybjt0aGlzLmNvbnRhaW5lck5vZGVzLmFkZChmci5ub2RlS2V5KFQsRCkpLFQuaWQgaW4gaXx8KGlbVC5pZF09T2JqZWN0LmtleXMoaSkubGVuZ3RoKSxrLmluZGV4T2Yoeik9PT0tMSYmay5wdXNoKHopO2NvbnN0IEY9ei5pbmJvdW5kTGF5ZXJzLmxlbmd0aDtmb3IobGV0IF89MDtfPEY7XysrKXtjb25zdCBFPXouaW5wdXRUZW5zb3JzW19dLE09ei5pbmJvdW5kTGF5ZXJzW19dLFU9ei5ub2RlSW5kaWNlc1tfXSxZPXoudGVuc29ySW5kaWNlc1tfXTtsKEUsJCxrLE0sVSxZKX1mb3IoJC5wdXNoKHopO2suaW5kZXhPZih6KT49MDspay5zcGxpY2Uoay5pbmRleE9mKHopLDEpO2EucHVzaCh6KX0sYz1bXSxoPVtdO2Zvcihjb25zdCBTIG9mIHRoaXMub3V0cHV0cylsKFMsYyxoKTtjb25zdCBwPWEuc2xpY2UoKS5yZXZlcnNlKCk7Zm9yKGNvbnN0IFMgb2YgcCl7c1tTLmlkXT1TLFMuaWQgaW4gdHx8KHRbUy5pZF09MCk7bGV0ICQ9dFtTLmlkXTtjb25zdCBrPXJbUy5vdXRib3VuZExheWVyLmlkXT09bnVsbD8wOnJbUy5vdXRib3VuZExheWVyLmlkXTskPU1hdGgubWF4KCQsaykscltTLm91dGJvdW5kTGF5ZXIuaWRdPSQsb1tTLm91dGJvdW5kTGF5ZXIuaWRdPVMub3V0Ym91bmRMYXllcix0W1MuaWRdPSQ7Zm9yKGxldCBUPTA7VDxTLmluYm91bmRMYXllcnMubGVuZ3RoO1QrKyl7Y29uc3QgRD1TLmluYm91bmRMYXllcnNbVF0sTD1TLm5vZGVJbmRpY2VzW1RdLHo9RC5pbmJvdW5kTm9kZXNbTF0sRj10W3ouaWRdPT1udWxsPzA6dFt6LmlkXTt0W3ouaWRdPU1hdGgubWF4KCQrMSxGKSxzW3ouaWRdPXp9fWNvbnN0IGY9e307Zm9yKGNvbnN0IFMgaW4gdCl7Y29uc3QgJD10W1NdOyQgaW4gZnx8KGZbJF09W10pLGZbJF0ucHVzaChzW1NdKX1jb25zdCBnPXt9O2Zvcihjb25zdCBTIGluIHIpe2NvbnN0ICQ9cltTXTskIGluIGd8fChnWyRdPVtdKSxnWyRdLnB1c2gob1tTXSl9bGV0IHk9T2JqZWN0LmtleXMoZykubWFwKFM9PnBhcnNlSW50KFMsMTApKS5zb3J0KFlwKTt0aGlzLmxheWVycz1bXTtmb3IoY29uc3QgUyBvZiB5KXtjb25zdCAkPWdbU107JC5zb3J0KChrLFQpPT57Y29uc3QgRD1pW2suaWRdLEw9aVtULmlkXTtyZXR1cm4gRDxMPy0xOkQ+TD8xOjB9KTtmb3IoY29uc3QgayBvZiAkKWsgaW5zdGFuY2VvZiBmciYmdGhpcy5pbnRlcm5hbENvbnRhaW5lclJlZnMucHVzaChrKSx0aGlzLmxheWVycy5wdXNoKGspfXRoaXMubGF5ZXJzQnlEZXB0aD1nLHk9T2JqZWN0LmtleXMoZikubWFwKFM9PnBhcnNlSW50KFMsMTApKS5zb3J0KFlwKTtjb25zdCB3PXRoaXMuaW5wdXRzLnNsaWNlKCksYj1bXTtmb3IoY29uc3QgUyBvZiB5KWZvcihjb25zdCAkIG9mIGZbU10pe2NvbnN0IGs9JC5vdXRib3VuZExheWVyO2lmKGshPW51bGwpe2Zvcihjb25zdCBUIG9mICQuaW5wdXRUZW5zb3JzKWlmKHcuaW5kZXhPZihUKT09PS0xKXRocm93IG5ldyBacyhgR3JhcGggZGlzY29ubmVjdGVkOiBjYW5ub3Qgb2J0YWluIHZhbHVlIGZvciB0ZW5zb3IgJHtUfSBhdCBsYXllciAiJHtrLm5hbWV9Ii4gVGhlIGZvbGxvd2luZyBwcmV2aW91cyBsYXllcnMgd2VyZSBhY2Nlc3NlZCB3aXRob3V0IGlzc3VlOiAke2J9YCk7Zm9yKGNvbnN0IFQgb2YgJC5vdXRwdXRUZW5zb3JzKXcucHVzaChUKTtiLnB1c2goay5uYW1lKX19dGhpcy5ub2Rlc0J5RGVwdGg9Zjtjb25zdCB2PXRoaXMubGF5ZXJzLm1hcChTPT5TLm5hbWUpO2Zvcihjb25zdCBTIG9mIHYpe2NvbnN0ICQ9di5maWx0ZXIoaz0+az09PVMpLmxlbmd0aDtpZigkIT09MSl0aHJvdyBuZXcgWnMoYFRoZSBuYW1lICIke1N9IiBpcyB1c2VkICR7JH0gdGltZXMgaW4gdGhlIG1vZGVsLiBBbGwgbGF5ZXIgbmFtZXMgc2hvdWxkIGJlIHVuaXF1ZS4gTGF5ZXIgbmFtZXM6IGArSlNPTi5zdHJpbmdpZnkodikpfXRoaXMub3V0Ym91bmROb2Rlcz1bXSx0aGlzLmluYm91bmROb2Rlcz1bXSxuZXcgWmcoe291dGJvdW5kTGF5ZXI6dGhpcyxpbmJvdW5kTGF5ZXJzOltdLG5vZGVJbmRpY2VzOltdLHRlbnNvckluZGljZXM6W10saW5wdXRUZW5zb3JzOnRoaXMuaW5wdXRzLG91dHB1dFRlbnNvcnM6dGhpcy5vdXRwdXRzLGlucHV0TWFza3M6dGhpcy5pbnB1dHMubWFwKFM9Pm51bGwpLG91dHB1dE1hc2tzOnRoaXMub3V0cHV0cy5tYXAoUz0+bnVsbCksaW5wdXRTaGFwZXM6dGhpcy5pbnB1dHMubWFwKFM9PlMuc2hhcGUpLG91dHB1dFNoYXBlczp0aGlzLm91dHB1dHMubWFwKFM9PlMuc2hhcGUpfSksdGhpcy5idWlsdD0hMCx0aGlzLl9yZWZDb3VudD0xfWFzc2VydE5vdERpc3Bvc2VkKCl7aWYodGhpcy5fcmVmQ291bnQ9PT0wKXRocm93IG5ldyBFcnJvcihgQ29udGFpbmVyICcke3RoaXMubmFtZX0nIGlzIGFscmVhZHkgZGlzcG9zZWQuYCl9ZGlzcG9zZSgpe3RoaXMuYXNzZXJ0Tm90RGlzcG9zZWQoKTtjb25zdCBlPXtyZWZDb3VudEFmdGVyRGlzcG9zZTpudWxsLG51bURpc3Bvc2VkVmFyaWFibGVzOjB9O2lmKC0tdGhpcy5fcmVmQ291bnQ9PT0wKXtmb3IoY29uc3QgdCBvZiB0aGlzLmxheWVycyllLm51bURpc3Bvc2VkVmFyaWFibGVzKz10LmRpc3Bvc2UoKS5udW1EaXNwb3NlZFZhcmlhYmxlcztmb3IoY29uc3QgdCBvZiB0aGlzLmludGVybmFsQ29udGFpbmVyUmVmcyllLm51bURpc3Bvc2VkVmFyaWFibGVzKz10LmRpc3Bvc2UoKS5udW1EaXNwb3NlZFZhcmlhYmxlc31yZXR1cm4gZS5yZWZDb3VudEFmdGVyRGlzcG9zZT10aGlzLl9yZWZDb3VudCxlfWdldCB0cmFpbmFibGUoKXtyZXR1cm4gdGhpcy50cmFpbmFibGVffXNldCB0cmFpbmFibGUoZSl7dGhpcy5sYXllcnMuZm9yRWFjaCh0PT57dC5fdHJhaW5hYmxlV2VpZ2h0cy5mb3JFYWNoKHM9PnMudHJhaW5hYmxlPWUpfSksdGhpcy50cmFpbmFibGVfPWV9Z2V0IHRyYWluYWJsZVdlaWdodHMoKXtpZih0aGlzLl90cmFpbmFibGVXZWlnaHRzLmxlbmd0aD4wKXRocm93IG5ldyBlZSgiQ29udGFpbmVyIGluc3RhbmNlIHVuZXhwZWN0ZWRseSBjb250YWlucyBfdHJhaW5hYmxlV2VpZ2h0cy5UaGUgdHJhaW5hYmxlIHdlaWdodHMgb2YgYSBDb250YWluZXIgYXJlIGEgdW5pb24gb2YgdGhlIHRyYWluYWJsZSB3ZWlnaHRzIG9mIGl0cyBjb25zaXR1ZW50IExheWVycy4gSXRzIG93biBfdHJhaW5hYmxlV2VpZ2h0cyBtdXN0IHJlbWFpbiBhbiBlbXB0eSBBcnJheS4iKTtpZighdGhpcy50cmFpbmFibGUpcmV0dXJuW107bGV0IGU9W107Zm9yKGNvbnN0IHQgb2YgdGhpcy5sYXllcnMpZT1lLmNvbmNhdCh0LnRyYWluYWJsZVdlaWdodHMpO3JldHVybiBlfWdldCBub25UcmFpbmFibGVXZWlnaHRzKCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBvZiB0aGlzLmxheWVycyllLnB1c2goLi4udC5ub25UcmFpbmFibGVXZWlnaHRzKTtpZighdGhpcy50cmFpbmFibGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IHMgb2YgdGhpcy5sYXllcnMpdC5wdXNoKC4uLnMudHJhaW5hYmxlV2VpZ2h0cyk7cmV0dXJuIHQuY29uY2F0KGUpfXJldHVybiBlfWdldCB3ZWlnaHRzKCl7cmV0dXJuIHRoaXMudHJhaW5hYmxlV2VpZ2h0cy5jb25jYXQodGhpcy5ub25UcmFpbmFibGVXZWlnaHRzKX1sb2FkV2VpZ2h0cyhlLHQ9ITApe2NvbnN0IHM9e307bGV0IHI9MDtjb25zdCBvPWpqKGUpO28mJnRoaXMucGFyc2VXZWlnaHRzKGUpO2Zvcihjb25zdCBhIG9mIHRoaXMubGF5ZXJzKWZvcihjb25zdFtsLGNdb2YgYS53ZWlnaHRzLmVudHJpZXMoKSl7Y29uc3QgaD1vP2Ake2MubmFtZS5zcGxpdCgiLyIpLnNsaWNlKDAsLTEpLmpvaW4oIi8iKSsiLyJ9JHtsfWA6Yy5vcmlnaW5hbE5hbWU7aWYoc1toXSE9bnVsbCl0aHJvdyBuZXcgZWUoYER1cGxpY2F0ZSB3ZWlnaHQgbmFtZTogJHtofWApO3NbaF09YyxyKyt9Y29uc3QgaT1bXTtmb3IoY29uc3QgYSBpbiBlKXtsZXQgbD1hO2lmKHNbYV09PW51bGwpe2NvbnN0IGM9YS5zcGxpdCgiLyIpO2w9Yy5zbGljZSgwLC0yKS5jb25jYXQoW2NbYy5sZW5ndGgtMV1dKS5qb2luKCIvIil9aWYoc1tsXSE9bnVsbClpLnB1c2goW3NbbF0sZVthXV0pO2Vsc2UgaWYodCl0aHJvdyBuZXcgZWUoYFByb3ZpZGVkIHdlaWdodCBkYXRhIGhhcyBubyB0YXJnZXQgdmFyaWFibGU6ICR7YX1gKTtkZWxldGUgc1tsXX1pZih0KXtjb25zdCBhPVtdO2Zvcihjb25zdCBsIGluIHMpYS5wdXNoKGwpO2lmKGEubGVuZ3RoPjApdGhyb3cgbmV3IGVlKGAke2EubGVuZ3RofSBvZiAke3J9IHdlaWdodHMgYXJlIG5vdCBzZXQ6ICR7YX1gKX1CdyhpKX1wYXJzZVdlaWdodHMoZSl7Zm9yKGNvbnN0IHQgaW4gT2JqZWN0LmtleXMoZSkpe2NvbnN0IHM9dC5zcGxpdCgiLyIpLHI9WyJ2YXJzIiwibGF5ZXJfY2hlY2twb2ludF9kZXBlbmRlbmNpZXMiXSxvPXMubWFwKGk9Pmkuc3RhcnRzV2l0aCgiXyIpP2kuc2xpY2UoMSk6aSkuZmlsdGVyKGk9PiFyLmluY2x1ZGVzKGkpKS5qb2luKCIvIik7byE9PXQmJihlW29dPWVbdF0sZGVsZXRlIGVbdF0pfX11cGRhdGVkQ29uZmlnKCl7Y29uc3QgZT10aGlzLmdldENvbmZpZygpLHQ9e307cmV0dXJuIHQuY2xhc3NOYW1lPXRoaXMuZ2V0Q2xhc3NOYW1lKCksdC5jb25maWc9ZSx0LmtlcmFzVmVyc2lvbj1gdGZqcy1sYXllcnMgJHtmVH1gLHQuYmFja2VuZD0iVGVuc29yRmxvdy5qcyIsdH10b0pTT04oZSx0PSEwKXtjb25zdCBzPXMxKHRoaXMudXBkYXRlZENvbmZpZygpKTtyZXR1cm4gdD9KU09OLnN0cmluZ2lmeShzKTpzfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9PntlPWZ0KGUpO2NvbnN0IHM9bmV3IEpvO2ZvcihsZXQgcj0wO3I8dGhpcy5pbnB1dHMubGVuZ3RoOysrcilzLmFkZCh0aGlzLmlucHV0c1tyXSxlW3JdKTtyZXR1cm4gSWModGhpcy5vdXRwdXRzLHMsdCl9KX1jb21wdXRlTWFzayhlLHQpe3JldHVybiByZSgoKT0+e2U9ZnQoZSk7bGV0IHM7cmV0dXJuIHQ9PW51bGw/cz1mYShudWxsLGUubGVuZ3RoKTpzPWZ0KHQpLHRoaXMucnVuSW50ZXJuYWxHcmFwaChlLHMpWzFdfSl9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2NvbnN0IHQ9QWYoZSk7aWYodC5sZW5ndGghPT10aGlzLmlucHV0TGF5ZXJzLmxlbmd0aCl0aHJvdyBuZXcgZWUoYEludmFsaWQgaW5wdXRTaGFwZSBhcmd1bWVudCAke2V9OiBtb2RlbCBoYXMgJHt0aGlzLmlucHV0TGF5ZXJzLmxlbmd0aH0gdGVuc29yIGlucHV0cy5gKTtjb25zdCBzPXt9O2ZvcihsZXQgYT0wO2E8dC5sZW5ndGg7YSsrKXtjb25zdCBsPXRoaXMuaW5wdXRMYXllcnNbYV0sYz10W2FdLGg9bC5uYW1lKyJfMF8wIjtzW2hdPWN9Y29uc3Qgcj1PYmplY3Qua2V5cyh0aGlzLm5vZGVzQnlEZXB0aCkubWFwKGE9PnBhcnNlSW50KGEsMTApKS5zb3J0KFlwKTtpZihyLmxlbmd0aD4xKWZvcihjb25zdCBhIG9mIHIpe2NvbnN0IGw9dGhpcy5ub2Rlc0J5RGVwdGhbYV07Zm9yKGNvbnN0IGMgb2YgbCl7Y29uc3QgaD1jLm91dGJvdW5kTGF5ZXI7aWYodGhpcy5pbnB1dExheWVycy5tYXAodz0+dy5pZCkuaW5kZXhPZihoLmlkKSE9PS0xKWNvbnRpbnVlO2NvbnN0IHA9W107Zm9yKGxldCB3PTA7dzxjLmluYm91bmRMYXllcnMubGVuZ3RoO3crKyl7Y29uc3QgYj1jLmluYm91bmRMYXllcnNbd10sdj1jLm5vZGVJbmRpY2VzW3ddLFM9Yy50ZW5zb3JJbmRpY2VzW3ddLCQ9YCR7Yi5uYW1lfV8ke3Z9XyR7U31gLGs9c1skXTtwLnB1c2goayl9Y29uc3QgZj1oLmNvbXB1dGVPdXRwdXRTaGFwZShabihwKSksZz1BZihmKSx5PWguaW5ib3VuZE5vZGVzLmluZGV4T2YoYyk7Zm9yKGxldCB3PTA7dzxnLmxlbmd0aDt3Kyspe2NvbnN0IGI9YCR7aC5uYW1lfV8ke3l9XyR7d31gO3NbYl09Z1t3XX19fWNvbnN0IG89W10saT1bXTtmb3IobGV0IGE9MDthPHRoaXMub3V0cHV0TGF5ZXJzLmxlbmd0aDthKyspe2NvbnN0IGw9dGhpcy5vdXRwdXRMYXllcnNbYV0sYz10aGlzLm91dHB1dExheWVyc05vZGVJbmRpY2VzW2FdLGg9dGhpcy5vdXRwdXRMYXllcnNUZW5zb3JJbmRpY2VzW2FdLHA9YCR7bC5uYW1lfV8ke2N9XyR7aH1gO2kucHVzaChwKX1mb3IobGV0IGE9MDthPGkubGVuZ3RoO2ErKyl7Y29uc3QgbD1pW2FdO0xyKGwgaW4gcyksby5wdXNoKHNbbF0pfXJldHVybiBabihvKX1ydW5JbnRlcm5hbEdyYXBoKGUsdCl7dD09bnVsbCYmKHQ9ZmEobnVsbCxlLmxlbmd0aCkpO2NvbnN0IHM9e307Zm9yKGxldCBsPTA7bDx0aGlzLmlucHV0cy5sZW5ndGg7KytsKXtjb25zdCBjPXRoaXMuaW5wdXRzW2xdLGg9ZVtsXSxwPXRbbF07c1tjLmlkXT1baCxwXX1jb25zdCByPU9iamVjdC5rZXlzKHRoaXMubm9kZXNCeURlcHRoKS5tYXAobD0+cGFyc2VJbnQobCwxMCkpLnNvcnQoWXApO2Zvcihjb25zdCBsIG9mIHIpe2NvbnN0IGM9dGhpcy5ub2Rlc0J5RGVwdGhbbF07Zm9yKGNvbnN0IGggb2YgYyl7Y29uc3QgcD1oLm91dGJvdW5kTGF5ZXIsZj1oLmlucHV0VGVuc29ycyxnPWgub3V0cHV0VGVuc29ycyx5PW5ldyBBcnJheTtmb3IoY29uc3QgdyBvZiBmKXcuaWQgaW4gcyYmeS5wdXNoKHNbdy5pZF0pO2lmKHkubGVuZ3RoPT09Zi5sZW5ndGgpe2xldCB3PXt9LGIsdixTLCQ7aWYoaC5jYWxsQXJncyE9bnVsbCYmKHc9aC5jYWxsQXJncykseS5sZW5ndGg9PT0xKXtjb25zdFtrLFRdPXlbMF07dy5tYXNrPT1udWxsJiYody5tYXNrPVQpLFM9ZnQocC5jYWxsKGssdykpLCQ9ZnQocC5jb21wdXRlTWFzayhrLFQpKSxiPVtrXSx2PVtUXX1lbHNlIGI9eS5tYXAoaz0+a1swXSksdj15Lm1hcChrPT5rWzFdKSx3Lm1hc2s9PW51bGwmJih3Lm1hc2s9diksUz1mdChwLmNhbGwoYix3KSksJD1mdChwLmNvbXB1dGVNYXNrKGIsdikpO2lmKHAuYWN0aXZpdHlSZWd1bGFyaXplcil0aHJvdyBuZXcgS2UoIkxheWVyc01vZGVsIGludm9jYXRpb24gd2l0aCBjb25jcmV0ZSBUZW5zb3IgdmFsdWUocykgaW4gdGhlIHByZXNlbmNlIG9mIGFjdGl2aXR5IHJlZ3VsYXJpemVyKHMpIGlzIG5vdCBzdXBwb3J0ZWQgeWV0LiIpO2ZvcihsZXQgaz0wO2s8Zy5sZW5ndGg7KytrKXtjb25zdCBUPWdba10sRD1TW2tdLEw9JFtrXTtzW1QuaWRdPVtELExdfX19fWNvbnN0IG89W10saT1bXSxhPVtdO2Zvcihjb25zdCBsIG9mIHRoaXMub3V0cHV0cyl7THIobC5pZCBpbiBzLGBDb3VsZCBub3QgY29tcHV0ZSBvdXRwdXQgJHtsLm5hbWV9IDogJHtsLmlkfWApO2NvbnN0W2MsaF09c1tsLmlkXTthLnB1c2goYy5zaGFwZSksby5wdXNoKGMpLGkucHVzaChoKX1yZXR1cm5bbyxpLGFdfWJ1aWxkTm9kZUNvbnZlcnNpb25NYXAoZSl7Y29uc3QgdD17fTtsZXQgcztmb3IoY29uc3QgciBvZiB0aGlzLmxheWVycyl7cz1yIGluc3RhbmNlb2YgZnI/MTowO2ZvcihsZXQgbz0wO288ci5pbmJvdW5kTm9kZXMubGVuZ3RoO28rKyl7Y29uc3QgaT1mci5ub2RlS2V5KHIsbyk7dGhpcy5jb250YWluZXJOb2Rlcy5oYXMoaSkmJih0W2ldPXMscys9MSl9fXJldHVybiB0fWdldExheWVyKGUsdCl7aWYodCE9bnVsbClyZXR1cm4gdGhpcy5maW5kTGF5ZXIodCk7aWYoZT09bnVsbCl0aHJvdyBuZXcgZWUoIlByb3ZpZGUgZWl0aGVyIGEgbGF5ZXIgbmFtZSBvciBsYXllciBpbmRleCIpO2lmKHR5cGVvZiBlPT0ibnVtYmVyIilyZXR1cm4gdGhpcy5maW5kTGF5ZXIoZSk7Zm9yKGNvbnN0IHMgb2YgdGhpcy5sYXllcnMpaWYocy5uYW1lPT09ZSlyZXR1cm4gczt0aHJvdyBuZXcgZWUoYE5vIHN1Y2ggbGF5ZXI6ICR7ZX1gKX1maW5kTGF5ZXIoZSl7aWYodGhpcy5sYXllcnMubGVuZ3RoPD1lKXRocm93IG5ldyBlZShgV2FzIGFza2VkIHRvIHJldHJpZXZlIGxheWVyIGF0IGluZGV4ICR7ZX0sIGJ1dCBtb2RlbCBvbmx5IGhhcyAke3RoaXMubGF5ZXJzLmxlbmd0aH0gbGF5ZXIocykuYCk7cmV0dXJuIHRoaXMubGF5ZXJzW2VdfWNhbGN1bGF0ZUxvc3Nlcygpe3JldHVybiByZSgoKT0+e2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2YgdGhpcy5sYXllcnMpZm9yKGxldCBzPTA7czx0LmluYm91bmROb2Rlcy5sZW5ndGg7KytzKXtjb25zdCByPWZyLm5vZGVLZXkodCxzKTt0aGlzLmNvbnRhaW5lck5vZGVzLmhhcyhyKSYmZS5wdXNoKC4uLnQuY2FsY3VsYXRlTG9zc2VzKCkpfXJldHVybiBlfSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17bmFtZTp0aGlzLm5hbWV9LHQ9dGhpcy5idWlsZE5vZGVDb252ZXJzaW9uTWFwKHRoaXMubGF5ZXJzKSxzPVtdO2Zvcihjb25zdCBpIG9mIHRoaXMubGF5ZXJzKXtjb25zdCBhPWkuZ2V0Q2xhc3NOYW1lKCksbD1pLmdldENvbmZpZygpLGM9W107Zm9yKGxldCBwPTA7cDxpLmluYm91bmROb2Rlcy5sZW5ndGg7cCsrKXtjb25zdCBmPWkuaW5ib3VuZE5vZGVzW3BdLGc9ZnIubm9kZUtleShpLHApO2xldCB5PXt9O2lmKHRoaXMuY29udGFpbmVyTm9kZXMuaGFzKGcpKXtpZihmLmNhbGxBcmdzKXRyeXtKU09OLnN0cmluZ2lmeShmLmNhbGxBcmdzKSx5PWYuY2FsbEFyZ3N9Y2F0Y2h7Y29uc29sZS53YXJuKGBMYXllciAke2kubmFtZX0gd2FzIHBhc3NlZCBub24tc2VyaWFsaXphYmxlIGtleXdvcmQgYXJndW1lbnRzOiAke2YuY2FsbEFyZ3N9LiBUaGV5IHdpbGwgbm90IGJlIGluY2x1ZGVkIGluIHRoZSBzZXJpYWxpemVkIG1vZGVsIChhbmQgdGh1cyB3aWxsIGJlIG1pc3NpbmcgYXQgZGVzZXJpYWxpemF0aW9uIHRpbWUpLmApLHk9e319aWYoZi5pbmJvdW5kTGF5ZXJzLmxlbmd0aD4wKXtjb25zdCB3PVtdO2ZvcihsZXQgYj0wO2I8Zi5pbmJvdW5kTGF5ZXJzLmxlbmd0aDtiKyspe2NvbnN0IHY9Zi5pbmJvdW5kTGF5ZXJzW2JdLFM9Zi5ub2RlSW5kaWNlc1tiXSwkPWYudGVuc29ySW5kaWNlc1tiXSxrPWZyLm5vZGVLZXkodixTKTtsZXQgVD10W2tdO1Q9PW51bGwmJihUPTApLHcucHVzaChbdi5uYW1lLFQsJCx5XSl9Yy5wdXNoKHcpfX19Y29uc3QgaD17fTtoLm5hbWU9aS5uYW1lLGguY2xhc3NOYW1lPWEsaC5jb25maWc9bCxoLmluYm91bmROb2Rlcz1jLHMucHVzaChoKX1lLmxheWVycz1zO2NvbnN0IHI9W107Zm9yKGxldCBpPTA7aTx0aGlzLmlucHV0TGF5ZXJzLmxlbmd0aDtpKyspe2NvbnN0IGE9dGhpcy5pbnB1dExheWVyc1tpXSxsPXRoaXMuaW5wdXRMYXllcnNOb2RlSW5kaWNlc1tpXSxjPWZyLm5vZGVLZXkoYSxsKTtpZighdGhpcy5jb250YWluZXJOb2Rlcy5oYXMoYykpY29udGludWU7bGV0IGg9dFtjXTtoPT1udWxsJiYoaD0wKTtjb25zdCBwPXRoaXMuaW5wdXRMYXllcnNUZW5zb3JJbmRpY2VzW2ldO3IucHVzaChbYS5uYW1lLGgscF0pfWUuaW5wdXRMYXllcnM9cjtjb25zdCBvPVtdO2ZvcihsZXQgaT0wO2k8dGhpcy5vdXRwdXRMYXllcnMubGVuZ3RoO2krKyl7Y29uc3QgYT10aGlzLm91dHB1dExheWVyc1tpXSxsPXRoaXMub3V0cHV0TGF5ZXJzTm9kZUluZGljZXNbaV0sYz1mci5ub2RlS2V5KGEsbCk7aWYoIXRoaXMuY29udGFpbmVyTm9kZXMuaGFzKGMpKWNvbnRpbnVlO2xldCBoPXRbY107aD09bnVsbCYmKGg9MCk7Y29uc3QgcD10aGlzLm91dHB1dExheWVyc1RlbnNvckluZGljZXNbaV07by5wdXNoKFthLm5hbWUsaCxwXSl9cmV0dXJuIGUub3V0cHV0TGF5ZXJzPW8sZX1zdGF0aWMgZnJvbUNvbmZpZyhlLHQscz17fSxyPSExKXtjb25zdCBvPXt9LGk9e307ZnVuY3Rpb24gYShiLHYpe2IubmFtZSBpbiBpP2lbYi5uYW1lXS5wdXNoKHYpOmlbYi5uYW1lXT1bdl19ZnVuY3Rpb24gbChiLHYpe2NvbnN0IFM9W107bGV0ICQ7Zm9yKGNvbnN0IGsgb2Ygdil7Y29uc3QgVD1rWzBdLEQ9a1sxXSxMPWtbMl07aWYoJD1rWzNdPT1udWxsP3t9OmtbM10sIShUIGluIG8pKXthKGIsdik7cmV0dXJufWNvbnN0IHo9b1tUXTtpZih6LmluYm91bmROb2Rlcy5sZW5ndGg8PUQpe2EoYix2KTtyZXR1cm59Y29uc3QgRj16LmluYm91bmROb2Rlc1tEXTtTLnB1c2goRi5vdXRwdXRUZW5zb3JzW0xdKX1TLmxlbmd0aD4wJiZiLmFwcGx5KFpuKFMpLCQpfWZ1bmN0aW9uIGMoYil7Y29uc3Qgdj1iLm5hbWUsUz1tbyhiLHQuY3VzdG9tT2JqZWN0cyE9bnVsbD90LmN1c3RvbU9iamVjdHM6e30pO1Muc2V0RmFzdFdlaWdodEluaXREdXJpbmdCdWlsZChyKSxvW3ZdPVMsYi5pbmJvdW5kTm9kZXMuZm9yRWFjaChrPT57aWYoIShrIGluc3RhbmNlb2YgQXJyYXkpKXRocm93IG5ldyBlZShgQ29ycnVwdGVkIGNvbmZpZ3VyYXRpb24sIGV4cGVjdGVkIGFycmF5IGZvciBub2RlRGF0YTogJHtrfWApO2EoUyxrKX0pfWNvbnN0IGg9dC5uYW1lLHA9dC5sYXllcnM7Zm9yKGNvbnN0IGIgb2YgcCljKGIpO2Zvcig7IVRVKGkpOylmb3IoY29uc3QgYiBvZiBwKXtjb25zdCB2PW9bYi5uYW1lXTtpZih2Lm5hbWUgaW4gaSl7Y29uc3QgUz1pW3YubmFtZV07ZGVsZXRlIGlbdi5uYW1lXTtmb3IoY29uc3QgJCBvZiBTKWwodiwkKX19Y29uc3QgZj1bXSxnPVtdLHk9dC5pbnB1dExheWVycztmb3IoY29uc3QgYiBvZiB5KXtjb25zdCB2PWJbMF0sUz1iWzFdLCQ9YlsyXTtMcih2IGluIG8pO2NvbnN0IFQ9b1t2XS5pbmJvdW5kTm9kZXNbU10ub3V0cHV0VGVuc29ycztmLnB1c2goVFskXSl9Y29uc3Qgdz10Lm91dHB1dExheWVycztmb3IoY29uc3QgYiBvZiB3KXtjb25zdCB2PWJbMF0sUz1iWzFdLCQ9YlsyXTtMcih2IGluIG8pO2NvbnN0IFQ9b1t2XS5pbmJvdW5kTm9kZXNbU10ub3V0cHV0VGVuc29ycztnLnB1c2goVFskXSl9cmV0dXJuIG5ldyBlKHtpbnB1dHM6ZixvdXRwdXRzOmcsbmFtZTpofSl9Z2V0IHN0YXRlZnVsKCl7aWYodGhpcy5fc3RhdGVmdWwpdGhyb3cgbmV3IGVlKCJDb250YWluZXIgaW5zdGFuY2UgdW5leHBlY3RlZGx5IGhhcyBfc3RhdGVmdWwgPSB0cnVlLiBUaGUgc3RhdGVmdWxuZXNzIG9mIGEgQ29udGFpbmVyIGlzIGRldGVybWluZWQgYnkgdGhlIExheWVycyBpdCBjb250YWlucy4gSXRzIF9zdGF0ZWZ1bCBwcm9wZXJ0eSBtdXN0IHJlbWFpbiB0aGUgZGVmYXVsdCBmYWxzZS4iKTtmb3IoY29uc3QgZSBvZiB0aGlzLmxheWVycylpZihlLnN0YXRlZnVsKXJldHVybiEwO3JldHVybiExfXJlc2V0U3RhdGVzKCl7cmUoKCk9Pnt0aGlzLmxheWVycy5mb3JFYWNoKGU9PntlLnN0YXRlZnVsJiZlLnJlc2V0U3RhdGVzKCl9KX0pfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBHaihuLGUsdCl7Y29uc3Qgcz1lLmxlbmd0aDtpZihuPT1udWxsfHxBcnJheS5pc0FycmF5KG4pJiZuLmxlbmd0aD09PTApcmV0dXJuIGUubWFwKHI9Pm51bGwpO2lmKHM9PT0xKXJldHVybiBBcnJheS5pc0FycmF5KG4pJiZuLmxlbmd0aD09PTE/bjp0eXBlb2Ygbj09Im9iamVjdCImJmVbMF1pbiBuP1tuW2VbMF1dXTpbbl07aWYoQXJyYXkuaXNBcnJheShuKSl7aWYobi5sZW5ndGghPT1zKXRocm93IG5ldyBFcnJvcihgUHJvdmlkZWQgJHt0fSBpcyBhbiBhcnJheSBvZiAke24ubGVuZ3RofSBlbGVtZW50KHMpLCBidXQgdGhlIG1vZGVsIGhhcyAke3N9IG91dHB1dHMuIE1ha2Ugc3VyZSBhIHNldCBvZiB3ZWlnaHRzIGlzIHByb3ZpZGVkIGZvciBlYWNoIG1vZGVsIG91dHB1dC5gKTtyZXR1cm4gbn1lbHNlIGlmKHR5cGVvZiBuPT0ib2JqZWN0IiYmT2JqZWN0LmtleXMobikubGVuZ3RoPjAmJnR5cGVvZiBuW09iamVjdC5rZXlzKG4pWzBdXT09Im9iamVjdCIpe2NvbnN0IHI9W107cmV0dXJuIGUuZm9yRWFjaChvPT57byBpbiBuP3IucHVzaChuW29dKTpyLnB1c2gobnVsbCl9KSxyfWVsc2UgdGhyb3cgbmV3IEVycm9yKGBUaGUgbW9kZWwgaGFzIG11bHRpcGxlICgke3N9KSBvdXRwdXRzLCBzbyAke3R9IG11c3QgYmUgZWl0aGVyIGFuIGFycmF5IHdpdGggJHtzfSBlbGVtZW50cyBvciBhbiBvYmplY3Qgd2l0aCAke2V9IGtleXMuIFByb3ZpZGVkICR7dH0gbm90IHVuZGVyc3Rvb2Q6ICR7SlNPTi5zdHJpbmdpZnkobil9YCl9ZnVuY3Rpb24gbVQobixlKXtyZXR1cm4gR2oobixlLCJjbGFzc1dlaWdodCIpfWFzeW5jIGZ1bmN0aW9uIGdUKG4sZSx0LHMpe2lmKHQhPW51bGwpe2NvbnN0IHI9cmUoKCk9PntpZihuLnNoYXBlLmxlbmd0aD09PTEpcmV0dXJuIFZyKG4pO2lmKG4uc2hhcGUubGVuZ3RoPT09Mil7aWYobi5zaGFwZVsxXT4xKXJldHVybiBsYShuLDEpO2lmKG4uc2hhcGVbMV09PT0xKXJldHVybiBKKG4sW24uc2hhcGVbMF1dKTt0aHJvdyBuZXcgRXJyb3IoYEVuY291bnRlcmVkIHVuZXhwZWN0ZWQgbGFzdC1kaW1lbnNpb24gc2l6ZSAoJHtuLnNoYXBlWzFdfSkgZHVyaW5nIGhhbmRsaW5nIG9mIGNsYXNzIHdlaWdodHMuIFRoZSBzaXplIGlzIGV4cGVjdGVkIHRvIGJlID49IDEuYCl9ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgcmFuayBvZiB0YXJnZXQgKHkpIHRlbnNvciAoJHtuLnJhbmt9KSBkdXJpbmcgaGFuZGxpbmcgb2YgY2xhc3Mgd2VpZ2h0cy4gVGhlIHJhbmsgaXMgZXhwZWN0ZWQgdG8gYmUgMSBvciAyLmApfSksbz1BcnJheS5mcm9tKGF3YWl0IHIuZGF0YSgpKTtZZShyKTtjb25zdCBpPVtdO3JldHVybiBvLmZvckVhY2goYT0+e2lmKHRbYV09PW51bGwpdGhyb3cgbmV3IEVycm9yKGBjbGFzc1dlaWdodCBtdXN0IGNvbnRhaW4gYWxsIGNsYXNzZXMgaW4gdGhlIHRyYWluaW5nIGRhdGEuIFRoZSBjbGFzcyAke2F9IGV4aXN0cyBpbiB0aGUgZGF0YSBidXQgbm90IGluIGNsYXNzV2VpZ2h0YCk7aS5wdXNoKHRbYV0pfSksX24oaSwiZmxvYXQzMiIpfWVsc2UgcmV0dXJuIG51bGx9ZnVuY3Rpb24gSGoobixlKXtyZXR1cm4gWChuLGUpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHFqPTMyO2Z1bmN0aW9uIHlUKG4sZSl7bGV0IHQscztjb25zdCByPWU7dD1yLnhzLHM9ci55cyxBKHQhPW51bGwmJnMhPW51bGwsKCk9PmBBIERhdGFzZXQgaXRlcmF0b3IgZm9yIGZpdERhdGFzZXQoKSBpcyBleHBlY3RlZCB0byBnZW5lcmF0ZSBvYmplY3RzIG9mIHRoZSBmb3JtIFxge3hzOiB4VmFsLCB5czogeVZhbH1cYCwgd2hlcmUgdGhlIHR3byB2YWx1ZXMgbWF5IGJlIFxgdGYuVGVuc29yXGAsIGFuIGFycmF5IG9mIFRlbnNvcnMsIG9yIGEgbWFwIG9mIHN0cmluZyB0byBUZW5zb3IuICBUaGUgcHJvdmlkZWQgRGF0YXNldCBpbnN0ZWFkIGdlbmVyYXRlcyAke2V9YCk7Y29uc3Qgbz10QygiaW5wdXQiLG4uaW5wdXROYW1lcyx0KSxpPXRDKCJvdXRwdXQiLG4ub3V0cHV0TmFtZXMscyksYT1vWzBdLnNoYXBlWzBdO0Eoby5sZW5ndGg9PT1uLmlucHV0cy5sZW5ndGgsKCk9PmBMYXllcnNNb2RlbCBoYXMgJHtuLmlucHV0cy5sZW5ndGh9IGlucHV0cywgYnV0IHRoZSBkYXRhc2V0IHByb3ZpZGVzICR7by5sZW5ndGh9IGlucHV0cy4gIChFeHBlY3RlZCBpbnB1dCBrZXlzOiAke0pTT04uc3RyaW5naWZ5KG4uaW5wdXROYW1lcyl9KWApLEEoaS5sZW5ndGg9PT1uLm91dHB1dHMubGVuZ3RoLCgpPT5gTGF5ZXJzTW9kZWwgaGFzICR7bi5vdXRwdXRzLmxlbmd0aH0gb3V0cHV0cywgYnV0IHRoZSBkYXRhc2V0IHByb3ZpZGVzICR7aS5sZW5ndGh9IG91dHB1dHMuICAoRXhwZWN0ZWQgb3V0cHV0IGtleXM6ICR7SlNPTi5zdHJpbmdpZnkobi5vdXRwdXROYW1lcyl9KWApO2ZvcihsZXQgbD0wO2w8by5sZW5ndGg7bCsrKUEob1tsXS5zaGFwZVswXT09PWEsKCk9PmBCYXRjaCBzaXplIG1pc21hdGNoOiBpbnB1dCAke24uaW5wdXROYW1lc1tsXX0gaGFzICR7b1tsXS5zaGFwZVswXX07IGV4cGVjdGVkICAke2F9IGJhc2VkIG9uIGlucHV0ICR7bi5pbnB1dE5hbWVzWzBdfS5gKTtmb3IobGV0IGw9MDtsPGkubGVuZ3RoO2wrKylBKGlbbF0uc2hhcGVbMF09PT1hLCgpPT5gQmF0Y2ggc2l6ZSBtaXNtYXRjaDogb3V0cHV0ICR7bi5vdXRwdXROYW1lc1tsXX0gaGFzICR7aVtsXS5zaGFwZVswXX07IGV4cGVjdGVkICAke2F9IGJhc2VkIG9uIGlucHV0ICR7bi5pbnB1dE5hbWVzWzBdfS5gKTtyZXR1cm57eHM6byx5czppfX1mdW5jdGlvbiB0QyhuLGUsdCl7aWYodCBpbnN0YW5jZW9mIGR0KXJldHVyblt0XTtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiBBKHQubGVuZ3RoPT09ZS5sZW5ndGgsKCk9PmBSZWNlaXZlZCBhbiBhcnJheSBvZiAke3QubGVuZ3RofSBUZW5zb3JzLCBidXQgZXhwZWN0ZWQgJHtlLmxlbmd0aH0gdG8gbWF0Y2ggdGhlICR7bn0ga2V5cyAke2V9LmApLHQ7e2NvbnN0IHM9W107Zm9yKGNvbnN0IHIgb2YgZSl7aWYodFtyXT09bnVsbCl0aHJvdyBuZXcgZWUoYFRoZSBmZWF0dXJlIGRhdGEgZ2VuZXJhdGVkIGJ5IHRoZSBkYXRhc2V0IGxhY2tzIHRoZSByZXF1aXJlZCAke259IGtleSAnJHtyfScuYCk7cy5wdXNoKHRbcl0pfXJldHVybiBzfX1mdW5jdGlvbiBLaihuKXtpZihuLmxlbmd0aD09PTMpdGhyb3cgbmV3IEtlKCJWYWxpZGF0aW9uIHdpdGggc2FtcGxlIHdlaWdodHMgaXMgbm90IGltcGxlbWVudGVkIHlldC4iKTtyZXR1cm57eHM6blswXSx5czpuWzFdfX1hc3luYyBmdW5jdGlvbiBYaihuLGUsdCl7Y29uc3Qgcz10LmJhdGNoZXNQZXJFcG9jaCE9bnVsbDtpZihBKG4ub3B0aW1pemVyIT1udWxsLCgpPT4iWW91IG11c3QgY29tcGlsZSBhIG1vZGVsIGJlZm9yZSB0cmFpbmluZy90ZXN0aW5nLiBVc2UgTGF5ZXJzTW9kZWwuY29tcGlsZShtb2RlbENvbXBpbGVDb25maWcpLiIpLEEodCE9bnVsbCwoKT0+IkZvciBmaXREYXRhc2V0KCksIHRoZSAybmQgYXJndW1lbnQgKGNvbmZpZykgaXMgcmVxdWlyZWQsIGJ1dCBpdCBpcyBub3QgcHJvdmlkZWQgaW4gdGhpcyBjYWxsLiIpLEEodC5lcG9jaHMhPW51bGwmJnQuZXBvY2hzPjAmJk51bWJlci5pc0ludGVnZXIodC5lcG9jaHMpLCgpPT5gRm9yIGZpdERhdGFzZXQoKSwgY29uZmlnLmVwb2NocyBpcyBleHBlY3RlZCB0byBiZSBhIHBvc2l0aXZlIGludGVnZXIsIGJ1dCBnb3QgJHt0LmVwb2Noc31gKSxBKCFzfHx0LmJhdGNoZXNQZXJFcG9jaD4wJiZOdW1iZXIuaXNJbnRlZ2VyKHQuYmF0Y2hlc1BlckVwb2NoKSwoKT0+YEZvciBmaXREYXRhc2V0KCksIGNvbmZpZy5iYXRjaGVzUGVyRXBvY2ggaXMgZXhwZWN0ZWQgdG8gYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIGlmIHNwZWNpZmllZCwgYnV0IGdvdCAke3QuYmF0Y2hlc1BlckVwb2NofWApLEEodC52YWxpZGF0aW9uU3BsaXQ9PW51bGwsKCk9PiJgdmFsaWRhdGlvblNwbGl0YCBpcyBub3Qgc3VwcG9ydGVkIGJ5IGBmaXREYXRhc2V0KClgLiBVc2UgdmFsaWRhdGlvbkRhdGEgaW5zdGVhZC4iKSxuLmlzVHJhaW5pbmcpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3Qgc3RhcnQgdHJhaW5pbmcgYmVjYXVzZSBhbm90aGVyIGZpdCgpIGNhbGwgaXMgb25nb2luZy4iKTtuLmlzVHJhaW5pbmc9ITA7dHJ5e2NvbnN0IHI9dC52YWxpZGF0aW9uRGF0YSE9bnVsbDtsZXQgbyxpO2lmKHIpaWYobkModC52YWxpZGF0aW9uRGF0YSkpQSh0LnZhbGlkYXRpb25CYXRjaGVzPT1udWxsfHx0LnZhbGlkYXRpb25CYXRjaGVzPjAmJk51bWJlci5pc0ludGVnZXIodC52YWxpZGF0aW9uQmF0Y2hlcyksKCk9PmBGb3IgZml0RGF0YXNldCgpIHdpdGggZGF0YXNldC1iYXNlZCB2YWxpZGF0aW9uLCBjb25maWcudmFsaWRhdGlvbkJhdGNoZXMgaXMgZXhwZWN0ZWQgbm90IHRvIGJlIHByb3ZpZGVkLCBvciB0byBiZSBhIHBvc2l0aXZlIGludGVnZXIsIGJ1dCBnb3QgJHt0LnZhbGlkYXRpb25CYXRjaGVzfWApO2Vsc2V7Y29uc3QgYj1Laih0LnZhbGlkYXRpb25EYXRhKTtvPWIueHMsaT1iLnlzfWNvbnN0IGE9bi5tYWtlVHJhaW5GdW5jdGlvbigpLGw9bi5nZXREZWR1cGVkTWV0cmljc05hbWVzKCk7bGV0IGM7cj9jPWwuc2xpY2UoKS5jb25jYXQobC5tYXAoYj0+InZhbF8iK2IpKTpjPWwuc2xpY2UoKTtjb25zdCBoPWlUKHQuY2FsbGJhY2tzLHQueWllbGRFdmVyeSkscD10LnZlcmJvc2U9PW51bGw/MTp0LnZlcmJvc2Use2NhbGxiYWNrTGlzdDpmLGhpc3Rvcnk6Z309YVQoaCxwLHQuZXBvY2hzLG51bGwsbnVsbCxZaihlLHQpLG51bGwscixjKTtmLnNldE1vZGVsKG4pLG4uaGlzdG9yeT1nLGF3YWl0IGYub25UcmFpbkJlZ2luKCksbi5zdG9wVHJhaW5pbmdfPSExO2xldCB5PXQuaW5pdGlhbEVwb2NoPT1udWxsPzA6dC5pbml0aWFsRXBvY2gsdz1hd2FpdCBlLml0ZXJhdG9yKCk7Zm9yKDt5PHQuZXBvY2hzOyl7Y29uc3QgYj17fTthd2FpdCBmLm9uRXBvY2hCZWdpbih5KTtsZXQgdj0wLFM9MDtmb3Ioc3x8KHc9YXdhaXQgZS5pdGVyYXRvcigpKTshc3x8djx0LmJhdGNoZXNQZXJFcG9jaDspe2NvbnN0ICQ9YXdhaXQgdy5uZXh0KCk7aWYocyYmJC5kb25lKXtjb25zb2xlLndhcm4oYFlvdSBwcm92aWRlZCBcYGJhdGNoZXNQZXJFcG9jaFxgIGFzICR7dC5iYXRjaGVzUGVyRXBvY2h9LCBidXQgeW91ciBkYXRhc2V0IGl0ZXJhdG9yIHJhbiBvdXQgb2YgZGF0YSBhZnRlciAke3Z9IGJhdGNoZXM7IGludGVycnVwdGluZyB0cmFpbmluZy4gTWFrZSBzdXJlIHRoYXQgeW91ciBkYXRhc2V0IGNhbiBnZW5lcmF0ZSBhdCBsZWFzdCBcYGJhdGNoZXNQZXJFcG9jaCAqIGVwb2Noc1xgIGJhdGNoZXMgKGluIHRoaXMgY2FzZSwgJHt0LmJhdGNoZXNQZXJFcG9jaCp0LmVwb2Noc30gYmF0Y2hlcykuIFlvdSBtYXkgbmVlZCB0byB1c2UgdGhlIHJlcGVhdCgpIGZ1bmN0aW9uIHdoZW4gYnVpbGRpbmcgeW91ciBkYXRhc2V0LmApO2JyZWFrfWlmKCQudmFsdWUhPW51bGwpe2NvbnN0e3hzOmsseXM6VH09eVQobiwkLnZhbHVlKSxEPXt9O0QuYmF0Y2g9UyxELnNpemU9a1swXS5zaGFwZVswXSxhd2FpdCBmLm9uQmF0Y2hCZWdpbihTLEQpO2NvbnN0IEw9W107aWYodC5jbGFzc1dlaWdodCE9bnVsbCl7Y29uc3QgXz1tVCh0LmNsYXNzV2VpZ2h0LG4ub3V0cHV0TmFtZXMpO2ZvcihsZXQgRT0wO0U8Xy5sZW5ndGg7KytFKUwucHVzaChhd2FpdCBnVChUW0VdLG51bGwsX1tFXSkpfWNvbnN0IHo9ay5jb25jYXQoVCkuY29uY2F0KEwpLEY9YSh6KTtZZSh6KTtmb3IobGV0IF89MDtfPGwubGVuZ3RoOysrXyl7Y29uc3QgRT1sW19dLE09RltfXTtEW0VdPU0sZW4oTSl9YXdhaXQgZi5vbkJhdGNoRW5kKFMsRCksb1QoRCksUysrLHYrK31pZihzP3Y+PXQuYmF0Y2hlc1BlckVwb2NoOiQuZG9uZSl7aWYocil7bGV0IGs7bkModC52YWxpZGF0aW9uRGF0YSk/az1mdChhd2FpdCBuLmV2YWx1YXRlRGF0YXNldCh0LnZhbGlkYXRpb25EYXRhLHtiYXRjaGVzOnQudmFsaWRhdGlvbkJhdGNoZXN9KSk6az1mdChuLmV2YWx1YXRlKG8saSx7YmF0Y2hTaXplOnQudmFsaWRhdGlvbkJhdGNoU2l6ZT09bnVsbD9xajp0LnZhbGlkYXRpb25CYXRjaFNpemUsdmVyYm9zZTowfSkpO2ZvcihsZXQgVD0wO1Q8bi5tZXRyaWNzTmFtZXMubGVuZ3RoOysrVCliW2B2YWxfJHtuLm1ldHJpY3NOYW1lc1tUXX1gXT1rW1RdfWJyZWFrfWlmKG4uc3RvcFRyYWluaW5nXylicmVha31pZihhd2FpdCBmLm9uRXBvY2hFbmQoeSxiKSx5Kyssbi5zdG9wVHJhaW5pbmdfKWJyZWFrfXJldHVybiBhd2FpdCBmLm9uVHJhaW5FbmQoKSxhd2FpdCBuLmhpc3Rvcnkuc3luY0RhdGEoKSxuLmhpc3Rvcnl9ZmluYWxseXtuLmlzVHJhaW5pbmc9ITF9fWZ1bmN0aW9uIFlqKG4sZSl7bGV0IHQ9bnVsbDtyZXR1cm4gZS5iYXRjaGVzUGVyRXBvY2ghPW51bGw/dD1lLmJhdGNoZXNQZXJFcG9jaDpOdW1iZXIuaXNGaW5pdGUobi5zaXplKSYmKHQ9bi5zaXplKSx0fWZ1bmN0aW9uIG5DKG4pe3JldHVybiB0eXBlb2Ygbi5pdGVyYXRvcj09ImZ1bmN0aW9uIn1mdW5jdGlvbiBRaihuKXtyZXR1cm4gdHlwZW9mIG4ubmV4dD09ImZ1bmN0aW9uIn1hc3luYyBmdW5jdGlvbiBaaihuLGUsdCl7dD10fHx7fTtjb25zdCBzPXQuYmF0Y2hlcyE9bnVsbCxyPW4udGVzdEZ1bmN0aW9uO2xldCBvPVtdO2lmKHQudmVyYm9zZT4wKXRocm93IG5ldyBLZSgiVmVyYm9zZSBtb2RlIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQuIik7QSghc3x8dC5iYXRjaGVzPjAmJk51bWJlci5pc0ludGVnZXIodC5iYXRjaGVzKSwoKT0+YFRlc3QgbG9vcCBleHBlY3RzIFxgYmF0Y2hlc1xgIHRvIGJlIGEgcG9zaXRpdmUgaW50ZWdlciwgYnV0IHJlY2VpdmVkICR7SlNPTi5zdHJpbmdpZnkodC5iYXRjaGVzKX1gKTtjb25zdCBpPVFqKGUpP2U6YXdhaXQgZS5pdGVyYXRvcigpO2xldCBhPTAsbD0wO2Zvcig7IXN8fGw8dC5iYXRjaGVzOyl7Y29uc3QgYz1hd2FpdCBpLm5leHQoKTtpZihvPXJlKCgpPT57aWYoYy52YWx1ZSl7Y29uc3R7eHM6aCx5czpwfT15VChuLGMudmFsdWUpLGY9aC5jb25jYXQocCksZz1yZSgoKT0+cihmKSk7aWYoWWUoZiksbD09PTApZm9yKGxldCB3PTA7dzxnLmxlbmd0aDsrK3cpby5wdXNoKE1lKDApKTtjb25zdCB5PWZbMF0uc2hhcGVbMF07Zm9yKGxldCB3PTA7dzxnLmxlbmd0aDsrK3cpe2NvbnN0IGI9Z1t3XSx2PW9bd107b1t3XT1yZSgoKT0+bWUob1t3XSxYKHksYikpKSxsPjAmJlllKHYpfVllKGcpLGErPXksKytsfXJldHVybiBvfSksYy5kb25lKXtzJiZjb25zb2xlLndhcm4oYFlvdXIgZGF0YXNldCBpdGVyYXRvciByYW4gb3V0IG9mIGRhdGEgZHVyaW5nIGV2YWx1YXRlRGF0YXNldCgpLiBJbnRlcnJ1cHRpbmcgZXZhbHV0aW9uLiBNYWtlIHN1cmUgdGhhdCB5b3VyIGRhdGFzZXQgY2FuIGdlbmVyYXRlIGF0IGxlYXN0IFxgYmF0Y2hlc1xgIGJhdGNoZXMgKGluIHRoaXMgY2FzZSwgJHt0LmJhdGNoZXN9IGJhdGNoZXMpLiBZb3UgbWF5IG5lZWQgdG8gdXNlIHRoZSByZXBlYXQoKSBmdW5jdGlvbiB3aGVuIGJ1aWxkaW5nIHlvdXIgZGF0YXNldC5gKTticmVha319Zm9yKGxldCBjPTA7YzxvLmxlbmd0aDsrK2Mpe2NvbnN0IGg9b1tjXTtvW2NdPU9lKG9bY10sYSksWWUoaCl9cmV0dXJuIFpuKG8pfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGIwKG4pe0Eobj4wJiZOdW1iZXIuaXNJbnRlZ2VyKG4pLCgpPT5gYmF0Y2hTaXplIGlzIHJlcXVpcmVkIHRvIGJlIGEgcG9zaXRpdmUgaW50ZWdlciwgYnV0IGdvdCAke259YCl9ZnVuY3Rpb24gU2MobixlLHQpe3JldHVybiBuPT1udWxsP1tudWxsXTpBcnJheS5pc0FycmF5KG4pP24ubWFwKHM9PnNhKHMsZSx0LWUpKTpzYShuLGUsdC1lKX1mdW5jdGlvbiByMShuLGUpe3JldHVybiByZSgoKT0+bj09bnVsbD9udWxsOkFycmF5LmlzQXJyYXkobik/bi5tYXAodD0+cjEodCxlKSk6RzIobixlLmR0eXBlPT09ImludDMyIj9lOk5lKGUsImludDMyIikpKX1mdW5jdGlvbiB3MChuLGUpe2NvbnN0IHQ9W107bGV0IHM9MCxyPW51bGw7Zm9yKDtzPG47KXI9cytlLHI+PW4mJihyPW4pLHQucHVzaChbcyxyXSkscz1yO3JldHVybiB0fWZ1bmN0aW9uIHhUKG4pe2NvbnN0IGU9W107biBpbnN0YW5jZW9mIGR0JiYobj1bbl0pO2ZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7Kyt0KXtjb25zdCBzPW5bdF07aWYocy5yYW5rPT09MSllLnB1c2goJGgocywxKSk7ZWxzZXtpZihzLnJhbms9PT0wKXRocm93IG5ldyBFcnJvcigiRXhwZWN0ZWQgdGVuc29yIHRvIGJlIGF0IGxlYXN0IDFELCBidXQgcmVjZWl2ZWQgYSAwRCB0ZW5zb3IgKHNjYWxhcikuIik7ZS5wdXNoKHMpfX1yZXR1cm4gZX1mdW5jdGlvbiBwcihuLGUpe2lmKG49PW51bGwpcmV0dXJuO2NvbnN0IHQ9W107aWYoZSBpbnN0YW5jZW9mIGR0KXQucHVzaChlLmlkKTtlbHNlIGlmKEFycmF5LmlzQXJyYXkoZSkpZS5mb3JFYWNoKHI9PnQucHVzaChyLmlkKSk7ZWxzZSBpZihlIT1udWxsKWZvcihjb25zdCByIGluIGUpe2NvbnN0IG89ZVtyXTt0LnB1c2goby5pZCl9Y29uc3Qgcz1bXTtpZihuIGluc3RhbmNlb2YgZHQpdC5pbmRleE9mKG4uaWQpPT09LTEmJnMucHVzaChuKTtlbHNlIGlmKEFycmF5LmlzQXJyYXkobikpbi5mb3JFYWNoKHI9Pnt0LmluZGV4T2Yoci5pZCk9PT0tMSYmcy5wdXNoKHIpfSk7ZWxzZSBpZihuIT1udWxsKWZvcihjb25zdCByIGluIG4pe2NvbnN0IG89bltyXTt0LmluZGV4T2Yoby5pZCk9PT0tMSYmcy5wdXNoKG8pfXMuZm9yRWFjaChyPT57ci5pc0Rpc3Bvc2VkfHxyLmRpc3Bvc2UoKX0pfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEpqKG4pe3JldHVybiBuIGluc3RhbmNlb2YgZHR9ZnVuY3Rpb24gbzEobil7cmV0dXJuIEFycmF5LmlzQXJyYXkobil9ZnVuY3Rpb24gc0Mobil7cmV0dXJuIUpqKG4pJiYhbzEobil9ZnVuY3Rpb24gckMobixlLHQscz0hMCxyPSIiKXtpZihlPT1udWxsfHxlLmxlbmd0aD09PTApe2lmKG4hPW51bGwpe2xldCBpPSExO2lmKG8xKG4pJiZuLmxlbmd0aD4wKWk9ITA7ZWxzZSBpZihzQyhuKSl7Zm9yKGNvbnN0IGEgaW4gbilpZihuLmhhc093blByb3BlcnR5KGEpKXtpPSEwO2JyZWFrfX1lbHNlIGk9ITA7aWYoaSl0aHJvdyBuZXcgZWUoYEVycm9yIHdoZW4gY2hlY2tpbmcgbW9kZWwgJHtyfSBleHBlY3RlZCBubyBkYXRhLCBidXQgZ290ICR7bn1gKX1yZXR1cm5bXX1pZihuPT1udWxsKXJldHVybiBlLm1hcChpPT5udWxsKTtsZXQgbztpZihzQyhuKSl7bj1uLG89W107Zm9yKGNvbnN0IGkgb2YgZSl7aWYobltpXT09bnVsbCl0aHJvdyBuZXcgZWUoYE5vIGRhdGEgcHJvdmlkZWQgZm9yICIke2l9Ii4gTmVlZCBkYXRhIGZvciBlYWNoIGtleSBpbjogJHtlfWApO28ucHVzaChuW2ldKX19ZWxzZSBpZihvMShuKSl7aWYobj1uLG4ubGVuZ3RoIT09ZS5sZW5ndGgpdGhyb3cgbmV3IGVlKGBFcnJvciB3aGVuIGNoZWNraW5nIG1vZGVsICR7cn06IHRoZSBBcnJheSBvZiBUZW5zb3JzIHRoYXQgeW91IGFyZSBwYXNzaW5nIHRvIHlvdXIgbW9kZWwgaXMgbm90IHRoZSBzaXplIHRoZSBtb2RlbCBleHBlY3RlZC4gRXhwZWN0ZWQgdG8gc2VlICR7ZS5sZW5ndGh9IFRlbnNvcihzKSwgYnV0IGluc3RlYWQgZ290IHRoZSBmb2xsb3dpbmcgbGlzdCBvZiBUZW5zb3Iocyk6ICR7bn1gKTtvPW59ZWxzZXtpZihuPW4sZS5sZW5ndGg+MSl0aHJvdyBuZXcgZWUoYFRoZSBtb2RlbCAke3J9IGV4cGVjdHMgJHtlLmxlbmd0aH0gVGVuc29yKHMpLCBidXQgb25seSByZWNlaXZlZCBvbmUgVGVuc29yLiBGb3VuZDogVGVuc29yIHdpdGggc2hhcGUgJHtuLnNoYXBlfWApO289W25dfWlmKG89eFQobyksdCE9bnVsbClmb3IobGV0IGk9MDtpPGUubGVuZ3RoOysraSl7aWYodFtpXT09bnVsbCljb250aW51ZTtjb25zdCBhPW9baV07aWYoYS5zaGFwZS5sZW5ndGghPT10W2ldLmxlbmd0aCl0aHJvdyBuZXcgZWUoYEVycm9yIHdoZW4gY2hlY2tpbmcgJHtyfTogZXhwZWN0ZWQgJHtlW2ldfSB0byBoYXZlICR7dFtpXS5sZW5ndGh9IGRpbWVuc2lvbihzKS4gYnV0IGdvdCBhcnJheSB3aXRoIHNoYXBlICR7YS5zaGFwZX1gKTtmb3IobGV0IGw9MDtsPHRbaV0ubGVuZ3RoOysrbCl7aWYobD09PTAmJiFzKWNvbnRpbnVlO2NvbnN0IGM9YS5zaGFwZVtsXSxoPXRbaV1bbF07aWYoaCE9bnVsbCYmaD49MCYmYyE9PWgpdGhyb3cgbmV3IGVlKGAke3J9IGV4cGVjdGVkIGEgYmF0Y2ggb2YgZWxlbWVudHMgd2hlcmUgZWFjaCBleGFtcGxlIGhhcyBzaGFwZSBbJHt0W2ldLnNsaWNlKDEsdFtpXS5sZW5ndGgpfV0gKGkuZS4sdGVuc29yIHNoYXBlIFsqLCR7dFtpXS5zbGljZSgxLHRbaV0ubGVuZ3RoKX1dKSBidXQgdGhlICR7cn0gcmVjZWl2ZWQgYW4gaW5wdXQgd2l0aCAke2Euc2hhcGVbMF19IGV4YW1wbGVzLCBlYWNoIHdpdGggc2hhcGUgWyR7YS5zaGFwZS5zbGljZSgxLGEuc2hhcGUubGVuZ3RoKX1dICh0ZW5zb3Igc2hhcGUgWyR7YS5zaGFwZX1dKWApfX1yZXR1cm4gb31mdW5jdGlvbiBlRyhuLGUsdCl7Y29uc3Qgcz1uaShuLm1hcChvPT5vLnNoYXBlWzBdKSk7cy5zb3J0KCk7Y29uc3Qgcj1uaShlLm1hcChvPT5vLnNoYXBlWzBdKSk7aWYoci5zb3J0KCkscy5sZW5ndGg+MSl0aHJvdyBuZXcgZWUoYEFsbCBpbnB1dCBUZW5zb3JzICh4KSBzaG91bGQgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2Ygc2FtcGxlcy4gR290IGFycmF5IHNoYXBlczogJHtKU09OLnN0cmluZ2lmeShuLm1hcChvPT5vLnNoYXBlKSl9YCk7aWYoci5sZW5ndGg+MSl0aHJvdyBuZXcgZWUoYEFsbCB0YXJnZXQgVGVuc29ycyAoeSkgc2hvdWxkIGhhdmUgdGhlIHNhbWUgbnVtYmVyIG9mIHNhbXBsZXMuIEdvdCBhcnJheSBzaGFwZXM6ICR7SlNPTi5zdHJpbmdpZnkoZS5tYXAobz0+by5zaGFwZSkpfWApO2lmKHMubGVuZ3RoPjAmJnIubGVuZ3RoPjAmJiFKZShzLHIpKXRocm93IG5ldyBlZShgSW5wdXQgVGVuc29ycyBzaG91bGQgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2Ygc2FtcGxlcyBhcyB0YXJnZXQgVGVuc29ycy4gRm91bmQgJHtzWzBdfSBpbnB1dCBzYW1wbGUocykgYW5kICR7clswXX0gdGFyZ2V0IHNhbXBsZShzKS5gKX1mdW5jdGlvbiB0RyhuLGUsdCl7Y29uc3Qgcz1bSmcsZXksSGNdO2ZvcihsZXQgcj0wO3I8bi5sZW5ndGg7KytyKXtjb25zdCBvPW5bcl0saT1lW3JdLGE9dFtyXTtpZihpIT1udWxsKXtpZihpPT09SGMmJm8uc2hhcGVbby5zaGFwZS5sZW5ndGgtMV09PT0xKXRocm93IG5ldyBlZShgWW91IGFyZSBwYXNzaW5nIGEgdGFyZ2V0IGFycmF5IG9mIHNoYXBlICR7by5zaGFwZX0gd2hpbGUgdXNpbmcgYSBsb3NzICdjYXRlZ29yaWNhbF9jcm9zc2VudHJvcHknLiAnY2F0ZWdvcmljYWxfY3Jvc3NlbnRyb3B5J2V4cGVjdHMgdGFyZ2V0cyB0byBiZSBiaW5hcnkgbWF0cmljZXMgKDFzIGFuZCAwcykgb2Ygc2hhcGUgW3NhbXBsZXMsIGNsYXNzZXNdLmApO2lmKHMuaW5kZXhPZihpKSE9PS0xKXtjb25zdCBsPW8uc2hhcGUuc2xpY2UoMSksYz1hLnNsaWNlKDEpO2ZvcihsZXQgaD0wO2g8bC5sZW5ndGg7KytoKXtjb25zdCBwPWxbaF0sZj1jW2hdO2lmKGYhPW51bGwmJnAhPT1mKXRocm93IG5ldyBlZShgQSB0YXJnZXQgVGVuc29yIHdpdGggc2hhcGUgJHtvLnNoYXBlfSB3YXMgcGFzc2VkIGZvciBhbiBvdXRwdXQgb2Ygc2hhcGUgJHthfSwgd2hpbGUgdXNpbmcgYSBsb3NzIGZ1bmN0aW9uIHRoYXQgZXhwZWN0cyB0YXJnZXRzIHRvIGhhdmUgdGhlIHNhbWUgc2hhcGUgYXMgdGhlIG91dHB1dC5gKX19fX19ZnVuY3Rpb24gb0MobixlLHQscz0hMCxyPSIiKXtsZXQgbztpZihBcnJheS5pc0FycmF5KG4pKXtpZihuLmxlbmd0aCE9PWUubGVuZ3RoKXRocm93IG5ldyBlZShgRXJyb3Igd2hlbiBjaGVja2luZyBtb2RlbCAke3J9OiB0aGUgQXJyYXkgb2YgVGVuc29ycyB0aGF0IHlvdSBhcmUgcGFzc2luZyB0byB5b3VyIG1vZGVsIGlzIG5vdCB0aGUgc2l6ZSB0aGUgdGhlIG1vZGVsIGV4cGVjdGVkLiBFeHBlY3RlZCB0byBzZWUgJHtlLmxlbmd0aH0gVGVuc29yKHMpLCBidXQgaW5zdGVhZCBnb3QgJHtuLmxlbmd0aH0gVGVuc29ycyhzKS5gKTtvPW59ZWxzZXtpZihlLmxlbmd0aD4xKXRocm93IG5ldyBlZShgVGhlIG1vZGVsIGV4cGVjdHMgJHtlLmxlbmd0aH0gJHtyfSBUZW5zb3JzLCBidXQgb25seSByZWNlaXZlZCBvbmUgVGVuc29yLiBGb3VuZDogYXJyYXkgd2l0aCBzaGFwZSAke0pTT04uc3RyaW5naWZ5KG4uc2hhcGUpfS5gKTtvPVtuXX1pZih0IT1udWxsKWZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7KytpKXtpZih0W2ldPT1udWxsKWNvbnRpbnVlO2NvbnN0IGE9b1tpXTtpZihhLnNoYXBlLmxlbmd0aCE9PXRbaV0ubGVuZ3RoKXRocm93IG5ldyBlZShgRXJyb3Igd2hlbiBjaGVja2luZyAke3J9OiBleHBlY3RlZCAke2VbaV19IHRvIGhhdmUgJHt0W2ldLmxlbmd0aH0gZGltZW5zaW9uKHMpLCBidXQgZ290IGFycmF5IHdpdGggc2hhcGUgJHtKU09OLnN0cmluZ2lmeShhLnNoYXBlKX1gKTtmb3IobGV0IGw9MDtsPHRbaV0ubGVuZ3RoOysrbCl7aWYobD09PTAmJiFzKWNvbnRpbnVlO2NvbnN0IGM9YS5zaGFwZVtsXSxoPXRbaV1bbF07aWYoaCE9bnVsbCYmaCE9PWMpdGhyb3cgbmV3IGVlKGBFcnJvciB3aGVuIGNoZWNraW5nICR7cn06IGV4cGVjdGVkICR7ZVtpXX0gdG8gaGF2ZSBzaGFwZSAke0pTT04uc3RyaW5naWZ5KHRbaV0pfSBidXQgZ290IGFycmF5IHdpdGggc2hhcGUgJHtKU09OLnN0cmluZ2lmeShhLnNoYXBlKX0uYCl9fX1mdW5jdGlvbiBuRyhuLGUpe2lmKG49PW51bGx8fEFycmF5LmlzQXJyYXkobikmJm4ubGVuZ3RoPT09MClyZXR1cm4gZS5tYXAocz0+W10pO2xldCB0O2lmKHR5cGVvZiBuPT0ic3RyaW5nInx8dHlwZW9mIG49PSJmdW5jdGlvbiIpdD1bbl07ZWxzZSBpZihBcnJheS5pc0FycmF5KG4pfHx0eXBlb2Ygbj09Im9iamVjdCIpdD1uO2Vsc2UgdGhyb3cgbmV3IFR5cGVFcnJvcihgVHlwZSBvZiBtZXRyaWNzIGFyZ3VtZW50IG5vdCB1bmRlcnN0b29kLiBFeHBlY3RlZCBhbiBzdHJpbmcsZnVuY3Rpb24sIEFycmF5LCBvciBPYmplY3QsIGZvdW5kOiAke259YCk7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gZS5tYXAocz0+dCk7e2NvbnN0IHM9W107Zm9yKGNvbnN0IHIgb2YgZSl7bGV0IG89dC5oYXNPd25Qcm9wZXJ0eShyKT90W3JdOltdO0FycmF5LmlzQXJyYXkobyl8fChvPVtvXSkscy5wdXNoKG8pfXJldHVybiBzfX1jb25zdCBzRz0ibGF5ZXJzLW1vZGVsIjtjbGFzcyBkbCBleHRlbmRzIGZye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuaXNUcmFpbmluZz0hMX1zdW1tYXJ5KGUsdCxzPWNvbnNvbGUubG9nKXtpZighdGhpcy5idWlsdCl0aHJvdyBuZXcgZWUoIlRoaXMgbW9kZWwgaGFzIG5ldmVyIGJlZW4gY2FsbGVkLCB0aHVzIGl0cyB3ZWlnaHRzIGhhdmUgbm90IGJlZW4gY3JlYXRlZCB5ZXQuIFNvIG5vIHN1bW1hcnkgY2FuIGJlIGRpc3BsYXllZC4gQnVpbGQgdGhlIG1vZGVsIGZpcnN0IChlLmcuLCBieSBjYWxsaW5nIGl0IG9uIHNvbWUgdGVzdCBkYXRhKS4iKTtNaih0aGlzLGUsdCxzKX1jb21waWxlKGUpe2lmKGUubG9zcz09bnVsbCYmKGUubG9zcz1bXSksdGhpcy5sb3NzPWUubG9zcyx0eXBlb2YgZS5vcHRpbWl6ZXI9PSJzdHJpbmciKXRoaXMub3B0aW1pemVyXz16aihlLm9wdGltaXplciksdGhpcy5pc09wdGltaXplck93bmVkPSEwO2Vsc2V7aWYoIShlLm9wdGltaXplciBpbnN0YW5jZW9mIFRvKSl0aHJvdyBuZXcgZWUoIlVzZXItZGVmaW5lZCBvcHRpbWl6ZXIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB0Zi5PcHRpbWl6ZXIuIik7dGhpcy5vcHRpbWl6ZXJfPWUub3B0aW1pemVyLHRoaXMuaXNPcHRpbWl6ZXJPd25lZD0hMX1sZXQgdD1bXTtpZighQXJyYXkuaXNBcnJheShlLmxvc3MpJiZ0eXBlb2YgZS5sb3NzIT0ic3RyaW5nIiYmdHlwZW9mIGUubG9zcyE9ImZ1bmN0aW9uIil7ZS5sb3NzPWUubG9zcztmb3IoY29uc3QgaSBpbiBlLmxvc3MpaWYodGhpcy5vdXRwdXROYW1lcy5pbmRleE9mKGkpPT09LTEpdGhyb3cgbmV3IGVlKGBVbmtub3duIGVudHJ5IGluIGxvc3MgZGljdGlvbmFyeTogIiR7aX0iLiBPbmx5IGV4cGVjdGVkIHRoZSBmb2xsb3dpbmcga2V5czogJHt0aGlzLm91dHB1dE5hbWVzfWApO2Zvcihjb25zdCBpIG9mIHRoaXMub3V0cHV0TmFtZXMpZS5sb3NzW2ldPT1udWxsJiZjb25zb2xlLndhcm4oYE91dHB1dCAiJHtpfSIgaXMgbWlzc2luZyBmcm9tIGxvc3MgZGljdGlvbmFyeS4gV2UgYXNzdW1lIHRoaXMgd2FzIGRvbmUgb24gcHVycG9zZSwgYW5kIHdlIHdpbGwgbm90IGJlIGV4cGVjdGluZyBkYXRhIHRvIGJlIHBhc3NlZCB0byAke2l9IGR1cmluZyB0cmFpbmluZ2ApLHQucHVzaCh4MChlLmxvc3NbaV0pKX1lbHNlIGlmKEFycmF5LmlzQXJyYXkoZS5sb3NzKSl7aWYoZS5sb3NzLmxlbmd0aCE9PXRoaXMub3V0cHV0cy5sZW5ndGgpdGhyb3cgbmV3IGVlKGBXaGVuIHBhc3NpbmcgYW4gQXJyYXkgYXMgbG9zcywgaXQgc2hvdWxkIGhhdmUgb25lIGVudHJ5IHBlciBtb2RlbCBvdXRwdXQuIFRoZSBtb2RlbCBoYXMgJHt0aGlzLm91dHB1dHMubGVuZ3RofSBvdXRwdXQocyksIGJ1dCB5b3UgcGFzc2VkIGxvc3M9JHtlLmxvc3N9LmApO3Q9ZS5sb3NzLm1hcChhPT54MChhKSl9ZWxzZXtjb25zdCBpPXgwKGUubG9zcyk7dGhpcy5vdXRwdXRzLmZvckVhY2goYT0+e3QucHVzaChpKX0pfXRoaXMubG9zc0Z1bmN0aW9ucz10LHRoaXMuZmVlZE91dHB1dE5hbWVzPVtdLHRoaXMuZmVlZE91dHB1dFNoYXBlcz1bXSx0aGlzLmZlZWRMb3NzRm5zPVtdO2ZvcihsZXQgaT0wO2k8dGhpcy5vdXRwdXRzLmxlbmd0aDsrK2kpe2NvbnN0IGE9dGhpcy5pbnRlcm5hbE91dHB1dFNoYXBlc1tpXSxsPXRoaXMub3V0cHV0TmFtZXNbaV07dGhpcy5mZWVkT3V0cHV0TmFtZXMucHVzaChsKSx0aGlzLmZlZWRPdXRwdXRTaGFwZXMucHVzaChhKSx0aGlzLmZlZWRMb3NzRm5zLnB1c2godGhpcy5sb3NzRnVuY3Rpb25zW2ldKX1jb25zdCBzPVtdO3RoaXMubWV0cmljcz1lLm1ldHJpY3MsdGhpcy5tZXRyaWNzTmFtZXM9WyJsb3NzIl0sdGhpcy5tZXRyaWNzVGVuc29ycz1bXSxuYSgibG9zcyIsKCk9Pntmb3IobGV0IGk9MDtpPHRoaXMub3V0cHV0cy5sZW5ndGg7KytpKXtpZihzLmluZGV4T2YoaSkhPT0tMSljb250aW51ZTtjb25zdCBhPXRoaXMubG9zc0Z1bmN0aW9uc1tpXTt0aGlzLm91dHB1dHMubGVuZ3RoPjEmJih0aGlzLm1ldHJpY3NUZW5zb3JzLnB1c2goW2EsaV0pLHRoaXMubWV0cmljc05hbWVzLnB1c2godGhpcy5vdXRwdXROYW1lc1tpXSsiX2xvc3MiKSl9fSk7Y29uc3Qgcj1uRyhlLm1ldHJpY3MsdGhpcy5vdXRwdXROYW1lcyksbz0oaSxhLGwpPT57dGhpcy5vdXRwdXROYW1lcy5sZW5ndGg+MSYmKGE9dGhpcy5vdXRwdXROYW1lc1tpXSsiXyIrYSksdGhpcy5tZXRyaWNzTmFtZXMucHVzaChhKSx0aGlzLm1ldHJpY3NUZW5zb3JzLnB1c2goW2wsaV0pfTtuYSgibWV0cmljIiwoKT0+e2ZvcihsZXQgaT0wO2k8dGhpcy5vdXRwdXRzLmxlbmd0aDsrK2kpe2lmKHMuaW5kZXhPZihpKSE9PS0xKWNvbnRpbnVlO2NvbnN0IGE9cltpXTsoYz0+e2xldCBwLGYsZztmb3IoY29uc3QgeSBvZiBjKXtpZih0eXBlb2YgeT09InN0cmluZyImJlsiYWNjdXJhY3kiLCJhY2MiLCJjcm9zc2VudHJvcHkiLCJjZSJdLmluZGV4T2YoeSkhPT0tMSl7Y29uc3QgYj10aGlzLmludGVybmFsT3V0cHV0U2hhcGVzW2ldO2JbYi5sZW5ndGgtMV09PT0xfHx0aGlzLmxvc3NGdW5jdGlvbnNbaV09PT1leT9bImFjY3VyYWN5IiwiYWNjIl0uaW5kZXhPZih5KSE9PS0xP2Y9dVQ6WyJjcm9zc2VudHJvcHkiLCJjZSJdLmluZGV4T2YoeSkhPT0tMSYmKGY9VGopOnRoaXMubG9zc0Z1bmN0aW9uc1tpXT09PVBmP1siYWNjdXJhY3kiLCJhY2MiXS5pbmRleE9mKHkpIT09LTE/Zj1FajpbImNyb3NzZW50cm9weSIsImNlIl0uaW5kZXhPZih5KSE9PS0xJiYoZj1oVCk6WyJhY2N1cmFjeSIsImFjYyJdLmluZGV4T2YoeSkhPT0tMT9mPWNUOlsiY3Jvc3NlbnRyb3B5IiwiY2UiXS5pbmRleE9mKHkpIT09LTEmJihmPWRUKTtsZXQgdjtbImFjY3VyYWN5IiwiYWNjIl0uaW5kZXhPZih5KSE9PS0xP3Y9ImFjYyI6WyJjcm9zc2VudHJvcHkiLCJjZSJdLmluZGV4T2YoeSkhPT0tMSYmKHY9ImNlIiksZz1mLHA9IiIrdn1lbHNlIGc9UGooeSkscD0iIitKcCh5KTtsZXQgdztuYShwLCgpPT57dz1nfSksbyhpLHAsdyl9fSkoYSl9fSksdGhpcy5jb2xsZWN0ZWRUcmFpbmFibGVXZWlnaHRzPXRoaXMudHJhaW5hYmxlV2VpZ2h0c31jaGVja1RyYWluYWJsZVdlaWdodHNDb25zaXN0ZW5jeSgpe3RoaXMuY29sbGVjdGVkVHJhaW5hYmxlV2VpZ2h0cyE9bnVsbCYmdGhpcy50cmFpbmFibGVXZWlnaHRzLmxlbmd0aCE9PXRoaXMuY29sbGVjdGVkVHJhaW5hYmxlV2VpZ2h0cy5sZW5ndGgmJmNvbnNvbGUud2FybigiRGlzY3JlcGFuY3kgYmV0d2VlbiB0cmFpbmFibGV3ZWlnaHRzIGFuZCBjb2xsZWN0ZWQgdHJhaW5hYmxlIHdlaWdodHMuIERpZCB5b3Ugc2V0IGBtb2RlbC50cmFpbmFibGVgIHdpdGhvdXQgY2FsbGluZyBgbW9kZWwuY29tcGlsZSgpYCBhZnRlcndhcmRzPyIpfWV2YWx1YXRlKGUsdCxzPXt9KXtjb25zdCByPXMuYmF0Y2hTaXplPT1udWxsPzMyOnMuYmF0Y2hTaXplO2IwKHIpO2NvbnN0IGk9dGhpcy5zdGFuZGFyZGl6ZVVzZXJEYXRhWFkoZSx0LCEwLHIpO3RyeXtjb25zdCBhPWlbMF0uY29uY2F0KGlbMV0pO3RoaXMubWFrZVRlc3RGdW5jdGlvbigpO2NvbnN0IGw9dGhpcy50ZXN0RnVuY3Rpb24sYz10aGlzLnRlc3RMb29wKGwsYSxyLHMudmVyYm9zZSxzLnN0ZXBzKTtyZXR1cm4gWm4oYyl9ZmluYWxseXtwcihpWzBdLGUpLHByKGlbMV0sdCl9fWFzeW5jIGV2YWx1YXRlRGF0YXNldChlLHQpe3JldHVybiB0aGlzLm1ha2VUZXN0RnVuY3Rpb24oKSxaaih0aGlzLGUsdCl9Y2hlY2tOdW1TYW1wbGVzKGUsdCxzLHI9InN0ZXBzIil7bGV0IG87aWYocyE9bnVsbCl7aWYobz1udWxsLHQhPW51bGwpdGhyb3cgbmV3IGVlKGBJZiAke3J9IGlzIHNldCwgYmF0Y2hTaXplIG11c3QgYmUgbnVsbCBvciB1bmRlZmluZWQuR290IGJhdGNoU2l6ZSA9ICR7dH1gKX1lbHNlIGlmKGUhPW51bGwpQXJyYXkuaXNBcnJheShlKT9vPWVbMF0uc2hhcGVbMF06bz1lLnNoYXBlWzBdO2Vsc2UgdGhyb3cgbmV3IGVlKGBFaXRoZXIgdGhlIGlucHV0IGRhdGEgc2hvdWxkIGhhdmUgYSBkZWZpbmVkIHNoYXBlLCBvciAke3J9IHNob3VkIGJlIHNwZWNpZmllZC5gKTtyZXR1cm4gb31leGVjdXRlKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSYmdC5sZW5ndGg9PT0wKXRocm93IG5ldyBlZSgiYG91dHB1dHNgIGlzIGFuIGVtcHR5IEFycmF5LCB3aGljaCBpcyBub3QgYWxsb3dlZC4iKTtjb25zdCBzPUFycmF5LmlzQXJyYXkodCkscj1zP3Q6W3RdLG89dGhpcy5yZXRyaWV2ZVN5bWJvbGljVGVuc29ycyhyKSxpPW5ldyBKbztpZihlIGluc3RhbmNlb2YgZHQmJihlPVtlXSksQXJyYXkuaXNBcnJheShlKSl7aWYoZS5sZW5ndGghPT10aGlzLmlucHV0cy5sZW5ndGgpdGhyb3cgbmV3IGVlKGBUaGUgbnVtYmVyIG9mIGlucHV0cyBwcm92aWRlZCAoJHtlLmxlbmd0aH0pIGRvZXMgbm90IG1hdGNoIHRoZSBudW1iZXIgb2YgaW5wdXRzIG9mIHRoaXMgbW9kZWwgKCR7dGhpcy5pbnB1dHMubGVuZ3RofSkuYCk7Zm9yKGxldCBsPTA7bDx0aGlzLmlucHV0cy5sZW5ndGg7KytsKWkuYWRkKHRoaXMuaW5wdXRzW2xdLGVbbF0pfWVsc2UgZm9yKGNvbnN0IGwgb2YgdGhpcy5pbnB1dHMpe2NvbnN0IGM9ZVtsLm5hbWVdO2lmKGM9PW51bGwpdGhyb3cgbmV3IGVlKGBObyB2YWx1ZSBpcyBwcm92aWRlZCBmb3IgdGhlIG1vZGVsJ3MgaW5wdXQgJHtsLm5hbWV9YCk7aS5hZGQobCxjKX1jb25zdCBhPUljKG8saSk7cmV0dXJuIHM/YTphWzBdfXJldHJpZXZlU3ltYm9saWNUZW5zb3JzKGUpe2NvbnN0IHQ9ZmEobnVsbCxlLmxlbmd0aCk7bGV0IHM9ZS5sZW5ndGg7Zm9yKGNvbnN0IHIgb2YgdGhpcy5sYXllcnMpe2NvbnN0IG89QXJyYXkuaXNBcnJheShyLm91dHB1dCk/ci5vdXRwdXQ6W3Iub3V0cHV0XSxpPW8ubWFwKGE9PmEubmFtZSk7Zm9yKGxldCBhPTA7YTxlLmxlbmd0aDsrK2Epe2NvbnN0IGw9aS5pbmRleE9mKGVbYV0pO2lmKGwhPT0tMSYmKHRbYV09b1tsXSxzLS0pLHM9PT0wKWJyZWFrfWlmKHM9PT0wKWJyZWFrfWlmKHM+MCl7Y29uc3Qgcj1bXTt0aHJvdyB0LmZvckVhY2goKG8saSk9PntvPT1udWxsJiZyLnB1c2goZVtpXSl9KSxuZXcgZWUoYENhbm5vdCBmaW5kIFN5bWJvbGljVGVuc29ycyBmb3Igb3V0cHV0IG5hbWUocyk6ICR7SlNPTi5zdHJpbmdpZnkocil9YCl9cmV0dXJuIHR9cHJlZGljdExvb3AoZSx0PTMyLHM9ITEpe3JldHVybiByZSgoKT0+e2NvbnN0IHI9dGhpcy5jaGVja051bVNhbXBsZXMoZSk7aWYocyl0aHJvdyBuZXcgS2UoIlZlcmJvc2UgcHJlZGljdExvb3AoKSBpcyBub3QgaW1wbGVtZW50ZWQgeWV0LiIpO2NvbnN0IG89dzAocix0KSxpPXRoaXMub3V0cHV0cy5tYXAoYT0+W10pO2ZvcihsZXQgYT0wO2E8by5sZW5ndGg7KythKXJlKCgpPT57Y29uc3QgYz1vW2FdWzBdLGg9b1thXVsxXSxwPVNjKGUsYyxoKSxmPVtdO2lmKEFycmF5LmlzQXJyYXkocCkpZm9yKGxldCB5PTA7eTxwLmxlbmd0aDsrK3kpZi5wdXNoKHtrZXk6dGhpcy5pbnB1dHNbeV0sdmFsdWU6cFt5XX0pO2Vsc2UgZi5wdXNoKHtrZXk6dGhpcy5pbnB1dHNbMF0sdmFsdWU6cH0pO2NvbnN0IGc9bmV3IEpvKGYpO3JldHVybiBJYyh0aGlzLm91dHB1dHMsZyl9KS5mb3JFYWNoKChjLGgpPT5pW2hdLnB1c2goYykpO3JldHVybiBabihpLm1hcChhPT5XdChhLDApKSl9KX1wcmVkaWN0KGUsdD17fSl7Y29uc3Qgcz14VChlKTtvQyhzLHRoaXMuaW5wdXROYW1lcyx0aGlzLmZlZWRJbnB1dFNoYXBlcywhMSk7dHJ5e2NvbnN0IHI9dC5iYXRjaFNpemU9PW51bGw/MzI6dC5iYXRjaFNpemU7cmV0dXJuIGIwKHIpLHRoaXMucHJlZGljdExvb3AocyxyKX1maW5hbGx5e3ByKHMsZSl9fXByZWRpY3RPbkJhdGNoKGUpe29DKGUsdGhpcy5pbnB1dE5hbWVzLHRoaXMuZmVlZElucHV0U2hhcGVzLCEwKTtjb25zdCB0PShBcnJheS5pc0FycmF5KGUpP2VbMF06ZSkuc2hhcGVbMF07cmV0dXJuIHRoaXMucHJlZGljdExvb3AoZSx0KX1zdGFuZGFyZGl6ZVVzZXJEYXRhWFkoZSx0LHM9ITAscil7aWYodGhpcy5vcHRpbWl6ZXJfPT1udWxsKXRocm93IG5ldyBacygiWW91IG11c3QgY29tcGlsZSBhIG1vZGVsIGJlZm9yZSB0cmFpbmluZy90ZXN0aW5nLiBVc2UgTGF5ZXJzTW9kZWwuY29tcGlsZShtb2RlbENvbXBpbGVBcmdzKS4iKTtjb25zdCBvPVtdO2ZvcihsZXQgaT0wO2k8dGhpcy5mZWVkT3V0cHV0U2hhcGVzLmxlbmd0aDsrK2kpe2NvbnN0IGE9dGhpcy5mZWVkT3V0cHV0U2hhcGVzW2ldO3RoaXMuZmVlZExvc3NGbnNbaV09PT1QZj9vLnB1c2goYS5zbGljZSgwLGEubGVuZ3RoLTEpLmNvbmNhdChbMV0pKTpvLnB1c2goYSl9aWYoZT1yQyhlLHRoaXMuZmVlZElucHV0TmFtZXMsdGhpcy5mZWVkSW5wdXRTaGFwZXMsITEsImlucHV0IiksdD1yQyh0LHRoaXMuZmVlZE91dHB1dE5hbWVzLG8sITEsInRhcmdldCIpLGVHKGUsdCksdEcodCx0aGlzLmZlZWRMb3NzRm5zLHRoaXMuZmVlZE91dHB1dFNoYXBlcyksdGhpcy5zdGF0ZWZ1bCYmciE9bnVsbCYmcj4wJiZlWzBdLnNoYXBlWzBdJXIhPT0wKXRocm93IG5ldyBlZShgSW4gYSBzdGF0ZWZ1bCBuZXR3b3JrLCB5b3Ugc2hvdWxkIG9ubHkgcGFzcyBpbnB1dHMgd2l0aCBhIG51bWJlciBvZiBzYW1wbGVzIHRoYXQgaXMgZGl2aXNpYmxlIGJ5IHRoZSBiYXRjaCBzaXplICR7cn0uIEZvdW5kOiAke2VbMF0uc2hhcGVbMF19IHNhbXBsZShzKS5gKTtyZXR1cm5bZSx0XX1hc3luYyBzdGFuZGFyZGl6ZVVzZXJEYXRhKGUsdCxzLHIsbz0hMCxpKXtjb25zdFthLGxdPXRoaXMuc3RhbmRhcmRpemVVc2VyRGF0YVhZKGUsdCxvLGkpO2lmKHMhPW51bGwpdGhyb3cgbmV3IEVycm9yKCJzYW1wbGUgd2VpZ2h0IGlzIG5vdCBzdXBwb3J0ZWQgeWV0LiIpO2xldCBjPW51bGw7aWYociE9bnVsbCl7Y29uc3QgaD1tVChyLHRoaXMub3V0cHV0TmFtZXMpO2M9W107Zm9yKGxldCBwPTA7cDxoLmxlbmd0aDsrK3ApYy5wdXNoKGF3YWl0IGdUKGxbcF0sbnVsbCxoW3BdKSl9cmV0dXJuW2EsbCxjXX10ZXN0TG9vcChlLHQscyxyPTAsbyl7cmV0dXJuIHJlKCgpPT57Y29uc3QgaT10aGlzLmNoZWNrTnVtU2FtcGxlcyh0LHMsbywic3RlcHMiKSxhPVtdO2lmKHI+MCl0aHJvdyBuZXcgS2UoIlZlcmJvc2UgbW9kZSBpcyBub3QgaW1wbGVtZW50ZWQgeWV0LiIpO2lmKG8hPW51bGwpdGhyb3cgbmV3IEtlKCJzdGVwcyBtb2RlIGluIHRlc3RMb29wKCkgaXMgbm90IGltcGxlbWVudGVkIHlldCIpO3tjb25zdCBsPXcwKGkscyksYz1fbihOcigwLGkpKTtmb3IobGV0IGg9MDtoPGwubGVuZ3RoOysraCl7Y29uc3QgcD1sW2hdWzBdLGY9bFtoXVsxXSxnPXNhKGMscCxmLXApLHk9cjEodCxnKSx3PWUoeSk7aWYoaD09PTApZm9yKGxldCBiPTA7Yjx3Lmxlbmd0aDsrK2IpYS5wdXNoKE1lKDApKTtmb3IobGV0IGI9MDtiPHcubGVuZ3RoOysrYil7Y29uc3Qgdj13W2JdO2FbYl09bWUoYVtiXSxYKGYtcCx2KSl9fWZvcihsZXQgaD0wO2g8YS5sZW5ndGg7KytoKWFbaF09T2UoYVtoXSxpKX1yZXR1cm4gYX0pfWdldERlZHVwZWRNZXRyaWNzTmFtZXMoKXtjb25zdCBlPXRoaXMubWV0cmljc05hbWVzLHQ9W107Zm9yKGxldCBzPTA7czxlLmxlbmd0aDsrK3Mpe2NvbnN0IHI9ZVtzXTtsZXQgbz1yO2lmKFVrKGUscik+MSl7Y29uc3QgaT1VayhlLnNsaWNlKDAscykscik7bys9YF8ke2l9YH10LnB1c2gobyl9cmV0dXJuIHR9bWFrZVRyYWluRnVuY3Rpb24oKXtyZXR1cm4gZT0+e2NvbnN0IHQ9W10scz1lLnNsaWNlKDAsdGhpcy5pbnB1dHMubGVuZ3RoKSxyPWUuc2xpY2UodGhpcy5pbnB1dHMubGVuZ3RoLHRoaXMuaW5wdXRzLmxlbmd0aCt0aGlzLm91dHB1dHMubGVuZ3RoKSxvPWUuc2xpY2UodGhpcy5pbnB1dHMubGVuZ3RoK3RoaXMub3V0cHV0cy5sZW5ndGgsdGhpcy5pbnB1dHMubGVuZ3RoK3RoaXMub3V0cHV0cy5sZW5ndGgqMiksaT1bXSxhPSgpPT57Y29uc3QgcD1bXTtmb3IobGV0IHc9MDt3PHRoaXMuaW5wdXRzLmxlbmd0aDsrK3cpcC5wdXNoKHtrZXk6dGhpcy5pbnB1dHNbd10sdmFsdWU6c1t3XX0pO2NvbnN0IGY9bmV3IEpvKHApLGc9SWModGhpcy5vdXRwdXRzLGYse3RyYWluaW5nOiEwfSk7bGV0IHk7Zm9yKGxldCB3PTA7dzx0aGlzLmxvc3NGdW5jdGlvbnMubGVuZ3RoOysrdyl7Y29uc3QgYj10aGlzLmxvc3NGdW5jdGlvbnNbd107bGV0IHY9YihyW3ddLGdbd10pO29bd10hPW51bGwmJih2PUhqKHYsb1t3XSkpO2NvbnN0IFM9X3Qodik7dC5wdXNoKFMpLHc9PT0wP3k9djp5PW1lKHksdil9Zm9yKGxldCB3PTA7dzx0aGlzLm1ldHJpY3NUZW5zb3JzLmxlbmd0aDsrK3cpe2xldCBiO2lmKHRoaXMub3V0cHV0cy5sZW5ndGg+MSYmdzx0aGlzLm91dHB1dHMubGVuZ3RoKWI9dFt3XTtlbHNle2NvbnN0IHY9dGhpcy5tZXRyaWNzVGVuc29yc1t3XVswXSxTPXRoaXMubWV0cmljc1RlbnNvcnNbd11bMV07Yj1fdCh2KHJbU10sZ1tTXSkpfWVuKGIpLGkucHVzaChiKX1yZXR1cm4geT1fdCh5KSx0aGlzLmNhbGN1bGF0ZUxvc3NlcygpLmZvckVhY2godz0+e3k9bWUoeSx3KX0pLHl9LGw9dGhpcy5jb2xsZWN0ZWRUcmFpbmFibGVXZWlnaHRzLm1hcChwPT5wLnJlYWQoKSk7cmV0dXJuW3RoaXMub3B0aW1pemVyXy5taW5pbWl6ZShhLCEwLGwpXS5jb25jYXQoaSl9fW1ha2VUZXN0RnVuY3Rpb24oKXt0aGlzLnRlc3RGdW5jdGlvbj1lPT5yZSgoKT0+e2NvbnN0IHQ9W107bGV0IHM7Y29uc3Qgcj1lLnNsaWNlKDAsdGhpcy5pbnB1dHMubGVuZ3RoKSxvPWUuc2xpY2UodGhpcy5pbnB1dHMubGVuZ3RoLHRoaXMuaW5wdXRzLmxlbmd0aCt0aGlzLm91dHB1dHMubGVuZ3RoKSxpPVtdO2ZvcihsZXQgYz0wO2M8dGhpcy5pbnB1dHMubGVuZ3RoOysrYylpLnB1c2goe2tleTp0aGlzLmlucHV0c1tjXSx2YWx1ZTpyW2NdfSk7Y29uc3QgYT1uZXcgSm8oaSksbD1JYyh0aGlzLm91dHB1dHMsYSk7Zm9yKGxldCBjPTA7Yzx0aGlzLmxvc3NGdW5jdGlvbnMubGVuZ3RoOysrYyl7Y29uc3QgaD10aGlzLmxvc3NGdW5jdGlvbnNbY10scD1fdChoKG9bY10sbFtjXSkpO2M9PT0wP3M9cDpzPW1lKHMscCksdC5wdXNoKHMpfWZvcihsZXQgYz0wO2M8dGhpcy5tZXRyaWNzVGVuc29ycy5sZW5ndGg7KytjKXtjb25zdCBoPXRoaXMubWV0cmljc1RlbnNvcnNbY11bMF0scD10aGlzLm1ldHJpY3NUZW5zb3JzW2NdWzFdLGY9X3QoaChvW3BdLGxbcF0pKTt0LnB1c2goZil9cmV0dXJuIHR9KX1hc3luYyBmaXQoZSx0LHM9e30pe2lmKHRoaXMuaXNUcmFpbmluZyl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBzdGFydCB0cmFpbmluZyBiZWNhdXNlIGFub3RoZXIgZml0KCkgY2FsbCBpcyBvbmdvaW5nLiIpO3RoaXMuaXNUcmFpbmluZz0hMDtsZXQgcixvLGksYSxsLGMsaCxwLGY7dHJ5e2NvbnN0IGc9cy5iYXRjaFNpemU9PW51bGw/MzI6cy5iYXRjaFNpemU7YjAoZyk7Y29uc3Qgdz1hd2FpdCB0aGlzLnN0YW5kYXJkaXplVXNlckRhdGEoZSx0LHMuc2FtcGxlV2VpZ2h0LHMuY2xhc3NXZWlnaHQsITEsZyk7cj13WzBdLG89d1sxXSxmPXdbMl07bGV0IGI9ITEsdjtpZihzLnZhbGlkYXRpb25EYXRhIT1udWxsJiZzLnZhbGlkYXRpb25EYXRhLmxlbmd0aD4wKXtpZihiPSEwLHMudmFsaWRhdGlvbkRhdGEubGVuZ3RoPT09MilsPXMudmFsaWRhdGlvbkRhdGFbMF0sYz1zLnZhbGlkYXRpb25EYXRhWzFdO2Vsc2UgdGhyb3cgcy52YWxpZGF0aW9uRGF0YS5sZW5ndGg9PT0zP25ldyBLZSgidmFsaWRhdGlvbkRhdGEgaW5jbHVkaW5nIHNhbXBsZSB3ZWlnaHRzIGlzIG5vdCBzdXBwb3J0ZWQgeWV0LiIpOm5ldyBlZShgV2hlbiBwYXNzaW5nIHZhbGlkYXRpb24gZGF0YSwgaXQgbXVzdCBjb250YWluIDIgKHZhbFgsIHZhbFkpIG9yIDMgKHZhbFgsIHZhbFksIHZhbFNhbXBsZVdlaWdodCkgaXRlbXM7ICR7cy52YWxpZGF0aW9uRGF0YX0gaXMgaW52YWxpZC5gKTtjb25zdCBfPWF3YWl0IHRoaXMuc3RhbmRhcmRpemVVc2VyRGF0YShsLGMsbnVsbCxudWxsLCEwLGcpO2g9X1swXSxwPV9bMV0sdj1oLmNvbmNhdChwKX1lbHNlIGlmKHMudmFsaWRhdGlvblNwbGl0IT1udWxsJiZzLnZhbGlkYXRpb25TcGxpdD4wJiZzLnZhbGlkYXRpb25TcGxpdDwxKXtiPSEwO2NvbnN0IEY9TWF0aC5mbG9vcihyWzBdLnNoYXBlWzBdKigxLXMudmFsaWRhdGlvblNwbGl0KSksXz1yWzBdLnNoYXBlWzBdO2g9U2MocixGLF8pLGk9cixyPVNjKHIsMCxGKSxwPVNjKG8sRixfKSxhPW8sbz1TYyhvLDAsRiksdj1oLmNvbmNhdChwKX1lbHNlIHMudmFsaWRhdGlvblN0ZXBzIT1udWxsJiYoYj0hMCk7Y29uc3QgUz1yLmNvbmNhdChvKS5jb25jYXQoZik7dGhpcy5jaGVja1RyYWluYWJsZVdlaWdodHNDb25zaXN0ZW5jeSgpO2NvbnN0ICQ9dGhpcy5tYWtlVHJhaW5GdW5jdGlvbigpLGs9dGhpcy5nZXREZWR1cGVkTWV0cmljc05hbWVzKCk7bGV0IFQsRDtiPyh0aGlzLm1ha2VUZXN0RnVuY3Rpb24oKSxUPXRoaXMudGVzdEZ1bmN0aW9uLEQ9ay5zbGljZSgpLmNvbmNhdChrLm1hcChGPT4idmFsXyIrRikpKTooVD1udWxsLHY9W10sRD1rLnNsaWNlKCkpO2NvbnN0IEw9aVQocy5jYWxsYmFja3Mscy55aWVsZEV2ZXJ5KTtyZXR1cm4gYXdhaXQgdGhpcy5maXRMb29wKCQsUyxrLGcscy5lcG9jaHMscy52ZXJib3NlLEwsVCx2LHMuc2h1ZmZsZSxELHMuaW5pdGlhbEVwb2NoLG51bGwsbnVsbCl9ZmluYWxseXt0aGlzLmlzVHJhaW5pbmc9ITEscHIocixlKSxwcihvLHQpLHByKGksZSkscHIoYSx0KSxwcihoLGwpLHByKHAsYyksZiE9bnVsbCYmWWUoZil9fWFzeW5jIGZpdExvb3AoZSx0LHMscixvLGksYSxsLGMsaCxwLGYsZyx5KXtyPT1udWxsJiYocj0zMiksbz09bnVsbCYmKG89MSksaD09bnVsbCYmKGg9ITApLGY9PW51bGwmJihmPTApO2xldCB3PSExO2lmKGwhPW51bGwmJmMhPW51bGwmJih3PSEwKSx5IT1udWxsJiYodz0hMCxnPT1udWxsKSl0aHJvdyBuZXcgZWUoIkNhbiBvbmx5IHVzZSBgdmFsaWRhdGlvblN0ZXBzYCB3aGVuIGRvaW5nIHN0ZXAtd2lzZSB0cmFpbmluZywgaS5lLiwgYHN0ZXBzUGVyRXBvY2hgIG11c3QgYmUgc2V0LiIpO2NvbnN0IGI9dGhpcy5jaGVja051bVNhbXBsZXModCxyLGcsInN0ZXBzX3Blcl9lcG9jaCIpO2xldCB2O2IhPW51bGwmJih2PU5yKDAsYikpLGk9PW51bGwmJihpPTEpO2NvbnN0e2NhbGxiYWNrTGlzdDpTLGhpc3Rvcnk6JH09YVQoYSxpLG8sZixiLGcscix3LHApO1Muc2V0TW9kZWwodGhpcyksdGhpcy5oaXN0b3J5PSQsYXdhaXQgUy5vblRyYWluQmVnaW4oKSx0aGlzLnN0b3BUcmFpbmluZ189ITE7Zm9yKGxldCBrPWY7azxvOysrayl7YXdhaXQgUy5vbkVwb2NoQmVnaW4oayk7Y29uc3QgVD17fTtpZihnIT1udWxsKXRocm93IG5ldyBLZSgic3RlcHNQZXJFcG9jaCBtb2RlIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQuIik7e2lmKGg9PT0iYmF0Y2giKXRocm93IG5ldyBLZSgiYmF0Y2ggc2h1ZmZsaW5nIGlzIG5vdCBpbXBsZW1uZXRlZCB5ZXQiKTtoJiZJMSh2KTtjb25zdCBEPV9uKHYpLEw9dzAoYixyKTtmb3IobGV0IHo9MDt6PEwubGVuZ3RoOysreil7Y29uc3QgRj17fTtpZihhd2FpdCBTLm9uQmF0Y2hCZWdpbih6LEYpLHJlKCgpPT57Y29uc3QgXz1MW3pdWzBdLEU9TFt6XVsxXSxNPXNhKEQsXyxFLV8pO0YuYmF0Y2g9eixGLnNpemU9RS1fO2NvbnN0IFU9cjEodCxNKSxZPWUoVSk7Zm9yKGxldCBRPTA7UTxzLmxlbmd0aDsrK1Epe2NvbnN0IG5lPXNbUV0sc2U9WVtRXTtGW25lXT1zZSxlbihzZSl9aWYoej09PUwubGVuZ3RoLTEmJncpe2NvbnN0IFE9dGhpcy50ZXN0TG9vcChsLGMscik7Zm9yKGxldCBuZT0wO25lPHMubGVuZ3RoOysrbmUpe2NvbnN0IHNlPXNbbmVdLFY9UVtuZV07ZW4oViksVFsidmFsXyIrc2VdPVZ9fX0pLGF3YWl0IFMub25CYXRjaEVuZCh6LEYpLG9UKEYpLHRoaXMuc3RvcFRyYWluaW5nXylicmVha31ELmRpc3Bvc2UoKX1pZihhd2FpdCBTLm9uRXBvY2hFbmQoayxUKSx0aGlzLnN0b3BUcmFpbmluZ18pYnJlYWt9cmV0dXJuIGF3YWl0IFMub25UcmFpbkVuZCgpLGF3YWl0IHRoaXMuaGlzdG9yeS5zeW5jRGF0YSgpLHRoaXMuaGlzdG9yeX1hc3luYyBmaXREYXRhc2V0KGUsdCl7cmV0dXJuIFhqKHRoaXMsZSx0KX1hc3luYyB0cmFpbk9uQmF0Y2goZSx0KXtjb25zdCBzPWF3YWl0IHRoaXMuc3RhbmRhcmRpemVVc2VyRGF0YShlLHQpLHI9c1swXSxvPXNbMV0sYT10aGlzLm1ha2VUcmFpbkZ1bmN0aW9uKCkoci5jb25jYXQobykpLGw9W107Zm9yKGNvbnN0IGMgb2YgYSl7Y29uc3QgaD1hd2FpdCBjLmRhdGEoKTtsLnB1c2goaFswXSl9cmV0dXJuIFllKGEpLHByKHNbMF0sZSkscHIoc1sxXSx0KSxabihsKX1nZXROYW1lZFdlaWdodHMoZSl7Y29uc3QgdD1bXSxzPWUhPW51bGwmJmUudHJhaW5hYmxlT25seSxyPXM/dGhpcy50cmFpbmFibGVXZWlnaHRzOnRoaXMud2VpZ2h0cyxvPXRoaXMuZ2V0V2VpZ2h0cyhzKTtmb3IobGV0IGk9MDtpPHIubGVuZ3RoOysraSlzJiYhcltpXS50cmFpbmFibGV8fHQucHVzaCh7bmFtZTpyW2ldLm9yaWdpbmFsTmFtZSx0ZW5zb3I6b1tpXX0pO3JldHVybiB0fXNldCBzdG9wVHJhaW5pbmcoZSl7dGhpcy5zdG9wVHJhaW5pbmdfPWV9Z2V0IHN0b3BUcmFpbmluZygpe3JldHVybiB0aGlzLnN0b3BUcmFpbmluZ199Z2V0IG9wdGltaXplcigpe3JldHVybiB0aGlzLm9wdGltaXplcl99c2V0IG9wdGltaXplcihlKXt0aGlzLm9wdGltaXplcl8hPT1lJiYodGhpcy5vcHRpbWl6ZXJfPWUsdGhpcy5pc09wdGltaXplck93bmVkPSExKX1kaXNwb3NlKCl7Y29uc3QgZT1zdXBlci5kaXNwb3NlKCk7aWYoZS5yZWZDb3VudEFmdGVyRGlzcG9zZT09PTAmJnRoaXMub3B0aW1pemVyIT1udWxsJiZ0aGlzLmlzT3B0aW1pemVyT3duZWQpe2NvbnN0IHQ9ejAoKS5udW1UZW5zb3JzO3RoaXMub3B0aW1pemVyXy5kaXNwb3NlKCksZS5udW1EaXNwb3NlZFZhcmlhYmxlcys9dC16MCgpLm51bVRlbnNvcnN9cmV0dXJuIGV9Z2V0TG9zc0lkZW50aWZpZXJzKCl7bGV0IGU7aWYodHlwZW9mIHRoaXMubG9zcz09InN0cmluZyIpZT11byh0aGlzLmxvc3MpO2Vsc2UgaWYoQXJyYXkuaXNBcnJheSh0aGlzLmxvc3MpKXtmb3IoY29uc3QgdCBvZiB0aGlzLmxvc3MpaWYodHlwZW9mIHQhPSJzdHJpbmciKXRocm93IG5ldyBFcnJvcigiU2VyaWFsaXphdGlvbiBvZiBub24tc3RyaW5nIGxvc3MgaXMgbm90IHN1cHBvcnRlZC4iKTtlPXRoaXMubG9zcy5tYXAodD0+dW8odCkpfWVsc2V7Y29uc3QgdD1PYmplY3Qua2V5cyh0aGlzLmxvc3MpO2U9e307Y29uc3Qgcz10aGlzLmxvc3M7Zm9yKGNvbnN0IHIgb2YgdClpZih0eXBlb2Ygc1tyXT09InN0cmluZyIpZVtyXT11byhzW3JdKTtlbHNlIHRocm93IG5ldyBFcnJvcigiU2VyaWFsaXphdGlvbiBvZiBub24tc3RyaW5nIGxvc3MgaXMgbm90IHN1cHBvcnRlZC4iKX1yZXR1cm4gZX1nZXRNZXRyaWNJZGVudGlmaWVycygpe2lmKHR5cGVvZiB0aGlzLm1ldHJpY3M9PSJzdHJpbmcifHx0eXBlb2YgdGhpcy5tZXRyaWNzPT0iZnVuY3Rpb24iKXJldHVyblt1byhKcCh0aGlzLm1ldHJpY3MpKV07aWYoQXJyYXkuaXNBcnJheSh0aGlzLm1ldHJpY3MpKXJldHVybiB0aGlzLm1ldHJpY3MubWFwKGU9PnVvKEpwKGUpKSk7e2NvbnN0IGU9e307Zm9yKGNvbnN0IHQgaW4gdGhpcy5tZXRyaWNzKWVbdF09dW8oSnAodGhpcy5tZXRyaWNzW3RdKSk7cmV0dXJuIGV9fWdldFRyYWluaW5nQ29uZmlnKCl7cmV0dXJue2xvc3M6dGhpcy5nZXRMb3NzSWRlbnRpZmllcnMoKSxtZXRyaWNzOnRoaXMuZ2V0TWV0cmljSWRlbnRpZmllcnMoKSxvcHRpbWl6ZXJfY29uZmlnOntjbGFzc19uYW1lOnRoaXMub3B0aW1pemVyLmdldENsYXNzTmFtZSgpLGNvbmZpZzp0aGlzLm9wdGltaXplci5nZXRDb25maWcoKX19fWxvYWRUcmFpbmluZ0NvbmZpZyhlKXtpZihlLndlaWdodGVkX21ldHJpY3MhPW51bGwpdGhyb3cgbmV3IEVycm9yKCJMb2FkaW5nIHdlaWdodF9tZXRyaWNzIGlzIG5vdCBzdXBwb3J0ZWQgeWV0LiIpO2lmKGUubG9zc193ZWlnaHRzIT1udWxsKXRocm93IG5ldyBFcnJvcigiTG9hZGluZyBsb3NzX3dlaWdodHMgaXMgbm90IHN1cHBvcnRlZCB5ZXQuIik7aWYoZS5zYW1wbGVfd2VpZ2h0X21vZGUhPW51bGwpdGhyb3cgbmV3IEVycm9yKCJMb2FkaW5nIHNhbXBsZV93ZWlnaHRfbW9kZSBpcyBub3Qgc3VwcG9ydGVkIHlldC4iKTtjb25zdCB0PW4xKGUub3B0aW1pemVyX2NvbmZpZykscz1tbyh0KTtsZXQgcjtpZih0eXBlb2YgZS5sb3NzPT0ic3RyaW5nIilyPUtpKGUubG9zcyk7ZWxzZSBpZihBcnJheS5pc0FycmF5KGUubG9zcykpcj1lLmxvc3MubWFwKGk9PktpKGkpKTtlbHNlIGlmKGUubG9zcyE9bnVsbCl7cj17fTtmb3IoY29uc3QgaSBpbiBlLmxvc3MpcltpXT1LaShlLmxvc3NbaV0pfWxldCBvO2lmKEFycmF5LmlzQXJyYXkoZS5tZXRyaWNzKSlvPWUubWV0cmljcy5tYXAoaT0+S2koaSkpO2Vsc2UgaWYoZS5tZXRyaWNzIT1udWxsKXtvPXt9O2Zvcihjb25zdCBpIGluIGUubWV0cmljcylvW2ldPUtpKGUubWV0cmljc1tpXSl9dGhpcy5jb21waWxlKHtsb3NzOnIsbWV0cmljczpvLG9wdGltaXplcjpzfSl9YXN5bmMgc2F2ZShlLHQpe2lmKHR5cGVvZiBlPT0ic3RyaW5nIil7Y29uc3QgYz1GJChlKTtpZihjLmxlbmd0aD09PTApdGhyb3cgbmV3IGVlKGBDYW5ub3QgZmluZCBhbnkgc2F2ZSBoYW5kbGVycyBmb3IgVVJMICcke2V9J2ApO2lmKGMubGVuZ3RoPjEpdGhyb3cgbmV3IGVlKGBGb3VuZCBtb3JlIHRoYW4gb25lICgke2MubGVuZ3RofSkgc2F2ZSBoYW5kbGVycyBmb3IgVVJMICcke2V9J2ApO2U9Y1swXX1pZihlLnNhdmU9PW51bGwpdGhyb3cgbmV3IGVlKCJMYXllcnNNb2RlbC5zYXZlKCkgY2Fubm90IHByb2NlZWQgYmVjYXVzZSB0aGUgSU9IYW5kbGVyIHByb3ZpZGVkIGRvZXMgbm90IGhhdmUgdGhlIGBzYXZlYCBhdHRyaWJ1dGUgZGVmaW5lZC4iKTtjb25zdCBzPWF3YWl0IE0wKHRoaXMuZ2V0TmFtZWRXZWlnaHRzKHQpKSxhPXttb2RlbFRvcG9sb2d5OnRoaXMudG9KU09OKG51bGwsITEpLGZvcm1hdDpzRyxnZW5lcmF0ZWRCeTpgVGVuc29yRmxvdy5qcyB0ZmpzLWxheWVycyB2JHtmVH1gLGNvbnZlcnRlZEJ5Om51bGx9O2lmKCh0PT1udWxsPyExOnQuaW5jbHVkZU9wdGltaXplcikmJnRoaXMub3B0aW1pemVyIT1udWxsKXthLnRyYWluaW5nQ29uZmlnPXRoaXMuZ2V0VHJhaW5pbmdDb25maWcoKTtjb25zdCBjPSJvcHRpbWl6ZXIiLHtkYXRhOmgsc3BlY3M6cH09YXdhaXQgTTAoYXdhaXQgdGhpcy5vcHRpbWl6ZXIuZ2V0V2VpZ2h0cygpLGMpO3Muc3BlY3MucHVzaCguLi5wKSxzLmRhdGE9XyQoW3MuZGF0YSxoXSl9cmV0dXJuIHRoaXMudXNlckRlZmluZWRNZXRhZGF0YSE9bnVsbCYmKGVDKHRoaXMudXNlckRlZmluZWRNZXRhZGF0YSx0aGlzLm5hbWUsITApLGEudXNlckRlZmluZWRNZXRhZGF0YT10aGlzLnVzZXJEZWZpbmVkTWV0YWRhdGEpLGEud2VpZ2h0RGF0YT1zLmRhdGEsYS53ZWlnaHRTcGVjcz1zLnNwZWNzLGUuc2F2ZShhKX1zZXRVc2VyRGVmaW5lZE1ldGFkYXRhKGUpe2VDKGUsdGhpcy5uYW1lKSx0aGlzLnVzZXJEZWZpbmVkTWV0YWRhdGE9ZX1nZXRVc2VyRGVmaW5lZE1ldGFkYXRhKCl7cmV0dXJuIHRoaXMudXNlckRlZmluZWRNZXRhZGF0YX19ZGwuY2xhc3NOYW1lPSJNb2RlbCI7Z2UoZGwpO2NsYXNzIGJUIGV4dGVuZHMgZGx7fWJULmNsYXNzTmFtZT0iRnVuY3Rpb25hbCI7Z2UoYlQpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIHFjIGV4dGVuZHMgZGx7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoe2lucHV0czpbXSxvdXRwdXRzOltdfSksZT1lfHx7fSx0aGlzLnRyYWluYWJsZT0hMCx0aGlzLmJ1aWx0PSExLHRoaXMubmFtZT1lLm5hbWUhPW51bGw/ZS5uYW1lOllnKCJzZXF1ZW50aWFsXyIpLGUubGF5ZXJzIT1udWxsKWZvcihjb25zdCB0IG9mIGUubGF5ZXJzKXRoaXMuYWRkKHQpfWNoZWNrU2hhcGUoZSl7aWYoZS5pbmJvdW5kTm9kZXNbMF0ub3V0cHV0VGVuc29yc1swXS5zaGFwZS5zb21lKHM9PnM8MCkpdGhyb3cgbmV3IGVlKGBOZWdhdGl2ZSBkaW1lbnNpb24gc2l6ZSBjYXVzZWQgYnkgYWRkaW5nIGxheWVyICR7ZS5uYW1lfSB3aXRoIGlucHV0IHNoYXBlIFske2UuaW5ib3VuZE5vZGVzWzBdLmlucHV0VGVuc29yc1swXS5zaGFwZX1dYCl9YWRkKGUpe2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIHFjfHxlIGluc3RhbmNlb2YgZGw7bGV0IHM7aWYodCl7aWYocz1lLHMub3V0cHV0cy5sZW5ndGghPT0xKXRocm93IG5ldyBlZSgiQWxsIGxheWVycyBpbiBhIFNlcXVlbnRpYWwgbW9kZWwgc2hvdWxkIGhhdmUgYSBzaW5nbGUgb3V0cHV0IHRlbnNvci4gRm9yIG11bHRpLW91dHB1dCBsYXllcnMsIHVzZSB0aGUgZnVuY3Rpb25hbCBBUEkuIik7aWYocy5pbnB1dHMubGVuZ3RoIT09MSl0aHJvdyBuZXcgZWUoIkFsbCBsYXllcnMgaW4gYSBTZXF1ZW50aWFsIG1vZGVsIHNob3VsZCBoYXZlIGEgc2luZ2xlIGlucHV0IHRlbnNvci4gRm9yIG11bHRpLWlucHV0IGxheWVycywgdXNlIHRoZSBmdW5jdGlvbmFsIEFQSS4iKX1pZih0aGlzLm91dHB1dHMubGVuZ3RoPT09MCl7aWYoZS5pbmJvdW5kTm9kZXMubGVuZ3RoPT09MCl7aWYoZS5iYXRjaElucHV0U2hhcGU9PW51bGwpdGhyb3cgbmV3IGVlKCJUaGUgZmlyc3QgbGF5ZXIgaW4gYSBTZXF1ZW50aWFsIG1vZGVsIG11c3QgZ2V0IGFuIGBpbnB1dFNoYXBlYCBvciBgYmF0Y2hJbnB1dFNoYXBlYCBhcmd1bWVudC4iKTtjb25zdCByPW9qKHtiYXRjaFNoYXBlOmUuYmF0Y2hJbnB1dFNoYXBlLGR0eXBlOmUuZHR5cGUsbmFtZTplLm5hbWUrIl9pbnB1dCJ9KTtlLmFwcGx5KHIpfWlmKHQpdGhpcy5vdXRwdXRzPXMub3V0cHV0cyx0aGlzLmlucHV0cz1zLmlucHV0cztlbHNle2lmKGUuaW5ib3VuZE5vZGVzLmxlbmd0aCE9PTEpdGhyb3cgbmV3IGVlKGBBIGxheWVyIGFkZGVkIHRvIGEgU2VxdWVudGlhbCBtb2RlbCBtdXN0IG5vdCBhbHJlYWR5IGJlIGNvbm5lY3RlZCBzb21ld2hlcmUgZWxzZS4gTGF5ZXJzTW9kZWwgcmVjZWl2ZWQgbGF5ZXIgJHtlLm5hbWV9IHdoaWNoIGhhcyAke2UuaW5ib3VuZE5vZGVzLmxlbmd0aH0gcHJlLWV4aXN0aW5nIGluYm91bmQgY29ubmVjdGlvbnMuYCk7aWYoZS5pbmJvdW5kTm9kZXNbMF0ub3V0cHV0VGVuc29ycy5sZW5ndGghPT0xKXRocm93IG5ldyBlZSgiQWxsIGxheWVycyBpbiBhIFNlcXVlbnRpYWwgbW9kZWwgc2hvdWxkIGhhdmUgYSBzaW5nbGUgb3V0cHV0IHRlbnNvci4gRm9yIG11bHRpLW91dHB1dCBsYXllcnMsIHVzZSB0aGUgZnVuY3Rpb25hbCBBUEkuIik7dGhpcy5jaGVja1NoYXBlKGUpLHRoaXMub3V0cHV0cz1bZS5pbmJvdW5kTm9kZXNbMF0ub3V0cHV0VGVuc29yc1swXV0sdGhpcy5pbnB1dHM9ZVQodGhpcy5vdXRwdXRzWzBdKX10aGlzLmluYm91bmROb2Rlcz1bXSxuZXcgWmcoe291dGJvdW5kTGF5ZXI6dGhpcyxpbmJvdW5kTGF5ZXJzOltdLG5vZGVJbmRpY2VzOltdLHRlbnNvckluZGljZXM6W10saW5wdXRUZW5zb3JzOnRoaXMuaW5wdXRzLG91dHB1dFRlbnNvcnM6dGhpcy5vdXRwdXRzLGlucHV0TWFza3M6ZmEobnVsbCx0aGlzLmlucHV0cy5sZW5ndGgpLG91dHB1dE1hc2tzOltudWxsXSxpbnB1dFNoYXBlczp0aGlzLmlucHV0cy5tYXAocj0+ci5zaGFwZSksb3V0cHV0U2hhcGVzOnRoaXMub3V0cHV0c1swXS5zaGFwZX0pfWVsc2V7Y29uc3Qgcj1lLmFwcGx5KHRoaXMub3V0cHV0c1swXSk7aWYoQXJyYXkuaXNBcnJheShyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBbGwgbGF5ZXJzIGluIGEgU2VxdWVudGlhbCBtb2RlbCBzaG91bGQgaGF2ZSBhIHNpbmdsZSBvdXRwdXQgdGVuc29yLiBGb3IgbXVsdGktb3V0cHV0IGxheWVycywgdXNlIHRoZSBmdW5jdGlvbmFsIEFQSS4iKTt0aGlzLmNoZWNrU2hhcGUoZSksdGhpcy5vdXRwdXRzPVtyXSx0aGlzLmluYm91bmROb2Rlc1swXS5vdXRwdXRUZW5zb3JzPXRoaXMub3V0cHV0cyx0aGlzLmluYm91bmROb2Rlc1swXS5vdXRwdXRTaGFwZXM9W3RoaXMub3V0cHV0c1swXS5zaGFwZV19dGhpcy5sYXllcnMucHVzaChlKSx0aGlzLmJ1aWx0PSExfXBvcCgpe2lmKHRoaXMubGF5ZXJzLmxlbmd0aD09PTApdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlcmUgYXJlIG5vIGxheWVycyBpbiB0aGUgbW9kZWwuIik7aWYodGhpcy5sYXllcnMucG9wKCksdGhpcy5sYXllcnMubGVuZ3RoPT09MCl0aGlzLm91dHB1dHM9W10sdGhpcy5pbmJvdW5kTm9kZXM9W10sdGhpcy5vdXRib3VuZE5vZGVzPVtdO2Vsc2V7Y29uc3QgZT10aGlzLmxheWVycy5sZW5ndGgtMTt0aGlzLmxheWVyc1tlXS5vdXRib3VuZE5vZGVzPVtdLHRoaXMub3V0cHV0cz1bdGhpcy5sYXllcnNbZV0ub3V0cHV0XSx0aGlzLmluYm91bmROb2Rlc1swXS5vdXRwdXRUZW5zb3JzPXRoaXMub3V0cHV0cyx0aGlzLmluYm91bmROb2Rlc1swXS5vdXRwdXRTaGFwZXM9W3RoaXMub3V0cHV0c1swXS5zaGFwZV19fWNhbGwoZSx0KXtyZXR1cm4gdGhpcy5tb2RlbD09bnVsbCYmdGhpcy5idWlsZCgpLHRoaXMubW9kZWwuY2FsbChlLHQpfWJ1aWxkKGUpe2lmKGF0KGUpLHRoaXMuaW5wdXRzLmxlbmd0aD09PTB8fHRoaXMub3V0cHV0cy5sZW5ndGg9PT0wKXRocm93IG5ldyBUeXBlRXJyb3IoIlNlcXVlbnRpYWwgbW9kZWwgY2Fubm90IGJlIGJ1aWx0OiBtb2RlbCBpcyBlbXB0eS4gQWRkIHNvbWUgbGF5ZXJzIGZpcnN0LiIpO3RoaXMubW9kZWw9bmV3IGRsKHtpbnB1dHM6dGhpcy5pbnB1dHMsb3V0cHV0czp0aGlzLm91dHB1dHNbMF0sbmFtZTp0aGlzLm5hbWUrIl9tb2RlbCJ9KSx0aGlzLm1vZGVsLnRyYWluYWJsZT10aGlzLnRyYWluYWJsZSx0aGlzLnN1cHBvcnRzTWFza2luZz10aGlzLm1vZGVsLnN1cHBvcnRzTWFza2luZyx0aGlzLmlucHV0TGF5ZXJzPXRoaXMubW9kZWwuaW5wdXRMYXllcnMsdGhpcy5pbnB1dExheWVyc05vZGVJbmRpY2VzPXRoaXMubW9kZWwuaW5wdXRMYXllcnNOb2RlSW5kaWNlcyx0aGlzLmlucHV0TGF5ZXJzVGVuc29ySW5kaWNlcz10aGlzLm1vZGVsLmlucHV0TGF5ZXJzVGVuc29ySW5kaWNlcyx0aGlzLm91dHB1dExheWVycz10aGlzLm1vZGVsLm91dHB1dExheWVycyx0aGlzLm91dHB1dExheWVyc05vZGVJbmRpY2VzPXRoaXMubW9kZWwub3V0cHV0TGF5ZXJzTm9kZUluZGljZXMsdGhpcy5vdXRwdXRMYXllcnNUZW5zb3JJbmRpY2VzPXRoaXMubW9kZWwub3V0cHV0TGF5ZXJzVGVuc29ySW5kaWNlcyx0aGlzLm5vZGVzQnlEZXB0aD10aGlzLm1vZGVsLm5vZGVzQnlEZXB0aCx0aGlzLmNvbnRhaW5lck5vZGVzPXRoaXMubW9kZWwuY29udGFpbmVyTm9kZXMsdGhpcy5vdXRwdXROYW1lcz10aGlzLm1vZGVsLm91dHB1dE5hbWVzLHRoaXMuaW5wdXROYW1lcz10aGlzLm1vZGVsLmlucHV0TmFtZXMsdGhpcy5idWlsdD0hMH1jb3VudFBhcmFtcygpe3JldHVybiB0aGlzLmJ1aWx0fHx0aGlzLmJ1aWxkKCksc3VwZXIuY291bnRQYXJhbXMoKX1zdW1tYXJ5KGUsdCxzPWNvbnNvbGUubG9nKXt0aGlzLmJ1aWx0fHx0aGlzLmJ1aWxkKCksc3VwZXIuc3VtbWFyeShlLHQscyl9c2V0V2VpZ2h0cyhlKXt0aGlzLm1vZGVsPT1udWxsJiZ0aGlzLmJ1aWxkKCksdGhpcy5tb2RlbC5zZXRXZWlnaHRzKGUpfWV2YWx1YXRlKGUsdCxzPXt9KXtpZighdGhpcy5idWlsdCl0aHJvdyBuZXcgWnMoIlRoZSBtb2RlbCBuZWVkcyB0byBiZSBjb21waWxlZCBiZWZvcmUgYmVpbmcgdXNlZC4iKTtyZXR1cm4gdGhpcy5tb2RlbC5ldmFsdWF0ZShlLHQscyl9YXN5bmMgZXZhbHVhdGVEYXRhc2V0KGUsdCl7aWYoIXRoaXMuYnVpbHQpdGhyb3cgbmV3IFpzKCJUaGUgbW9kZWwgbmVlZHMgdG8gYmUgY29tcGlsZWQgYmVmb3JlIGJlaW5nIHVzZWQuIik7cmV0dXJuIHRoaXMubW9kZWwuZXZhbHVhdGVEYXRhc2V0KGUsdCl9cHJlZGljdChlLHQ9e30pe3JldHVybiB0aGlzLm1vZGVsPT1udWxsJiZ0aGlzLmJ1aWxkKCksdGhpcy5tb2RlbC5wcmVkaWN0KGUsdCl9cHJlZGljdE9uQmF0Y2goZSl7cmV0dXJuIHRoaXMubW9kZWw9PW51bGwmJnRoaXMuYnVpbGQoKSx0aGlzLm1vZGVsLnByZWRpY3RPbkJhdGNoKGUpfWNvbXBpbGUoZSl7dGhpcy5idWlsZCgpLHRoaXMubW9kZWwuY29tcGlsZShlKSx0aGlzLm9wdGltaXplcl89dGhpcy5tb2RlbC5vcHRpbWl6ZXIsdGhpcy5pc09wdGltaXplck93bmVkPXRoaXMubW9kZWwuaXNPcHRpbWl6ZXJPd25lZCx0aGlzLmxvc3M9dGhpcy5tb2RlbC5sb3NzLHRoaXMubWV0cmljcz10aGlzLm1vZGVsLm1ldHJpY3MsdGhpcy5tZXRyaWNzVGVuc29ycz10aGlzLm1vZGVsLm1ldHJpY3NUZW5zb3JzLHRoaXMubWV0cmljc05hbWVzPXRoaXMubW9kZWwubWV0cmljc05hbWVzfWdldCBvcHRpbWl6ZXIoKXtyZXR1cm4gdGhpcy5tb2RlbD09bnVsbD92b2lkIDA6dGhpcy5tb2RlbC5vcHRpbWl6ZXJ9c2V0IG9wdGltaXplcihlKXt0aGlzLm1vZGVsLm9wdGltaXplcj1lfWFzeW5jIGZpdChlLHQscz17fSl7aWYoIXRoaXMuYnVpbHQpdGhyb3cgbmV3IFpzKCJUaGUgbW9kZWwgbmVlZHMgdG8gYmUgY29tcGlsZWQgYmVmb3JlIGJlaW5nIHVzZWQuIik7cmV0dXJuIHRoaXMubW9kZWwuZml0KGUsdCxzKX1hc3luYyBmaXREYXRhc2V0KGUsdCl7aWYoIXRoaXMuYnVpbHQpdGhyb3cgbmV3IFpzKCJUaGUgbW9kZWwgbmVlZHMgdG8gYmUgY29tcGlsZWQgYmVmb3JlIGJlaW5nIHVzZWQuIik7cmV0dXJuIHRoaXMubW9kZWwuZml0RGF0YXNldChlLHQpfWFzeW5jIHRyYWluT25CYXRjaChlLHQpe3JldHVybiB0aGlzLm1vZGVsLnRyYWluT25CYXRjaChlLHQpfXN0YXRpYyBmcm9tQ29uZmlnKGUsdCxzPXt9LHI9ITEpe2xldCBvLGk9e307aWYodCBpbnN0YW5jZW9mIEFycmF5KXtpZih0WzBdLmNsYXNzTmFtZT09bnVsbHx8dFswXS5jbGFzc05hbWU9PT0iTWVyZ2UiKXRocm93IG5ldyBlZSgiTGVnYWN5IHNlcmlhbGl6YXRpb24gZm9ybWF0IG5vdCBzdXBwb3J0ZWQgeWV0LiIpO289dH1lbHNlIEEodC5sYXllcnMhPW51bGwsKCk9PiJXaGVuIHRoZSBjb25maWcgZGF0YSBmb3IgYSBTZXF1ZW50aWFsIG1vZGVsIGlzIG5vdCBhbiBBcnJheSwgaXQgbXVzdCBiZSBhbiBPYmplY3QgdGhhdCBjb250YWlucyB0aGUgJ2xheWVycycgZmllbGQuIiksbz10LmxheWVycyxkZWxldGUgdC5sYXllcnMsaT10O2NvbnN0IGE9bmV3IGUoaSk7aWYoIShhIGluc3RhbmNlb2YgcWMpKXRocm93IG5ldyBLZShgU2VxdWVudGlhbC5mcm9tQ29uZmlnIGNhbGxlZCBvbiBub24tU2VxdWVudGlhbCBpbnB1dDogJHthfWApO2Zvcihjb25zdCBsIG9mIG8pe2NvbnN0IGg9bW8obCx2b2lkIDAscik7ciYmaC5zZXRGYXN0V2VpZ2h0SW5pdER1cmluZ0J1aWxkKCEwKSxhLmFkZChoKX1yZXR1cm4gYX1zZXQgc3RvcFRyYWluaW5nKGUpe2lmKHRoaXMubW9kZWw9PW51bGwpdGhyb3cgbmV3IGVlKCJDYW5ub3Qgc2V0IHRoZSBzdG9wVHJhaW5pbmcgcHJvcGVydHkgb2YgYSBzZXF1ZW50aWFsIG1vZGVsIGJlZm9yZSBpdCBpcyBjb21waWxlZC4iKTt0aGlzLm1vZGVsLnN0b3BUcmFpbmluZz1lfWdldCBzdG9wVHJhaW5pbmcoKXtpZih0aGlzLm1vZGVsPT1udWxsKXRocm93IG5ldyBlZSgiQ2Fubm90IGdldCB0aGUgc3RvcFRyYWluaW5nIHByb3BlcnR5IG9mIGEgc2VxdWVudGlhbCBtb2RlbCBiZWZvcmUgaXQgaXMgY29tcGlsZWQuIik7cmV0dXJuIHRoaXMubW9kZWwuc3RvcFRyYWluaW5nfWdldENvbmZpZygpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2YgdGhpcy5sYXllcnMpe2NvbnN0IHM9e307cy5jbGFzc05hbWU9dC5nZXRDbGFzc05hbWUoKSxzLmNvbmZpZz10LmdldENvbmZpZygpLGUucHVzaChzKX1yZXR1cm57bmFtZTp0aGlzLm5hbWUsbGF5ZXJzOmV9fX1xYy5jbGFzc05hbWU9IlNlcXVlbnRpYWwiO2dlKHFjKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9sZXQgRm49Y2xhc3MgZXh0ZW5kcyAkYXtnZXRDb25maWcoKXtyZXR1cm57fX19O2NsYXNzIHdUIGV4dGVuZHMgRm57YXBwbHkoZSx0PTEpe3JldHVybiBVVShlLHQpfX13VC5jbGFzc05hbWU9ImVsdSI7Z2Uod1QpO2NsYXNzIHZUIGV4dGVuZHMgRm57YXBwbHkoZSl7cmV0dXJuIENnKGUpfX12VC5jbGFzc05hbWU9InNlbHUiO2dlKHZUKTtjbGFzcyBTVCBleHRlbmRzIEZue2FwcGx5KGUpe3JldHVybiBJcihlKX19U1QuY2xhc3NOYW1lPSJyZWx1IjtnZShTVCk7Y2xhc3MgTlQgZXh0ZW5kcyBGbnthcHBseShlKXtyZXR1cm4gcmUoKCk9PmNpKDYsSXIoZSkpKX19TlQuY2xhc3NOYW1lPSJyZWx1NiI7Z2UoTlQpO2NsYXNzIGtUIGV4dGVuZHMgRm57YXBwbHkoZSl7cmV0dXJuIGV9fWtULmNsYXNzTmFtZT0ibGluZWFyIjtnZShrVCk7Y2xhc3MgQ1QgZXh0ZW5kcyBGbnthcHBseShlKXtyZXR1cm4gd3IoZSl9fUNULmNsYXNzTmFtZT0ic2lnbW9pZCI7Z2UoQ1QpO2NsYXNzICRUIGV4dGVuZHMgRm57YXBwbHkoZSl7cmV0dXJuIEdVKGUpfX0kVC5jbGFzc05hbWU9ImhhcmRTaWdtb2lkIjtnZSgkVCk7Y2xhc3MgSVQgZXh0ZW5kcyBGbnthcHBseShlKXtyZXR1cm4ga2EoZSl9fUlULmNsYXNzTmFtZT0ic29mdHBsdXMiO2dlKElUKTtjbGFzcyBUVCBleHRlbmRzIEZue2FwcGx5KGUpe3JldHVybiBqVShlKX19VFQuY2xhc3NOYW1lPSJzb2Z0c2lnbiI7Z2UoVFQpO2NsYXNzIEVUIGV4dGVuZHMgRm57YXBwbHkoZSl7cmV0dXJuIHVpKGUpfX1FVC5jbGFzc05hbWU9InRhbmgiO2dlKEVUKTtsZXQganc9Y2xhc3MgZXh0ZW5kcyBGbnthcHBseShlLHQ9LTEpe3JldHVybiBiaChlLHQpfX07ancuY2xhc3NOYW1lPSJzb2Z0bWF4IjtnZShqdyk7Y2xhc3MgUlQgZXh0ZW5kcyBGbnthcHBseShlLHQ9LTEpe3JldHVybiB5ZyhlLHQpfX1SVC5jbGFzc05hbWU9ImxvZ1NvZnRtYXgiO2dlKFJUKTtjbGFzcyBEVCBleHRlbmRzIEZue2FwcGx5KGUpe3JldHVybiByZSgoKT0+cmUoKCk9Pntjb25zdCB0PU1hdGguc3FydCgyKSxzPVgoLjUsbWUoMSxmZyhPZShlLHQpKSkpO3JldHVybiBYKGUscyl9KSl9fURULmNsYXNzTmFtZT0iZ2VsdSI7Z2UoRFQpO2NsYXNzIEFUIGV4dGVuZHMgRm57YXBwbHkoZSl7cmV0dXJuIHJlKCgpPT5YKC41LFgoZSxtZSgxLHVpKFgocG4oT2UoMixNYXRoLlBJKSksbWUoZSxYKC4wNDQ3MTUscXIoZSwzKSkpKSkpKSkpfX1BVC5jbGFzc05hbWU9ImdlbHVfbmV3IjtnZShBVCk7Y2xhc3MgX1QgZXh0ZW5kcyBGbnthcHBseShlKXtyZXR1cm4gcmUoKCk9PlgoZSx1aShrYShlKSkpKX19X1QuY2xhc3NOYW1lPSJtaXNoIjtnZShfVCk7Y2xhc3MgT1QgZXh0ZW5kcyBGbnthcHBseShlLHQ9MSl7cmV0dXJuIHJlKCgpPT5YKHdyKFgoZSx0KSksZSkpfX1PVC5jbGFzc05hbWU9InN3aXNoIjtnZShPVCk7ZnVuY3Rpb24gaGkobil7cmV0dXJuIG4uZ2V0Q2xhc3NOYW1lKCl9ZnVuY3Rpb24gdjAobixlPXt9KXtyZXR1cm4gQ2gobixBcy5nZXRNYXAoKS5jbGFzc05hbWVNYXAsZSwiYWN0aXZhdGlvbiIpfWZ1bmN0aW9uIHBpKG4pe2lmKG49PW51bGwpe2NvbnN0IGU9e307cmV0dXJuIGUuY2xhc3NOYW1lPSJsaW5lYXIiLGUuY29uZmlnPXt9LHYwKGUpfWlmKHR5cGVvZiBuPT0ic3RyaW5nIil7Y29uc3QgZT17fTtyZXR1cm4gZS5jbGFzc05hbWU9bixlLmNvbmZpZz17fSx2MChlKX1lbHNlIHJldHVybiBuIGluc3RhbmNlb2YgRm4/bjp2MChuKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiByRyhuKXtpZihuIT1udWxsJiZ0eXBlb2YgbiE9Im9iamVjdCIpdGhyb3cgbmV3IEVycm9yKGBBcmd1bWVudCB0byBMMUwyIHJlZ3VsYXJpemVyJ3MgY29uc3RydWN0b3IgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gb2JqZWN0LCBidXQgcmVjZWl2ZWQ6ICR7bn1gKX1jbGFzcyBGVCBleHRlbmRzICRhe31jbGFzcyBMVCBleHRlbmRzIEZUe2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksckcoZSksdGhpcy5sMT1lPT1udWxsfHxlLmwxPT1udWxsPy4wMTplLmwxLHRoaXMubDI9ZT09bnVsbHx8ZS5sMj09bnVsbD8uMDE6ZS5sMix0aGlzLmhhc0wxPXRoaXMubDEhPT0wLHRoaXMuaGFzTDI9dGhpcy5sMiE9PTB9YXBwbHkoZSl7cmV0dXJuIHJlKCgpPT57bGV0IHQ9WXQoWzFdKTtyZXR1cm4gdGhpcy5oYXNMMSYmKHQ9bWUodCxSZShYKHRoaXMubDEsWHQoZSkpKSkpLHRoaXMuaGFzTDImJih0PW1lKHQsUmUoWCh0aGlzLmwyLEloKGUpKSkpKSxKKHQsW10pfSl9Z2V0Q29uZmlnKCl7cmV0dXJue2wxOnRoaXMubDEsbDI6dGhpcy5sMn19c3RhdGljIGZyb21Db25maWcoZSx0KXtyZXR1cm4gbmV3IGUoe2wxOnQubDEsbDI6dC5sMn0pfX1MVC5jbGFzc05hbWU9IkwxTDIiO2dlKExUKTtjb25zdCBpQz17bDFsMjoiTDFMMiJ9O2Z1bmN0aW9uIHZ0KG4pe3JldHVybiBSdyhuKX1mdW5jdGlvbiBhQyhuLGU9e30pe3JldHVybiBDaChuLEFzLmdldE1hcCgpLmNsYXNzTmFtZU1hcCxlLCJyZWd1bGFyaXplciIpfWZ1bmN0aW9uIEV0KG4pe2lmKG49PW51bGwpcmV0dXJuIG51bGw7aWYodHlwZW9mIG49PSJzdHJpbmciKXtjb25zdCB0PXtjbGFzc05hbWU6biBpbiBpQz9pQ1tuXTpuLGNvbmZpZzp7fX07cmV0dXJuIGFDKHQpfWVsc2UgcmV0dXJuIG4gaW5zdGFuY2VvZiBGVD9uOmFDKG4pfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIFBUIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZT8/e30pLHRoaXMuc3VwcG9ydHNNYXNraW5nPSEwLGUhPW51bGwmJih0aGlzLm1heFZhbHVlPWUubWF4VmFsdWUpfWNhbGwoZSx0KXtlPWplKGUpO2xldCBzPUlyKGUpO3JldHVybiB0aGlzLm1heFZhbHVlIT1udWxsJiYocz1zcyhzLDAsdGhpcy5tYXhWYWx1ZSkpLHN9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe3JldHVybiBlfWdldENvbmZpZygpe2NvbnN0IGU9e21heFZhbHVlOnRoaXMubWF4VmFsdWV9LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfX1QVC5jbGFzc05hbWU9IlJlTFUiO2dlKFBUKTtjbGFzcyB6VCBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGU/P3t9KSx0aGlzLkRFRkFVTFRfQUxQSEE9LjMsZT09bnVsbCYmKGU9e30pLHRoaXMuYWxwaGE9ZS5hbHBoYT09bnVsbD90aGlzLkRFRkFVTFRfQUxQSEE6ZS5hbHBoYX1jYWxsKGUsdCl7Y29uc3Qgcz1qZShlKTtyZXR1cm4gdWgocyx0aGlzLmFscGhhKX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7cmV0dXJuIGV9Z2V0Q29uZmlnKCl7Y29uc3QgZT17YWxwaGE6dGhpcy5hbHBoYX0sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9fXpULmNsYXNzTmFtZT0iTGVha3lSZUxVIjtnZSh6VCk7Y2xhc3MgTVQgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtpZihzdXBlcihlPz97fSksdGhpcy5ERUZBVUxUX0FMUEhBX0lOSVRJQUxJWkVSPSJ6ZXJvcyIsZT09bnVsbCYmKGU9e30pLHRoaXMuc3VwcG9ydHNNYXNraW5nPSEwLHRoaXMuYWxwaGFJbml0aWFsaXplcj1UdChlLmFscGhhSW5pdGlhbGl6ZXJ8fHRoaXMuREVGQVVMVF9BTFBIQV9JTklUSUFMSVpFUiksdGhpcy5hbHBoYVJlZ3VsYXJpemVyPUV0KGUuYWxwaGFSZWd1bGFyaXplciksdGhpcy5hbHBoYUNvbnN0cmFpbnQ9cm4oZS5hbHBoYUNvbnN0cmFpbnQpLGUuc2hhcmVkQXhlcz09bnVsbCl0aGlzLnNoYXJlZEF4ZXM9bnVsbDtlbHNlIGlmKEFycmF5LmlzQXJyYXkoZS5zaGFyZWRBeGVzKSl0aGlzLnNoYXJlZEF4ZXM9ZS5zaGFyZWRBeGVzO2Vsc2UgaWYodHlwZW9mIGUuc2hhcmVkQXhlcz09Im51bWJlciIpdGhpcy5zaGFyZWRBeGVzPVtlLnNoYXJlZEF4ZXNdO2Vsc2UgdGhyb3cgbmV3IGVlKGBFeHBlY3RlZCBzaGFyZWRBeGVzIHRvIGJlIGEgbnVtYmVyIG9yIGFuIGFycmF5IG9mIG51bWJlcnMsIGJ1dCBnb3QgJHtlLnNoYXJlZEF4ZXN9YCl9YnVpbGQoZSl7ZT1hdChlKTtjb25zdCB0PWUuc2xpY2UoMSk7aWYodGhpcy5zaGFyZWRBeGVzIT1udWxsKWZvcihjb25zdCByIG9mIHRoaXMuc2hhcmVkQXhlcyl0W3ItMV09MTt0aGlzLmFscGhhPXRoaXMuYWRkV2VpZ2h0KCJhbHBoYSIsdCwiZmxvYXQzMiIsdGhpcy5hbHBoYUluaXRpYWxpemVyLHRoaXMuYWxwaGFSZWd1bGFyaXplciwhMCx0aGlzLmFscGhhQ29uc3RyYWludCk7Y29uc3Qgcz17fTtpZih0aGlzLnNoYXJlZEF4ZXMhPW51bGwpZm9yKGxldCByPTE7cjxlLmxlbmd0aDsrK3Ipc1tyXT1lW3JdO3RoaXMuaW5wdXRTcGVjPVtuZXcgbm4oe25kaW06ZS5sZW5ndGgsYXhlczpzfSldLHRoaXMuYnVpbHQ9ITB9Y2FsbChlLHQpe3JldHVybiBlPWplKGUpLGdoKGUsdGhpcy5hbHBoYS5yZWFkKCkpfWdldENvbmZpZygpe2NvbnN0IGU9e2FscGhhSW5pdGlhbGl6ZXI6T3QodGhpcy5hbHBoYUluaXRpYWxpemVyKSxhbHBoYVJlZ3VsYXJpemVyOnZ0KHRoaXMuYWxwaGFSZWd1bGFyaXplciksYWxwaGFDb25zdHJhaW50OnNuKHRoaXMuYWxwaGFDb25zdHJhaW50KSxzaGFyZWRBeGVzOnRoaXMuc2hhcmVkQXhlc30sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9fU1ULmNsYXNzTmFtZT0iUFJlTFUiO2dlKE1UKTtsZXQgQlQ9Y2xhc3MgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtpZihzdXBlcihlPz97fSksdGhpcy5ERUZBVUxUX0FMUEhBPTEsZT09bnVsbCYmKGU9e30pLGUuYWxwaGEhPW51bGwmJmUuYWxwaGEhPT10aGlzLkRFRkFVTFRfQUxQSEEpdGhyb3cgbmV3IEtlKGBOb24tZGVmYXVsdCBhbHBoYSB2YWx1ZSAoJHtlLmFscGhhfSkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgRUxVIGxheWVyIHlldC5gKTt0aGlzLmFscGhhPWUuYWxwaGE9PW51bGw/dGhpcy5ERUZBVUxUX0FMUEhBOmUuYWxwaGF9Y2FsbChlLHQpe2NvbnN0IHM9amUoZSk7cmV0dXJuIGt1KHMpfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtyZXR1cm4gZX1nZXRDb25maWcoKXtjb25zdCBlPXthbHBoYTp0aGlzLmFscGhhfSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19O0JULmNsYXNzTmFtZT0iRUxVIjtnZShCVCk7Y2xhc3MgVlQgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlPz97fSksdGhpcy5ERUZBVUxUX1RIRVRBPTEsZT09bnVsbCYmKGU9e30pLHRoaXMudGhldGE9ZS50aGV0YT09bnVsbD90aGlzLkRFRkFVTFRfVEhFVEE6ZS50aGV0YX1jYWxsKGUsdCl7Y29uc3Qgcz1qZShlKTtyZXR1cm4gWChzLE5lKGFzKHMsdGhpcy50aGV0YSksImZsb2F0MzIiKSl9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe3JldHVybiBlfWdldENvbmZpZygpe2NvbnN0IGU9e3RoZXRhOnRoaXMudGhldGF9LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfX1WVC5jbGFzc05hbWU9IlRocmVzaG9sZGVkUmVMVSI7Z2UoVlQpO2NsYXNzIFdUIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZT8/e30pLHRoaXMuREVGQVVMVF9BWElTPTEsZT09bnVsbCYmKGU9e30pLHRoaXMuc29mdG1heD1uZXcgancoKS5hcHBseSx0aGlzLmF4aXM9ZS5heGlzPT1udWxsP3RoaXMuREVGQVVMVF9BWElTOmUuYXhpc31jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57bGV0IHM9amUoZSk7Y29uc3Qgcj10Lm1hc2s7aWYociE9bnVsbCl7Y29uc3Qgbz1YKEllKEpuKHMuc2hhcGUpLE5lKHIscy5kdHlwZSkpLE1lKC0xZTkpKTtzPW1lKHMsbyl9cmV0dXJuIHRoaXMuYXhpcyBpbnN0YW5jZW9mIEFycmF5P3RoaXMuYXhpcy5sZW5ndGg+MT9ycyhJZShzLGRoKHMsdGhpcy5heGlzLCEwKSkpOnRoaXMuc29mdG1heChzLHRoaXMuYXhpc1swXSk6dGhpcy5zb2Z0bWF4KHMsdGhpcy5heGlzKX0pfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtyZXR1cm4gZX1nZXRDb25maWcoKXtjb25zdCBlPXtheGlzOnRoaXMuYXhpc30sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9fVdULmNsYXNzTmFtZT0iU29mdG1heCI7Z2UoV1QpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGhsKG4sZSx0KXtpZih0eXBlb2Ygbj09Im51bWJlciIpcmV0dXJuIGZhKG4sZSk7aWYobi5sZW5ndGghPT1lKXRocm93IG5ldyBlZShgVGhlICR7dH0gYXJndW1lbnQgbXVzdCBiZSBhbiBpbnRlZ2VyIG9yIHR1cGxlIG9mICR7ZX0gaW50ZWdlcnMuIFJlY2VpdmVkOiAke24ubGVuZ3RofSBlbGVtZW50cy5gKTtmb3IobGV0IHM9MDtzPGU7KytzKXtjb25zdCByPW5bc107aWYoIU1VKHIpKXRocm93IG5ldyBlZShgVGhlICR7dH0gYXJndW1lbnQgbXVzdCBiZSBhbiBpbnRlZ2VyIG9yIHR1cGxlIG9mICR7ZX0gaW50ZWdlcnMuIFJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KG4pfSBpbmNsdWRpbmcgYSBub24taW50ZWdlciBudW1iZXIgJHtyfWApfXJldHVybiBufWZ1bmN0aW9uIHZyKG4sZSx0LHMscj0xKXtpZihuPT1udWxsKXJldHVybiBuO2NvbnN0IG89ZSsoZS0xKSooci0xKTtsZXQgaTtyZXR1cm4gdD09PSJzYW1lIj9pPW46aT1uLW8rMSxNYXRoLmZsb29yKChpK3MtMSkvcyl9ZnVuY3Rpb24gUHIobixlLHQscyl7aWYobj09bnVsbClyZXR1cm4gbnVsbDtpZihzPT09InZhbGlkIiluPW4qZStkaShbdC1lLDBdKTtlbHNlIGlmKHM9PT0ic2FtZSIpbj1uKmU7ZWxzZSB0aHJvdyBuZXcgZWUoYFVuc3VwcG9ydCBwYWRkaW5nIG1vZGU6ICR7c30uYCk7cmV0dXJuIG59LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gR3cobixlKXtyZXR1cm4gcmUoKCk9PihHdChlKSxlPT09ImNoYW5uZWxzRmlyc3QiP3R0KG4sWzAsMiwzLDFdKTpuKSl9ZnVuY3Rpb24gVVQobixlKXtyZXR1cm4gcmUoKCk9PihHdChlKSxlPT09ImNoYW5uZWxzRmlyc3QiP3R0KG4sWzAsMiwzLDQsMV0pOm4pKX1mdW5jdGlvbiBvRyhuLGUsdCxzPTEscj0idmFsaWQiLG8saT0xKXtyZXR1cm4gcmUoKCk9PntpZihvPT1udWxsJiYobz1rcigpKSxHdChvKSxuLnNoYXBlLmxlbmd0aCE9PTMpdGhyb3cgbmV3IGVlKGBUaGUgaW5wdXQgb2YgYSBjb252MWRXaXRoQmlhcyBvcGVyYXRpb24gc2hvdWxkIGJlIDMsIGJ1dCBpcyAke24uc2hhcGUubGVuZ3RofSBpbnN0ZWFkLmApO2lmKGUuc2hhcGUubGVuZ3RoIT09Myl0aHJvdyBuZXcgZWUoYFRoZSBrZXJuZWwgZm9yIGEgY29udjFkV2l0aEJpYXMgb3BlcmF0aW9uIHNob3VsZCBiZSAzLCBidXQgaXMgJHtlLnNoYXBlLmxlbmd0aH0gaW5zdGVhZGApO2lmKHQhPW51bGwmJnQuc2hhcGUubGVuZ3RoIT09MSl0aHJvdyBuZXcgZWUoYFRoZSBiaWFzIGZvciBhIGNvbnYxZFdpdGhCaWFzIG9wZXJhdGlvbiBzaG91bGQgYmUgMSwgYnV0IGlzICR7dC5zaGFwZS5sZW5ndGh9IGluc3RlYWRgKTtpZihvPT09ImNoYW5uZWxzRmlyc3QiJiYobj10dChuLFswLDIsMV0pKSxyPT09ImNhdXNhbCIpdGhyb3cgbmV3IEtlKCJUaGUgc3VwcG9ydCBmb3IgQ0FVU0FMIHBhZGRpbmcgbW9kZSBpbiBjb252MWRXaXRoQmlhcyBpcyBub3QgaW1wbGVtZW50ZWQgeWV0LiIpO2xldCBhPWNnKG4sZSxzLHI9PT0ic2FtZSI/InNhbWUiOiJ2YWxpZCIsIk5XQyIsaSk7cmV0dXJuIHQhPW51bGwmJihhPVRyKGEsdCkpLGF9KX1mdW5jdGlvbiBsQyhuLGUsdCxzPVsxLDFdLHI9InZhbGlkIixvLGksYT1udWxsKXtyZXR1cm4gcmUoKCk9PntpZihvPT1udWxsJiYobz1rcigpKSxHdChvKSxuLnJhbmshPT0zJiZuLnJhbmshPT00KXRocm93IG5ldyBlZShgY29udjJkV2l0aEJpYXNBY3RpdmF0aW9uIGV4cGVjdHMgaW5wdXQgdG8gYmUgb2YgcmFuayAzIG9yIDQsIGJ1dCByZWNlaXZlZCAke24ucmFua30uYCk7aWYoZS5yYW5rIT09MyYmZS5yYW5rIT09NCl0aHJvdyBuZXcgZWUoYGNvbnYyZFdpdGhCaWFzQWN0aXZhdGlvbiBleHBlY3RzIGtlcm5lbCB0byBiZSBvZiByYW5rIDMgb3IgNCwgYnV0IHJlY2VpdmVkICR7bi5yYW5rfS5gKTtsZXQgbD1HdyhuLG8pO2lmKHI9PT0iY2F1c2FsIil0aHJvdyBuZXcgS2UoIlRoZSBzdXBwb3J0IGZvciBDQVVTQUwgcGFkZGluZyBtb2RlIGluIGNvbnYxZFdpdGhCaWFzIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQuIik7cmV0dXJuIGw9Rkkoe3g6bCxmaWx0ZXI6ZSxzdHJpZGVzOnMscGFkOnI9PT0ic2FtZSI/InNhbWUiOiJ2YWxpZCIsZGlsYXRpb25zOmksZGF0YUZvcm1hdDoiTkhXQyIsYmlhczp0LGFjdGl2YXRpb246YX0pLG89PT0iY2hhbm5lbHNGaXJzdCImJihsPXR0KGwsWzAsMywxLDJdKSksbH0pfWZ1bmN0aW9uIGlHKG4sZSx0LHM9WzEsMSwxXSxyPSJ2YWxpZCIsbyxpKXtyZXR1cm4gcmUoKCk9PntpZihvPT1udWxsJiYobz1rcigpKSxHdChvKSxuLnJhbmshPT00JiZuLnJhbmshPT01KXRocm93IG5ldyBlZShgY29udjNkV2l0aEJpYXMgZXhwZWN0cyBpbnB1dCB0byBiZSBvZiByYW5rIDQgb3IgNSwgYnV0IHJlY2VpdmVkICR7bi5yYW5rfS5gKTtpZihlLnJhbmshPT00JiZlLnJhbmshPT01KXRocm93IG5ldyBlZShgY29udjNkV2l0aEJpYXMgZXhwZWN0cyBrZXJuZWwgdG8gYmUgb2YgcmFuayA0IG9yIDUsIGJ1dCByZWNlaXZlZCAke24ucmFua30uYCk7bGV0IGE9VVQobixvKTtpZihyPT09ImNhdXNhbCIpdGhyb3cgbmV3IEtlKCJUaGUgc3VwcG9ydCBmb3IgQ0FVU0FMIHBhZGRpbmcgbW9kZSBpbiBjb252M2RXaXRoQmlhcyBpcyBub3QgaW1wbGVtZW50ZWQgeWV0LiIpO3JldHVybiBhPWRiKGEsZSxzLHI9PT0ic2FtZSI/InNhbWUiOiJ2YWxpZCIsIk5ESFdDIixpKSx0IT1udWxsJiYoYT1UcihhLHQpKSxvPT09ImNoYW5uZWxzRmlyc3QiJiYoYT10dChhLFswLDQsMSwyLDNdKSksYX0pfWNsYXNzIHR5IGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSx0KXtpZihzdXBlcih0KSx0aGlzLmJpYXM9bnVsbCx0aGlzLkRFRkFVTFRfS0VSTkVMX0lOSVRJQUxJWkVSPSJnbG9yb3ROb3JtYWwiLHRoaXMuREVGQVVMVF9CSUFTX0lOSVRJQUxJWkVSPSJ6ZXJvcyIsdHkudmVyaWZ5QXJncyh0KSx0aGlzLnJhbms9ZSxkbih0aGlzLnJhbmssInJhbmsiKSx0aGlzLnJhbmshPT0xJiZ0aGlzLnJhbmshPT0yJiZ0aGlzLnJhbmshPT0zKXRocm93IG5ldyBLZShgQ29udm9sdXRpb24gbGF5ZXIgZm9yIHJhbmsgb3RoZXIgdGhhbiAxLCAyLCBvciAzICgke3RoaXMucmFua30pIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQuYCk7aWYodGhpcy5rZXJuZWxTaXplPWhsKHQua2VybmVsU2l6ZSxlLCJrZXJuZWxTaXplIiksdGhpcy5zdHJpZGVzPWhsKHQuc3RyaWRlcz09bnVsbD8xOnQuc3RyaWRlcyxlLCJzdHJpZGVzIiksdGhpcy5wYWRkaW5nPXQucGFkZGluZz09bnVsbD8idmFsaWQiOnQucGFkZGluZyxNcyh0aGlzLnBhZGRpbmcpLHRoaXMuZGF0YUZvcm1hdD10LmRhdGFGb3JtYXQ9PW51bGw/ImNoYW5uZWxzTGFzdCI6dC5kYXRhRm9ybWF0LEd0KHRoaXMuZGF0YUZvcm1hdCksdGhpcy5hY3RpdmF0aW9uPXBpKHQuYWN0aXZhdGlvbiksdGhpcy51c2VCaWFzPXQudXNlQmlhcz09bnVsbD8hMDp0LnVzZUJpYXMsdGhpcy5iaWFzSW5pdGlhbGl6ZXI9VHQodC5iaWFzSW5pdGlhbGl6ZXJ8fHRoaXMuREVGQVVMVF9CSUFTX0lOSVRJQUxJWkVSKSx0aGlzLmJpYXNDb25zdHJhaW50PXJuKHQuYmlhc0NvbnN0cmFpbnQpLHRoaXMuYmlhc1JlZ3VsYXJpemVyPUV0KHQuYmlhc1JlZ3VsYXJpemVyKSx0aGlzLmFjdGl2aXR5UmVndWxhcml6ZXI9RXQodC5hY3Rpdml0eVJlZ3VsYXJpemVyKSx0aGlzLmRpbGF0aW9uUmF0ZT1obCh0LmRpbGF0aW9uUmF0ZT09bnVsbD8xOnQuZGlsYXRpb25SYXRlLGUsImRpbGF0aW9uUmF0ZSIpLHRoaXMucmFuaz09PTEmJkFycmF5LmlzQXJyYXkodGhpcy5kaWxhdGlvblJhdGUpJiZ0aGlzLmRpbGF0aW9uUmF0ZS5sZW5ndGghPT0xKXRocm93IG5ldyBlZShgZGlsYXRpb25SYXRlIG11c3QgYmUgYSBudW1iZXIgb3IgYW4gYXJyYXkgb2YgYSBzaW5nbGUgbnVtYmVyIGZvciAxRCBjb252b2x1dGlvbiwgYnV0IHJlY2VpdmVkICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kaWxhdGlvblJhdGUpfWApO2lmKHRoaXMucmFuaz09PTIpe2lmKHR5cGVvZiB0aGlzLmRpbGF0aW9uUmF0ZT09Im51bWJlciIpdGhpcy5kaWxhdGlvblJhdGU9W3RoaXMuZGlsYXRpb25SYXRlLHRoaXMuZGlsYXRpb25SYXRlXTtlbHNlIGlmKHRoaXMuZGlsYXRpb25SYXRlLmxlbmd0aCE9PTIpdGhyb3cgbmV3IGVlKGBkaWxhdGlvblJhdGUgbXVzdCBiZSBhIG51bWJlciBvciBhcnJheSBvZiB0d28gbnVtYmVycyBmb3IgMkQgY29udm9sdXRpb24sIGJ1dCByZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGlsYXRpb25SYXRlKX1gKX1lbHNlIGlmKHRoaXMucmFuaz09PTMpe2lmKHR5cGVvZiB0aGlzLmRpbGF0aW9uUmF0ZT09Im51bWJlciIpdGhpcy5kaWxhdGlvblJhdGU9W3RoaXMuZGlsYXRpb25SYXRlLHRoaXMuZGlsYXRpb25SYXRlLHRoaXMuZGlsYXRpb25SYXRlXTtlbHNlIGlmKHRoaXMuZGlsYXRpb25SYXRlLmxlbmd0aCE9PTMpdGhyb3cgbmV3IGVlKGBkaWxhdGlvblJhdGUgbXVzdCBiZSBhIG51bWJlciBvciBhcnJheSBvZiB0aHJlZSBudW1iZXJzIGZvciAzRCBjb252b2x1dGlvbiwgYnV0IHJlY2VpdmVkICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kaWxhdGlvblJhdGUpfWApfX1zdGF0aWMgdmVyaWZ5QXJncyhlKXtpZihMcigia2VybmVsU2l6ZSJpbiBlLCJyZXF1aXJlZCBrZXkgJ2tlcm5lbFNpemUnIG5vdCBpbiBjb25maWciKSx0eXBlb2YgZS5rZXJuZWxTaXplIT0ibnVtYmVyIiYmIUR3KGUua2VybmVsU2l6ZSwibnVtYmVyIiwxLDMpKXRocm93IG5ldyBlZShgQmFzZUNvbnYgZXhwZWN0cyBjb25maWcua2VybmVsU2l6ZSB0byBiZSBudW1iZXIgb3IgbnVtYmVyW10gd2l0aCBsZW5ndGggMSwgMiwgb3IgMywgYnV0IHJlY2VpdmVkICR7SlNPTi5zdHJpbmdpZnkoZS5rZXJuZWxTaXplKX0uYCl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17a2VybmVsU2l6ZTp0aGlzLmtlcm5lbFNpemUsc3RyaWRlczp0aGlzLnN0cmlkZXMscGFkZGluZzp0aGlzLnBhZGRpbmcsZGF0YUZvcm1hdDp0aGlzLmRhdGFGb3JtYXQsZGlsYXRpb25SYXRlOnRoaXMuZGlsYXRpb25SYXRlLGFjdGl2YXRpb246aGkodGhpcy5hY3RpdmF0aW9uKSx1c2VCaWFzOnRoaXMudXNlQmlhcyxiaWFzSW5pdGlhbGl6ZXI6T3QodGhpcy5iaWFzSW5pdGlhbGl6ZXIpLGJpYXNSZWd1bGFyaXplcjp2dCh0aGlzLmJpYXNSZWd1bGFyaXplciksYWN0aXZpdHlSZWd1bGFyaXplcjp2dCh0aGlzLmFjdGl2aXR5UmVndWxhcml6ZXIpLGJpYXNDb25zdHJhaW50OnNuKHRoaXMuYmlhc0NvbnN0cmFpbnQpfSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19Y2xhc3MgRXUgZXh0ZW5kcyB0eXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsdCksdGhpcy5rZXJuZWw9bnVsbCxFdS52ZXJpZnlBcmdzKHQpLHRoaXMuZmlsdGVycz10LmZpbHRlcnMsZG4odGhpcy5maWx0ZXJzLCJmaWx0ZXJzIiksdGhpcy5rZXJuZWxJbml0aWFsaXplcj1UdCh0Lmtlcm5lbEluaXRpYWxpemVyfHx0aGlzLkRFRkFVTFRfS0VSTkVMX0lOSVRJQUxJWkVSKSx0aGlzLmtlcm5lbENvbnN0cmFpbnQ9cm4odC5rZXJuZWxDb25zdHJhaW50KSx0aGlzLmtlcm5lbFJlZ3VsYXJpemVyPUV0KHQua2VybmVsUmVndWxhcml6ZXIpfWJ1aWxkKGUpe2U9YXQoZSk7Y29uc3QgdD10aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCI/MTplLmxlbmd0aC0xO2lmKGVbdF09PW51bGwpdGhyb3cgbmV3IGVlKGBUaGUgY2hhbm5lbCBkaW1lbnNpb24gb2YgdGhlIGlucHV0IHNob3VsZCBiZSBkZWZpbmVkLiBGb3VuZCAke2VbdF19YCk7Y29uc3Qgcz1lW3RdLHI9dGhpcy5rZXJuZWxTaXplLmNvbmNhdChbcyx0aGlzLmZpbHRlcnNdKTt0aGlzLmtlcm5lbD10aGlzLmFkZFdlaWdodCgia2VybmVsIixyLG51bGwsdGhpcy5rZXJuZWxJbml0aWFsaXplcix0aGlzLmtlcm5lbFJlZ3VsYXJpemVyLCEwLHRoaXMua2VybmVsQ29uc3RyYWludCksdGhpcy51c2VCaWFzJiYodGhpcy5iaWFzPXRoaXMuYWRkV2VpZ2h0KCJiaWFzIixbdGhpcy5maWx0ZXJzXSxudWxsLHRoaXMuYmlhc0luaXRpYWxpemVyLHRoaXMuYmlhc1JlZ3VsYXJpemVyLCEwLHRoaXMuYmlhc0NvbnN0cmFpbnQpKSx0aGlzLmlucHV0U3BlYz1be25kaW06dGhpcy5yYW5rKzIsYXhlczp7W3RdOnN9fV0sdGhpcy5idWlsdD0hMH1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57ZT1qZShlKTtsZXQgcztjb25zdCByPXRoaXMuYmlhcz09bnVsbD9udWxsOnRoaXMuYmlhcy5yZWFkKCksbz1NMih0aGlzLmFjdGl2YXRpb24uZ2V0Q2xhc3NOYW1lKCkpO2lmKG8hPW51bGwmJnRoaXMucmFuaz09PTIpcz1sQyhlLHRoaXMua2VybmVsLnJlYWQoKSxyLHRoaXMuc3RyaWRlcyx0aGlzLnBhZGRpbmcsdGhpcy5kYXRhRm9ybWF0LHRoaXMuZGlsYXRpb25SYXRlLG8pO2Vsc2V7aWYodGhpcy5yYW5rPT09MSlzPW9HKGUsdGhpcy5rZXJuZWwucmVhZCgpLHIsdGhpcy5zdHJpZGVzWzBdLHRoaXMucGFkZGluZyx0aGlzLmRhdGFGb3JtYXQsdGhpcy5kaWxhdGlvblJhdGVbMF0pO2Vsc2UgaWYodGhpcy5yYW5rPT09MilzPWxDKGUsdGhpcy5rZXJuZWwucmVhZCgpLHIsdGhpcy5zdHJpZGVzLHRoaXMucGFkZGluZyx0aGlzLmRhdGFGb3JtYXQsdGhpcy5kaWxhdGlvblJhdGUpO2Vsc2UgaWYodGhpcy5yYW5rPT09MylzPWlHKGUsdGhpcy5rZXJuZWwucmVhZCgpLHIsdGhpcy5zdHJpZGVzLHRoaXMucGFkZGluZyx0aGlzLmRhdGFGb3JtYXQsdGhpcy5kaWxhdGlvblJhdGUpO2Vsc2UgdGhyb3cgbmV3IEtlKCJjb252b2x1dGlvbnMgZ3JlYXRlciB0aGFuIDNEIGFyZSBub3QgaW1wbGVtZW50ZWQgeWV0LiIpO3RoaXMuYWN0aXZhdGlvbiE9bnVsbCYmKHM9dGhpcy5hY3RpdmF0aW9uLmFwcGx5KHMpKX1yZXR1cm4gc30pfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtlPWF0KGUpO2NvbnN0IHQ9W10scz10aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNMYXN0Ij9lLnNsaWNlKDEsZS5sZW5ndGgtMSk6ZS5zbGljZSgyKTtmb3IobGV0IG89MDtvPHMubGVuZ3RoOysrbyl7Y29uc3QgaT12cihzW29dLHRoaXMua2VybmVsU2l6ZVtvXSx0aGlzLnBhZGRpbmcsdGhpcy5zdHJpZGVzW29dLHR5cGVvZiB0aGlzLmRpbGF0aW9uUmF0ZT09Im51bWJlciI/dGhpcy5kaWxhdGlvblJhdGU6dGhpcy5kaWxhdGlvblJhdGVbb10pO3QucHVzaChpKX1sZXQgcj1bZVswXV07cmV0dXJuIHRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0xhc3QiPyhyPXIuY29uY2F0KHQpLHIucHVzaCh0aGlzLmZpbHRlcnMpKTooci5wdXNoKHRoaXMuZmlsdGVycykscj1yLmNvbmNhdCh0KSkscn1nZXRDb25maWcoKXtjb25zdCBlPXtmaWx0ZXJzOnRoaXMuZmlsdGVycyxrZXJuZWxJbml0aWFsaXplcjpPdCh0aGlzLmtlcm5lbEluaXRpYWxpemVyKSxrZXJuZWxSZWd1bGFyaXplcjp2dCh0aGlzLmtlcm5lbFJlZ3VsYXJpemVyKSxrZXJuZWxDb25zdHJhaW50OnNuKHRoaXMua2VybmVsQ29uc3RyYWludCl9LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfXN0YXRpYyB2ZXJpZnlBcmdzKGUpe2lmKCEoImZpbHRlcnMiaW4gZSl8fHR5cGVvZiBlLmZpbHRlcnMhPSJudW1iZXIifHxlLmZpbHRlcnM8MSl0aHJvdyBuZXcgZWUoYENvbnZvbHV0aW9uIGxheWVyIGV4cGVjdGVkIGNvbmZpZy5maWx0ZXJzIHRvIGJlIGEgJ251bWJlcicgPiAwIGJ1dCBnb3QgJHtKU09OLnN0cmluZ2lmeShlLmZpbHRlcnMpfWApfX1jbGFzcyBEaCBleHRlbmRzIEV1e2NvbnN0cnVjdG9yKGUpe3N1cGVyKDIsZSksRGgudmVyaWZ5QXJncyhlKX1nZXRDb25maWcoKXtjb25zdCBlPXN1cGVyLmdldENvbmZpZygpO3JldHVybiBkZWxldGUgZS5yYW5rLGV9c3RhdGljIHZlcmlmeUFyZ3MoZSl7aWYodHlwZW9mIGUua2VybmVsU2l6ZSE9Im51bWJlciImJiFEdyhlLmtlcm5lbFNpemUsIm51bWJlciIsMSwyKSl0aHJvdyBuZXcgZWUoYENvbnYyRCBleHBlY3RzIGNvbmZpZy5rZXJuZWxTaXplIHRvIGJlIG51bWJlciBvciBudW1iZXJbXSB3aXRoIGxlbmd0aCAxIG9yIDIsIGJ1dCByZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KGUua2VybmVsU2l6ZSl9LmApfX1EaC5jbGFzc05hbWU9IkNvbnYyRCI7Z2UoRGgpO2NsYXNzIEFoIGV4dGVuZHMgRXV7Y29uc3RydWN0b3IoZSl7c3VwZXIoMyxlKSxBaC52ZXJpZnlBcmdzKGUpfWdldENvbmZpZygpe2NvbnN0IGU9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIGRlbGV0ZSBlLnJhbmssZX1zdGF0aWMgdmVyaWZ5QXJncyhlKXtpZih0eXBlb2YgZS5rZXJuZWxTaXplIT0ibnVtYmVyIiYmIShBcnJheS5pc0FycmF5KGUua2VybmVsU2l6ZSkmJihlLmtlcm5lbFNpemUubGVuZ3RoPT09MXx8ZS5rZXJuZWxTaXplLmxlbmd0aD09PTMpKSl0aHJvdyBuZXcgZWUoYENvbnYzRCBleHBlY3RzIGNvbmZpZy5rZXJuZWxTaXplIHRvIGJlIG51bWJlciBvciBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGJ1dCByZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KGUua2VybmVsU2l6ZSl9LmApfX1BaC5jbGFzc05hbWU9IkNvbnYzRCI7Z2UoQWgpO2NsYXNzIGpUIGV4dGVuZHMgRGh7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoZSksdGhpcy5pbnB1dFNwZWM9W25ldyBubih7bmRpbTo0fSldLHRoaXMucGFkZGluZyE9PSJzYW1lIiYmdGhpcy5wYWRkaW5nIT09InZhbGlkIil0aHJvdyBuZXcgZWUoYENvbnYyRFRyYW5zcG9zZSBjdXJyZW50bHkgc3VwcG9ydHMgb25seSBwYWRkaW5nIG1vZGVzICdzYW1lJyBhbmQgJ3ZhbGlkJywgYnV0IHJlY2VpdmVkIHBhZGRpbmcgbW9kZSAke3RoaXMucGFkZGluZ31gKX1idWlsZChlKXtpZihlPWF0KGUpLGUubGVuZ3RoIT09NCl0aHJvdyBuZXcgZWUoIklucHV0IHNob3VsZCBoYXZlIHJhbmsgNDsgUmVjZWl2ZWQgaW5wdXQgc2hhcGU6ICIrSlNPTi5zdHJpbmdpZnkoZSkpO2NvbnN0IHQ9dGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiPzE6ZS5sZW5ndGgtMTtpZihlW3RdPT1udWxsKXRocm93IG5ldyBlZSgiVGhlIGNoYW5uZWwgZGltZW5zaW9uIG9mIHRoZSBpbnB1dHMgc2hvdWxkIGJlIGRlZmluZWQuIEZvdW5kIGBOb25lYC4iKTtjb25zdCBzPWVbdF0scj10aGlzLmtlcm5lbFNpemUuY29uY2F0KFt0aGlzLmZpbHRlcnMsc10pO3RoaXMua2VybmVsPXRoaXMuYWRkV2VpZ2h0KCJrZXJuZWwiLHIsImZsb2F0MzIiLHRoaXMua2VybmVsSW5pdGlhbGl6ZXIsdGhpcy5rZXJuZWxSZWd1bGFyaXplciwhMCx0aGlzLmtlcm5lbENvbnN0cmFpbnQpLHRoaXMudXNlQmlhcyYmKHRoaXMuYmlhcz10aGlzLmFkZFdlaWdodCgiYmlhcyIsW3RoaXMuZmlsdGVyc10sImZsb2F0MzIiLHRoaXMuYmlhc0luaXRpYWxpemVyLHRoaXMuYmlhc1JlZ3VsYXJpemVyLCEwLHRoaXMuYmlhc0NvbnN0cmFpbnQpKSx0aGlzLmlucHV0U3BlYz1bbmV3IG5uKHtuZGltOjQsYXhlczp7W3RdOnN9fSldLHRoaXMuYnVpbHQ9ITB9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2xldCBzPWplKGUpO2lmKHMuc2hhcGUubGVuZ3RoIT09NCl0aHJvdyBuZXcgZWUoYENvbnYyRFRyYW5zcG9zZS5jYWxsKCkgZXhwZWN0cyBpbnB1dCB0ZW5zb3IgdG8gYmUgcmFuay00LCBidXQgcmVjZWl2ZWQgYSB0ZW5zb3Igb2YgcmFuay0ke3Muc2hhcGUubGVuZ3RofWApO2NvbnN0IHI9cy5zaGFwZSxvPXJbMF07bGV0IGksYTt0aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCI/KGk9MixhPTMpOihpPTEsYT0yKTtjb25zdCBsPXJbaV0sYz1yW2FdLGg9dGhpcy5rZXJuZWxTaXplWzBdLHA9dGhpcy5rZXJuZWxTaXplWzFdLGY9dGhpcy5zdHJpZGVzWzBdLGc9dGhpcy5zdHJpZGVzWzFdLHk9UHIobCxmLGgsdGhpcy5wYWRkaW5nKSx3PVByKGMsZyxwLHRoaXMucGFkZGluZyksYj1bbyx5LHcsdGhpcy5maWx0ZXJzXTt0aGlzLmRhdGFGb3JtYXQhPT0iY2hhbm5lbHNMYXN0IiYmKHM9dHQocyxbMCwyLDMsMV0pKTtsZXQgdj1kZyhzLHRoaXMua2VybmVsLnJlYWQoKSxiLHRoaXMuc3RyaWRlcyx0aGlzLnBhZGRpbmcpO3JldHVybiB0aGlzLmRhdGFGb3JtYXQhPT0iY2hhbm5lbHNMYXN0IiYmKHY9dHQodixbMCwzLDEsMl0pKSx0aGlzLmJpYXMhPW51bGwmJih2PVRyKHYsdGhpcy5iaWFzLnJlYWQoKSx0aGlzLmRhdGFGb3JtYXQpKSx0aGlzLmFjdGl2YXRpb24hPW51bGwmJih2PXRoaXMuYWN0aXZhdGlvbi5hcHBseSh2KSksdn0pfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtlPWF0KGUpO2NvbnN0IHQ9ZS5zbGljZSgpO2xldCBzLHIsbzt0aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCI/KHM9MSxyPTIsbz0zKToocz0zLHI9MSxvPTIpO2NvbnN0IGk9dGhpcy5rZXJuZWxTaXplWzBdLGE9dGhpcy5rZXJuZWxTaXplWzFdLGw9dGhpcy5zdHJpZGVzWzBdLGM9dGhpcy5zdHJpZGVzWzFdO3JldHVybiB0W3NdPXRoaXMuZmlsdGVycyx0W3JdPVByKHRbcl0sbCxpLHRoaXMucGFkZGluZyksdFtvXT1Qcih0W29dLGMsYSx0aGlzLnBhZGRpbmcpLHR9Z2V0Q29uZmlnKCl7Y29uc3QgZT1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gZGVsZXRlIGUuZGlsYXRpb25SYXRlLGV9fWpULmNsYXNzTmFtZT0iQ29udjJEVHJhbnNwb3NlIjtnZShqVCk7Y2xhc3MgR1QgZXh0ZW5kcyBBaHtjb25zdHJ1Y3RvcihlKXtpZihzdXBlcihlKSx0aGlzLmlucHV0U3BlYz1bbmV3IG5uKHtuZGltOjV9KV0sdGhpcy5wYWRkaW5nIT09InNhbWUiJiZ0aGlzLnBhZGRpbmchPT0idmFsaWQiKXRocm93IG5ldyBlZShgQ29udjNEVHJhbnNwb3NlIGN1cnJlbnRseSBzdXBwb3J0cyBvbmx5IHBhZGRpbmcgbW9kZXMgJ3NhbWUnIGFuZCAndmFsaWQnLCBidXQgcmVjZWl2ZWQgcGFkZGluZyBtb2RlICR7dGhpcy5wYWRkaW5nfWApfWJ1aWxkKGUpe2lmKGU9YXQoZSksZS5sZW5ndGghPT01KXRocm93IG5ldyBlZSgiSW5wdXQgc2hvdWxkIGhhdmUgcmFuayA1OyBSZWNlaXZlZCBpbnB1dCBzaGFwZTogIitKU09OLnN0cmluZ2lmeShlKSk7Y29uc3QgdD10aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCI/MTplLmxlbmd0aC0xO2lmKGVbdF09PW51bGwpdGhyb3cgbmV3IGVlKCJUaGUgY2hhbm5lbCBkaW1lbnNpb24gb2YgdGhlIGlucHV0cyBzaG91bGQgYmUgZGVmaW5lZC4gRm91bmQgYE5vbmVgLiIpO2NvbnN0IHM9ZVt0XSxyPXRoaXMua2VybmVsU2l6ZS5jb25jYXQoW3RoaXMuZmlsdGVycyxzXSk7dGhpcy5rZXJuZWw9dGhpcy5hZGRXZWlnaHQoImtlcm5lbCIsciwiZmxvYXQzMiIsdGhpcy5rZXJuZWxJbml0aWFsaXplcix0aGlzLmtlcm5lbFJlZ3VsYXJpemVyLCEwLHRoaXMua2VybmVsQ29uc3RyYWludCksdGhpcy51c2VCaWFzJiYodGhpcy5iaWFzPXRoaXMuYWRkV2VpZ2h0KCJiaWFzIixbdGhpcy5maWx0ZXJzXSwiZmxvYXQzMiIsdGhpcy5iaWFzSW5pdGlhbGl6ZXIsdGhpcy5iaWFzUmVndWxhcml6ZXIsITAsdGhpcy5iaWFzQ29uc3RyYWludCkpLHRoaXMuaW5wdXRTcGVjPVtuZXcgbm4oe25kaW06NSxheGVzOntbdF06c319KV0sdGhpcy5idWlsdD0hMH1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57bGV0IHM9amUoZSk7aWYocy5zaGFwZS5sZW5ndGghPT01KXRocm93IG5ldyBlZShgQ29udjNEVHJhbnNwb3NlLmNhbGwoKSBleHBlY3RzIGlucHV0IHRlbnNvciB0byBiZSByYW5rLTQsIGJ1dCByZWNlaXZlZCBhIHRlbnNvciBvZiByYW5rLSR7cy5zaGFwZS5sZW5ndGh9YCk7Y29uc3Qgcj1zLnNoYXBlLG89clswXTtsZXQgaSxhLGw7dGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiPyhsPTIsaT0zLGE9NCk6KGw9MSxpPTIsYT0zKTtjb25zdCBjPXJbbF0saD1yW2ldLHA9clthXSxmPXRoaXMua2VybmVsU2l6ZVswXSxnPXRoaXMua2VybmVsU2l6ZVsxXSx5PXRoaXMua2VybmVsU2l6ZVsyXSx3PXRoaXMuc3RyaWRlc1swXSxiPXRoaXMuc3RyaWRlc1sxXSx2PXRoaXMuc3RyaWRlc1syXSxTPVByKGMsdyxmLHRoaXMucGFkZGluZyksJD1QcihoLGIsZyx0aGlzLnBhZGRpbmcpLGs9UHIocCx2LHksdGhpcy5wYWRkaW5nKSxUPVtvLFMsJCxrLHRoaXMuZmlsdGVyc107dGhpcy5kYXRhRm9ybWF0IT09ImNoYW5uZWxzTGFzdCImJihzPXR0KHMsWzAsMiwzLDQsMV0pKTtsZXQgRD1oYihzLHRoaXMua2VybmVsLnJlYWQoKSxULHRoaXMuc3RyaWRlcyx0aGlzLnBhZGRpbmcpO3JldHVybiB0aGlzLmRhdGFGb3JtYXQhPT0iY2hhbm5lbHNMYXN0IiYmKEQ9dHQoRCxbMCw0LDEsMiwzXSkpLHRoaXMuYmlhcyE9PW51bGwmJihEPVRyKEQsdGhpcy5iaWFzLnJlYWQoKSx0aGlzLmRhdGFGb3JtYXQpKSx0aGlzLmFjdGl2YXRpb24hPT1udWxsJiYoRD10aGlzLmFjdGl2YXRpb24uYXBwbHkoRCkpLER9KX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7ZT1hdChlKTtjb25zdCB0PWUuc2xpY2UoKTtsZXQgcyxyLG8saTt0aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCI/KHM9MSxyPTIsbz0zLGk9NCk6KHM9NCxyPTEsbz0yLGk9Myk7Y29uc3QgYT10aGlzLmtlcm5lbFNpemVbMF0sbD10aGlzLmtlcm5lbFNpemVbMV0sYz10aGlzLmtlcm5lbFNpemVbMl0saD10aGlzLnN0cmlkZXNbMF0scD10aGlzLnN0cmlkZXNbMV0sZj10aGlzLnN0cmlkZXNbMl07cmV0dXJuIHRbc109dGhpcy5maWx0ZXJzLHRbcl09UHIodFtyXSxoLGEsdGhpcy5wYWRkaW5nKSx0W29dPVByKHRbb10scCxsLHRoaXMucGFkZGluZyksdFtpXT1Qcih0W2ldLGYsYyx0aGlzLnBhZGRpbmcpLHR9Z2V0Q29uZmlnKCl7Y29uc3QgZT1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gZGVsZXRlIGUuZGlsYXRpb25SYXRlLGV9fUdULmNsYXNzTmFtZT0iQ29udjNEVHJhbnNwb3NlIjtnZShHVCk7Y2xhc3MgSFQgZXh0ZW5kcyBFdXtjb25zdHJ1Y3RvcihlLHQpe2lmKHN1cGVyKGUsdCksdGhpcy5ERUZBVUxUX0RFUFRIV0lTRV9JTklUSUFMSVpFUj0iZ2xvcm90VW5pZm9ybSIsdGhpcy5ERUZBVUxUX1BPSU5UV0lTRV9JTklUSUFMSVpFUj0iZ2xvcm90VW5pZm9ybSIsdGhpcy5kZXB0aHdpc2VLZXJuZWw9bnVsbCx0aGlzLnBvaW50d2lzZUtlcm5lbD1udWxsLHQuZmlsdGVycz09bnVsbCl0aHJvdyBuZXcgZWUoIlRoZSBgZmlsdGVyc2AgY29uZmlndXJhdGlvbiBmaWVsZCBpcyByZXF1aXJlZCBieSBTZXBhcmFibGVDb252LCBidXQgaXMgdW5zcGVjaWZpZWQuIik7aWYodC5rZXJuZWxJbml0aWFsaXplciE9bnVsbHx8dC5rZXJuZWxSZWd1bGFyaXplciE9bnVsbHx8dC5rZXJuZWxDb25zdHJhaW50IT1udWxsKXRocm93IG5ldyBlZSgiRmllbGRzIGtlcm5lbEluaXRpYWxpemVyLCBrZXJuZWxSZWd1bGFyaXplciBhbmQga2VybmVsQ29uc3RyYWludCBhcmUgaW52YWxpZCBmb3IgU2VwYXJhYmxlQ29udjJELiBVc2UgZGVwdGh3aXNlSW5pdGlhbGl6ZXIsIGRlcHRod2lzZVJlZ3VsYXJpemVyLCBkZXB0aHdpc2VDb25zdHJhaW50LCBwb2ludHdpc2VJbml0aWFsaXplciwgcG9pbnR3aXNlUmVndWxhcml6ZXIgYW5kIHBvaW50d2lzZUNvbnN0cmFpbnQgaW5zdGVhZC4iKTtpZih0LnBhZGRpbmchPW51bGwmJnQucGFkZGluZyE9PSJzYW1lIiYmdC5wYWRkaW5nIT09InZhbGlkIil0aHJvdyBuZXcgZWUoYFNlcGFyYWJsZUNvbnYke3RoaXMucmFua31EIHN1cHBvcnRzIG9ubHkgcGFkZGluZyBtb2RlczogJ3NhbWUnIGFuZCAndmFsaWQnLCBidXQgcmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeSh0LnBhZGRpbmcpfWApO3RoaXMuZGVwdGhNdWx0aXBsaWVyPXQuZGVwdGhNdWx0aXBsaWVyPT1udWxsPzE6dC5kZXB0aE11bHRpcGxpZXIsdGhpcy5kZXB0aHdpc2VJbml0aWFsaXplcj1UdCh0LmRlcHRod2lzZUluaXRpYWxpemVyfHx0aGlzLkRFRkFVTFRfREVQVEhXSVNFX0lOSVRJQUxJWkVSKSx0aGlzLmRlcHRod2lzZVJlZ3VsYXJpemVyPUV0KHQuZGVwdGh3aXNlUmVndWxhcml6ZXIpLHRoaXMuZGVwdGh3aXNlQ29uc3RyYWludD1ybih0LmRlcHRod2lzZUNvbnN0cmFpbnQpLHRoaXMucG9pbnR3aXNlSW5pdGlhbGl6ZXI9VHQodC5kZXB0aHdpc2VJbml0aWFsaXplcnx8dGhpcy5ERUZBVUxUX1BPSU5UV0lTRV9JTklUSUFMSVpFUiksdGhpcy5wb2ludHdpc2VSZWd1bGFyaXplcj1FdCh0LnBvaW50d2lzZVJlZ3VsYXJpemVyKSx0aGlzLnBvaW50d2lzZUNvbnN0cmFpbnQ9cm4odC5wb2ludHdpc2VDb25zdHJhaW50KX1idWlsZChlKXtpZihlPWF0KGUpLGUubGVuZ3RoPHRoaXMucmFuaysyKXRocm93IG5ldyBlZShgSW5wdXRzIHRvIFNlcGFyYWJsZUNvbnYke3RoaXMucmFua31EIHNob3VsZCBoYXZlIHJhbmsgJHt0aGlzLnJhbmsrMn0sIGJ1dCByZWNlaXZlZCBpbnB1dCBzaGFwZTogJHtKU09OLnN0cmluZ2lmeShlKX1gKTtjb25zdCB0PXRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0ZpcnN0Ij8xOmUubGVuZ3RoLTE7aWYoZVt0XT09bnVsbHx8ZVt0XTwwKXRocm93IG5ldyBlZShgVGhlIGNoYW5uZWwgZGltZW5zaW9uIG9mIHRoZSBpbnB1dHMgc2hvdWxkIGJlIGRlZmluZWQsIGJ1dCBmb3VuZCAke0pTT04uc3RyaW5naWZ5KGVbdF0pfWApO2NvbnN0IHM9ZVt0XSxyPXRoaXMua2VybmVsU2l6ZS5jb25jYXQoW3MsdGhpcy5kZXB0aE11bHRpcGxpZXJdKSxvPVtdO2ZvcihsZXQgYT0wO2E8dGhpcy5yYW5rOysrYSlvLnB1c2goMSk7by5wdXNoKHMqdGhpcy5kZXB0aE11bHRpcGxpZXIsdGhpcy5maWx0ZXJzKTtjb25zdCBpPSEwO3RoaXMuZGVwdGh3aXNlS2VybmVsPXRoaXMuYWRkV2VpZ2h0KCJkZXB0aHdpc2Vfa2VybmVsIixyLCJmbG9hdDMyIix0aGlzLmRlcHRod2lzZUluaXRpYWxpemVyLHRoaXMuZGVwdGh3aXNlUmVndWxhcml6ZXIsaSx0aGlzLmRlcHRod2lzZUNvbnN0cmFpbnQpLHRoaXMucG9pbnR3aXNlS2VybmVsPXRoaXMuYWRkV2VpZ2h0KCJwb2ludHdpc2Vfa2VybmVsIixvLCJmbG9hdDMyIix0aGlzLnBvaW50d2lzZUluaXRpYWxpemVyLHRoaXMucG9pbnR3aXNlUmVndWxhcml6ZXIsaSx0aGlzLnBvaW50d2lzZUNvbnN0cmFpbnQpLHRoaXMudXNlQmlhcz90aGlzLmJpYXM9dGhpcy5hZGRXZWlnaHQoImJpYXMiLFt0aGlzLmZpbHRlcnNdLCJmbG9hdDMyIix0aGlzLmJpYXNJbml0aWFsaXplcix0aGlzLmJpYXNSZWd1bGFyaXplcixpLHRoaXMuYmlhc0NvbnN0cmFpbnQpOnRoaXMuYmlhcz1udWxsLHRoaXMuaW5wdXRTcGVjPVtuZXcgbm4oe25kaW06dGhpcy5yYW5rKzIsYXhlczp7W3RdOnN9fSldLHRoaXMuYnVpbHQ9ITB9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2U9amUoZSk7bGV0IHM7aWYodGhpcy5yYW5rPT09MSl0aHJvdyBuZXcgS2UoIjFEIHNlcGFyYWJsZSBjb252b2x1dGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgeWV0LiIpO3JldHVybiB0aGlzLnJhbms9PT0yJiYodGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiJiYoZT10dChlLFswLDIsMywxXSkpLHM9JGcoZSx0aGlzLmRlcHRod2lzZUtlcm5lbC5yZWFkKCksdGhpcy5wb2ludHdpc2VLZXJuZWwucmVhZCgpLHRoaXMuc3RyaWRlcyx0aGlzLnBhZGRpbmcsdGhpcy5kaWxhdGlvblJhdGUsIk5IV0MiKSksdGhpcy51c2VCaWFzJiYocz1UcihzLHRoaXMuYmlhcy5yZWFkKCksdGhpcy5kYXRhRm9ybWF0KSksdGhpcy5hY3RpdmF0aW9uIT1udWxsJiYocz10aGlzLmFjdGl2YXRpb24uYXBwbHkocykpLHRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0ZpcnN0IiYmKHM9dHQocyxbMCwzLDEsMl0pKSxzfSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gZGVsZXRlIGUucmFuayxkZWxldGUgZS5rZXJuZWxJbml0aWFsaXplcixkZWxldGUgZS5rZXJuZWxSZWd1bGFyaXplcixkZWxldGUgZS5rZXJuZWxDb25zdHJhaW50LGUuZGVwdGh3aXNlSW5pdGlhbGl6ZXI9T3QodGhpcy5kZXB0aHdpc2VJbml0aWFsaXplciksZS5wb2ludHdpc2VJbml0aWFsaXplcj1PdCh0aGlzLnBvaW50d2lzZUluaXRpYWxpemVyKSxlLmRlcHRod2lzZVJlZ3VsYXJpemVyPXZ0KHRoaXMuZGVwdGh3aXNlUmVndWxhcml6ZXIpLGUucG9pbnR3aXNlUmVndWxhcml6ZXI9dnQodGhpcy5wb2ludHdpc2VSZWd1bGFyaXplciksZS5kZXB0aHdpc2VDb25zdHJhaW50PXNuKHRoaXMuZGVwdGh3aXNlQ29uc3RyYWludCksZS5wb2ludHdpc2VDb25zdHJhaW50PXNuKHRoaXMucG9pbnR3aXNlQ29uc3RyYWludCksZX19SFQuY2xhc3NOYW1lPSJTZXBhcmFibGVDb252IjtjbGFzcyBxVCBleHRlbmRzIEhUe2NvbnN0cnVjdG9yKGUpe3N1cGVyKDIsZSl9fXFULmNsYXNzTmFtZT0iU2VwYXJhYmxlQ29udjJEIjtnZShxVCk7Y2xhc3MgbnkgZXh0ZW5kcyBFdXtjb25zdHJ1Y3RvcihlKXtzdXBlcigxLGUpLG55LnZlcmlmeUFyZ3MoZSksdGhpcy5pbnB1dFNwZWM9W3tuZGltOjN9XX1nZXRDb25maWcoKXtjb25zdCBlPXN1cGVyLmdldENvbmZpZygpO3JldHVybiBkZWxldGUgZS5yYW5rLGRlbGV0ZSBlLmRhdGFGb3JtYXQsZX1zdGF0aWMgdmVyaWZ5QXJncyhlKXtpZih0eXBlb2YgZS5rZXJuZWxTaXplIT0ibnVtYmVyIiYmIUR3KGUua2VybmVsU2l6ZSwibnVtYmVyIiwxLDEpKXRocm93IG5ldyBlZShgQ29udjFEIGV4cGVjdHMgY29uZmlnLmtlcm5lbFNpemUgdG8gYmUgbnVtYmVyIG9yIG51bWJlcltdIHdpdGggbGVuZ3RoIDEsIGJ1dCByZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KGUua2VybmVsU2l6ZSl9LmApfX1ueS5jbGFzc05hbWU9IkNvbnYxRCI7Z2UobnkpO2NsYXNzIEtUIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdHlwZW9mIGUuY3JvcHBpbmc9PSJudW1iZXIiP3RoaXMuY3JvcHBpbmc9W1tlLmNyb3BwaW5nLGUuY3JvcHBpbmddLFtlLmNyb3BwaW5nLGUuY3JvcHBpbmddXTp0eXBlb2YgZS5jcm9wcGluZ1swXT09Im51bWJlciI/dGhpcy5jcm9wcGluZz1bW2UuY3JvcHBpbmdbMF0sZS5jcm9wcGluZ1swXV0sW2UuY3JvcHBpbmdbMV0sZS5jcm9wcGluZ1sxXV1dOnRoaXMuY3JvcHBpbmc9ZS5jcm9wcGluZyx0aGlzLmRhdGFGb3JtYXQ9ZS5kYXRhRm9ybWF0PT09dm9pZCAwPyJjaGFubmVsc0xhc3QiOmUuZGF0YUZvcm1hdCx0aGlzLmlucHV0U3BlYz1be25kaW06NH1dfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtyZXR1cm4gdGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiP1tlWzBdLGVbMV0sZVsyXS10aGlzLmNyb3BwaW5nWzBdWzBdLXRoaXMuY3JvcHBpbmdbMF1bMV0sZVszXS10aGlzLmNyb3BwaW5nWzFdWzBdLXRoaXMuY3JvcHBpbmdbMV1bMV1dOltlWzBdLGVbMV0tdGhpcy5jcm9wcGluZ1swXVswXS10aGlzLmNyb3BwaW5nWzBdWzFdLGVbMl0tdGhpcy5jcm9wcGluZ1sxXVswXS10aGlzLmNyb3BwaW5nWzFdWzFdLGVbM11dfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9PntpZihlPWplKGUpLHRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0xhc3QiKXtjb25zdCBzPVpwKGUsdGhpcy5jcm9wcGluZ1swXVswXSxlLnNoYXBlWzFdLXRoaXMuY3JvcHBpbmdbMF1bMF0tdGhpcy5jcm9wcGluZ1swXVsxXSwyKTtyZXR1cm4gWnAocyx0aGlzLmNyb3BwaW5nWzFdWzBdLGUuc2hhcGVbMl0tdGhpcy5jcm9wcGluZ1sxXVsxXS10aGlzLmNyb3BwaW5nWzFdWzBdLDMpfWVsc2V7Y29uc3Qgcz1acChlLHRoaXMuY3JvcHBpbmdbMF1bMF0sZS5zaGFwZVsyXS10aGlzLmNyb3BwaW5nWzBdWzBdLXRoaXMuY3JvcHBpbmdbMF1bMV0sMyk7cmV0dXJuIFpwKHMsdGhpcy5jcm9wcGluZ1sxXVswXSxlLnNoYXBlWzNdLXRoaXMuY3JvcHBpbmdbMV1bMV0tdGhpcy5jcm9wcGluZ1sxXVswXSw0KX19KX1nZXRDb25maWcoKXtjb25zdCBlPXtjcm9wcGluZzp0aGlzLmNyb3BwaW5nLGRhdGFGb3JtYXQ6dGhpcy5kYXRhRm9ybWF0fSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19S1QuY2xhc3NOYW1lPSJDcm9wcGluZzJEIjtnZShLVCk7Y2xhc3MgWFQgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLkRFRkFVTFRfU0laRT1bMiwyXSx0aGlzLmlucHV0U3BlYz1be25kaW06NH1dLHRoaXMuc2l6ZT1lLnNpemU9PW51bGw/dGhpcy5ERUZBVUxUX1NJWkU6ZS5zaXplLHRoaXMuZGF0YUZvcm1hdD1lLmRhdGFGb3JtYXQ9PW51bGw/ImNoYW5uZWxzTGFzdCI6ZS5kYXRhRm9ybWF0LEd0KHRoaXMuZGF0YUZvcm1hdCksdGhpcy5pbnRlcnBvbGF0aW9uPWUuaW50ZXJwb2xhdGlvbj09bnVsbD8ibmVhcmVzdCI6ZS5pbnRlcnBvbGF0aW9uLExVKHRoaXMuaW50ZXJwb2xhdGlvbil9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2lmKHRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0ZpcnN0Iil7Y29uc3QgdD1lWzJdPT1udWxsP251bGw6dGhpcy5zaXplWzBdKmVbMl0scz1lWzNdPT1udWxsP251bGw6dGhpcy5zaXplWzFdKmVbM107cmV0dXJuW2VbMF0sZVsxXSx0LHNdfWVsc2V7Y29uc3QgdD1lWzFdPT1udWxsP251bGw6dGhpcy5zaXplWzBdKmVbMV0scz1lWzJdPT1udWxsP251bGw6dGhpcy5zaXplWzFdKmVbMl07cmV0dXJuW2VbMF0sdCxzLGVbM11dfX1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57bGV0IHM9amUoZSk7Y29uc3Qgcj1zLnNoYXBlO2lmKHRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0ZpcnN0Iil7cz10dChzLFswLDIsMywxXSk7Y29uc3Qgbz10aGlzLnNpemVbMF0qclsyXSxpPXRoaXMuc2l6ZVsxXSpyWzNdLGE9dGhpcy5pbnRlcnBvbGF0aW9uPT09Im5lYXJlc3QiP3hyLnJlc2l6ZU5lYXJlc3ROZWlnaGJvcihzLFtvLGldKTp4ci5yZXNpemVCaWxpbmVhcihzLFtvLGldKTtyZXR1cm4gdHQoYSxbMCwzLDEsMl0pfWVsc2V7Y29uc3Qgbz10aGlzLnNpemVbMF0qclsxXSxpPXRoaXMuc2l6ZVsxXSpyWzJdO3JldHVybiB0aGlzLmludGVycG9sYXRpb249PT0ibmVhcmVzdCI/eHIucmVzaXplTmVhcmVzdE5laWdoYm9yKHMsW28saV0pOnhyLnJlc2l6ZUJpbGluZWFyKHMsW28saV0pfX0pfWdldENvbmZpZygpe2NvbnN0IGU9e3NpemU6dGhpcy5zaXplLGRhdGFGb3JtYXQ6dGhpcy5kYXRhRm9ybWF0LGludGVycG9sYXRpb246dGhpcy5pbnRlcnBvbGF0aW9ufSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19WFQuY2xhc3NOYW1lPSJVcFNhbXBsaW5nMkQiO2dlKFhUKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBhRyhuLGUsdD1bMSwxXSxzPSJ2YWxpZCIscixvKXtyZXR1cm4gcmUoKCk9PntyPT1udWxsJiYocj1rcigpKSxHdChyKTtsZXQgaT1HdyhuLHIpO2lmKG4ucmFuayE9PTQpdGhyb3cgbmV3IGVlKGBJbnB1dCBmb3IgZGVwdGh3aXNlQ29udjJkIGlzIHJlcXVpcmVkIHRvIGJlIDQtRCwgYnV0IGlzIGluc3RlYWQgJHtuLnJhbmt9LURgKTtpZihlLnJhbmshPT00KXRocm93IG5ldyBlZShgZGVwdGh3aXNlS2VybmVsIGlzIHJlcXVpcmVkIHRvIGJlIDQtRCwgYnV0IGlzIGluc3RlYWQgJHtlLnJhbmt9LURgKTtyZXR1cm4gaT1OdShpLGUsdCxzPT09InNhbWUiPyJzYW1lIjoidmFsaWQiLCJOSFdDIixvKSxyPT09ImNoYW5uZWxzRmlyc3QiJiYoaT10dChpLFswLDMsMSwyXSkpLGl9KX1jbGFzcyBZVCBleHRlbmRzIHR5e2NvbnN0cnVjdG9yKGUpe3N1cGVyKDIsZSksdGhpcy5kZXB0aHdpc2VLZXJuZWw9bnVsbCx0aGlzLmRlcHRoTXVsdGlwbGllcj1lLmRlcHRoTXVsdGlwbGllcj09bnVsbD8xOmUuZGVwdGhNdWx0aXBsaWVyLHRoaXMuZGVwdGh3aXNlSW5pdGlhbGl6ZXI9VHQoZS5kZXB0aHdpc2VJbml0aWFsaXplcnx8dGhpcy5ERUZBVUxUX0tFUk5FTF9JTklUSUFMSVpFUiksdGhpcy5kZXB0aHdpc2VDb25zdHJhaW50PXJuKGUuZGVwdGh3aXNlQ29uc3RyYWludCksdGhpcy5kZXB0aHdpc2VSZWd1bGFyaXplcj1FdChlLmRlcHRod2lzZVJlZ3VsYXJpemVyKX1idWlsZChlKXtpZihlPWF0KGUpLGUubGVuZ3RoPDQpdGhyb3cgbmV3IGVlKGBJbnB1dHMgdG8gRGVwdGh3aXNlQ29udjJEIHNob3VsZCBoYXZlIHJhbmsgNC4gUmVjZWl2ZWQgaW5wdXQgc2hhcGU6ICR7SlNPTi5zdHJpbmdpZnkoZSl9LmApO2NvbnN0IHQ9dGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiPzE6MztpZihlW3RdPT1udWxsfHxlW3RdPDApdGhyb3cgbmV3IGVlKGBUaGUgY2hhbm5lbCBkaW1lbnNpb24gb2YgdGhlIGlucHV0cyB0byBEZXB0aHdpc2VDb252MkQgc2hvdWxkIGJlIGRlZmluZWQsIGJ1dCBpcyBub3QgKCR7ZVt0XX0pLmApO2NvbnN0IHM9ZVt0XSxyPVt0aGlzLmtlcm5lbFNpemVbMF0sdGhpcy5rZXJuZWxTaXplWzFdLHMsdGhpcy5kZXB0aE11bHRpcGxpZXJdO3RoaXMuZGVwdGh3aXNlS2VybmVsPXRoaXMuYWRkV2VpZ2h0KCJkZXB0aHdpc2Vfa2VybmVsIixyLG51bGwsdGhpcy5kZXB0aHdpc2VJbml0aWFsaXplcix0aGlzLmRlcHRod2lzZVJlZ3VsYXJpemVyLCEwLHRoaXMuZGVwdGh3aXNlQ29uc3RyYWludCksdGhpcy51c2VCaWFzP3RoaXMuYmlhcz10aGlzLmFkZFdlaWdodCgiYmlhcyIsW3MqdGhpcy5kZXB0aE11bHRpcGxpZXJdLG51bGwsdGhpcy5iaWFzSW5pdGlhbGl6ZXIsdGhpcy5iaWFzUmVndWxhcml6ZXIsITAsdGhpcy5iaWFzQ29uc3RyYWludCk6dGhpcy5iaWFzPW51bGwsdGhpcy5idWlsdD0hMH1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57ZT1qZShlKTtsZXQgcz1hRyhlLHRoaXMuZGVwdGh3aXNlS2VybmVsLnJlYWQoKSx0aGlzLnN0cmlkZXMsdGhpcy5wYWRkaW5nLHRoaXMuZGF0YUZvcm1hdCxudWxsKTtyZXR1cm4gdGhpcy51c2VCaWFzJiYocz1UcihzLHRoaXMuYmlhcy5yZWFkKCksdGhpcy5kYXRhRm9ybWF0KSksdGhpcy5hY3RpdmF0aW9uIT1udWxsJiYocz10aGlzLmFjdGl2YXRpb24uYXBwbHkocykpLHN9KX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7ZT1hdChlKTtjb25zdCB0PXRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0ZpcnN0Ij9lWzJdOmVbMV0scz10aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCI/ZVszXTplWzJdLHI9dGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiP2VbMV0qdGhpcy5kZXB0aE11bHRpcGxpZXI6ZVszXSp0aGlzLmRlcHRoTXVsdGlwbGllcixvPXZyKHQsdGhpcy5rZXJuZWxTaXplWzBdLHRoaXMucGFkZGluZyx0aGlzLnN0cmlkZXNbMF0pLGk9dnIocyx0aGlzLmtlcm5lbFNpemVbMV0sdGhpcy5wYWRkaW5nLHRoaXMuc3RyaWRlc1sxXSk7cmV0dXJuIHRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0ZpcnN0Ij9bZVswXSxyLG8saV06W2VbMF0sbyxpLHJdfWdldENvbmZpZygpe2NvbnN0IGU9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIGUuZGVwdGhNdWx0aXBsaWVyPXRoaXMuZGVwdGhNdWx0aXBsaWVyLGUuZGVwdGh3aXNlSW5pdGlhbGl6ZXI9T3QodGhpcy5kZXB0aHdpc2VJbml0aWFsaXplciksZS5kZXB0aHdpc2VSZWd1bGFyaXplcj12dCh0aGlzLmRlcHRod2lzZVJlZ3VsYXJpemVyKSxlLmRlcHRod2lzZUNvbnN0cmFpbnQ9c24odGhpcy5kZXB0aHdpc2VSZWd1bGFyaXplciksZX19WVQuY2xhc3NOYW1lPSJEZXB0aHdpc2VDb252MkQiO2dlKFlUKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBRVChuLGUsdCxzKXtpZihBcnJheS5pc0FycmF5KG4pKXtpZihlIT1udWxsfHx0IT1udWxsKXRocm93IG5ldyBlZSgiV2hlbiBpbnB1dHMgaXMgYW4gYXJyYXksIG5laXRoZXIgaW5pdGlhbFN0YXRlIG9yIGNvbnN0YW50cyBzaG91bGQgYmUgcHJvdmlkZWQiKTtzIT1udWxsJiYodD1uLnNsaWNlKG4ubGVuZ3RoLXMsbi5sZW5ndGgpLG49bi5zbGljZSgwLG4ubGVuZ3RoLXMpKSxuLmxlbmd0aD4xJiYoZT1uLnNsaWNlKDEsbi5sZW5ndGgpKSxuPW5bMF19ZnVuY3Rpb24gcihvKXtyZXR1cm4gbz09bnVsbHx8QXJyYXkuaXNBcnJheShvKT9vOltvXX1yZXR1cm4gZT1yKGUpLHQ9cih0KSx7aW5wdXRzOm4saW5pdGlhbFN0YXRlOmUsY29uc3RhbnRzOnR9fWZ1bmN0aW9uIFpUKG4sZSx0LHM9ITEscixvLGk9ITEsYT0hMSl7cmV0dXJuIHJlKCgpPT57Y29uc3QgbD1lLnNoYXBlLmxlbmd0aDtpZihsPDMpdGhyb3cgbmV3IGVlKGBJbnB1dCBzaG91bGQgYmUgYXQgbGVhc3QgM0QsIGJ1dCBpcyAke2x9RC5gKTtjb25zdCBjPVsxLDBdLmNvbmNhdChOcigyLGwpKTtlPXR0KGUsYyksaSYmY29uc29sZS53YXJuKCJCYWNrZW5kIHJubigpOiB0aGUgdW5yb2xsID0gdHJ1ZSBvcHRpb24gaXMgbm90IGFwcGxpY2FibGUgdG8gdGhlIGltcGVyYXRpdmUgZGVlcGxlYXJuLmpzIGJhY2tlbmQuIiksciE9bnVsbCYmKHI9TmUoTmUociwiYm9vbCIpLCJmbG9hdDMyIiksci5yYW5rPT09bC0xJiYocj1BbihyLC0xKSkscj10dChyLGMpKSxzJiYoZT1QcyhlLDApLHIhPW51bGwmJihyPVBzKHIsMCkpKTtjb25zdCBoPVtdO2xldCBwLGY9dDtjb25zdCBnPWUuc2hhcGVbMF0seT16cyhlKTtsZXQgdztyIT1udWxsJiYodz16cyhyKSk7Zm9yKGxldCB2PTA7djxnOysrdil7Y29uc3QgUz15W3ZdLCQ9cmUoKCk9Pm4oUyxmKSk7aWYocj09bnVsbClwPSRbMF0sZj0kWzFdO2Vsc2V7Y29uc3Qgaz1yZSgoKT0+e2NvbnN0IFQ9d1t2XSxEPUllKHZzKFQpLFQpLEw9bWUoWCgkWzBdLFQpLFgoZlswXSxEKSksej1mLm1hcCgoRixfKT0+bWUoWCgkWzFdW19dLFQpLFgoRixEKSkpO3JldHVybntvdXRwdXQ6TCxuZXdTdGF0ZXM6en19KTtwPWsub3V0cHV0LGY9ay5uZXdTdGF0ZXN9YSYmaC5wdXNoKHApfWxldCBiO3JldHVybiBhJiYoYj1vcyhoLDEpKSxbcCxiLGZdfSl9Y2xhc3Mga2kgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKTtsZXQgdDtpZihlLmNlbGw9PW51bGwpdGhyb3cgbmV3IGVlKCJjZWxsIHByb3BlcnR5IGlzIG1pc3NpbmcgZm9yIHRoZSBjb25zdHJ1Y3RvciBvZiBSTk4uIik7aWYoQXJyYXkuaXNBcnJheShlLmNlbGwpP3Q9bmV3IEt3KHtjZWxsczplLmNlbGx9KTp0PWUuY2VsbCx0LnN0YXRlU2l6ZT09bnVsbCl0aHJvdyBuZXcgZWUoIlRoZSBSTk4gY2VsbCBzaG91bGQgaGF2ZSBhbiBhdHRyaWJ1dGUgYHN0YXRlU2l6ZWAgKHR1cGxlIG9mIGludGVnZXJzLCBvbmUgaW50ZWdlciBwZXIgUk5OIHN0YXRlKS4iKTt0aGlzLmNlbGw9dCx0aGlzLnJldHVyblNlcXVlbmNlcz1lLnJldHVyblNlcXVlbmNlcz09bnVsbD8hMTplLnJldHVyblNlcXVlbmNlcyx0aGlzLnJldHVyblN0YXRlPWUucmV0dXJuU3RhdGU9PW51bGw/ITE6ZS5yZXR1cm5TdGF0ZSx0aGlzLmdvQmFja3dhcmRzPWUuZ29CYWNrd2FyZHM9PW51bGw/ITE6ZS5nb0JhY2t3YXJkcyx0aGlzLl9zdGF0ZWZ1bD1lLnN0YXRlZnVsPT1udWxsPyExOmUuc3RhdGVmdWwsdGhpcy51bnJvbGw9ZS51bnJvbGw9PW51bGw/ITE6ZS51bnJvbGwsdGhpcy5zdXBwb3J0c01hc2tpbmc9ITAsdGhpcy5pbnB1dFNwZWM9W25ldyBubih7bmRpbTozfSldLHRoaXMuc3RhdGVTcGVjPW51bGwsdGhpcy5zdGF0ZXNfPW51bGwsdGhpcy5udW1Db25zdGFudHM9bnVsbCx0aGlzLmtlcHRTdGF0ZXM9W119Z2V0U3RhdGVzKCl7aWYodGhpcy5zdGF0ZXNfPT1udWxsKXtjb25zdCBlPUFycmF5LmlzQXJyYXkodGhpcy5jZWxsLnN0YXRlU2l6ZSk/dGhpcy5jZWxsLnN0YXRlU2l6ZS5sZW5ndGg6MTtyZXR1cm4gTnIoMCxlKS5tYXAodD0+bnVsbCl9ZWxzZSByZXR1cm4gdGhpcy5zdGF0ZXNffXNldFN0YXRlcyhlKXt0aGlzLnN0YXRlc189ZX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7SjAoZSkmJihlPWVbMF0pLGU9ZTtsZXQgdD10aGlzLmNlbGwuc3RhdGVTaXplO0FycmF5LmlzQXJyYXkodCl8fCh0PVt0XSk7Y29uc3Qgcz10WzBdO2xldCByO2lmKHRoaXMucmV0dXJuU2VxdWVuY2VzP3I9W2VbMF0sZVsxXSxzXTpyPVtlWzBdLHNdLHRoaXMucmV0dXJuU3RhdGUpe2NvbnN0IG89W107Zm9yKGNvbnN0IGkgb2YgdClvLnB1c2goW2VbMF0saV0pO3JldHVybltyXS5jb25jYXQobyl9ZWxzZSByZXR1cm4gcn1jb21wdXRlTWFzayhlLHQpe3JldHVybiByZSgoKT0+e0FycmF5LmlzQXJyYXkodCkmJih0PXRbMF0pO2NvbnN0IHM9dGhpcy5yZXR1cm5TZXF1ZW5jZXM/dDpudWxsO2lmKHRoaXMucmV0dXJuU3RhdGUpe2NvbnN0IHI9dGhpcy5zdGF0ZXMubWFwKG89Pm51bGwpO3JldHVybltzXS5jb25jYXQocil9ZWxzZSByZXR1cm4gc30pfWdldCBzdGF0ZXMoKXtpZih0aGlzLnN0YXRlc189PW51bGwpe2NvbnN0IGU9QXJyYXkuaXNBcnJheSh0aGlzLmNlbGwuc3RhdGVTaXplKT90aGlzLmNlbGwuc3RhdGVTaXplLmxlbmd0aDoxLHQ9W107Zm9yKGxldCBzPTA7czxlOysrcyl0LnB1c2gobnVsbCk7cmV0dXJuIHR9ZWxzZSByZXR1cm4gdGhpcy5zdGF0ZXNffXNldCBzdGF0ZXMoZSl7dGhpcy5zdGF0ZXNfPWV9YnVpbGQoZSl7aWYodGhpcy5udW1Db25zdGFudHMhPW51bGwpdGhyb3cgbmV3IEtlKCJDb25zdGFudHMgc3VwcG9ydCBpcyBub3QgaW1wbGVtZW50ZWQgaW4gUk5OIHlldC4iKTtKMChlKSYmKGU9ZVswXSksZT1lO2NvbnN0IHQ9dGhpcy5zdGF0ZWZ1bD9lWzBdOm51bGwscz1lLnNsaWNlKDIpO3RoaXMuaW5wdXRTcGVjWzBdPW5ldyBubih7c2hhcGU6W3QsbnVsbCwuLi5zXX0pO2NvbnN0IHI9W2VbMF1dLmNvbmNhdChlLnNsaWNlKDIpKTt0aGlzLmNlbGwuYnVpbGQocik7bGV0IG87aWYoQXJyYXkuaXNBcnJheSh0aGlzLmNlbGwuc3RhdGVTaXplKT9vPXRoaXMuY2VsbC5zdGF0ZVNpemU6bz1bdGhpcy5jZWxsLnN0YXRlU2l6ZV0sdGhpcy5zdGF0ZVNwZWMhPW51bGwpe2lmKCFKZSh0aGlzLnN0YXRlU3BlYy5tYXAoaT0+aS5zaGFwZVtpLnNoYXBlLmxlbmd0aC0xXSksbykpdGhyb3cgbmV3IGVlKGBBbiBpbml0aWFsU3RhdGUgd2FzIHBhc3NlZCB0aGF0IGlzIG5vdCBjb21wYXRpYmxlIHdpdGggY2VsbC5zdGF0ZVNpemUuIFJlY2VpdmVkIHN0YXRlU3BlYz0ke3RoaXMuc3RhdGVTcGVjfTsgSG93ZXZlciBjZWxsLnN0YXRlU2l6ZSBpcyAke3RoaXMuY2VsbC5zdGF0ZVNpemV9YCl9ZWxzZSB0aGlzLnN0YXRlU3BlYz1vLm1hcChpPT5uZXcgbm4oe3NoYXBlOltudWxsLGldfSkpO3RoaXMuc3RhdGVmdWwmJnRoaXMucmVzZXRTdGF0ZXMoKX1yZXNldFN0YXRlcyhlLHQ9ITEpe3JlKCgpPT57aWYoIXRoaXMuc3RhdGVmdWwpdGhyb3cgbmV3IEZyKCJDYW5ub3QgY2FsbCByZXNldFN0YXRlcygpIG9uIGFuIFJOTiBMYXllciB0aGF0IGlzIG5vdCBzdGF0ZWZ1bC4iKTtjb25zdCBzPXRoaXMuaW5wdXRTcGVjWzBdLnNoYXBlWzBdO2lmKHM9PW51bGwpdGhyb3cgbmV3IGVlKCJJZiBhbiBSTk4gaXMgc3RhdGVmdWwsIGl0IG5lZWRzIHRvIGtub3cgaXRzIGJhdGNoIHNpemUuIFNwZWNpZnkgdGhlIGJhdGNoIHNpemUgb2YgeW91ciBpbnB1dCB0ZW5zb3JzOiBcbi0gSWYgdXNpbmcgYSBTZXF1ZW50aWFsIG1vZGVsLCBzcGVjaWZ5IHRoZSBiYXRjaCBzaXplIGJ5IHBhc3NpbmcgYSBgYmF0Y2hJbnB1dFNoYXBlYCBvcHRpb24gdG8geW91ciBmaXJzdCBsYXllci5cbi0gSWYgdXNpbmcgdGhlIGZ1bmN0aW9uYWwgQVBJLCBzcGVjaWZ5IHRoZSBiYXRjaCBzaXplIGJ5IHBhc3NpbmcgYSBgYmF0Y2hTaGFwZWAgb3B0aW9uIHRvIHlvdXIgSW5wdXQgbGF5ZXIuIik7aWYodGhpcy5zdGF0ZXNfPT1udWxsKUFycmF5LmlzQXJyYXkodGhpcy5jZWxsLnN0YXRlU2l6ZSk/dGhpcy5zdGF0ZXNfPXRoaXMuY2VsbC5zdGF0ZVNpemUubWFwKHI9Pll0KFtzLHJdKSk6dGhpcy5zdGF0ZXNfPVtZdChbcyx0aGlzLmNlbGwuc3RhdGVTaXplXSldO2Vsc2UgaWYoZT09bnVsbClZZSh0aGlzLnN0YXRlc18pLHRoaXMua2VwdFN0YXRlcyE9bnVsbCYmKFllKHRoaXMua2VwdFN0YXRlcyksdGhpcy5rZXB0U3RhdGVzPVtdKSxBcnJheS5pc0FycmF5KHRoaXMuY2VsbC5zdGF0ZVNpemUpP3RoaXMuc3RhdGVzXz10aGlzLmNlbGwuc3RhdGVTaXplLm1hcChyPT5ZdChbcyxyXSkpOnRoaXMuc3RhdGVzX1swXT1ZdChbcyx0aGlzLmNlbGwuc3RhdGVTaXplXSk7ZWxzZXtpZihBcnJheS5pc0FycmF5KGUpfHwoZT1bZV0pLGUubGVuZ3RoIT09dGhpcy5zdGF0ZXNfLmxlbmd0aCl0aHJvdyBuZXcgZWUoYExheWVyICR7dGhpcy5uYW1lfSBleHBlY3RzICR7dGhpcy5zdGF0ZXNfLmxlbmd0aH0gc3RhdGUocyksIGJ1dCBpdCByZWNlaXZlZCAke2UubGVuZ3RofSBzdGF0ZSB2YWx1ZShzKS4gSW5wdXQgcmVjZWl2ZWQ6ICR7ZX1gKTt0PT09ITA/dGhpcy5rZXB0U3RhdGVzLnB1c2godGhpcy5zdGF0ZXNfLnNsaWNlKCkpOlllKHRoaXMuc3RhdGVzXyk7Zm9yKGxldCByPTA7cjx0aGlzLnN0YXRlc18ubGVuZ3RoOysrcil7Y29uc3Qgbz1lW3JdLGk9QXJyYXkuaXNBcnJheSh0aGlzLmNlbGwuc3RhdGVTaXplKT90aGlzLmNlbGwuc3RhdGVTaXplW3JdOnRoaXMuY2VsbC5zdGF0ZVNpemUsYT1bcyxpXTtpZighSmUoby5zaGFwZSxhKSl0aHJvdyBuZXcgZWUoYFN0YXRlICR7cn0gaXMgaW5jb21wYXRpYmxlIHdpdGggbGF5ZXIgJHt0aGlzLm5hbWV9OiBleHBlY3RlZCBzaGFwZT0ke2F9LCByZWNlaXZlZCBzaGFwZT0ke28uc2hhcGV9YCk7dGhpcy5zdGF0ZXNfW3JdPW99fXRoaXMuc3RhdGVzXz10aGlzLnN0YXRlc18ubWFwKHI9PmVuKHIuY2xvbmUoKSkpfSl9YXBwbHkoZSx0KXtsZXQgcz10PT1udWxsP251bGw6dC5pbml0aWFsU3RhdGUscj10PT1udWxsP251bGw6dC5jb25zdGFudHM7dD09bnVsbCYmKHQ9e30pO2NvbnN0IG89UVQoZSxzLHIsdGhpcy5udW1Db25zdGFudHMpO2U9by5pbnB1dHMscz1vLmluaXRpYWxTdGF0ZSxyPW8uY29uc3RhbnRzO2xldCBpPVtdLGE9W107aWYocyE9bnVsbCl7dC5pbml0aWFsU3RhdGU9cyxpPWkuY29uY2F0KHMpLHRoaXMuc3RhdGVTcGVjPVtdO2Zvcihjb25zdCBjIG9mIHMpdGhpcy5zdGF0ZVNwZWMucHVzaChuZXcgbm4oe3NoYXBlOmMuc2hhcGV9KSk7YT1hLmNvbmNhdCh0aGlzLnN0YXRlU3BlYyl9aWYociE9bnVsbCYmKHQuY29uc3RhbnRzPXIsaT1pLmNvbmNhdChyKSx0aGlzLm51bUNvbnN0YW50cz1yLmxlbmd0aCksaVswXWluc3RhbmNlb2YgWHIpe2NvbnN0IGM9W2VdLmNvbmNhdChpKSxoPXRoaXMuaW5wdXRTcGVjLmNvbmNhdChhKSxwPXRoaXMuaW5wdXRTcGVjO3RoaXMuaW5wdXRTcGVjPWg7Y29uc3QgZj1zdXBlci5hcHBseShjLHQpO3JldHVybiB0aGlzLmlucHV0U3BlYz1wLGZ9ZWxzZSByZXR1cm4gc3VwZXIuYXBwbHkoZSx0KX1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57Y29uc3Qgcz10PT1udWxsP251bGw6dC5tYXNrLHI9dD09bnVsbD9udWxsOnQudHJhaW5pbmc7bGV0IG89dD09bnVsbD9udWxsOnQuaW5pdGlhbFN0YXRlO2U9amUoZSksbz09bnVsbCYmKHRoaXMuc3RhdGVmdWw/bz10aGlzLnN0YXRlc186bz10aGlzLmdldEluaXRpYWxTdGF0ZShlKSk7Y29uc3QgaT1BcnJheS5pc0FycmF5KHRoaXMuY2VsbC5zdGF0ZVNpemUpP3RoaXMuY2VsbC5zdGF0ZVNpemUubGVuZ3RoOjE7aWYoby5sZW5ndGghPT1pKXRocm93IG5ldyBlZShgUk5OIExheWVyIGhhcyAke2l9IHN0YXRlKHMpIGJ1dCB3YXMgcGFzc2VkICR7by5sZW5ndGh9IGluaXRpYWwgc3RhdGUocykuYCk7dGhpcy51bnJvbGwmJmNvbnNvbGUud2FybigiSWdub3JpbmcgdW5yb2xsID0gdHJ1ZSBmb3IgUk5OIGxheWVyLCBkdWUgdG8gaW1wZXJhdGl2ZSBiYWNrZW5kLiIpO2NvbnN0IGE9e3RyYWluaW5nOnJ9LGM9WlQoKHksdyk9Pntjb25zdCBiPXRoaXMuY2VsbC5jYWxsKFt5XS5jb25jYXQodyksYSk7cmV0dXJuW2JbMF0sYi5zbGljZSgxKV19LGUsbyx0aGlzLmdvQmFja3dhcmRzLHMsbnVsbCx0aGlzLnVucm9sbCx0aGlzLnJldHVyblNlcXVlbmNlcyksaD1jWzBdLHA9Y1sxXSxmPWNbMl07dGhpcy5zdGF0ZWZ1bCYmdGhpcy5yZXNldFN0YXRlcyhmLHIpO2NvbnN0IGc9dGhpcy5yZXR1cm5TZXF1ZW5jZXM/cDpoO3JldHVybiB0aGlzLnJldHVyblN0YXRlP1tnXS5jb25jYXQoZik6Z30pfWdldEluaXRpYWxTdGF0ZShlKXtyZXR1cm4gcmUoKCk9PntsZXQgdD1ZdChlLnNoYXBlKTtyZXR1cm4gdD1SZSh0LFsxLDJdKSx0PSRoKHQpLEFycmF5LmlzQXJyYXkodGhpcy5jZWxsLnN0YXRlU2l6ZSk/dGhpcy5jZWxsLnN0YXRlU2l6ZS5tYXAocz0+cz4xP1EwKHQsWzEsc10pOnQpOnRoaXMuY2VsbC5zdGF0ZVNpemU+MT9bUTAodCxbMSx0aGlzLmNlbGwuc3RhdGVTaXplXSldOlt0XX0pfWdldCB0cmFpbmFibGVXZWlnaHRzKCl7cmV0dXJuIHRoaXMudHJhaW5hYmxlP3RoaXMuY2VsbC50cmFpbmFibGVXZWlnaHRzOltdfWdldCBub25UcmFpbmFibGVXZWlnaHRzKCl7cmV0dXJuIHRoaXMudHJhaW5hYmxlP3RoaXMuY2VsbC5ub25UcmFpbmFibGVXZWlnaHRzOnRoaXMuY2VsbC53ZWlnaHRzfXNldEZhc3RXZWlnaHRJbml0RHVyaW5nQnVpbGQoZSl7c3VwZXIuc2V0RmFzdFdlaWdodEluaXREdXJpbmdCdWlsZChlKSx0aGlzLmNlbGwhPW51bGwmJnRoaXMuY2VsbC5zZXRGYXN0V2VpZ2h0SW5pdER1cmluZ0J1aWxkKGUpfWdldENvbmZpZygpe2NvbnN0IGU9c3VwZXIuZ2V0Q29uZmlnKCksdD17cmV0dXJuU2VxdWVuY2VzOnRoaXMucmV0dXJuU2VxdWVuY2VzLHJldHVyblN0YXRlOnRoaXMucmV0dXJuU3RhdGUsZ29CYWNrd2FyZHM6dGhpcy5nb0JhY2t3YXJkcyxzdGF0ZWZ1bDp0aGlzLnN0YXRlZnVsLHVucm9sbDp0aGlzLnVucm9sbH07dGhpcy5udW1Db25zdGFudHMhPW51bGwmJih0Lm51bUNvbnN0YW50cz10aGlzLm51bUNvbnN0YW50cyk7Y29uc3Qgcz10aGlzLmNlbGwuZ2V0Q29uZmlnKCk7cmV0dXJuIHRoaXMuZ2V0Q2xhc3NOYW1lKCk9PT1raS5jbGFzc05hbWUmJih0LmNlbGw9e2NsYXNzTmFtZTp0aGlzLmNlbGwuZ2V0Q2xhc3NOYW1lKCksY29uZmlnOnN9KSxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxzKSxlKSx0KX1zdGF0aWMgZnJvbUNvbmZpZyhlLHQscz17fSl7Y29uc3Qgcj10LmNlbGwsbz1tbyhyLHMpO3JldHVybiBuZXcgZShPYmplY3QuYXNzaWduKHQse2NlbGw6b30pKX19a2kuY2xhc3NOYW1lPSJSTk4iO2dlKGtpKTtjbGFzcyBzeSBleHRlbmRzIFple31jbGFzcyBIdyBleHRlbmRzIHN5e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuREVGQVVMVF9BQ1RJVkFUSU9OPSJ0YW5oIix0aGlzLkRFRkFVTFRfS0VSTkVMX0lOSVRJQUxJWkVSPSJnbG9yb3ROb3JtYWwiLHRoaXMuREVGQVVMVF9SRUNVUlJFTlRfSU5JVElBTElaRVI9Im9ydGhvZ29uYWwiLHRoaXMuREVGQVVMVF9CSUFTX0lOSVRJQUxJWkVSPSJ6ZXJvcyIsdGhpcy51bml0cz1lLnVuaXRzLGRuKHRoaXMudW5pdHMsInVuaXRzIiksdGhpcy5hY3RpdmF0aW9uPXBpKGUuYWN0aXZhdGlvbj09bnVsbD90aGlzLkRFRkFVTFRfQUNUSVZBVElPTjplLmFjdGl2YXRpb24pLHRoaXMudXNlQmlhcz1lLnVzZUJpYXM9PW51bGw/ITA6ZS51c2VCaWFzLHRoaXMua2VybmVsSW5pdGlhbGl6ZXI9VHQoZS5rZXJuZWxJbml0aWFsaXplcnx8dGhpcy5ERUZBVUxUX0tFUk5FTF9JTklUSUFMSVpFUiksdGhpcy5yZWN1cnJlbnRJbml0aWFsaXplcj1UdChlLnJlY3VycmVudEluaXRpYWxpemVyfHx0aGlzLkRFRkFVTFRfUkVDVVJSRU5UX0lOSVRJQUxJWkVSKSx0aGlzLmJpYXNJbml0aWFsaXplcj1UdChlLmJpYXNJbml0aWFsaXplcnx8dGhpcy5ERUZBVUxUX0JJQVNfSU5JVElBTElaRVIpLHRoaXMua2VybmVsUmVndWxhcml6ZXI9RXQoZS5rZXJuZWxSZWd1bGFyaXplciksdGhpcy5yZWN1cnJlbnRSZWd1bGFyaXplcj1FdChlLnJlY3VycmVudFJlZ3VsYXJpemVyKSx0aGlzLmJpYXNSZWd1bGFyaXplcj1FdChlLmJpYXNSZWd1bGFyaXplciksdGhpcy5rZXJuZWxDb25zdHJhaW50PXJuKGUua2VybmVsQ29uc3RyYWludCksdGhpcy5yZWN1cnJlbnRDb25zdHJhaW50PXJuKGUucmVjdXJyZW50Q29uc3RyYWludCksdGhpcy5iaWFzQ29uc3RyYWludD1ybihlLmJpYXNDb25zdHJhaW50KSx0aGlzLmRyb3BvdXQ9dmwoWzEsZGkoWzAsZS5kcm9wb3V0PT1udWxsPzA6ZS5kcm9wb3V0XSldKSx0aGlzLnJlY3VycmVudERyb3BvdXQ9dmwoWzEsZGkoWzAsZS5yZWN1cnJlbnREcm9wb3V0PT1udWxsPzA6ZS5yZWN1cnJlbnREcm9wb3V0XSldKSx0aGlzLmRyb3BvdXRGdW5jPWUuZHJvcG91dEZ1bmMsdGhpcy5zdGF0ZVNpemU9dGhpcy51bml0cyx0aGlzLmRyb3BvdXRNYXNrPW51bGwsdGhpcy5yZWN1cnJlbnREcm9wb3V0TWFzaz1udWxsfWJ1aWxkKGUpe2U9YXQoZSksdGhpcy5rZXJuZWw9dGhpcy5hZGRXZWlnaHQoImtlcm5lbCIsW2VbZS5sZW5ndGgtMV0sdGhpcy51bml0c10sbnVsbCx0aGlzLmtlcm5lbEluaXRpYWxpemVyLHRoaXMua2VybmVsUmVndWxhcml6ZXIsITAsdGhpcy5rZXJuZWxDb25zdHJhaW50KSx0aGlzLnJlY3VycmVudEtlcm5lbD10aGlzLmFkZFdlaWdodCgicmVjdXJyZW50X2tlcm5lbCIsW3RoaXMudW5pdHMsdGhpcy51bml0c10sbnVsbCx0aGlzLnJlY3VycmVudEluaXRpYWxpemVyLHRoaXMucmVjdXJyZW50UmVndWxhcml6ZXIsITAsdGhpcy5yZWN1cnJlbnRDb25zdHJhaW50KSx0aGlzLnVzZUJpYXM/dGhpcy5iaWFzPXRoaXMuYWRkV2VpZ2h0KCJiaWFzIixbdGhpcy51bml0c10sbnVsbCx0aGlzLmJpYXNJbml0aWFsaXplcix0aGlzLmJpYXNSZWd1bGFyaXplciwhMCx0aGlzLmJpYXNDb25zdHJhaW50KTp0aGlzLmJpYXM9bnVsbCx0aGlzLmJ1aWx0PSEwfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9PntpZihlPWUsZS5sZW5ndGghPT0yKXRocm93IG5ldyBlZShgU2ltcGxlUk5OQ2VsbCBleHBlY3RzIDIgaW5wdXQgVGVuc29ycywgZ290ICR7ZS5sZW5ndGh9LmApO2xldCBzPWVbMV07ZT1lWzBdO2NvbnN0IHI9dC50cmFpbmluZz09bnVsbD8hMTp0LnRyYWluaW5nOzA8dGhpcy5kcm9wb3V0JiZ0aGlzLmRyb3BvdXQ8MSYmdGhpcy5kcm9wb3V0TWFzaz09bnVsbCYmKHRoaXMuZHJvcG91dE1hc2s9Zmkoe29uZXM6KCk9PnZzKGUpLHJhdGU6dGhpcy5kcm9wb3V0LHRyYWluaW5nOnIsZHJvcG91dEZ1bmM6dGhpcy5kcm9wb3V0RnVuY30pKSwwPHRoaXMucmVjdXJyZW50RHJvcG91dCYmdGhpcy5yZWN1cnJlbnREcm9wb3V0PDEmJnRoaXMucmVjdXJyZW50RHJvcG91dE1hc2s9PW51bGwmJih0aGlzLnJlY3VycmVudERyb3BvdXRNYXNrPWZpKHtvbmVzOigpPT52cyhzKSxyYXRlOnRoaXMucmVjdXJyZW50RHJvcG91dCx0cmFpbmluZzpyLGRyb3BvdXRGdW5jOnRoaXMuZHJvcG91dEZ1bmN9KSk7bGV0IG87Y29uc3QgaT10aGlzLmRyb3BvdXRNYXNrLGE9dGhpcy5yZWN1cnJlbnREcm9wb3V0TWFzaztpIT1udWxsP289anIoWChlLGkpLHRoaXMua2VybmVsLnJlYWQoKSk6bz1qcihlLHRoaXMua2VybmVsLnJlYWQoKSksdGhpcy5iaWFzIT1udWxsJiYobz1UcihvLHRoaXMuYmlhcy5yZWFkKCkpKSxhIT1udWxsJiYocz1YKHMsYSkpO2xldCBsPW1lKG8sanIocyx0aGlzLnJlY3VycmVudEtlcm5lbC5yZWFkKCkpKTtyZXR1cm4gdGhpcy5hY3RpdmF0aW9uIT1udWxsJiYobD10aGlzLmFjdGl2YXRpb24uYXBwbHkobCkpLFtsLGxdfSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT1zdXBlci5nZXRDb25maWcoKSx0PXt1bml0czp0aGlzLnVuaXRzLGFjdGl2YXRpb246aGkodGhpcy5hY3RpdmF0aW9uKSx1c2VCaWFzOnRoaXMudXNlQmlhcyxrZXJuZWxJbml0aWFsaXplcjpPdCh0aGlzLmtlcm5lbEluaXRpYWxpemVyKSxyZWN1cnJlbnRJbml0aWFsaXplcjpPdCh0aGlzLnJlY3VycmVudEluaXRpYWxpemVyKSxiaWFzSW5pdGlhbGl6ZXI6T3QodGhpcy5iaWFzSW5pdGlhbGl6ZXIpLGtlcm5lbFJlZ3VsYXJpemVyOnZ0KHRoaXMua2VybmVsUmVndWxhcml6ZXIpLHJlY3VycmVudFJlZ3VsYXJpemVyOnZ0KHRoaXMucmVjdXJyZW50UmVndWxhcml6ZXIpLGJpYXNSZWd1bGFyaXplcjp2dCh0aGlzLmJpYXNSZWd1bGFyaXplciksYWN0aXZpdHlSZWd1bGFyaXplcjp2dCh0aGlzLmFjdGl2aXR5UmVndWxhcml6ZXIpLGtlcm5lbENvbnN0cmFpbnQ6c24odGhpcy5rZXJuZWxDb25zdHJhaW50KSxyZWN1cnJlbnRDb25zdHJhaW50OnNuKHRoaXMucmVjdXJyZW50Q29uc3RyYWludCksYmlhc0NvbnN0cmFpbnQ6c24odGhpcy5iaWFzQ29uc3RyYWludCksZHJvcG91dDp0aGlzLmRyb3BvdXQscmVjdXJyZW50RHJvcG91dDp0aGlzLnJlY3VycmVudERyb3BvdXR9O3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSksdCl9fUh3LmNsYXNzTmFtZT0iU2ltcGxlUk5OQ2VsbCI7Z2UoSHcpO2NsYXNzIEpUIGV4dGVuZHMga2l7Y29uc3RydWN0b3IoZSl7ZS5jZWxsPW5ldyBIdyhlKSxzdXBlcihlKX1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57dGhpcy5jZWxsLmRyb3BvdXRNYXNrIT1udWxsJiYoWWUodGhpcy5jZWxsLmRyb3BvdXRNYXNrKSx0aGlzLmNlbGwuZHJvcG91dE1hc2s9bnVsbCksdGhpcy5jZWxsLnJlY3VycmVudERyb3BvdXRNYXNrIT1udWxsJiYoWWUodGhpcy5jZWxsLnJlY3VycmVudERyb3BvdXRNYXNrKSx0aGlzLmNlbGwucmVjdXJyZW50RHJvcG91dE1hc2s9bnVsbCk7Y29uc3Qgcz10PT1udWxsP251bGw6dC5tYXNrLHI9dD09bnVsbD9udWxsOnQudHJhaW5pbmcsbz10PT1udWxsP251bGw6dC5pbml0aWFsU3RhdGU7cmV0dXJuIHN1cGVyLmNhbGwoZSx7bWFzazpzLHRyYWluaW5nOnIsaW5pdGlhbFN0YXRlOm99KX0pfXN0YXRpYyBmcm9tQ29uZmlnKGUsdCl7cmV0dXJuIG5ldyBlKHQpfX1KVC5jbGFzc05hbWU9IlNpbXBsZVJOTiI7Z2UoSlQpO2NsYXNzIHF3IGV4dGVuZHMgc3l7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoZSksdGhpcy5ERUZBVUxUX0FDVElWQVRJT049InRhbmgiLHRoaXMuREVGQVVMVF9SRUNVUlJFTlRfQUNUSVZBVElPTj0iaGFyZFNpZ21vaWQiLHRoaXMuREVGQVVMVF9LRVJORUxfSU5JVElBTElaRVI9Imdsb3JvdE5vcm1hbCIsdGhpcy5ERUZBVUxUX1JFQ1VSUkVOVF9JTklUSUFMSVpFUj0ib3J0aG9nb25hbCIsdGhpcy5ERUZBVUxUX0JJQVNfSU5JVElBTElaRVI9Inplcm9zIixlLnJlc2V0QWZ0ZXIpdGhyb3cgbmV3IGVlKCJHUlVDZWxsIGRvZXMgbm90IHN1cHBvcnQgcmVzZXRfYWZ0ZXIgcGFyYW1ldGVyIHNldCB0byB0cnVlLiIpO3RoaXMudW5pdHM9ZS51bml0cyxkbih0aGlzLnVuaXRzLCJ1bml0cyIpLHRoaXMuYWN0aXZhdGlvbj1waShlLmFjdGl2YXRpb249PT12b2lkIDA/dGhpcy5ERUZBVUxUX0FDVElWQVRJT046ZS5hY3RpdmF0aW9uKSx0aGlzLnJlY3VycmVudEFjdGl2YXRpb249cGkoZS5yZWN1cnJlbnRBY3RpdmF0aW9uPT09dm9pZCAwP3RoaXMuREVGQVVMVF9SRUNVUlJFTlRfQUNUSVZBVElPTjplLnJlY3VycmVudEFjdGl2YXRpb24pLHRoaXMudXNlQmlhcz1lLnVzZUJpYXM9PW51bGw/ITA6ZS51c2VCaWFzLHRoaXMua2VybmVsSW5pdGlhbGl6ZXI9VHQoZS5rZXJuZWxJbml0aWFsaXplcnx8dGhpcy5ERUZBVUxUX0tFUk5FTF9JTklUSUFMSVpFUiksdGhpcy5yZWN1cnJlbnRJbml0aWFsaXplcj1UdChlLnJlY3VycmVudEluaXRpYWxpemVyfHx0aGlzLkRFRkFVTFRfUkVDVVJSRU5UX0lOSVRJQUxJWkVSKSx0aGlzLmJpYXNJbml0aWFsaXplcj1UdChlLmJpYXNJbml0aWFsaXplcnx8dGhpcy5ERUZBVUxUX0JJQVNfSU5JVElBTElaRVIpLHRoaXMua2VybmVsUmVndWxhcml6ZXI9RXQoZS5rZXJuZWxSZWd1bGFyaXplciksdGhpcy5yZWN1cnJlbnRSZWd1bGFyaXplcj1FdChlLnJlY3VycmVudFJlZ3VsYXJpemVyKSx0aGlzLmJpYXNSZWd1bGFyaXplcj1FdChlLmJpYXNSZWd1bGFyaXplciksdGhpcy5rZXJuZWxDb25zdHJhaW50PXJuKGUua2VybmVsQ29uc3RyYWludCksdGhpcy5yZWN1cnJlbnRDb25zdHJhaW50PXJuKGUucmVjdXJyZW50Q29uc3RyYWludCksdGhpcy5iaWFzQ29uc3RyYWludD1ybihlLmJpYXNDb25zdHJhaW50KSx0aGlzLmRyb3BvdXQ9dmwoWzEsZGkoWzAsZS5kcm9wb3V0PT1udWxsPzA6ZS5kcm9wb3V0XSldKSx0aGlzLnJlY3VycmVudERyb3BvdXQ9dmwoWzEsZGkoWzAsZS5yZWN1cnJlbnREcm9wb3V0PT1udWxsPzA6ZS5yZWN1cnJlbnREcm9wb3V0XSldKSx0aGlzLmRyb3BvdXRGdW5jPWUuZHJvcG91dEZ1bmMsdGhpcy5pbXBsZW1lbnRhdGlvbj1lLmltcGxlbWVudGF0aW9uLHRoaXMuc3RhdGVTaXplPXRoaXMudW5pdHMsdGhpcy5kcm9wb3V0TWFzaz1udWxsLHRoaXMucmVjdXJyZW50RHJvcG91dE1hc2s9bnVsbH1idWlsZChlKXtlPWF0KGUpO2NvbnN0IHQ9ZVtlLmxlbmd0aC0xXTt0aGlzLmtlcm5lbD10aGlzLmFkZFdlaWdodCgia2VybmVsIixbdCx0aGlzLnVuaXRzKjNdLG51bGwsdGhpcy5rZXJuZWxJbml0aWFsaXplcix0aGlzLmtlcm5lbFJlZ3VsYXJpemVyLCEwLHRoaXMua2VybmVsQ29uc3RyYWludCksdGhpcy5yZWN1cnJlbnRLZXJuZWw9dGhpcy5hZGRXZWlnaHQoInJlY3VycmVudF9rZXJuZWwiLFt0aGlzLnVuaXRzLHRoaXMudW5pdHMqM10sbnVsbCx0aGlzLnJlY3VycmVudEluaXRpYWxpemVyLHRoaXMucmVjdXJyZW50UmVndWxhcml6ZXIsITAsdGhpcy5yZWN1cnJlbnRDb25zdHJhaW50KSx0aGlzLnVzZUJpYXM/dGhpcy5iaWFzPXRoaXMuYWRkV2VpZ2h0KCJiaWFzIixbdGhpcy51bml0cyozXSxudWxsLHRoaXMuYmlhc0luaXRpYWxpemVyLHRoaXMuYmlhc1JlZ3VsYXJpemVyLCEwLHRoaXMuYmlhc0NvbnN0cmFpbnQpOnRoaXMuYmlhcz1udWxsLHRoaXMuYnVpbHQ9ITB9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2lmKGU9ZSxlLmxlbmd0aCE9PTIpdGhyb3cgbmV3IGVlKGBHUlVDZWxsIGV4cGVjdHMgMiBpbnB1dCBUZW5zb3JzIChpbnB1dHMsIGgsIGMpLCBnb3QgJHtlLmxlbmd0aH0uYCk7Y29uc3Qgcz10LnRyYWluaW5nPT1udWxsPyExOnQudHJhaW5pbmc7bGV0IHI9ZVsxXTtlPWVbMF0sMDx0aGlzLmRyb3BvdXQmJnRoaXMuZHJvcG91dDwxJiZ0aGlzLmRyb3BvdXRNYXNrPT1udWxsJiYodGhpcy5kcm9wb3V0TWFzaz1maSh7b25lczooKT0+dnMoZSkscmF0ZTp0aGlzLmRyb3BvdXQsdHJhaW5pbmc6cyxjb3VudDozLGRyb3BvdXRGdW5jOnRoaXMuZHJvcG91dEZ1bmN9KSksMDx0aGlzLnJlY3VycmVudERyb3BvdXQmJnRoaXMucmVjdXJyZW50RHJvcG91dDwxJiZ0aGlzLnJlY3VycmVudERyb3BvdXRNYXNrPT1udWxsJiYodGhpcy5yZWN1cnJlbnREcm9wb3V0TWFzaz1maSh7b25lczooKT0+dnMocikscmF0ZTp0aGlzLnJlY3VycmVudERyb3BvdXQsdHJhaW5pbmc6cyxjb3VudDozLGRyb3BvdXRGdW5jOnRoaXMuZHJvcG91dEZ1bmN9KSk7Y29uc3Qgbz10aGlzLmRyb3BvdXRNYXNrLGk9dGhpcy5yZWN1cnJlbnREcm9wb3V0TWFzaztsZXQgYSxsLGM7MDx0aGlzLmRyb3BvdXQmJnRoaXMuZHJvcG91dDwxJiYoZT1YKGUsb1swXSkpO2xldCBoPWpyKGUsdGhpcy5rZXJuZWwucmVhZCgpKTt0aGlzLnVzZUJpYXMmJihoPVRyKGgsdGhpcy5iaWFzLnJlYWQoKSkpLDA8dGhpcy5yZWN1cnJlbnREcm9wb3V0JiZ0aGlzLnJlY3VycmVudERyb3BvdXQ8MSYmKHI9WChyLGlbMF0pKTtjb25zdCBwPXRoaXMucmVjdXJyZW50S2VybmVsLnJlYWQoKSxbZixnXT1lcyhwLFsyKnRoaXMudW5pdHMsdGhpcy51bml0c10scC5yYW5rLTEpLHk9anIocixmKSxbdyxiLHZdPWVzKGgsMyxoLnJhbmstMSksW1MsJF09ZXMoeSwyLHkucmFuay0xKTthPXRoaXMucmVjdXJyZW50QWN0aXZhdGlvbi5hcHBseShtZSh3LFMpKSxsPXRoaXMucmVjdXJyZW50QWN0aXZhdGlvbi5hcHBseShtZShiLCQpKTtjb25zdCBrPWpyKFgobCxyKSxnKTtjPXRoaXMuYWN0aXZhdGlvbi5hcHBseShtZSh2LGspKTtjb25zdCBUPW1lKFgoYSxyKSxYKG1lKDEsTnQoYSkpLGMpKTtyZXR1cm5bVCxUXX0pfWdldENvbmZpZygpe2NvbnN0IGU9c3VwZXIuZ2V0Q29uZmlnKCksdD17dW5pdHM6dGhpcy51bml0cyxhY3RpdmF0aW9uOmhpKHRoaXMuYWN0aXZhdGlvbikscmVjdXJyZW50QWN0aXZhdGlvbjpoaSh0aGlzLnJlY3VycmVudEFjdGl2YXRpb24pLHVzZUJpYXM6dGhpcy51c2VCaWFzLGtlcm5lbEluaXRpYWxpemVyOk90KHRoaXMua2VybmVsSW5pdGlhbGl6ZXIpLHJlY3VycmVudEluaXRpYWxpemVyOk90KHRoaXMucmVjdXJyZW50SW5pdGlhbGl6ZXIpLGJpYXNJbml0aWFsaXplcjpPdCh0aGlzLmJpYXNJbml0aWFsaXplciksa2VybmVsUmVndWxhcml6ZXI6dnQodGhpcy5rZXJuZWxSZWd1bGFyaXplcikscmVjdXJyZW50UmVndWxhcml6ZXI6dnQodGhpcy5yZWN1cnJlbnRSZWd1bGFyaXplciksYmlhc1JlZ3VsYXJpemVyOnZ0KHRoaXMuYmlhc1JlZ3VsYXJpemVyKSxhY3Rpdml0eVJlZ3VsYXJpemVyOnZ0KHRoaXMuYWN0aXZpdHlSZWd1bGFyaXplciksa2VybmVsQ29uc3RyYWludDpzbih0aGlzLmtlcm5lbENvbnN0cmFpbnQpLHJlY3VycmVudENvbnN0cmFpbnQ6c24odGhpcy5yZWN1cnJlbnRDb25zdHJhaW50KSxiaWFzQ29uc3RyYWludDpzbih0aGlzLmJpYXNDb25zdHJhaW50KSxkcm9wb3V0OnRoaXMuZHJvcG91dCxyZWN1cnJlbnREcm9wb3V0OnRoaXMucmVjdXJyZW50RHJvcG91dCxpbXBsZW1lbnRhdGlvbjp0aGlzLmltcGxlbWVudGF0aW9uLHJlc2V0QWZ0ZXI6ITF9O3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSksdCl9fXF3LmNsYXNzTmFtZT0iR1JVQ2VsbCI7Z2UocXcpO2NsYXNzIGVFIGV4dGVuZHMga2l7Y29uc3RydWN0b3IoZSl7ZS5pbXBsZW1lbnRhdGlvbj09PTAmJmNvbnNvbGUud2FybigiYGltcGxlbWVudGF0aW9uPTBgIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIGFuZCBub3cgZGVmYXVsdHMgdG8gYGltcGxlbWVudGF0aW9uPTFgLiBQbGVhc2UgdXBkYXRlIHlvdXIgbGF5ZXIgY2FsbC4iKSxlLmNlbGw9bmV3IHF3KGUpLHN1cGVyKGUpfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pnt0aGlzLmNlbGwuZHJvcG91dE1hc2shPW51bGwmJihZZSh0aGlzLmNlbGwuZHJvcG91dE1hc2spLHRoaXMuY2VsbC5kcm9wb3V0TWFzaz1udWxsKSx0aGlzLmNlbGwucmVjdXJyZW50RHJvcG91dE1hc2shPW51bGwmJihZZSh0aGlzLmNlbGwucmVjdXJyZW50RHJvcG91dE1hc2spLHRoaXMuY2VsbC5yZWN1cnJlbnREcm9wb3V0TWFzaz1udWxsKTtjb25zdCBzPXQ9PW51bGw/bnVsbDp0Lm1hc2sscj10PT1udWxsP251bGw6dC50cmFpbmluZyxvPXQ9PW51bGw/bnVsbDp0LmluaXRpYWxTdGF0ZTtyZXR1cm4gc3VwZXIuY2FsbChlLHttYXNrOnMsdHJhaW5pbmc6cixpbml0aWFsU3RhdGU6b30pfSl9c3RhdGljIGZyb21Db25maWcoZSx0KXtyZXR1cm4gdC5pbXBsbWVudGF0aW9uPT09MCYmKHQuaW1wbGVtZW50YXRpb249MSksbmV3IGUodCl9fWVFLmNsYXNzTmFtZT0iR1JVIjtnZShlRSk7Y2xhc3MgcnkgZXh0ZW5kcyBzeXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLkRFRkFVTFRfQUNUSVZBVElPTj0idGFuaCIsdGhpcy5ERUZBVUxUX1JFQ1VSUkVOVF9BQ1RJVkFUSU9OPSJoYXJkU2lnbW9pZCIsdGhpcy5ERUZBVUxUX0tFUk5FTF9JTklUSUFMSVpFUj0iZ2xvcm90Tm9ybWFsIix0aGlzLkRFRkFVTFRfUkVDVVJSRU5UX0lOSVRJQUxJWkVSPSJvcnRob2dvbmFsIix0aGlzLkRFRkFVTFRfQklBU19JTklUSUFMSVpFUj0iemVyb3MiLHRoaXMudW5pdHM9ZS51bml0cyxkbih0aGlzLnVuaXRzLCJ1bml0cyIpLHRoaXMuYWN0aXZhdGlvbj1waShlLmFjdGl2YXRpb249PT12b2lkIDA/dGhpcy5ERUZBVUxUX0FDVElWQVRJT046ZS5hY3RpdmF0aW9uKSx0aGlzLnJlY3VycmVudEFjdGl2YXRpb249cGkoZS5yZWN1cnJlbnRBY3RpdmF0aW9uPT09dm9pZCAwP3RoaXMuREVGQVVMVF9SRUNVUlJFTlRfQUNUSVZBVElPTjplLnJlY3VycmVudEFjdGl2YXRpb24pLHRoaXMudXNlQmlhcz1lLnVzZUJpYXM9PW51bGw/ITA6ZS51c2VCaWFzLHRoaXMua2VybmVsSW5pdGlhbGl6ZXI9VHQoZS5rZXJuZWxJbml0aWFsaXplcnx8dGhpcy5ERUZBVUxUX0tFUk5FTF9JTklUSUFMSVpFUiksdGhpcy5yZWN1cnJlbnRJbml0aWFsaXplcj1UdChlLnJlY3VycmVudEluaXRpYWxpemVyfHx0aGlzLkRFRkFVTFRfUkVDVVJSRU5UX0lOSVRJQUxJWkVSKSx0aGlzLmJpYXNJbml0aWFsaXplcj1UdChlLmJpYXNJbml0aWFsaXplcnx8dGhpcy5ERUZBVUxUX0JJQVNfSU5JVElBTElaRVIpLHRoaXMudW5pdEZvcmdldEJpYXM9ZS51bml0Rm9yZ2V0Qmlhcyx0aGlzLmtlcm5lbFJlZ3VsYXJpemVyPUV0KGUua2VybmVsUmVndWxhcml6ZXIpLHRoaXMucmVjdXJyZW50UmVndWxhcml6ZXI9RXQoZS5yZWN1cnJlbnRSZWd1bGFyaXplciksdGhpcy5iaWFzUmVndWxhcml6ZXI9RXQoZS5iaWFzUmVndWxhcml6ZXIpLHRoaXMua2VybmVsQ29uc3RyYWludD1ybihlLmtlcm5lbENvbnN0cmFpbnQpLHRoaXMucmVjdXJyZW50Q29uc3RyYWludD1ybihlLnJlY3VycmVudENvbnN0cmFpbnQpLHRoaXMuYmlhc0NvbnN0cmFpbnQ9cm4oZS5iaWFzQ29uc3RyYWludCksdGhpcy5kcm9wb3V0PXZsKFsxLGRpKFswLGUuZHJvcG91dD09bnVsbD8wOmUuZHJvcG91dF0pXSksdGhpcy5yZWN1cnJlbnREcm9wb3V0PXZsKFsxLGRpKFswLGUucmVjdXJyZW50RHJvcG91dD09bnVsbD8wOmUucmVjdXJyZW50RHJvcG91dF0pXSksdGhpcy5kcm9wb3V0RnVuYz1lLmRyb3BvdXRGdW5jLHRoaXMuaW1wbGVtZW50YXRpb249ZS5pbXBsZW1lbnRhdGlvbix0aGlzLnN0YXRlU2l6ZT1bdGhpcy51bml0cyx0aGlzLnVuaXRzXSx0aGlzLmRyb3BvdXRNYXNrPW51bGwsdGhpcy5yZWN1cnJlbnREcm9wb3V0TWFzaz1udWxsfWJ1aWxkKGUpe3ZhciB0O2U9YXQoZSk7Y29uc3Qgcz1lW2UubGVuZ3RoLTFdO3RoaXMua2VybmVsPXRoaXMuYWRkV2VpZ2h0KCJrZXJuZWwiLFtzLHRoaXMudW5pdHMqNF0sbnVsbCx0aGlzLmtlcm5lbEluaXRpYWxpemVyLHRoaXMua2VybmVsUmVndWxhcml6ZXIsITAsdGhpcy5rZXJuZWxDb25zdHJhaW50KSx0aGlzLnJlY3VycmVudEtlcm5lbD10aGlzLmFkZFdlaWdodCgicmVjdXJyZW50X2tlcm5lbCIsW3RoaXMudW5pdHMsdGhpcy51bml0cyo0XSxudWxsLHRoaXMucmVjdXJyZW50SW5pdGlhbGl6ZXIsdGhpcy5yZWN1cnJlbnRSZWd1bGFyaXplciwhMCx0aGlzLnJlY3VycmVudENvbnN0cmFpbnQpO2xldCByO2lmKHRoaXMudXNlQmlhcyl7aWYodGhpcy51bml0Rm9yZ2V0Qmlhcyl7Y29uc3Qgbz10aGlzLmJpYXNJbml0aWFsaXplcixpPXRoaXMudW5pdHM7cj1uZXcodD1jbGFzcyBleHRlbmRzIHNye2FwcGx5KGwsYyl7Y29uc3QgaD1vLmFwcGx5KFtpXSkscD1uZXcgX3coKS5hcHBseShbaV0pLGY9by5hcHBseShbaSoyXSk7cmV0dXJuIEdrKEdrKGgscCksZil9fSx0LmNsYXNzTmFtZT0iQ3VzdG9tSW5pdCIsdCl9ZWxzZSByPXRoaXMuYmlhc0luaXRpYWxpemVyO3RoaXMuYmlhcz10aGlzLmFkZFdlaWdodCgiYmlhcyIsW3RoaXMudW5pdHMqNF0sbnVsbCxyLHRoaXMuYmlhc1JlZ3VsYXJpemVyLCEwLHRoaXMuYmlhc0NvbnN0cmFpbnQpfWVsc2UgdGhpcy5iaWFzPW51bGw7dGhpcy5idWlsdD0hMH1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57Y29uc3Qgcz10LnRyYWluaW5nPT1udWxsPyExOnQudHJhaW5pbmc7aWYoZT1lLGUubGVuZ3RoIT09Myl0aHJvdyBuZXcgZWUoYExTVE1DZWxsIGV4cGVjdHMgMyBpbnB1dCBUZW5zb3JzIChpbnB1dHMsIGgsIGMpLCBnb3QgJHtlLmxlbmd0aH0uYCk7bGV0IHI9ZVsxXTtjb25zdCBvPWVbMl07ZT1lWzBdLDA8dGhpcy5kcm9wb3V0JiZ0aGlzLmRyb3BvdXQ8MSYmdGhpcy5kcm9wb3V0TWFzaz09bnVsbCYmKHRoaXMuZHJvcG91dE1hc2s9Zmkoe29uZXM6KCk9PnZzKGUpLHJhdGU6dGhpcy5kcm9wb3V0LHRyYWluaW5nOnMsY291bnQ6NCxkcm9wb3V0RnVuYzp0aGlzLmRyb3BvdXRGdW5jfSkpLDA8dGhpcy5yZWN1cnJlbnREcm9wb3V0JiZ0aGlzLnJlY3VycmVudERyb3BvdXQ8MSYmdGhpcy5yZWN1cnJlbnREcm9wb3V0TWFzaz09bnVsbCYmKHRoaXMucmVjdXJyZW50RHJvcG91dE1hc2s9Zmkoe29uZXM6KCk9PnZzKHIpLHJhdGU6dGhpcy5yZWN1cnJlbnREcm9wb3V0LHRyYWluaW5nOnMsY291bnQ6NCxkcm9wb3V0RnVuYzp0aGlzLmRyb3BvdXRGdW5jfSkpO2NvbnN0IGk9dGhpcy5kcm9wb3V0TWFzayxhPXRoaXMucmVjdXJyZW50RHJvcG91dE1hc2s7bGV0IGwsYyxoLHA7MDx0aGlzLmRyb3BvdXQmJnRoaXMuZHJvcG91dDwxJiYoZT1YKGUsaVswXSkpO2xldCBmPWpyKGUsdGhpcy5rZXJuZWwucmVhZCgpKTswPHRoaXMucmVjdXJyZW50RHJvcG91dCYmdGhpcy5yZWN1cnJlbnREcm9wb3V0PDEmJihyPVgocixhWzBdKSksZj1tZShmLGpyKHIsdGhpcy5yZWN1cnJlbnRLZXJuZWwucmVhZCgpKSksdGhpcy51c2VCaWFzJiYoZj1UcihmLHRoaXMuYmlhcy5yZWFkKCkpKTtjb25zdFtnLHksdyxiXT1lcyhmLDQsZi5yYW5rLTEpO2w9dGhpcy5yZWN1cnJlbnRBY3RpdmF0aW9uLmFwcGx5KGcpLGM9dGhpcy5yZWN1cnJlbnRBY3RpdmF0aW9uLmFwcGx5KHkpLGg9bWUoWChjLG8pLFgobCx0aGlzLmFjdGl2YXRpb24uYXBwbHkodykpKSxwPXRoaXMucmVjdXJyZW50QWN0aXZhdGlvbi5hcHBseShiKTtjb25zdCB2PVgocCx0aGlzLmFjdGl2YXRpb24uYXBwbHkoaCkpO3JldHVyblt2LHYsaF19KX1nZXRDb25maWcoKXtjb25zdCBlPXN1cGVyLmdldENvbmZpZygpLHQ9e3VuaXRzOnRoaXMudW5pdHMsYWN0aXZhdGlvbjpoaSh0aGlzLmFjdGl2YXRpb24pLHJlY3VycmVudEFjdGl2YXRpb246aGkodGhpcy5yZWN1cnJlbnRBY3RpdmF0aW9uKSx1c2VCaWFzOnRoaXMudXNlQmlhcyxrZXJuZWxJbml0aWFsaXplcjpPdCh0aGlzLmtlcm5lbEluaXRpYWxpemVyKSxyZWN1cnJlbnRJbml0aWFsaXplcjpPdCh0aGlzLnJlY3VycmVudEluaXRpYWxpemVyKSxiaWFzSW5pdGlhbGl6ZXI6T3QodGhpcy5iaWFzSW5pdGlhbGl6ZXIpLHVuaXRGb3JnZXRCaWFzOnRoaXMudW5pdEZvcmdldEJpYXMsa2VybmVsUmVndWxhcml6ZXI6dnQodGhpcy5rZXJuZWxSZWd1bGFyaXplcikscmVjdXJyZW50UmVndWxhcml6ZXI6dnQodGhpcy5yZWN1cnJlbnRSZWd1bGFyaXplciksYmlhc1JlZ3VsYXJpemVyOnZ0KHRoaXMuYmlhc1JlZ3VsYXJpemVyKSxhY3Rpdml0eVJlZ3VsYXJpemVyOnZ0KHRoaXMuYWN0aXZpdHlSZWd1bGFyaXplciksa2VybmVsQ29uc3RyYWludDpzbih0aGlzLmtlcm5lbENvbnN0cmFpbnQpLHJlY3VycmVudENvbnN0cmFpbnQ6c24odGhpcy5yZWN1cnJlbnRDb25zdHJhaW50KSxiaWFzQ29uc3RyYWludDpzbih0aGlzLmJpYXNDb25zdHJhaW50KSxkcm9wb3V0OnRoaXMuZHJvcG91dCxyZWN1cnJlbnREcm9wb3V0OnRoaXMucmVjdXJyZW50RHJvcG91dCxpbXBsZW1lbnRhdGlvbjp0aGlzLmltcGxlbWVudGF0aW9ufTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHQpfX1yeS5jbGFzc05hbWU9IkxTVE1DZWxsIjtnZShyeSk7Y2xhc3MgdEUgZXh0ZW5kcyBraXtjb25zdHJ1Y3RvcihlKXtlLmltcGxlbWVudGF0aW9uPT09MCYmY29uc29sZS53YXJuKCJgaW1wbGVtZW50YXRpb249MGAgaGFzIGJlZW4gZGVwcmVjYXRlZCwgYW5kIG5vdyBkZWZhdWx0cyB0byBgaW1wbGVtZW50YXRpb249MWAuIFBsZWFzZSB1cGRhdGUgeW91ciBsYXllciBjYWxsLiIpLGUuY2VsbD1uZXcgcnkoZSksc3VwZXIoZSl9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e3RoaXMuY2VsbC5kcm9wb3V0TWFzayE9bnVsbCYmKFllKHRoaXMuY2VsbC5kcm9wb3V0TWFzayksdGhpcy5jZWxsLmRyb3BvdXRNYXNrPW51bGwpLHRoaXMuY2VsbC5yZWN1cnJlbnREcm9wb3V0TWFzayE9bnVsbCYmKFllKHRoaXMuY2VsbC5yZWN1cnJlbnREcm9wb3V0TWFzayksdGhpcy5jZWxsLnJlY3VycmVudERyb3BvdXRNYXNrPW51bGwpO2NvbnN0IHM9dD09bnVsbD9udWxsOnQubWFzayxyPXQ9PW51bGw/bnVsbDp0LnRyYWluaW5nLG89dD09bnVsbD9udWxsOnQuaW5pdGlhbFN0YXRlO3JldHVybiBzdXBlci5jYWxsKGUse21hc2s6cyx0cmFpbmluZzpyLGluaXRpYWxTdGF0ZTpvfSl9KX1zdGF0aWMgZnJvbUNvbmZpZyhlLHQpe3JldHVybiB0LmltcGxtZW50YXRpb249PT0wJiYodC5pbXBsZW1lbnRhdGlvbj0xKSxuZXcgZSh0KX19dEUuY2xhc3NOYW1lPSJMU1RNIjtnZSh0RSk7Y2xhc3MgS3cgZXh0ZW5kcyBzeXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmNlbGxzPWUuY2VsbHN9Z2V0IHN0YXRlU2l6ZSgpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2YgdGhpcy5jZWxscy5zbGljZSgpLnJldmVyc2UoKSlBcnJheS5pc0FycmF5KHQuc3RhdGVTaXplKT9lLnB1c2goLi4udC5zdGF0ZVNpemUpOmUucHVzaCh0LnN0YXRlU2l6ZSk7cmV0dXJuIGV9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2U9ZTtsZXQgcz1lLnNsaWNlKDEpO2NvbnN0IHI9W107Zm9yKGNvbnN0IGEgb2YgdGhpcy5jZWxscy5zbGljZSgpLnJldmVyc2UoKSlBcnJheS5pc0FycmF5KGEuc3RhdGVTaXplKT9yLnB1c2gocy5zcGxpY2UoMCxhLnN0YXRlU2l6ZS5sZW5ndGgpKTpyLnB1c2gocy5zcGxpY2UoMCwxKSk7ci5yZXZlcnNlKCk7Y29uc3Qgbz1bXTtsZXQgaTtmb3IobGV0IGE9MDthPHRoaXMuY2VsbHMubGVuZ3RoOysrYSl7Y29uc3QgbD10aGlzLmNlbGxzW2FdO3M9clthXSxhPT09MD9pPVtlWzBdXS5jb25jYXQocyk6aT1baVswXV0uY29uY2F0KHMpLGk9bC5jYWxsKGksdCksby5wdXNoKGkuc2xpY2UoMSkpfXM9W107Zm9yKGNvbnN0IGEgb2Ygby5zbGljZSgpLnJldmVyc2UoKSlzLnB1c2goLi4uYSk7cmV0dXJuW2lbMF1dLmNvbmNhdChzKX0pfWJ1aWxkKGUpe0owKGUpJiYoZT1lWzBdKSxlPWU7bGV0IHQ7dGhpcy5jZWxscy5mb3JFYWNoKChzLHIpPT57bmEoYFJOTkNlbGxfJHtyfWAsKCk9PntzLmJ1aWxkKGUpLEFycmF5LmlzQXJyYXkocy5zdGF0ZVNpemUpP3Q9cy5zdGF0ZVNpemVbMF06dD1zLnN0YXRlU2l6ZSxlPVtlWzBdLHRdfSl9KSx0aGlzLmJ1aWx0PSEwfWdldENvbmZpZygpe2NvbnN0IGU9c3VwZXIuZ2V0Q29uZmlnKCksdD1vPT4oe2NsYXNzTmFtZTpvLmdldENsYXNzTmFtZSgpLGNvbmZpZzpvLmdldENvbmZpZygpfSkscj17Y2VsbHM6dGhpcy5jZWxscy5tYXAodCl9O3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkscil9c3RhdGljIGZyb21Db25maWcoZSx0LHM9e30pe2NvbnN0IHI9W107Zm9yKGNvbnN0IG8gb2YgdC5jZWxscylyLnB1c2gobW8obyxzKSk7cmV0dXJuIG5ldyBlKHtjZWxsczpyfSl9Z2V0IHRyYWluYWJsZVdlaWdodHMoKXtpZighdGhpcy50cmFpbmFibGUpcmV0dXJuW107Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBvZiB0aGlzLmNlbGxzKWUucHVzaCguLi50LnRyYWluYWJsZVdlaWdodHMpO3JldHVybiBlfWdldCBub25UcmFpbmFibGVXZWlnaHRzKCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBvZiB0aGlzLmNlbGxzKWUucHVzaCguLi50Lm5vblRyYWluYWJsZVdlaWdodHMpO2lmKCF0aGlzLnRyYWluYWJsZSl7Y29uc3QgdD1bXTtmb3IoY29uc3QgcyBvZiB0aGlzLmNlbGxzKXQucHVzaCguLi5zLnRyYWluYWJsZVdlaWdodHMpO3JldHVybiB0LmNvbmNhdChlKX1yZXR1cm4gZX1nZXRXZWlnaHRzKCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBvZiB0aGlzLmNlbGxzKWUucHVzaCguLi50LndlaWdodHMpO3JldHVybiBlMShlKX1zZXRXZWlnaHRzKGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IHMgb2YgdGhpcy5jZWxscyl7Y29uc3Qgcj1zLndlaWdodHMubGVuZ3RoLG89ZS5zcGxpY2Uocik7Zm9yKGxldCBpPTA7aTxzLndlaWdodHMubGVuZ3RoOysraSl0LnB1c2goW3Mud2VpZ2h0c1tpXSxvW2ldXSl9QncodCl9fUt3LmNsYXNzTmFtZT0iU3RhY2tlZFJOTkNlbGxzIjtnZShLdyk7ZnVuY3Rpb24gZmkobil7Y29uc3R7b25lczplLHJhdGU6dCx0cmFpbmluZzpzPSExLGNvdW50OnI9MSxkcm9wb3V0RnVuYzpvfT1uLGk9KCk9Pm8hPW51bGw/byhlKCksdCk6SDIoZSgpLHQpLGE9KCk9PlRoKGksZSxzKTtyZXR1cm4hcnx8cjw9MT9lbihhKCkuY2xvbmUoKSk6QXJyYXkocikuZmlsbCh2b2lkIDApLm1hcChhKS5tYXAoYz0+ZW4oYy5jbG9uZSgpKSl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovdmFyIGxHPWZ1bmN0aW9uKG4sZSl7dmFyIHQ9e307Zm9yKHZhciBzIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4scykmJmUuaW5kZXhPZihzKTwwJiYodFtzXT1uW3NdKTtpZihuIT1udWxsJiZ0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz09ImZ1bmN0aW9uIilmb3IodmFyIHI9MCxzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMobik7cjxzLmxlbmd0aDtyKyspZS5pbmRleE9mKHNbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChuLHNbcl0pJiYodFtzW3JdXT1uW3Nbcl1dKTtyZXR1cm4gdH07Y2xhc3MgbkUgZXh0ZW5kcyBraXtjb25zdHJ1Y3RvcihlKXtpZihlLnVucm9sbCl0aHJvdyBuZXcgS2UoIlVucm9sbGluZyBpcyBub3QgcG9zc2libGUgd2l0aCBjb252b2x1dGlvbmFsIFJOTnMuIik7aWYoQXJyYXkuaXNBcnJheShlLmNlbGwpKXRocm93IG5ldyBLZSgiSXQgaXMgbm90IHBvc3NpYmxlIGF0IHRoZSBtb21lbnQgdG8gc3RhY2sgY29udm9sdXRpb25hbCBjZWxscy4iKTtzdXBlcihlKSx0aGlzLmlucHV0U3BlYz1bbmV3IG5uKHtuZGltOjV9KV19Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2lmKHRoaXMuY2VsbC5kcm9wb3V0TWFzayE9bnVsbCYmKFllKHRoaXMuY2VsbC5kcm9wb3V0TWFzayksdGhpcy5jZWxsLmRyb3BvdXRNYXNrPW51bGwpLHRoaXMuY2VsbC5yZWN1cnJlbnREcm9wb3V0TWFzayE9bnVsbCYmKFllKHRoaXMuY2VsbC5yZWN1cnJlbnREcm9wb3V0TWFzayksdGhpcy5jZWxsLnJlY3VycmVudERyb3BvdXRNYXNrPW51bGwpLHQmJnQuY29uc3RhbnRzKXRocm93IG5ldyBlZSgiQ29udlJOTjJEIGNlbGwgZG9lcyBub3Qgc3VwcG9ydCBjb25zdGFudHMiKTtjb25zdCBzPXQ9PW51bGw/bnVsbDp0Lm1hc2sscj10PT1udWxsP251bGw6dC50cmFpbmluZyxvPXQ9PW51bGw/bnVsbDp0LmluaXRpYWxTdGF0ZTtyZXR1cm4gc3VwZXIuY2FsbChlLHttYXNrOnMsdHJhaW5pbmc6cixpbml0aWFsU3RhdGU6b30pfSl9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2xldCB0PXRoaXMuY29tcHV0ZVNpbmdsZU91dHB1dFNoYXBlKGUpO3JldHVybiB0aGlzLnJldHVyblNlcXVlbmNlc3x8KHQ9W3RbMF0sLi4udC5zbGljZSgyKV0pLHRoaXMucmV0dXJuU3RhdGUmJih0PVt0LC4uLkFycmF5KDIpLmZpbGwoW2VbMF0sLi4udC5zbGljZSgtMyldKV0pLHR9Z2V0SW5pdGlhbFN0YXRlKGUpe3JldHVybiByZSgoKT0+e2NvbnN0e3N0YXRlU2l6ZTp0fT10aGlzLmNlbGwscz1lLnNoYXBlLHI9dGhpcy5jb21wdXRlU2luZ2xlT3V0cHV0U2hhcGUocyksbz1bclswXSwuLi5yLnNsaWNlKDIpXSxpPVl0KG8pO3JldHVybiBBcnJheS5pc0FycmF5KHQpP0FycmF5KHQubGVuZ3RoKS5maWxsKGkpOltpXX0pfXJlc2V0U3RhdGVzKGUsdD0hMSl7cmUoKCk9PntpZighdGhpcy5zdGF0ZWZ1bCl0aHJvdyBuZXcgRnIoIkNhbm5vdCBjYWxsIHJlc2V0U3RhdGVzKCkgb24gYW4gUk5OIExheWVyIHRoYXQgaXMgbm90IHN0YXRlZnVsLiIpO2NvbnN0IHM9dGhpcy5pbnB1dFNwZWNbMF0uc2hhcGUscj10aGlzLmNvbXB1dGVTaW5nbGVPdXRwdXRTaGFwZShzKSxvPVtyWzBdLC4uLnIuc2xpY2UoMildO2lmKHNbMF09PW51bGwpdGhyb3cgbmV3IGVlKCJJZiBhbiBSTk4gaXMgc3RhdGVmdWwsIGl0IG5lZWRzIHRvIGtub3cgaXRzIGJhdGNoIHNpemUuIFNwZWNpZnkgdGhlIGJhdGNoIHNpemUgb2YgeW91ciBpbnB1dCB0ZW5zb3JzOiBcbi0gSWYgdXNpbmcgYSBTZXF1ZW50aWFsIG1vZGVsLCBzcGVjaWZ5IHRoZSBiYXRjaCBzaXplIGJ5IHBhc3NpbmcgYSBgYmF0Y2hJbnB1dFNoYXBlYCBvcHRpb24gdG8geW91ciBmaXJzdCBsYXllci5cbi0gSWYgdXNpbmcgdGhlIGZ1bmN0aW9uYWwgQVBJLCBzcGVjaWZ5IHRoZSBiYXRjaCBzaXplIGJ5IHBhc3NpbmcgYSBgYmF0Y2hTaGFwZWAgb3B0aW9uIHRvIHlvdXIgSW5wdXQgbGF5ZXIuIik7aWYodGhpcy5nZXRTdGF0ZXMoKT09bnVsbClBcnJheS5pc0FycmF5KHRoaXMuY2VsbC5zdGF0ZVNpemUpP3RoaXMuc3RhdGVzXz10aGlzLmNlbGwuc3RhdGVTaXplLm1hcCgoKT0+WXQobykpOnRoaXMuc3RhdGVzXz1bWXQobyldO2Vsc2UgaWYoZT09bnVsbClZZSh0aGlzLnN0YXRlc18pLHRoaXMua2VwdFN0YXRlcyE9bnVsbCYmKFllKHRoaXMua2VwdFN0YXRlcyksdGhpcy5rZXB0U3RhdGVzPVtdKSxBcnJheS5pc0FycmF5KHRoaXMuY2VsbC5zdGF0ZVNpemUpP3RoaXMuc3RhdGVzXz10aGlzLmNlbGwuc3RhdGVTaXplLm1hcCgoKT0+WXQobykpOnRoaXMuc3RhdGVzX1swXT1ZdChvKTtlbHNle2lmKEFycmF5LmlzQXJyYXkoZSl8fChlPVtlXSksZS5sZW5ndGghPT10aGlzLnN0YXRlc18ubGVuZ3RoKXRocm93IG5ldyBlZShgTGF5ZXIgJHt0aGlzLm5hbWV9IGV4cGVjdHMgJHt0aGlzLnN0YXRlc18ubGVuZ3RofSBzdGF0ZShzKSwgYnV0IGl0IHJlY2VpdmVkICR7ZS5sZW5ndGh9IHN0YXRlIHZhbHVlKHMpLiBJbnB1dCByZWNlaXZlZDogJHtlfWApO3Q/dGhpcy5rZXB0U3RhdGVzLnB1c2godGhpcy5zdGF0ZXNfLnNsaWNlKCkpOlllKHRoaXMuc3RhdGVzXyk7Zm9yKGxldCBhPTA7YTx0aGlzLnN0YXRlc18ubGVuZ3RoOysrYSl7Y29uc3QgbD1lW2FdLGM9bztpZighSmUobC5zaGFwZSxjKSl0aHJvdyBuZXcgZWUoYFN0YXRlICR7YX0gaXMgaW5jb21wYXRpYmxlIHdpdGggbGF5ZXIgJHt0aGlzLm5hbWV9OiBleHBlY3RlZCBzaGFwZT0ke2N9LCByZWNlaXZlZCBzaGFwZT0ke2wuc2hhcGV9YCk7dGhpcy5zdGF0ZXNfW2FdPWx9fXRoaXMuc3RhdGVzXz10aGlzLnN0YXRlc18ubWFwKGE9PmVuKGEuY2xvbmUoKSkpfSl9Y29tcHV0ZVNpbmdsZU91dHB1dFNoYXBlKGUpe2NvbnN0e2RhdGFGb3JtYXQ6dCxmaWx0ZXJzOnMsa2VybmVsU2l6ZTpyLHBhZGRpbmc6byxzdHJpZGVzOmksZGlsYXRpb25SYXRlOmF9PXRoaXMuY2VsbCxsPXQ9PT0iY2hhbm5lbHNGaXJzdCIsYz1lW2w/MzoyXSxoPWVbbD80OjNdLHA9dnIoYyxyWzBdLG8saVswXSxhWzBdKSxmPXZyKGgsclsxXSxvLGlbMV0sYVsxXSk7cmV0dXJuWy4uLmUuc2xpY2UoMCwyKSwuLi5sP1tzLHAsZl06W3AsZixzXV19fW5FLmNsYXNzTmFtZT0iQ29udlJOTjJEIjtjbGFzcyBYdyBleHRlbmRzIHJ5e2NvbnN0cnVjdG9yKGUpe2NvbnN0e2ZpbHRlcnM6dCxrZXJuZWxTaXplOnMsc3RyaWRlczpyLHBhZGRpbmc6byxkYXRhRm9ybWF0OmksZGlsYXRpb25SYXRlOmF9PWU7c3VwZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHt1bml0czp0fSkpLHRoaXMuZmlsdGVycz10LGRuKHRoaXMuZmlsdGVycywiZmlsdGVycyIpLHRoaXMua2VybmVsU2l6ZT1obChzLDIsImtlcm5lbFNpemUiKSx0aGlzLmtlcm5lbFNpemUuZm9yRWFjaChsPT5kbihsLCJrZXJuZWxTaXplIikpLHRoaXMuc3RyaWRlcz1obChyfHwxLDIsInN0cmlkZXMiKSx0aGlzLnN0cmlkZXMuZm9yRWFjaChsPT5kbihsLCJzdHJpZGVzIikpLHRoaXMucGFkZGluZz1vfHwidmFsaWQiLE1zKHRoaXMucGFkZGluZyksdGhpcy5kYXRhRm9ybWF0PWl8fCJjaGFubmVsc0xhc3QiLEd0KHRoaXMuZGF0YUZvcm1hdCksdGhpcy5kaWxhdGlvblJhdGU9aGwoYXx8MSwyLCJkaWxhdGlvblJhdGUiKSx0aGlzLmRpbGF0aW9uUmF0ZS5mb3JFYWNoKGw9PmRuKGwsImRpbGF0aW9uUmF0ZSIpKX1idWlsZChlKXt2YXIgdDtlPWF0KGUpO2NvbnN0IHM9dGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiPzE6ZS5sZW5ndGgtMTtpZihlW3NdPT1udWxsKXRocm93IG5ldyBlZShgVGhlIGNoYW5uZWwgZGltZW5zaW9uIG9mIHRoZSBpbnB1dCBzaG91bGQgYmUgZGVmaW5lZC4gRm91bmQgJHtlW3NdfWApO2NvbnN0IHI9ZVtzXSxvPTQsaT10aGlzLmtlcm5lbFNpemUuY29uY2F0KFtyLHRoaXMuZmlsdGVycypvXSk7dGhpcy5rZXJuZWw9dGhpcy5hZGRXZWlnaHQoImtlcm5lbCIsaSxudWxsLHRoaXMua2VybmVsSW5pdGlhbGl6ZXIsdGhpcy5rZXJuZWxSZWd1bGFyaXplciwhMCx0aGlzLmtlcm5lbENvbnN0cmFpbnQpO2NvbnN0IGE9dGhpcy5rZXJuZWxTaXplLmNvbmNhdChbdGhpcy5maWx0ZXJzLHRoaXMuZmlsdGVycypvXSk7aWYodGhpcy5yZWN1cnJlbnRLZXJuZWw9dGhpcy5hZGRXZWlnaHQoInJlY3VycmVudF9rZXJuZWwiLGEsbnVsbCx0aGlzLnJlY3VycmVudEluaXRpYWxpemVyLHRoaXMucmVjdXJyZW50UmVndWxhcml6ZXIsITAsdGhpcy5yZWN1cnJlbnRDb25zdHJhaW50KSx0aGlzLnVzZUJpYXMpe2xldCBsO2lmKHRoaXMudW5pdEZvcmdldEJpYXMpe2NvbnN0IGM9dGhpcy5iaWFzSW5pdGlhbGl6ZXIsaD10aGlzLmZpbHRlcnM7bD1uZXcodD1jbGFzcyBleHRlbmRzIHNye2FwcGx5KGYsZyl7Y29uc3QgeT1jLmFwcGx5KFtoXSksdz1KbihbaF0pLGI9Yy5hcHBseShbaCoyXSk7cmV0dXJuIEF3KFt5LHcsYl0pfX0sdC5jbGFzc05hbWU9IkN1c3RvbUluaXQiLHQpfWVsc2UgbD10aGlzLmJpYXNJbml0aWFsaXplcjt0aGlzLmJpYXM9dGhpcy5hZGRXZWlnaHQoImJpYXMiLFt0aGlzLmZpbHRlcnMqb10sbnVsbCxsLHRoaXMuYmlhc1JlZ3VsYXJpemVyLCEwLHRoaXMuYmlhc0NvbnN0cmFpbnQpfXRoaXMuYnVpbHQ9ITB9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2lmKGUubGVuZ3RoIT09Myl0aHJvdyBuZXcgZWUoYENvbnZMU1RNMkRDZWxsIGV4cGVjdHMgMyBpbnB1dCBUZW5zb3JzIChpbnB1dHMsIGgsIGMpLCBnb3QgJHtlLmxlbmd0aH0uYCk7Y29uc3Qgcz10LnRyYWluaW5nfHwhMSxyPWVbMF0sbz1lWzFdLGk9ZVsyXSxhPTQ7MDx0aGlzLmRyb3BvdXQmJnRoaXMuZHJvcG91dDwxJiZ0aGlzLmRyb3BvdXRNYXNrPT1udWxsJiYodGhpcy5kcm9wb3V0TWFzaz1maSh7b25lczooKT0+dnMocikscmF0ZTp0aGlzLmRyb3BvdXQsdHJhaW5pbmc6cyxjb3VudDphLGRyb3BvdXRGdW5jOnRoaXMuZHJvcG91dEZ1bmN9KSk7Y29uc3QgbD10aGlzLmRyb3BvdXRNYXNrLGM9KHEsQixIKT0+IUJ8fCFCW0hdP3E6WChCW0hdLHEpO2xldCBoPWMocixsLDApLHA9YyhyLGwsMSksZj1jKHIsbCwyKSxnPWMocixsLDMpOzA8dGhpcy5yZWN1cnJlbnREcm9wb3V0JiZ0aGlzLnJlY3VycmVudERyb3BvdXQ8MSYmdGhpcy5yZWN1cnJlbnREcm9wb3V0TWFzaz09bnVsbCYmKHRoaXMucmVjdXJyZW50RHJvcG91dE1hc2s9Zmkoe29uZXM6KCk9PnZzKG8pLHJhdGU6dGhpcy5yZWN1cnJlbnREcm9wb3V0LHRyYWluaW5nOnMsY291bnQ6YSxkcm9wb3V0RnVuYzp0aGlzLmRyb3BvdXRGdW5jfSkpO2NvbnN0IHk9dGhpcy5yZWN1cnJlbnREcm9wb3V0TWFzaztsZXQgdz1jKG8seSwwKSxiPWMobyx5LDEpLHY9YyhvLHksMiksUz1jKG8seSwzKTtjb25zdCAkPTMsW2ssVCxELExdPWVzKHRoaXMua2VybmVsLnJlYWQoKSxhLCQpLFt6LEYsXyxFXT10aGlzLnVzZUJpYXM/ZXModGhpcy5iaWFzLnJlYWQoKSxhKTpbbnVsbCxudWxsLG51bGwsbnVsbF07aD10aGlzLmlucHV0Q29udihoLGsseix0aGlzLnBhZGRpbmcpLHA9dGhpcy5pbnB1dENvbnYocCxULEYsdGhpcy5wYWRkaW5nKSxmPXRoaXMuaW5wdXRDb252KGYsRCxfLHRoaXMucGFkZGluZyksZz10aGlzLmlucHV0Q29udihnLEwsRSx0aGlzLnBhZGRpbmcpO2NvbnN0W00sVSxZLFFdPWVzKHRoaXMucmVjdXJyZW50S2VybmVsLnJlYWQoKSxhLCQpO3c9dGhpcy5yZWN1cnJlbnRDb252KHcsTSksYj10aGlzLnJlY3VycmVudENvbnYoYixVKSx2PXRoaXMucmVjdXJyZW50Q29udih2LFkpLFM9dGhpcy5yZWN1cnJlbnRDb252KFMsUSk7Y29uc3QgbmU9dGhpcy5yZWN1cnJlbnRBY3RpdmF0aW9uLmFwcGx5KG1lKGgsdykpLHNlPXRoaXMucmVjdXJyZW50QWN0aXZhdGlvbi5hcHBseShtZShwLGIpKSxWPW1lKFgoc2UsaSksWChuZSx0aGlzLmFjdGl2YXRpb24uYXBwbHkobWUoZix2KSkpKSxLPVgodGhpcy5yZWN1cnJlbnRBY3RpdmF0aW9uLmFwcGx5KG1lKGcsUykpLHRoaXMuYWN0aXZhdGlvbi5hcHBseShWKSk7cmV0dXJuW0ssSyxWXX0pfWdldENvbmZpZygpe2NvbnN0IGU9c3VwZXIuZ2V0Q29uZmlnKCkse3VuaXRzOnR9PWUscz1sRyhlLFsidW5pdHMiXSkscj17ZmlsdGVyczp0aGlzLmZpbHRlcnMsa2VybmVsU2l6ZTp0aGlzLmtlcm5lbFNpemUscGFkZGluZzp0aGlzLnBhZGRpbmcsZGF0YUZvcm1hdDp0aGlzLmRhdGFGb3JtYXQsZGlsYXRpb25SYXRlOnRoaXMuZGlsYXRpb25SYXRlLHN0cmlkZXM6dGhpcy5zdHJpZGVzfTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHMpLHIpfWlucHV0Q29udihlLHQscyxyKXtjb25zdCBvPXhvKGUsdCx0aGlzLnN0cmlkZXMscnx8InZhbGlkIix0aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCI/Ik5DSFciOiJOSFdDIix0aGlzLmRpbGF0aW9uUmF0ZSk7cmV0dXJuIHM/VHIobyxzLHRoaXMuZGF0YUZvcm1hdCk6b31yZWN1cnJlbnRDb252KGUsdCl7cmV0dXJuIHhvKGUsdCwxLCJzYW1lIix0aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCI/Ik5DSFciOiJOSFdDIil9fVh3LmNsYXNzTmFtZT0iQ29udkxTVE0yRENlbGwiO2dlKFh3KTtjbGFzcyBzRSBleHRlbmRzIG5Fe2NvbnN0cnVjdG9yKGUpe2NvbnN0IHQ9bmV3IFh3KGUpO3N1cGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7Y2VsbDp0fSkpfXN0YXRpYyBmcm9tQ29uZmlnKGUsdCl7cmV0dXJuIG5ldyBlKHQpfX1zRS5jbGFzc05hbWU9IkNvbnZMU1RNMkQiO2dlKHNFKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBZdyBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMucmF0ZT1NYXRoLm1heChNYXRoLm1pbihlLnJhdGUsMSksMCksdGhpcy5ub2lzZVNoYXBlPWUubm9pc2VTaGFwZSx0aGlzLnNlZWQ9ZS5zZWVkLHRoaXMuc3VwcG9ydHNNYXNraW5nPSEwfWdldE5vaXNlU2hhcGUoZSl7aWYodGhpcy5ub2lzZVNoYXBlPT1udWxsKXJldHVybiB0aGlzLm5vaXNlU2hhcGU7Y29uc3QgdD1lLnNoYXBlLHM9W107Zm9yKGxldCByPTA7cjx0aGlzLm5vaXNlU2hhcGUubGVuZ3RoOysrcilzLnB1c2godGhpcy5ub2lzZVNoYXBlW3JdPT1udWxsP3Rbcl06dGhpcy5ub2lzZVNoYXBlW3JdKTtyZXR1cm4gc31jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57dGhpcy5pbnZva2VDYWxsSG9vayhlLHQpO2NvbnN0IHM9amUoZSk7aWYoMDx0aGlzLnJhdGUmJnRoaXMucmF0ZTwxKXtjb25zdCByPXQudHJhaW5pbmc9PW51bGw/ITE6dC50cmFpbmluZyxvPXRoaXMuZ2V0Tm9pc2VTaGFwZShzKTtyZXR1cm4gVGgoKCk9PkgyKHMsdGhpcy5yYXRlLG8sdGhpcy5zZWVkKSwoKT0+cyxyKX1yZXR1cm4gZX0pfWdldENvbmZpZygpe2NvbnN0IGU9e3JhdGU6dGhpcy5yYXRlLG5vaXNlU2hhcGU6dGhpcy5ub2lzZVNoYXBlLHNlZWQ6dGhpcy5zZWVkfSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX1kaXNwb3NlKCl7cmV0dXJuIHN1cGVyLmRpc3Bvc2UoKX19WXcuY2xhc3NOYW1lPSJEcm9wb3V0IjtnZShZdyk7Y2xhc3MgckUgZXh0ZW5kcyBZd3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmlucHV0U3BlYz1be25kaW06M31dfWdldE5vaXNlU2hhcGUoZSl7Y29uc3QgdD1lLnNoYXBlO3JldHVyblt0WzBdLDEsdFsyXV19fXJFLmNsYXNzTmFtZT0iU3BhdGlhbERyb3BvdXQxRCI7Z2UockUpO2NsYXNzIG9FIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoZSksdGhpcy5hY3RpdmF0aW9uPW51bGwsdGhpcy51c2VCaWFzPSEwLHRoaXMua2VybmVsPW51bGwsdGhpcy5iaWFzPW51bGwsdGhpcy5ERUZBVUxUX0tFUk5FTF9JTklUSUFMSVpFUj0iZ2xvcm90Tm9ybWFsIix0aGlzLkRFRkFVTFRfQklBU19JTklUSUFMSVpFUj0iemVyb3MiLGUuYmF0Y2hJbnB1dFNoYXBlPT1udWxsJiZlLmlucHV0U2hhcGU9PW51bGwmJmUuaW5wdXREaW0hPW51bGwpe2xldCB0PW51bGw7ZS5iYXRjaFNpemUhPW51bGwmJih0PWUuYmF0Y2hTaXplKSx0aGlzLmJhdGNoSW5wdXRTaGFwZT1bdCxlLmlucHV0RGltXX10aGlzLnVuaXRzPWUudW5pdHMsZG4odGhpcy51bml0cywidW5pdHMiKSx0aGlzLmFjdGl2YXRpb249cGkoZS5hY3RpdmF0aW9uKSxlLnVzZUJpYXMhPW51bGwmJih0aGlzLnVzZUJpYXM9ZS51c2VCaWFzKSx0aGlzLmtlcm5lbEluaXRpYWxpemVyPVR0KGUua2VybmVsSW5pdGlhbGl6ZXJ8fHRoaXMuREVGQVVMVF9LRVJORUxfSU5JVElBTElaRVIpLHRoaXMuYmlhc0luaXRpYWxpemVyPVR0KGUuYmlhc0luaXRpYWxpemVyfHx0aGlzLkRFRkFVTFRfQklBU19JTklUSUFMSVpFUiksdGhpcy5rZXJuZWxDb25zdHJhaW50PXJuKGUua2VybmVsQ29uc3RyYWludCksdGhpcy5iaWFzQ29uc3RyYWludD1ybihlLmJpYXNDb25zdHJhaW50KSx0aGlzLmtlcm5lbFJlZ3VsYXJpemVyPUV0KGUua2VybmVsUmVndWxhcml6ZXIpLHRoaXMuYmlhc1JlZ3VsYXJpemVyPUV0KGUuYmlhc1JlZ3VsYXJpemVyKSx0aGlzLmFjdGl2aXR5UmVndWxhcml6ZXI9RXQoZS5hY3Rpdml0eVJlZ3VsYXJpemVyKSx0aGlzLnN1cHBvcnRzTWFza2luZz0hMCx0aGlzLmlucHV0U3BlYz1be21pbk5EaW06Mn1dfWJ1aWxkKGUpe2U9YXQoZSk7Y29uc3QgdD1lW2UubGVuZ3RoLTFdO3RoaXMua2VybmVsPT1udWxsJiYodGhpcy5rZXJuZWw9dGhpcy5hZGRXZWlnaHQoImtlcm5lbCIsW3QsdGhpcy51bml0c10sbnVsbCx0aGlzLmtlcm5lbEluaXRpYWxpemVyLHRoaXMua2VybmVsUmVndWxhcml6ZXIsITAsdGhpcy5rZXJuZWxDb25zdHJhaW50KSx0aGlzLnVzZUJpYXMmJih0aGlzLmJpYXM9dGhpcy5hZGRXZWlnaHQoImJpYXMiLFt0aGlzLnVuaXRzXSxudWxsLHRoaXMuYmlhc0luaXRpYWxpemVyLHRoaXMuYmlhc1JlZ3VsYXJpemVyLCEwLHRoaXMuYmlhc0NvbnN0cmFpbnQpKSksdGhpcy5pbnB1dFNwZWM9W3ttaW5ORGltOjIsYXhlczp7Wy0xXTp0fX1dLHRoaXMuYnVpbHQ9ITB9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2U9YXQoZSk7Y29uc3QgdD1lLnNsaWNlKCk7cmV0dXJuIHRbdC5sZW5ndGgtMV09dGhpcy51bml0cyx0fWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pnt0aGlzLmludm9rZUNhbGxIb29rKGUsdCk7Y29uc3Qgcz1qZShlKSxyPU0yKHRoaXMuYWN0aXZhdGlvbi5nZXRDbGFzc05hbWUoKSk7bGV0IG87cmV0dXJuIHIhPW51bGw/bz1qcihzLHRoaXMua2VybmVsLnJlYWQoKSxyLHRoaXMuYmlhcz90aGlzLmJpYXMucmVhZCgpOm51bGwpOihvPWpyKHMsdGhpcy5rZXJuZWwucmVhZCgpKSx0aGlzLmJpYXMhPW51bGwmJihvPVRyKG8sdGhpcy5iaWFzLnJlYWQoKSkpLHRoaXMuYWN0aXZhdGlvbiE9bnVsbCYmKG89dGhpcy5hY3RpdmF0aW9uLmFwcGx5KG8pKSksb30pfWdldENvbmZpZygpe2NvbnN0IGU9e3VuaXRzOnRoaXMudW5pdHMsYWN0aXZhdGlvbjpoaSh0aGlzLmFjdGl2YXRpb24pLHVzZUJpYXM6dGhpcy51c2VCaWFzLGtlcm5lbEluaXRpYWxpemVyOk90KHRoaXMua2VybmVsSW5pdGlhbGl6ZXIpLGJpYXNJbml0aWFsaXplcjpPdCh0aGlzLmJpYXNJbml0aWFsaXplciksa2VybmVsUmVndWxhcml6ZXI6dnQodGhpcy5rZXJuZWxSZWd1bGFyaXplciksYmlhc1JlZ3VsYXJpemVyOnZ0KHRoaXMuYmlhc1JlZ3VsYXJpemVyKSxhY3Rpdml0eVJlZ3VsYXJpemVyOnZ0KHRoaXMuYWN0aXZpdHlSZWd1bGFyaXplciksa2VybmVsQ29uc3RyYWludDpzbih0aGlzLmtlcm5lbENvbnN0cmFpbnQpLGJpYXNDb25zdHJhaW50OnNuKHRoaXMuYmlhc0NvbnN0cmFpbnQpfSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19b0UuY2xhc3NOYW1lPSJEZW5zZSI7Z2Uob0UpO2NsYXNzIGlFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7ZT1lfHx7fSxzdXBlcihlKSx0aGlzLmlucHV0U3BlYz1be21pbk5EaW06M31dLHRoaXMuZGF0YUZvcm1hdD1lLmRhdGFGb3JtYXR9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2U9YXQoZSk7Zm9yKGNvbnN0IHQgb2YgZS5zbGljZSgxKSlpZih0PT1udWxsKXRocm93IG5ldyBlZShgVGhlIHNoYXBlIG9mIHRoZSBpbnB1dCB0byAiRmxhdHRlbiIgaXMgbm90IGZ1bGx5IGRlZmluZWQgKGdvdCAke2Uuc2xpY2UoMSl9KS4gTWFrZSBzdXJlIHRvIHBhc3MgYSBjb21wbGV0ZSAiaW5wdXRfc2hhcGUiIG9yICJiYXRjaF9pbnB1dF9zaGFwZSIgYXJndW1lbnQgdG8gdGhlIGZpcnN0IGxheWVyIGluIHlvdXIgbW9kZWwuYCk7cmV0dXJuW2VbMF0sc2koZSwxKV19Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e3RoaXMuaW52b2tlQ2FsbEhvb2soZSx0KTtsZXQgcz1qZShlKTtpZih0aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCImJnMucmFuaz4xKXtjb25zdCByPVswXTtmb3IobGV0IG89MjtvPHMucmFuazsrK28pci5wdXNoKG8pO3IucHVzaCgxKSxzPXR0KHMscil9cmV0dXJuIFdVKHMpfSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17fTt0aGlzLmRhdGFGb3JtYXQhPW51bGwmJihlLmRhdGFGb3JtYXQ9dGhpcy5kYXRhRm9ybWF0KTtjb25zdCB0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19aUUuY2xhc3NOYW1lPSJGbGF0dGVuIjtnZShpRSk7Y2xhc3MgYUUgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnN1cHBvcnRzTWFza2luZz0hMCx0aGlzLmFjdGl2YXRpb249cGkoZS5hY3RpdmF0aW9uKX1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57dGhpcy5pbnZva2VDYWxsSG9vayhlLHQpO2NvbnN0IHM9amUoZSk7cmV0dXJuIHRoaXMuYWN0aXZhdGlvbi5hcHBseShzKX0pfWdldENvbmZpZygpe2NvbnN0IGU9e2FjdGl2YXRpb246aGkodGhpcy5hY3RpdmF0aW9uKX0sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9fWFFLmNsYXNzTmFtZT0iQWN0aXZhdGlvbiI7Z2UoYUUpO2NsYXNzIGxFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5uPWUubix0aGlzLmlucHV0U3BlYz1be25kaW06Mn1dfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtyZXR1cm5bZVswXSx0aGlzLm4sZVsxXV19Y2FsbChlLHQpe3JldHVybiByZSgoKT0+KGU9amUoZSksQlUoZSx0aGlzLm4pKSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17bjp0aGlzLm59LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfX1sRS5jbGFzc05hbWU9IlJlcGVhdFZlY3RvciI7Z2UobEUpO2NsYXNzIHVFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy50YXJnZXRTaGFwZT1lLnRhcmdldFNoYXBlO2ZvcihsZXQgdD0wO3Q8dGhpcy50YXJnZXRTaGFwZS5sZW5ndGg7Kyt0KXRoaXMuaXNVbmtub3duKHRoaXMudGFyZ2V0U2hhcGVbdF0pJiYodGhpcy50YXJnZXRTaGFwZVt0XT1udWxsKX1pc1Vua25vd24oZSl7cmV0dXJuIGU8MHx8ZT09bnVsbH1maXhVbmtub3duRGltZW5zaW9uKGUsdCl7Y29uc3Qgcz0iVG90YWwgc2l6ZSBvZiBuZXcgYXJyYXkgbXVzdCBiZSB1bmNoYW5nZWQuIixyPXQuc2xpY2UoKTtsZXQgbz0xLGk9bnVsbDtmb3IobGV0IGw9MDtsPHIubGVuZ3RoOysrbCl7Y29uc3QgYz1yW2xdO2lmKHRoaXMuaXNVbmtub3duKGMpKWlmKGk9PT1udWxsKWk9bDtlbHNlIHRocm93IG5ldyBlZSgiQ2FuIG9ubHkgc3BlY2lmaXkgb25lIHVua25vd24gZGltZW5zaW9uLiIpO2Vsc2Ugbyo9Y31jb25zdCBhPXNpKGUpO2lmKGkhPT1udWxsKXtpZihvPT09MHx8YSVvIT09MCl0aHJvdyBuZXcgZWUocyk7cltpXT1hL299ZWxzZSBpZihhIT09byl0aHJvdyBuZXcgZWUocyk7cmV0dXJuIHJ9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2xldCB0PSExO2ZvcihsZXQgcz0wO3M8ZS5sZW5ndGg7KytzKWlmKHRoaXMuaXNVbmtub3duKGVbc10pKXt0PSEwO2JyZWFrfXJldHVybiB0P2Uuc2xpY2UoMCwxKS5jb25jYXQodGhpcy50YXJnZXRTaGFwZSk6ZS5zbGljZSgwLDEpLmNvbmNhdCh0aGlzLmZpeFVua25vd25EaW1lbnNpb24oZS5zbGljZSgxKSx0aGlzLnRhcmdldFNoYXBlKSl9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e3RoaXMuaW52b2tlQ2FsbEhvb2soZSx0KTtjb25zdCBzPWplKGUpLHI9cy5zaGFwZSxvPXIuc2xpY2UoMCwxKS5jb25jYXQodGhpcy5maXhVbmtub3duRGltZW5zaW9uKHIuc2xpY2UoMSksdGhpcy50YXJnZXRTaGFwZSkpO3JldHVybiBKKHMsbyl9KX1nZXRDb25maWcoKXtjb25zdCBlPXt0YXJnZXRTaGFwZTp0aGlzLnRhcmdldFNoYXBlfSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19dUUuY2xhc3NOYW1lPSJSZXNoYXBlIjtnZSh1RSk7Y2xhc3MgY0UgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtpZihzdXBlcihlKSxlLmRpbXM9PW51bGwpdGhyb3cgbmV3IEVycm9yKCJSZXF1aXJlZCBjb25maWd1cmF0aW9uIGZpZWxkIGBkaW1zYCBpcyBtaXNzaW5nIGR1cmluZyBQZXJtdXRlIGNvbnN0cnVjdG9yIGNhbGwuIik7aWYoIUFycmF5LmlzQXJyYXkoZS5kaW1zKSl0aHJvdyBuZXcgRXJyb3IoYFBlcm11dGUgY29uc3RydWN0b3IgcmVxdWlyZXMgXGBkaW1zXGAgdG8gYmUgYW4gQXJyYXksIGJ1dCByZWNlaXZlZCAke2UuZGltc30gaW5zdGVhZC5gKTtjb25zdCB0PU5yKDEsZS5kaW1zLmxlbmd0aCsxKTtpZighSmUoZS5kaW1zLnNsaWNlKCkuc29ydCgpLHQpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwZXJtdXRhdGlvbiBgZGltc2A6ICIrSlNPTi5zdHJpbmdpZnkoZS5kaW1zKSsiIGBkaW1zYCBtdXN0IGNvbnRhaW4gY29uc2VjdXRpdmUgaW50ZWdlcnMgc3RhcnRpbmcgZnJvbSAxLiIpO3RoaXMuZGltcz1lLmRpbXMsdGhpcy5kaW1zSW5jbHVkaW5nQmF0Y2g9WzBdLmNvbmNhdCh0aGlzLmRpbXMpLHRoaXMuaW5wdXRTcGVjPVtuZXcgbm4oe25kaW06dGhpcy5kaW1zLmxlbmd0aCsxfSldfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtlPWF0KGUpO2NvbnN0IHQ9ZS5zbGljZSgpO3JldHVybiB0aGlzLmRpbXMuZm9yRWFjaCgocyxyKT0+e3RbcisxXT1lW3NdfSksdH1jYWxsKGUsdCl7cmV0dXJuIHR0KGplKGUpLHRoaXMuZGltc0luY2x1ZGluZ0JhdGNoKX1nZXRDb25maWcoKXtjb25zdCBlPXtkaW1zOnRoaXMuZGltc30sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9fWNFLmNsYXNzTmFtZT0iUGVybXV0ZSI7Z2UoY0UpO2NsYXNzIGRFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZT8/e30pLHRoaXMuc3VwcG9ydHNNYXNraW5nPSEwLGUhPW51bGw/dGhpcy5tYXNrVmFsdWU9ZS5tYXNrVmFsdWU9PW51bGw/MDplLm1hc2tWYWx1ZTp0aGlzLm1hc2tWYWx1ZT0wfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtyZXR1cm4gZX1nZXRDb25maWcoKXtjb25zdCBlPXN1cGVyLmdldENvbmZpZygpLHQ9e21hc2tWYWx1ZTp0aGlzLm1hc2tWYWx1ZX07cmV0dXJuIE9iamVjdC5hc3NpZ24odCxlKSx0fWNvbXB1dGVNYXNrKGUsdCl7Y29uc3Qgcz1qZShlKTtyZXR1cm4gVmMoZGEocyx0aGlzLm1hc2tWYWx1ZSksLTEpfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pnt0aGlzLmludm9rZUNhbGxIb29rKGUsdCk7Y29uc3Qgcz1qZShlKSxpPVZjKGRhKHMsdGhpcy5tYXNrVmFsdWUpLC0xLCEwKTtyZXR1cm4gWChzLE5lKGkscy5kdHlwZSkpfSl9fWRFLmNsYXNzTmFtZT0iTWFza2luZyI7Z2UoZEUpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIGhFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoZSksdGhpcy5lbWJlZGRpbmdzPW51bGwsdGhpcy5ERUZBVUxUX0VNQkVERElOR1NfSU5JVElBTElaRVI9InJhbmRvbVVuaWZvcm0iLGUuYmF0Y2hJbnB1dFNoYXBlPT1udWxsJiZlLmlucHV0U2hhcGU9PW51bGwpe2xldCB0PW51bGw7ZS5iYXRjaFNpemUhPW51bGwmJih0PWUuYmF0Y2hTaXplKSxlLmlucHV0TGVuZ3RoPT1udWxsP3RoaXMuYmF0Y2hJbnB1dFNoYXBlPVt0LG51bGxdOnRoaXMuYmF0Y2hJbnB1dFNoYXBlPVt0XS5jb25jYXQoZnQoZS5pbnB1dExlbmd0aCkpfXRoaXMuaW5wdXREaW09ZS5pbnB1dERpbSxkbih0aGlzLmlucHV0RGltLCJpbnB1dERpbSIpLHRoaXMub3V0cHV0RGltPWUub3V0cHV0RGltLGRuKHRoaXMub3V0cHV0RGltLCJvdXRwdXREaW0iKSx0aGlzLmVtYmVkZGluZ3NJbml0aWFsaXplcj1UdChlLmVtYmVkZGluZ3NJbml0aWFsaXplcnx8dGhpcy5ERUZBVUxUX0VNQkVERElOR1NfSU5JVElBTElaRVIpLHRoaXMuZW1iZWRkaW5nc1JlZ3VsYXJpemVyPUV0KGUuZW1iZWRkaW5nc1JlZ3VsYXJpemVyKSx0aGlzLmFjdGl2aXR5UmVndWxhcml6ZXI9RXQoZS5hY3Rpdml0eVJlZ3VsYXJpemVyKSx0aGlzLmVtYmVkZGluZ3NDb25zdHJhaW50PXJuKGUuZW1iZWRkaW5nc0NvbnN0cmFpbnQpLHRoaXMubWFza1plcm89ZS5tYXNrWmVybyx0aGlzLnN1cHBvcnRzTWFza2luZz1lLm1hc2taZXJvLHRoaXMuaW5wdXRMZW5ndGg9ZS5pbnB1dExlbmd0aH1idWlsZChlKXt0aGlzLmVtYmVkZGluZ3M9dGhpcy5hZGRXZWlnaHQoImVtYmVkZGluZ3MiLFt0aGlzLmlucHV0RGltLHRoaXMub3V0cHV0RGltXSx0aGlzLmR0eXBlLHRoaXMuZW1iZWRkaW5nc0luaXRpYWxpemVyLHRoaXMuZW1iZWRkaW5nc1JlZ3VsYXJpemVyLCEwLHRoaXMuZW1iZWRkaW5nc0NvbnN0cmFpbnQpLHRoaXMuYnVpbHQ9ITB9d2Fybk9uSW5jb21wYXRpYmxlSW5wdXRTaGFwZShlKXt9Y29tcHV0ZU1hc2soZSx0KXtyZXR1cm4gcmUoKCk9PnRoaXMubWFza1plcm8/KGU9amUoZSksZGEoZSxydChlKSkpOm51bGwpfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtpZihlPWF0KGUpLHRoaXMuaW5wdXRMZW5ndGg9PW51bGwpcmV0dXJuWy4uLmUsdGhpcy5vdXRwdXREaW1dO2NvbnN0IHQ9ZnQodGhpcy5pbnB1dExlbmd0aCk7aWYodC5sZW5ndGghPT1lLmxlbmd0aC0xKXRocm93IG5ldyBlZShgImlucHV0TGVuZ3RoIiBpcyAke3RoaXMuaW5wdXRMZW5ndGh9LCBidXQgcmVjZWl2ZWQgaW5wdXQgc2hhcGUgaGFzIHNoYXBlICR7ZX1gKTt7bGV0IHM9MDtmb3IobGV0IHI9MDtyPHQubGVuZ3RoOysrcil7Y29uc3Qgbz10W3JdLGk9ZVtyKzFdO2lmKG8hPW51bGwmJmkhPW51bGwmJm8hPT1pKXRocm93IG5ldyBlZShgImlucHV0TGVuZ3RoIiBpcyAke3RoaXMuaW5wdXRMZW5ndGh9LCBidXQgcmVjZWl2ZWQgaW5wdXQgc2hhcGUgaGFzIHNoYXBlICR7ZX1gKTtvPT1udWxsJiYodFtzXT1pKSxzKyt9fXJldHVybltlWzBdLC4uLnQsdGhpcy5vdXRwdXREaW1dfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pnt0aGlzLmludm9rZUNhbGxIb29rKGUsdCk7bGV0IHM9amUoZSk7cy5kdHlwZSE9PSJpbnQzMiImJihzPVVyKHMsImludDMyIikpO2NvbnN0IHI9RzIodGhpcy5lbWJlZGRpbmdzLnJlYWQoKSxKKHMsW3Muc2l6ZV0pKTtyZXR1cm4gSihyLGF0KHRoaXMuY29tcHV0ZU91dHB1dFNoYXBlKHMuc2hhcGUpKSl9KX1nZXRDb25maWcoKXtjb25zdCBlPXtpbnB1dERpbTp0aGlzLmlucHV0RGltLG91dHB1dERpbTp0aGlzLm91dHB1dERpbSxlbWJlZGRpbmdzSW5pdGlhbGl6ZXI6T3QodGhpcy5lbWJlZGRpbmdzSW5pdGlhbGl6ZXIpLGVtYmVkZGluZ3NSZWd1bGFyaXplcjp2dCh0aGlzLmVtYmVkZGluZ3NSZWd1bGFyaXplciksYWN0aXZpdHlSZWd1bGFyaXplcjp2dCh0aGlzLmFjdGl2aXR5UmVndWxhcml6ZXIpLGVtYmVkZGluZ3NDb25zdHJhaW50OnNuKHRoaXMuZW1iZWRkaW5nc0NvbnN0cmFpbnQpLG1hc2taZXJvOnRoaXMubWFza1plcm8saW5wdXRMZW5ndGg6dGhpcy5pbnB1dExlbmd0aH0sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9fWhFLmNsYXNzTmFtZT0iRW1iZWRkaW5nIjtnZShoRSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgVGEgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHx7fSksdGhpcy5zdXBwb3J0c01hc2tpbmc9ITB9bWVyZ2VGdW5jdGlvbihlKXt0aHJvdyBuZXcgS2V9Y29tcHV0ZUVsZW1lbnR3aXNlT3BPdXRwdXRTaGFwZShlLHQpe2lmKGU9PW51bGx8fHQ9PW51bGwpcmV0dXJuIG51bGw7aWYoZS5sZW5ndGg8dC5sZW5ndGgpcmV0dXJuIHRoaXMuY29tcHV0ZUVsZW1lbnR3aXNlT3BPdXRwdXRTaGFwZSh0LGUpO2lmKHQubGVuZ3RoPT09MClyZXR1cm4gZTtjb25zdCBzPWUuc2xpY2UoMCxlLmxlbmd0aC10Lmxlbmd0aCk7Zm9yKGxldCByPTA7cjx0Lmxlbmd0aDsrK3Ipe2NvbnN0IG89ZVtlLmxlbmd0aC10Lmxlbmd0aCtyXSxpPXRbcl07aWYobz09bnVsbHx8aT09bnVsbHx8bzwwfHxpPDApcy5wdXNoKG51bGwpO2Vsc2UgaWYobz09PTEpcy5wdXNoKGkpO2Vsc2UgaWYoaT09PTEpcy5wdXNoKG8pO2Vsc2V7aWYobyE9PWkpdGhyb3cgbmV3IGVlKCJPcGVyYW5kcyBjb3VsZCBub3QgYmUgYnJvYWRjYXN0IHRvZ2V0aGVyIHdpdGggc2hhcGVzICIrSlNPTi5zdHJpbmdpZnkoZSkrIiAiK0pTT04uc3RyaW5naWZ5KHQpKTtzLnB1c2gobyl9fXJldHVybiBzfWJ1aWxkKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkmJiFBcnJheS5pc0FycmF5KGVbMF0pJiYoZT1bYXQoZSldKSxlPWUsZS5sZW5ndGg8Mil0aHJvdyBuZXcgZWUoYEEgbWVyZ2UgbGF5ZXIgc2hvdWxkIGJlIGNhbGxlZCBvbiBhbiBBcnJheSBvZiBhdCBsZWFzdCAyIGlucHV0cy4gR290ICR7ZS5sZW5ndGh9IGlucHV0KHMpLmApO2xldCB0PVtdO2Zvcihjb25zdCBvIG9mIGUpbyE9bnVsbCYmb1swXSE9PW51bGwmJnQucHVzaChvWzBdKTtpZih0PW5pKHQpLHQubGVuZ3RoPjEpdGhyb3cgbmV3IGVlKGBDYW4gbm90IG1lcmdlIHRlbnNvcnMgd2l0aCBkaWZmZXJlbnQgYmF0Y2ggc2l6ZXMuIEdvdCB0ZW5zb3JzIHdpdGggc2hhcGVzOiAke0pTT04uc3RyaW5naWZ5KGUpfS5gKTtsZXQgcz1lWzBdPT1udWxsP251bGw6ZVswXS5zbGljZSgxKTtmb3IobGV0IG89MTtvPGUubGVuZ3RoOysrbyl7Y29uc3QgaT1lW29dPT1udWxsP251bGw6ZVtvXS5zbGljZSgxKTtzPXRoaXMuY29tcHV0ZUVsZW1lbnR3aXNlT3BPdXRwdXRTaGFwZShzLGkpfWNvbnN0IHI9ZS5tYXAobz0+by5sZW5ndGgpO2UuaW5kZXhPZihudWxsKT09PS0xJiZuaShyKS5sZW5ndGg9PT0xP3RoaXMucmVzaGFwZVJlcXVpcmVkPSExOnRoaXMucmVzaGFwZVJlcXVpcmVkPSEwfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9PntpZihlPWUsdGhpcy5yZXNoYXBlUmVxdWlyZWQpe2NvbnN0IHM9W10scj1lLm1hcChvPT5vLnJhbmspO2lmKHIuaW5kZXhPZihudWxsKT09PS0xKXtjb25zdCBvPWRpKHIpO2ZvcihsZXQgaSBvZiBlKXtjb25zdCBhPWkucmFuaztmb3IobGV0IGw9MDtsPG8tYTsrK2wpaT0kaChpLDEpO3MucHVzaChpKX1yZXR1cm4gdGhpcy5tZXJnZUZ1bmN0aW9uKHMpfWVsc2V7bGV0IG89ITE7Zm9yKGNvbnN0IGwgb2YgZSl7Y29uc3QgYz1sLnJhbms7aWYoYz09bnVsbCl7Y29uc3QgaD1sLnNoYXBlLHA9aFswXSxmPWguc2xpY2UoMSkuY29uY2F0KFtwXSk7bGV0IGc9SihsLFtwXS5jb25jYXQoc2koaC5zbGljZSgxKSkpKTtnPXR0KGcsWzEsMF0pLGc9SihnLGYpLHMucHVzaChnKSxvPSEwfWVsc2UgaWYoYz4xKXtjb25zdCBoPU5yKDEsYykuY29uY2F0KFswXSk7cy5wdXNoKHR0KGwsaCkpLG89ITB9ZWxzZSBzLnB1c2gobCl9bGV0IGk9dGhpcy5tZXJnZUZ1bmN0aW9uKHMpO2NvbnN0IGE9aS5yYW5rO2lmKG8pe2lmKGE9PW51bGwpe2NvbnN0IGw9aS5zaGFwZSxjPWwubGVuZ3RoLGg9bFtjLTFdLHA9W2hdLmNvbmNhdChsLnNsaWNlKDAsbC5sZW5ndGgtMSkpO2k9Sih0dChKKGksWy0xLGhdKSxbMSwwXSkscCl9ZWxzZSBpZihhPjEpe2NvbnN0IGw9W2EtMV0uY29uY2F0KE5yKDAsYS0xKSk7aT10dChpLGwpfX1yZXR1cm4gaX19ZWxzZSByZXR1cm4gdGhpcy5tZXJnZUZ1bmN0aW9uKGUpfSl9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2U9ZTtsZXQgdDtlWzBdPT1udWxsP3Q9bnVsbDp0PWVbMF0uc2xpY2UoMSk7Zm9yKGxldCByPTE7cjxlLmxlbmd0aDsrK3Ipe2NvbnN0IG89ZVtyXT09bnVsbD9udWxsOmVbcl0uc2xpY2UoMSk7dD10aGlzLmNvbXB1dGVFbGVtZW50d2lzZU9wT3V0cHV0U2hhcGUodCxvKX1sZXQgcz1bXTtmb3IoY29uc3QgciBvZiBlKXIhPW51bGwmJnJbMF0hPT1udWxsJiZzLnB1c2goclswXSk7cmV0dXJuIHM9bmkocykscy5sZW5ndGg9PT0xP3Q9cy5jb25jYXQodCk6dD1bbnVsbF0uY29uY2F0KHQpLHR9Y29tcHV0ZU1hc2soZSx0KXtyZXR1cm4gcmUoKCk9PntpZih0PT1udWxsKXJldHVybiBudWxsO2lmKCFBcnJheS5pc0FycmF5KHQpKXRocm93IG5ldyBlZSgiYG1hc2tgIHNob3VsZCBiZSBhbiBBcnJheSIpO2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBlZSgiYGlucHV0c2Agc2hvdWxkIGJlIGFuIEFycmF5Iik7aWYodC5sZW5ndGghPT1lLmxlbmd0aCl0aHJvdyBuZXcgZWUoYFRoZSBBcnJheSAnaW5wdXRzJyBhbmQgJ21hc2snIGFyZSBleHBlY3RlZCB0byBoYXZlIHRoZSBzYW1lIGxlbmd0aCwgYnV0IGhhdmUgZGlmZmVyZW50IGxlbmd0aHMgKCR7ZS5sZW5ndGh9IHZzICR7dC5sZW5ndGh9KWApO2lmKHQuZXZlcnkocj0+cj09bnVsbCkpcmV0dXJuIG51bGw7dD10Lm1hcChyPT5yPT1udWxsP3I6QW4ociwwKSk7bGV0IHM9dFswXTtmb3IobGV0IHI9MTtyPHQubGVuZ3RoLTE7KytyKXM9U3Iocyx0W3JdKTtyZXR1cm4gc30pfX1jbGFzcyBwRSBleHRlbmRzIFRhe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfW1lcmdlRnVuY3Rpb24oZSl7cmV0dXJuIHJlKCgpPT57bGV0IHQ9ZVswXS5jbG9uZSgpO2ZvcihsZXQgcz0xO3M8ZS5sZW5ndGg7KytzKXQ9bWUodCxlW3NdKTtyZXR1cm4gdH0pfX1wRS5jbGFzc05hbWU9IkFkZCI7Z2UocEUpO2NsYXNzIGZFIGV4dGVuZHMgVGF7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9bWVyZ2VGdW5jdGlvbihlKXtyZXR1cm4gcmUoKCk9PntsZXQgdD1lWzBdLmNsb25lKCk7Zm9yKGxldCBzPTE7czxlLmxlbmd0aDsrK3MpdD1YKHQsZVtzXSk7cmV0dXJuIHR9KX19ZkUuY2xhc3NOYW1lPSJNdWx0aXBseSI7Z2UoZkUpO2NsYXNzIG1FIGV4dGVuZHMgVGF7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9bWVyZ2VGdW5jdGlvbihlKXtyZXR1cm4gcmUoKCk9PntsZXQgdD1lWzBdLmNsb25lKCk7Zm9yKGxldCBzPTE7czxlLmxlbmd0aDsrK3MpdD1tZSh0LGVbc10pO3JldHVybiBYKDEvZS5sZW5ndGgsdCl9KX19bUUuY2xhc3NOYW1lPSJBdmVyYWdlIjtnZShtRSk7Y2xhc3MgZ0UgZXh0ZW5kcyBUYXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKX1tZXJnZUZ1bmN0aW9uKGUpe3JldHVybiByZSgoKT0+e2xldCB0PWVbMF07Zm9yKGxldCBzPTE7czxlLmxlbmd0aDsrK3MpdD1Rcih0LGVbc10pO3JldHVybiB0fSl9fWdFLmNsYXNzTmFtZT0iTWF4aW11bSI7Z2UoZ0UpO2NsYXNzIHlFIGV4dGVuZHMgVGF7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9bWVyZ2VGdW5jdGlvbihlKXtyZXR1cm4gcmUoKCk9PntsZXQgdD1lWzBdO2ZvcihsZXQgcz0xO3M8ZS5sZW5ndGg7KytzKXQ9Y2kodCxlW3NdKTtyZXR1cm4gdH0pfX15RS5jbGFzc05hbWU9Ik1pbmltdW0iO2dlKHlFKTtjbGFzcyB4RSBleHRlbmRzIFRhe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuREVGQVVMVF9BWElTPS0xLGU9PW51bGwmJihlPXt9KSx0aGlzLmF4aXM9ZS5heGlzPT1udWxsP3RoaXMuREVGQVVMVF9BWElTOmUuYXhpcyx0aGlzLnN1cHBvcnRzTWFza2luZz0hMCx0aGlzLnJlc2hhcGVSZXF1aXJlZD0hMX1idWlsZChlKXtpZighKEFycmF5LmlzQXJyYXkoZSkmJkFycmF5LmlzQXJyYXkoZVswXSkpfHxlLmxlbmd0aD09PTEpdGhyb3cgbmV3IGVlKCJBIGBDb25jYXRlbmF0ZWAgbGF5ZXIgc2hvdWxkIGJlIGNhbGxlZCBvbiBhIGxpc3Qgb2YgYXQgbGVhc3QgMiBpbnB1dHMiKTtlPWU7bGV0IHQ9ITA7Zm9yKGNvbnN0IHIgb2YgZSlpZihyIT1udWxsKXt0PSExO2JyZWFrfWlmKHQpcmV0dXJuO2NvbnN0IHM9W107Zm9yKGxldCByPTA7cjxlLmxlbmd0aDsrK3Ipe2NvbnN0IG89ZVtyXS5zbGljZSgpO28uc3BsaWNlKHRoaXMuYXhpcywxKTtsZXQgaT0hMTtmb3IoY29uc3QgYSBvZiBzKWlmKEplKGEsbykpe2k9ITA7YnJlYWt9aXx8cy5wdXNoKG8pfWlmKHMubGVuZ3RoPjEpdGhyb3cgbmV3IGVlKCJBIGBDb25jYXRlbmF0ZWAgbGF5ZXIgcmVxdWlyZXMgaW5wdXRzIHdpdGggbWF0Y2hpbmcgc2hhcGVzIGV4Y2VwdCBmb3IgdGhlIGNvbmNhdCBheGlzLiBHb3QgaW5wdXQgc2hhcGVzOiAiK0pTT04uc3RyaW5naWZ5KGUpKX1tZXJnZUZ1bmN0aW9uKGUpe3JldHVybiByZSgoKT0+QXcoZSx0aGlzLmF4aXMpKX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7aWYoIShBcnJheS5pc0FycmF5KGUpJiZBcnJheS5pc0FycmF5KGVbMF0pKSl0aHJvdyBuZXcgZWUoIkEgYENvbmNhdGVuYXRlYCBsYXllciBzaG91bGQgYmUgY2FsbGVkIG9uIGEgbGlzdCBvZiBpbnB1dHMuIik7Y29uc3QgdD1lLHM9dFswXS5zbGljZSgpLHI9dGhpcy5heGlzPDA/cy5sZW5ndGgrdGhpcy5heGlzOnRoaXMuYXhpcztmb3IoY29uc3QgbyBvZiB0LnNsaWNlKDEpKXtpZihzW3JdPT1udWxsfHxvW3JdPT1udWxsKXtzW3JdPW51bGw7YnJlYWt9c1tyXSs9b1tyXX1yZXR1cm4gc31jb21wdXRlTWFzayhlLHQpe2lmKHQ9PW51bGwpcmV0dXJuIG51bGw7aWYoIUFycmF5LmlzQXJyYXkodCkpdGhyb3cgbmV3IGVlKCJgbWFza2Agc2hvdWxkIGJlIGFuIGFycmF5IGZvciBDb25jYXRlbmF0ZSIpO2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBlZSgiYGlucHV0c2Agc2hvdWxkIGJlIGFuIGFycmF5IGZvciBDb25jYXRlbmF0ZSIpO2lmKHQubGVuZ3RoIT09ZS5sZW5ndGgpdGhyb3cgbmV3IGVlKGBNaXNtYXRjaCBpbiB0aGUgbGVuZ3RoIG9mIG1hc2sgKCR7dC5sZW5ndGh9KSBhbmQgdGhlIGxlZ250aCBvZiBpbnB1dHMgKCR7ZS5sZW5ndGh9KWApO3JldHVybiByZSgoKT0+e2xldCBzPSEwO2lmKHQuZm9yRWFjaChpPT57aWYoaSE9bnVsbCl7cz0hMTtyZXR1cm59fSkscylyZXR1cm4gbnVsbDtjb25zdCByPVtdO2ZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7KytpKXRbaV09PW51bGw/ci5wdXNoKE5lKHZzKGVbaV0pLCJib29sIikpOnRbaV0ucmFuazxlW2ldLnJhbms/ci5wdXNoKEFuKHRbaV0sLTEpKTpyLnB1c2godFtpXSk7Y29uc3Qgbz1XdChyLHRoaXMuYXhpcyk7cmV0dXJuIHVnKG8sLTEsITEpfSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17YXhpczp0aGlzLmF4aXN9LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfX14RS5jbGFzc05hbWU9IkNvbmNhdGVuYXRlIjtnZSh4RSk7ZnVuY3Rpb24gTmMobixlKXtmb3IoO248MDspbis9ZTtyZXR1cm4gbn1mdW5jdGlvbiB1RyhuLGUsdCl7aWYobi5zaGFwZS5sZW5ndGg+M3x8ZS5zaGFwZS5sZW5ndGg+Myl0aHJvdyBuZXcgS2UoImJhdGNoRG90IGlzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGVuc29ycyBvZiA0RCBvciBoaWdoZXIgcmFuayB5ZXQiKTtpZihBKG4uc2hhcGUubGVuZ3RoPj0yLCgpPT5gYmF0Y2hEb3QgcmVxdWlyZXMgdGhlIHJhbmsgb2YgeCB0byBiZSA+PSAyLCBidXQgZ290ICR7bi5zaGFwZS5sZW5ndGh9YCksQShuLnNoYXBlLmxlbmd0aD49MiwoKT0+YGJhdGNoRG90IHJlcXVpcmVzIHRoZSByYW5rIG9mIHkgdG8gYmUgPj0gMiwgYnV0IGdvdCAke2Uuc2hhcGUubGVuZ3RofWApLHR5cGVvZiB0PT0ibnVtYmVyIiYmKHQ9W3QsdF0pLG4uZHR5cGU9PT0iY29tcGxleDY0Inx8ZS5kdHlwZT09PSJjb21wbGV4NjQiKXRocm93IG5ldyBLZSgiYmF0Y2hEb3QgaXMgbm90IGltcGxlbWVudGVkIGZvciBjb21wbGV4NjQtdHlwZSBUZW5zb3JzIHlldC4iKTtjb25zdCBzPW4uc2hhcGUubGVuZ3RoLHI9ZS5zaGFwZS5sZW5ndGg7dD09bnVsbCYmKHQ9W3MtMSxyLTJdKTtjb25zdCBvPXQ7cmV0dXJuIHJlKCgpPT57bGV0IGk7aWYocz5yKXtpPXMtcjtjb25zdCBsPVtdO2ZvcihsZXQgYz0wO2M8aTsrK2MpbC5wdXNoKDEpO2U9SihlLGUuc2hhcGUuY29uY2F0KGwpKX1lbHNlIGlmKHI+cyl7aT1yLXM7Y29uc3QgbD1bXTtmb3IobGV0IGM9MDtjPGk7KytjKWwucHVzaCgxKTtuPUoobixuLnNoYXBlLmNvbmNhdChsKSl9ZWxzZSBpPTA7bGV0IGE7aWYobi5zaGFwZS5sZW5ndGg9PT0yJiZlLnNoYXBlLmxlbmd0aD09PTIpb1swXT09PW9bMV0/YT1SZShYKG4sZSksb1swXSk6YT1SZShYKHR0KG4sWzEsMF0pLGUpLG9bMV0pO2Vsc2V7Y29uc3QgbD1vWzBdIT09bi5zaGFwZS5sZW5ndGgtMSxjPW9bMV09PT1lLnNoYXBlLmxlbmd0aC0xO2E9WGUobixlLGwsYyl9aWYoaT4wKXtsZXQgbDtzPnI/bD1zK3ItMzpsPXMtMTtjb25zdCBjPVtdO2ZvcihsZXQgaD1sO2g8bCtpOysraCljLnB1c2goaCk7YT1TaShhLGMpfXJldHVybiBhLnNoYXBlLmxlbmd0aD09PTEmJihhPUFuKGEsMSkpLGF9KX1jbGFzcyBiRSBleHRlbmRzIFRhe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuYXhlcz1lLmF4ZXMsdGhpcy5ub3JtYWxpemU9ZS5ub3JtYWxpemU9PW51bGw/ITE6ZS5ub3JtYWxpemUsdGhpcy5zdXBwb3J0c01hc2tpbmc9ITAsdGhpcy5yZXNoYXBlUmVxdWlyZWQ9ITF9YnVpbGQoZSl7QShBcnJheS5pc0FycmF5KGUpJiZlLmxlbmd0aD09PTImJkFycmF5LmlzQXJyYXkoZVswXSkmJkFycmF5LmlzQXJyYXkoZVsxXSksKCk9PiJBIGBEb3RgIGxheWVyIHNob3VsZCBiZSBjYWxsZWQgb24gYSBsaXN0IG9mIGV4YWN0bHkgMiBpbnB1dHMuIik7Y29uc3QgdD1lWzBdLHM9ZVsxXTtpZih0Lmxlbmd0aD4zfHxzLmxlbmd0aD4zKXRocm93IG5ldyBLZSgiRG90IGxheWVyIGRvZXMgbm90IHN1cHBvcnQgdGVuc29ycyBvZiA0RCBvciBoaWdoZXIgcmFuayB5ZXQuIik7Y29uc3Qgcj10aGlzLmludGVycHJldEF4ZXModCxzKTtpZih0W3JbMF1dIT09c1tyWzFdXSl0aHJvdyBuZXcgZWUoYERpbWVuc2lvbiBpbmNvbXBhdGliaWxpdHk6ICR7dFtyWzBdXX0gIT09ICR7c1tyWzFdXX1gKX1tZXJnZUZ1bmN0aW9uKGUpe2lmKGUubGVuZ3RoIT09Mil0aHJvdyBuZXcgZWUoYEEgXGBEb3RcYCBsYXllciBtdXN0IGJlIGNhbGxlZCBvbiBleGFjdGx5IDIgaW5wdXRzLCBidXQgcmVjZWl2ZWQgJHtlLmxlbmd0aH0gaW5wdXQocykuYCk7bGV0IHQ9ZVswXSxzPWVbMV0scjtyZXR1cm4gQXJyYXkuaXNBcnJheSh0aGlzLmF4ZXMpP3I9dGhpcy5heGVzLm1hcCgobyxpKT0+TmMobyxlW2ldLnNoYXBlLmxlbmd0aCkpOnI9W05jKHRoaXMuYXhlcyx0LnNoYXBlLmxlbmd0aCksTmModGhpcy5heGVzLHMuc2hhcGUubGVuZ3RoKV0sdGhpcy5ub3JtYWxpemUmJih0PUxmKHQsclswXSkscz1MZihzLHJbMV0pKSx1Ryh0LHMscil9aW50ZXJwcmV0QXhlcyhlLHQpe2xldCBzO3JldHVybiBBcnJheS5pc0FycmF5KHRoaXMuYXhlcyk/cz10aGlzLmF4ZXM6cz1bTmModGhpcy5heGVzLGUubGVuZ3RoKSxOYyh0aGlzLmF4ZXMsdC5sZW5ndGgpXSxzfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtBKEFycmF5LmlzQXJyYXkoZSkmJmUubGVuZ3RoPT09MiYmQXJyYXkuaXNBcnJheShlWzBdKSYmQXJyYXkuaXNBcnJheShlWzFdKSwoKT0+IkEgYERvdGAgbGF5ZXIgc2hvdWxkIGJlIGNhbGxlZCBvbiBhIGxpc3Qgb2YgZXhhY3RseSAyIGlucHV0cy4iKTtjb25zdCB0PWVbMF0uc2xpY2UoKSxzPWVbMV0uc2xpY2UoKTtpZih0Lmxlbmd0aD4zfHxzLmxlbmd0aD4zKXRocm93IG5ldyBLZSgiRG90IGxheWVyIGRvZXMgbm90IHN1cHBvcnQgdGVuc29ycyBvZiA0RCBvciBoaWdoZXIgcmFuayB5ZXQuIik7Y29uc3Qgcj10aGlzLmludGVycHJldEF4ZXModCxzKTt0LnNwbGljZShyWzBdLDEpLHMuc3BsaWNlKHJbMV0sMSkscy5zcGxpY2UoMCwxKTtjb25zdCBvPXQuY29uY2F0KHMpO3JldHVybiBvLmxlbmd0aD09PTEmJm8ucHVzaCgxKSxvfWNvbXB1dGVNYXNrKGUsdCl7cmV0dXJuIG51bGx9Z2V0Q29uZmlnKCl7Y29uc3QgZT17YXhlczp0aGlzLmF4ZXMsbm9ybWFsaXplOnRoaXMubm9ybWFsaXplfSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19YkUuY2xhc3NOYW1lPSJEb3QiO2dlKGJFKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyB3RSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuc3VwcG9ydHNNYXNraW5nPSEwLHRoaXMuc3RkZGV2PWUuc3RkZGV2fWNvbXB1dGVPdXRwdXRTaGFwZShlKXtyZXR1cm4gZX1nZXRDb25maWcoKXtjb25zdCBlPXN1cGVyLmdldENvbmZpZygpLHQ9e3N0ZGRldjp0aGlzLnN0ZGRldn07cmV0dXJuIE9iamVjdC5hc3NpZ24odCxlKSx0fWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pnt0aGlzLmludm9rZUNhbGxIb29rKGUsdCk7Y29uc3Qgcz1qZShlKTtyZXR1cm4gVGgoKCk9Pm1lKFFnKHMuc2hhcGUsMCx0aGlzLnN0ZGRldikscyksKCk9PnMsdC50cmFpbmluZ3x8ITEpfSl9fXdFLmNsYXNzTmFtZT0iR2F1c3NpYW5Ob2lzZSI7Z2Uod0UpO2NsYXNzIHZFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5zdXBwb3J0c01hc2tpbmc9ITAsdGhpcy5yYXRlPWUucmF0ZX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7cmV0dXJuIGV9Z2V0Q29uZmlnKCl7Y29uc3QgZT1zdXBlci5nZXRDb25maWcoKSx0PXtyYXRlOnRoaXMucmF0ZX07cmV0dXJuIE9iamVjdC5hc3NpZ24odCxlKSx0fWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pnt0aGlzLmludm9rZUNhbGxIb29rKGUsdCk7Y29uc3Qgcz1qZShlKTtyZXR1cm4gdGhpcy5yYXRlPjAmJnRoaXMucmF0ZTwxP1RoKCgpPT57Y29uc3Qgbz1NYXRoLnNxcnQodGhpcy5yYXRlLygxLXRoaXMucmF0ZSkpO3JldHVybiBYKHMsUWcocy5zaGFwZSwxLG8pKX0sKCk9PnMsdC50cmFpbmluZ3x8ITEpOnN9KX19dkUuY2xhc3NOYW1lPSJHYXVzc2lhbkRyb3BvdXQiO2dlKHZFKTtjbGFzcyBTRSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuc3VwcG9ydHNNYXNraW5nPSEwLHRoaXMucmF0ZT1lLnJhdGUsdGhpcy5ub2lzZVNoYXBlPWUubm9pc2VTaGFwZX1fZ2V0Tm9pc2VTaGFwZShlKXtyZXR1cm4gdGhpcy5ub2lzZVNoYXBlfHxqZShlKS5zaGFwZX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7cmV0dXJuIGV9Z2V0Q29uZmlnKCl7Y29uc3QgZT1zdXBlci5nZXRDb25maWcoKSx0PXtyYXRlOnRoaXMucmF0ZX07cmV0dXJuIE9iamVjdC5hc3NpZ24odCxlKSx0fWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9PntpZih0aGlzLnJhdGU8MSYmdGhpcy5yYXRlPjApe2NvbnN0IHM9dGhpcy5fZ2V0Tm9pc2VTaGFwZShlKTtyZXR1cm4gVGgoKCk9Pntjb25zdCBvPWplKGUpLGE9LTEuNjczMjYzMjQyMzU0Mzc3MioxLjA1MDcwMDk4NzM1NTQ4MDU7bGV0IGw9Q28odmkocyksdGhpcy5yYXRlKTtsPVVyKGwsImZsb2F0MzIiKTtjb25zdCBjPSgoMS10aGlzLnJhdGUpKigxK3RoaXMucmF0ZSphKioyKSkqKi0uNSxoPS1jKmEqdGhpcy5yYXRlLHA9bWUoWChvLGwpLFgobWUobCwtMSksYSkpO3JldHVybiBtZShYKHAsYyksaCl9LCgpPT5qZShlKSx0LnRyYWluaW5nfHwhMSl9cmV0dXJuIGV9KX19U0UuY2xhc3NOYW1lPSJBbHBoYURyb3BvdXQiO2dlKFNFKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQwogKgogKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUKICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBLYyhuLGUsdCxzLHIsbz0uMDAxKXtsZXQgaTtpZihuLnJhbms9PT0yKWk9dGIobixlLHQscyxyLG8pO2Vsc2UgaWYobi5yYW5rPT09MylpPW5iKG4sZSx0LHMscixvKTtlbHNlIGlmKG4ucmFuaz09PTQpaT1zYihuLGUsdCxzLHIsbyk7ZWxzZSB0aHJvdyBuZXcgS2UoYGJhdGNoTm9ybWFsaXphdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgZm9yIGFycmF5IG9mIHJhbmsgJHtuLnJhbmt9IHlldGApO3JldHVybiBpfWZ1bmN0aW9uIGNHKG4sZSx0LHMscj0uMDAxKXtyZXR1cm4gcmUoKCk9Pntjb25zdCBvPWZoKG4scyksaT1vLm1lYW4sYT1vLnZhcmlhbmNlO3JldHVybltLYyhuLGksYSx0LGUsciksaSxhXX0pfWZ1bmN0aW9uIGRHKG4sZSx0LHMscj0uMDAxKXtyZXR1cm4gcmUoKCk9Pntjb25zdCBvPWZoKG4scyksaT1vLm1lYW4sYT1vLnZhcmlhbmNlLGw9W107Zm9yKGNvbnN0IHkgb2YgTnIoMCxuLnJhbmspKXMuaW5kZXhPZih5KSE9PS0xP2wucHVzaCgxKTpsLnB1c2gobi5zaGFwZVt5XSk7Y29uc3QgYz1KKGksbCksaD1KKGEsbCkscD1lPT1udWxsP251bGw6SihlLGwpLGY9dD09bnVsbD9udWxsOkoodCxsKTtyZXR1cm5bS2MobixjLGgsZixwLHIpLGksYV19KX1mdW5jdGlvbiBoRyhuLGUsdCxzLHI9LjAwMSl7cmV0dXJuIEplKHMuc2xpY2UoKS5zb3J0KCksTnIoMCxuLnJhbmstMSkpP2NHKG4sZSx0LHMscik6ZEcobixlLHQscyxyKX1jbGFzcyBORSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe2U9PW51bGwmJihlPXt9KSxzdXBlcihlKSx0aGlzLnN1cHBvcnRzTWFza2luZz0hMCx0aGlzLmF4aXM9ZS5heGlzPT1udWxsPy0xOmUuYXhpcyx0aGlzLm1vbWVudHVtPWUubW9tZW50dW09PW51bGw/Ljk5OmUubW9tZW50dW0sdGhpcy5lcHNpbG9uPWUuZXBzaWxvbj09bnVsbD8uMDAxOmUuZXBzaWxvbix0aGlzLmNlbnRlcj1lLmNlbnRlcj09bnVsbD8hMDplLmNlbnRlcix0aGlzLnNjYWxlPWUuc2NhbGU9PW51bGw/ITA6ZS5zY2FsZSx0aGlzLmJldGFJbml0aWFsaXplcj1UdChlLmJldGFJbml0aWFsaXplcnx8Inplcm9zIiksdGhpcy5nYW1tYUluaXRpYWxpemVyPVR0KGUuZ2FtbWFJbml0aWFsaXplcnx8Im9uZXMiKSx0aGlzLm1vdmluZ01lYW5Jbml0aWFsaXplcj1UdChlLm1vdmluZ01lYW5Jbml0aWFsaXplcnx8Inplcm9zIiksdGhpcy5tb3ZpbmdWYXJpYW5jZUluaXRpYWxpemVyPVR0KGUubW92aW5nVmFyaWFuY2VJbml0aWFsaXplcnx8Im9uZXMiKSx0aGlzLmJldGFDb25zdHJhaW50PXJuKGUuYmV0YUNvbnN0cmFpbnQpLHRoaXMuZ2FtbWFDb25zdHJhaW50PXJuKGUuZ2FtbWFDb25zdHJhaW50KSx0aGlzLmJldGFSZWd1bGFyaXplcj1FdChlLmJldGFSZWd1bGFyaXplciksdGhpcy5nYW1tYVJlZ3VsYXJpemVyPUV0KGUuZ2FtbWFSZWd1bGFyaXplcil9YnVpbGQoZSl7ZT1hdChlKTtjb25zdCB0PXRoaXMuYXhpcz49MD90aGlzLmF4aXM6dGhpcy5heGlzK2UubGVuZ3RoLHM9ZVt0XTtpZihzPT1udWxsKXRocm93IG5ldyBlZShgQXhpcyAke3R9IG9mIGlucHV0IHRlbnNvciBzaG91bGQgaGF2ZSBhIGRlZmluZWQgZGltZW5zaW9uIGJ1dCB0aGUgbGF5ZXIgcmVjZWl2ZWQgYW4gaW5wdXQgd2l0aCBzaGFwZSAke0pTT04uc3RyaW5naWZ5KGUpfS5gKTt0aGlzLmlucHV0U3BlYz1bbmV3IG5uKHtuZGltOmUubGVuZ3RoLGF4ZXM6e1t0XTpzfX0pXTtjb25zdCByPVtzXTt0aGlzLnNjYWxlJiYodGhpcy5nYW1tYT10aGlzLmFkZFdlaWdodCgiZ2FtbWEiLHIsbnVsbCx0aGlzLmdhbW1hSW5pdGlhbGl6ZXIsdGhpcy5nYW1tYVJlZ3VsYXJpemVyLCEwLHRoaXMuZ2FtbWFDb25zdHJhaW50KSksdGhpcy5jZW50ZXImJih0aGlzLmJldGE9dGhpcy5hZGRXZWlnaHQoImJldGEiLHIsbnVsbCx0aGlzLmJldGFJbml0aWFsaXplcix0aGlzLmJldGFSZWd1bGFyaXplciwhMCx0aGlzLmJldGFDb25zdHJhaW50KSksdGhpcy5tb3ZpbmdNZWFuPXRoaXMuYWRkV2VpZ2h0KCJtb3ZpbmdfbWVhbiIscixudWxsLHRoaXMubW92aW5nTWVhbkluaXRpYWxpemVyLG51bGwsITEpLHRoaXMubW92aW5nVmFyaWFuY2U9dGhpcy5hZGRXZWlnaHQoIm1vdmluZ192YXJpYW5jZSIscixudWxsLHRoaXMubW92aW5nVmFyaWFuY2VJbml0aWFsaXplcixudWxsLCExKSx0aGlzLmJ1aWx0PSEwfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pntjb25zdCBzPXQudHJhaW5pbmc9PW51bGw/ITE6dC50cmFpbmluZyxyPWplKGUpLG89ci5zaGFwZSxpPW8ubGVuZ3RoLGE9TnIoMCxpKSxsPXRoaXMuYXhpcz49MD90aGlzLmF4aXM6dGhpcy5heGlzK2k7YS5zcGxpY2UobCwxKTtjb25zdCBjPWZhKDEsaSk7Y1tsXT1vW2xdO2NvbnN0IGg9YS5zbGljZSgpO2guc29ydCgpO2NvbnN0IHA9IUplKGgsTnIoMCxpKS5zbGljZSgwLGktMSkpLGY9KCk9PntpZihwKXtjb25zdCBTPUoodGhpcy5tb3ZpbmdNZWFuLnJlYWQoKSxjKSwkPUoodGhpcy5tb3ZpbmdWYXJpYW5jZS5yZWFkKCksYyksaz10aGlzLmNlbnRlcj9KKHRoaXMuYmV0YS5yZWFkKCksYyk6bnVsbCxUPXRoaXMuc2NhbGU/Sih0aGlzLmdhbW1hLnJlYWQoKSxjKTpudWxsO3JldHVybiBLYyhyLFMsJCxrLFQsdGhpcy5lcHNpbG9uKX1lbHNlIHJldHVybiBLYyhyLHRoaXMubW92aW5nTWVhbi5yZWFkKCksdGhpcy5tb3ZpbmdWYXJpYW5jZS5yZWFkKCksdGhpcy5iZXRhPT1udWxsP251bGw6dGhpcy5iZXRhLnJlYWQoKSx0aGlzLmdhbW1hPT1udWxsP251bGw6dGhpcy5nYW1tYS5yZWFkKCksdGhpcy5lcHNpbG9uKX07aWYoIXMpcmV0dXJuIGYoKTtjb25zdFtnLHksd109aEcocix0aGlzLmdhbW1hLnJlYWQoKSx0aGlzLmJldGEucmVhZCgpLGEsdGhpcy5lcHNpbG9uKSxiPShTLCQsayk9PntyZSgoKT0+e2NvbnN0IFQ9MS1rLEQ9Uy5yZWFkKCksTD1YKEllKEQsJCksVCk7Uy53cml0ZShJZShELEwpKX0pfTtyZXR1cm4oKCk9PntiKHRoaXMubW92aW5nTWVhbix5LHRoaXMubW9tZW50dW0pLGIodGhpcy5tb3ZpbmdWYXJpYW5jZSx3LHRoaXMubW9tZW50dW0pfSkoKSxnfSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17YXhpczp0aGlzLmF4aXMsbW9tZW50dW06dGhpcy5tb21lbnR1bSxlcHNpbG9uOnRoaXMuZXBzaWxvbixjZW50ZXI6dGhpcy5jZW50ZXIsc2NhbGU6dGhpcy5zY2FsZSxiZXRhSW5pdGlhbGl6ZXI6T3QodGhpcy5iZXRhSW5pdGlhbGl6ZXIpLGdhbW1hSW5pdGlhbGl6ZXI6T3QodGhpcy5nYW1tYUluaXRpYWxpemVyKSxtb3ZpbmdNZWFuSW5pdGlhbGl6ZXI6T3QodGhpcy5tb3ZpbmdNZWFuSW5pdGlhbGl6ZXIpLG1vdmluZ1ZhcmlhbmNlSW5pdGlhbGl6ZXI6T3QodGhpcy5tb3ZpbmdWYXJpYW5jZUluaXRpYWxpemVyKSxiZXRhUmVndWxhcml6ZXI6dnQodGhpcy5iZXRhUmVndWxhcml6ZXIpLGdhbW1hUmVndWxhcml6ZXI6dnQodGhpcy5nYW1tYVJlZ3VsYXJpemVyKSxiZXRhQ29uc3RyYWludDpzbih0aGlzLmJldGFDb25zdHJhaW50KSxnYW1tYUNvbnN0cmFpbnQ6c24odGhpcy5nYW1tYUNvbnN0cmFpbnQpfSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19TkUuY2xhc3NOYW1lPSJCYXRjaE5vcm1hbGl6YXRpb24iO2dlKE5FKTtjbGFzcyBrRSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe2lmKGU9PW51bGwmJihlPXt9KSxzdXBlcihlKSx0aGlzLmF4aXM9ZS5heGlzPT1udWxsPy0xOmUuYXhpcyx0eXBlb2YgdGhpcy5heGlzPT0ibnVtYmVyIil7aWYoIU51bWJlci5pc0ludGVnZXIodGhpcy5heGlzKSl0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGF4aXMgdG8gYmUgYW4gaW50ZWdlciwgYnV0IHJlY2VpdmVkICR7dGhpcy5heGlzfWApfWVsc2UgaWYoQXJyYXkuaXNBcnJheSh0aGlzLmF4aXMpKXtmb3IoY29uc3QgdCBvZiB0aGlzLmF4aXMpaWYoIU51bWJlci5pc0ludGVnZXIodCkpdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBheGlzIHRvIGJlIGFuIGFycmF5IG9mIGludGVnZXJzLCBidXQgcmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeSh0aGlzLmF4aXMpfWApfWVsc2UgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBheGlzIHRvIGJlIGFuIGludGVnZXIgb3IgYW4gYXJyYXkgb2YgaW50ZWdlcnMsIGJ1dCByZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KHRoaXMuYXhpcyl9YCk7dGhpcy5lcHNpbG9uPWUuZXBzaWxvbj09bnVsbD8uMDAxOmUuZXBzaWxvbix0aGlzLmNlbnRlcj1lLmNlbnRlcj09bnVsbD8hMDplLmNlbnRlcix0aGlzLnNjYWxlPWUuc2NhbGU9PW51bGw/ITA6ZS5zY2FsZSx0aGlzLmJldGFJbml0aWFsaXplcj1UdChlLmJldGFJbml0aWFsaXplcnx8Inplcm9zIiksdGhpcy5nYW1tYUluaXRpYWxpemVyPVR0KGUuZ2FtbWFJbml0aWFsaXplcnx8Im9uZXMiKSx0aGlzLmJldGFSZWd1bGFyaXplcj1FdChlLmJldGFSZWd1bGFyaXplciksdGhpcy5nYW1tYVJlZ3VsYXJpemVyPUV0KGUuZ2FtbWFSZWd1bGFyaXplciksdGhpcy5zdXBwb3J0c01hc2tpbmc9ITB9YnVpbGQoZSl7ZT1hdChlKTtjb25zdCB0PWUubGVuZ3RoO3R5cGVvZiB0aGlzLmF4aXM9PSJudW1iZXIiJiYodGhpcy5heGlzPVt0aGlzLmF4aXNdKTtmb3IobGV0IG89MDtvPHRoaXMuYXhpcy5sZW5ndGg7KytvKXRoaXMuYXhpc1tvXTwwJiYodGhpcy5heGlzW29dKz10KTtmb3IoY29uc3QgbyBvZiB0aGlzLmF4aXMpaWYobzwwfHxvPj10KXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBheGlzOiAke299YCk7aWYodGhpcy5heGlzLmxlbmd0aCE9PW5pKHRoaXMuYXhpcykubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgRm91bmQgZHVwbGljYXRlIGF4ZXMgaW46ICR7dGhpcy5heGlzfWApO2NvbnN0IHM9dGhpcy5heGlzLm1hcChvPT5lW29dKSxyPSEwO3RoaXMuc2NhbGU/dGhpcy5nYW1tYT10aGlzLmFkZFdlaWdodCgiZ2FtbWEiLHMsImZsb2F0MzIiLHRoaXMuZ2FtbWFJbml0aWFsaXplcix0aGlzLmdhbW1hUmVndWxhcml6ZXIscik6dGhpcy5nYW1tYT1udWxsLHRoaXMuY2VudGVyP3RoaXMuYmV0YT10aGlzLmFkZFdlaWdodCgiYmV0YSIscywiZmxvYXQzMiIsdGhpcy5iZXRhSW5pdGlhbGl6ZXIsdGhpcy5iZXRhUmVndWxhcml6ZXIscik6dGhpcy5iZXRhPW51bGwsdGhpcy5idWlsdD0hMH1jYWxsKGUsdCl7Y29uc3Qgcz1qZShlKSxyPXMuc2hhcGUsbz1yLmxlbmd0aDtyZXR1cm4gcmUoKCk9PntsZXR7bWVhbjphLHZhcmlhbmNlOmx9PWZoKHMsdGhpcy5heGlzLCEwKTtjb25zdCBjPWZhKDEsbyk7Zm9yKGNvbnN0IHcgb2YgdGhpcy5heGlzKWNbd109clt3XTtjb25zdCBoPXc9PnchPW51bGwmJncuc2hhcGUubGVuZ3RoIT09bz9KKHcsYyk6dztsZXQgcD10aGlzLnNjYWxlP2godGhpcy5nYW1tYS5yZWFkKCkpOm51bGwsZj10aGlzLmNlbnRlcj9oKHRoaXMuYmV0YS5yZWFkKCkpOm51bGw7Y29uc3QgZz1bXSx5PVtdO2ZvcihsZXQgdz0wO3c8bzsrK3cpdGhpcy5heGlzLmluZGV4T2YodykhPT0tMT8oZy5wdXNoKHJbd10pLHkucHVzaCgxKSk6KGcucHVzaCgxKSx5LnB1c2goclt3XSkpO3JldHVybiBhPV9zKGEsZyksbD1fcyhsLGcpLHAhPW51bGwmJihwPV9zKHAseSkpLGYhPW51bGwmJihmPV9zKGYseSkpLEtjKHMsYSxsLGYscCx0aGlzLmVwc2lsb24pfSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17YXhpczp0aGlzLmF4aXMsZXBzaWxvbjp0aGlzLmVwc2lsb24sY2VudGVyOnRoaXMuY2VudGVyLHNjYWxlOnRoaXMuc2NhbGUsYmV0YUluaXRpYWxpemVyOk90KHRoaXMuYmV0YUluaXRpYWxpemVyKSxnYW1tYUluaXRpYWxpemVyOk90KHRoaXMuZ2FtbWFJbml0aWFsaXplciksYmV0YVJlZ3VsYXJpemVyOnZ0KHRoaXMuYmV0YVJlZ3VsYXJpemVyKSxnYW1tYVJlZ3VsYXJpemVyOnZ0KHRoaXMuZ2FtbWFSZWd1bGFyaXplcil9LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfX1rRS5jbGFzc05hbWU9IkxheWVyTm9ybWFsaXphdGlvbiI7Z2Uoa0UpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHBHKG4sZSx0KXtyZXR1cm4gcmUoKCk9PntpZihuLnJhbmshPT00KXRocm93IG5ldyBlZShgdGVtcG9yYWxQYWRkaW5nIGV4cGVjdHMgaW5wdXQgdGVuc29yIHRvIGJlIDQtRCwgYnV0IHJlY2VpdmVkIGEgJHtuLnJhbmt9LUQgdGVuc29yLmApO2lmKGU9PW51bGwmJihlPVtbMSwxXSxbMSwxXV0pLGUubGVuZ3RoIT09Mnx8ZVswXS5sZW5ndGghPT0yfHxlWzFdLmxlbmd0aCE9PTIpdGhyb3cgbmV3IGVlKCJzcGF0aWFsMmRQYWRkaW5nIGV4cGVjdHMgYHBhZGRpbmdgIHRvIGJlIGFuIEFycmF5IG9mIHR3byBBcnJheXMsIGVhY2ggb2Ygd2hpY2ggaXMgYW4gQXJyYXkgb2YgdHdvIGludGVnZXJzLiIpO2lmKHQ9PW51bGwmJih0PWtyKCkpLHQhPT0iY2hhbm5lbHNMYXN0IiYmdCE9PSJjaGFubmVsc0ZpcnN0Iil0aHJvdyBuZXcgZWUoYFVua25vd24gZGF0YSBmb3JtYXQ6ICR7dH0uIFN1cHBvcnRlZCBkYXRhIGZvcm1hdHMgYXJlICdjaGFubmVsc0xhc3QnIGFuZCAnY2hhbm5lbHNGaXJzdC5gKTtsZXQgcztyZXR1cm4gdD09PSJjaGFubmVsc0ZpcnN0Ij9zPVtbMCwwXSxbMCwwXSxlWzBdLGVbMV1dOnM9W1swLDBdLGVbMF0sZVsxXSxbMCwwXV0sJG8obixzKX0pfWNsYXNzIENFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7aWYoZT09bnVsbCYmKGU9e30pLHN1cGVyKGUpLHRoaXMuZGF0YUZvcm1hdD1lLmRhdGFGb3JtYXQ9PW51bGw/a3IoKTplLmRhdGFGb3JtYXQsZS5wYWRkaW5nPT1udWxsKXRoaXMucGFkZGluZz1bWzEsMV0sWzEsMV1dO2Vsc2UgaWYodHlwZW9mIGUucGFkZGluZz09Im51bWJlciIpdGhpcy5wYWRkaW5nPVtbZS5wYWRkaW5nLGUucGFkZGluZ10sW2UucGFkZGluZyxlLnBhZGRpbmddXTtlbHNle2lmKGUucGFkZGluZz1lLnBhZGRpbmcsZS5wYWRkaW5nLmxlbmd0aCE9PTIpdGhyb3cgbmV3IGVlKGBaZXJvUGFkZGluZzJEIGV4cGVjdHMgcGFkZGluZyB0byBiZSBhIGxlbmd0aC0yIGFycmF5LCBidXQgcmVjZWl2ZWQgYSBsZW5ndGgtJHtlLnBhZGRpbmcubGVuZ3RofSBhcnJheS5gKTtsZXQgdCxzO2lmKHR5cGVvZiBlLnBhZGRpbmdbMF09PSJudW1iZXIiKXQ9W2UucGFkZGluZ1swXSxlLnBhZGRpbmdbMF1dLHM9W2UucGFkZGluZ1sxXSxlLnBhZGRpbmdbMV1dO2Vsc2V7aWYoZS5wYWRkaW5nPWUucGFkZGluZyxlLnBhZGRpbmdbMF0ubGVuZ3RoIT09Mil0aHJvdyBuZXcgZWUoYFplcm9QYWRkaW5nMkQgZXhwZWN0cyBoZWlnaHQgcGFkZGluZyB0byBiZSBhIGxlbmd0aC0yIGFycmF5LCBidXQgcmVjZWl2ZWQgYSBsZW5ndGgtJHtlLnBhZGRpbmdbMF0ubGVuZ3RofSBhcnJheS5gKTtpZih0PWUucGFkZGluZ1swXSxlLnBhZGRpbmdbMV0ubGVuZ3RoIT09Mil0aHJvdyBuZXcgZWUoYFplcm9QYWRkaW5nMkQgZXhwZWN0cyB3aWR0aCBwYWRkaW5nIHRvIGJlIGEgbGVuZ3RoLTIgYXJyYXksIGJ1dCByZWNlaXZlZCBhIGxlbmd0aC0ke2UucGFkZGluZ1sxXS5sZW5ndGh9IGFycmF5LmApO3M9ZS5wYWRkaW5nWzFdfXRoaXMucGFkZGluZz1bdCxzXX10aGlzLmlucHV0U3BlYz1bbmV3IG5uKHtuZGltOjR9KV19Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2U9YXQoZSk7bGV0IHQscztyZXR1cm4gdGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiPyhlWzJdIT1udWxsJiZlWzJdPj0wP3Q9ZVsyXSt0aGlzLnBhZGRpbmdbMF1bMF0rdGhpcy5wYWRkaW5nWzBdWzFdOnQ9bnVsbCxlWzNdIT1udWxsJiZlWzNdPj0wP3M9ZVszXSt0aGlzLnBhZGRpbmdbMV1bMF0rdGhpcy5wYWRkaW5nWzFdWzFdOnM9bnVsbCxbZVswXSxlWzFdLHQsc10pOihlWzFdIT1udWxsJiZlWzFdPj0wP3Q9ZVsxXSt0aGlzLnBhZGRpbmdbMF1bMF0rdGhpcy5wYWRkaW5nWzBdWzFdOnQ9bnVsbCxlWzJdIT1udWxsJiZlWzJdPj0wP3M9ZVsyXSt0aGlzLnBhZGRpbmdbMV1bMF0rdGhpcy5wYWRkaW5nWzFdWzFdOnM9bnVsbCxbZVswXSx0LHMsZVszXV0pfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9PnBHKGplKGUpLHRoaXMucGFkZGluZyx0aGlzLmRhdGFGb3JtYXQpKX1nZXRDb25maWcoKXtjb25zdCBlPXtwYWRkaW5nOnRoaXMucGFkZGluZyxkYXRhRm9ybWF0OnRoaXMuZGF0YUZvcm1hdH0sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9fUNFLmNsYXNzTmFtZT0iWmVyb1BhZGRpbmcyRCI7Z2UoQ0UpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG95KG4sZSx0LHMscixvKXtyZXR1cm4gcmUoKCk9PntHdChyKSxWMihvKSxNcyhzKSx0PT1udWxsJiYodD1bMSwxXSkscz09bnVsbCYmKHM9InZhbGlkIikscj09bnVsbCYmKHI9a3IoKSksbz09bnVsbCYmKG89Im1heCIpLG49R3cobixyKTtsZXQgaTtjb25zdCBhPXM9PT0ic2FtZSI/InNhbWUiOiJ2YWxpZCI7cmV0dXJuIG89PT0ibWF4Ij9pPXBoKG4sZSx0LGEpOmk9b2gobixlLHQsYSkscj09PSJjaGFubmVsc0ZpcnN0IiYmKGk9dHQoaSxbMCwzLDEsMl0pKSxpfSl9ZnVuY3Rpb24gJEUobixlLHQscyxyLG8pe3JldHVybiByZSgoKT0+e0d0KHIpLFYyKG8pLE1zKHMpLHQ9PW51bGwmJih0PVsxLDEsMV0pLHM9PW51bGwmJihzPSJ2YWxpZCIpLHI9PW51bGwmJihyPWtyKCkpLG89PW51bGwmJihvPSJtYXgiKSxuPVVUKG4scik7bGV0IGk7Y29uc3QgYT1zPT09InNhbWUiPyJzYW1lIjoidmFsaWQiO3JldHVybiBvPT09Im1heCI/aT0kYihuLGUsdCxhKTppPWViKG4sZSx0LGEpLHI9PT0iY2hhbm5lbHNGaXJzdCImJihpPXR0KGksWzAsNCwxLDIsM10pKSxpfSl9Y2xhc3MgSUUgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtpZihlLnBvb2xTaXplPT1udWxsJiYoZS5wb29sU2l6ZT0yKSxzdXBlcihlKSx0eXBlb2YgZS5wb29sU2l6ZT09Im51bWJlciIpdGhpcy5wb29sU2l6ZT1bZS5wb29sU2l6ZV07ZWxzZSBpZihBcnJheS5pc0FycmF5KGUucG9vbFNpemUpJiZlLnBvb2xTaXplLmxlbmd0aD09PTEmJnR5cGVvZiBlLnBvb2xTaXplWzBdPT0ibnVtYmVyIil0aGlzLnBvb2xTaXplPWUucG9vbFNpemU7ZWxzZSB0aHJvdyBuZXcgZWUoYHBvb2xTaXplIGZvciAxRCBjb252b2x1dGlvbmFsIGxheWVyIG11c3QgYmUgYSBudW1iZXIgb3IgYW4gQXJyYXkgb2YgYSBzaW5nbGUgbnVtYmVyLCBidXQgcmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeShlLnBvb2xTaXplKX1gKTtpZihkbih0aGlzLnBvb2xTaXplLCJwb29sU2l6ZSIpLGUuc3RyaWRlcz09bnVsbCl0aGlzLnN0cmlkZXM9dGhpcy5wb29sU2l6ZTtlbHNlIGlmKHR5cGVvZiBlLnN0cmlkZXM9PSJudW1iZXIiKXRoaXMuc3RyaWRlcz1bZS5zdHJpZGVzXTtlbHNlIGlmKEFycmF5LmlzQXJyYXkoZS5zdHJpZGVzKSYmZS5zdHJpZGVzLmxlbmd0aD09PTEmJnR5cGVvZiBlLnN0cmlkZXNbMF09PSJudW1iZXIiKXRoaXMuc3RyaWRlcz1lLnN0cmlkZXM7ZWxzZSB0aHJvdyBuZXcgZWUoYHN0cmlkZXMgZm9yIDFEIGNvbnZvbHV0aW9uYWwgbGF5ZXIgbXVzdCBiZSBhIG51bWJlciBvciBhbiBBcnJheSBvZiBhIHNpbmdsZSBudW1iZXIsIGJ1dCByZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KGUuc3RyaWRlcyl9YCk7ZG4odGhpcy5zdHJpZGVzLCJzdHJpZGVzIiksdGhpcy5wYWRkaW5nPWUucGFkZGluZz09bnVsbD8idmFsaWQiOmUucGFkZGluZyxNcyh0aGlzLnBhZGRpbmcpLHRoaXMuaW5wdXRTcGVjPVtuZXcgbm4oe25kaW06M30pXX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7ZT1hdChlKTtjb25zdCB0PXZyKGVbMV0sdGhpcy5wb29sU2l6ZVswXSx0aGlzLnBhZGRpbmcsdGhpcy5zdHJpZGVzWzBdKTtyZXR1cm5bZVswXSx0LGVbMl1dfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pnt0aGlzLmludm9rZUNhbGxIb29rKGUsdCksZT0kaChqZShlKSwyKTtjb25zdCBzPXRoaXMucG9vbGluZ0Z1bmN0aW9uKGplKGUpLFt0aGlzLnBvb2xTaXplWzBdLDFdLFt0aGlzLnN0cmlkZXNbMF0sMV0sdGhpcy5wYWRkaW5nLCJjaGFubmVsc0xhc3QiKTtyZXR1cm4gU2kocyxbMl0pfSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17cG9vbFNpemU6dGhpcy5wb29sU2l6ZSxwYWRkaW5nOnRoaXMucGFkZGluZyxzdHJpZGVzOnRoaXMuc3RyaWRlc30sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9fWNsYXNzIFRFIGV4dGVuZHMgSUV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9cG9vbGluZ0Z1bmN0aW9uKGUsdCxzLHIsbyl7cmV0dXJuIEd0KG8pLE1zKHIpLG95KGUsdCxzLHIsbywibWF4Iil9fVRFLmNsYXNzTmFtZT0iTWF4UG9vbGluZzFEIjtnZShURSk7Y2xhc3MgRUUgZXh0ZW5kcyBJRXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKX1wb29saW5nRnVuY3Rpb24oZSx0LHMscixvKXtyZXR1cm4gR3QobyksTXMociksb3koZSx0LHMscixvLCJhdmciKX19RUUuY2xhc3NOYW1lPSJBdmVyYWdlUG9vbGluZzFEIjtnZShFRSk7Y2xhc3MgUkUgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtpZihlLnBvb2xTaXplPT1udWxsJiYoZS5wb29sU2l6ZT1bMiwyXSksc3VwZXIoZSksdGhpcy5wb29sU2l6ZT1BcnJheS5pc0FycmF5KGUucG9vbFNpemUpP2UucG9vbFNpemU6W2UucG9vbFNpemUsZS5wb29sU2l6ZV0sZS5zdHJpZGVzPT1udWxsKXRoaXMuc3RyaWRlcz10aGlzLnBvb2xTaXplO2Vsc2UgaWYoQXJyYXkuaXNBcnJheShlLnN0cmlkZXMpKXtpZihlLnN0cmlkZXMubGVuZ3RoIT09Mil0aHJvdyBuZXcgZWUoYElmIHRoZSBzdHJpZGVzIHByb3BlcnR5IG9mIGEgMkQgcG9vbGluZyBsYXllciBpcyBhbiBBcnJheSwgaXQgaXMgZXhwZWN0ZWQgdG8gaGF2ZSBhIGxlbmd0aCBvZiAyLCBidXQgcmVjZWl2ZWQgbGVuZ3RoICR7ZS5zdHJpZGVzLmxlbmd0aH0uYCk7dGhpcy5zdHJpZGVzPWUuc3RyaWRlc31lbHNlIHRoaXMuc3RyaWRlcz1bZS5zdHJpZGVzLGUuc3RyaWRlc107ZG4odGhpcy5wb29sU2l6ZSwicG9vbFNpemUiKSxkbih0aGlzLnN0cmlkZXMsInN0cmlkZXMiKSx0aGlzLnBhZGRpbmc9ZS5wYWRkaW5nPT1udWxsPyJ2YWxpZCI6ZS5wYWRkaW5nLHRoaXMuZGF0YUZvcm1hdD1lLmRhdGFGb3JtYXQ9PW51bGw/ImNoYW5uZWxzTGFzdCI6ZS5kYXRhRm9ybWF0LEd0KHRoaXMuZGF0YUZvcm1hdCksTXModGhpcy5wYWRkaW5nKSx0aGlzLmlucHV0U3BlYz1bbmV3IG5uKHtuZGltOjR9KV19Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2U9YXQoZSk7bGV0IHQ9dGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiP2VbMl06ZVsxXSxzPXRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0ZpcnN0Ij9lWzNdOmVbMl07cmV0dXJuIHQ9dnIodCx0aGlzLnBvb2xTaXplWzBdLHRoaXMucGFkZGluZyx0aGlzLnN0cmlkZXNbMF0pLHM9dnIocyx0aGlzLnBvb2xTaXplWzFdLHRoaXMucGFkZGluZyx0aGlzLnN0cmlkZXNbMV0pLHRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0ZpcnN0Ij9bZVswXSxlWzFdLHQsc106W2VbMF0sdCxzLGVbM11dfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pih0aGlzLmludm9rZUNhbGxIb29rKGUsdCksdGhpcy5wb29saW5nRnVuY3Rpb24oamUoZSksdGhpcy5wb29sU2l6ZSx0aGlzLnN0cmlkZXMsdGhpcy5wYWRkaW5nLHRoaXMuZGF0YUZvcm1hdCkpKX1nZXRDb25maWcoKXtjb25zdCBlPXtwb29sU2l6ZTp0aGlzLnBvb2xTaXplLHBhZGRpbmc6dGhpcy5wYWRkaW5nLHN0cmlkZXM6dGhpcy5zdHJpZGVzLGRhdGFGb3JtYXQ6dGhpcy5kYXRhRm9ybWF0fSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19Y2xhc3MgREUgZXh0ZW5kcyBSRXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKX1wb29saW5nRnVuY3Rpb24oZSx0LHMscixvKXtyZXR1cm4gR3QobyksTXMociksb3koZSx0LHMscixvLCJtYXgiKX19REUuY2xhc3NOYW1lPSJNYXhQb29saW5nMkQiO2dlKERFKTtjbGFzcyBBRSBleHRlbmRzIFJFe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfXBvb2xpbmdGdW5jdGlvbihlLHQscyxyLG8pe3JldHVybiBHdChvKSxNcyhyKSxveShlLHQscyxyLG8sImF2ZyIpfX1BRS5jbGFzc05hbWU9IkF2ZXJhZ2VQb29saW5nMkQiO2dlKEFFKTtjbGFzcyBfRSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe2lmKGUucG9vbFNpemU9PW51bGwmJihlLnBvb2xTaXplPVsyLDIsMl0pLHN1cGVyKGUpLHRoaXMucG9vbFNpemU9QXJyYXkuaXNBcnJheShlLnBvb2xTaXplKT9lLnBvb2xTaXplOltlLnBvb2xTaXplLGUucG9vbFNpemUsZS5wb29sU2l6ZV0sZS5zdHJpZGVzPT1udWxsKXRoaXMuc3RyaWRlcz10aGlzLnBvb2xTaXplO2Vsc2UgaWYoQXJyYXkuaXNBcnJheShlLnN0cmlkZXMpKXtpZihlLnN0cmlkZXMubGVuZ3RoIT09Myl0aHJvdyBuZXcgZWUoYElmIHRoZSBzdHJpZGVzIHByb3BlcnR5IG9mIGEgM0QgcG9vbGluZyBsYXllciBpcyBhbiBBcnJheSwgaXQgaXMgZXhwZWN0ZWQgdG8gaGF2ZSBhIGxlbmd0aCBvZiAzLCBidXQgcmVjZWl2ZWQgbGVuZ3RoICR7ZS5zdHJpZGVzLmxlbmd0aH0uYCk7dGhpcy5zdHJpZGVzPWUuc3RyaWRlc31lbHNlIHRoaXMuc3RyaWRlcz1bZS5zdHJpZGVzLGUuc3RyaWRlcyxlLnN0cmlkZXNdO2RuKHRoaXMucG9vbFNpemUsInBvb2xTaXplIiksZG4odGhpcy5zdHJpZGVzLCJzdHJpZGVzIiksdGhpcy5wYWRkaW5nPWUucGFkZGluZz09bnVsbD8idmFsaWQiOmUucGFkZGluZyx0aGlzLmRhdGFGb3JtYXQ9ZS5kYXRhRm9ybWF0PT1udWxsPyJjaGFubmVsc0xhc3QiOmUuZGF0YUZvcm1hdCxHdCh0aGlzLmRhdGFGb3JtYXQpLE1zKHRoaXMucGFkZGluZyksdGhpcy5pbnB1dFNwZWM9W25ldyBubih7bmRpbTo1fSldfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtlPWF0KGUpO2xldCB0PXRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0ZpcnN0Ij9lWzJdOmVbMV0scz10aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNGaXJzdCI/ZVszXTplWzJdLHI9dGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiP2VbNF06ZVszXTtyZXR1cm4gdD12cih0LHRoaXMucG9vbFNpemVbMF0sdGhpcy5wYWRkaW5nLHRoaXMuc3RyaWRlc1swXSkscz12cihzLHRoaXMucG9vbFNpemVbMV0sdGhpcy5wYWRkaW5nLHRoaXMuc3RyaWRlc1sxXSkscj12cihyLHRoaXMucG9vbFNpemVbMl0sdGhpcy5wYWRkaW5nLHRoaXMuc3RyaWRlc1syXSksdGhpcy5kYXRhRm9ybWF0PT09ImNoYW5uZWxzRmlyc3QiP1tlWzBdLGVbMV0sdCxzLHJdOltlWzBdLHQscyxyLGVbNF1dfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pih0aGlzLmludm9rZUNhbGxIb29rKGUsdCksdGhpcy5wb29saW5nRnVuY3Rpb24oamUoZSksdGhpcy5wb29sU2l6ZSx0aGlzLnN0cmlkZXMsdGhpcy5wYWRkaW5nLHRoaXMuZGF0YUZvcm1hdCkpKX1nZXRDb25maWcoKXtjb25zdCBlPXtwb29sU2l6ZTp0aGlzLnBvb2xTaXplLHBhZGRpbmc6dGhpcy5wYWRkaW5nLHN0cmlkZXM6dGhpcy5zdHJpZGVzLGRhdGFGb3JtYXQ6dGhpcy5kYXRhRm9ybWF0fSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX19Y2xhc3MgT0UgZXh0ZW5kcyBfRXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKX1wb29saW5nRnVuY3Rpb24oZSx0LHMscixvKXtyZXR1cm4gR3QobyksTXMociksJEUoZSx0LHMscixvLCJtYXgiKX19T0UuY2xhc3NOYW1lPSJNYXhQb29saW5nM0QiO2dlKE9FKTtjbGFzcyBGRSBleHRlbmRzIF9Fe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfXBvb2xpbmdGdW5jdGlvbihlLHQscyxyLG8pe3JldHVybiBHdChvKSxNcyhyKSwkRShlLHQscyxyLG8sImF2ZyIpfX1GRS5jbGFzc05hbWU9IkF2ZXJhZ2VQb29saW5nM0QiO2dlKEZFKTtjbGFzcyBMRSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuaW5wdXRTcGVjPVtuZXcgbm4oe25kaW06M30pXX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7cmV0dXJuW2VbMF0sZVsyXV19Y2FsbChlLHQpe3Rocm93IG5ldyBLZX19Y2xhc3MgUEUgZXh0ZW5kcyBMRXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHx7fSl9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2NvbnN0IHM9amUoZSk7cmV0dXJuIF90KHMsMSl9KX19UEUuY2xhc3NOYW1lPSJHbG9iYWxBdmVyYWdlUG9vbGluZzFEIjtnZShQRSk7Y2xhc3MgekUgZXh0ZW5kcyBMRXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHx7fSl9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2NvbnN0IHM9amUoZSk7cmV0dXJuIExzKHMsMSl9KX19ekUuY2xhc3NOYW1lPSJHbG9iYWxNYXhQb29saW5nMUQiO2dlKHpFKTtjbGFzcyBNRSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuZGF0YUZvcm1hdD1lLmRhdGFGb3JtYXQ9PW51bGw/ImNoYW5uZWxzTGFzdCI6ZS5kYXRhRm9ybWF0LEd0KHRoaXMuZGF0YUZvcm1hdCksdGhpcy5pbnB1dFNwZWM9W25ldyBubih7bmRpbTo0fSldfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtyZXR1cm4gZT1lLHRoaXMuZGF0YUZvcm1hdD09PSJjaGFubmVsc0xhc3QiP1tlWzBdLGVbM11dOltlWzBdLGVbMV1dfWNhbGwoZSx0KXt0aHJvdyBuZXcgS2V9Z2V0Q29uZmlnKCl7Y29uc3QgZT17ZGF0YUZvcm1hdDp0aGlzLmRhdGFGb3JtYXR9LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfX1jbGFzcyBCRSBleHRlbmRzIE1Fe2NhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pntjb25zdCBzPWplKGUpO3JldHVybiB0aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNMYXN0Ij9fdChzLFsxLDJdKTpfdChzLFsyLDNdKX0pfX1CRS5jbGFzc05hbWU9Ikdsb2JhbEF2ZXJhZ2VQb29saW5nMkQiO2dlKEJFKTtjbGFzcyBWRSBleHRlbmRzIE1Fe2NhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pntjb25zdCBzPWplKGUpO3JldHVybiB0aGlzLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNMYXN0Ij9McyhzLFsxLDJdKTpMcyhzLFsyLDNdKX0pfX1WRS5jbGFzc05hbWU9Ikdsb2JhbE1heFBvb2xpbmcyRCI7Z2UoVkUpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIFdFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5sYXllcj1lLmxheWVyfWJ1aWxkKGUpe3RoaXMuYnVpbHQ9ITB9Z2V0IHRyYWluYWJsZSgpe3JldHVybiB0aGlzLmxheWVyIT1udWxsP3RoaXMubGF5ZXIudHJhaW5hYmxlOiExfXNldCB0cmFpbmFibGUoZSl7dGhpcy5sYXllciE9bnVsbCYmKHRoaXMubGF5ZXIudHJhaW5hYmxlPWUpfWdldCB0cmFpbmFibGVXZWlnaHRzKCl7cmV0dXJuIHRoaXMubGF5ZXIudHJhaW5hYmxlV2VpZ2h0c31nZXQgbm9uVHJhaW5hYmxlV2VpZ2h0cygpe3JldHVybiB0aGlzLmxheWVyLm5vblRyYWluYWJsZVdlaWdodHN9Z2V0IHVwZGF0ZXMoKXtyZXR1cm4gdGhpcy5sYXllci5fdXBkYXRlc31nZXQgbG9zc2VzKCl7cmV0dXJuIHRoaXMubGF5ZXIubG9zc2VzfWdldFdlaWdodHMoKXtyZXR1cm4gdGhpcy5sYXllci5nZXRXZWlnaHRzKCl9c2V0V2VpZ2h0cyhlKXt0aGlzLmxheWVyLnNldFdlaWdodHMoZSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17bGF5ZXI6e2NsYXNzTmFtZTp0aGlzLmxheWVyLmdldENsYXNzTmFtZSgpLGNvbmZpZzp0aGlzLmxheWVyLmdldENvbmZpZygpfX0sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9c2V0RmFzdFdlaWdodEluaXREdXJpbmdCdWlsZChlKXtzdXBlci5zZXRGYXN0V2VpZ2h0SW5pdER1cmluZ0J1aWxkKGUpLHRoaXMubGF5ZXIhPW51bGwmJnRoaXMubGF5ZXIuc2V0RmFzdFdlaWdodEluaXREdXJpbmdCdWlsZChlKX1zdGF0aWMgZnJvbUNvbmZpZyhlLHQscz17fSl7Y29uc3Qgcj10LmxheWVyLG89bW8ocixzKTtkZWxldGUgdC5sYXllcjtjb25zdCBpPXtsYXllcjpvfTtyZXR1cm4gT2JqZWN0LmFzc2lnbihpLHQpLG5ldyBlKGkpfX1jbGFzcyBVRSBleHRlbmRzIFdFe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuc3VwcG9ydHNNYXNraW5nPSEwfWJ1aWxkKGUpe2lmKGU9YXQoZSksZS5sZW5ndGg8Myl0aHJvdyBuZXcgZWUoYFRpbWVEaXN0cmlidXRlZCBsYXllciBleHBlY3RzIGFuIGlucHV0IHNoYXBlID49IDNELCBidXQgcmVjZWl2ZWQgaW5wdXQgc2hhcGUgJHtKU09OLnN0cmluZ2lmeShlKX1gKTt0aGlzLmlucHV0U3BlYz1be3NoYXBlOmV9XTtjb25zdCB0PVtlWzBdXS5jb25jYXQoZS5zbGljZSgyKSk7dGhpcy5sYXllci5idWlsdHx8KHRoaXMubGF5ZXIuYnVpbGQodCksdGhpcy5sYXllci5idWlsdD0hMCksc3VwZXIuYnVpbGQoZSl9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2U9YXQoZSk7Y29uc3QgdD1bZVswXV0uY29uY2F0KGUuc2xpY2UoMikpLHM9dGhpcy5sYXllci5jb21wdXRlT3V0cHV0U2hhcGUodCkscj1lWzFdO3JldHVybltzWzBdLHJdLmNvbmNhdChzLnNsaWNlKDEpKX1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT4oZT1qZShlKSxaVCgoaSxhKT0+W2plKHRoaXMubGF5ZXIuY2FsbChpLHQpKSxbXV0sZSxbXSwhMSxudWxsLG51bGwsITEsITApWzFdKSl9fVVFLmNsYXNzTmFtZT0iVGltZURpc3RyaWJ1dGVkIjtnZShVRSk7ZnVuY3Rpb24gZkcobil7SWEoRlUsIkJpZGlyZWN0aW9uYWxNZXJnZU1vZGUiLG4pfWNvbnN0IG1HPSJjb25jYXQiO2NsYXNzIGpFIGV4dGVuZHMgV0V7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSk7Y29uc3QgdD1lLmxheWVyLmdldENvbmZpZygpLHM9e307cy5jbGFzc05hbWU9ZS5sYXllci5nZXRDbGFzc05hbWUoKSxzLmNvbmZpZz10LHRoaXMuZm9yd2FyZExheWVyPW1vKHMpLHQuZ29CYWNrd2FyZHM9dC5nb0JhY2t3YXJkcyE9PSEwO2NvbnN0IHI9e307aWYoci5jbGFzc05hbWU9ZS5sYXllci5nZXRDbGFzc05hbWUoKSxyLmNvbmZpZz10LHRoaXMuYmFja3dhcmRMYXllcj1tbyhyKSx0aGlzLmZvcndhcmRMYXllci5uYW1lPSJmb3J3YXJkXyIrdGhpcy5mb3J3YXJkTGF5ZXIubmFtZSx0aGlzLmJhY2t3YXJkTGF5ZXIubmFtZT0iYmFja3dhcmRfIit0aGlzLmJhY2t3YXJkTGF5ZXIubmFtZSx0aGlzLm1lcmdlTW9kZT1lLm1lcmdlTW9kZT09PXZvaWQgMD9tRzplLm1lcmdlTW9kZSxmRyh0aGlzLm1lcmdlTW9kZSksZS53ZWlnaHRzKXRocm93IG5ldyBLZSgid2VpZ2h0cyBzdXBwb3J0IGlzIG5vdCBpbXBsZW1lbnRlZCBmb3IgQmlkaXJlY3Rpb25hbCBsYXllciB5ZXQuIik7dGhpcy5fc3RhdGVmdWw9ZS5sYXllci5zdGF0ZWZ1bCx0aGlzLnJldHVyblNlcXVlbmNlcz1lLmxheWVyLnJldHVyblNlcXVlbmNlcyx0aGlzLnJldHVyblN0YXRlPWUubGF5ZXIucmV0dXJuU3RhdGUsdGhpcy5zdXBwb3J0c01hc2tpbmc9ITAsdGhpcy5fdHJhaW5hYmxlPSEwLHRoaXMuaW5wdXRTcGVjPWUubGF5ZXIuaW5wdXRTcGVjLHRoaXMubnVtQ29uc3RhbnRzPW51bGx9Z2V0IHRyYWluYWJsZSgpe3JldHVybiB0aGlzLl90cmFpbmFibGV9c2V0IHRyYWluYWJsZShlKXt0aGlzLl90cmFpbmFibGU9ZSx0aGlzLmZvcndhcmRMYXllciE9bnVsbCYmKHRoaXMuZm9yd2FyZExheWVyLnRyYWluYWJsZT1lKSx0aGlzLmJhY2t3YXJkTGF5ZXIhPW51bGwmJih0aGlzLmJhY2t3YXJkTGF5ZXIudHJhaW5hYmxlPWUpfWdldFdlaWdodHMoKXtyZXR1cm4gdGhpcy5mb3J3YXJkTGF5ZXIuZ2V0V2VpZ2h0cygpLmNvbmNhdCh0aGlzLmJhY2t3YXJkTGF5ZXIuZ2V0V2VpZ2h0cygpKX1zZXRXZWlnaHRzKGUpe2NvbnN0IHQ9ZS5sZW5ndGgscz1NYXRoLmZsb29yKHQvMik7dGhpcy5mb3J3YXJkTGF5ZXIuc2V0V2VpZ2h0cyhlLnNsaWNlKDAscykpLHRoaXMuYmFja3dhcmRMYXllci5zZXRXZWlnaHRzKGUuc2xpY2UocykpfWNvbXB1dGVPdXRwdXRTaGFwZShlKXtsZXQgdD10aGlzLmZvcndhcmRMYXllci5jb21wdXRlT3V0cHV0U2hhcGUoZSk7QXJyYXkuaXNBcnJheSh0KSYmQXJyYXkuaXNBcnJheSh0WzBdKXx8KHQ9W3RdKSx0PXQ7bGV0IHMscixvO3JldHVybiB0aGlzLnJldHVyblN0YXRlJiYobz10LnNsaWNlKDEpKSxzPXRbMF0scz1zLHRoaXMubWVyZ2VNb2RlPT09ImNvbmNhdCI/KHNbcy5sZW5ndGgtMV0qPTIscj1bc10pOnRoaXMubWVyZ2VNb2RlPT1udWxsP3I9W3Mscy5zbGljZSgpXTpyPVtzXSx0aGlzLnJldHVyblN0YXRlP3RoaXMubWVyZ2VNb2RlPT1udWxsP3IuY29uY2F0KG8pLmNvbmNhdChvLnNsaWNlKCkpOltzXS5jb25jYXQobykuY29uY2F0KG8uc2xpY2UoKSk6Wm4ocil9YXBwbHkoZSx0KXtsZXQgcz10PT1udWxsP251bGw6dC5pbml0aWFsU3RhdGUscj10PT1udWxsP251bGw6dC5jb25zdGFudHM7dD09bnVsbCYmKHQ9e30pO2NvbnN0IG89UVQoZSxzLHIsdGhpcy5udW1Db25zdGFudHMpO2lmKGU9by5pbnB1dHMscz1vLmluaXRpYWxTdGF0ZSxyPW8uY29uc3RhbnRzLEFycmF5LmlzQXJyYXkoZSkmJihzPWUuc2xpY2UoMSksZT1lWzBdKSwocz09bnVsbHx8cy5sZW5ndGg9PT0wKSYmcj09bnVsbClyZXR1cm4gc3VwZXIuYXBwbHkoZSx0KTtjb25zdCBpPVtdLGE9W107aWYocyE9bnVsbCl7Y29uc3QgYz1zLmxlbmd0aDtpZihjJTI+MCl0aHJvdyBuZXcgZWUoIldoZW4gcGFzc2luZyBgaW5pdGlhbFN0YXRlYCB0byBhIEJpZHJlY3Rpb25hbCBSTk4sIHRoZSBzdGF0ZSBzaG91bGQgYmUgYW4gQXJyYXkgY29udGFpbmluZyB0aGUgc3RhdGVzIG9mIHRoZSB1bmRlcmx5aW5nIFJOTnMuIik7dC5pbml0aWFsU3RhdGU9cyxpLnB1c2goLi4ucyk7Y29uc3QgaD1zLm1hcChwPT5uZXcgbm4oe3NoYXBlOnAuc2hhcGV9KSk7dGhpcy5mb3J3YXJkTGF5ZXIuc3RhdGVTcGVjPWguc2xpY2UoMCxjLzIpLHRoaXMuYmFja3dhcmRMYXllci5zdGF0ZVNwZWM9aC5zbGljZShjLzIpLGEucHVzaCguLi5oKX1pZihyIT1udWxsKXRocm93IG5ldyBLZSgiU3VwcG9ydCBmb3IgY29uc3RhbnRzIGluIEJpZGlyZWN0aW9uYWwgbGF5ZXJzIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQuIik7Y29uc3QgbD1pWzBdaW5zdGFuY2VvZiBYcjtmb3IoY29uc3QgYyBvZiBpKWlmKGMgaW5zdGFuY2VvZiBYciE9PWwpdGhyb3cgbmV3IGVlKCJUaGUgaW5pdGlhbCBzdGF0ZSBvZiBhIEJpZGlyZWN0aW9uYWwgbGF5ZXIgY2Fubm90IGJlIHNwZWNpZmllZCBhcyBhIG1peCBvZiBzeW1ib2xpYyBhbmQgbm9uLXN5bWJvbGljIHRlbnNvcnMiKTtpZihsKXtjb25zdCBjPVtlXS5jb25jYXQoaSksaD10aGlzLmlucHV0U3BlYy5jb25jYXQoYSkscD10aGlzLmlucHV0U3BlYzt0aGlzLmlucHV0U3BlYz1oO2NvbnN0IGY9c3VwZXIuYXBwbHkoYyx0KTtyZXR1cm4gdGhpcy5pbnB1dFNwZWM9cCxmfWVsc2UgcmV0dXJuIHN1cGVyLmFwcGx5KGUsdCl9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2NvbnN0IHM9dC5pbml0aWFsU3RhdGU7bGV0IHIsbztpZihzPT1udWxsKXI9dGhpcy5mb3J3YXJkTGF5ZXIuY2FsbChlLHQpLG89dGhpcy5iYWNrd2FyZExheWVyLmNhbGwoZSx0KTtlbHNle2NvbnN0IGw9cy5zbGljZSgwLHMubGVuZ3RoLzIpLGM9cy5zbGljZShzLmxlbmd0aC8yKTtyPXRoaXMuZm9yd2FyZExheWVyLmNhbGwoZSxPYmplY3QuYXNzaWduKHQse2luaXRpYWxTdGF0ZTpsfSkpLG89dGhpcy5iYWNrd2FyZExheWVyLmNhbGwoZSxPYmplY3QuYXNzaWduKHQse2luaXRpYWxTdGF0ZTpjfSkpfWxldCBpO3RoaXMucmV0dXJuU3RhdGUmJihBcnJheS5pc0FycmF5KHIpJiYoaT1yLnNsaWNlKDEpLmNvbmNhdChvLnNsaWNlKDEpKSkscj1yWzBdLG89b1swXSksdGhpcy5yZXR1cm5TZXF1ZW5jZXMmJihvPVBzKG8sMSkpO2xldCBhO3JldHVybiB0aGlzLm1lcmdlTW9kZT09PSJjb25jYXQiP2E9QXcoW3Isb10pOnRoaXMubWVyZ2VNb2RlPT09InN1bSI/YT1tZShyLG8pOnRoaXMubWVyZ2VNb2RlPT09ImF2ZSI/YT1YKC41LG1lKHIsbykpOnRoaXMubWVyZ2VNb2RlPT09Im11bCI/YT1YKHIsbyk6dGhpcy5tZXJnZU1vZGU9PW51bGwmJihhPVtyLG9dKSx0aGlzLnJldHVyblN0YXRlP3RoaXMubWVyZ2VNb2RlPT1udWxsP2EuY29uY2F0KGkpOlthXS5jb25jYXQoaSk6YX0pfXJlc2V0U3RhdGVzKGUpe3RoaXMuZm9yd2FyZExheWVyLnJlc2V0U3RhdGVzKCksdGhpcy5iYWNrd2FyZExheWVyLnJlc2V0U3RhdGVzKCl9YnVpbGQoZSl7bmEodGhpcy5mb3J3YXJkTGF5ZXIubmFtZSwoKT0+e3RoaXMuZm9yd2FyZExheWVyLmJ1aWxkKGUpfSksbmEodGhpcy5iYWNrd2FyZExheWVyLm5hbWUsKCk9Pnt0aGlzLmJhY2t3YXJkTGF5ZXIuYnVpbGQoZSl9KSx0aGlzLmJ1aWx0PSEwfWNvbXB1dGVNYXNrKGUsdCl7QXJyYXkuaXNBcnJheSh0KSYmKHQ9dFswXSk7bGV0IHM7aWYodGhpcy5yZXR1cm5TZXF1ZW5jZXM/dGhpcy5tZXJnZU1vZGU9PW51bGw/cz1bdCx0XTpzPXQ6dGhpcy5tZXJnZU1vZGU9PW51bGw/cz1bbnVsbCxudWxsXTpzPW51bGwsdGhpcy5yZXR1cm5TdGF0ZSl7Y29uc3Qgbz10aGlzLmZvcndhcmRMYXllci5zdGF0ZXMubWFwKGk9Pm51bGwpO3JldHVybiBBcnJheS5pc0FycmF5KHMpP3MuY29uY2F0KG8pLmNvbmNhdChvKTpbc10uY29uY2F0KG8pLmNvbmNhdChvKX1lbHNlIHJldHVybiBzfWdldCB0cmFpbmFibGVXZWlnaHRzKCl7cmV0dXJuIHRoaXMuZm9yd2FyZExheWVyLnRyYWluYWJsZVdlaWdodHMuY29uY2F0KHRoaXMuYmFja3dhcmRMYXllci50cmFpbmFibGVXZWlnaHRzKX1nZXQgbm9uVHJhaW5hYmxlV2VpZ2h0cygpe3JldHVybiB0aGlzLmZvcndhcmRMYXllci5ub25UcmFpbmFibGVXZWlnaHRzLmNvbmNhdCh0aGlzLmJhY2t3YXJkTGF5ZXIubm9uVHJhaW5hYmxlV2VpZ2h0cyl9c2V0RmFzdFdlaWdodEluaXREdXJpbmdCdWlsZChlKXtzdXBlci5zZXRGYXN0V2VpZ2h0SW5pdER1cmluZ0J1aWxkKGUpLHRoaXMuZm9yd2FyZExheWVyIT1udWxsJiZ0aGlzLmZvcndhcmRMYXllci5zZXRGYXN0V2VpZ2h0SW5pdER1cmluZ0J1aWxkKGUpLHRoaXMuYmFja3dhcmRMYXllciE9bnVsbCYmdGhpcy5iYWNrd2FyZExheWVyLnNldEZhc3RXZWlnaHRJbml0RHVyaW5nQnVpbGQoZSl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17bWVyZ2VNb2RlOnRoaXMubWVyZ2VNb2RlfSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX1zdGF0aWMgZnJvbUNvbmZpZyhlLHQpe2NvbnN0IHM9bW8odC5sYXllcik7aWYoZGVsZXRlIHQubGF5ZXIsdC5udW1Db25zdGFudHMhPW51bGwpdGhyb3cgbmV3IEtlKCJEZXNlcmlhbGl6YXRpb24gb2YgYSBCaWRpcmVjdGlvbmFsIGxheWVyIHdpdGggbnVtQ29uc3RhbnRzIHByZXNlbnQgaXMgbm90IHN1cHBvcnRlZCB5ZXQuIik7Y29uc3Qgcj10O3JldHVybiByLmxheWVyPXMsbmV3IGUocil9fWpFLmNsYXNzTmFtZT0iQmlkaXJlY3Rpb25hbCI7Z2UoakUpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBDb2RlU21pdGggTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIEdFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5zY2FsZT1lLnNjYWxlLGUub2Zmc2V0P3RoaXMub2Zmc2V0PWUub2Zmc2V0OnRoaXMub2Zmc2V0PTB9Z2V0Q29uZmlnKCl7Y29uc3QgZT17c2NhbGU6dGhpcy5zY2FsZSxvZmZzZXQ6dGhpcy5vZmZzZXR9LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9PihlPWplKGUpLGUuZHR5cGUhPT0iZmxvYXQzMiImJihlPVVyKGUsImZsb2F0MzIiKSksbWUoWChlLHRoaXMuc2NhbGUpLHRoaXMub2Zmc2V0KSkpfX1HRS5jbGFzc05hbWU9IlJlc2NhbGluZyI7Z2UoR0UpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBDb2RlU21pdGggTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0e3Jlc2l6ZUJpbGluZWFyOmdHLGNyb3BBbmRSZXNpemU6eUd9PXhyO2NsYXNzIEhFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5oZWlnaHQ9ZS5oZWlnaHQsdGhpcy53aWR0aD1lLndpZHRofWNlbnRlckNyb3AoZSx0LHMscixvLGksYSxsKXtyZXR1cm4gcmUoKCk9PntsZXQgYyxoPSExO2NvbnN0IHA9dC9pLGY9cy9hLGc9KHIrdCkvaSx5PShvK3MpL2Esdz1bcCxmLGcseV0sYj1bXTtlLnJhbms9PT0zPyhoPSEwLGM9b3MoW2VdKSk6Yz1lO2ZvcihsZXQgVD0wO1Q8Yy5zaGFwZVswXTtUKyspYi5wdXNoKHcpO2NvbnN0IHY9ZXIoYixbYi5sZW5ndGgsNF0pLFM9aGEoMCxiLmxlbmd0aCwxLCJpbnQzMiIpLGs9eUcoYyx2LFMsW3Isb10sIm5lYXJlc3QiKTtyZXR1cm4gVXIoaD9qZSh6cyhrKSk6ayxsKX0pfXVwc2l6ZShlLHQscyxyKXtyZXR1cm4gcmUoKCk9Pntjb25zdCBvPWdHKGUsW3Qsc10pO3JldHVybiBVcihvLHIpfSl9Y2FsbChlLHQpe3JldHVybiByZSgoKT0+e2NvbnN0IHM9amUoZSkscj1zLmR0eXBlLG89cy5zaGFwZSxpPW9bby5sZW5ndGgtM10sYT1vW28ubGVuZ3RoLTJdO2xldCBsPTA7aSE9PXRoaXMuaGVpZ2h0JiYobD1NYXRoLmZsb29yKChpLXRoaXMuaGVpZ2h0KS8yKSk7bGV0IGM9MDtyZXR1cm4gYSE9PXRoaXMud2lkdGgmJihjPU1hdGguZmxvb3IoKGEtdGhpcy53aWR0aCkvMiksYz09PTAmJihjPTEpKSxsPj0wJiZjPj0wP3RoaXMuY2VudGVyQ3JvcChzLGwsYyx0aGlzLmhlaWdodCx0aGlzLndpZHRoLGksYSxyKTp0aGlzLnVwc2l6ZShlLHRoaXMuaGVpZ2h0LHRoaXMud2lkdGgscil9KX1nZXRDb25maWcoKXtjb25zdCBlPXtoZWlnaHQ6dGhpcy5oZWlnaHQsd2lkdGg6dGhpcy53aWR0aH0sdD1zdXBlci5nZXRDb25maWcoKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHQpLGV9Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2U9YXQoZSk7Y29uc3QgdD1lLmxlbmd0aC0zLHM9ZS5sZW5ndGgtMjtyZXR1cm4gZVt0XT10aGlzLmhlaWdodCxlW3NdPXRoaXMud2lkdGgsZX19SEUuY2xhc3NOYW1lPSJDZW50ZXJDcm9wIjtnZShIRSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIENvZGVTbWl0aCBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24geEcobixlLHQscyl7bGV0IHI9amUobik7aWYoci5kdHlwZSE9PSJpbnQzMiImJihyPVVyKHIsImludDMyIikpLGU9PT0iaW50IilyZXR1cm4gcjtjb25zdCBvPXIuc2hhcGU7aWYoci5yYW5rPT09MCYmKHI9QW4ociwtMSkpLGU9PT0ib25lSG90IiYmci5zaGFwZVtyLnNoYXBlLmxlbmd0aC0xXSE9PTEmJihyPUFuKHIsLTEpKSxyLnJhbms+Mil0aHJvdyBuZXcgZWUoYFdoZW4gb3V0cHV0TW9kZSBpcyBub3QgaW50LCBtYXhpbXVtIG91dHB1dCByYW5rIGlzIDIgUmVjZWl2ZWQgb3V0cHV0TW9kZSAke2V9IGFuZCBpbnB1dCBzaGFwZSAke299IHdoaWNoIHdvdWxkIHJlc3VsdCBpbiBvdXRwdXQgcmFuayAke3IucmFua30uYCk7Y29uc3QgaT1bIm11bHRpSG90Iiwib25lSG90Il0uaW5jbHVkZXMoZSksYT1yO2xldCBsO2lmKHR5cGVvZiBzPCJ1IiYmZT09PSJjb3VudCI/bD1SZihhLHMsdCxpKTpsPVJmKGEsW10sdCxpKSxlIT09InRmSWRmIilyZXR1cm4gbDtpZihzKXJldHVybiBYKGwscyk7dGhyb3cgbmV3IGVlKCJXaGVuIG91dHB1dE1vZGUgaXMgJ3RmSWRmJywgd2VpZ2h0cyBtdXN0IGJlIHByb3ZpZGVkLiIpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBDb2RlU21pdGggTExDCiAqCiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZQogKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgb3IgYXQKICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIHFFIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5udW1Ub2tlbnM9ZS5udW1Ub2tlbnMsZS5vdXRwdXRNb2RlP3RoaXMub3V0cHV0TW9kZT1lLm91dHB1dE1vZGU6dGhpcy5vdXRwdXRNb2RlPSJtdWx0aUhvdCJ9Z2V0Q29uZmlnKCl7Y29uc3QgZT17bnVtVG9rZW5zOnRoaXMubnVtVG9rZW5zLG91dHB1dE1vZGU6dGhpcy5vdXRwdXRNb2RlfSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7cmV0dXJuIGU9YXQoZSksZT09bnVsbD9bdGhpcy5udW1Ub2tlbnNdOnRoaXMub3V0cHV0TW9kZT09PSJvbmVIb3QiJiZlW2UubGVuZ3RoLTFdIT09MT8oZS5wdXNoKHRoaXMubnVtVG9rZW5zKSxlKTooZVtlLmxlbmd0aC0xXT10aGlzLm51bVRva2VucyxlKX1jYWxsKGUsdCl7cmV0dXJuIHJlKCgpPT57ZT1qZShlKSxlLmR0eXBlIT09ImludDMyIiYmKGU9VXIoZSwiaW50MzIiKSk7bGV0IHM7aWYodHlwZW9mIHQuY291bnRXZWlnaHRzPCJ1Iil7aWYodGhpcy5vdXRwdXRNb2RlIT09ImNvdW50Iil0aHJvdyBuZXcgZWUoYGNvdW50V2VpZ2h0cyBpcyBub3QgdXNlZCB3aGVuIG91dHB1dE1vZGUgIT09IGNvdW50LgogICAgICAgICAgICAgIFJlY2VpdmVkIGNvdW50V2VpZ2h0cz0ke3QuY291bnRXZWlnaHRzfWApO3M9amUodC5jb3VudFdlaWdodHMpfWNvbnN0IHI9THMoZSksbz1tbChlKSxpPWFzKHRoaXMubnVtVG9rZW5zLHIpLmJ1ZmZlclN5bmMoKS5nZXQoMCksYT1DbyhvLDApLmJ1ZmZlclN5bmMoKS5nZXQoMCk7aWYoIShpJiZhKSl0aHJvdyBuZXcgZWUoYElucHV0IHZhbHVlcyBtdXN0IGJlIGJldHdlZW4gMCA8IHZhbHVlcyA8PSBudW1Ub2tlbnMgd2l0aCBudW1Ub2tlbnM9JHt0aGlzLm51bVRva2Vuc31gKTtyZXR1cm4geEcoZSx0aGlzLm91dHB1dE1vZGUsdGhpcy5udW1Ub2tlbnMscyl9KX19cUUuY2xhc3NOYW1lPSJDYXRlZ29yeUVuY29kaW5nIjtnZShxRSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIENvZGVTbWl0aCBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgYkc9WyJiaWxpbmVhciIsIm5lYXJlc3QiXSx1Qz1uZXcgU2V0KGJHKTtjbGFzcyBLRSBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUpe2lmKHN1cGVyKGUpLHRoaXMuaGVpZ2h0PWUuaGVpZ2h0LHRoaXMud2lkdGg9ZS53aWR0aCxlLmludGVycG9sYXRpb24paWYodUMuaGFzKGUuaW50ZXJwb2xhdGlvbikpdGhpcy5pbnRlcnBvbGF0aW9uPWUuaW50ZXJwb2xhdGlvbjtlbHNlIHRocm93IG5ldyBlZShgSW52YWxpZCBpbnRlcnBvbGF0aW9uIHBhcmFtZXRlcjogJHtlLmludGVycG9sYXRpb259IGlzIG5vdCBpbXBsZW1lbnRlZGApO2Vsc2UgdGhpcy5pbnRlcnBvbGF0aW9uPSJiaWxpbmVhciI7dGhpcy5jcm9wVG9Bc3BlY3RSYXRpbz0hIWUuY3JvcFRvQXNwZWN0UmF0aW99Y29tcHV0ZU91dHB1dFNoYXBlKGUpe2U9YXQoZSk7Y29uc3QgdD1lWzJdO3JldHVyblt0aGlzLmhlaWdodCx0aGlzLndpZHRoLHRdfWdldENvbmZpZygpe2NvbnN0IGU9e2hlaWdodDp0aGlzLmhlaWdodCx3aWR0aDp0aGlzLndpZHRoLGludGVycG9sYXRpb246dGhpcy5pbnRlcnBvbGF0aW9uLGNyb3BUb0FzcGVjdFJhdGlvOnRoaXMuY3JvcFRvQXNwZWN0UmF0aW99LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pntjb25zdCBzPVt0aGlzLmhlaWdodCx0aGlzLndpZHRoXTtpZih0aGlzLmludGVycG9sYXRpb249PT0iYmlsaW5lYXIiKXJldHVybiB4ci5yZXNpemVCaWxpbmVhcihlLHMsIXRoaXMuY3JvcFRvQXNwZWN0UmF0aW8pO2lmKHRoaXMuaW50ZXJwb2xhdGlvbj09PSJuZWFyZXN0IilyZXR1cm4geHIucmVzaXplTmVhcmVzdE5laWdoYm9yKGUscywhdGhpcy5jcm9wVG9Bc3BlY3RSYXRpbyk7dGhyb3cgbmV3IEVycm9yKGBJbnRlcnBvbGF0aW9uIGlzICR7dGhpcy5pbnRlcnBvbGF0aW9ufSBidXQgb25seSAke1suLi51Q119IGFyZSBzdXBwb3J0ZWRgKX0pfX1LRS5jbGFzc05hbWU9IlJlc2l6aW5nIjtnZShLRSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIENvZGVTbWl0aCBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgWEV7Y29uc3RydWN0b3IoZSl7dGhpcy5zZWVkPWV9bmV4dCgpe2lmKHRoaXMuc2VlZCE9PXZvaWQgMClyZXR1cm4gdGhpcy5zZWVkKyt9fVhFLmNsYXNzTmFtZT0iUmFuZG9tU2VlZCI7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIENvZGVTbWl0aCBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgWUUgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnJhbmRvbUdlbmVyYXRvcj1uZXcgWEUoZS5zZWVkKX1nZXRDb25maWcoKXtjb25zdCBlPXtzZWVkOnRoaXMucmFuZG9tR2VuZXJhdG9yLnNlZWR9LHQ9c3VwZXIuZ2V0Q29uZmlnKCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0KSxlfX1ZRS5jbGFzc05hbWU9IkJhc2VSYW5kb21MYXllciI7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIENvZGVTbWl0aCBMTEMKICoKICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlCiAqIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBvciBhdAogKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgd0c9WyJiaWxpbmVhciIsIm5lYXJlc3QiXSxjQz1uZXcgU2V0KHdHKTtjbGFzcyBRRSBleHRlbmRzIFlFe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpO2NvbnN0e2ZhY3Rvcjp0LGludGVycG9sYXRpb246cz0iYmlsaW5lYXIifT1lO2lmKHRoaXMuZmFjdG9yPXQsQXJyYXkuaXNBcnJheSh0aGlzLmZhY3RvcikmJnRoaXMuZmFjdG9yLmxlbmd0aD09PTIpdGhpcy53aWR0aExvd2VyPXRoaXMuZmFjdG9yWzBdLHRoaXMud2lkdGhVcHBlcj10aGlzLmZhY3RvclsxXTtlbHNlIGlmKCFBcnJheS5pc0FycmF5KHRoaXMuZmFjdG9yKSYmdGhpcy5mYWN0b3I+MCl0aGlzLndpZHRoTG93ZXI9LXRoaXMuZmFjdG9yLHRoaXMud2lkdGhVcHBlcj10aGlzLmZhY3RvcjtlbHNlIHRocm93IG5ldyBlZShgSW52YWxpZCBmYWN0b3I6ICR7dGhpcy5mYWN0b3J9LiBNdXN0IGJlIHBvc2l0aXZlIG51bWJlciBvciB0dXBsZSBvZiAyIG51bWJlcnNgKTtpZih0aGlzLndpZHRoTG93ZXI8LTF8fHRoaXMud2lkdGhVcHBlcjwtMSl0aHJvdyBuZXcgZWUoYGZhY3RvciBtdXN0IGhhdmUgdmFsdWVzIGxhcmdlciB0aGFuIC0xLiBHb3Q6ICR7dGhpcy5mYWN0b3J9YCk7aWYodGhpcy53aWR0aFVwcGVyPHRoaXMud2lkdGhMb3dlcil0aHJvdyBuZXcgZWUoYGZhY3RvciBjYW5ub3QgaGF2ZSB1cHBlciBib3VuZCBsZXNzIHRoYW4gbG93ZXIgYm91bmQuCiAgICAgICAgR290IHVwcGVyIGJvdW5kOiAke3RoaXMud2lkdGhVcHBlcn0uCiAgICAgICAgR290IGxvd2VyIGJvdW5kOiAke3RoaXMud2lkdGhMb3dlcn0KICAgICAgYCk7aWYocylpZihjQy5oYXMocykpdGhpcy5pbnRlcnBvbGF0aW9uPXM7ZWxzZSB0aHJvdyBuZXcgZWUoYEludmFsaWQgaW50ZXJwb2xhdGlvbiBwYXJhbWV0ZXI6ICR7c30gaXMgbm90IGltcGxlbWVudGVkYCl9Z2V0Q29uZmlnKCl7Y29uc3QgZT17ZmFjdG9yOnRoaXMuZmFjdG9yLGludGVycG9sYXRpb246dGhpcy5pbnRlcnBvbGF0aW9ufSx0PXN1cGVyLmdldENvbmZpZygpO3JldHVybiBPYmplY3QuYXNzaWduKGUsdCksZX1jb21wdXRlT3V0cHV0U2hhcGUoZSl7ZT1hdChlKTtjb25zdCB0PWVbMl07cmV0dXJuW3RoaXMuaW1nSGVpZ2h0LC0xLHRdfWNhbGwoZSx0KXtyZXR1cm4gcmUoKCk9Pntjb25zdCBzPWplKGUpO3RoaXMuaW1nSGVpZ2h0PXMuc2hhcGVbcy5zaGFwZS5sZW5ndGgtM107Y29uc3Qgcj1zLnNoYXBlW3Muc2hhcGUubGVuZ3RoLTJdO3RoaXMud2lkdGhGYWN0b3I9dmkoWzFdLDErdGhpcy53aWR0aExvd2VyLDErdGhpcy53aWR0aFVwcGVyLCJmbG9hdDMyIix0aGlzLnJhbmRvbUdlbmVyYXRvci5uZXh0KCkpO2xldCBvPXRoaXMud2lkdGhGYWN0b3IuZGF0YVN5bmMoKVswXSpyO289TWF0aC5yb3VuZChvKTtjb25zdCBpPVt0aGlzLmltZ0hlaWdodCxvXTtzd2l0Y2godGhpcy5pbnRlcnBvbGF0aW9uKXtjYXNlImJpbGluZWFyIjpyZXR1cm4geHIucmVzaXplQmlsaW5lYXIoZSxpKTtjYXNlIm5lYXJlc3QiOnJldHVybiB4ci5yZXNpemVOZWFyZXN0TmVpZ2hib3IoZSxpKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgSW50ZXJwb2xhdGlvbiBpcyAke3RoaXMuaW50ZXJwb2xhdGlvbn0KICAgICAgICAgIGJ1dCBvbmx5ICR7Wy4uLmNDXX0gYXJlIHN1cHBvcnRlZGApfX0pfX1RRS5jbGFzc05hbWU9IlJhbmRvbVdpZHRoIjtnZShRRSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgdkc9b2UoKTt2Ry5yZWdpc3RlckZsYWcoIktFRVBfSU5URVJNRURJQVRFX1RFTlNPUlMiLCgpPT4hMSxuPT57biYmY29uc29sZS53YXJuKCJLZWVwIGludGVybWVkaWF0ZSB0ZW5zb3JzIGlzIE9OLiBUaGlzIHdpbGwgcHJpbnQgdGhlIHZhbHVlcyBvZiBhbGwgaW50ZXJtZWRpYXRlIHRlbnNvcnMgZHVyaW5nIG1vZGVsIGluZmVyZW5jZS4gTm90IGFsbCBtb2RlbHMgc3VwcG9ydCB0aGlzIG1vZGUuIEZvciBkZXRhaWxzLCBjaGVjayBlMmUvYmVuY2htYXJrcy8gbW9kZWxfY29uZmlnLmpzLiBUaGlzIHNpZ25pZmljYW50bHkgaW1wYWN0cyBwZXJmb3JtYW5jZS4iKX0pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL3ZhciB5czsoZnVuY3Rpb24obil7bltuLkRUX0lOVkFMSUQ9MF09IkRUX0lOVkFMSUQiLG5bbi5EVF9GTE9BVD0xXT0iRFRfRkxPQVQiLG5bbi5EVF9ET1VCTEU9Ml09IkRUX0RPVUJMRSIsbltuLkRUX0lOVDMyPTNdPSJEVF9JTlQzMiIsbltuLkRUX1VJTlQ4PTRdPSJEVF9VSU5UOCIsbltuLkRUX0lOVDE2PTVdPSJEVF9JTlQxNiIsbltuLkRUX0lOVDg9Nl09IkRUX0lOVDgiLG5bbi5EVF9TVFJJTkc9N109IkRUX1NUUklORyIsbltuLkRUX0NPTVBMRVg2ND04XT0iRFRfQ09NUExFWDY0IixuW24uRFRfSU5UNjQ9OV09IkRUX0lOVDY0IixuW24uRFRfQk9PTD0xMF09IkRUX0JPT0wiLG5bbi5EVF9RSU5UOD0xMV09IkRUX1FJTlQ4IixuW24uRFRfUVVJTlQ4PTEyXT0iRFRfUVVJTlQ4IixuW24uRFRfUUlOVDMyPTEzXT0iRFRfUUlOVDMyIixuW24uRFRfQkZMT0FUMTY9MTRdPSJEVF9CRkxPQVQxNiIsbltuLkRUX1FJTlQxNj0xNV09IkRUX1FJTlQxNiIsbltuLkRUX1FVSU5UMTY9MTZdPSJEVF9RVUlOVDE2IixuW24uRFRfVUlOVDE2PTE3XT0iRFRfVUlOVDE2IixuW24uRFRfQ09NUExFWDEyOD0xOF09IkRUX0NPTVBMRVgxMjgiLG5bbi5EVF9IQUxGPTE5XT0iRFRfSEFMRiIsbltuLkRUX1JFU09VUkNFPTIwXT0iRFRfUkVTT1VSQ0UiLG5bbi5EVF9WQVJJQU5UPTIxXT0iRFRfVkFSSUFOVCIsbltuLkRUX1VJTlQzMj0yMl09IkRUX1VJTlQzMiIsbltuLkRUX1VJTlQ2ND0yM109IkRUX1VJTlQ2NCIsbltuLkRUX0ZMT0FUX1JFRj0xMDFdPSJEVF9GTE9BVF9SRUYiLG5bbi5EVF9ET1VCTEVfUkVGPTEwMl09IkRUX0RPVUJMRV9SRUYiLG5bbi5EVF9JTlQzMl9SRUY9MTAzXT0iRFRfSU5UMzJfUkVGIixuW24uRFRfVUlOVDhfUkVGPTEwNF09IkRUX1VJTlQ4X1JFRiIsbltuLkRUX0lOVDE2X1JFRj0xMDVdPSJEVF9JTlQxNl9SRUYiLG5bbi5EVF9JTlQ4X1JFRj0xMDZdPSJEVF9JTlQ4X1JFRiIsbltuLkRUX1NUUklOR19SRUY9MTA3XT0iRFRfU1RSSU5HX1JFRiIsbltuLkRUX0NPTVBMRVg2NF9SRUY9MTA4XT0iRFRfQ09NUExFWDY0X1JFRiIsbltuLkRUX0lOVDY0X1JFRj0xMDldPSJEVF9JTlQ2NF9SRUYiLG5bbi5EVF9CT09MX1JFRj0xMTBdPSJEVF9CT09MX1JFRiIsbltuLkRUX1FJTlQ4X1JFRj0xMTFdPSJEVF9RSU5UOF9SRUYiLG5bbi5EVF9RVUlOVDhfUkVGPTExMl09IkRUX1FVSU5UOF9SRUYiLG5bbi5EVF9RSU5UMzJfUkVGPTExM109IkRUX1FJTlQzMl9SRUYiLG5bbi5EVF9CRkxPQVQxNl9SRUY9MTE0XT0iRFRfQkZMT0FUMTZfUkVGIixuW24uRFRfUUlOVDE2X1JFRj0xMTVdPSJEVF9RSU5UMTZfUkVGIixuW24uRFRfUVVJTlQxNl9SRUY9MTE2XT0iRFRfUVVJTlQxNl9SRUYiLG5bbi5EVF9VSU5UMTZfUkVGPTExN109IkRUX1VJTlQxNl9SRUYiLG5bbi5EVF9DT01QTEVYMTI4X1JFRj0xMThdPSJEVF9DT01QTEVYMTI4X1JFRiIsbltuLkRUX0hBTEZfUkVGPTExOV09IkRUX0hBTEZfUkVGIixuW24uRFRfUkVTT1VSQ0VfUkVGPTEyMF09IkRUX1JFU09VUkNFX1JFRiIsbltuLkRUX1ZBUklBTlRfUkVGPTEyMV09IkRUX1ZBUklBTlRfUkVGIixuW24uRFRfVUlOVDMyX1JFRj0xMjJdPSJEVF9VSU5UMzJfUkVGIixuW24uRFRfVUlOVDY0X1JFRj0xMjNdPSJEVF9VSU5UNjRfUkVGIn0pKHlzfHwoeXM9e30pKTt2YXIgZEM7KGZ1bmN0aW9uKG4peyhmdW5jdGlvbihlKXtlW2UuTEVHQUNZPTBdPSJMRUdBQ1kiLGVbZS5WMT0xXT0iVjEiLGVbZS5WMj0yXT0iVjIifSkobi5DaGVja3BvaW50Rm9ybWF0VmVyc2lvbnx8KG4uQ2hlY2twb2ludEZvcm1hdFZlcnNpb249e30pKX0pKGRDfHwoZEM9e30pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBRdz17fTtmdW5jdGlvbiBTRyhuLGUpe2NvbnN0IHQ9e3RmT3BOYW1lOm4sY2F0ZWdvcnk6ImN1c3RvbSIsaW5wdXRzOltdLGF0dHJzOltdLGN1c3RvbUV4ZWN1dG9yOmV9O1F3W25dPXR9ZnVuY3Rpb24gWkUobil7cmV0dXJuIFF3W25dfWZ1bmN0aW9uIE5HKG4pe2RlbGV0ZSBRd1tuXX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBJKG4sZSx0LHMscil7Y29uc3Qgbz1lLmlucHV0UGFyYW1zW25dO2lmKG8mJm8uaW5wdXRJbmRleFN0YXJ0IT09dm9pZCAwKXtjb25zdCBhPW8uaW5wdXRJbmRleFN0YXJ0LGw9by5pbnB1dEluZGV4RW5kPT09MD92b2lkIDA6by5pbnB1dEluZGV4RW5kPT09dm9pZCAwP2ErMTpvLmlucHV0SW5kZXhFbmQsYz1hPDA/ZS5pbnB1dE5hbWVzLmxlbmd0aCthOmE7aWYoby50eXBlPT09InRlbnNvciIpcmV0dXJuIGJuKGUuaW5wdXROYW1lc1tjXSx0LHMscik7aWYoby50eXBlPT09InRlbnNvcnMiKXtjb25zdCBmPWUuaW5wdXRzLnNsaWNlKGEsbCk7cmV0dXJuIGUuaW5wdXROYW1lcy5zbGljZShhLGwpLmZpbHRlcigoeSx3KT0+e3ZhciBiO3JldHVybigoYj1mW3ddKT09PW51bGx8fGI9PT12b2lkIDA/dm9pZCAwOmIub3ApIT09Ik5vT3AifSkubWFwKHk9PmJuKHksdCxzLHIpKX1jb25zdCBoPWJuKGUuaW5wdXROYW1lc1tjXSx0LHMscikscD1oLmRhdGFTeW5jKCk7cmV0dXJuIG8udHlwZT09PSJudW1iZXIiP3BbMF06RnMoaC5zaGFwZSxwKX1jb25zdCBpPWUuYXR0clBhcmFtc1tuXTtyZXR1cm4gaSYmaS52YWx1ZX1mdW5jdGlvbiBibihuLGUsdCxzKXtjb25zdFtyLG9dPXhzKG4sdCk7aWYocyE9bnVsbCl7Y29uc3QgYT1zLmdldEhhc2hUYWJsZUhhbmRsZUJ5TmFtZShyKTtpZihhIT1udWxsKXJldHVybiBhfWNvbnN0IGk9dC5jdXJyZW50Q29udGV4dElkcy5maW5kKGE9PiEhZVtWZihyLGEpXSk7cmV0dXJuIGkhPT12b2lkIDA/ZVtWZihyLGkpXVtvXTp2b2lkIDB9ZnVuY3Rpb24gaEMobixlLHQpe3JldHVybiBlW1ZmKG4sdC5jdXJyZW50Q29udGV4dElkKV19ZnVuY3Rpb24gY28obixlKXtjb25zdFt0LHMscl09eHMobixlKTtyZXR1cm5bVmYodCxlJiZlLmN1cnJlbnRDb250ZXh0SWQpLHMscl19ZnVuY3Rpb24gVmYobixlKXtyZXR1cm4gZT9gJHtufS0ke2V9YDpufWZ1bmN0aW9uIHhzKG4sZSl7aWYobj09PSIiKXJldHVyblsiIiwwLHZvaWQgMF07Y29uc3QgdD1lIT1udWxsJiZlLnBhcnNlTm9kZU5hbWVDYWNoZSE9bnVsbDtpZih0KXtjb25zdCBvPWUucGFyc2VOb2RlTmFtZUNhY2hlLmdldChuKTtpZihvIT1udWxsKXJldHVybiBvfWNvbnN0IHM9bi5zcGxpdCgiOiIpO2xldCByO2lmKHMubGVuZ3RoPT09MSlyPVtuLDAsdm9pZCAwXTtlbHNle2NvbnN0IG89c1swXSxpPXMubGVuZ3RoPT09Mz9zWzFdOnZvaWQgMCxhPU51bWJlcihzW3MubGVuZ3RoLTFdKTtyPVtvLGEsaV19cmV0dXJuIHQmJmUucGFyc2VOb2RlTmFtZUNhY2hlLnNldChuLHIpLHJ9ZnVuY3Rpb24gd2YobixlLHQpe2xldCBzPUkoInBhZCIsbixlLHQpO2lmKHM9PT0iZXhwbGljaXQiKXtzPUkoImV4cGxpY2l0UGFkZGluZ3MiLG4sZSx0KTtjb25zdCByPVtbMCwwXSxbMCwwXSxbMCwwXSxbMCwwXV07Zm9yKGxldCBvPTA7bzw0O28rKylyW29dWzBdPXNbbyoyXSxyW29dWzFdPXNbbyoyKzFdO3JldHVybiByfXJldHVybiBzfWZ1bmN0aW9uIGhvKG4pe3JldHVybiBuLmtlcHQ/bjpWcihuKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBrRz1be3RmT3BOYW1lOiJBZGQiLGNhdGVnb3J5OiJhcml0aG1ldGljIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImEiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImIiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJBZGRWMiIsY2F0ZWdvcnk6ImFyaXRobWV0aWMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkFkZE4iLGNhdGVnb3J5OiJhcml0aG1ldGljIixpbnB1dHM6W3tzdGFydDowLGVuZDowLG5hbWU6InRlbnNvcnMiLHR5cGU6InRlbnNvcnMifV19LHt0Zk9wTmFtZToiQmlhc0FkZCIsY2F0ZWdvcnk6ImFyaXRobWV0aWMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiZGF0YV9mb3JtYXQiLG5hbWU6ImRhdGFGb3JtYXQiLHR5cGU6InN0cmluZyIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiU3ViIixjYXRlZ29yeToiYXJpdGhtZXRpYyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiUmVhbERpdiIsY2F0ZWdvcnk6ImFyaXRobWV0aWMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkRpdiIsY2F0ZWdvcnk6ImFyaXRobWV0aWMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkRpdk5vTmFuIixjYXRlZ29yeToiYXJpdGhtZXRpYyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiRmxvb3JEaXYiLGNhdGVnb3J5OiJhcml0aG1ldGljIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImEiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImIiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJNdWwiLGNhdGVnb3J5OiJhcml0aG1ldGljIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImEiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImIiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJNYXhpbXVtIixjYXRlZ29yeToiYXJpdGhtZXRpYyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiTWluaW11bSIsY2F0ZWdvcnk6ImFyaXRobWV0aWMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlBvdyIsY2F0ZWdvcnk6ImFyaXRobWV0aWMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlNxdWFyZWREaWZmZXJlbmNlIixjYXRlZ29yeToiYXJpdGhtZXRpYyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiTW9kIixjYXRlZ29yeToiYXJpdGhtZXRpYyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiRmxvb3JNb2QiLGNhdGVnb3J5OiJhcml0aG1ldGljIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImEiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImIiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX1dLENHPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxqc29uOmtHfSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0ICRHPVt7dGZPcE5hbWU6IkFicyIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkFjb3MiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJBc2luIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiQXRhbiIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkF0YW4yIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJ5Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiQ2VpbCIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkNsaXBCeVZhbHVlIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJjbGlwVmFsdWVNaW4iLHR5cGU6Im51bWJlciJ9LHtzdGFydDoyLG5hbWU6ImNsaXBWYWx1ZU1heCIsdHlwZToibnVtYmVyIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkNvbXBsZXgiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InJlYWwiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImltYWciLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJDb21wbGV4QWJzIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiQ29zIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiQ29zaCIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkVsdSIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkV4cCIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkZsb29yIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiTG9nIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiSW1hZyIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiVG91dCIsbmFtZToib3V0cHV0VHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6Ik5lZyIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlJlYWwiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9LHt0Zk5hbWU6IlRvdXQiLG5hbWU6Im91dHB1dFR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJQcmVsdSIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYWxwaGEiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJSZWx1IixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiUmVsdTYiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJTZWx1IixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiU2lnbW9pZCIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlNpbiIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlNpbmgiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJTcXJ0IixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiUnNxcnQiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJTcXVhcmUiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJUYW4iLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJUYW5oIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiU2lnbiIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlJvdW5kIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiRXhwbTEiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJMb2cxcCIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlJlY2lwcm9jYWwiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJTb2Z0cGx1cyIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkFzaW5oIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiQWNvc2giLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJBdGFuaCIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkVyZiIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkxlYWt5UmVsdSIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJhbHBoYSIsbmFtZToiYWxwaGEiLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOi4yfSx7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IklzTmFuIixjYXRlZ29yeToiYmFzaWNfbWF0aCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiSXNGaW5pdGUiLGNhdGVnb3J5OiJiYXNpY19tYXRoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJJc0luZiIsY2F0ZWdvcnk6ImJhc2ljX21hdGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfV0sSUc9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGpzb246JEd9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgVEc9W3t0Zk9wTmFtZToiRW1wdHlUZW5zb3JMaXN0IixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJlbGVtZW50U2hhcGUiLHR5cGU6InNoYXBlIn0se3N0YXJ0OjEsbmFtZToibWF4TnVtRWxlbWVudHMiLHR5cGU6Im51bWJlciJ9XSxhdHRyczpbe3RmTmFtZToiZWxlbWVudF9kdHlwZSIsbmFtZToiZWxlbWVudERUeXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJMb29wQ29uZCIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToicHJlZCIsdHlwZToidGVuc29yIn1dfSx7dGZPcE5hbWU6IlN3aXRjaCIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiZGF0YSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToicHJlZCIsdHlwZToidGVuc29yIn1dfSx7dGZPcE5hbWU6Ik1lcmdlIixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxlbmQ6MCxuYW1lOiJ0ZW5zb3JzIix0eXBlOiJ0ZW5zb3JzIn1dfSx7dGZPcE5hbWU6IkVudGVyIixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3IiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9LHt0Zk5hbWU6ImZyYW1lX25hbWUiLG5hbWU6ImZyYW1lTmFtZSIsdHlwZToic3RyaW5nIn0se3RmTmFtZToiaXNfY29uc3RhbnQiLG5hbWU6ImlzQ29uc3RhbnQiLHR5cGU6ImJvb2wifV19LHt0Zk9wTmFtZToiRXhpdCIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiTmV4dEl0ZXJhdGlvbiIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiVGVuc29yQXJyYXlWMyIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToic2l6ZSIsdHlwZToibnVtYmVyIn1dLGF0dHJzOlt7dGZOYW1lOiJkdHlwZSIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIn0se3RmTmFtZToiZWxlbWVudF9zaGFwZSIsbmFtZToiZWxlbWVudFNoYXBlIix0eXBlOiJzaGFwZSJ9LHt0Zk5hbWU6ImR5bmFtaWNfc2l6ZSIsbmFtZToiZHluYW1pY1NpemUiLHR5cGU6ImJvb2wifSx7dGZOYW1lOiJjbGVhcl9hZnRlcl9yZWFkIixuYW1lOiJjbGVhckFmdGVyUmVhZCIsdHlwZToiYm9vbCJ9LHt0Zk5hbWU6ImlkZW50aWNhbF9lbGVtZW50X3NoYXBlcyIsbmFtZToiaWRlbnRpY2FsRWxlbWVudFNoYXBlcyIsdHlwZToiYm9vbCJ9LHt0Zk5hbWU6InRlbnNvcl9hcnJheV9uYW1lIixuYW1lOiJuYW1lIix0eXBlOiJzdHJpbmcifV19LHt0Zk9wTmFtZToiVGVuc29yQXJyYXlXcml0ZVYzIixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3JBcnJheUlkIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJpbmRleCIsdHlwZToibnVtYmVyIn0se3N0YXJ0OjIsbmFtZToidGVuc29yIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MyxuYW1lOiJmbG93SW4iLHR5cGU6Im51bWJlciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJUZW5zb3JBcnJheVJlYWRWMyIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yQXJyYXlJZCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiaW5kZXgiLHR5cGU6Im51bWJlciJ9LHtzdGFydDoyLG5hbWU6ImZsb3dJbiIsdHlwZToibnVtYmVyIn1dLGF0dHJzOlt7dGZOYW1lOiJkdHlwZSIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJUZW5zb3JBcnJheUdhdGhlclYzIixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3JBcnJheUlkIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJpbmRpY2VzIix0eXBlOiJudW1iZXJbXSJ9LHtzdGFydDoyLG5hbWU6ImZsb3dJbiIsdHlwZToibnVtYmVyIn1dLGF0dHJzOlt7dGZOYW1lOiJkdHlwZSIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIn0se3RmTmFtZToiZWxlbWVudF9zaGFwZSIsbmFtZToiZWxlbWVudFNoYXBlIix0eXBlOiJzaGFwZSJ9XX0se3RmT3BOYW1lOiJUZW5zb3JBcnJheVNjYXR0ZXJWMyIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yQXJyYXlJZCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiaW5kaWNlcyIsdHlwZToibnVtYmVyW10ifSx7c3RhcnQ6MixuYW1lOiJ0ZW5zb3IiLHR5cGU6InRlbnNvciJ9LHtzdGFydDozLG5hbWU6ImZsb3dJbiIsdHlwZToibnVtYmVyIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiVGVuc29yQXJyYXlDb25jYXRWMyIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yQXJyYXlJZCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiZmxvd0luIix0eXBlOiJudW1iZXIifV0sYXR0cnM6W3t0Zk5hbWU6ImR0eXBlIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUifSx7dGZOYW1lOiJlbGVtZW50X3NoYXBlX2V4Y2VwdDAiLG5hbWU6ImVsZW1lbnRTaGFwZUV4Y2VwdDAiLHR5cGU6InNoYXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJUZW5zb3JBcnJheVNwbGl0VjMiLGNhdGVnb3J5OiJjb250cm9sIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRlbnNvckFycmF5SWQiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InRlbnNvciIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsbmFtZToibGVuZ3RocyIsdHlwZToibnVtYmVyW10ifSx7c3RhcnQ6MyxuYW1lOiJmbG93SW4iLHR5cGU6Im51bWJlciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIn1dfSx7dGZPcE5hbWU6IlRlbnNvckFycmF5U2l6ZVYzIixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3JBcnJheUlkIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJmbG93SW4iLHR5cGU6Im51bWJlciJ9XX0se3RmT3BOYW1lOiJUZW5zb3JBcnJheUNsb3NlVjMiLGNhdGVnb3J5OiJjb250cm9sIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRlbnNvckFycmF5SWQiLHR5cGU6InRlbnNvciJ9XX0se3RmT3BOYW1lOiJTdGF0ZWxlc3NJZiIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiY29uZCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsZW5kOjAsbmFtZToiYXJncyIsdHlwZToidGVuc29ycyJ9XSxhdHRyczpbe3RmTmFtZToidGhlbl9icmFuY2giLG5hbWU6InRoZW5CcmFuY2giLHR5cGU6ImZ1bmMifSx7dGZOYW1lOiJlbHNlX2JyYW5jaCIsbmFtZToiZWxzZUJyYW5jaCIsdHlwZToiZnVuYyJ9XX0se3RmT3BOYW1lOiJJZiIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiY29uZCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsZW5kOjAsbmFtZToiYXJncyIsdHlwZToidGVuc29ycyJ9XSxhdHRyczpbe3RmTmFtZToidGhlbl9icmFuY2giLG5hbWU6InRoZW5CcmFuY2giLHR5cGU6ImZ1bmMifSx7dGZOYW1lOiJlbHNlX2JyYW5jaCIsbmFtZToiZWxzZUJyYW5jaCIsdHlwZToiZnVuYyJ9XX0se3RmT3BOYW1lOiJTdGF0ZWxlc3NXaGlsZSIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsZW5kOjAsbmFtZToiYXJncyIsdHlwZToidGVuc29ycyJ9XSxhdHRyczpbe3RmTmFtZToiY29uZCIsbmFtZToiY29uZCIsdHlwZToiZnVuYyJ9LHt0Zk5hbWU6ImJvZHkiLG5hbWU6ImJvZHkiLHR5cGU6ImZ1bmMifV19LHt0Zk9wTmFtZToiV2hpbGUiLGNhdGVnb3J5OiJjb250cm9sIixpbnB1dHM6W3tzdGFydDowLGVuZDowLG5hbWU6ImFyZ3MiLHR5cGU6InRlbnNvcnMifV0sYXR0cnM6W3t0Zk5hbWU6ImNvbmQiLG5hbWU6ImNvbmQiLHR5cGU6ImZ1bmMifSx7dGZOYW1lOiJib2R5IixuYW1lOiJib2R5Iix0eXBlOiJmdW5jIn1dfSx7dGZPcE5hbWU6IlRlbnNvckxpc3RTY2F0dGVyIixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3IiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImluZGljZXMiLHR5cGU6Im51bWJlcltdIn0se3N0YXJ0OjIsbmFtZToiZWxlbWVudFNoYXBlIix0eXBlOiJzaGFwZSJ9XSxhdHRyczpbe3RmTmFtZToiZWxlbWVudF9kdHlwZSIsbmFtZToiZWxlbWVudERUeXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJUZW5zb3JMaXN0U2NhdHRlclYyIixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3IiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImluZGljZXMiLHR5cGU6Im51bWJlcltdIn0se3N0YXJ0OjIsbmFtZToiZWxlbWVudFNoYXBlIix0eXBlOiJzaGFwZSJ9LHtzdGFydDozLG5hbWU6Im51bUVsZW1lbnRzIix0eXBlOiJudW1iZXIifV0sYXR0cnM6W3t0Zk5hbWU6ImVsZW1lbnRfZHR5cGUiLG5hbWU6ImVsZW1lbnREVHlwZSIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiVGVuc29yTGlzdEdhdGhlciIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yTGlzdElkIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJpbmRpY2VzIix0eXBlOiJudW1iZXJbXSJ9LHtzdGFydDoyLG5hbWU6ImVsZW1lbnRTaGFwZSIsdHlwZToic2hhcGUifV0sYXR0cnM6W3t0Zk5hbWU6ImVsZW1lbnRfZHR5cGUiLG5hbWU6ImVsZW1lbnREVHlwZSIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiVGVuc29yTGlzdEdldEl0ZW0iLGNhdGVnb3J5OiJjb250cm9sIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRlbnNvckxpc3RJZCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiaW5kZXgiLHR5cGU6Im51bWJlciJ9LHtzdGFydDoyLG5hbWU6ImVsZW1lbnRTaGFwZSIsdHlwZToic2hhcGUifV0sYXR0cnM6W3t0Zk5hbWU6ImVsZW1lbnRfZHR5cGUiLG5hbWU6ImVsZW1lbnREVHlwZSIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiVGVuc29yTGlzdFNldEl0ZW0iLGNhdGVnb3J5OiJjb250cm9sIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRlbnNvckxpc3RJZCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiaW5kZXgiLHR5cGU6Im51bWJlciJ9LHtzdGFydDoyLG5hbWU6InRlbnNvciIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJlbGVtZW50X2R0eXBlIixuYW1lOiJlbGVtZW50RFR5cGUiLHR5cGU6ImR0eXBlIn1dfSx7dGZPcE5hbWU6IlRlbnNvckxpc3RSZXNlcnZlIixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJlbGVtZW50U2hhcGUiLHR5cGU6InNoYXBlIn0se3N0YXJ0OjEsbmFtZToibnVtRWxlbWVudHMiLHR5cGU6Im51bWJlciJ9XSxhdHRyczpbe3RmTmFtZToiZWxlbWVudF9kdHlwZSIsbmFtZToiZWxlbWVudERUeXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJUZW5zb3JMaXN0RnJvbVRlbnNvciIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJlbGVtZW50U2hhcGUiLHR5cGU6InNoYXBlIn1dLGF0dHJzOlt7dGZOYW1lOiJlbGVtZW50X2R0eXBlIixuYW1lOiJlbGVtZW50RFR5cGUiLHR5cGU6ImR0eXBlIn1dfSx7dGZPcE5hbWU6IlRlbnNvckxpc3RTdGFjayIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yTGlzdElkIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJlbGVtZW50U2hhcGUiLHR5cGU6InNoYXBlIn1dLGF0dHJzOlt7dGZOYW1lOiJlbGVtZW50X2R0eXBlIixuYW1lOiJlbGVtZW50RFR5cGUiLHR5cGU6ImR0eXBlIn0se3RmTmFtZToibnVtX2VsZW1lbnRzIixuYW1lOiJudW1FbGVtZW50cyIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiVGVuc29yTGlzdFNwbGl0IixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3IiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImVsZW1lbnRTaGFwZSIsdHlwZToic2hhcGUifSx7c3RhcnQ6MixuYW1lOiJsZW5ndGhzIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbe3RmTmFtZToiZWxlbWVudF9kdHlwZSIsbmFtZToiZWxlbWVudERUeXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJUZW5zb3JMaXN0Q29uY2F0IixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3JMaXN0SWQiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiZWxlbWVudF9zaGFwZSIsbmFtZToiZWxlbWVudFNoYXBlIix0eXBlOiJzaGFwZSJ9LHt0Zk5hbWU6ImVsZW1lbnRfZHR5cGUiLG5hbWU6ImVsZW1lbnREVHlwZSIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiVGVuc29yTGlzdENvbmNhdFYyIixjYXRlZ29yeToiY29udHJvbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3JMaXN0SWQiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiZWxlbWVudF9zaGFwZSIsbmFtZToiZWxlbWVudFNoYXBlIix0eXBlOiJzaGFwZSJ9LHt0Zk5hbWU6ImVsZW1lbnRfZHR5cGUiLG5hbWU6ImVsZW1lbnREVHlwZSIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiVGVuc29yTGlzdFBvcEJhY2siLGNhdGVnb3J5OiJjb250cm9sIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRlbnNvckxpc3RJZCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiZWxlbWVudFNoYXBlIix0eXBlOiJzaGFwZSJ9XSxhdHRyczpbe3RmTmFtZToiZWxlbWVudF9kdHlwZSIsbmFtZToiZWxlbWVudERUeXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJUZW5zb3JMaXN0UHVzaEJhY2siLGNhdGVnb3J5OiJjb250cm9sIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRlbnNvckxpc3RJZCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToidGVuc29yIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6ImVsZW1lbnRfZHR5cGUiLG5hbWU6ImVsZW1lbnREVHlwZSIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiVGVuc29yTGlzdExlbmd0aCIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yTGlzdElkIix0eXBlOiJ0ZW5zb3IifV19LHt0Zk9wTmFtZToiVGVuc29yTGlzdFJlc2l6ZSIsY2F0ZWdvcnk6ImNvbnRyb2wiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGVuc29yTGlzdElkIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJzaXplIix0eXBlOiJudW1iZXIifV19XSxFRz1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsanNvbjpUR30sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBSRz1be3RmT3BOYW1lOiJBdmdQb29sIixjYXRlZ29yeToiY29udm9sdXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJzdHJpZGVzIixuYW1lOiJzdHJpZGVzIix0eXBlOiJudW1iZXJbXSJ9LHt0Zk5hbWU6InBhZGRpbmciLG5hbWU6InBhZCIsdHlwZToic3RyaW5nIn0se3RmTmFtZToiZGF0YV9mb3JtYXQiLG5hbWU6ImRhdGFGb3JtYXQiLHR5cGU6InN0cmluZyIsbm90U3VwcG9ydGVkOiEwfSx7dGZOYW1lOiJrc2l6ZSIsbmFtZToia2VybmVsU2l6ZSIsdHlwZToibnVtYmVyW10ifSx7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6Ik1heFBvb2wiLGNhdGVnb3J5OiJjb252b2x1dGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6InN0cmlkZXMiLG5hbWU6InN0cmlkZXMiLHR5cGU6Im51bWJlcltdIn0se3RmTmFtZToicGFkZGluZyIsbmFtZToicGFkIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJkYXRhX2Zvcm1hdCIsbmFtZToiZGF0YUZvcm1hdCIsdHlwZToic3RyaW5nIixub3RTdXBwb3J0ZWQ6ITB9LHt0Zk5hbWU6ImtzaXplIixuYW1lOiJrZXJuZWxTaXplIix0eXBlOiJudW1iZXJbXSJ9LHt0Zk5hbWU6ImV4cGxpY2l0X3BhZGRpbmdzIixuYW1lOiJleHBsaWNpdFBhZGRpbmdzIix0eXBlOiJudW1iZXJbXSIsZGVmYXVsdFZhbHVlOltdLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJNYXhQb29sV2l0aEFyZ21heCIsY2F0ZWdvcnk6ImNvbnZvbHV0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToic3RyaWRlcyIsbmFtZToic3RyaWRlcyIsdHlwZToibnVtYmVyW10ifSx7dGZOYW1lOiJwYWRkaW5nIixuYW1lOiJwYWQiLHR5cGU6InN0cmluZyJ9LHt0Zk5hbWU6ImtzaXplIixuYW1lOiJrZXJuZWxTaXplIix0eXBlOiJudW1iZXJbXSJ9LHt0Zk5hbWU6ImluY2x1ZGVfYmF0Y2hfaW5faW5kZXgiLG5hbWU6ImluY2x1ZGVCYXRjaEluSW5kZXgiLHR5cGU6ImJvb2wifSx7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkF2Z1Bvb2wzRCIsY2F0ZWdvcnk6ImNvbnZvbHV0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToic3RyaWRlcyIsbmFtZToic3RyaWRlcyIsdHlwZToibnVtYmVyW10ifSx7dGZOYW1lOiJwYWRkaW5nIixuYW1lOiJwYWQiLHR5cGU6InN0cmluZyJ9LHt0Zk5hbWU6ImRhdGFfZm9ybWF0IixuYW1lOiJkYXRhRm9ybWF0Iix0eXBlOiJzdHJpbmciLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToia3NpemUiLG5hbWU6Imtlcm5lbFNpemUiLHR5cGU6Im51bWJlcltdIn0se3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJNYXhQb29sM0QiLGNhdGVnb3J5OiJjb252b2x1dGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6InN0cmlkZXMiLG5hbWU6InN0cmlkZXMiLHR5cGU6Im51bWJlcltdIn0se3RmTmFtZToicGFkZGluZyIsbmFtZToicGFkIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJkYXRhX2Zvcm1hdCIsbmFtZToiZGF0YUZvcm1hdCIsdHlwZToic3RyaW5nIixub3RTdXBwb3J0ZWQ6ITB9LHt0Zk5hbWU6ImtzaXplIixuYW1lOiJrZXJuZWxTaXplIix0eXBlOiJudW1iZXJbXSJ9LHt0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiQ29udjFEIixjYXRlZ29yeToiY29udm9sdXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiZmlsdGVyIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6InN0cmlkZSIsbmFtZToic3RyaWRlIix0eXBlOiJudW1iZXIifSx7dGZOYW1lOiJwYWRkaW5nIixuYW1lOiJwYWQiLHR5cGU6InN0cmluZyJ9LHt0Zk5hbWU6ImRhdGFfZm9ybWF0IixuYW1lOiJkYXRhRm9ybWF0Iix0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiTldDIn0se3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9LHt0Zk5hbWU6ImRpbGF0aW9uIixuYW1lOiJkaWxhdGlvbiIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MX1dfSx7dGZPcE5hbWU6IkNvbnYyRCIsY2F0ZWdvcnk6ImNvbnZvbHV0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImZpbHRlciIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToic3RyaWRlcyIsbmFtZToic3RyaWRlcyIsdHlwZToibnVtYmVyW10ifSx7dGZOYW1lOiJwYWRkaW5nIixuYW1lOiJwYWQiLHR5cGU6InN0cmluZyJ9LHt0Zk5hbWU6InVzZUN1ZG5uT25HcHUiLG5hbWU6InVzZUN1ZG5uT25HcHUiLHR5cGU6ImJvb2wifSx7dGZOYW1lOiJkYXRhX2Zvcm1hdCIsbmFtZToiZGF0YUZvcm1hdCIsdHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6Ik5IV0MifSx7dGZOYW1lOiJleHBsaWNpdF9wYWRkaW5ncyIsbmFtZToiZXhwbGljaXRQYWRkaW5ncyIsdHlwZToibnVtYmVyW10iLGRlZmF1bHRWYWx1ZTpbXX0se3RmTmFtZToiZGlsYXRpb25zIixuYW1lOiJkaWxhdGlvbnMiLHR5cGU6Im51bWJlcltdIn1dfSx7dGZPcE5hbWU6Il9GdXNlZENvbnYyRCIsY2F0ZWdvcnk6ImNvbnZvbHV0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImZpbHRlciIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsZW5kOjAsbmFtZToiYXJncyIsdHlwZToidGVuc29ycyJ9XSxhdHRyczpbe3RmTmFtZToibnVtX2FyZ3MiLG5hbWU6Im51bUFyZ3MiLHR5cGU6Im51bWJlciJ9LHt0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfSx7dGZOYW1lOiJzdHJpZGVzIixuYW1lOiJzdHJpZGVzIix0eXBlOiJudW1iZXJbXSJ9LHt0Zk5hbWU6InBhZGRpbmciLG5hbWU6InBhZCIsdHlwZToic3RyaW5nIn0se3RmTmFtZToiZXhwbGljaXRfcGFkZGluZ3MiLG5hbWU6ImV4cGxpY2l0UGFkZGluZ3MiLHR5cGU6Im51bWJlcltdIixkZWZhdWx0VmFsdWU6W119LHt0Zk5hbWU6InVzZV9jdWRubl9vbl9ncHUiLG5hbWU6InVzZUN1ZG5uT25HcHUiLHR5cGU6ImJvb2wiLGRlZmF1bHRWYWx1ZTohMH0se3RmTmFtZToiZGF0YV9mb3JtYXQiLG5hbWU6ImRhdGFGb3JtYXQiLHR5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiJOSFdDIn0se3RmTmFtZToiZGlsYXRpb25zIixuYW1lOiJkaWxhdGlvbnMiLHR5cGU6Im51bWJlcltdIixkZWZhdWx0VmFsdWU6WzEsMSwxLDFdfSx7dGZOYW1lOiJmdXNlZF9vcHMiLG5hbWU6ImZ1c2VkT3BzIix0eXBlOiJzdHJpbmdbXSIsZGVmYXVsdFZhbHVlOltdfSx7dGZOYW1lOiJlcHNpbG9uIixuYW1lOiJlcHNpbG9uIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZToxZS00fSx7dGZOYW1lOiJsZWFreXJlbHVfYWxwaGEiLG5hbWU6ImxlYWt5cmVsdUFscGhhIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTouMn1dfSx7dGZPcE5hbWU6IkNvbnYyREJhY2twcm9wSW5wdXQiLGNhdGVnb3J5OiJjb252b2x1dGlvbiIsaW5wdXRzOlt7c3RhcnQ6MixuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJmaWx0ZXIiLHR5cGU6InRlbnNvciJ9LHtzdGFydDowLG5hbWU6Im91dHB1dFNoYXBlIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbe3RmTmFtZToic3RyaWRlcyIsbmFtZToic3RyaWRlcyIsdHlwZToibnVtYmVyW10ifSx7dGZOYW1lOiJwYWRkaW5nIixuYW1lOiJwYWQiLHR5cGU6InN0cmluZyJ9LHt0Zk5hbWU6ImRhdGFfZm9ybWF0IixuYW1lOiJkYXRhRm9ybWF0Iix0eXBlOiJzdHJpbmciLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiZXhwbGljaXRfcGFkZGluZ3MiLG5hbWU6ImV4cGxpY2l0UGFkZGluZ3MiLHR5cGU6Im51bWJlcltdIixkZWZhdWx0VmFsdWU6W119LHt0Zk5hbWU6ImRpbGF0aW9ucyIsbmFtZToiZGlsYXRpb25zIix0eXBlOiJudW1iZXJbXSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiRGVwdGh3aXNlQ29udjJkIixjYXRlZ29yeToiY29udm9sdXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiaW5wdXQiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImZpbHRlciIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJzdHJpZGVzIixuYW1lOiJzdHJpZGVzIix0eXBlOiJudW1iZXJbXSJ9LHt0Zk5hbWU6InBhZGRpbmciLG5hbWU6InBhZCIsdHlwZToic3RyaW5nIn0se3RmTmFtZToiZGF0YV9mb3JtYXQiLG5hbWU6ImRhdGFGb3JtYXQiLHR5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiJOSFdDIn0se3RmTmFtZToiZXhwbGljaXRfcGFkZGluZ3MiLG5hbWU6ImV4cGxpY2l0UGFkZGluZ3MiLHR5cGU6Im51bWJlcltdIixkZWZhdWx0VmFsdWU6W119LHt0Zk5hbWU6ImRpbGF0aW9ucyIsbmFtZToiZGlsYXRpb25zIix0eXBlOiJudW1iZXJbXSJ9XX0se3RmT3BOYW1lOiJEZXB0aHdpc2VDb252MmROYXRpdmUiLGNhdGVnb3J5OiJjb252b2x1dGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJpbnB1dCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiZmlsdGVyIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6InN0cmlkZXMiLG5hbWU6InN0cmlkZXMiLHR5cGU6Im51bWJlcltdIn0se3RmTmFtZToicGFkZGluZyIsbmFtZToicGFkIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJkYXRhX2Zvcm1hdCIsbmFtZToiZGF0YUZvcm1hdCIsdHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6Ik5IV0MifSx7dGZOYW1lOiJleHBsaWNpdF9wYWRkaW5ncyIsbmFtZToiZXhwbGljaXRQYWRkaW5ncyIsdHlwZToibnVtYmVyW10iLGRlZmF1bHRWYWx1ZTpbXX0se3RmTmFtZToiZGlsYXRpb25zIixuYW1lOiJkaWxhdGlvbnMiLHR5cGU6Im51bWJlcltdIn1dfSx7dGZPcE5hbWU6IkZ1c2VkRGVwdGh3aXNlQ29udjJkTmF0aXZlIixjYXRlZ29yeToiY29udm9sdXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiZmlsdGVyIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixlbmQ6MCxuYW1lOiJhcmdzIix0eXBlOiJ0ZW5zb3JzIn1dLGF0dHJzOlt7dGZOYW1lOiJudW1fYXJncyIsbmFtZToibnVtQXJncyIsdHlwZToibnVtYmVyIn0se3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9LHt0Zk5hbWU6InN0cmlkZXMiLG5hbWU6InN0cmlkZXMiLHR5cGU6Im51bWJlcltdIn0se3RmTmFtZToicGFkZGluZyIsbmFtZToicGFkIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJkYXRhX2Zvcm1hdCIsbmFtZToiZGF0YUZvcm1hdCIsdHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6Ik5IV0MifSx7dGZOYW1lOiJkaWxhdGlvbnMiLG5hbWU6ImRpbGF0aW9ucyIsdHlwZToibnVtYmVyW10iLGRlZmF1bHRWYWx1ZTpbMSwxLDEsMV19LHt0Zk5hbWU6ImZ1c2VkX29wcyIsbmFtZToiZnVzZWRPcHMiLHR5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6W119LHt0Zk5hbWU6ImV4cGxpY2l0X3BhZGRpbmdzIixuYW1lOiJleHBsaWNpdFBhZGRpbmdzIix0eXBlOiJudW1iZXJbXSIsZGVmYXVsdFZhbHVlOltdfV19LHt0Zk9wTmFtZToiQ29udjNEIixjYXRlZ29yeToiY29udm9sdXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiZmlsdGVyIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6InN0cmlkZXMiLG5hbWU6InN0cmlkZXMiLHR5cGU6Im51bWJlcltdIn0se3RmTmFtZToicGFkZGluZyIsbmFtZToicGFkIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJkYXRhX2Zvcm1hdCIsbmFtZToiZGF0YUZvcm1hdCIsdHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6Ik5IV0MifSx7dGZOYW1lOiJkaWxhdGlvbnMiLG5hbWU6ImRpbGF0aW9ucyIsdHlwZToibnVtYmVyW10ifV19LHt0Zk9wTmFtZToiRGlsYXRpb24yRCIsY2F0ZWdvcnk6ImNvbnZvbHV0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImZpbHRlciIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJzdHJpZGVzIixuYW1lOiJzdHJpZGVzIix0eXBlOiJudW1iZXJbXSJ9LHt0Zk5hbWU6InJhdGVzIixuYW1lOiJkaWxhdGlvbnMiLHR5cGU6Im51bWJlcltdIn0se3RmTmFtZToicGFkZGluZyIsbmFtZToicGFkIix0eXBlOiJzdHJpbmcifV19XSxERz1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsanNvbjpSR30sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBBRz1be3RmT3BOYW1lOiJGaWxsIixjYXRlZ29yeToiY3JlYXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToic2hhcGUiLHR5cGU6Im51bWJlcltdIn0se3N0YXJ0OjEsbmFtZToidmFsdWUiLHR5cGU6Im51bWJlciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIn1dfSx7dGZPcE5hbWU6IkxpblNwYWNlIixjYXRlZ29yeToiY3JlYXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToic3RhcnQiLHR5cGU6Im51bWJlciJ9LHtzdGFydDoxLG5hbWU6InN0b3AiLHR5cGU6Im51bWJlciJ9LHtzdGFydDoyLG5hbWU6Im51bSIsdHlwZToibnVtYmVyIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6Ik9uZUhvdCIsY2F0ZWdvcnk6ImNyZWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImluZGljZXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImRlcHRoIix0eXBlOiJudW1iZXIifSx7c3RhcnQ6MixuYW1lOiJvblZhbHVlIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZToxfSx7c3RhcnQ6MyxuYW1lOiJvZmZWYWx1ZSIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MH1dLGF0dHJzOlt7dGZOYW1lOiJheGlzIixuYW1lOiJheGlzIix0eXBlOiJudW1iZXIiLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIn1dfSx7dGZPcE5hbWU6Ik9uZXMiLGNhdGVnb3J5OiJjcmVhdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJzaGFwZSIsdHlwZToibnVtYmVyW10ifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJPbmVzTGlrZSIsY2F0ZWdvcnk6ImNyZWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiZHR5cGUiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJSYW5kb21TdGFuZGFyZE5vcm1hbCIsY2F0ZWdvcnk6ImNyZWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InNoYXBlIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbe3RmTmFtZToic2VlZCIsbmFtZToic2VlZCIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MH0se3RmTmFtZToic2VlZDIiLG5hbWU6InNlZWQyIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiZHR5cGUiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSJ9LHt0Zk5hbWU6IlQiLG5hbWU6IlQiLHR5cGU6Im51bWJlciIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiUmFuZG9tVW5pZm9ybSIsY2F0ZWdvcnk6ImNyZWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InNoYXBlIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbe3RmTmFtZToibWludmFsIixuYW1lOiJtaW52YWwiLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOjB9LHt0Zk5hbWU6Im1heHZhbCIsbmFtZToibWF4dmFsIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZToxfSx7dGZOYW1lOiJkdHlwZSIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIn0se3RmTmFtZToic2VlZCIsbmFtZToic2VlZCIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MH0se3RmTmFtZToic2VlZDIiLG5hbWU6InNlZWQyIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiVCIsbmFtZToiVCIsdHlwZToibnVtYmVyIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJSYW5kb21Vbmlmb3JtSW50IixjYXRlZ29yeToiY3JlYXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToic2hhcGUiLHR5cGU6Im51bWJlcltdIn1dLGF0dHJzOlt7dGZOYW1lOiJtaW52YWwiLG5hbWU6Im1pbnZhbCIsdHlwZToibnVtYmVyIn0se3RmTmFtZToibWF4dmFsIixuYW1lOiJtYXh2YWwiLHR5cGU6Im51bWJlciJ9LHt0Zk5hbWU6InNlZWQiLG5hbWU6InNlZWQiLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOjB9LHt0Zk5hbWU6InNlZWQyIixuYW1lOiJzZWVkMiIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MCxub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJSYW5nZSIsY2F0ZWdvcnk6ImNyZWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InN0YXJ0Iix0eXBlOiJudW1iZXIifSx7c3RhcnQ6MSxuYW1lOiJzdG9wIix0eXBlOiJudW1iZXIifSx7c3RhcnQ6MixuYW1lOiJzdGVwIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowfV0sYXR0cnM6W3t0Zk5hbWU6IlRpZHgiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJUcnVuY2F0ZWROb3JtYWwiLGNhdGVnb3J5OiJjcmVhdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJzaGFwZSIsdHlwZToibnVtYmVyW10ifV0sYXR0cnM6W3t0Zk5hbWU6Im1lYW5zIixuYW1lOiJtZWFuIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowfSx7dGZOYW1lOiJzdGRkZXYiLG5hbWU6InN0ZERldiIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MX0se3RmTmFtZToic2VlZCIsbmFtZToic2VlZCIsdHlwZToibnVtYmVyIn0se3RmTmFtZToic2VlZDIiLG5hbWU6InNlZWQyIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiZHR5cGUiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSJ9LHt0Zk5hbWU6IlQiLG5hbWU6IlQiLHR5cGU6Im51bWJlciIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiWmVyb3MiLGNhdGVnb3J5OiJjcmVhdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJzaGFwZSIsdHlwZToibnVtYmVyW10ifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJaZXJvc0xpa2UiLGNhdGVnb3J5OiJjcmVhdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJNdWx0aW5vbWlhbCIsY2F0ZWdvcnk6ImNyZWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImxvZ2l0cyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToibnVtU2FtcGxlcyIsdHlwZToibnVtYmVyIn1dLGF0dHJzOlt7dGZOYW1lOiJzZWVkIixuYW1lOiJzZWVkIix0eXBlOiJudW1iZXIifSx7dGZOYW1lOiJzZWVkMiIsbmFtZToic2VlZDIiLHR5cGU6Im51bWJlciJ9LHt0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSJ9LHt0Zk5hbWU6Im91dHB1dF9kdHlwZSIsbmFtZToib3V0cHV0X2R0eXBlIix0eXBlOiJkdHlwZSJ9XX1dLF9HPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxqc29uOkFHfSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IE9HPVt7dGZPcE5hbWU6Ik5vbk1heFN1cHByZXNzaW9uVjIiLGNhdGVnb3J5OiJkeW5hbWljIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImJveGVzIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJzY29yZXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoyLG5hbWU6Im1heE91dHB1dFNpemUiLHR5cGU6Im51bWJlciJ9LHtzdGFydDozLG5hbWU6ImlvdVRocmVzaG9sZCIsdHlwZToibnVtYmVyIn1dfSx7dGZPcE5hbWU6Ik5vbk1heFN1cHByZXNzaW9uVjMiLGNhdGVnb3J5OiJkeW5hbWljIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImJveGVzIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJzY29yZXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoyLG5hbWU6Im1heE91dHB1dFNpemUiLHR5cGU6Im51bWJlciJ9LHtzdGFydDozLG5hbWU6ImlvdVRocmVzaG9sZCIsdHlwZToibnVtYmVyIn0se3N0YXJ0OjQsbmFtZToic2NvcmVUaHJlc2hvbGQiLHR5cGU6Im51bWJlciJ9XX0se3RmT3BOYW1lOiJOb25NYXhTdXBwcmVzc2lvblY0IixjYXRlZ29yeToiZHluYW1pYyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJib3hlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToic2NvcmVzIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixuYW1lOiJtYXhPdXRwdXRTaXplIix0eXBlOiJudW1iZXIifSx7c3RhcnQ6MyxuYW1lOiJpb3VUaHJlc2hvbGQiLHR5cGU6Im51bWJlciJ9LHtzdGFydDo0LG5hbWU6InNjb3JlVGhyZXNob2xkIix0eXBlOiJudW1iZXIifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfSx7dGZOYW1lOiJUX3RocmVzaG9sZCIsbmFtZToidGhyZXNob2xkIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfSx7dGZOYW1lOiJwYWRfdG9fbWF4X291dHB1dF9zaXplIixuYW1lOiJwYWRUb01heE91dHB1dFNpemUiLHR5cGU6ImJvb2wifV19LHt0Zk9wTmFtZToiTm9uTWF4U3VwcHJlc3Npb25WNSIsY2F0ZWdvcnk6ImR5bmFtaWMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYm94ZXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InNjb3JlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsbmFtZToibWF4T3V0cHV0U2l6ZSIsdHlwZToibnVtYmVyIn0se3N0YXJ0OjMsbmFtZToiaW91VGhyZXNob2xkIix0eXBlOiJudW1iZXIifSx7c3RhcnQ6NCxuYW1lOiJzY29yZVRocmVzaG9sZCIsdHlwZToibnVtYmVyIn0se3N0YXJ0OjUsbmFtZToic29mdE5tc1NpZ21hIix0eXBlOiJudW1iZXIifV19LHt0Zk9wTmFtZToiV2hlcmUiLGNhdGVnb3J5OiJkeW5hbWljIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImNvbmRpdGlvbiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6Ikxpc3REaWZmIixjYXRlZ29yeToiZHluYW1pYyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJ5Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19XSxGRz1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsanNvbjpPR30sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBMRz1be3RmT3BOYW1lOiJMb3dlckJvdW5kIixjYXRlZ29yeToiZXZhbHVhdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJzb3J0ZWRTZXF1ZW5jZSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToidmFsdWVzIix0eXBlOiJ0ZW5zb3IifV19LHt0Zk9wTmFtZToiVG9wS1YyIixjYXRlZ29yeToiZXZhbHVhdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJrIix0eXBlOiJudW1iZXIifV0sYXR0cnM6W3t0Zk5hbWU6InNvcnRlZCIsbmFtZToic29ydGVkIix0eXBlOiJib29sIn1dfSx7dGZPcE5hbWU6IlVwcGVyQm91bmQiLGNhdGVnb3J5OiJldmFsdWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InNvcnRlZFNlcXVlbmNlIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJ2YWx1ZXMiLHR5cGU6InRlbnNvciJ9XX0se3RmT3BOYW1lOiJVbmlxdWUiLGNhdGVnb3J5OiJldmFsdWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XX0se3RmT3BOYW1lOiJVbmlxdWVWMiIsY2F0ZWdvcnk6ImV2YWx1YXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYXhpcyIsdHlwZToibnVtYmVyIn1dfV0sUEc9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGpzb246TEd9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgekc9W3t0Zk9wTmFtZToiUGxhY2Vob2xkZXJXaXRoRGVmYXVsdCIsY2F0ZWdvcnk6ImdyYXBoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImRlZmF1bHQiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToic2hhcGUiLG5hbWU6InNoYXBlIix0eXBlOiJzaGFwZSJ9LHt0Zk5hbWU6ImR0eXBlIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiUGxhY2Vob2xkZXIiLGNhdGVnb3J5OiJncmFwaCIsYXR0cnM6W3t0Zk5hbWU6InNoYXBlIixuYW1lOiJzaGFwZSIsdHlwZToic2hhcGUifSx7dGZOYW1lOiJkdHlwZSIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIn1dfSx7dGZPcE5hbWU6IkNvbnN0IixjYXRlZ29yeToiZ3JhcGgifSx7dGZPcE5hbWU6IklkZW50aXR5IixjYXRlZ29yeToiZ3JhcGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dfSx7dGZPcE5hbWU6IklkZW50aXR5TiIsY2F0ZWdvcnk6ImdyYXBoIixpbnB1dHM6W3tzdGFydDowLGVuZDowLG5hbWU6IngiLHR5cGU6InRlbnNvcnMifV19LHt0Zk9wTmFtZToiU25hcHNob3QiLGNhdGVnb3J5OiJncmFwaCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV19LHt0Zk9wTmFtZToiUmFuayIsY2F0ZWdvcnk6ImdyYXBoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XX0se3RmT3BOYW1lOiJTaXplIixjYXRlZ29yeToiZ3JhcGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dfSx7dGZPcE5hbWU6IlNoYXBlIixjYXRlZ29yeToiZ3JhcGgiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dfSx7dGZPcE5hbWU6IlNoYXBlTiIsY2F0ZWdvcnk6ImdyYXBoIixpbnB1dHM6W3tzdGFydDowLGVuZDowLG5hbWU6IngiLHR5cGU6InRlbnNvcnMifV19LHt0Zk9wTmFtZToiUHJpbnQiLGNhdGVnb3J5OiJncmFwaCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJkYXRhIix0eXBlOiJ0ZW5zb3JzIn1dLGF0dHJzOlt7dGZOYW1lOiJtZXNzYWdlIixuYW1lOiJtZXNzYWdlIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJmaXJzdF9uIixuYW1lOiJmaXJzdE4iLHR5cGU6Im51bWJlciIsbm90U3VwcG9ydGVkOiEwfSx7dGZOYW1lOiJzdW1tYXJpemUiLG5hbWU6InN1bW1hcml6ZSIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6M31dfSx7dGZPcE5hbWU6Ik5vT3AiLGNhdGVnb3J5OiJncmFwaCIsaW5wdXRzOltdfSx7dGZPcE5hbWU6IlN0b3BHcmFkaWVudCIsY2F0ZWdvcnk6ImdyYXBoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XX0se3RmT3BOYW1lOiJGYWtlUXVhbnRXaXRoTWluTWF4VmFycyIsY2F0ZWdvcnk6ImdyYXBoIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToibWluIixuYW1lOiJtaW4iLHR5cGU6Im51bWJlciJ9LHt0Zk5hbWU6Im1heCIsbmFtZToibWF4Iix0eXBlOiJudW1iZXIifV19XSxNRz1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsanNvbjp6R30sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBCRz1be3RmT3BOYW1lOiJIYXNoVGFibGUiLGNhdGVnb3J5OiJoYXNoX3RhYmxlIixpbnB1dHM6W10sYXR0cnM6W3t0Zk5hbWU6InNoYXJlZF9uYW1lIixuYW1lOiJzaGFyZWROYW1lIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJ1c2Vfbm9kZV9uYW1lX3NoYXJpbmciLG5hbWU6InVzZU5vZGVOYW1lU2hhcmluZyIsdHlwZToiYm9vbCJ9LHt0Zk5hbWU6ImtleV9kdHlwZSIsbmFtZToia2V5RFR5cGUiLHR5cGU6ImR0eXBlIn0se3RmTmFtZToidmFsdWVfZHR5cGUiLG5hbWU6InZhbHVlRFR5cGUiLHR5cGU6ImR0eXBlIn1dfSx7dGZPcE5hbWU6Ikhhc2hUYWJsZVYyIixjYXRlZ29yeToiaGFzaF90YWJsZSIsaW5wdXRzOltdLGF0dHJzOlt7dGZOYW1lOiJzaGFyZWRfbmFtZSIsbmFtZToic2hhcmVkTmFtZSIsdHlwZToic3RyaW5nIn0se3RmTmFtZToidXNlX25vZGVfbmFtZV9zaGFyaW5nIixuYW1lOiJ1c2VOb2RlTmFtZVNoYXJpbmciLHR5cGU6ImJvb2wifSx7dGZOYW1lOiJrZXlfZHR5cGUiLG5hbWU6ImtleURUeXBlIix0eXBlOiJkdHlwZSJ9LHt0Zk5hbWU6InZhbHVlX2R0eXBlIixuYW1lOiJ2YWx1ZURUeXBlIix0eXBlOiJkdHlwZSJ9XX0se3RmT3BOYW1lOiJMb29rdXBUYWJsZUltcG9ydCIsY2F0ZWdvcnk6Imhhc2hfdGFibGUiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGFibGVIYW5kbGUiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImtleXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoyLG5hbWU6InZhbHVlcyIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUaW4iLG5hbWU6InRJbiIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiVG91dCIsbmFtZToidE91dCIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6Ikxvb2t1cFRhYmxlSW1wb3J0VjIiLGNhdGVnb3J5OiJoYXNoX3RhYmxlIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRhYmxlSGFuZGxlIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJrZXlzIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixuYW1lOiJ2YWx1ZXMiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVGluIixuYW1lOiJ0SW4iLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9LHt0Zk5hbWU6IlRvdXQiLG5hbWU6InRPdXQiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJMb29rdXBUYWJsZUZpbmQiLGNhdGVnb3J5OiJoYXNoX3RhYmxlIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRhYmxlSGFuZGxlIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJrZXlzIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixuYW1lOiJkZWZhdWx0VmFsdWUiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVGluIixuYW1lOiJ0SW4iLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9LHt0Zk5hbWU6IlRvdXQiLG5hbWU6InRPdXQiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJMb29rdXBUYWJsZUZpbmRWMiIsY2F0ZWdvcnk6Imhhc2hfdGFibGUiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGFibGVIYW5kbGUiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImtleXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoyLG5hbWU6ImRlZmF1bHRWYWx1ZSIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUaW4iLG5hbWU6InRJbiIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH0se3RmTmFtZToiVG91dCIsbmFtZToidE91dCIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6Ikxvb2t1cFRhYmxlU2l6ZSIsY2F0ZWdvcnk6Imhhc2hfdGFibGUiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGFibGVIYW5kbGUiLHR5cGU6InRlbnNvciJ9XX0se3RmT3BOYW1lOiJMb29rdXBUYWJsZVNpemVWMiIsY2F0ZWdvcnk6Imhhc2hfdGFibGUiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGFibGVIYW5kbGUiLHR5cGU6InRlbnNvciJ9XX0se3RmT3BOYW1lOiJJbml0aWFsaXplVGFibGUiLGNhdGVnb3J5OiJoYXNoX3RhYmxlIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRhYmxlSGFuZGxlIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJrZXlzIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixuYW1lOiJ2YWx1ZXMiLHR5cGU6InRlbnNvciJ9XX0se3RmT3BOYW1lOiJJbml0aWFsaXplVGFibGVWMiIsY2F0ZWdvcnk6Imhhc2hfdGFibGUiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToidGFibGVIYW5kbGUiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImtleXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoyLG5hbWU6InZhbHVlcyIsdHlwZToidGVuc29yIn1dfV0sVkc9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGpzb246Qkd9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgV0c9W3t0Zk9wTmFtZToiUmVzaXplQmlsaW5lYXIiLGNhdGVnb3J5OiJpbWFnZSIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJpbWFnZXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InNpemUiLHR5cGU6Im51bWJlcltdIn1dLGF0dHJzOlt7dGZOYW1lOiJhbGlnbl9jb3JuZXJzIixuYW1lOiJhbGlnbkNvcm5lcnMiLHR5cGU6ImJvb2wifSx7dGZOYW1lOiJoYWxmX3BpeGVsX2NlbnRlcnMiLG5hbWU6ImhhbGZQaXhlbENlbnRlcnMiLHR5cGU6ImJvb2wifSx7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlJlc2l6ZU5lYXJlc3ROZWlnaGJvciIsY2F0ZWdvcnk6ImltYWdlIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImltYWdlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToic2l6ZSIsdHlwZToibnVtYmVyW10ifV0sYXR0cnM6W3t0Zk5hbWU6ImFsaWduX2Nvcm5lcnMiLG5hbWU6ImFsaWduQ29ybmVycyIsdHlwZToiYm9vbCJ9LHt0Zk5hbWU6ImhhbGZfcGl4ZWxfY2VudGVycyIsbmFtZToiaGFsZlBpeGVsQ2VudGVycyIsdHlwZToiYm9vbCJ9LHt0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiQ3JvcEFuZFJlc2l6ZSIsY2F0ZWdvcnk6ImltYWdlIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImltYWdlIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJib3hlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsbmFtZToiYm94SW5kIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MyxuYW1lOiJjcm9wU2l6ZSIsdHlwZToibnVtYmVyW10ifV0sYXR0cnM6W3t0Zk5hbWU6Im1ldGhvZCIsbmFtZToibWV0aG9kIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJleHRyYXBvbGF0aW9uX3ZhbHVlIixuYW1lOiJleHRyYXBvbGF0aW9uVmFsdWUiLHR5cGU6Im51bWJlciJ9XX0se3RmT3BOYW1lOiJJbWFnZVByb2plY3RpdmVUcmFuc2Zvcm1WMyIsY2F0ZWdvcnk6ImltYWdlIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImltYWdlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToidHJhbnNmb3JtcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsbmFtZToib3V0cHV0U2hhcGUiLHR5cGU6Im51bWJlcltdIn0se3N0YXJ0OjMsbmFtZToiZmlsbFZhbHVlIix0eXBlOiJudW1iZXIifV0sYXR0cnM6W3t0Zk5hbWU6ImludGVycG9sYXRpb24iLG5hbWU6ImludGVycG9sYXRpb24iLHR5cGU6InN0cmluZyJ9LHt0Zk5hbWU6ImZpbGxfbW9kZSIsbmFtZToiZmlsbE1vZGUiLHR5cGU6InN0cmluZyJ9XX1dLFVHPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxqc29uOldHfSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGpHPVt7dGZPcE5hbWU6IkVxdWFsIixjYXRlZ29yeToibG9naWNhbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiTm90RXF1YWwiLGNhdGVnb3J5OiJsb2dpY2FsIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImEiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImIiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJHcmVhdGVyIixjYXRlZ29yeToibG9naWNhbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiR3JlYXRlckVxdWFsIixjYXRlZ29yeToibG9naWNhbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiTGVzcyIsY2F0ZWdvcnk6ImxvZ2ljYWwiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6Ikxlc3NFcXVhbCIsY2F0ZWdvcnk6ImxvZ2ljYWwiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkxvZ2ljYWxBbmQiLGNhdGVnb3J5OiJsb2dpY2FsIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImEiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImIiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJMb2dpY2FsTm90IixjYXRlZ29yeToibG9naWNhbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiTG9naWNhbE9yIixjYXRlZ29yeToibG9naWNhbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiU2VsZWN0IixjYXRlZ29yeToibG9naWNhbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJjb25kaXRpb24iLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImEiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoyLG5hbWU6ImIiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJTZWxlY3RWMiIsY2F0ZWdvcnk6ImxvZ2ljYWwiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiY29uZGl0aW9uIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixuYW1lOiJiIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiQml0d2lzZUFuZCIsY2F0ZWdvcnk6ImxvZ2ljYWwiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToieSIsdHlwZToidGVuc29yIn1dfV0sR0c9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGpzb246akd9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgSEc9W3t0Zk9wTmFtZToiX0Z1c2VkTWF0TXVsIixjYXRlZ29yeToibWF0cmljZXMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsZW5kOjAsbmFtZToiYXJncyIsdHlwZToidGVuc29ycyJ9XSxhdHRyczpbe3RmTmFtZToibnVtX2FyZ3MiLG5hbWU6Im51bUFyZ3MiLHR5cGU6Im51bWJlciJ9LHt0Zk5hbWU6ImZ1c2VkX29wcyIsbmFtZToiZnVzZWRPcHMiLHR5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6W119LHt0Zk5hbWU6ImVwc2lsb24iLG5hbWU6ImVwc2lsb24iLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOjFlLTR9LHt0Zk5hbWU6InRyYW5zcG9zZV9hIixuYW1lOiJ0cmFuc3Bvc2VBIix0eXBlOiJib29sIixkZWZhdWx0VmFsdWU6ITF9LHt0Zk5hbWU6InRyYW5zcG9zZV9iIixuYW1lOiJ0cmFuc3Bvc2VCIix0eXBlOiJib29sIixkZWZhdWx0VmFsdWU6ITF9LHt0Zk5hbWU6ImxlYWt5cmVsdV9hbHBoYSIsbmFtZToibGVha3lyZWx1QWxwaGEiLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOi4yfSx7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6Ik1hdE11bCIsY2F0ZWdvcnk6Im1hdHJpY2VzIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImEiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImIiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToidHJhbnNwb3NlX2EiLG5hbWU6InRyYW5zcG9zZUEiLHR5cGU6ImJvb2wiLGRlZmF1bHRWYWx1ZTohMX0se3RmTmFtZToidHJhbnNwb3NlX2IiLG5hbWU6InRyYW5zcG9zZUIiLHR5cGU6ImJvb2wiLGRlZmF1bHRWYWx1ZTohMX0se3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJCYXRjaE1hdE11bCIsY2F0ZWdvcnk6Im1hdHJpY2VzIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImEiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImIiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiYWRqX3giLG5hbWU6InRyYW5zcG9zZUEiLHR5cGU6ImJvb2wiLGRlZmF1bHRWYWx1ZTohMX0se3RmTmFtZToiYWRqX3kiLG5hbWU6InRyYW5zcG9zZUIiLHR5cGU6ImJvb2wiLGRlZmF1bHRWYWx1ZTohMX0se3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIixub3RTdXBwb3J0ZWQ6ITB9XX0se3RmT3BOYW1lOiJCYXRjaE1hdE11bFYyIixjYXRlZ29yeToibWF0cmljZXMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYiIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJhZGpfeCIsbmFtZToidHJhbnNwb3NlQSIsdHlwZToiYm9vbCIsZGVmYXVsdFZhbHVlOiExfSx7dGZOYW1lOiJhZGpfeSIsbmFtZToidHJhbnNwb3NlQiIsdHlwZToiYm9vbCIsZGVmYXVsdFZhbHVlOiExfSx7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlRyYW5zcG9zZSIsY2F0ZWdvcnk6Im1hdHJpY2VzIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InBlcm0iLHR5cGU6Im51bWJlcltdIn1dLGF0dHJzOlt7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkVpbnN1bSIsY2F0ZWdvcnk6Im1hdHJpY2VzIixpbnB1dHM6W3tzdGFydDowLGVuZDowLG5hbWU6InRlbnNvcnMiLHR5cGU6InRlbnNvcnMifV0sYXR0cnM6W3t0Zk5hbWU6ImVxdWF0aW9uIixuYW1lOiJlcXVhdGlvbiIsdHlwZToic3RyaW5nIn0se3RmTmFtZToiTiIsbmFtZToibiIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6Mn0se3RmTmFtZToiVCIsbmFtZToiZHR5cGUiLHR5cGU6ImR0eXBlIn1dfSx7dGZPcE5hbWU6Ik1hdHJpeEJhbmRQYXJ0IixjYXRlZ29yeToibWF0cmljZXMiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiYSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToibnVtTG93ZXIiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6Im51bVVwcGVyIix0eXBlOiJ0ZW5zb3IifV19XSxxRz1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsanNvbjpIR30sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBLRz1be3RmT3BOYW1lOiJFdWNsaWRlYW5Ob3JtIixjYXRlZ29yeToibm9ybWFsaXphdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJheGlzIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbe3RmTmFtZToia2VlcF9kaW1zIixuYW1lOiJrZWVwRGltcyIsdHlwZToiYm9vbCIsZGVmYXVsdFZhbHVlOiExfV19LHt0Zk9wTmFtZToiRnVzZWRCYXRjaE5vcm0iLGNhdGVnb3J5OiJub3JtYWxpemF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InNjYWxlIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixuYW1lOiJvZmZzZXQiLHR5cGU6InRlbnNvciJ9LHtzdGFydDozLG5hbWU6Im1lYW4iLHR5cGU6InRlbnNvciJ9LHtzdGFydDo0LG5hbWU6InZhcmlhbmNlIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6ImVwc2lsb24iLG5hbWU6ImVwc2lsb24iLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOi4wMDF9LHt0Zk5hbWU6ImRhdGFfZm9ybWF0IixuYW1lOiJkYXRhRm9ybWF0Iix0eXBlOiJzdHJpbmciLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkZ1c2VkQmF0Y2hOb3JtVjIiLGNhdGVnb3J5OiJub3JtYWxpemF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InNjYWxlIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixuYW1lOiJvZmZzZXQiLHR5cGU6InRlbnNvciJ9LHtzdGFydDozLG5hbWU6Im1lYW4iLHR5cGU6InRlbnNvciJ9LHtzdGFydDo0LG5hbWU6InZhcmlhbmNlIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6ImVwc2lsb24iLG5hbWU6ImVwc2lsb24iLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOi4wMDF9LHt0Zk5hbWU6ImRhdGFfZm9ybWF0IixuYW1lOiJkYXRhRm9ybWF0Iix0eXBlOiJzdHJpbmciLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkZ1c2VkQmF0Y2hOb3JtVjMiLGNhdGVnb3J5OiJub3JtYWxpemF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InNjYWxlIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixuYW1lOiJvZmZzZXQiLHR5cGU6InRlbnNvciJ9LHtzdGFydDozLG5hbWU6Im1lYW4iLHR5cGU6InRlbnNvciJ9LHtzdGFydDo0LG5hbWU6InZhcmlhbmNlIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6ImVwc2lsb24iLG5hbWU6ImVwc2lsb24iLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOi4wMDF9LHt0Zk5hbWU6ImRhdGFfZm9ybWF0IixuYW1lOiJkYXRhRm9ybWF0Iix0eXBlOiJzdHJpbmciLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkxSTiIsY2F0ZWdvcnk6Im5vcm1hbGl6YXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJkZXB0aF9yYWRpdXMiLG5hbWU6InJhZGl1cyIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6NX0se3RmTmFtZToiYmlhcyIsbmFtZToiYmlhcyIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MX0se3RmTmFtZToiYWxwaGEiLG5hbWU6ImFscGhhIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZToxfSx7dGZOYW1lOiJiZXRhIixuYW1lOiJiZXRhIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTouNX1dfSx7dGZPcE5hbWU6IlNvZnRtYXgiLGNhdGVnb3J5OiJub3JtYWxpemF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XX0se3RmT3BOYW1lOiJMb2dTb2Z0bWF4IixjYXRlZ29yeToibm9ybWFsaXphdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV19XSxYRz1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsanNvbjpLR30sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBZRz1be3RmT3BOYW1lOiJCaW5jb3VudCIsY2F0ZWdvcnk6InJlZHVjdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJzaXplIix0eXBlOiJudW1iZXIifSx7c3RhcnQ6MixuYW1lOiJ3ZWlnaHRzIix0eXBlOiJ0ZW5zb3IifV19LHt0Zk9wTmFtZToiRGVuc2VCaW5jb3VudCIsY2F0ZWdvcnk6InJlZHVjdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJzaXplIix0eXBlOiJudW1iZXIifSx7c3RhcnQ6MixuYW1lOiJ3ZWlnaHRzIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6ImJpbmFyeV9vdXRwdXQiLG5hbWU6ImJpbmFyeU91dHB1dCIsdHlwZToiYm9vbCJ9XX0se3RmT3BOYW1lOiJNYXgiLGNhdGVnb3J5OiJyZWR1Y3Rpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYXhpcyIsdHlwZToibnVtYmVyW10ifV0sYXR0cnM6W3t0Zk5hbWU6ImtlZXBfZGltcyIsbmFtZToia2VlcERpbXMiLHR5cGU6ImJvb2wifV19LHt0Zk9wTmFtZToiTWVhbiIsY2F0ZWdvcnk6InJlZHVjdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJheGlzIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbe3RmTmFtZToia2VlcF9kaW1zIixuYW1lOiJrZWVwRGltcyIsdHlwZToiYm9vbCJ9XX0se3RmT3BOYW1lOiJNaW4iLGNhdGVnb3J5OiJyZWR1Y3Rpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYXhpcyIsdHlwZToibnVtYmVyW10ifV0sYXR0cnM6W3t0Zk5hbWU6ImtlZXBfZGltcyIsbmFtZToia2VlcERpbXMiLHR5cGU6ImJvb2wifV19LHt0Zk9wTmFtZToiU3VtIixjYXRlZ29yeToicmVkdWN0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImF4aXMiLHR5cGU6Im51bWJlcltdIn1dLGF0dHJzOlt7dGZOYW1lOiJrZWVwX2RpbXMiLG5hbWU6ImtlZXBEaW1zIix0eXBlOiJib29sIn1dfSx7dGZPcE5hbWU6IkFsbCIsY2F0ZWdvcnk6InJlZHVjdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJheGlzIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbe3RmTmFtZToia2VlcF9kaW1zIixuYW1lOiJrZWVwRGltcyIsdHlwZToiYm9vbCJ9XX0se3RmT3BOYW1lOiJBbnkiLGNhdGVnb3J5OiJyZWR1Y3Rpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYXhpcyIsdHlwZToibnVtYmVyW10ifV0sYXR0cnM6W3t0Zk5hbWU6ImtlZXBfZGltcyIsbmFtZToia2VlcERpbXMiLHR5cGU6ImJvb2wifV19LHt0Zk9wTmFtZToiQXJnTWF4IixjYXRlZ29yeToicmVkdWN0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImF4aXMiLHR5cGU6Im51bWJlciJ9XX0se3RmT3BOYW1lOiJBcmdNaW4iLGNhdGVnb3J5OiJyZWR1Y3Rpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYXhpcyIsdHlwZToibnVtYmVyIn1dfSx7dGZPcE5hbWU6IlByb2QiLGNhdGVnb3J5OiJyZWR1Y3Rpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYXhpcyIsdHlwZToibnVtYmVyW10ifV0sYXR0cnM6W3t0Zk5hbWU6ImtlZXBfZGltcyIsbmFtZToia2VlcERpbXMiLHR5cGU6ImJvb2wifSx7dGZOYW1lOiJUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IkN1bXByb2QiLGNhdGVnb3J5OiJyZWR1Y3Rpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYXhpcyIsdHlwZToibnVtYmVyIn1dLGF0dHJzOlt7dGZOYW1lOiJleGNsdXNpdmUiLG5hbWU6ImV4Y2x1c2l2ZSIsdHlwZToiYm9vbCJ9LHt0Zk5hbWU6InJldmVyc2UiLG5hbWU6InJldmVyc2UiLHR5cGU6ImJvb2wifV19LHt0Zk9wTmFtZToiQ3Vtc3VtIixjYXRlZ29yeToicmVkdWN0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImF4aXMiLHR5cGU6Im51bWJlciJ9XSxhdHRyczpbe3RmTmFtZToiZXhjbHVzaXZlIixuYW1lOiJleGNsdXNpdmUiLHR5cGU6ImJvb2wifSx7dGZOYW1lOiJyZXZlcnNlIixuYW1lOiJyZXZlcnNlIix0eXBlOiJib29sIn1dfV0sUUc9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGpzb246WUd9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgWkc9W3t0Zk9wTmFtZToiQ29uY2F0VjIiLGNhdGVnb3J5OiJzbGljZV9qb2luIixpbnB1dHM6W3tzdGFydDowLGVuZDotMSxuYW1lOiJ0ZW5zb3JzIix0eXBlOiJ0ZW5zb3JzIn0se3N0YXJ0Oi0xLG5hbWU6ImF4aXMiLHR5cGU6Im51bWJlciJ9XSxhdHRyczpbe3RmTmFtZToiTiIsbmFtZToibiIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6Mn1dfSx7dGZPcE5hbWU6IkNvbmNhdCIsY2F0ZWdvcnk6InNsaWNlX2pvaW4iLGlucHV0czpbe3N0YXJ0OjEsZW5kOjAsbmFtZToidGVuc29ycyIsdHlwZToidGVuc29ycyJ9LHtzdGFydDowLG5hbWU6ImF4aXMiLHR5cGU6Im51bWJlciJ9XSxhdHRyczpbe3RmTmFtZToiTiIsbmFtZToibiIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6Mn1dfSx7dGZPcE5hbWU6IkdhdGhlclYyIixjYXRlZ29yeToic2xpY2Vfam9pbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJpbmRpY2VzIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MixuYW1lOiJheGlzIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowfV0sYXR0cnM6W3t0Zk5hbWU6ImJhdGNoX2RpbXMiLG5hbWU6ImJhdGNoRGltcyIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MH1dfSx7dGZPcE5hbWU6IkdhdGhlciIsY2F0ZWdvcnk6InNsaWNlX2pvaW4iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiaW5kaWNlcyIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJ2YWxpZGF0ZV9pbmRpY2VzIixuYW1lOiJ2YWxpZGF0ZUluZGljZXMiLHR5cGU6ImJvb2wiLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlJldmVyc2UiLGNhdGVnb3J5OiJzbGljZV9qb2luIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImRpbXMiLHR5cGU6ImJvb2xbXSJ9XX0se3RmT3BOYW1lOiJSZXZlcnNlVjIiLGNhdGVnb3J5OiJzbGljZV9qb2luIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImF4aXMiLHR5cGU6Im51bWJlcltdIn1dfSx7dGZPcE5hbWU6IlNsaWNlIixjYXRlZ29yeToic2xpY2Vfam9pbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJiZWdpbiIsdHlwZToibnVtYmVyW10ifSx7c3RhcnQ6MixuYW1lOiJzaXplIix0eXBlOiJudW1iZXJbXSJ9XX0se3RmT3BOYW1lOiJTdHJpZGVkU2xpY2UiLGNhdGVnb3J5OiJzbGljZV9qb2luIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImJlZ2luIix0eXBlOiJudW1iZXJbXSJ9LHtzdGFydDoyLG5hbWU6ImVuZCIsdHlwZToibnVtYmVyW10ifSx7c3RhcnQ6MyxuYW1lOiJzdHJpZGVzIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbe3RmTmFtZToiYmVnaW5fbWFzayIsbmFtZToiYmVnaW5NYXNrIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowfSx7dGZOYW1lOiJlbmRfbWFzayIsbmFtZToiZW5kTWFzayIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MH0se3RmTmFtZToibmV3X2F4aXNfbWFzayIsbmFtZToibmV3QXhpc01hc2siLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOjB9LHt0Zk5hbWU6ImVsbGlwc2lzX21hc2siLG5hbWU6ImVsbGlwc2lzTWFzayIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MH0se3RmTmFtZToic2hyaW5rX2F4aXNfbWFzayIsbmFtZToic2hyaW5rQXhpc01hc2siLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOjB9XX0se3RmT3BOYW1lOiJQYWNrIixjYXRlZ29yeToic2xpY2Vfam9pbiIsaW5wdXRzOlt7c3RhcnQ6MCxlbmQ6MCxuYW1lOiJ0ZW5zb3JzIix0eXBlOiJ0ZW5zb3JzIn1dLGF0dHJzOlt7dGZOYW1lOiJheGlzIixuYW1lOiJheGlzIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowfV19LHt0Zk9wTmFtZToiVW5wYWNrIixjYXRlZ29yeToic2xpY2Vfam9pbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ0ZW5zb3IiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiYXhpcyIsbmFtZToiYXhpcyIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MH0se3RmTmFtZToibnVtIixuYW1lOiJudW0iLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOjAsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiVGlsZSIsY2F0ZWdvcnk6InNsaWNlX2pvaW4iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToicmVwcyIsdHlwZToibnVtYmVyW10ifV19LHt0Zk9wTmFtZToiU3BsaXQiLGNhdGVnb3J5OiJzbGljZV9qb2luIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImF4aXMiLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOjB9LHtzdGFydDoxLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToibnVtX3NwbGl0IixuYW1lOiJudW1PclNpemVTcGxpdHMiLHR5cGU6Im51bWJlciIsZGVmYXVsdFZhbHVlOjF9XX0se3RmT3BOYW1lOiJTcGxpdFYiLGNhdGVnb3J5OiJzbGljZV9qb2luIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6Im51bU9yU2l6ZVNwbGl0cyIsdHlwZToibnVtYmVyW10ifSx7c3RhcnQ6MixuYW1lOiJheGlzIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowfV19LHt0Zk9wTmFtZToiU2NhdHRlck5kIixjYXRlZ29yeToic2xpY2Vfam9pbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJpbmRpY2VzIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJ2YWx1ZXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoyLG5hbWU6InNoYXBlIix0eXBlOiJudW1iZXJbXSJ9XX0se3RmT3BOYW1lOiJHYXRoZXJOZCIsY2F0ZWdvcnk6InNsaWNlX2pvaW4iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiaW5kaWNlcyIsdHlwZToidGVuc29yIn1dfSx7dGZPcE5hbWU6IlNwYXJzZVRvRGVuc2UiLGNhdGVnb3J5OiJzbGljZV9qb2luIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InNwYXJzZUluZGljZXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6Im91dHB1dFNoYXBlIix0eXBlOiJudW1iZXJbXSJ9LHtzdGFydDoyLG5hbWU6InNwYXJzZVZhbHVlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjMsbmFtZToiZGVmYXVsdFZhbHVlIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6InZhbGlkYXRlX2luZGljZXMiLG5hbWU6InZhbGlkYXRlSW5kaWNlcyIsdHlwZToiYm9vbCIsZGVmYXVsdFZhbHVlOiExLG5vdFN1cHBvcnRlZDohMH1dfSx7dGZPcE5hbWU6IlRlbnNvclNjYXR0ZXJVcGRhdGUiLGNhdGVnb3J5OiJzbGljZV9qb2luIixpbnB1dHM6W3tzdGFydDowLG5hbWU6InRlbnNvciIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiaW5kaWNlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsbmFtZToidmFsdWVzIix0eXBlOiJ0ZW5zb3IifV19XSxKRz1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsanNvbjpaR30sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBlNj1be3RmT3BOYW1lOiJTcGFyc2VGaWxsRW1wdHlSb3dzIixjYXRlZ29yeToic3BhcnNlIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImluZGljZXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InZhbHVlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsbmFtZToiZGVuc2VTaGFwZSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjMsbmFtZToiZGVmYXVsdFZhbHVlIix0eXBlOiJ0ZW5zb3IifV19LHt0Zk9wTmFtZToiU3BhcnNlUmVzaGFwZSIsY2F0ZWdvcnk6InNwYXJzZSIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJpbnB1dEluZGljZXMiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImlucHV0U2hhcGUiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoyLG5hbWU6Im5ld1NoYXBlIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6IlQiLG5hbWU6ImR0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiU3BhcnNlU2VnbWVudE1lYW4iLGNhdGVnb3J5OiJzcGFyc2UiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiZGF0YSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiaW5kaWNlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsbmFtZToic2VnbWVudElkcyIsdHlwZToidGVuc29yIn1dfSx7dGZPcE5hbWU6IlNwYXJzZVNlZ21lbnRTdW0iLGNhdGVnb3J5OiJzcGFyc2UiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiZGF0YSIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiaW5kaWNlcyIsdHlwZToidGVuc29yIn0se3N0YXJ0OjIsbmFtZToic2VnbWVudElkcyIsdHlwZToidGVuc29yIn1dfV0sdDY9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGpzb246ZTZ9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgbjY9W3t0Zk9wTmFtZToiRkZUIixjYXRlZ29yeToic3BlY3RyYWwiLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dfSx7dGZPcE5hbWU6IklGRlQiLGNhdGVnb3J5OiJzcGVjdHJhbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV19LHt0Zk9wTmFtZToiUkZGVCIsY2F0ZWdvcnk6InNwZWN0cmFsIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImZmdF9sZW5ndGgiLHR5cGU6Im51bWJlciIsbm90U3VwcG9ydGVkOiEwfV19LHt0Zk9wTmFtZToiSVJGRlQiLGNhdGVnb3J5OiJzcGVjdHJhbCIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJmZnRfbGVuZ3RoIix0eXBlOiJudW1iZXIiLG5vdFN1cHBvcnRlZDohMH1dfV0sczY9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGpzb246bjZ9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgcjY9W3t0Zk9wTmFtZToiU3RhdGljUmVnZXhSZXBsYWNlIixjYXRlZ29yeToic3RyaW5nIixpbnB1dHM6W3tzdGFydDowLG5hbWU6ImlucHV0Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6InBhdHRlcm4iLG5hbWU6InBhdHRlcm4iLHR5cGU6InN0cmluZyJ9LHt0Zk5hbWU6InJld3JpdGUiLG5hbWU6InJld3JpdGUiLHR5cGU6InN0cmluZyJ9LHt0Zk5hbWU6InJlcGxhY2VfZ2xvYmFsIixuYW1lOiJyZXBsYWNlR2xvYmFsIix0eXBlOiJib29sIn1dfSx7dGZPcE5hbWU6IlN0cmluZ05HcmFtcyIsY2F0ZWdvcnk6InN0cmluZyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJkYXRhIix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJkYXRhU3BsaXRzIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6InNlcGFyYXRvciIsbmFtZToic2VwYXJhdG9yIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJuZ3JhbV93aWR0aHMiLG5hbWU6Im5HcmFtV2lkdGhzIix0eXBlOiJudW1iZXJbXSJ9LHt0Zk5hbWU6ImxlZnRfcGFkIixuYW1lOiJsZWZ0UGFkIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJyaWdodF9wYWQiLG5hbWU6InJpZ2h0UGFkIix0eXBlOiJzdHJpbmcifSx7dGZOYW1lOiJwYWRfd2lkdGgiLG5hbWU6InBhZFdpZHRoIix0eXBlOiJudW1iZXIifSx7dGZOYW1lOiJwcmVzZXJ2ZV9zaG9ydF9zZXF1ZW5jZXMiLG5hbWU6InByZXNlcnZlU2hvcnRTZXF1ZW5jZXMiLHR5cGU6ImJvb2wifV0sb3V0cHV0czpbIm5ncmFtcyIsIm5ncmFtc19zcGxpdHMiXX0se3RmT3BOYW1lOiJTdHJpbmdTcGxpdCIsY2F0ZWdvcnk6InN0cmluZyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJpbnB1dCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiZGVsaW1pdGVyIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6InNraXBfZW1wdHkiLG5hbWU6InNraXBFbXB0eSIsdHlwZToiYm9vbCJ9XSxvdXRwdXRzOlsiaW5kaWNlcyIsInZhbHVlcyIsInNoYXBlIl19LHt0Zk9wTmFtZToiU3RyaW5nVG9IYXNoQnVja2V0RmFzdCIsY2F0ZWdvcnk6InN0cmluZyIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJpbnB1dCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJudW1fYnVja2V0cyIsbmFtZToibnVtQnVja2V0cyIsdHlwZToibnVtYmVyIn1dfV0sbzY9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLGpzb246cjZ9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgaTY9W3t0Zk9wTmFtZToiQ2FzdCIsY2F0ZWdvcnk6InRyYW5zZm9ybWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9XSxhdHRyczpbe3RmTmFtZToiU3JjVCIsbmFtZToic2R0eXBlIix0eXBlOiJkdHlwZSIsbm90U3VwcG9ydGVkOiEwfSx7dGZOYW1lOiJEc3RUIixuYW1lOiJkdHlwZSIsdHlwZToiZHR5cGUifV19LHt0Zk9wTmFtZToiRXhwYW5kRGltcyIsY2F0ZWdvcnk6InRyYW5zZm9ybWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6ImF4aXMiLHR5cGU6Im51bWJlciJ9XX0se3RmT3BOYW1lOiJNaXJyb3JQYWQiLGNhdGVnb3J5OiJ0cmFuc2Zvcm1hdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJwYWRkaW5nIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbe3RmTmFtZToibW9kZSIsbmFtZToibW9kZSIsdHlwZToic3RyaW5nIn1dfSx7dGZPcE5hbWU6IlBhZCIsY2F0ZWdvcnk6InRyYW5zZm9ybWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InBhZGRpbmciLHR5cGU6Im51bWJlcltdIn1dLGF0dHJzOlt7dGZOYW1lOiJjb25zdGFudF92YWx1ZSIsbmFtZToiY29uc3RhbnRWYWx1ZSIsdHlwZToibnVtYmVyIixkZWZhdWx0VmFsdWU6MH1dfSx7dGZPcE5hbWU6IlBhZFYyIixjYXRlZ29yeToidHJhbnNmb3JtYXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToicGFkZGluZyIsdHlwZToibnVtYmVyW10ifSx7c3RhcnQ6MixuYW1lOiJjb25zdGFudFZhbHVlIix0eXBlOiJudW1iZXIiLGRlZmF1bHRWYWx1ZTowfV19LHt0Zk9wTmFtZToiUmVzaGFwZSIsY2F0ZWdvcnk6InRyYW5zZm9ybWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InNoYXBlIix0eXBlOiJudW1iZXJbXSJ9XX0se3RmT3BOYW1lOiJFbnN1cmVTaGFwZSIsY2F0ZWdvcnk6InRyYW5zZm9ybWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InNoYXBlIix0eXBlOiJudW1iZXJbXSJ9XX0se3RmT3BOYW1lOiJTcXVlZXplIixjYXRlZ29yeToidHJhbnNmb3JtYXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn1dLGF0dHJzOlt7dGZOYW1lOiJheGlzIix0ZkRlcHJlY2F0ZWROYW1lOiJzcXVlZXplX2RpbXMiLG5hbWU6ImF4aXMiLHR5cGU6Im51bWJlcltdIn1dfSx7dGZPcE5hbWU6IlNwYWNlVG9CYXRjaE5EIixjYXRlZ29yeToidHJhbnNmb3JtYXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToieCIsdHlwZToidGVuc29yIn0se3N0YXJ0OjEsbmFtZToiYmxvY2tTaGFwZSIsdHlwZToibnVtYmVyW10ifSx7c3RhcnQ6MixuYW1lOiJwYWRkaW5ncyIsdHlwZToibnVtYmVyW10ifV19LHt0Zk9wTmFtZToiQmF0Y2hUb1NwYWNlTkQiLGNhdGVnb3J5OiJ0cmFuc2Zvcm1hdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifSx7c3RhcnQ6MSxuYW1lOiJibG9ja1NoYXBlIix0eXBlOiJudW1iZXJbXSJ9LHtzdGFydDoyLG5hbWU6ImNyb3BzIix0eXBlOiJudW1iZXJbXSJ9XX0se3RmT3BOYW1lOiJEZXB0aFRvU3BhY2UiLGNhdGVnb3J5OiJ0cmFuc2Zvcm1hdGlvbiIsaW5wdXRzOlt7c3RhcnQ6MCxuYW1lOiJ4Iix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W3t0Zk5hbWU6ImJsb2NrX3NpemUiLG5hbWU6ImJsb2NrU2l6ZSIsdHlwZToibnVtYmVyIn0se3RmTmFtZToiZGF0YV9mb3JtYXQiLG5hbWU6ImRhdGFGb3JtYXQiLHR5cGU6InN0cmluZyJ9XX0se3RmT3BOYW1lOiJCcm9hZGNhc3RUbyIsY2F0ZWdvcnk6InRyYW5zZm9ybWF0aW9uIixpbnB1dHM6W3tzdGFydDowLG5hbWU6IngiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InNoYXBlIix0eXBlOiJudW1iZXJbXSJ9XSxhdHRyczpbXX0se3RmT3BOYW1lOiJCcm9hZGNhc3RBcmdzIixjYXRlZ29yeToidHJhbnNmb3JtYXRpb24iLGlucHV0czpbe3N0YXJ0OjAsbmFtZToiczAiLHR5cGU6InRlbnNvciJ9LHtzdGFydDoxLG5hbWU6InMxIix0eXBlOiJ0ZW5zb3IifV0sYXR0cnM6W119XSxhNj1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsanNvbjppNn0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBwQ3tzdGF0aWMgZ2V0IEluc3RhbmNlKCl7cmV0dXJuIHRoaXMuX2luc3RhbmNlfHwodGhpcy5faW5zdGFuY2U9bmV3IHRoaXMpfWNvbnN0cnVjdG9yKCl7Y29uc3QgZT1bQ0csSUcsRUcsREcsX0csRkcsUEcsTUcsVkcsVUcsR0cscUcsWEcsUUcsSkcsdDYsczYsbzYsYTZdLHQ9W10uY29uY2F0KC4uLmUubWFwKHM9PnMuanNvbikpO3RoaXMub3BNYXBwZXJzPXQucmVkdWNlKChzLHIpPT4oc1tyLnRmT3BOYW1lXT1yLHMpLHt9KX10cmFuc2Zvcm1HcmFwaChlLHQ9e30pe2NvbnN0IHM9ZS5ub2RlLHI9W10sbz1bXSxpPVtdLGE9cy5yZWR1Y2UoKHcsYik9Pih3W2IubmFtZV09dGhpcy5tYXBOb2RlKGIpLGIub3Auc3RhcnRzV2l0aCgiUGxhY2Vob2xkZXIiKT9yLnB1c2god1tiLm5hbWVdKTpiLm9wPT09IkNvbnN0Ij9vLnB1c2god1tiLm5hbWVdKTooYi5pbnB1dD09bnVsbHx8Yi5pbnB1dC5sZW5ndGg9PT0wKSYmaS5wdXNoKHdbYi5uYW1lXSksdykse30pO2xldCBsPVtdO2NvbnN0IGM9W107bGV0IGg9e30scD17fTt0IT1udWxsJiYoaD10aGlzLm1hcFNpZ25hdHVyZUVudHJpZXModC5pbnB1dHMpLHA9dGhpcy5tYXBTaWduYXR1cmVFbnRyaWVzKHQub3V0cHV0cykpO2NvbnN0IGY9T2JqZWN0LmtleXMoYSk7Zi5mb3JFYWNoKHc9Pntjb25zdCBiPWFbd107Yi5pbnB1dE5hbWVzLmZvckVhY2goKHYsUyk9Pntjb25zdFskLCxrXT1jbyh2KSxUPWFbJF07aWYoVC5vdXRwdXRzIT1udWxsKXtjb25zdCBEPVQub3V0cHV0cy5pbmRleE9mKGspO2lmKEQhPT0tMSl7Y29uc3QgTD1gJHskfToke0R9YDtiLmlucHV0TmFtZXNbU109TH19Yi5pbnB1dHMucHVzaChUKSxULmNoaWxkcmVuLnB1c2goYil9KX0pLE9iamVjdC5rZXlzKHApLmxlbmd0aD09PTA/Zi5mb3JFYWNoKHc9Pntjb25zdCBiPWFbd107Yi5jaGlsZHJlbi5sZW5ndGg9PT0wJiZjLnB1c2goYil9KTpPYmplY3Qua2V5cyhwKS5mb3JFYWNoKHc9Pntjb25zdFtiXT1jbyh3KSx2PWFbYl07diE9bnVsbCYmKHYuc2lnbmF0dXJlS2V5PXBbd10sYy5wdXNoKHYpKX0pLE9iamVjdC5rZXlzKGgpLmxlbmd0aD4wP09iamVjdC5rZXlzKGgpLmZvckVhY2godz0+e2NvbnN0W2JdPWNvKHcpLHY9YVtiXTt2JiYodi5zaWduYXR1cmVLZXk9aFt3XSxsLnB1c2godikpfSk6bD1yO2xldCBnPXt9O2UubGlicmFyeSE9bnVsbCYmZS5saWJyYXJ5LmZ1bmN0aW9uIT1udWxsJiYoZz1lLmxpYnJhcnkuZnVuY3Rpb24ucmVkdWNlKCh3LGIpPT4od1tiLnNpZ25hdHVyZS5uYW1lXT10aGlzLm1hcEZ1bmN0aW9uKGIpLHcpLHt9KSk7Y29uc3QgeT17bm9kZXM6YSxpbnB1dHM6bCxvdXRwdXRzOmMsd2VpZ2h0czpvLHBsYWNlaG9sZGVyczpyLHNpZ25hdHVyZTp0LGZ1bmN0aW9uczpnfTtyZXR1cm4gaS5sZW5ndGg+MCYmKHkuaW5pdE5vZGVzPWkpLHl9bWFwU2lnbmF0dXJlRW50cmllcyhlKXtyZXR1cm4gT2JqZWN0LmtleXMoZXx8e30pLnJlZHVjZSgodCxzKT0+KHRbZVtzXS5uYW1lXT1zLHQpLHt9KX1tYXBOb2RlKGUpe2NvbnN0IHQ9WkUoZS5vcCl8fHRoaXMub3BNYXBwZXJzW2Uub3BdfHx7fTtlLmF0dHI9PW51bGwmJihlLmF0dHI9e30pO2NvbnN0IHM9e25hbWU6ZS5uYW1lLG9wOmUub3AsY2F0ZWdvcnk6dC5jYXRlZ29yeSxpbnB1dE5hbWVzOihlLmlucHV0fHxbXSkubWFwKHI9PnIuc3RhcnRzV2l0aCgiXiIpP3Iuc2xpY2UoMSk6ciksaW5wdXRzOltdLGNoaWxkcmVuOltdLGlucHV0UGFyYW1zOnt9LGF0dHJQYXJhbXM6e30scmF3QXR0cnM6ZS5hdHRyLG91dHB1dHM6dC5vdXRwdXRzfTtyZXR1cm4gdC5pbnB1dHMhPW51bGwmJihzLmlucHV0UGFyYW1zPXQuaW5wdXRzLnJlZHVjZSgocixvKT0+KHJbby5uYW1lXT17dHlwZTpvLnR5cGUsaW5wdXRJbmRleFN0YXJ0Om8uc3RhcnQsaW5wdXRJbmRleEVuZDpvLmVuZH0scikse30pKSx0LmF0dHJzIT1udWxsJiYocy5hdHRyUGFyYW1zPXQuYXR0cnMucmVkdWNlKChyLG8pPT57Y29uc3QgaT1vLnR5cGU7bGV0IGE7c3dpdGNoKG8udHlwZSl7Y2FzZSJzdHJpbmciOmE9aTEoZS5hdHRyLG8udGZOYW1lLG8uZGVmYXVsdFZhbHVlKSxhPT09dm9pZCAwJiZvLnRmRGVwcmVjYXRlZE5hbWUmJihhPWkxKGUuYXR0cixvLnRmRGVwcmVjYXRlZE5hbWUsby5kZWZhdWx0VmFsdWUpKTticmVhaztjYXNlInN0cmluZ1tdIjphPXAxKGUuYXR0cixvLnRmTmFtZSxvLmRlZmF1bHRWYWx1ZSksYT09PXZvaWQgMCYmby50ZkRlcHJlY2F0ZWROYW1lJiYoYT1wMShlLmF0dHIsby50ZkRlcHJlY2F0ZWROYW1lLG8uZGVmYXVsdFZhbHVlKSk7YnJlYWs7Y2FzZSJudW1iZXIiOmE9bDEoZS5hdHRyLG8udGZOYW1lLG8uZGVmYXVsdFZhbHVlfHwwKSxhPT09dm9pZCAwJiZvLnRmRGVwcmVjYXRlZE5hbWUmJihhPWwxKGUuYXR0cixvLnRmRGVwcmVjYXRlZE5hbWUsby5kZWZhdWx0VmFsdWUpKTticmVhaztjYXNlIm51bWJlcltdIjphPWgxKGUuYXR0cixvLnRmTmFtZSxvLmRlZmF1bHRWYWx1ZSksYT09PXZvaWQgMCYmby50ZkRlcHJlY2F0ZWROYW1lJiYoYT1oMShlLmF0dHIsby50ZkRlcHJlY2F0ZWROYW1lLG8uZGVmYXVsdFZhbHVlKSk7YnJlYWs7Y2FzZSJib29sIjphPWExKGUuYXR0cixvLnRmTmFtZSxvLmRlZmF1bHRWYWx1ZSksYT09PXZvaWQgMCYmby50ZkRlcHJlY2F0ZWROYW1lJiYoYT1hMShlLmF0dHIsby50ZkRlcHJlY2F0ZWROYW1lLG8uZGVmYXVsdFZhbHVlKSk7YnJlYWs7Y2FzZSJib29sW10iOmE9bTEoZS5hdHRyLG8udGZOYW1lLG8uZGVmYXVsdFZhbHVlKSxhPT09dm9pZCAwJiZvLnRmRGVwcmVjYXRlZE5hbWUmJihhPW0xKGUuYXR0cixvLnRmRGVwcmVjYXRlZE5hbWUsby5kZWZhdWx0VmFsdWUpKTticmVhaztjYXNlInNoYXBlIjphPWQxKGUuYXR0cixvLnRmTmFtZSxvLmRlZmF1bHRWYWx1ZSksYT09PXZvaWQgMCYmby50ZkRlcHJlY2F0ZWROYW1lJiYoYT1kMShlLmF0dHIsby50ZkRlcHJlY2F0ZWROYW1lLG8uZGVmYXVsdFZhbHVlKSk7YnJlYWs7Y2FzZSJzaGFwZVtdIjphPWYxKGUuYXR0cixvLnRmTmFtZSxvLmRlZmF1bHRWYWx1ZSksYT09PXZvaWQgMCYmby50ZkRlcHJlY2F0ZWROYW1lJiYoYT1mMShlLmF0dHIsby50ZkRlcHJlY2F0ZWROYW1lLG8uZGVmYXVsdFZhbHVlKSk7YnJlYWs7Y2FzZSJkdHlwZSI6YT11MShlLmF0dHIsby50Zk5hbWUsby5kZWZhdWx0VmFsdWUpLGE9PT12b2lkIDAmJm8udGZEZXByZWNhdGVkTmFtZSYmKGE9dTEoZS5hdHRyLG8udGZEZXByZWNhdGVkTmFtZSxvLmRlZmF1bHRWYWx1ZSkpO2JyZWFrO2Nhc2UiZHR5cGVbXSI6YT1jMShlLmF0dHIsby50Zk5hbWUsby5kZWZhdWx0VmFsdWUpLGE9PT12b2lkIDAmJm8udGZEZXByZWNhdGVkTmFtZSYmKGE9YzEoZS5hdHRyLG8udGZEZXByZWNhdGVkTmFtZSxvLmRlZmF1bHRWYWx1ZSkpO2JyZWFrO2Nhc2UiZnVuYyI6YT1mQyhlLmF0dHIsby50Zk5hbWUsby5kZWZhdWx0VmFsdWUpLGE9PT12b2lkIDAmJm8udGZEZXByZWNhdGVkTmFtZSYmKGE9ZkMoZS5hdHRyLG8udGZEZXByZWNhdGVkTmFtZSxvLmRlZmF1bHRWYWx1ZSkpO2JyZWFrO2Nhc2UidGVuc29yIjpjYXNlInRlbnNvcnMiOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBwYXJhbSB0eXBlOiAke28udHlwZX0gZm9yIG9wOiAke2Uub3B9YCl9cmV0dXJuIHJbby5uYW1lXT17dmFsdWU6YSx0eXBlOml9LHJ9LHt9KSksc31tYXBGdW5jdGlvbihlKXtjb25zdCB0PWUubm9kZURlZixzPVtdLHI9W107bGV0IG89e307dCE9bnVsbCYmKG89dC5yZWR1Y2UoKHAsZik9PihwW2YubmFtZV09dGhpcy5tYXBOb2RlKGYpLGYub3A9PT0iQ29uc3QiJiZyLnB1c2gocFtmLm5hbWVdKSxwKSx7fSkpO2NvbnN0IGk9W10sYT1bXTtlLnNpZ25hdHVyZS5pbnB1dEFyZy5mb3JFYWNoKHA9Pntjb25zdFtmXT1jbyhwLm5hbWUpLGc9e25hbWU6ZixvcDoiUGxhY2Vob2xkZXIiLGlucHV0czpbXSxpbnB1dE5hbWVzOltdLGNhdGVnb3J5OiJncmFwaCIsaW5wdXRQYXJhbXM6e30sYXR0clBhcmFtczp7ZHR5cGU6e3ZhbHVlOlp3KHAudHlwZSksdHlwZToiZHR5cGUifX0sY2hpbGRyZW46W119O2cuc2lnbmF0dXJlS2V5PXAubmFtZSxpLnB1c2goZyksb1tmXT1nfSksT2JqZWN0LmtleXMobykuZm9yRWFjaChwPT57Y29uc3QgZj1vW3BdO2YuaW5wdXROYW1lcy5mb3JFYWNoKChnLHkpPT57Y29uc3RbdywsYl09Y28oZyksdj1vW3ddO2lmKHYub3V0cHV0cyE9bnVsbCl7Y29uc3QgUz12Lm91dHB1dHMuaW5kZXhPZihiKTtpZihTIT09LTEpe2NvbnN0ICQ9YCR7d306JHtTfWA7Zi5pbnB1dE5hbWVzW3ldPSR9fWYuaW5wdXRzLnB1c2godiksdi5jaGlsZHJlbi5wdXNoKGYpfSl9KTtjb25zdCBjPWUucmV0O2Uuc2lnbmF0dXJlLm91dHB1dEFyZy5mb3JFYWNoKHA9Pntjb25zdFtmLGddPWNvKGNbcC5uYW1lXSkseT1vW2ZdO3khPW51bGwmJih5LmRlZmF1bHRPdXRwdXQ9ZyxhLnB1c2goeSkpfSk7Y29uc3QgaD10aGlzLm1hcEFyZ3NUb1NpZ25hdHVyZShlKTtyZXR1cm57bm9kZXM6byxpbnB1dHM6aSxvdXRwdXRzOmEsd2VpZ2h0czpyLHBsYWNlaG9sZGVyczpzLHNpZ25hdHVyZTpofX1tYXBBcmdzVG9TaWduYXR1cmUoZSl7cmV0dXJue21ldGhvZE5hbWU6ZS5zaWduYXR1cmUubmFtZSxpbnB1dHM6ZS5zaWduYXR1cmUuaW5wdXRBcmcucmVkdWNlKCh0LHMpPT4odFtzLm5hbWVdPXRoaXMubWFwQXJnVG9UZW5zb3JJbmZvKHMpLHQpLHt9KSxvdXRwdXRzOmUuc2lnbmF0dXJlLm91dHB1dEFyZy5yZWR1Y2UoKHQscyk9Pih0W3MubmFtZV09dGhpcy5tYXBBcmdUb1RlbnNvckluZm8ocyxlLnJldCksdCkse30pfX1tYXBBcmdUb1RlbnNvckluZm8oZSx0KXtsZXQgcz1lLm5hbWU7cmV0dXJuIHQhPW51bGwmJihzPXRbc10pLHtuYW1lOnMsZHR5cGU6ZS50eXBlfX19ZnVuY3Rpb24gbDYobil7Y29uc3QgZT1vZSgpLmdsb2JhbDtpZih0eXBlb2YgZS5hdG9iPCJ1IilyZXR1cm4gZS5hdG9iKG4pO2lmKHR5cGVvZiBCdWZmZXI8InUiKXJldHVybiBuZXcgQnVmZmVyKG4sImJhc2U2NCIpLnRvU3RyaW5nKCk7dGhyb3cgbmV3IEVycm9yKCJVbmFibGUgdG8gZGVjb2RlIGJhc2U2NCBpbiB0aGlzIGVudmlyb25tZW50LiBNaXNzaW5nIGJ1aWx0LWluIGF0b2IoKSBvciBCdWZmZXIoKSIpfWZ1bmN0aW9uIEpFKG4sZSl7Y29uc3QgdD1BcnJheS5pc0FycmF5KG4pP1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuKTpsNihuKTtyZXR1cm4gZT90OnQudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBpMShuLGUsdCxzPSExKXtjb25zdCByPW5bZV07cmV0dXJuIHIhPW51bGw/SkUoci5zLHMpOnR9ZnVuY3Rpb24gYTEobixlLHQpe2NvbnN0IHM9bltlXTtyZXR1cm4gcz9zLmI6dH1mdW5jdGlvbiBsMShuLGUsdCl7Y29uc3Qgcz1uW2VdfHx7fSxyPXMuaSE9bnVsbD9zLmk6cy5mIT1udWxsP3MuZjp0O3JldHVybiB0eXBlb2Ygcj09Im51bWJlciI/cjpwYXJzZUludChyLDEwKX1mdW5jdGlvbiBadyhuKXtzd2l0Y2godHlwZW9mIG49PSJzdHJpbmciJiYobj15c1tuXSksbil7Y2FzZSB5cy5EVF9GTE9BVDpjYXNlIHlzLkRUX0hBTEY6cmV0dXJuImZsb2F0MzIiO2Nhc2UgeXMuRFRfSU5UMzI6Y2FzZSB5cy5EVF9JTlQ2NDpjYXNlIHlzLkRUX0lOVDg6Y2FzZSB5cy5EVF9VSU5UODpyZXR1cm4iaW50MzIiO2Nhc2UgeXMuRFRfQk9PTDpyZXR1cm4iYm9vbCI7Y2FzZSB5cy5EVF9ET1VCTEU6cmV0dXJuImZsb2F0MzIiO2Nhc2UgeXMuRFRfU1RSSU5HOnJldHVybiJzdHJpbmciO2Nhc2UgeXMuRFRfQ09NUExFWDY0OmNhc2UgeXMuRFRfQ09NUExFWDEyODpyZXR1cm4iY29tcGxleDY0IjtkZWZhdWx0OnJldHVybiBudWxsfX1mdW5jdGlvbiBmQyhuLGUsdCl7Y29uc3Qgcz1uW2VdO3JldHVybiBzJiZzLmZ1bmM/cy5mdW5jLm5hbWU6dH1mdW5jdGlvbiB1MShuLGUsdCl7Y29uc3Qgcz1uW2VdO3JldHVybiBzJiZzLnR5cGU/Wncocy50eXBlKTp0fWZ1bmN0aW9uIGMxKG4sZSx0KXtjb25zdCBzPW5bZV07cmV0dXJuIHMmJnMubGlzdCYmcy5saXN0LnR5cGU/cy5saXN0LnR5cGUubWFwKHI9Plp3KHIpKTp0fWZ1bmN0aW9uIGVSKG4pe2lmKCFuLnVua25vd25SYW5rKXJldHVybiBuLmRpbSE9bnVsbD9uLmRpbS5tYXAoZT0+dHlwZW9mIGUuc2l6ZT09Im51bWJlciI/ZS5zaXplOnBhcnNlSW50KGUuc2l6ZSwxMCkpOltdfWZ1bmN0aW9uIGQxKG4sZSx0KXtjb25zdCBzPW5bZV07cmV0dXJuIHMmJnMuc2hhcGU/ZVIocy5zaGFwZSk6dH1mdW5jdGlvbiBoMShuLGUsdCl7Y29uc3Qgcz1uW2VdO3JldHVybiBzPygocy5saXN0LmYmJnMubGlzdC5mLmxlbmd0aD9zLmxpc3QuZjpzLmxpc3QuaSl8fFtdKS5tYXAocj0+dHlwZW9mIHI9PSJudW1iZXIiP3I6cGFyc2VJbnQociwxMCkpOnR9ZnVuY3Rpb24gcDEobixlLHQscz0hMSl7Y29uc3Qgcj1uW2VdO3JldHVybiByJiZyLmxpc3QmJnIubGlzdC5zP3IubGlzdC5zLm1hcChvPT5KRShvLHMpKTp0fWZ1bmN0aW9uIGYxKG4sZSx0KXtjb25zdCBzPW5bZV07cmV0dXJuIHMmJnMubGlzdCYmcy5saXN0LnNoYXBlP3MubGlzdC5zaGFwZS5tYXAocj0+ZVIocikpOnR9ZnVuY3Rpb24gbTEobixlLHQpe2NvbnN0IHM9bltlXTtyZXR1cm4gcyYmcy5saXN0JiZzLmxpc3QuYj9zLmxpc3QuYjp0fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIHU2e2NvbnN0cnVjdG9yKGUsdCxzKXt0aGlzLm5vZGU9ZSx0aGlzLnRlbnNvck1hcD10LHRoaXMuY29udGV4dD1zLHRoaXMuaW5wdXRzPVtdLHRoaXMuYXR0cnM9e30sdGhpcy5pbnB1dHM9ZS5pbnB1dE5hbWVzLm1hcChyPT50aGlzLmdldElucHV0KHIpKSxlLnJhd0F0dHJzIT1udWxsJiYodGhpcy5hdHRycz1PYmplY3Qua2V5cyhlLnJhd0F0dHJzKS5yZWR1Y2UoKHIsbyk9PihyW29dPXRoaXMuZ2V0QXR0cihvKSxyKSx7fSkpfWdldElucHV0KGUpe3JldHVybiBibihlLHRoaXMudGVuc29yTWFwLHRoaXMuY29udGV4dCl9Z2V0QXR0cihlLHQpe2NvbnN0IHM9dGhpcy5ub2RlLnJhd0F0dHJzW2VdO2lmKHMudGVuc29yIT1udWxsKXJldHVybiBibihlLHRoaXMudGVuc29yTWFwLHRoaXMuY29udGV4dCk7aWYocy5pIT1udWxsfHxzLmYhPW51bGwpcmV0dXJuIGwxKHRoaXMubm9kZS5yYXdBdHRycyxlLHQpO2lmKHMucyE9bnVsbClyZXR1cm4gaTEodGhpcy5ub2RlLnJhd0F0dHJzLGUsdCk7aWYocy5iIT1udWxsKXJldHVybiBhMSh0aGlzLm5vZGUucmF3QXR0cnMsZSx0KTtpZihzLnNoYXBlIT1udWxsKXJldHVybiBkMSh0aGlzLm5vZGUucmF3QXR0cnMsZSx0KTtpZihzLnR5cGUhPW51bGwpcmV0dXJuIHUxKHRoaXMubm9kZS5yYXdBdHRycyxlLHQpO2lmKHMubGlzdCE9bnVsbCl7aWYocy5saXN0LmkhPW51bGx8fHMubGlzdC5mIT1udWxsKXJldHVybiBoMSh0aGlzLm5vZGUucmF3QXR0cnMsZSx0KTtpZihzLmxpc3QucyE9bnVsbClyZXR1cm4gcDEodGhpcy5ub2RlLnJhd0F0dHJzLGUsdCk7aWYocy5saXN0LnNoYXBlIT1udWxsKXJldHVybiBmMSh0aGlzLm5vZGUucmF3QXR0cnMsZSx0KTtpZihzLmxpc3QuYiE9bnVsbClyZXR1cm4gbTEodGhpcy5ub2RlLnJhd0F0dHJzLGUsdCk7aWYocy5saXN0LnR5cGUhPW51bGwpcmV0dXJuIGMxKHRoaXMubm9kZS5yYXdBdHRycyxlLHQpfXJldHVybiB0fX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCAkbj1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsT1BfU0NPUEVfU1VGRklYOlAxLGFiczpYdCxhY29zOkcxLGFjb3NoOkgxLGFkZDptZSxhZGROOlUkLGFsbDp1Zyxhbnk6VmMsYXJnTWF4OmxhLGFyZ01pbjpxMSxhc2luOksxLGFzaW5oOlgxLGF0YW46WTEsYXRhbjI6UTEsYXRhbmg6WjEsYXZnUG9vbDpvaCxhdmdQb29sM2Q6ZWIsYmFzaWNMU1RNQ2VsbDpqJCxiYXRjaE5vcm06U3UsYmF0Y2hOb3JtMmQ6dGIsYmF0Y2hOb3JtM2Q6bmIsYmF0Y2hOb3JtNGQ6c2IsYmF0Y2hUb1NwYWNlTkQ6aWgsYmluY291bnQ6cmIsYml0d2lzZUFuZDpHJCxib29sZWFuTWFza0FzeW5jOkVJLGJyb2FkY2FzdEFyZ3M6SCQsYnJvYWRjYXN0VG86dGEsYnVmZmVyOnFlLGNhc3Q6TmUsY2VpbDpvYixjbGlwQnlWYWx1ZTpzcyxjbG9uZTpWcixjb21wbGV4OnlvLGNvbmNhdDpXdCxjb25jYXQxZDppYixjb25jYXQyZDphYixjb25jYXQzZDpsYixjb25jYXQ0ZDp1Yixjb252MWQ6Y2csY29udjJkOnhvLGNvbnYyZFRyYW5zcG9zZTpkZyxjb252M2Q6ZGIsY29udjNkVHJhbnNwb3NlOmhiLGNvczphaCxjb3NoOmhnLGNvc2luZVdpbmRvdzpMZyxjdW1wcm9kOmpjLGN1bXN1bTpwZyxkZW5zZUJpbmNvdW50OlJmLGRlcHRoVG9TcGFjZTpwYixkZXB0aHdpc2VDb252MmQ6TnUsZGlhZzpLJCxkaWxhdGlvbjJkOmZiLGRpdjpPZSxkaXZOb05hbjptYixkb3Q6Z2IsZHJvcG91dDpqYixlaW5zdW06cWksZWx1Omt1LGVuY2xvc2luZ1Bvd2VyT2ZUd286R2IsZW5zdXJlU2hhcGU6WCQsZXF1YWw6dHIsZXJmOmZnLGV1Y2xpZGVhbk5vcm06eGIsZXhwOnJzLGV4cGFuZERpbXM6QW4sZXhwbTE6YmIsZXllOm1nLGZmdDp3aCxmaWxsOk5hLGZsb29yOiR1LGZsb29yRGl2OmxnLGZ1c2VkOnpJLGdhdGhlcjpJdSxnYXRoZXJORDpfSSxncmVhdGVyOmFzLGdyZWF0ZXJFcXVhbDpDbyxpZmZ0OndsLGltYWc6bGgsaW1hZ2U6eHIsaW5Ub3BLQXN5bmM6T0ksaXJmZnQ6UmcsaXNGaW5pdGU6d2IsaXNJbmY6dmIsaXNOYU46U2IsbGVha3lSZWx1OnVoLGxlc3M6Z2wsbGVzc0VxdWFsOndpLGxpbmFsZzpLYixsaW5zcGFjZTpaJCxsb2NhbFJlc3BvbnNlTm9ybWFsaXphdGlvbjpOYixsb2c6d3MsbG9nMXA6Y2gsbG9nU2lnbW9pZDprYixsb2dTb2Z0bWF4OnlnLGxvZ1N1bUV4cDpkaCxsb2dpY2FsQW5kOlNyLGxvZ2ljYWxOb3Q6aGgsbG9naWNhbE9yOnhnLGxvZ2ljYWxYb3I6Q2IsbG9zc2VzOkdJLGxvd2VyQm91bmQ6ZUksbWF0TXVsOlhlLG1heDpMcyxtYXhQb29sOnBoLG1heFBvb2wzZDokYixtYXhQb29sV2l0aEFyZ21heDp0SSxtYXhpbXVtOlFyLG1lYW46X3QsbWVzaGdyaWQ6bkksbWluOm1sLG1pbmltdW06Y2ksbWlycm9yUGFkOkliLG1vZDpUYixtb21lbnRzOmZoLG1vdmluZ0F2ZXJhZ2U6UkksbXVsOlgsbXVsdGlSTk5DZWxsOnNJLG11bHRpbm9taWFsOnJJLG5lZzpOdCxub3JtOkN1LG5vdEVxdWFsOmRhLG9uZUhvdDp5bCxvbmVzOkpuLG9uZXNMaWtlOnZzLG9wOkcsb3V0ZXJQcm9kdWN0Om9JLHBhZDokbyxwYWQxZDppSSxwYWQyZDphSSxwYWQzZDpsSSxwYWQ0ZDp1SSxwb29sOkViLHBvdzpxcixwcmVsdTpnaCxwcmludDpqMSxwcm9kOlJiLHJhZ2dlZEdhdGhlcjpjSSxyYWdnZWRSYW5nZTpkSSxyYWdnZWRUZW5zb3JUb1RlbnNvcjpoSSxyYW5kOnBJLHJhbmRvbUdhbW1hOmdJLHJhbmRvbU5vcm1hbDp2ZyxyYW5kb21TdGFuZGFyZE5vcm1hbDp5SSxyYW5kb21Vbmlmb3JtOnZpLHJhbmRvbVVuaWZvcm1JbnQ6eEkscmFuZ2U6aGEscmVhbDp4bCxyZWNpcHJvY2FsOk9iLHJlbHU6SXIscmVsdTY6U2cscmVzaGFwZTpKLHJldmVyc2U6UHMscmV2ZXJzZTFkOmJJLHJldmVyc2UyZDp3SSxyZXZlcnNlM2Q6dkkscmV2ZXJzZTRkOlNJLHJmZnQ6dmgscm91bmQ6TmcscnNxcnQ6a2csc2NhbGFyOk1lLHNjYXR0ZXJORDpESSxzZWFyY2hTb3J0ZWQ6Ymcsc2VsdTpDZyxzZXBhcmFibGVDb252MmQ6JGcsc2V0ZGlmZjFkQXN5bmM6Tkksc2lnbW9pZDp3cixzaWduOkZiLHNpZ25hbDpqSSxzaW46SWcsc2luaDpUZyxzbGljZTpzdCxzbGljZTFkOnloLHNsaWNlMmQ6RWcsc2xpY2UzZDp4aCxzbGljZTRkOmJsLHNvZnRtYXg6Ymgsc29mdHBsdXM6a2Esc3BhY2VUb0JhdGNoTkQ6bWgsc3BhcnNlOkhJLHNwYXJzZVRvRGVuc2U6QUksc3BlY3RyYWw6VUksc3BsaXQ6ZXMsc3FydDpwbixzcXVhcmU6eXQsc3F1YXJlZERpZmZlcmVuY2U6RGcsc3F1ZWV6ZTpTaSxzdGFjazpvcyxzdGVwOkNhLHN0cmlkZWRTbGljZTpMYixzdHJpbmc6cUksc3ViOkllLHN1bTpSZSx0YW46UGIsdGFuaDp1aSx0ZW5zb3I6ZXIsdGVuc29yMWQ6X24sdGVuc29yMmQ6Y2wsdGVuc29yM2Q6emIsdGVuc29yNGQ6a0ksdGVuc29yNWQ6Q0ksdGVuc29yNmQ6JEksdGVuc29yU2NhdHRlclVwZGF0ZTpJSSx0aWxlOl9zLHRvcGs6QmIsdHJhbnNwb3NlOnR0LHRydW5jYXRlZE5vcm1hbDpfZyx1bmlxdWU6VmIsdW5zb3J0ZWRTZWdtZW50U3VtOk9nLHVuc3RhY2s6enMsdXBwZXJCb3VuZDpUSSx2YXJpYWJsZTpXYix3aGVyZTp2bix3aGVyZUFzeW5jOlViLHplcm9zOll0LHplcm9zTGlrZTpydH0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBjNj0obixlLHQscz0kbik9Pntzd2l0Y2gobi5vcCl7Y2FzZSJCaWFzQWRkIjpjYXNlIkFkZFYyIjpjYXNlIkFkZCI6cmV0dXJuW3MuYWRkKEkoImEiLG4sZSx0KSxJKCJiIixuLGUsdCkpXTtjYXNlIkFkZE4iOnJldHVybltzLmFkZE4oSSgidGVuc29ycyIsbixlLHQpKV07Y2FzZSJGbG9vck1vZCI6Y2FzZSJNb2QiOnJldHVybltzLm1vZChJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpKV07Y2FzZSJNdWwiOnJldHVybltzLm11bChJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpKV07Y2FzZSJSZWFsRGl2IjpjYXNlIkRpdiI6cmV0dXJuW3MuZGl2KEkoImEiLG4sZSx0KSxJKCJiIixuLGUsdCkpXTtjYXNlIkRpdk5vTmFuIjpyZXR1cm5bcy5kaXZOb05hbihJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpKV07Y2FzZSJGbG9vckRpdiI6cmV0dXJuW3MuZmxvb3JEaXYoSSgiYSIsbixlLHQpLEkoImIiLG4sZSx0KSldO2Nhc2UiU3ViIjpyZXR1cm5bcy5zdWIoSSgiYSIsbixlLHQpLEkoImIiLG4sZSx0KSldO2Nhc2UiTWluaW11bSI6cmV0dXJuW3MubWluaW11bShJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpKV07Y2FzZSJNYXhpbXVtIjpyZXR1cm5bcy5tYXhpbXVtKEkoImEiLG4sZSx0KSxJKCJiIixuLGUsdCkpXTtjYXNlIlBvdyI6cmV0dXJuW3MucG93KEkoImEiLG4sZSx0KSxJKCJiIixuLGUsdCkpXTtjYXNlIlNxdWFyZWREaWZmZXJlbmNlIjpyZXR1cm5bcy5zcXVhcmVkRGlmZmVyZW5jZShJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpKV07ZGVmYXVsdDp0aHJvdyBUeXBlRXJyb3IoYE5vZGUgdHlwZSAke24ub3B9IGlzIG5vdCBpbXBsZW1lbnRlZGApfX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgZDY9KG4sZSx0LHM9JG4pPT57c3dpdGNoKG4ub3Ape2Nhc2UiQWJzIjpjYXNlIkNvbXBsZXhBYnMiOnJldHVybltzLmFicyhJKCJ4IixuLGUsdCkpXTtjYXNlIkFjb3MiOnJldHVybltzLmFjb3MoSSgieCIsbixlLHQpKV07Y2FzZSJBY29zaCI6cmV0dXJuW3MuYWNvc2goSSgieCIsbixlLHQpKV07Y2FzZSJBc2luIjpyZXR1cm5bcy5hc2luKEkoIngiLG4sZSx0KSldO2Nhc2UiQXNpbmgiOnJldHVybltzLmFzaW5oKEkoIngiLG4sZSx0KSldO2Nhc2UiQXRhbiI6cmV0dXJuW3MuYXRhbihJKCJ4IixuLGUsdCkpXTtjYXNlIkF0YW4yIjpyZXR1cm5bcy5hdGFuMihJKCJ4IixuLGUsdCksSSgieSIsbixlLHQpKV07Y2FzZSJBdGFuaCI6cmV0dXJuW3MuYXRhbmgoSSgieCIsbixlLHQpKV07Y2FzZSJDZWlsIjpyZXR1cm5bcy5jZWlsKEkoIngiLG4sZSx0KSldO2Nhc2UiQ29tcGxleCI6cmV0dXJuW3MuY29tcGxleChJKCJyZWFsIixuLGUsdCksSSgiaW1hZyIsbixlLHQpKV07Y2FzZSJDb3MiOnJldHVybltzLmNvcyhJKCJ4IixuLGUsdCkpXTtjYXNlIkNvc2giOnJldHVybltzLmNvc2goSSgieCIsbixlLHQpKV07Y2FzZSJFbHUiOnJldHVybltzLmVsdShJKCJ4IixuLGUsdCkpXTtjYXNlIkVyZiI6cmV0dXJuW3MuZXJmKEkoIngiLG4sZSx0KSldO2Nhc2UiRXhwIjpyZXR1cm5bcy5leHAoSSgieCIsbixlLHQpKV07Y2FzZSJFeHBtMSI6cmV0dXJuW3MuZXhwbTEoSSgieCIsbixlLHQpKV07Y2FzZSJGbG9vciI6cmV0dXJuW3MuZmxvb3IoSSgieCIsbixlLHQpKV07Y2FzZSJMb2ciOnJldHVybltzLmxvZyhJKCJ4IixuLGUsdCkpXTtjYXNlIkxvZzFwIjpyZXR1cm5bcy5sb2cxcChJKCJ4IixuLGUsdCkpXTtjYXNlIkltYWciOnJldHVybltzLmltYWcoSSgieCIsbixlLHQpKV07Y2FzZSJOZWciOnJldHVybltzLm5lZyhJKCJ4IixuLGUsdCkpXTtjYXNlIlJlY2lwcm9jYWwiOnJldHVybltzLnJlY2lwcm9jYWwoSSgieCIsbixlLHQpKV07Y2FzZSJSZWFsIjpyZXR1cm5bcy5yZWFsKEkoIngiLG4sZSx0KSldO2Nhc2UiUmVsdSI6cmV0dXJuW3MucmVsdShJKCJ4IixuLGUsdCkpXTtjYXNlIlJvdW5kIjpyZXR1cm5bcy5yb3VuZChJKCJ4IixuLGUsdCkpXTtjYXNlIlNlbHUiOnJldHVybltzLnNlbHUoSSgieCIsbixlLHQpKV07Y2FzZSJTaWdtb2lkIjpyZXR1cm5bcy5zaWdtb2lkKEkoIngiLG4sZSx0KSldO2Nhc2UiU2luIjpyZXR1cm5bcy5zaW4oSSgieCIsbixlLHQpKV07Y2FzZSJTaWduIjpyZXR1cm5bcy5zaWduKEkoIngiLG4sZSx0KSldO2Nhc2UiU2luaCI6cmV0dXJuW3Muc2luaChJKCJ4IixuLGUsdCkpXTtjYXNlIlNvZnRwbHVzIjpyZXR1cm5bcy5zb2Z0cGx1cyhJKCJ4IixuLGUsdCkpXTtjYXNlIlNxcnQiOnJldHVybltzLnNxcnQoSSgieCIsbixlLHQpKV07Y2FzZSJTcXVhcmUiOnJldHVybltzLnNxdWFyZShJKCJ4IixuLGUsdCkpXTtjYXNlIlRhbmgiOnJldHVybltzLnRhbmgoSSgieCIsbixlLHQpKV07Y2FzZSJUYW4iOnJldHVybltzLnRhbihJKCJ4IixuLGUsdCkpXTtjYXNlIkNsaXBCeVZhbHVlIjpyZXR1cm5bcy5jbGlwQnlWYWx1ZShJKCJ4IixuLGUsdCksSSgiY2xpcFZhbHVlTWluIixuLGUsdCksSSgiY2xpcFZhbHVlTWF4IixuLGUsdCkpXTtjYXNlIlJlbHU2IjpyZXR1cm5bcy5yZWx1NihJKCJ4IixuLGUsdCkpXTtjYXNlIlJzcXJ0IjpyZXR1cm5bcy5yc3FydChibihuLmlucHV0TmFtZXNbMF0sZSx0KSldO2Nhc2UiTGVha3lSZWx1IjpyZXR1cm5bcy5sZWFreVJlbHUoSSgieCIsbixlLHQpLEkoImFscGhhIixuLGUsdCkpXTtjYXNlIlByZWx1IjpyZXR1cm5bcy5wcmVsdShJKCJ4IixuLGUsdCksSSgiYWxwaGEiLG4sZSx0KSldO2Nhc2UiSXNOYW4iOnJldHVybltzLmlzTmFOKGJuKG4uaW5wdXROYW1lc1swXSxlLHQpKV07Y2FzZSJJc0luZiI6cmV0dXJuW3MuaXNJbmYoYm4obi5pbnB1dE5hbWVzWzBdLGUsdCkpXTtjYXNlIklzRmluaXRlIjpyZXR1cm5bcy5pc0Zpbml0ZShibihuLmlucHV0TmFtZXNbMF0sZSx0KSldO2RlZmF1bHQ6dGhyb3cgVHlwZUVycm9yKGBOb2RlIHR5cGUgJHtuLm9wfSBpcyBub3QgaW1wbGVtZW50ZWRgKX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFFzKG4sZSx0PSIiKXtpZighKHR5cGVvZiBuPT0ibnVtYmVyInx8dHlwZW9mIGU9PSJudW1iZXIiKSl7QShuLmxlbmd0aD09PWUubGVuZ3RoLCgpPT50K2AgU2hhcGVzICR7bn0gYW5kICR7ZX0gbXVzdCBtYXRjaGApO2ZvcihsZXQgcz0wO3M8bi5sZW5ndGg7cysrKXtjb25zdCByPW5bc10sbz1lW3NdO0EocjwwfHxvPDB8fHI9PT1vLCgpPT50K2AgU2hhcGVzICR7bn0gYW5kICR7ZX0gbXVzdCBtYXRjaGApfX19ZnVuY3Rpb24gbUMobil7cmV0dXJuISh0eXBlb2Ygbj09Im51bWJlciJ8fG4uc29tZShlPT5lPDApKX1mdW5jdGlvbiBrYyhuLGUsdCl7bGV0IHM9ZzEobix0KTtjb25zdCByPSFtQyhzKTtpZihyJiZlLmxlbmd0aD09PTApdGhyb3cgbmV3IEVycm9yKGBUcmllZCB0byBjYWxjdWxhdGUgZWxlbWVudHMgb2YgYW4gZW1wdHkgbGlzdCB3aXRoIG5vbi1mdWxseS1kZWZpbmVkIGVsZW1lbnRTaGFwZTogJHtzfWApO2lmKHImJmUuZm9yRWFjaChvPT57cz1nMShvLnNoYXBlLHMpfSksIW1DKHMpKXRocm93IG5ldyBFcnJvcihgTm9uLWZ1bGx5LWRlZmluZWQgZWxlbWVudFNoYXBlOiAke3N9YCk7cmV0dXJuIHN9ZnVuY3Rpb24gZzEobixlKXtpZih0eXBlb2Ygbj09Im51bWJlciIpcmV0dXJuIGU7aWYodHlwZW9mIGU9PSJudW1iZXIiKXJldHVybiBuO2lmKG4ubGVuZ3RoIT09ZS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBJbmNvbXBhdGlibGUgcmFua3MgZHVyaW5nIG1lcmdlOiAke259IHZzLiAke2V9YCk7Y29uc3QgdD1bXTtmb3IobGV0IHM9MDtzPG4ubGVuZ3RoOysrcyl7Y29uc3Qgcj1uW3NdLG89ZVtzXTtpZihyPj0wJiZvPj0wJiZyIT09byl0aHJvdyBuZXcgRXJyb3IoYEluY29tcGF0aWJsZSBzaGFwZSBkdXJpbmcgbWVyZ2U6ICR7bn0gdnMuICR7ZX1gKTt0W3NdPXI+PTA/cjpvfXJldHVybiB0fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIGg2e2NvbnN0cnVjdG9yKGUsdCxzLHIsbyxpLGEpe3RoaXMubmFtZT1lLHRoaXMuZHR5cGU9dCx0aGlzLm1heFNpemU9cyx0aGlzLmVsZW1lbnRTaGFwZT1yLHRoaXMuaWRlbnRpY2FsRWxlbWVudFNoYXBlcz1vLHRoaXMuZHluYW1pY1NpemU9aSx0aGlzLmNsZWFyQWZ0ZXJSZWFkPWEsdGhpcy50ZW5zb3JzPVtdLHRoaXMuY2xvc2VkXz0hMSx0aGlzLmlkVGVuc29yPU1lKDApLGVuKHRoaXMuaWRUZW5zb3IpfWdldCBpZCgpe3JldHVybiB0aGlzLmlkVGVuc29yLmlkfWdldCBjbG9zZWQoKXtyZXR1cm4gdGhpcy5jbG9zZWRffWNsZWFyQW5kQ2xvc2UoZSl7dGhpcy50ZW5zb3JzLmZvckVhY2godD0+eyhlPT1udWxsfHwhZS5oYXModC50ZW5zb3IuaWQpKSYmdC50ZW5zb3IuZGlzcG9zZSgpfSksdGhpcy50ZW5zb3JzPVtdLHRoaXMuY2xvc2VkXz0hMCx0aGlzLmlkVGVuc29yLmRpc3Bvc2UoKX1zaXplKCl7cmV0dXJuIHRoaXMudGVuc29ycy5sZW5ndGh9cmVhZChlKXtpZih0aGlzLmNsb3NlZF8pdGhyb3cgbmV3IEVycm9yKGBUZW5zb3JBcnJheSAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQuYCk7aWYoZTwwfHxlPj10aGlzLnNpemUoKSl0aHJvdyBuZXcgRXJyb3IoYFRyaWVkIHRvIHJlYWQgZnJvbSBpbmRleCAke2V9LCBidXQgYXJyYXkgc2l6ZSBpczogJHt0aGlzLnNpemUoKX1gKTtjb25zdCB0PXRoaXMudGVuc29yc1tlXTtpZih0LmNsZWFyZWQpdGhyb3cgbmV3IEVycm9yKGBUZW5zb3JBcnJheSAke3RoaXMubmFtZX06IENvdWxkIG5vdCByZWFkIGluZGV4ICR7ZX0gdHdpY2UgYmVjYXVzZSBpdCB3YXMgY2xlYXJlZCBhZnRlciBhIHByZXZpb3VzIHJlYWQgKHBlcmhhcHMgdHJ5IHNldHRpbmcgY2xlYXJfYWZ0ZXJfcmVhZCA9IGZhbHNlPykuYCk7cmV0dXJuIHRoaXMuY2xlYXJBZnRlclJlYWQmJih0LmNsZWFyZWQ9ITApLHQucmVhZD0hMCx0LnRlbnNvcn1yZWFkTWFueShlKXtyZXR1cm4gZS5tYXAodD0+dGhpcy5yZWFkKHQpKX13cml0ZShlLHQpe2lmKHRoaXMuY2xvc2VkXyl0aHJvdyBuZXcgRXJyb3IoYFRlbnNvckFycmF5ICR7dGhpcy5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZC5gKTtpZihlPDB8fCF0aGlzLmR5bmFtaWNTaXplJiZlPj10aGlzLm1heFNpemUpdGhyb3cgbmV3IEVycm9yKGBUcmllZCB0byB3cml0ZSB0byBpbmRleCAke2V9LCBidXQgYXJyYXkgaXMgbm90IHJlc2l6ZWFibGUgYW5kIHNpemUgaXM6ICR7dGhpcy5tYXhTaXplfWApO2NvbnN0IHM9dGhpcy50ZW5zb3JzW2VdfHx7fTtpZih0LmR0eXBlIT09dGhpcy5kdHlwZSl0aHJvdyBuZXcgRXJyb3IoYFRlbnNvckFycmF5ICR7dGhpcy5uYW1lfTogQ291bGQgbm90IHdyaXRlIHRvIFRlbnNvckFycmF5IGluZGV4ICR7ZX0sCiAgICAgICAgICBiZWNhdXNlIHRoZSB2YWx1ZSBkdHlwZSBpcyAke3QuZHR5cGV9LCBidXQgVGVuc29yQXJyYXkgZHR5cGUgaXMgJHt0aGlzLmR0eXBlfS5gKTtpZih0aGlzLnNpemUoKT09PTAmJih0aGlzLmVsZW1lbnRTaGFwZT09bnVsbHx8dGhpcy5lbGVtZW50U2hhcGUubGVuZ3RoPT09MCkmJih0aGlzLmVsZW1lbnRTaGFwZT10LnNoYXBlKSxRcyh0aGlzLmVsZW1lbnRTaGFwZSx0LnNoYXBlLGBUZW5zb3JBcnJheSAke3RoaXMubmFtZX06IENvdWxkIG5vdCB3cml0ZSB0byBUZW5zb3JBcnJheSBpbmRleCAke2V9LmApLHMucmVhZCl0aHJvdyBuZXcgRXJyb3IoYFRlbnNvckFycmF5ICR7dGhpcy5uYW1lfTogQ291bGQgbm90IHdyaXRlIHRvIFRlbnNvckFycmF5IGluZGV4ICR7ZX0sIGJlY2F1c2UgaXQgaGFzIGFscmVhZHkgYmVlbiByZWFkLmApO2lmKHMud3JpdHRlbil0aHJvdyBuZXcgRXJyb3IoYFRlbnNvckFycmF5ICR7dGhpcy5uYW1lfTogQ291bGQgbm90IHdyaXRlIHRvIFRlbnNvckFycmF5IGluZGV4ICR7ZX0sIGJlY2F1c2UgaXQgaGFzIGFscmVhZHkgYmVlbiB3cml0dGVuLmApO3MudGVuc29yPXQsZW4odCkscy53cml0dGVuPSEwLHRoaXMudGVuc29yc1tlXT1zfXdyaXRlTWFueShlLHQpe2lmKGUubGVuZ3RoIT09dC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBUZW5zb3JBcnJheSAke3RoaXMubmFtZX06IGNvdWxkIG5vdCB3cml0ZSBtdWx0aXBsZSB0ZW5zb3JzLGJlY2F1c2UgdGhlIGluZGV4IHNpemU6ICR7ZS5sZW5ndGh9IGlzIG5vdCB0aGUgc2FtZSBhcyB0ZW5zb3JzIHNpemU6ICR7dC5sZW5ndGh9LmApO2UuZm9yRWFjaCgocyxyKT0+dGhpcy53cml0ZShzLHRbcl0pKX1nYXRoZXIoZSx0KXtpZih0JiZ0IT09dGhpcy5kdHlwZSl0aHJvdyBuZXcgRXJyb3IoYFRlbnNvckFycmF5IGR0eXBlIGlzICR7dGhpcy5kdHlwZX0gYnV0IGdhdGhlciByZXF1ZXN0ZWQgZHR5cGUgJHt0fWApO2lmKGUpZT1lLnNsaWNlKDAsdGhpcy5zaXplKCkpO2Vsc2V7ZT1bXTtmb3IobGV0IHI9MDtyPHRoaXMuc2l6ZSgpO3IrKyllLnB1c2gocil9aWYoZS5sZW5ndGg9PT0wKXJldHVybiBlcihbXSxbMF0uY29uY2F0KHRoaXMuZWxlbWVudFNoYXBlKSk7Y29uc3Qgcz10aGlzLnJlYWRNYW55KGUpO3JldHVybiBRcyh0aGlzLmVsZW1lbnRTaGFwZSxzWzBdLnNoYXBlLCJUZW5zb3JBcnJheSBzaGFwZSBtaXNtYXRjaDogIiksb3MocywwKX1jb25jYXQoZSl7aWYoZSYmZSE9PXRoaXMuZHR5cGUpdGhyb3cgbmV3IEVycm9yKGBUZW5zb3JBcnJheSBkdHlwZSBpcyAke3RoaXMuZHR5cGV9IGJ1dCBjb25jYXQgcmVxdWVzdGVkIGR0eXBlICR7ZX1gKTtpZih0aGlzLnNpemUoKT09PTApcmV0dXJuIGVyKFtdLFswXS5jb25jYXQodGhpcy5lbGVtZW50U2hhcGUpKTtjb25zdCB0PVtdO2ZvcihsZXQgcj0wO3I8dGhpcy5zaXplKCk7cisrKXQucHVzaChyKTtjb25zdCBzPXRoaXMucmVhZE1hbnkodCk7cmV0dXJuIFFzKHRoaXMuZWxlbWVudFNoYXBlLHNbMF0uc2hhcGUsYFRlbnNvckFycmF5IHNoYXBlIG1pc21hdGNoOiB0ZW5zb3IgYXJyYXkgc2hhcGUgKCR7dGhpcy5lbGVtZW50U2hhcGV9KSB2cyBmaXJzdCB0ZW5zb3Igc2hhcGUgKCR7c1swXS5zaGFwZX0pYCksV3QocywwKX1zY2F0dGVyKGUsdCl7aWYodC5kdHlwZSE9PXRoaXMuZHR5cGUpdGhyb3cgbmV3IEVycm9yKGBUZW5zb3JBcnJheSBkdHlwZSBpcyAke3RoaXMuZHR5cGV9IGJ1dCB0ZW5zb3IgaGFzIGR0eXBlICR7dC5kdHlwZX1gKTtpZihlLmxlbmd0aCE9PXQuc2hhcGVbMF0pdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBsZW4oaW5kaWNlcykgPT0gdGVuc29yLnNoYXBlWzBdLCBidXQgc2F3OiAke2UubGVuZ3RofSB2cy4gJHt0LnNoYXBlWzBdfWApO2NvbnN0IHM9TWF0aC5tYXgoLi4uZSk7aWYoIXRoaXMuZHluYW1pY1NpemUmJnM+PXRoaXMubWF4U2l6ZSl0aHJvdyBuZXcgRXJyb3IoYE1heCBpbmRleCBtdXN0IGJlIDwgYXJyYXkgc2l6ZSAoJHtzfSAgdnMuICR7dGhpcy5tYXhTaXplfSlgKTt0aGlzLndyaXRlTWFueShlLHpzKHQsMCkpfXNwbGl0KGUsdCl7aWYodC5kdHlwZSE9PXRoaXMuZHR5cGUpdGhyb3cgbmV3IEVycm9yKGBUZW5zb3JBcnJheSBkdHlwZSBpcyAke3RoaXMuZHR5cGV9IGJ1dCB0ZW5zb3IgaGFzIGR0eXBlICR7dC5kdHlwZX1gKTtsZXQgcz0wO2NvbnN0IHI9ZS5tYXAobD0+KHMrPWwscykpO2lmKHMhPT10LnNoYXBlWzBdKXRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgc3VtIG9mIGxlbmd0aHMgdG8gYmUgZXF1YWwgdG8KICAgICAgICAgIHRlbnNvci5zaGFwZVswXSwgYnV0IHN1bSBvZiBsZW5ndGhzIGlzCiAgICAgICAgJHtzfSwgYW5kIHRlbnNvcidzIHNoYXBlIGlzOiAke3Quc2hhcGV9YCk7aWYoIXRoaXMuZHluYW1pY1NpemUmJmUubGVuZ3RoIT09dGhpcy5tYXhTaXplKXRocm93IG5ldyBFcnJvcihgVGVuc29yQXJyYXkncyBzaXplIGlzIG5vdCBlcXVhbCB0byB0aGUgc2l6ZSBvZiBsZW5ndGhzICgke3RoaXMubWF4U2l6ZX0gdnMuICR7ZS5sZW5ndGh9KSwgYW5kIHRoZSBUZW5zb3JBcnJheSBpcyBub3QgbWFya2VkIGFzIGR5bmFtaWNhbGx5IHJlc2l6ZWFibGVgKTtjb25zdCBvPXM9PT0wPzA6dC5zaXplL3MsaT1bXTtyZSgoKT0+e3Q9Sih0LFsxLHMsb10pO2ZvcihsZXQgbD0wO2w8ZS5sZW5ndGg7KytsKXtjb25zdCBoPVswLGw9PT0wPzA6cltsLTFdLDBdLHA9WzEsZVtsXSxvXTtpW2xdPUooc3QodCxoLHApLHRoaXMuZWxlbWVudFNoYXBlKX1yZXR1cm4gaX0pO2NvbnN0IGE9W107Zm9yKGxldCBsPTA7bDxlLmxlbmd0aDtsKyspYVtsXT1sO3RoaXMud3JpdGVNYW55KGEsaSl9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIG1he2dldCBpZCgpe3JldHVybiB0aGlzLmlkVGVuc29yLmlkfWNvbnN0cnVjdG9yKGUsdCxzLHI9LTEpe3RoaXMudGVuc29ycz1lLHRoaXMuZWxlbWVudFNoYXBlPXQsdGhpcy5lbGVtZW50RHR5cGU9cyxlPy5mb3JFYWNoKG89PntpZihzIT09by5kdHlwZSl0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZGF0YSB0eXBlczsgb3AgZWxlbWVudHMgJHtzfSwgYnV0IGxpc3QgZWxlbWVudHMgJHtvLmR0eXBlfWApO1FzKHQsby5zaGFwZSwiVGVuc29yTGlzdCBzaGFwZSBtaXNtYXRjaDogIiksZW4obyl9KSx0aGlzLmlkVGVuc29yPU1lKDApLHRoaXMubWF4TnVtRWxlbWVudHM9cixlbih0aGlzLmlkVGVuc29yKX1jb3B5KCl7cmV0dXJuIG5ldyBtYShbLi4udGhpcy50ZW5zb3JzXSx0aGlzLmVsZW1lbnRTaGFwZSx0aGlzLmVsZW1lbnREdHlwZSl9Y2xlYXJBbmRDbG9zZShlKXt0aGlzLnRlbnNvcnMuZm9yRWFjaCh0PT57KGU9PW51bGx8fCFlLmhhcyh0LmlkKSkmJnQuZGlzcG9zZSgpfSksdGhpcy50ZW5zb3JzLmxlbmd0aD0wLHRoaXMuaWRUZW5zb3IuZGlzcG9zZSgpfXNpemUoKXtyZXR1cm4gdGhpcy50ZW5zb3JzLmxlbmd0aH1zdGFjayhlLHQscz0tMSl7aWYodCE9PXRoaXMuZWxlbWVudER0eXBlKXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkYXRhIHR5cGVzOyBvcCBlbGVtZW50cyAke3R9LCBidXQgbGlzdCBlbGVtZW50cyAke3RoaXMuZWxlbWVudER0eXBlfWApO2lmKHMhPT0tMSYmdGhpcy50ZW5zb3JzLmxlbmd0aCE9PXMpdGhyb3cgbmV3IEVycm9yKGBPcGVyYXRpb24gZXhwZWN0ZWQgYSBsaXN0IHdpdGggJHtzfSBlbGVtZW50cyBidXQgZ290IGEgbGlzdCB3aXRoICR7dGhpcy50ZW5zb3JzLmxlbmd0aH0gZWxlbWVudHMuYCk7UXMoZSx0aGlzLmVsZW1lbnRTaGFwZSwiVGVuc29yTGlzdCBzaGFwZSBtaXNtYXRjaDogIik7Y29uc3Qgcj1rYyh0aGlzLmVsZW1lbnRTaGFwZSx0aGlzLnRlbnNvcnMsZSk7cmV0dXJuIHJlKCgpPT57Y29uc3Qgbz10aGlzLnRlbnNvcnMubWFwKGk9PkooaSxyKSk7cmV0dXJuIG9zKG8sMCl9KX1wb3BCYWNrKGUsdCl7aWYodCE9PXRoaXMuZWxlbWVudER0eXBlKXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkYXRhIHR5cGVzOyBvcCBlbGVtZW50cyAke3R9LCBidXQgbGlzdCBlbGVtZW50cyAke3RoaXMuZWxlbWVudER0eXBlfWApO2lmKHRoaXMuc2l6ZSgpPT09MCl0aHJvdyBuZXcgRXJyb3IoIlRyeWluZyB0byBwb3AgZnJvbSBhbiBlbXB0eSBsaXN0LiIpO2NvbnN0IHM9a2ModGhpcy5lbGVtZW50U2hhcGUsdGhpcy50ZW5zb3JzLGUpLHI9dGhpcy50ZW5zb3JzLnBvcCgpO3JldHVybiByLmtlcHQ9ITEsUXMoci5zaGFwZSxlLCJUZW5zb3JMaXN0IHNoYXBlIG1pc21hdGNoOiAiKSxKKHIscyl9cHVzaEJhY2soZSl7aWYoZS5kdHlwZSE9PXRoaXMuZWxlbWVudER0eXBlKXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkYXRhIHR5cGVzOyBvcCBlbGVtZW50cyAke2UuZHR5cGV9LCBidXQgbGlzdCBlbGVtZW50cyAke3RoaXMuZWxlbWVudER0eXBlfWApO2lmKFFzKGUuc2hhcGUsdGhpcy5lbGVtZW50U2hhcGUsIlRlbnNvckxpc3Qgc2hhcGUgbWlzbWF0Y2g6ICIpLHRoaXMubWF4TnVtRWxlbWVudHM9PT10aGlzLnNpemUoKSl0aHJvdyBuZXcgRXJyb3IoIlRyeWluZyB0byBwdXNoIGVsZW1lbnQgaW50byBhIGZ1bGwgbGlzdC4iKTtlbihlKSx0aGlzLnRlbnNvcnMucHVzaChlKX1yZXNpemUoZSl7aWYoZTwwKXRocm93IG5ldyBFcnJvcihgVGVuc29yTGlzdFJlc2l6ZSBleHBlY3RzIHNpemUgdG8gYmUgbm9uLW5lZ2F0aXZlLiBHb3Q6ICR7ZX1gKTtpZih0aGlzLm1heE51bUVsZW1lbnRzIT09LTEmJmU+dGhpcy5tYXhOdW1FbGVtZW50cyl0aHJvdyBuZXcgRXJyb3IoYFRlbnNvckxpc3RSZXNpemUgaW5wdXQgc2l6ZSAke2V9IGlzIGdyZWF0ZXIgbWF4TnVtRWxlbWVudCAke3RoaXMubWF4TnVtRWxlbWVudHN9LmApO2NvbnN0IHQ9bmV3IG1hKFtdLHRoaXMuZWxlbWVudFNoYXBlLHRoaXMuZWxlbWVudER0eXBlLHRoaXMubWF4TnVtRWxlbWVudHMpO3QudGVuc29ycy5sZW5ndGg9ZTtmb3IobGV0IHM9MDtzPE1hdGgubWluKHRoaXMudGVuc29ycy5sZW5ndGgsZSk7KytzKXQudGVuc29yc1tzXT10aGlzLnRlbnNvcnNbc107cmV0dXJuIHR9Z2V0SXRlbShlLHQscyl7aWYocyE9PXRoaXMuZWxlbWVudER0eXBlKXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkYXRhIHR5cGVzOyBvcCBlbGVtZW50cyAke3N9LCBidXQgbGlzdCBlbGVtZW50cyAke3RoaXMuZWxlbWVudER0eXBlfWApO2lmKGU8MHx8ZT50aGlzLnRlbnNvcnMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgVHJ5aW5nIHRvIGFjY2VzcyBlbGVtZW50ICR7ZX0gaW4gYSBsaXN0IHdpdGggJHt0aGlzLnRlbnNvcnMubGVuZ3RofSBlbGVtZW50cy5gKTtpZih0aGlzLnRlbnNvcnNbZV09PW51bGwpdGhyb3cgbmV3IEVycm9yKGBlbGVtZW50IGF0IGluZGV4ICR7ZX0gaXMgbnVsbC5gKTtRcyh0aGlzLnRlbnNvcnNbZV0uc2hhcGUsdCwiVGVuc29yTGlzdCBzaGFwZSBtaXNtYXRjaDogIik7Y29uc3Qgcj1rYyh0aGlzLmVsZW1lbnRTaGFwZSx0aGlzLnRlbnNvcnMsdCk7cmV0dXJuIEoodGhpcy50ZW5zb3JzW2VdLHIpfXNldEl0ZW0oZSx0KXtpZih0LmR0eXBlIT09dGhpcy5lbGVtZW50RHR5cGUpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRhdGEgdHlwZXM7IG9wIGVsZW1lbnRzICR7dC5kdHlwZX0sIGJ1dCBsaXN0IGVsZW1lbnRzICR7dGhpcy5lbGVtZW50RHR5cGV9YCk7aWYoZTwwfHx0aGlzLm1heE51bUVsZW1lbnRzIT09LTEmJmU+PXRoaXMubWF4TnVtRWxlbWVudHMpdGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gc2V0IGVsZW1lbnQgJHtlfSBpbiBhIGxpc3Qgd2l0aCBtYXggJHt0aGlzLm1heE51bUVsZW1lbnRzfSBlbGVtZW50cy5gKTtRcyh0aGlzLmVsZW1lbnRTaGFwZSx0LnNoYXBlLCJUZW5zb3JMaXN0IHNoYXBlIG1pc21hdGNoOiAiKSxlbih0KSx0aGlzLnRlbnNvcnNbZV0hPW51bGwmJih0aGlzLnRlbnNvcnNbZV0ua2VwdD0hMSksdGhpcy50ZW5zb3JzW2VdPXR9Z2F0aGVyKGUsdCxzKXtpZih0IT09dGhpcy5lbGVtZW50RHR5cGUpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRhdGEgdHlwZXM7IG9wIGVsZW1lbnRzICR7dH0sIGJ1dCBsaXN0IGVsZW1lbnRzICR7dGhpcy5lbGVtZW50RHR5cGV9YCk7UXModGhpcy5lbGVtZW50U2hhcGUscywiVGVuc29yTGlzdCBzaGFwZSBtaXNtYXRjaDogIiksZT1lLnNsaWNlKDAsdGhpcy5zaXplKCkpO2NvbnN0IHI9a2ModGhpcy5lbGVtZW50U2hhcGUsdGhpcy50ZW5zb3JzLHMpO3JldHVybiBlLmxlbmd0aD09PTA/ZXIoW10sWzBdLmNvbmNhdChyKSk6cmUoKCk9Pntjb25zdCBvPWUubWFwKGk9PkoodGhpcy50ZW5zb3JzW2ldLHIpKTtyZXR1cm4gb3MobywwKX0pfWNvbmNhdChlLHQpe2lmKGUmJmUhPT10aGlzLmVsZW1lbnREdHlwZSl0aHJvdyBuZXcgRXJyb3IoYFRlbnNvckxpc3QgZHR5cGUgaXMgJHt0aGlzLmVsZW1lbnREdHlwZX0gYnV0IGNvbmNhdCByZXF1ZXN0ZWQgZHR5cGUgJHtlfWApO1FzKHRoaXMuZWxlbWVudFNoYXBlLHQsIlRlbnNvckxpc3Qgc2hhcGUgbWlzbWF0Y2g6ICIpO2NvbnN0IHM9a2ModGhpcy5lbGVtZW50U2hhcGUsdGhpcy50ZW5zb3JzLHQpO3JldHVybiB0aGlzLnNpemUoKT09PTA/ZXIoW10sWzBdLmNvbmNhdChzKSk6cmUoKCk9Pntjb25zdCByPXRoaXMudGVuc29ycy5tYXAobz0+SihvLHMpKTtyZXR1cm4gV3QociwwKX0pfX1mdW5jdGlvbiBwNihuLGUsdCl7Y29uc3Qgcz1uLmR0eXBlO2lmKG4uc2hhcGUubGVuZ3RoPDEpdGhyb3cgbmV3IEVycm9yKGBUZW5zb3IgbXVzdCBiZSBhdCBsZWFzdCBhIHZlY3RvciwgYnV0IHNhdyBzaGFwZTogJHtuLnNoYXBlfWApO2lmKG4uZHR5cGUhPT10KXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkYXRhIHR5cGVzOyBvcCBlbGVtZW50cyAke24uZHR5cGV9LCBidXQgbGlzdCBlbGVtZW50cyAke3R9YCk7Y29uc3Qgcj1uLnNoYXBlLnNsaWNlKDEpO1FzKHIsZSwiVGVuc29yTGlzdCBzaGFwZSBtaXNtYXRjaDogIik7Y29uc3Qgbz16cyhuKTtyZXR1cm4gbmV3IG1hKG8sZSxzKX1mdW5jdGlvbiBmNihuLGUsdCxzKXtyZXR1cm4gbmV3IG1hKFtdLG4sZSxzKX1mdW5jdGlvbiBtNihuLGUsdCxzKXtpZihlLmxlbmd0aCE9PW4uc2hhcGVbMF0pdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBsZW4oaW5kaWNlcykgPT0gdGVuc29yLnNoYXBlWzBdLCBidXQgc2F3OiAke2UubGVuZ3RofSB2cy4gJHtuLnNoYXBlWzBdfWApO2NvbnN0IHI9TWF0aC5tYXgoLi4uZSk7aWYocyE9bnVsbCYmcyE9PS0xJiZyPj1zKXRocm93IG5ldyBFcnJvcihgTWF4IGluZGV4IG11c3QgYmUgPCBhcnJheSBzaXplICgke3J9ICB2cy4gJHtzfSlgKTtjb25zdCBvPW5ldyBtYShbXSx0LG4uZHR5cGUscyksaT16cyhuLDApO3JldHVybiBlLmZvckVhY2goKGEsbCk9PntvLnNldEl0ZW0oYSxpW2xdKX0pLG99ZnVuY3Rpb24gZzYobixlLHQpe2xldCBzPTA7Y29uc3Qgcj1lLm1hcChoPT4ocys9aCxzKSk7aWYocyE9PW4uc2hhcGVbMF0pdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBzdW0gb2YgbGVuZ3RocyB0byBiZSBlcXVhbCB0bwogICAgICAgICAgdGVuc29yLnNoYXBlWzBdLCBidXQgc3VtIG9mIGxlbmd0aHMgaXMKICAgICAgICAke3N9LCBhbmQgdGVuc29yJ3Mgc2hhcGUgaXM6ICR7bi5zaGFwZX1gKTtjb25zdCBvPW4uc2hhcGUuc2xpY2UoMSksaT1nMShvLHQpLGE9cz09PTA/MDpuLnNpemUvcyxsPXJlKCgpPT57Y29uc3QgaD1bXTtuPUoobixbMSxzLGFdKTtmb3IobGV0IHA9MDtwPGUubGVuZ3RoOysrcCl7Y29uc3QgZz1bMCxwPT09MD8wOnJbcC0xXSwwXSx5PVsxLGVbcF0sYV07aFtwXT1KKHN0KG4sZyx5KSxpKX1yZXR1cm4gbi5kaXNwb3NlKCksaH0pLGM9bmV3IG1hKFtdLHQsbi5kdHlwZSxlLmxlbmd0aCk7Zm9yKGxldCBoPTA7aDxsLmxlbmd0aDtoKyspYy5zZXRJdGVtKGgsbFtoXSk7cmV0dXJuIGN9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgeTY9YXN5bmMobixlLHQpPT57c3dpdGNoKG4ub3Ape2Nhc2UiSWYiOmNhc2UiU3RhdGVsZXNzSWYiOntjb25zdCBzPUkoInRoZW5CcmFuY2giLG4sZSx0KSxyPUkoImVsc2VCcmFuY2giLG4sZSx0KSxvPUkoImNvbmQiLG4sZSx0KSxpPUkoImFyZ3MiLG4sZSx0KTtyZXR1cm4oYXdhaXQgby5kYXRhKCkpWzBdP3QuZnVuY3Rpb25NYXBbc10uZXhlY3V0ZUZ1bmN0aW9uQXN5bmMoaSx0LnRlbnNvckFycmF5TWFwLHQudGVuc29yTGlzdE1hcCk6dC5mdW5jdGlvbk1hcFtyXS5leGVjdXRlRnVuY3Rpb25Bc3luYyhpLHQudGVuc29yQXJyYXlNYXAsdC50ZW5zb3JMaXN0TWFwKX1jYXNlIldoaWxlIjpjYXNlIlN0YXRlbGVzc1doaWxlIjp7Y29uc3Qgcz1JKCJib2R5IixuLGUsdCkscj1JKCJjb25kIixuLGUsdCksbz1JKCJhcmdzIixuLGUsdCksaT1hd2FpdCB0LmZ1bmN0aW9uTWFwW3JdLmV4ZWN1dGVGdW5jdGlvbkFzeW5jKG8sdC50ZW5zb3JBcnJheU1hcCx0LnRlbnNvckxpc3RNYXApLGE9by5tYXAoaD0+aC5pZCk7bGV0IGw9YXdhaXQgaVswXS5kYXRhKCk7aS5mb3JFYWNoKGg9PnshaC5rZXB0JiZhLmluZGV4T2YoaC5pZCk9PT0tMSYmaC5kaXNwb3NlKCl9KTtsZXQgYz1vO2Zvcig7bFswXTspe2NvbnN0IGg9YztjPWF3YWl0IHQuZnVuY3Rpb25NYXBbc10uZXhlY3V0ZUZ1bmN0aW9uQXN5bmMoYyx0LnRlbnNvckFycmF5TWFwLHQudGVuc29yTGlzdE1hcCk7Y29uc3QgcD1jLm1hcChnPT5nLmlkKTtoLmZvckVhY2goZz0+eyFnLmtlcHQmJmEuaW5kZXhPZihnLmlkKT09PS0xJiZwLmluZGV4T2YoZy5pZCk9PT0tMSYmZy5kaXNwb3NlKCl9KTtjb25zdCBmPWF3YWl0IHQuZnVuY3Rpb25NYXBbcl0uZXhlY3V0ZUZ1bmN0aW9uQXN5bmMoYyx0LnRlbnNvckFycmF5TWFwLHQudGVuc29yTGlzdE1hcCk7bD1hd2FpdCBmWzBdLmRhdGEoKSxmLmZvckVhY2goZz0+eyFnLmtlcHQmJmEuaW5kZXhPZihnLmlkKT09PS0xJiZwLmluZGV4T2YoZy5pZCk9PT0tMSYmZy5kaXNwb3NlKCl9KX1yZXR1cm4gY31jYXNlIkxvb3BDb25kIjp7Y29uc3Qgcz1JKCJwcmVkIixuLGUsdCk7cmV0dXJuW2hvKHMpXX1jYXNlIlN3aXRjaCI6e2NvbnN0IHM9SSgicHJlZCIsbixlLHQpO2xldCByPUkoImRhdGEiLG4sZSx0KTtyZXR1cm4gci5rZXB0fHwocj1obyhyKSksKGF3YWl0IHMuZGF0YSgpKVswXT9bdm9pZCAwLHJdOltyLHZvaWQgMF19Y2FzZSJNZXJnZSI6e2NvbnN0IHM9bi5pbnB1dE5hbWVzLmZpbmQocj0+Ym4ocixlLHQpIT09dm9pZCAwKTtpZihzKXtjb25zdCByPWJuKHMsZSx0KTtyZXR1cm5baG8ocildfXJldHVybn1jYXNlIkVudGVyIjp7Y29uc3Qgcz1JKCJmcmFtZU5hbWUiLG4sZSx0KSxyPUkoInRlbnNvciIsbixlLHQpO3JldHVybiB0LmVudGVyRnJhbWUocyksW2hvKHIpXX1jYXNlIkV4aXQiOntjb25zdCBzPUkoInRlbnNvciIsbixlLHQpO3JldHVybiB0LmV4aXRGcmFtZSgpLFtobyhzKV19Y2FzZSJOZXh0SXRlcmF0aW9uIjp7Y29uc3Qgcz1JKCJ0ZW5zb3IiLG4sZSx0KTtyZXR1cm4gdC5uZXh0SXRlcmF0aW9uKCksW2hvKHMpXX1jYXNlIlRlbnNvckFycmF5VjMiOntjb25zdCBzPUkoInNpemUiLG4sZSx0KSxyPUkoImR0eXBlIixuLGUsdCksbz1JKCJlbGVtZW50U2hhcGUiLG4sZSx0KSxpPUkoImR5bmFtaWNTaXplIixuLGUsdCksYT1JKCJjbGVhckFmdGVyUmVhZCIsbixlLHQpLGw9SSgiaWRlbnRpY2FsRWxlbWVudFNoYXBlcyIsbixlLHQpLGM9SSgibmFtZSIsbixlLHQpLGg9bmV3IGg2KGMscixzLG8sbCxpLGEpO3JldHVybiB0LmFkZFRlbnNvckFycmF5KGgpLFtoLmlkVGVuc29yLE1lKDEpXX1jYXNlIlRlbnNvckFycmF5V3JpdGVWMyI6e2NvbnN0IHM9SSgidGVuc29yQXJyYXlJZCIsbixlLHQpLHI9SSgiaW5kZXgiLG4sZSx0KSxvPUkoInRlbnNvciIsbixlLHQpLGk9dC5nZXRUZW5zb3JBcnJheShzLmlkKTtyZXR1cm4gaS53cml0ZShyLG8pLFtpLmlkVGVuc29yXX1jYXNlIlRlbnNvckFycmF5UmVhZFYzIjp7Y29uc3Qgcz1JKCJ0ZW5zb3JBcnJheUlkIixuLGUsdCkscj1JKCJpbmRleCIsbixlLHQpO3JldHVyblt0LmdldFRlbnNvckFycmF5KHMuaWQpLnJlYWQocildfWNhc2UiVGVuc29yQXJyYXlHYXRoZXJWMyI6e2NvbnN0IHM9SSgidGVuc29yQXJyYXlJZCIsbixlLHQpLHI9SSgiaW5kaWNlcyIsbixlLHQpLG89SSgiZHR5cGUiLG4sZSx0KTtyZXR1cm5bdC5nZXRUZW5zb3JBcnJheShzLmlkKS5nYXRoZXIocixvKV19Y2FzZSJUZW5zb3JBcnJheVNjYXR0ZXJWMyI6e2NvbnN0IHM9SSgidGVuc29yQXJyYXlJZCIsbixlLHQpLHI9SSgiaW5kaWNlcyIsbixlLHQpLG89SSgidGVuc29yIixuLGUsdCksaT10LmdldFRlbnNvckFycmF5KHMuaWQpO3JldHVybiBpLnNjYXR0ZXIocixvKSxbaS5pZFRlbnNvcl19Y2FzZSJUZW5zb3JBcnJheUNvbmNhdFYzIjp7Y29uc3Qgcz1JKCJ0ZW5zb3JBcnJheUlkIixuLGUsdCkscj10LmdldFRlbnNvckFycmF5KHMuaWQpLG89SSgiZHR5cGUiLG4sZSx0KTtyZXR1cm5bci5jb25jYXQobyldfWNhc2UiVGVuc29yQXJyYXlTcGxpdFYzIjp7Y29uc3Qgcz1JKCJ0ZW5zb3JBcnJheUlkIixuLGUsdCkscj1JKCJ0ZW5zb3IiLG4sZSx0KSxvPUkoImxlbmd0aHMiLG4sZSx0KSxpPXQuZ2V0VGVuc29yQXJyYXkocy5pZCk7cmV0dXJuIGkuc3BsaXQobyxyKSxbaS5pZFRlbnNvcl19Y2FzZSJUZW5zb3JBcnJheVNpemVWMyI6e2NvbnN0IHM9SSgidGVuc29yQXJyYXlJZCIsbixlLHQpLHI9dC5nZXRUZW5zb3JBcnJheShzLmlkKTtyZXR1cm5bTWUoci5zaXplKCksImludDMyIildfWNhc2UiVGVuc29yQXJyYXlDbG9zZVYzIjp7Y29uc3Qgcz1JKCJ0ZW5zb3JBcnJheUlkIixuLGUsdCkscj10LmdldFRlbnNvckFycmF5KHMuaWQpO3JldHVybiByLmNsZWFyQW5kQ2xvc2UoKSxbci5pZFRlbnNvcl19Y2FzZSJUZW5zb3JMaXN0U2V0SXRlbSI6e2NvbnN0IHM9SSgidGVuc29yTGlzdElkIixuLGUsdCkscj1JKCJpbmRleCIsbixlLHQpLG89SSgidGVuc29yIixuLGUsdCksaT10LmdldFRlbnNvckxpc3Qocy5pZCk7cmV0dXJuIGkuc2V0SXRlbShyLG8pLFtpLmlkVGVuc29yXX1jYXNlIlRlbnNvckxpc3RHZXRJdGVtIjp7Y29uc3Qgcz1JKCJ0ZW5zb3JMaXN0SWQiLG4sZSx0KSxyPUkoImluZGV4IixuLGUsdCksbz1JKCJlbGVtZW50U2hhcGUiLG4sZSx0KSxpPUkoImVsZW1lbnREVHlwZSIsbixlLHQpO3JldHVyblt0LmdldFRlbnNvckxpc3Qocy5pZCkuZ2V0SXRlbShyLG8saSldfWNhc2UiVGVuc29yTGlzdFNjYXR0ZXJWMiI6Y2FzZSJUZW5zb3JMaXN0U2NhdHRlciI6e2NvbnN0IHM9SSgiaW5kaWNlcyIsbixlLHQpLHI9SSgidGVuc29yIixuLGUsdCksbz1JKCJlbGVtZW50U2hhcGUiLG4sZSx0KSxpPUkoIm51bUVsZW1lbnRzIixuLGUsdCksYT1tNihyLHMsbyxpKTtyZXR1cm4gdC5hZGRUZW5zb3JMaXN0KGEpLFthLmlkVGVuc29yXX1jYXNlIlRlbnNvckxpc3RSZXNlcnZlIjpjYXNlIkVtcHR5VGVuc29yTGlzdCI6e2NvbnN0IHM9SSgiZWxlbWVudFNoYXBlIixuLGUsdCkscj1JKCJlbGVtZW50RFR5cGUiLG4sZSx0KTtsZXQgbztuLm9wPT09IlRlbnNvckxpc3RSZXNlcnZlIj9vPSJudW1FbGVtZW50cyI6bz0ibWF4TnVtRWxlbWVudHMiO2NvbnN0IGk9SShvLG4sZSx0KSxhPW4ub3A9PT0iVGVuc29yTGlzdFJlc2VydmUiPy0xOmksbD1mNihzLHIsaSxhKTtyZXR1cm4gdC5hZGRUZW5zb3JMaXN0KGwpLFtsLmlkVGVuc29yXX1jYXNlIlRlbnNvckxpc3RHYXRoZXIiOntjb25zdCBzPUkoInRlbnNvckxpc3RJZCIsbixlLHQpLHI9SSgiaW5kaWNlcyIsbixlLHQpLG89SSgiZWxlbWVudFNoYXBlIixuLGUsdCksaT1JKCJlbGVtZW50RFR5cGUiLG4sZSx0KTtyZXR1cm5bdC5nZXRUZW5zb3JMaXN0KHMuaWQpLmdhdGhlcihyLGksbyldfWNhc2UiVGVuc29yTGlzdFN0YWNrIjp7Y29uc3Qgcz1JKCJ0ZW5zb3JMaXN0SWQiLG4sZSx0KSxyPUkoImVsZW1lbnRTaGFwZSIsbixlLHQpLG89SSgiZWxlbWVudERUeXBlIixuLGUsdCksaT1JKCJudW1FbGVtZW50cyIsbixlLHQpO3JldHVyblt0LmdldFRlbnNvckxpc3Qocy5pZCkuc3RhY2socixvLGkpXX1jYXNlIlRlbnNvckxpc3RGcm9tVGVuc29yIjp7Y29uc3Qgcz1JKCJ0ZW5zb3IiLG4sZSx0KSxyPUkoImVsZW1lbnRTaGFwZSIsbixlLHQpLG89SSgiZWxlbWVudERUeXBlIixuLGUsdCksaT1wNihzLHIsbyk7cmV0dXJuIHQuYWRkVGVuc29yTGlzdChpKSxbaS5pZFRlbnNvcl19Y2FzZSJUZW5zb3JMaXN0Q29uY2F0IjpjYXNlIlRlbnNvckxpc3RDb25jYXRWMiI6e2NvbnN0IHM9SSgidGVuc29yTGlzdElkIixuLGUsdCkscj10LmdldFRlbnNvckxpc3Qocy5pZCksbz1JKCJkdHlwZSIsbixlLHQpLGk9SSgiZWxlbWVudFNoYXBlIixuLGUsdCk7cmV0dXJuW3IuY29uY2F0KG8saSldfWNhc2UiVGVuc29yTGlzdFB1c2hCYWNrIjp7Y29uc3Qgcz1JKCJ0ZW5zb3JMaXN0SWQiLG4sZSx0KSxyPUkoInRlbnNvciIsbixlLHQpLG89dC5nZXRUZW5zb3JMaXN0KHMuaWQpO3JldHVybiBvLnB1c2hCYWNrKHIpLFtvLmlkVGVuc29yXX1jYXNlIlRlbnNvckxpc3RQb3BCYWNrIjp7Y29uc3Qgcz1JKCJ0ZW5zb3JMaXN0SWQiLG4sZSx0KSxyPUkoImVsZW1lbnRTaGFwZSIsbixlLHQpLG89SSgiZWxlbWVudERUeXBlIixuLGUsdCk7cmV0dXJuW3QuZ2V0VGVuc29yTGlzdChzLmlkKS5wb3BCYWNrKHIsbyldfWNhc2UiVGVuc29yTGlzdFNwbGl0Ijp7Y29uc3Qgcz1JKCJ0ZW5zb3IiLG4sZSx0KSxyPUkoImVsZW1lbnRTaGFwZSIsbixlLHQpLG89SSgibGVuZ3RocyIsbixlLHQpLGk9ZzYocyxvLHIpO3JldHVybiB0LmFkZFRlbnNvckxpc3QoaSksW2kuaWRUZW5zb3JdfWNhc2UiVGVuc29yTGlzdExlbmd0aCI6e2NvbnN0IHM9SSgidGVuc29yTGlzdElkIixuLGUsdCkscj10LmdldFRlbnNvckxpc3Qocy5pZCk7cmV0dXJuW01lKHIuc2l6ZSgpLCJpbnQzMiIpXX1jYXNlIlRlbnNvckxpc3RSZXNpemUiOntjb25zdCBzPUkoInRlbnNvckxpc3RJZCIsbixlLHQpLHI9SSgic2l6ZSIsbixlLHQpLGk9dC5nZXRUZW5zb3JMaXN0KHMuaWQpLnJlc2l6ZShyKTtyZXR1cm4gdC5hZGRUZW5zb3JMaXN0KGkpLFtpLmlkVGVuc29yXX1kZWZhdWx0OnRocm93IFR5cGVFcnJvcihgTm9kZSB0eXBlICR7bi5vcH0gaXMgbm90IGltcGxlbWVudGVkYCl9fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBnQyhuLGUsdCl7Y29uc3RbcyxyXT1JKCJmdXNlZE9wcyIsbixlLHQpLG89cz09PSJiaWFzYWRkIixpPSFvLGE9cj09PSJwcmVsdSIsbD1zPT09ImZ1c2VkYmF0Y2hub3JtIixjPUkoIm51bUFyZ3MiLG4sZSx0KTtpZihvKXtpZihhJiZjIT09Mil0aHJvdyBuZXcgRXJyb3IoIkZ1c2VkQ29udjJkIGFuZCBEZXB0aHdpc2VDb252MmQgd2l0aCBCaWFzQWRkIGFuZCBQcmVsdSBtdXN0IGhhdmUgdHdvIGV4dHJhIGFyZ3VtZW50czogYmlhcyBhbmQgYWxwaGEuIik7aWYoIWEmJm8mJmMhPT0xKXRocm93IG5ldyBFcnJvcigiRnVzZWRDb252MmQgYW5kIERlcHRod2lzZUNvbnYyZCB3aXRoIEJpYXNBZGQgbXVzdCBoYXZlIG9uZSBleHRyYSBhcmd1bWVudDogYmlhcy4iKX1pZihsKXRocm93IG5ldyBFcnJvcigiRnVzZWRDb252MmQgYW5kIERlcHRod2lzZUNvbnYyZCB3aXRoIEZ1c2VkQmF0Y2hOb3JtIGlzIG5vdCBzdXBwb3J0ZWQiKTtjb25zdCBoPUkoInN0cmlkZXMiLG4sZSx0KSxwPXdmKG4sZSx0KSxmPUkoImRhdGFGb3JtYXQiLG4sZSx0KS50b1VwcGVyQ2FzZSgpLGc9SSgiZGlsYXRpb25zIixuLGUsdCk7bGV0W3ksd109SSgiYXJncyIsbixlLHQpO2kmJih3PXkseT12b2lkIDApO2NvbnN0IGI9SSgibGVha3lyZWx1QWxwaGEiLG4sZSx0KTtyZXR1cm57c3RyaWRlOmgscGFkOnAsZGF0YUZvcm1hdDpmLGRpbGF0aW9uczpnLGJpYXNBcmc6eSxwcmVsdUFyZzp3LGFjdGl2YXRpb25GdW5jOnIsbGVha3lyZWx1QWxwaGE6Yn19Y29uc3QgeDY9KG4sZSx0LHM9JG4pPT57c3dpdGNoKG4ub3Ape2Nhc2UiQ29udjFEIjp7Y29uc3Qgcj1JKCJzdHJpZGUiLG4sZSx0KSxvPUkoInBhZCIsbixlLHQpLGk9SSgiZGF0YUZvcm1hdCIsbixlLHQpLnRvVXBwZXJDYXNlKCksYT1JKCJkaWxhdGlvbiIsbixlLHQpO3JldHVybltzLmNvbnYxZChJKCJ4IixuLGUsdCksSSgiZmlsdGVyIixuLGUsdCkscixvLGksYSldfWNhc2UiQ29udjJEIjp7Y29uc3Qgcj1JKCJzdHJpZGVzIixuLGUsdCksbz13ZihuLGUsdCksaT1JKCJkYXRhRm9ybWF0IixuLGUsdCkudG9VcHBlckNhc2UoKSxhPUkoImRpbGF0aW9ucyIsbixlLHQpO3JldHVybltzLmNvbnYyZChJKCJ4IixuLGUsdCksSSgiZmlsdGVyIixuLGUsdCksW3JbMV0sclsyXV0sbyxpLFthWzFdLGFbMl1dKV19Y2FzZSJfRnVzZWRDb252MkQiOntjb25zdHtzdHJpZGU6cixwYWQ6byxkYXRhRm9ybWF0OmksZGlsYXRpb25zOmEsYmlhc0FyZzpsLHByZWx1QXJnOmMsYWN0aXZhdGlvbkZ1bmM6aCxsZWFreXJlbHVBbHBoYTpwfT1nQyhuLGUsdCk7cmV0dXJuW3MuZnVzZWQuY29udjJkKHt4OkkoIngiLG4sZSx0KSxmaWx0ZXI6SSgiZmlsdGVyIixuLGUsdCksc3RyaWRlczpbclsxXSxyWzJdXSxwYWQ6byxkYXRhRm9ybWF0OmksZGlsYXRpb25zOlthWzFdLGFbMl1dLGJpYXM6bCxhY3RpdmF0aW9uOmgscHJlbHVBY3RpdmF0aW9uV2VpZ2h0czpjLGxlYWt5cmVsdUFscGhhOnB9KV19Y2FzZSJGdXNlZERlcHRod2lzZUNvbnYyZE5hdGl2ZSI6e2NvbnN0e3N0cmlkZTpyLHBhZDpvLGRhdGFGb3JtYXQ6aSxkaWxhdGlvbnM6YSxiaWFzQXJnOmwscHJlbHVBcmc6YyxhY3RpdmF0aW9uRnVuYzpoLGxlYWt5cmVsdUFscGhhOnB9PWdDKG4sZSx0KTtyZXR1cm5bcy5mdXNlZC5kZXB0aHdpc2VDb252MmQoe3g6SSgieCIsbixlLHQpLGZpbHRlcjpJKCJmaWx0ZXIiLG4sZSx0KSxzdHJpZGVzOltyWzFdLHJbMl1dLHBhZDpvLGRhdGFGb3JtYXQ6aSxkaWxhdGlvbnM6W2FbMV0sYVsyXV0sYmlhczpsLGFjdGl2YXRpb246aCxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOmMsbGVha3lyZWx1QWxwaGE6cH0pXX1jYXNlIkNvbnYyREJhY2twcm9wSW5wdXQiOmNhc2UiQ29udjJkVHJhbnNwb3NlIjp7Y29uc3Qgcj1JKCJvdXRwdXRTaGFwZSIsbixlLHQpLG89SSgic3RyaWRlcyIsbixlLHQpLGk9d2YobixlLHQpO3JldHVybltzLmNvbnYyZFRyYW5zcG9zZShJKCJ4IixuLGUsdCksSSgiZmlsdGVyIixuLGUsdCkscixbb1sxXSxvWzJdXSxpKV19Y2FzZSJEZXB0aHdpc2VDb252MmROYXRpdmUiOmNhc2UiRGVwdGh3aXNlQ29udjJkIjp7Y29uc3Qgcj1JKCJzdHJpZGVzIixuLGUsdCksbz13ZihuLGUsdCksaT1JKCJkaWxhdGlvbnMiLG4sZSx0KSxhPUkoImRhdGFGb3JtYXQiLG4sZSx0KS50b1VwcGVyQ2FzZSgpO3JldHVybltzLmRlcHRod2lzZUNvbnYyZChJKCJpbnB1dCIsbixlLHQpLEkoImZpbHRlciIsbixlLHQpLFtyWzFdLHJbMl1dLG8sYSxbaVsxXSxpWzJdXSldfWNhc2UiQ29udjNEIjp7Y29uc3Qgcj1JKCJzdHJpZGVzIixuLGUsdCksbz1JKCJwYWQiLG4sZSx0KSxpPUkoImRhdGFGb3JtYXQiLG4sZSx0KS50b1VwcGVyQ2FzZSgpLGE9SSgiZGlsYXRpb25zIixuLGUsdCk7cmV0dXJuW3MuY29udjNkKEkoIngiLG4sZSx0KSxJKCJmaWx0ZXIiLG4sZSx0KSxbclsxXSxyWzJdLHJbM11dLG8saSxbYVsxXSxhWzJdLGFbM11dKV19Y2FzZSJBdmdQb29sIjp7Y29uc3Qgcj1JKCJzdHJpZGVzIixuLGUsdCksbz1JKCJwYWQiLG4sZSx0KSxpPUkoImtlcm5lbFNpemUiLG4sZSx0KTtyZXR1cm5bcy5hdmdQb29sKEkoIngiLG4sZSx0KSxbaVsxXSxpWzJdXSxbclsxXSxyWzJdXSxvKV19Y2FzZSJNYXhQb29sIjp7Y29uc3Qgcj1JKCJzdHJpZGVzIixuLGUsdCksbz1JKCJwYWQiLG4sZSx0KSxpPUkoImtlcm5lbFNpemUiLG4sZSx0KTtyZXR1cm5bcy5tYXhQb29sKEkoIngiLG4sZSx0KSxbaVsxXSxpWzJdXSxbclsxXSxyWzJdXSxvKV19Y2FzZSJNYXhQb29sV2l0aEFyZ21heCI6e2NvbnN0IHI9SSgic3RyaWRlcyIsbixlLHQpLG89SSgicGFkIixuLGUsdCksaT1JKCJrZXJuZWxTaXplIixuLGUsdCksYT1JKCJpbmNsdWRlQmF0Y2hJbkluZGV4IixuLGUsdCkse3Jlc3VsdDpsLGluZGV4ZXM6Y309cy5tYXhQb29sV2l0aEFyZ21heChJKCJ4IixuLGUsdCksW2lbMV0saVsyXV0sW3JbMV0sclsyXV0sbyxhKTtyZXR1cm5bbCxjXX1jYXNlIkF2Z1Bvb2wzRCI6e2NvbnN0IHI9SSgic3RyaWRlcyIsbixlLHQpLG89SSgicGFkIixuLGUsdCksaT1JKCJrZXJuZWxTaXplIixuLGUsdCk7cmV0dXJuW3MuYXZnUG9vbDNkKEkoIngiLG4sZSx0KSxbaVsxXSxpWzJdLGlbM11dLFtyWzFdLHJbMl0sclszXV0sbyldfWNhc2UiTWF4UG9vbDNEIjp7Y29uc3Qgcj1JKCJzdHJpZGVzIixuLGUsdCksbz1JKCJwYWQiLG4sZSx0KSxpPUkoImtlcm5lbFNpemUiLG4sZSx0KTtyZXR1cm5bcy5tYXhQb29sM2QoSSgieCIsbixlLHQpLFtpWzFdLGlbMl0saVszXV0sW3JbMV0sclsyXSxyWzNdXSxvKV19Y2FzZSJEaWxhdGlvbjJEIjp7Y29uc3Qgcj1JKCJzdHJpZGVzIixuLGUsdCksbz1JKCJwYWQiLG4sZSx0KSxpPUkoImRpbGF0aW9ucyIsbixlLHQpLGE9clsxXSxsPXJbMl0sYz1pWzFdLGg9aVsyXTtyZXR1cm5bcy5kaWxhdGlvbjJkKEkoIngiLG4sZSx0KSxJKCJmaWx0ZXIiLG4sZSx0KSxbYSxsXSxvLFtjLGhdLCJOSFdDIildfWRlZmF1bHQ6dGhyb3cgVHlwZUVycm9yKGBOb2RlIHR5cGUgJHtuLm9wfSBpcyBub3QgaW1wbGVtZW50ZWRgKX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGI2PShuLGUsdCxzPSRuKT0+e3N3aXRjaChuLm9wKXtjYXNlIkZpbGwiOntjb25zdCByPUkoInNoYXBlIixuLGUsdCksbz1JKCJkdHlwZSIsbixlLHQpLGk9SSgidmFsdWUiLG4sZSx0KTtyZXR1cm5bcy5maWxsKHIsaSxvKV19Y2FzZSJMaW5TcGFjZSI6e2NvbnN0IHI9SSgic3RhcnQiLG4sZSx0KSxvPUkoInN0b3AiLG4sZSx0KSxpPUkoIm51bSIsbixlLHQpO3JldHVybltzLmxpbnNwYWNlKHIsbyxpKV19Y2FzZSJNdWx0aW5vbWlhbCI6e2NvbnN0IHI9SSgibG9naXRzIixuLGUsdCksbz1JKCJudW1TYW1wbGVzIixuLGUsdCksaT1JKCJzZWVkIixuLGUsdCk7cmV0dXJuW3MubXVsdGlub21pYWwocixvLGkpXX1jYXNlIk9uZUhvdCI6e2NvbnN0IHI9SSgiaW5kaWNlcyIsbixlLHQpLG89SSgiZGVwdGgiLG4sZSx0KSxpPUkoIm9uVmFsdWUiLG4sZSx0KSxhPUkoIm9mZlZhbHVlIixuLGUsdCksbD1JKCJkdHlwZSIsbixlLHQpO3JldHVybltzLm9uZUhvdChyLG8saSxhLGwpXX1jYXNlIk9uZXMiOnJldHVybltzLm9uZXMoSSgic2hhcGUiLG4sZSx0KSxJKCJkdHlwZSIsbixlLHQpKV07Y2FzZSJPbmVzTGlrZSI6cmV0dXJuW3Mub25lc0xpa2UoSSgieCIsbixlLHQpKV07Y2FzZSJSYW5kb21TdGFuZGFyZE5vcm1hbCI6cmV0dXJuW3MucmFuZG9tU3RhbmRhcmROb3JtYWwoSSgic2hhcGUiLG4sZSx0KSxJKCJkdHlwZSIsbixlLHQpLEkoInNlZWQiLG4sZSx0KSldO2Nhc2UiUmFuZG9tVW5pZm9ybSI6cmV0dXJuW3MucmFuZG9tVW5pZm9ybShJKCJzaGFwZSIsbixlLHQpLEkoIm1pbnZhbCIsbixlLHQpLEkoIm1heHZhbCIsbixlLHQpLEkoImR0eXBlIixuLGUsdCkpXTtjYXNlIlJhbmRvbVVuaWZvcm1JbnQiOnJldHVybltzLnJhbmRvbVVuaWZvcm1JbnQoSSgic2hhcGUiLG4sZSx0KSxJKCJtaW52YWwiLG4sZSx0KSxJKCJtYXh2YWwiLG4sZSx0KSxJKCJzZWVkIixuLGUsdCkpXTtjYXNlIlJhbmdlIjp7Y29uc3Qgcj1JKCJzdGFydCIsbixlLHQpLG89SSgic3RvcCIsbixlLHQpLGk9SSgic3RlcCIsbixlLHQpO3JldHVybltzLnJhbmdlKHIsbyxpLEkoImR0eXBlIixuLGUsdCkpXX1jYXNlIlRydW5jYXRlZE5vcm1hbCI6e2NvbnN0IHI9SSgic2hhcGUiLG4sZSx0KSxvPUkoIm1lYW4iLG4sZSx0KSxpPUkoInN0ZERldiIsbixlLHQpLGE9SSgic2VlZCIsbixlLHQpO3JldHVybltzLnRydW5jYXRlZE5vcm1hbChyLG8saSxJKCJkdHlwZSIsbixlLHQpLGEpXX1jYXNlIlplcm9zIjpyZXR1cm5bcy56ZXJvcyhJKCJzaGFwZSIsbixlLHQpLEkoImR0eXBlIixuLGUsdCkpXTtjYXNlIlplcm9zTGlrZSI6cmV0dXJuW3MuemVyb3NMaWtlKEkoIngiLG4sZSx0KSldO2RlZmF1bHQ6dGhyb3cgVHlwZUVycm9yKGBOb2RlIHR5cGUgJHtuLm9wfSBpcyBub3QgaW1wbGVtZW50ZWRgKX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFMwKG4sZSx0KXtjb25zdCBzPUkoImJveGVzIixuLGUsdCkscj1JKCJzY29yZXMiLG4sZSx0KSxvPUkoIm1heE91dHB1dFNpemUiLG4sZSx0KSxpPUkoImlvdVRocmVzaG9sZCIsbixlLHQpLGE9SSgic2NvcmVUaHJlc2hvbGQiLG4sZSx0KSxsPUkoInNvZnRObXNTaWdtYSIsbixlLHQpO3JldHVybntib3hlczpzLHNjb3JlczpyLG1heE91dHB1dFNpemU6byxpb3VUaHJlc2hvbGQ6aSxzY29yZVRocmVzaG9sZDphLHNvZnRObXNTaWdtYTpsfX1jb25zdCB3Nj1hc3luYyhuLGUsdCxzLHI9JG4pPT57c3dpdGNoKG4ub3Ape2Nhc2UiTm9uTWF4U3VwcHJlc3Npb25WNSI6e2NvbnN0e2JveGVzOm8sc2NvcmVzOmksbWF4T3V0cHV0U2l6ZTphLGlvdVRocmVzaG9sZDpsLHNjb3JlVGhyZXNob2xkOmMsc29mdE5tc1NpZ21hOmh9PVMwKG4sZSx0KSxwPWF3YWl0IHIuaW1hZ2Uubm9uTWF4U3VwcHJlc3Npb25XaXRoU2NvcmVBc3luYyhvLGksYSxsLGMsaCk7cmV0dXJuW3Auc2VsZWN0ZWRJbmRpY2VzLHAuc2VsZWN0ZWRTY29yZXNdfWNhc2UiTm9uTWF4U3VwcHJlc3Npb25WNCI6e2NvbnN0e2JveGVzOm8sc2NvcmVzOmksbWF4T3V0cHV0U2l6ZTphLGlvdVRocmVzaG9sZDpsLHNjb3JlVGhyZXNob2xkOmN9PVMwKG4sZSx0KSxoPUkoInBhZFRvTWF4T3V0cHV0U2l6ZSIsbixlLHQpLHA9YXdhaXQgci5pbWFnZS5ub25NYXhTdXBwcmVzc2lvblBhZGRlZEFzeW5jKG8saSxhLGwsYyxoKTtyZXR1cm5bcC5zZWxlY3RlZEluZGljZXMscC52YWxpZE91dHB1dHNdfWNhc2UiTm9uTWF4U3VwcHJlc3Npb25WMyI6Y2FzZSJOb25NYXhTdXBwcmVzc2lvblYyIjp7Y29uc3R7Ym94ZXM6byxzY29yZXM6aSxtYXhPdXRwdXRTaXplOmEsaW91VGhyZXNob2xkOmwsc2NvcmVUaHJlc2hvbGQ6Y309UzAobixlLHQpO3JldHVyblthd2FpdCByLmltYWdlLm5vbk1heFN1cHByZXNzaW9uQXN5bmMobyxpLGEsbCxjKV19Y2FzZSJXaGVyZSI6e2NvbnN0IG89ci5jYXN0KEkoImNvbmRpdGlvbiIsbixlLHQpLCJib29sIiksaT1bYXdhaXQgci53aGVyZUFzeW5jKG8pXTtyZXR1cm4gby5kaXNwb3NlKCksaX1jYXNlIkxpc3REaWZmIjpyZXR1cm4gci5zZXRkaWZmMWRBc3luYyhJKCJ4IixuLGUsdCksSSgieSIsbixlLHQpKTtkZWZhdWx0OnRocm93IFR5cGVFcnJvcihgTm9kZSB0eXBlICR7bi5vcH0gaXMgbm90IGltcGxlbWVudGVkYCl9fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB2Nj0obixlLHQscz0kbik9Pntzd2l0Y2gobi5vcCl7Y2FzZSJMb3dlckJvdW5kIjp7Y29uc3Qgcj1JKCJzb3J0ZWRTZXF1ZW5jZSIsbixlLHQpLG89SSgidmFsdWVzIixuLGUsdCk7cmV0dXJuW3MubG93ZXJCb3VuZChyLG8pXX1jYXNlIlRvcEtWMiI6e2NvbnN0IHI9SSgieCIsbixlLHQpLG89SSgiayIsbixlLHQpLGk9SSgic29ydGVkIixuLGUsdCksYT1zLnRvcGsocixvLGkpO3JldHVyblthLnZhbHVlcyxhLmluZGljZXNdfWNhc2UiVXBwZXJCb3VuZCI6e2NvbnN0IHI9SSgic29ydGVkU2VxdWVuY2UiLG4sZSx0KSxvPUkoInZhbHVlcyIsbixlLHQpO3JldHVybltzLnVwcGVyQm91bmQocixvKV19Y2FzZSJVbmlxdWUiOntjb25zdCByPUkoIngiLG4sZSx0KSxvPXMudW5pcXVlKHIpO3JldHVybltvLnZhbHVlcyxvLmluZGljZXNdfWNhc2UiVW5pcXVlVjIiOntjb25zdCByPUkoIngiLG4sZSx0KSxvPUkoImF4aXMiLG4sZSx0KSxpPXMudW5pcXVlKHIsbyk7cmV0dXJuW2kudmFsdWVzLGkuaW5kaWNlc119ZGVmYXVsdDp0aHJvdyBUeXBlRXJyb3IoYE5vZGUgdHlwZSAke24ub3B9IGlzIG5vdCBpbXBsZW1lbnRlZGApfX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgUzY9KG4sZSx0LHM9JG4pPT57c3dpdGNoKG4ub3Ape2Nhc2UiQ29uc3QiOnJldHVybiBlW24ubmFtZV07Y2FzZSJQbGFjZWhvbGRlcldpdGhEZWZhdWx0Ijpjb25zdCByPUkoImRlZmF1bHQiLG4sZSx0KTtyZXR1cm5bYm4obi5uYW1lLGUsdCl8fHJdO2Nhc2UiUGxhY2Vob2xkZXIiOnJldHVybltibihuLm5hbWUsZSx0KV07Y2FzZSJJZGVudGl0eSI6Y2FzZSJTdG9wR3JhZGllbnQiOmNhc2UiRmFrZVF1YW50V2l0aE1pbk1heFZhcnMiOntjb25zdCBoPUkoIngiLG4sZSx0KTtyZXR1cm5baG8oaCldfWNhc2UiSWRlbnRpdHlOIjpyZXR1cm4gSSgieCIsbixlLHQpLm1hcChoPT5obyhoKSk7Y2FzZSJTbmFwc2hvdCI6Y29uc3Qgbz1JKCJ4IixuLGUsdCk7cmV0dXJuW2hvKG8pXTtjYXNlIlNoYXBlIjpyZXR1cm5bcy50ZW5zb3IxZChJKCJ4IixuLGUsdCkuc2hhcGUsImludDMyIildO2Nhc2UiU2hhcGVOIjpyZXR1cm4gSSgieCIsbixlLHQpLm1hcChoPT5zLnRlbnNvcjFkKGguc2hhcGUpKTtjYXNlIlNpemUiOnJldHVybltzLnNjYWxhcihJKCJ4IixuLGUsdCkuc2l6ZSwiaW50MzIiKV07Y2FzZSJSYW5rIjpyZXR1cm5bcy5zY2FsYXIoSSgieCIsbixlLHQpLnJhbmssImludDMyIildO2Nhc2UiTm9PcCI6cmV0dXJuW3Muc2NhbGFyKDEpXTtjYXNlIlByaW50Ijpjb25zdCBpPUkoIngiLG4sZSx0KSxhPUkoImRhdGEiLG4sZSx0KSxsPUkoIm1lc3NhZ2UiLG4sZSx0KSxjPUkoInN1bW1hcml6ZSIsbixlLHQpO2NvbnNvbGUud2FybigiVGhlIGdyYXBoIGhhcyBhIHRmLnByaW50KCkgb3BlcmF0aW9uLHVzdWFsbHkgdXNlZCBmb3IgZGVidWdnaW5nLCB3aGljaCBzbG93cyBkb3duIHBlcmZvcm1hbmNlLiIpLGNvbnNvbGUubG9nKGwpO2ZvcihsZXQgaD0wO2g8YS5sZW5ndGg7aCsrKWNvbnNvbGUubG9nKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFbaF0uZGF0YVN5bmMoKSkuc2xpY2UoMCxjKSk7cmV0dXJuW2ldO2RlZmF1bHQ6dGhyb3cgVHlwZUVycm9yKGBOb2RlIHR5cGUgJHtuLm9wfSBpcyBub3QgaW1wbGVtZW50ZWRgKX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIE42e2dldCBpZCgpe3JldHVybiB0aGlzLmhhbmRsZS5pZH1jb25zdHJ1Y3RvcihlLHQpe3RoaXMua2V5RFR5cGU9ZSx0aGlzLnZhbHVlRFR5cGU9dCx0aGlzLmhhbmRsZT1NZSgwKSx0aGlzLnRlbnNvck1hcD1uZXcgTWFwLGVuKHRoaXMuaGFuZGxlKX1jbGVhckFuZENsb3NlKCl7dGhpcy50ZW5zb3JNYXAuZm9yRWFjaChlPT5lLmRpc3Bvc2UoKSksdGhpcy50ZW5zb3JNYXAuY2xlYXIoKSx0aGlzLmhhbmRsZS5kaXNwb3NlKCl9c2l6ZSgpe3JldHVybiB0aGlzLnRlbnNvck1hcC5zaXplfXRlbnNvclNpemUoKXtyZXR1cm4gTWUodGhpcy5zaXplKCksImludDMyIil9YXN5bmMgaW1wb3J0KGUsdCl7dGhpcy5jaGVja0tleUFuZFZhbHVlVGVuc29yKGUsdCk7Y29uc3Qgcz1hd2FpdCBlLmRhdGEoKTtyZXR1cm4gdGhpcy50ZW5zb3JNYXAuZm9yRWFjaChyPT5yLmRpc3Bvc2UoKSksdGhpcy50ZW5zb3JNYXAuY2xlYXIoKSxyZSgoKT0+e2NvbnN0IHI9enModCksbz1zLmxlbmd0aCxpPXIubGVuZ3RoO0Eobz09PWksKCk9PmBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIGRvZXNuJ3QgbWF0Y2gsIGtleXMgaGFzICR7b30gZWxlbWVudHMsIHRoZSB2YWx1ZXMgaGFzICR7aX0gZWxlbWVudHMuYCk7Zm9yKGxldCBhPTA7YTxvO2ErKyl7Y29uc3QgbD1zW2FdLGM9clthXTtlbihjKSx0aGlzLnRlbnNvck1hcC5zZXQobCxjKX1yZXR1cm4gdGhpcy5oYW5kbGV9KX1hc3luYyBmaW5kKGUsdCl7dGhpcy5jaGVja0tleUFuZFZhbHVlVGVuc29yKGUsdCk7Y29uc3Qgcz1hd2FpdCBlLmRhdGEoKTtyZXR1cm4gcmUoKCk9Pntjb25zdCByPVtdO2ZvcihsZXQgbz0wO288cy5sZW5ndGg7bysrKXtjb25zdCBpPXNbb10sYT10aGlzLmZpbmRXaXRoRGVmYXVsdChpLHQpO3IucHVzaChhKX1yZXR1cm4gb3Mocil9KX1maW5kV2l0aERlZmF1bHQoZSx0KXtjb25zdCBzPXRoaXMudGVuc29yTWFwLmdldChlKTtyZXR1cm4gcz8/dH1jaGVja0tleUFuZFZhbHVlVGVuc29yKGUsdCl7aWYoZS5kdHlwZSE9PXRoaXMua2V5RFR5cGUpdGhyb3cgbmV3IEVycm9yKGBFeHBlY3Qga2V5IGR0eXBlICR7dGhpcy5rZXlEVHlwZX0sIGJ1dCBnb3QgJHtlLmR0eXBlfWApO2lmKHQuZHR5cGUhPT10aGlzLnZhbHVlRFR5cGUpdGhyb3cgbmV3IEVycm9yKGBFeHBlY3QgdmFsdWUgZHR5cGUgJHt0aGlzLnZhbHVlRFR5cGV9LCBidXQgZ290ICR7dC5kdHlwZX1gKX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgazY9YXN5bmMobixlLHQscyk9Pntzd2l0Y2gobi5vcCl7Y2FzZSJIYXNoVGFibGUiOmNhc2UiSGFzaFRhYmxlVjIiOntjb25zdCByPXMuZ2V0SGFzaFRhYmxlSGFuZGxlQnlOYW1lKG4ubmFtZSk7aWYociE9bnVsbClyZXR1cm5bcl07e2NvbnN0IG89SSgia2V5RFR5cGUiLG4sZSx0KSxpPUkoInZhbHVlRFR5cGUiLG4sZSx0KSxhPW5ldyBONihvLGkpO3JldHVybiBzLmFkZEhhc2hUYWJsZShuLm5hbWUsYSksW2EuaGFuZGxlXX19Y2FzZSJJbml0aWFsaXplVGFibGUiOmNhc2UiSW5pdGlhbGl6ZVRhYmxlVjIiOmNhc2UiTG9va3VwVGFibGVJbXBvcnQiOmNhc2UiTG9va3VwVGFibGVJbXBvcnRWMiI6e2NvbnN0IHI9SSgidGFibGVIYW5kbGUiLG4sZSx0LHMpLG89SSgia2V5cyIsbixlLHQpLGk9SSgidmFsdWVzIixuLGUsdCk7cmV0dXJuW2F3YWl0IHMuZ2V0SGFzaFRhYmxlQnlJZChyLmlkKS5pbXBvcnQobyxpKV19Y2FzZSJMb29rdXBUYWJsZUZpbmQiOmNhc2UiTG9va3VwVGFibGVGaW5kVjIiOntjb25zdCByPUkoInRhYmxlSGFuZGxlIixuLGUsdCxzKSxvPUkoImtleXMiLG4sZSx0KSxpPUkoImRlZmF1bHRWYWx1ZSIsbixlLHQpO3JldHVyblthd2FpdCBzLmdldEhhc2hUYWJsZUJ5SWQoci5pZCkuZmluZChvLGkpXX1jYXNlIkxvb2t1cFRhYmxlU2l6ZSI6Y2FzZSJMb29rdXBUYWJsZVNpemVWMiI6e2NvbnN0IHI9SSgidGFibGVIYW5kbGUiLG4sZSx0LHMpO3JldHVybltzLmdldEhhc2hUYWJsZUJ5SWQoci5pZCkudGVuc29yU2l6ZSgpXX1kZWZhdWx0OnRocm93IFR5cGVFcnJvcihgTm9kZSB0eXBlICR7bi5vcH0gaXMgbm90IGltcGxlbWVudGVkYCl9fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBDNj0obixlLHQscz0kbik9Pntzd2l0Y2gobi5vcCl7Y2FzZSJSZXNpemVCaWxpbmVhciI6e2NvbnN0IHI9SSgiaW1hZ2VzIixuLGUsdCksbz1JKCJzaXplIixuLGUsdCksaT1JKCJhbGlnbkNvcm5lcnMiLG4sZSx0KSxhPUkoImhhbGZQaXhlbENlbnRlcnMiLG4sZSx0KTtyZXR1cm5bcy5pbWFnZS5yZXNpemVCaWxpbmVhcihyLFtvWzBdLG9bMV1dLGksYSldfWNhc2UiUmVzaXplTmVhcmVzdE5laWdoYm9yIjp7Y29uc3Qgcj1JKCJpbWFnZXMiLG4sZSx0KSxvPUkoInNpemUiLG4sZSx0KSxpPUkoImFsaWduQ29ybmVycyIsbixlLHQpLGE9SSgiaGFsZlBpeGVsQ2VudGVycyIsbixlLHQpO3JldHVybltzLmltYWdlLnJlc2l6ZU5lYXJlc3ROZWlnaGJvcihyLFtvWzBdLG9bMV1dLGksYSldfWNhc2UiQ3JvcEFuZFJlc2l6ZSI6e2NvbnN0IHI9SSgiaW1hZ2UiLG4sZSx0KSxvPUkoImJveGVzIixuLGUsdCksaT1JKCJib3hJbmQiLG4sZSx0KSxhPUkoImNyb3BTaXplIixuLGUsdCksbD1JKCJtZXRob2QiLG4sZSx0KSxjPUkoImV4dHJhcG9sYXRpb25WYWx1ZSIsbixlLHQpO3JldHVybltzLmltYWdlLmNyb3BBbmRSZXNpemUocixvLGksYSxsLGMpXX1jYXNlIkltYWdlUHJvamVjdGl2ZVRyYW5zZm9ybVYzIjp7Y29uc3Qgcj1JKCJpbWFnZXMiLG4sZSx0KSxvPUkoInRyYW5zZm9ybXMiLG4sZSx0KSxpPUkoIm91dHB1dFNoYXBlIixuLGUsdCksYT1JKCJmaWxsVmFsdWUiLG4sZSx0KSxsPUkoImludGVycG9sYXRpb24iLG4sZSx0KSxjPUkoImZpbGxNb2RlIixuLGUsdCk7cmV0dXJuW3MuaW1hZ2UudHJhbnNmb3JtKHIsbyxsLnRvTG93ZXJDYXNlKCksYy50b0xvd2VyQ2FzZSgpLGEsaSldfWRlZmF1bHQ6dGhyb3cgVHlwZUVycm9yKGBOb2RlIHR5cGUgJHtuLm9wfSBpcyBub3QgaW1wbGVtZW50ZWRgKX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0ICQ2PShuLGUsdCxzPSRuKT0+e3N3aXRjaChuLm9wKXtjYXNlIkVxdWFsIjpyZXR1cm5bcy5lcXVhbChJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpKV07Y2FzZSJOb3RFcXVhbCI6cmV0dXJuW3Mubm90RXF1YWwoSSgiYSIsbixlLHQpLEkoImIiLG4sZSx0KSldO2Nhc2UiR3JlYXRlciI6cmV0dXJuW3MuZ3JlYXRlcihJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpKV07Y2FzZSJHcmVhdGVyRXF1YWwiOnJldHVybltzLmdyZWF0ZXJFcXVhbChJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpKV07Y2FzZSJMZXNzIjpyZXR1cm5bcy5sZXNzKEkoImEiLG4sZSx0KSxJKCJiIixuLGUsdCkpXTtjYXNlIkxlc3NFcXVhbCI6cmV0dXJuW3MubGVzc0VxdWFsKEkoImEiLG4sZSx0KSxJKCJiIixuLGUsdCkpXTtjYXNlIkxvZ2ljYWxBbmQiOnJldHVybltzLmxvZ2ljYWxBbmQoSSgiYSIsbixlLHQpLEkoImIiLG4sZSx0KSldO2Nhc2UiTG9naWNhbE5vdCI6cmV0dXJuW3MubG9naWNhbE5vdChJKCJhIixuLGUsdCkpXTtjYXNlIkxvZ2ljYWxPciI6cmV0dXJuW3MubG9naWNhbE9yKEkoImEiLG4sZSx0KSxJKCJiIixuLGUsdCkpXTtjYXNlIlNlbGVjdCI6Y2FzZSJTZWxlY3RWMiI6cmV0dXJuW3Mud2hlcmUoSSgiY29uZGl0aW9uIixuLGUsdCksSSgiYSIsbixlLHQpLEkoImIiLG4sZSx0KSldO2Nhc2UiQml0d2lzZUFuZCI6cmV0dXJuW3MuYml0d2lzZUFuZChJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpKV07ZGVmYXVsdDp0aHJvdyBUeXBlRXJyb3IoYE5vZGUgdHlwZSAke24ub3B9IGlzIG5vdCBpbXBsZW1lbnRlZGApfX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgSTY9KG4sZSx0LHM9JG4pPT57c3dpdGNoKG4ub3Ape2Nhc2UiQmF0Y2hNYXRNdWwiOmNhc2UiQmF0Y2hNYXRNdWxWMiI6Y2FzZSJNYXRNdWwiOnJldHVybltzLm1hdE11bChJKCJhIixuLGUsdCksSSgiYiIsbixlLHQpLEkoInRyYW5zcG9zZUEiLG4sZSx0KSxJKCJ0cmFuc3Bvc2VCIixuLGUsdCkpXTtjYXNlIkVpbnN1bSI6cmV0dXJuW3MuZWluc3VtKEkoImVxdWF0aW9uIixuLGUsdCksLi4uSSgidGVuc29ycyIsbixlLHQpKV07Y2FzZSJUcmFuc3Bvc2UiOnJldHVybltzLnRyYW5zcG9zZShJKCJ4IixuLGUsdCksSSgicGVybSIsbixlLHQpKV07Y2FzZSJfRnVzZWRNYXRNdWwiOmNvbnN0W3Isb109SSgiZnVzZWRPcHMiLG4sZSx0KSxpPXI9PT0iYmlhc2FkZCIsYT1vPT09InByZWx1IixsPUkoIm51bUFyZ3MiLG4sZSx0KSxjPUkoImxlYWt5cmVsdUFscGhhIixuLGUsdCk7aWYoaSl7aWYoYSYmbCE9PTIpdGhyb3cgbmV3IEVycm9yKCJGdXNlZCBNYXRNdWwgd2l0aCBCaWFzQWRkIGFuZCBQcmVsdSBtdXN0IGhhdmUgdHdvIGV4dHJhIGFyZ3VtZW50czogYmlhcyBhbmQgYWxwaGEuIik7aWYoIWEmJmwhPT0xKXRocm93IG5ldyBFcnJvcigiRnVzZWQgTWF0TXVsIHdpdGggQmlhc0FkZCBtdXN0IGhhdmUgb25lIGV4dHJhIGFyZ3VtZW50OiBiaWFzLiIpfWNvbnN0W2gscF09SSgiYXJncyIsbixlLHQpO3JldHVybltzLmZ1c2VkLm1hdE11bCh7YTpJKCJhIixuLGUsdCksYjpJKCJiIixuLGUsdCksdHJhbnNwb3NlQTpJKCJ0cmFuc3Bvc2VBIixuLGUsdCksdHJhbnNwb3NlQjpJKCJ0cmFuc3Bvc2VCIixuLGUsdCksYmlhczpoLGFjdGl2YXRpb246byxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOnAsbGVha3lyZWx1QWxwaGE6Y30pXTtjYXNlIk1hdHJpeEJhbmRQYXJ0IjpyZXR1cm5bcy5saW5hbGcuYmFuZFBhcnQoSSgiYSIsbixlLHQpLEkoIm51bUxvd2VyIixuLGUsdCksSSgibnVtVXBwZXIiLG4sZSx0KSldO2RlZmF1bHQ6dGhyb3cgVHlwZUVycm9yKGBOb2RlIHR5cGUgJHtuLm9wfSBpcyBub3QgaW1wbGVtZW50ZWRgKX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFQ2PShuLGUsdCxzPSRuKT0+e3N3aXRjaChuLm9wKXtjYXNlIkV1Y2xpZGVhbk5vcm0iOnJldHVybltzLmV1Y2xpZGVhbk5vcm0oSSgieCIsbixlLHQpLEkoImF4aXMiLG4sZSx0KSxJKCJrZWVwRGltcyIsbixlLHQpKV07Y2FzZSJGdXNlZEJhdGNoTm9ybSI6Y2FzZSJGdXNlZEJhdGNoTm9ybVYyIjpyZXR1cm5bcy5iYXRjaE5vcm0oSSgieCIsbixlLHQpLEkoIm1lYW4iLG4sZSx0KSxJKCJ2YXJpYW5jZSIsbixlLHQpLEkoIm9mZnNldCIsbixlLHQpLEkoInNjYWxlIixuLGUsdCksSSgiZXBzaWxvbiIsbixlLHQpKV07Y2FzZSJGdXNlZEJhdGNoTm9ybVYzIjpyZXR1cm5bcy5iYXRjaE5vcm0oSSgieCIsbixlLHQpLEkoIm1lYW4iLG4sZSx0KSxJKCJ2YXJpYW5jZSIsbixlLHQpLEkoIm9mZnNldCIsbixlLHQpLEkoInNjYWxlIixuLGUsdCksSSgiZXBzaWxvbiIsbixlLHQpKV07Y2FzZSJMUk4iOnJldHVybltzLmxvY2FsUmVzcG9uc2VOb3JtYWxpemF0aW9uKEkoIngiLG4sZSx0KSxJKCJyYWRpdXMiLG4sZSx0KSxJKCJiaWFzIixuLGUsdCksSSgiYWxwaGEiLG4sZSx0KSxJKCJiZXRhIixuLGUsdCkpXTtjYXNlIlNvZnRtYXgiOnJldHVybltzLnNvZnRtYXgoSSgieCIsbixlLHQpKV07Y2FzZSJMb2dTb2Z0bWF4IjpyZXR1cm5bcy5sb2dTb2Z0bWF4KEkoIngiLG4sZSx0KSldO2RlZmF1bHQ6dGhyb3cgVHlwZUVycm9yKGBOb2RlIHR5cGUgJHtuLm9wfSBpcyBub3QgaW1wbGVtZW50ZWRgKX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEU2PShuLGUsdCxzPSRuKT0+e3N3aXRjaChuLm9wKXtjYXNlIlJhZ2dlZEdhdGhlciI6e2NvbnN0e291dHB1dE5lc3RlZFNwbGl0czpyLG91dHB1dERlbnNlVmFsdWVzOm99PXMucmFnZ2VkR2F0aGVyKEkoInBhcmFtc05lc3RlZFNwbGl0cyIsbixlLHQpLEkoInBhcmFtc0RlbnNlVmFsdWVzIixuLGUsdCksSSgiaW5kaWNlcyIsbixlLHQpLEkoIm91dHB1dFJhZ2dlZFJhbmsiLG4sZSx0KSk7cmV0dXJuIHIuY29uY2F0KG8pfWNhc2UiUmFnZ2VkUmFuZ2UiOntjb25zdHtydE5lc3RlZFNwbGl0czpyLHJ0RGVuc2VWYWx1ZXM6b309cy5yYWdnZWRSYW5nZShJKCJzdGFydHMiLG4sZSx0KSxJKCJsaW1pdHMiLG4sZSx0KSxJKCJzcGxpdHMiLG4sZSx0KSk7cmV0dXJuW3Isb119Y2FzZSJSYWdnZWRUZW5zb3JUb1RlbnNvciI6cmV0dXJuW3MucmFnZ2VkVGVuc29yVG9UZW5zb3IoSSgic2hhcGUiLG4sZSx0KSxJKCJ2YWx1ZXMiLG4sZSx0KSxJKCJkZWZhdWx0VmFsdWUiLG4sZSx0KSxJKCJyb3dQYXJ0aXRpb25UZW5zb3JzIixuLGUsdCksSSgicm93UGFydGl0aW9uVHlwZXMiLG4sZSx0KSldO2RlZmF1bHQ6dGhyb3cgVHlwZUVycm9yKGBOb2RlIHR5cGUgJHtuLm9wfSBpcyBub3QgaW1wbGVtZW50ZWRgKX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFI2PShuLGUsdCxzPSRuKT0+e3N3aXRjaChuLm9wKXtjYXNlIk1heCI6e2NvbnN0IGE9SSgiYXhpcyIsbixlLHQpLGw9SSgia2VlcERpbXMiLG4sZSx0KTtyZXR1cm5bcy5tYXgoSSgieCIsbixlLHQpLGEsbCldfWNhc2UiTWVhbiI6e2NvbnN0IGE9SSgiYXhpcyIsbixlLHQpLGw9SSgia2VlcERpbXMiLG4sZSx0KTtyZXR1cm5bcy5tZWFuKEkoIngiLG4sZSx0KSxhLGwpXX1jYXNlIk1pbiI6e2NvbnN0IGE9SSgiYXhpcyIsbixlLHQpLGw9SSgia2VlcERpbXMiLG4sZSx0KTtyZXR1cm5bcy5taW4oSSgieCIsbixlLHQpLGEsbCldfWNhc2UiU3VtIjp7Y29uc3QgYT1JKCJheGlzIixuLGUsdCksbD1JKCJrZWVwRGltcyIsbixlLHQpO3JldHVybltzLnN1bShJKCJ4IixuLGUsdCksYSxsKV19Y2FzZSJBbGwiOntjb25zdCBhPUkoImF4aXMiLG4sZSx0KSxsPUkoImtlZXBEaW1zIixuLGUsdCk7cmV0dXJuW3MuYWxsKEkoIngiLG4sZSx0KSxhLGwpXX1jYXNlIkFueSI6e2NvbnN0IGE9SSgiYXhpcyIsbixlLHQpLGw9SSgia2VlcERpbXMiLG4sZSx0KTtyZXR1cm5bcy5hbnkoSSgieCIsbixlLHQpLGEsbCldfWNhc2UiQXJnTWF4Ijp7Y29uc3QgYT1JKCJheGlzIixuLGUsdCk7cmV0dXJuW3MuYXJnTWF4KEkoIngiLG4sZSx0KSxhKV19Y2FzZSJBcmdNaW4iOntjb25zdCBhPUkoImF4aXMiLG4sZSx0KTtyZXR1cm5bcy5hcmdNaW4oSSgieCIsbixlLHQpLGEpXX1jYXNlIlByb2QiOntjb25zdCBhPUkoImF4aXMiLG4sZSx0KSxsPUkoImtlZXBEaW1zIixuLGUsdCk7cmV0dXJuW3MucHJvZChJKCJ4IixuLGUsdCksYSxsKV19Y2FzZSJDdW1wcm9kIjp7Y29uc3QgYT1JKCJheGlzIixuLGUsdCksbD1JKCJleGNsdXNpdmUiLG4sZSx0KSxjPUkoInJldmVyc2UiLG4sZSx0KTtyZXR1cm5bcy5jdW1wcm9kKEkoIngiLG4sZSx0KSxhLGwsYyldfWNhc2UiQ3Vtc3VtIjp7Y29uc3QgYT1JKCJheGlzIixuLGUsdCksbD1JKCJleGNsdXNpdmUiLG4sZSx0KSxjPUkoInJldmVyc2UiLG4sZSx0KTtyZXR1cm5bcy5jdW1zdW0oSSgieCIsbixlLHQpLGEsbCxjKV19Y2FzZSJCaW5jb3VudCI6Y29uc3Qgcj1JKCJ4IixuLGUsdCksbz1JKCJ3ZWlnaHRzIixuLGUsdCksaT1JKCJzaXplIixuLGUsdCk7cmV0dXJuW3MuYmluY291bnQocixvLGkpXTtjYXNlIkRlbnNlQmluY291bnQiOntjb25zdCBhPUkoIngiLG4sZSx0KSxsPUkoIndlaWdodHMiLG4sZSx0KSxjPUkoInNpemUiLG4sZSx0KSxoPUkoImJpbmFyeU91dHB1dCIsbixlLHQpO3JldHVybltzLmRlbnNlQmluY291bnQoYSxsLGMsaCldfWRlZmF1bHQ6dGhyb3cgVHlwZUVycm9yKGBOb2RlIHR5cGUgJHtuLm9wfSBpcyBub3QgaW1wbGVtZW50ZWRgKX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEQ2PShuLGUsdCxzPSRuKT0+e3N3aXRjaChuLm9wKXtjYXNlIkNvbmNhdFYyIjpjYXNlIkNvbmNhdCI6e2NvbnN0IHI9SSgibiIsbixlLHQpLG89SSgiYXhpcyIsbixlLHQpO2xldCBpPUkoInRlbnNvcnMiLG4sZSx0KTtyZXR1cm4gaT1pLnNsaWNlKDAsciksW3MuY29uY2F0KGksbyldfWNhc2UiR2F0aGVyIjp7Y29uc3Qgcj1JKCJ4IixuLGUsdCksbz1JKCJpbmRpY2VzIixuLGUsdCk7cmV0dXJuW3MuZ2F0aGVyKHIscy5jYXN0KG8sImludDMyIiksMCldfWNhc2UiR2F0aGVyVjIiOntjb25zdCByPUkoImF4aXMiLG4sZSx0KSxvPUkoImJhdGNoRGltcyIsbixlLHQpLGk9SSgieCIsbixlLHQpLGE9SSgiaW5kaWNlcyIsbixlLHQpO3JldHVybltzLmdhdGhlcihpLHMuY2FzdChhLCJpbnQzMiIpLHIsbyldfWNhc2UiUmV2ZXJzZSI6e2NvbnN0IHI9SSgiZGltcyIsbixlLHQpLG89W107Zm9yKGxldCBhPTA7YTxyLmxlbmd0aDthKyspclthXSYmby5wdXNoKGEpO2NvbnN0IGk9SSgieCIsbixlLHQpO3JldHVybltzLnJldmVyc2UoaSxvKV19Y2FzZSJSZXZlcnNlVjIiOntjb25zdCByPUkoImF4aXMiLG4sZSx0KSxvPUkoIngiLG4sZSx0KTtyZXR1cm5bcy5yZXZlcnNlKG8scildfWNhc2UiU2xpY2UiOntjb25zdCByPUkoImJlZ2luIixuLGUsdCksbz1JKCJzaXplIixuLGUsdCk7cmV0dXJuW3Muc2xpY2UoSSgieCIsbixlLHQpLHIsbyldfWNhc2UiU3RyaWRlZFNsaWNlIjp7Y29uc3Qgcj1JKCJiZWdpbiIsbixlLHQpLG89SSgiZW5kIixuLGUsdCksaT1JKCJzdHJpZGVzIixuLGUsdCksYT1JKCJiZWdpbk1hc2siLG4sZSx0KSxsPUkoImVuZE1hc2siLG4sZSx0KSxjPUkoImVsbGlwc2lzTWFzayIsbixlLHQpLGg9SSgibmV3QXhpc01hc2siLG4sZSx0KSxwPUkoInNocmlua0F4aXNNYXNrIixuLGUsdCksZj1JKCJ4IixuLGUsdCk7cmV0dXJuW3Muc3RyaWRlZFNsaWNlKGYscixvLGksYSxsLGMsaCxwKV19Y2FzZSJQYWNrIjpyZXR1cm4gcmUoKCk9Pntjb25zdCByPUkoImF4aXMiLG4sZSx0KSxvPUkoInRlbnNvcnMiLG4sZSx0KSxpPW9bMF0uc2hhcGUsYT1zLnNxdWVlemUob1swXSkuc2hhcGUsbD1vLm1hcChjPT57Y29uc3QgaD1KZShjLnNoYXBlLGkpO2lmKCFoJiYhSmUocy5zcXVlZXplKGMpLnNoYXBlLGEpKXRocm93IG5ldyBFcnJvcigidGhlIGlucHV0IHRlbnNvcnMgc2hhcGUgZG9lcyBub3QgbWF0Y2giKTtyZXR1cm4gaD9jOnMucmVzaGFwZShjLGkpfSk7cmV0dXJuW3Muc3RhY2sobCxyKV19KTtjYXNlIlVucGFjayI6e2NvbnN0IHI9SSgiYXhpcyIsbixlLHQpLG89SSgidGVuc29yIixuLGUsdCk7cmV0dXJuIHMudW5zdGFjayhvLHIpfWNhc2UiVGlsZSI6e2NvbnN0IHI9SSgicmVwcyIsbixlLHQpO3JldHVybltzLnRpbGUoSSgieCIsbixlLHQpLHIpXX1jYXNlIlNwbGl0IjpjYXNlIlNwbGl0ViI6e2NvbnN0IHI9SSgiYXhpcyIsbixlLHQpLG89SSgibnVtT3JTaXplU3BsaXRzIixuLGUsdCksaT1JKCJ4IixuLGUsdCk7cmV0dXJuIHMuc3BsaXQoaSxvLHIpfWNhc2UiU2NhdHRlck5kIjp7Y29uc3Qgcj1JKCJpbmRpY2VzIixuLGUsdCksbz1JKCJ2YWx1ZXMiLG4sZSx0KSxpPUkoInNoYXBlIixuLGUsdCk7cmV0dXJuW3Muc2NhdHRlck5EKHIsbyxpKV19Y2FzZSJHYXRoZXJOZCI6e2NvbnN0IHI9SSgieCIsbixlLHQpLG89SSgiaW5kaWNlcyIsbixlLHQpO3JldHVybltzLmdhdGhlck5EKHIsbyldfWNhc2UiU3BhcnNlVG9EZW5zZSI6e2NvbnN0IHI9SSgic3BhcnNlSW5kaWNlcyIsbixlLHQpLG89SSgib3V0cHV0U2hhcGUiLG4sZSx0KSxpPUkoInNwYXJzZVZhbHVlcyIsbixlLHQpLGE9SSgiZGVmYXVsdFZhbHVlIixuLGUsdCk7cmV0dXJuW3Muc3BhcnNlVG9EZW5zZShyLGksbyxpLmR0eXBlPT09YS5kdHlwZT9hOnMuY2FzdChhLGkuZHR5cGUpKV19Y2FzZSJUZW5zb3JTY2F0dGVyVXBkYXRlIjp7Y29uc3Qgcj1JKCJpbmRpY2VzIixuLGUsdCksbz1JKCJ2YWx1ZXMiLG4sZSx0KSxpPUkoInRlbnNvciIsbixlLHQpO3JldHVybltzLnRlbnNvclNjYXR0ZXJVcGRhdGUoaSxyLG8pXX1kZWZhdWx0OnRocm93IFR5cGVFcnJvcihgTm9kZSB0eXBlICR7bi5vcH0gaXMgbm90IGltcGxlbWVudGVkYCl9fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBBNj0obixlLHQscz0kbik9Pntzd2l0Y2gobi5vcCl7Y2FzZSJTcGFyc2VGaWxsRW1wdHlSb3dzIjp7Y29uc3R7b3V0cHV0SW5kaWNlczpyLG91dHB1dFZhbHVlczpvLGVtcHR5Um93SW5kaWNhdG9yOmkscmV2ZXJzZUluZGV4TWFwOmF9PXMuc3BhcnNlLnNwYXJzZUZpbGxFbXB0eVJvd3MoSSgiaW5kaWNlcyIsbixlLHQpLEkoInZhbHVlcyIsbixlLHQpLEkoImRlbnNlU2hhcGUiLG4sZSx0KSxJKCJkZWZhdWx0VmFsdWUiLG4sZSx0KSk7cmV0dXJuW3IsbyxpLGFdfWNhc2UiU3BhcnNlUmVzaGFwZSI6e2NvbnN0e291dHB1dEluZGljZXM6cixvdXRwdXRTaGFwZTpvfT1zLnNwYXJzZS5zcGFyc2VSZXNoYXBlKEkoImlucHV0SW5kaWNlcyIsbixlLHQpLEkoImlucHV0U2hhcGUiLG4sZSx0KSxJKCJuZXdTaGFwZSIsbixlLHQpKTtyZXR1cm5bcixvXX1jYXNlIlNwYXJzZVNlZ21lbnRNZWFuIjpyZXR1cm5bcy5zcGFyc2Uuc3BhcnNlU2VnbWVudE1lYW4oSSgiZGF0YSIsbixlLHQpLEkoImluZGljZXMiLG4sZSx0KSxJKCJzZWdtZW50SWRzIixuLGUsdCkpXTtjYXNlIlNwYXJzZVNlZ21lbnRTdW0iOnJldHVybltzLnNwYXJzZS5zcGFyc2VTZWdtZW50U3VtKEkoImRhdGEiLG4sZSx0KSxJKCJpbmRpY2VzIixuLGUsdCksSSgic2VnbWVudElkcyIsbixlLHQpKV07ZGVmYXVsdDp0aHJvdyBUeXBlRXJyb3IoYE5vZGUgdHlwZSAke24ub3B9IGlzIG5vdCBpbXBsZW1lbnRlZGApfX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgXzY9KG4sZSx0LHM9JG4pPT57c3dpdGNoKG4ub3Ape2Nhc2UiRkZUIjpyZXR1cm5bcy5mZnQoSSgieCIsbixlLHQpKV07Y2FzZSJJRkZUIjpyZXR1cm5bcy5pZmZ0KEkoIngiLG4sZSx0KSldO2Nhc2UiUkZGVCI6cmV0dXJuW3MucmZmdChJKCJ4IixuLGUsdCkpXTtjYXNlIklSRkZUIjpyZXR1cm5bcy5pcmZmdChJKCJ4IixuLGUsdCkpXTtkZWZhdWx0OnRocm93IFR5cGVFcnJvcihgTm9kZSB0eXBlICR7bi5vcH0gaXMgbm90IGltcGxlbWVudGVkYCl9fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBPNj0obixlLHQscz0kbik9Pntzd2l0Y2gobi5vcCl7Y2FzZSJTdGF0aWNSZWdleFJlcGxhY2UiOnJldHVybltzLnN0cmluZy5zdGF0aWNSZWdleFJlcGxhY2UoSSgiaW5wdXQiLG4sZSx0KSxJKCJwYXR0ZXJuIixuLGUsdCksSSgicmV3cml0ZSIsbixlLHQpLEkoInJlcGxhY2VHbG9iYWwiLG4sZSx0KSldO2Nhc2UiU3RyaW5nTkdyYW1zIjp7Y29uc3R7bkdyYW1zOnIsbkdyYW1zU3BsaXRzOm99PXMuc3RyaW5nLnN0cmluZ05HcmFtcyhJKCJkYXRhIixuLGUsdCksSSgiZGF0YVNwbGl0cyIsbixlLHQpLEkoInNlcGFyYXRvciIsbixlLHQpLEkoIm5HcmFtV2lkdGhzIixuLGUsdCksSSgibGVmdFBhZCIsbixlLHQpLEkoInJpZ2h0UGFkIixuLGUsdCksSSgicGFkV2lkdGgiLG4sZSx0KSxJKCJwcmVzZXJ2ZVNob3J0U2VxdWVuY2VzIixuLGUsdCkpO3JldHVybltyLG9dfWNhc2UiU3RyaW5nU3BsaXQiOntjb25zdHtpbmRpY2VzOnIsdmFsdWVzOm8sc2hhcGU6aX09cy5zdHJpbmcuc3RyaW5nU3BsaXQoSSgiaW5wdXQiLG4sZSx0KSxJKCJkZWxpbWl0ZXIiLG4sZSx0KSxJKCJza2lwRW1wdHkiLG4sZSx0KSk7cmV0dXJuW3IsbyxpXX1jYXNlIlN0cmluZ1RvSGFzaEJ1Y2tldEZhc3QiOnJldHVybltzLnN0cmluZy5zdHJpbmdUb0hhc2hCdWNrZXRGYXN0KEkoImlucHV0IixuLGUsdCksSSgibnVtQnVja2V0cyIsbixlLHQpKV07ZGVmYXVsdDp0aHJvdyBUeXBlRXJyb3IoYE5vZGUgdHlwZSAke24ub3B9IGlzIG5vdCBpbXBsZW1lbnRlZGApfX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRjY9KG4sZSx0LHM9JG4pPT57c3dpdGNoKG4ub3Ape2Nhc2UiQ2FzdCI6cmV0dXJuW3MuY2FzdChJKCJ4IixuLGUsdCksSSgiZHR5cGUiLG4sZSx0KSldO2Nhc2UiRXhwYW5kRGltcyI6e2NvbnN0IHI9SSgiYXhpcyIsbixlLHQpO3JldHVybltzLmV4cGFuZERpbXMoSSgieCIsbixlLHQpLHIpXX1jYXNlIlNxdWVlemUiOntjb25zdCByPUkoImF4aXMiLG4sZSx0KTtyZXR1cm5bcy5zcXVlZXplKEkoIngiLG4sZSx0KSxyKV19Y2FzZSJSZXNoYXBlIjpyZXR1cm5bcy5yZXNoYXBlKEkoIngiLG4sZSx0KSxJKCJzaGFwZSIsbixlLHQpKV07Y2FzZSJFbnN1cmVTaGFwZSI6cmV0dXJuW3MuZW5zdXJlU2hhcGUoSSgieCIsbixlLHQpLEkoInNoYXBlIixuLGUsdCkpXTtjYXNlIk1pcnJvclBhZCI6cmV0dXJuW3MubWlycm9yUGFkKEkoIngiLG4sZSx0KSxJKCJwYWRkaW5nIixuLGUsdCksSSgibW9kZSIsbixlLHQpKV07Y2FzZSJQYWRWMiI6Y2FzZSJQYWQiOnJldHVybltzLnBhZChJKCJ4IixuLGUsdCksSSgicGFkZGluZyIsbixlLHQpLEkoImNvbnN0YW50VmFsdWUiLG4sZSx0KSldO2Nhc2UiU3BhY2VUb0JhdGNoTkQiOntjb25zdCByPUkoImJsb2NrU2hhcGUiLG4sZSx0KSxvPUkoInBhZGRpbmdzIixuLGUsdCk7cmV0dXJuW3Muc3BhY2VUb0JhdGNoTkQoSSgieCIsbixlLHQpLHIsbyldfWNhc2UiQmF0Y2hUb1NwYWNlTkQiOntjb25zdCByPUkoImJsb2NrU2hhcGUiLG4sZSx0KSxvPUkoImNyb3BzIixuLGUsdCk7cmV0dXJuW3MuYmF0Y2hUb1NwYWNlTkQoSSgieCIsbixlLHQpLHIsbyldfWNhc2UiRGVwdGhUb1NwYWNlIjp7Y29uc3Qgcj1JKCJibG9ja1NpemUiLG4sZSx0KSxvPUkoImRhdGFGb3JtYXQiLG4sZSx0KS50b1VwcGVyQ2FzZSgpO3JldHVybltzLmRlcHRoVG9TcGFjZShJKCJ4IixuLGUsdCkscixvKV19Y2FzZSJCcm9hZGNhc3RUbyI6cmV0dXJuW3MuYnJvYWRjYXN0VG8oSSgieCIsbixlLHQpLEkoInNoYXBlIixuLGUsdCkpXTtjYXNlIkJyb2FkY2FzdEFyZ3MiOnJldHVybltzLmJyb2FkY2FzdEFyZ3MoSSgiczAiLG4sZSx0KSxJKCJzMSIsbixlLHQpKV07ZGVmYXVsdDp0aHJvdyBUeXBlRXJyb3IoYE5vZGUgdHlwZSAke24ub3B9IGlzIG5vdCBpbXBsZW1lbnRlZGApfX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24geUMobixlLHQscyxyPXJlKXtjb25zdCBvPSgoaSxhLGwpPT57c3dpdGNoKGkuY2F0ZWdvcnkpe2Nhc2UiYXJpdGhtZXRpYyI6cmV0dXJuIHIoKCk9PmM2KGksYSxsKSk7Y2FzZSJiYXNpY19tYXRoIjpyZXR1cm4gcigoKT0+ZDYoaSxhLGwpKTtjYXNlImNvbnRyb2wiOnJldHVybiB5NihpLGEsbCk7Y2FzZSJjb252b2x1dGlvbiI6cmV0dXJuIHIoKCk9Png2KGksYSxsKSk7Y2FzZSJjcmVhdGlvbiI6cmV0dXJuIHIoKCk9PmI2KGksYSxsKSk7Y2FzZSJkeW5hbWljIjpyZXR1cm4gdzYoaSxhLGwpO2Nhc2UiZXZhbHVhdGlvbiI6cmV0dXJuIHIoKCk9PnY2KGksYSxsKSk7Y2FzZSJpbWFnZSI6cmV0dXJuIHIoKCk9PkM2KGksYSxsKSk7Y2FzZSJncmFwaCI6cmV0dXJuIHIoKCk9PlM2KGksYSxsKSk7Y2FzZSJsb2dpY2FsIjpyZXR1cm4gcigoKT0+JDYoaSxhLGwpKTtjYXNlIm1hdHJpY2VzIjpyZXR1cm4gcigoKT0+STYoaSxhLGwpKTtjYXNlIm5vcm1hbGl6YXRpb24iOnJldHVybiByKCgpPT5UNihpLGEsbCkpO2Nhc2UicmFnZ2VkIjpyZXR1cm4gcigoKT0+RTYoaSxhLGwpKTtjYXNlInJlZHVjdGlvbiI6cmV0dXJuIHIoKCk9PlI2KGksYSxsKSk7Y2FzZSJzbGljZV9qb2luIjpyZXR1cm4gcigoKT0+RDYoaSxhLGwpKTtjYXNlInNwYXJzZSI6cmV0dXJuIHIoKCk9PkE2KGksYSxsKSk7Y2FzZSJzcGVjdHJhbCI6cmV0dXJuIHIoKCk9Pl82KGksYSxsKSk7Y2FzZSJzdHJpbmciOnJldHVybiByKCgpPT5PNihpLGEsbCkpO2Nhc2UidHJhbnNmb3JtYXRpb24iOnJldHVybiByKCgpPT5GNihpLGEsbCkpO2Nhc2UiaGFzaF90YWJsZSI6cmV0dXJuIGs2KGksYSxsLHMpO2Nhc2UiY3VzdG9tIjpjb25zdCBjPVpFKGkub3ApO2lmKGMmJmMuY3VzdG9tRXhlY3V0b3IpcmV0dXJuIGMuY3VzdG9tRXhlY3V0b3IobmV3IHU2KGksYSxsKSk7dGhyb3cgVHlwZUVycm9yKGBDdXN0b20gb3AgJHtpLm9wfSBpcyBub3QgcmVnaXN0ZXJlZC5gKTtkZWZhdWx0OnRocm93IFR5cGVFcnJvcihgVW5rbm93biBvcCAnJHtpLm9wfScuIEZpbGUgYW4gaXNzdWUgYXQgaHR0cHM6Ly9naXRodWIuY29tL3RlbnNvcmZsb3cvdGZqcy9pc3N1ZXMgc28gd2UgY2FuIGFkZCBpdCwgb3IgcmVnaXN0ZXIgYSBjdXN0b20gZXhlY3V0aW9uIHdpdGggdGYucmVnaXN0ZXJPcCgpYCl9fSkobixlLHQpO3JldHVybiBpaShvKT9vLnRoZW4oaT0+W10uY29uY2F0KGkpKTpbXS5jb25jYXQobyl9Y2xhc3MgeEN7Y29uc3RydWN0b3IoZT17fSx0PXt9LHM9e30scj17fSxvKXt0aGlzLndlaWdodE1hcD1lLHRoaXMudGVuc29yQXJyYXlNYXA9dCx0aGlzLnRlbnNvckxpc3RNYXA9cyx0aGlzLmZ1bmN0aW9uTWFwPXIsdGhpcy5wYXJzZU5vZGVOYW1lQ2FjaGU9byx0aGlzLnJvb3RDb250ZXh0PXtpZDowLGZyYW1lTmFtZToiIixpdGVyYXRpb25JZDowfSx0aGlzLmNvbnRleHRzPVt0aGlzLnJvb3RDb250ZXh0XSx0aGlzLmxhc3RJZD0wLHRoaXMuZ2VuZXJhdGVDdXJyZW50Q29udGV4dElkcygpfW5ld0ZyYW1lKGUsdCl7cmV0dXJue2lkOmUsZnJhbWVOYW1lOnQsaXRlcmF0aW9uSWQ6MH19c2V0IGN1cnJlbnRDb250ZXh0KGUpe3RoaXMuY29udGV4dHMhPT1lJiYodGhpcy5jb250ZXh0cz1lLHRoaXMuZ2VuZXJhdGVDdXJyZW50Q29udGV4dElkcygpKX1nZXQgY3VycmVudENvbnRleHQoKXtyZXR1cm4gdGhpcy5jb250ZXh0c31nZXQgY3VycmVudENvbnRleHRJZCgpe3JldHVybiB0aGlzLl9jdXJyZW50Q29udGV4dElkc1swXX1nZXQgY3VycmVudENvbnRleHRJZHMoKXtyZXR1cm4gdGhpcy5fY3VycmVudENvbnRleHRJZHN9Z2VuZXJhdGVDdXJyZW50Q29udGV4dElkcygpe2NvbnN0IGU9W107Zm9yKGxldCB0PTA7dDx0aGlzLmNvbnRleHRzLmxlbmd0aC0xO3QrKyl7Y29uc3Qgcz10aGlzLmNvbnRleHRzLnNsaWNlKDAsdGhpcy5jb250ZXh0cy5sZW5ndGgtdCk7ZS5wdXNoKHRoaXMuY29udGV4dElkZm9yQ29udGV4dHMocykpfWUucHVzaCgiIiksdGhpcy5fY3VycmVudENvbnRleHRJZHM9ZX1jb250ZXh0SWRmb3JDb250ZXh0cyhlKXtyZXR1cm4gZT9lLm1hcCh0PT50LmlkPT09MCYmdC5pdGVyYXRpb25JZD09PTA/IiI6YCR7dC5mcmFtZU5hbWV9LSR7dC5pdGVyYXRpb25JZH1gKS5qb2luKCIvIik6IiJ9ZW50ZXJGcmFtZShlKXt0aGlzLmNvbnRleHRzJiYodGhpcy5sYXN0SWQrKyx0aGlzLmNvbnRleHRzPXRoaXMuY29udGV4dHMuc2xpY2UoKSx0aGlzLmNvbnRleHRzLnB1c2godGhpcy5uZXdGcmFtZSh0aGlzLmxhc3RJZCxlKSksdGhpcy5fY3VycmVudENvbnRleHRJZHMudW5zaGlmdCh0aGlzLmNvbnRleHRJZGZvckNvbnRleHRzKHRoaXMuY29udGV4dHMpKSl9ZXhpdEZyYW1lKCl7aWYodGhpcy5jb250ZXh0cyYmdGhpcy5jb250ZXh0cy5sZW5ndGg+MSl0aGlzLmNvbnRleHRzPXRoaXMuY29udGV4dHMuc2xpY2UoKSx0aGlzLmNvbnRleHRzLnNwbGljZSgtMSksdGhpcy5jdXJyZW50Q29udGV4dElkcy5zaGlmdCgpO2Vsc2UgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZXhpdCBmcmFtZSwgdGhlIGNvbnRleHQgaXMgZW1wdHkiKX1uZXh0SXRlcmF0aW9uKCl7aWYodGhpcy5jb250ZXh0cyYmdGhpcy5jb250ZXh0cy5sZW5ndGg+MCl7dGhpcy5jb250ZXh0cz10aGlzLmNvbnRleHRzLnNsaWNlKCksdGhpcy5sYXN0SWQrKztjb25zdCBlPU9iamVjdC5hc3NpZ24oe30sdGhpcy5jb250ZXh0c1t0aGlzLmNvbnRleHRzLmxlbmd0aC0xXSk7ZS5pdGVyYXRpb25JZCs9MSxlLmlkPXRoaXMubGFzdElkLHRoaXMuY29udGV4dHMuc3BsaWNlKC0xLDEsZSksdGhpcy5fY3VycmVudENvbnRleHRJZHMuc3BsaWNlKDAsMSx0aGlzLmNvbnRleHRJZGZvckNvbnRleHRzKHRoaXMuY29udGV4dHMpKX1lbHNlIHRocm93IG5ldyBFcnJvcigiQ2Fubm90IGluY3JlYXNlIGZyYW1lIGl0ZXJhdGlvbiwgdGhlIGNvbnRleHQgaXMgZW1wdHkiKX1nZXRXZWlnaHQoZSl7cmV0dXJuIHRoaXMud2VpZ2h0TWFwW2VdfWFkZFRlbnNvckFycmF5KGUpe3RoaXMudGVuc29yQXJyYXlNYXBbZS5pZF09ZX1nZXRUZW5zb3JBcnJheShlKXtyZXR1cm4gdGhpcy50ZW5zb3JBcnJheU1hcFtlXX1hZGRUZW5zb3JMaXN0KGUpe3RoaXMudGVuc29yTGlzdE1hcFtlLmlkXT1lfWdldFRlbnNvckxpc3QoZSl7cmV0dXJuIHRoaXMudGVuc29yTGlzdE1hcFtlXX1kaXNwb3NlKGUpe2Zvcihjb25zdCB0IGluIHRoaXMudGVuc29yQXJyYXlNYXApdGhpcy50ZW5zb3JBcnJheU1hcFt0XS5jbGVhckFuZENsb3NlKGUpO2Zvcihjb25zdCB0IGluIHRoaXMudGVuc29yTGlzdE1hcCl0aGlzLnRlbnNvckxpc3RNYXBbdF0uY2xlYXJBbmRDbG9zZShlKX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gYkMobixlLHQscyl7Y29uc3Qgcj1uZXcgU2V0LG89W107bGV0IGk9bnVsbCxhPW51bGw7Y29uc3QgbD1uZXcgU2V0LGM9bmV3IFNldChPYmplY3Qua2V5cyhuKS5tYXAoZj0+eHMoZilbMF0pKTtzPXN8fFtdO2NvbnN0IGg9bmV3IFNldChzLm1hcChmPT54cyhmLm5hbWUpWzBdKSkscD1bLi4uZV07Zm9yKDtwLmxlbmd0aD4wOyl7Y29uc3QgZj1wLnBvcCgpO2lmKChYaShmKXx8VTYoZil8fGo2KGYpKSYmaT09bnVsbCYmKGk9ZixhPWkuY2hpbGRyZW4ubWFwKGc9PmcubmFtZSkuZmlsdGVyKGc9PnIuaGFzKGcpKSksci5hZGQoZi5uYW1lKSx0W2YubmFtZV09PW51bGwmJiFjLmhhcyhmLm5hbWUpJiYhaC5oYXMoZi5uYW1lKSl7aWYoZi5pbnB1dHMubGVuZ3RoPT09MCl7by5wdXNoKGYubmFtZSk7Y29udGludWV9Zi5pbnB1dHMuZm9yRWFjaChnPT57bC5oYXMoZy5uYW1lKXx8KGwuYWRkKGcubmFtZSkscC5wdXNoKGcpKX0pfX1yZXR1cm57aW5wdXRzOm4sb3V0cHV0czplLHVzZWROb2RlczpyLG1pc3NpbmdJbnB1dHM6byxkeW5hbWljTm9kZTppLHN5bmNJbnB1dHM6YX19ZnVuY3Rpb24gTDYobixlKXtjb25zdHt1c2VkTm9kZXM6dCxpbnB1dHM6c309ZSxyPU9iamVjdC5rZXlzKHMpLm1hcChiPT54cyhiKVswXSkubWFwKGI9Pm4ubm9kZXNbYl0pLG89bi5pbml0Tm9kZXN8fFtdLGk9Yj0+dC5oYXModHlwZW9mIGI9PSJzdHJpbmciP2I6Yi5uYW1lKTtmdW5jdGlvbiBhKGIpe3JldHVyblsuLi5uZXcgTWFwKGIubWFwKHY9Plt2Lm5hbWUsdl0pKS52YWx1ZXMoKV19Y29uc3QgbD1hKFsuLi5yLC4uLm4ud2VpZ2h0cywuLi5vXSkuZmlsdGVyKGkpLGM9YShbLi4ubCwuLi5PYmplY3QudmFsdWVzKG4ubm9kZXMpXSkuZmlsdGVyKGkpLGg9bmV3IE1hcChjLm1hcChiPT5bYi5uYW1lLGJdKSkscD17fTtmb3IoY29uc3QgYiBvZiBjKXtwW2IubmFtZV09cFtiLm5hbWVdfHwwO2Zvcihjb25zdCB2IG9mIGIuY2hpbGRyZW4paSh2KXx8KHBbdi5uYW1lXT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLHBbdi5uYW1lXT0ocFt2Lm5hbWVdfHwwKSsxfWNvbnN0IGY9T2JqZWN0LmVudHJpZXMocCkuZmlsdGVyKChbLGJdKT0+Yj09PTApLm1hcCgoW2JdKT0+YiksZz1bLi4uZl07Zm9yKDtmLmxlbmd0aD4wOyl7Y29uc3QgYj1mLnBvcCgpLHY9aC5nZXQoYik7Zm9yKGNvbnN0IFMgb2Ygdi5jaGlsZHJlbi5maWx0ZXIoaSkpLS1wW1MubmFtZV09PT0wJiYoZy5wdXNoKFMubmFtZSksZi5wdXNoKFMubmFtZSkpfWNvbnN0IHk9Zy5tYXAoYj0+aC5nZXQoYikpLHc9UDYoeSxsKTtyZXR1cm4gejYodyxsKSx3fWZ1bmN0aW9uIFA2KG4sZSl7Y29uc3QgdD1uZXcgTWFwKG4ubWFwKGk9PltpLm5hbWUsaV0pKSxzPWUubWFwKGk9PmkubmFtZSkscj1uZXcgU2V0KHMpO2Zvcig7cy5sZW5ndGg+MDspe2NvbnN0IGk9cy5wb3AoKSxhPXQuZ2V0KGkpO2Zvcihjb25zdCBsIG9mIGEuY2hpbGRyZW4pIXQuaGFzKGwubmFtZSl8fHIuaGFzKGwubmFtZSl8fChyLmFkZChsLm5hbWUpLHMucHVzaChsLm5hbWUpKX1yZXR1cm4gbi5maWx0ZXIoaT0+ci5oYXMoaS5uYW1lKSl9Y2xhc3MgZWYgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXtzdXBlcihgTm9kZXNFeGVjdXRpb25PcmRlckVycm9yOiAke2V9YCl9fWZ1bmN0aW9uIHo2KG4sZSl7Y29uc3QgdD1uZXcgTWFwKG4ubWFwKChhLGwpPT5bYS5uYW1lLGxdKSkscz1uZXcgU2V0KGUubWFwKGE9PmEubmFtZSkpLHI9YT0+cy5oYXModHlwZW9mIGE9PSJzdHJpbmciP2E6YS5uYW1lKSxvPW5ldyBTZXQobi5tYXAoYT0+YS5uYW1lKSksaT1hPT5vLmhhcyh0eXBlb2YgYT09InN0cmluZyI/YTphLm5hbWUpO2Zvcihjb25zdCBhIG9mIG4pe2Zvcihjb25zdCBsIG9mIGEuY2hpbGRyZW4uZmlsdGVyKGkpKXtpZighdC5oYXMobC5uYW1lKSl0aHJvdyBuZXcgZWYoYENoaWxkICR7bC5uYW1lfSBvZiBub2RlICR7YS5uYW1lfSBpcyB1bnJlYWNoYWJsZS5gKTtpZih0LmdldChhLm5hbWUpPnQuZ2V0KGwubmFtZSkpdGhyb3cgbmV3IGVmKGBOb2RlICR7YS5uYW1lfSBpcyBzY2hlZHVsZWQgdG8gcnVuIGFmdGVyIGl0cyBjaGlsZCAke2wubmFtZX0uYCl9aWYoIXIoYSkpZm9yKGNvbnN0IGwgb2YgYS5pbnB1dHMpe2lmKCF0LmhhcyhsLm5hbWUpKXRocm93IG5ldyBlZihgSW5wdXQgJHtsLm5hbWV9IG9mIG5vZGUgJHthLm5hbWV9IGlzIHVucmVhY2hhYmxlLmApO2lmKHQuZ2V0KGwubmFtZSk+dC5nZXQoYS5uYW1lKSl0aHJvdyBuZXcgZWYoYE5vZGUgJHthLm5hbWV9IGlzIHNjaGVkdWxlZCB0byBydW4gYmVmb3JlIGl0cyBpbnB1dCAke2wubmFtZX0uYCl9fX1mdW5jdGlvbiBNNihuKXtjb25zdCBlPW5ldyBNYXAobi5tYXAoKGEsbCk9PlthLm5hbWUsbF0pKSx0PU51bWJlci5NQVhfU0FGRV9JTlRFR0VSLHM9bi5tYXAoKGEsbCk9PlhpKGEpP3Q6bCkscj1hPT57Y29uc3QgbD1zW2UuZ2V0KGEubmFtZSldO3JldHVybiBsPz8tMX0sbz1uLm1hcCgoYSxsKT0+YS5jaGlsZHJlbi5tYXAocikucmVkdWNlKChjLGgpPT5NYXRoLm1heChjLGgpLHNbbF0pKSxpPW5ldyBNYXA7Zm9yKGxldCBhPTA7YTxuLmxlbmd0aDsrK2Epe2NvbnN0IGw9b1thXTtpZihsPT09dCljb250aW51ZTtjb25zdCBjPW5bYV0saD1uW2xdO2kuaGFzKGgubmFtZSl8fGkuc2V0KGgubmFtZSxbXSksaS5nZXQoaC5uYW1lKS5wdXNoKGMpfXJldHVybiBpfWNvbnN0IEI2PW5ldyBTZXQoWyJTd2l0Y2giLCJNZXJnZSIsIkVudGVyIiwiRXhpdCIsIk5leHRJdGVyYXRpb24iLCJTdGF0ZWxlc3NJZiIsIlN0YXRlbGVzc1doaWxlIiwiaWYiLCJXaGlsZSJdKSxWNj1uZXcgU2V0KFsiTm9uTWF4U3VwcHJlc3Npb25WMiIsIk5vbk1heFN1cHByZXNzaW9uVjMiLCJOb25NYXhTdXBwcmVzc2lvblY1IiwiV2hlcmUiXSksVzY9bmV3IFNldChbIkhhc2hUYWJsZSIsIkhhc2hUYWJsZVYyIiwiTG9va3VwVGFibGVJbXBvcnQiLCJMb29rdXBUYWJsZUltcG9ydFYyIiwiTG9va3VwVGFibGVGaW5kIiwiTG9va3VwVGFibGVGaW5kVjIiLCJMb29rdXBUYWJsZVNpemUiLCJMb29rdXBUYWJsZVNpemVWMiJdKTtmdW5jdGlvbiBYaShuKXtyZXR1cm4gQjYuaGFzKG4ub3ApfWZ1bmN0aW9uIFU2KG4pe3JldHVybiBWNi5oYXMobi5vcCl9ZnVuY3Rpb24gajYobil7cmV0dXJuIFc2LmhhcyhuLm9wKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBXZntnZXQgd2VpZ2h0SWRzKCl7cmV0dXJuIHRoaXMucGFyZW50P3RoaXMucGFyZW50LndlaWdodElkczp0aGlzLl93ZWlnaHRJZHN9Z2V0IGZ1bmN0aW9uRXhlY3V0b3JNYXAoKXtyZXR1cm4gdGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuZnVuY3Rpb25FeGVjdXRvck1hcDp0aGlzLl9mdW5jdGlvbkV4ZWN1dG9yTWFwfWdldCB3ZWlnaHRNYXAoKXtyZXR1cm4gdGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQud2VpZ2h0TWFwOnRoaXMuX3dlaWdodE1hcH1zZXQgd2VpZ2h0TWFwKGUpe2NvbnN0IHQ9T2JqZWN0LmtleXMoZSkubWFwKHM9PmVbc10ubWFwKHI9PnIuaWQpKTt0aGlzLl93ZWlnaHRJZHM9W10uY29uY2F0KC4uLnQpLHRoaXMuX3dlaWdodE1hcD1lfXNldCByZXNvdXJjZU1hbmFnZXIoZSl7dGhpcy5fcmVzb3VyY2VNYW5hZ2VyPWV9Z2V0IGlucHV0cygpe3JldHVybiB0aGlzLl9pbnB1dHMubWFwKGU9Pih7bmFtZTplLm5hbWUsc2hhcGU6ZS5hdHRyUGFyYW1zLnNoYXBlP2UuYXR0clBhcmFtcy5zaGFwZS52YWx1ZTp2b2lkIDAsZHR5cGU6ZS5hdHRyUGFyYW1zLmR0eXBlP2UuYXR0clBhcmFtcy5kdHlwZS52YWx1ZTp2b2lkIDB9KSl9Z2V0IG91dHB1dHMoKXtyZXR1cm4gdGhpcy5fb3V0cHV0cy5tYXAoZT0+KHtuYW1lOmUubmFtZSxzaGFwZTplLmF0dHJQYXJhbXMuc2hhcGU/ZS5hdHRyUGFyYW1zLnNoYXBlLnZhbHVlOnZvaWQgMCxkdHlwZTplLmF0dHJQYXJhbXMuZHR5cGU/ZS5hdHRyUGFyYW1zLmR0eXBlLnZhbHVlOnZvaWQgMH0pKX1nZXQgaW5wdXROb2Rlcygpe3JldHVybiB0aGlzLl9pbnB1dHMubWFwKGU9PmUuc2lnbmF0dXJlS2V5fHxlLm5hbWUpfWdldCBvdXRwdXROb2Rlcygpe3JldHVybiB0aGlzLl9vdXRwdXRzLm1hcChlPT57Y29uc3QgdD1lLnNpZ25hdHVyZUtleXx8ZS5uYW1lO3JldHVybiBlLmRlZmF1bHRPdXRwdXQ/YCR7dH06JHtlLmRlZmF1bHRPdXRwdXR9YDp0fSl9Z2V0IGZ1bmN0aW9ucygpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9mdW5jdGlvbnMpLnJlZHVjZSgoZSx0KT0+KGVbdF09dGhpcy5fZnVuY3Rpb25zW3RdLnNpZ25hdHVyZSxlKSx7fSl9Y29uc3RydWN0b3IoZSx0KXt0aGlzLmdyYXBoPWUsdGhpcy5wYXJlbnQ9dCx0aGlzLmNvbXBpbGVkTWFwPW5ldyBNYXAsdGhpcy5wYXJzZU5vZGVOYW1lQ2FjaGU9bmV3IE1hcCx0aGlzLl93ZWlnaHRNYXA9e30sdGhpcy5TRVBBUkFUT1I9IiwiLHRoaXMuX2Z1bmN0aW9ucz17fSx0aGlzLl9mdW5jdGlvbkV4ZWN1dG9yTWFwPXt9LHRoaXMua2VlcEludGVybWVkaWF0ZVRlbnNvcnM9ITEsdGhpcy5fb3V0cHV0cz1lLm91dHB1dHMsdGhpcy5faW5wdXRzPWUuaW5wdXRzLHRoaXMuX2luaXROb2Rlcz1lLmluaXROb2Rlcyx0aGlzLl9zaWduYXR1cmU9ZS5zaWduYXR1cmUsdGhpcy5fZnVuY3Rpb25zPWUuZnVuY3Rpb25zLGUuZnVuY3Rpb25zIT1udWxsJiZPYmplY3Qua2V5cyhlLmZ1bmN0aW9ucykuZm9yRWFjaChzPT57dGhpcy5fZnVuY3Rpb25FeGVjdXRvck1hcFtzXT1uZXcgV2YoZS5mdW5jdGlvbnNbc10sdGhpcyl9KX1nZXRDb21waWxhdGlvbktleShlLHQpe2NvbnN0IHM9ZS5tYXAobz0+by5uYW1lKS5zb3J0KCkscj10Lm1hcChvPT5vLm5hbWUpLnNvcnQoKTtyZXR1cm4gcy5qb2luKHRoaXMuU0VQQVJBVE9SKSsiLS0iK3Iuam9pbih0aGlzLlNFUEFSQVRPUil9Y29tcGlsZShlLHQpe2NvbnN0IHM9YkMoZSx0LHRoaXMud2VpZ2h0TWFwLHRoaXMuX2luaXROb2Rlcykse21pc3NpbmdJbnB1dHM6cixkeW5hbWljTm9kZTpvLHN5bmNJbnB1dHM6aX09cztpZihvIT1udWxsKXRocm93IG5ldyBFcnJvcihgVGhpcyBleGVjdXRpb24gY29udGFpbnMgdGhlIG5vZGUgJyR7by5uYW1lfScsIHdoaWNoIGhhcyB0aGUgZHluYW1pYyBvcCAnJHtvLm9wfScuIFBsZWFzZSB1c2UgbW9kZWwuZXhlY3V0ZUFzeW5jKCkgaW5zdGVhZC4gQWx0ZXJuYXRpdmVseSwgdG8gYXZvaWQgdGhlIGR5bmFtaWMgb3BzLCBzcGVjaWZ5IHRoZSBpbnB1dHMgWyR7aX1dYCk7aWYoci5sZW5ndGg+MCl7Y29uc3QgYz10Lm1hcChwPT5wLm5hbWUpLGg9T2JqZWN0LmtleXMoZSk7dGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29tcHV0ZSB0aGUgb3V0cHV0cyBbJHtjfV0gZnJvbSB0aGUgcHJvdmlkZWQgaW5wdXRzIFske2h9XS4gTWlzc2luZyB0aGUgZm9sbG93aW5nIGlucHV0czogWyR7cn1dYCl9Y29uc3QgYT1MNih0aGlzLmdyYXBoLHMpLGw9TTYoYSk7cmV0dXJue29yZGVyZWROb2RlczphLG5vZGVMaXZlVW50aWxNYXA6bH19Y2xvbmVBbmRLZWVwVGVuc29yKGUpe2lmKGU9PW51bGwpcmV0dXJuIG51bGw7Y29uc3QgdD1lLmNsb25lKCk7cmV0dXJuIGVuKHQpLHR9Y2xvbmVUZW5zb3JMaXN0KGUpe3JldHVybiBlP2UubWFwKHM9PnRoaXMuY2xvbmVBbmRLZWVwVGVuc29yKHMpKTpudWxsfWNsb25lVGVuc29yTWFwKGUpe3JldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoZSkubWFwKChbdCxzXSk9Plt0LHRoaXMuY2xvbmVUZW5zb3JMaXN0KHMpXSkpfWV4ZWN1dGUoZSx0KXt0aGlzLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JzKCksZT10aGlzLm1hcElucHV0cyhlKTtjb25zdCBzPU9iamVjdC5rZXlzKGUpLnNvcnQoKTt0aGlzLmNoZWNrSW5wdXRzKGUpLHRoaXMuY2hlY2tJbnB1dFNoYXBlQW5kVHlwZShlKSx0PXRoaXMubWFwT3V0cHV0cyh0KSx0aGlzLmNoZWNrT3V0cHV0cyh0KTtjb25zdCByPXMubWFwKGY9PnRoaXMuZ3JhcGgubm9kZXNbeHMoZilbMF1dKSxvPXQubWFwKGY9PnhzKGYpWzBdKSxpPW5ldyBTZXQobyk7bGV0IGE9by5tYXAoZj0+dGhpcy5ncmFwaC5ub2Rlc1tmXSk7YS5sZW5ndGg9PT0wJiYoYT10aGlzLl9vdXRwdXRzKTtjb25zdCBsPXRoaXMuZ2V0Q29tcGlsYXRpb25LZXkocixhKTtsZXQgYz10aGlzLmNvbXBpbGVkTWFwLmdldChsKTtjPT1udWxsJiYoYz10aGlzLmNvbXBpbGUoZSxhKSx0aGlzLmNvbXBpbGVkTWFwLnNldChsLGMpKTt0cnl7dGhpcy5rZWVwSW50ZXJtZWRpYXRlVGVuc29ycz1vZSgpLmdldEJvb2woIktFRVBfSU5URVJNRURJQVRFX1RFTlNPUlMiKX1jYXRjaChmKXt0aGlzLmtlZXBJbnRlcm1lZGlhdGVUZW5zb3JzPSExLGNvbnNvbGUud2FybihmLm1lc3NhZ2UpfWNvbnN0IGg9e30scD17fTtyZXR1cm4gcmUoKCk9Pntjb25zdCBmPW5ldyB4Qyh0aGlzLndlaWdodE1hcCxoLHAsdGhpcy5mdW5jdGlvbkV4ZWN1dG9yTWFwLHRoaXMucGFyc2VOb2RlTmFtZUNhY2hlKSxnPU9iamVjdC5hc3NpZ24oe30sdGhpcy53ZWlnaHRNYXApO3RoaXMua2VlcEludGVybWVkaWF0ZVRlbnNvcnMmJih0aGlzLmNsb25lZFRlbnNvcnNNYXA9dGhpcy5jbG9uZVRlbnNvck1hcCh0aGlzLndlaWdodE1hcCkpLE9iamVjdC5rZXlzKGUpLmZvckVhY2godj0+e2NvbnN0W1MsJF09eHModixmKSxrPVtdO2tbJF09ZVt2XSxnW1NdPWssdGhpcy5rZWVwSW50ZXJtZWRpYXRlVGVuc29ycyYmKHRoaXMuY2xvbmVkVGVuc29yc01hcFtTXT10aGlzLmNsb25lVGVuc29yTGlzdChrKSl9KTtjb25zdCB5PXRoaXMuZ2V0RnJvemVuVGVuc29ySWRzKGcpLHtvcmRlcmVkTm9kZXM6dyxub2RlTGl2ZVVudGlsTWFwOmJ9PWM7Zm9yKGNvbnN0IHYgb2Ygdyl7aWYoZ1t2Lm5hbWVdKWNvbnRpbnVlO2NvbnN0IFM9eUModixnLGYsdGhpcy5fcmVzb3VyY2VNYW5hZ2VyKTtpZihpaShTKSl0aHJvdyBuZXcgRXJyb3IoYFRoZSBleGVjdXRpb24gb2YgdGhlIG9wICcke3Yub3B9JyByZXR1cm5lZCBhIHByb21pc2UuIFBsZWFzZSB1c2UgbW9kZWwuZXhlY3V0ZUFzeW5jKCkgaW5zdGVhZC5gKTtnW3YubmFtZV09Uyx0aGlzLmtlZXBJbnRlcm1lZGlhdGVUZW5zb3JzJiYodGhpcy5jbG9uZWRUZW5zb3JzTWFwW3YubmFtZV09dGhpcy5jbG9uZVRlbnNvckxpc3QoUykpLHRoaXMuY2hlY2tUZW5zb3JGb3JEaXNwb3NhbFdpdGhOb2RlTGl2ZVVudGlsSW5mbyh2LGcsZix5LGksYi5nZXQodi5uYW1lKSl9cmV0dXJuIHRoaXMucGFyZW50PT1udWxsJiZmLmRpc3Bvc2UoeSksdC5tYXAodj0+Ym4odixnLGYpKX0pfWdldEZyb3plblRlbnNvcklkcyhlKXtjb25zdCB0PVtdLmNvbmNhdC5hcHBseShbXSxPYmplY3Qua2V5cyhlKS5tYXAocz0+ZVtzXSkubWFwKHM9PnMubWFwKHI9PnIuaWQpKSk7cmV0dXJuIG5ldyBTZXQodCl9Y2hlY2tUZW5zb3JGb3JEaXNwb3NhbChlLHQscyxyLG8saSxhKXtpZighKFhpKHQpfHxpLmhhcyhlKSkpe2Zvcihjb25zdCBsIG9mIHNbZV0pbCE9bnVsbCYmKGFbbC5pZF09KGFbbC5pZF18fDApK3QuY2hpbGRyZW4ubGVuZ3RoKTtmb3IoY29uc3QgbCBvZiB0LmlucHV0cyl7aWYoWGkobCkpY29udGludWU7Y29uc3QgYz1oQyhsLm5hbWUscyxyKTtpZihjIT1udWxsKWZvcihjb25zdCBoIG9mIGMpe2lmKCFofHxoLmtlcHR8fG8uaGFzKGguaWQpKWNvbnRpbnVlO2NvbnN0IHA9YVtoLmlkXTtwPT09MT8oaC5kaXNwb3NlKCksZGVsZXRlIGFbaC5pZF0pOnAhPW51bGwmJmFbaC5pZF0tLX19fX1jaGVja1RlbnNvckZvckRpc3Bvc2FsV2l0aE5vZGVMaXZlVW50aWxJbmZvKGUsdCxzLHIsbyxpKXtmdW5jdGlvbiBhKGwpe3JldHVybiBYaShsKXx8by5oYXMobC5uYW1lKX1pZighKFhpKGUpfHxpPT1udWxsKSlmb3IoY29uc3QgbCBvZiBpKXtpZihhKGwpKWNvbnRpbnVlO2NvbnN0IGM9aEMobC5uYW1lLHQscyk7Zm9yKGNvbnN0IGggb2YgYykhaHx8aC5rZXB0fHxyLmhhcyhoLmlkKXx8aC5kaXNwb3NlKCl9fWFzeW5jIGV4ZWN1dGVBc3luYyhlLHQpe3JldHVybiB0aGlzLl9leGVjdXRlQXN5bmMoZSx0KX1kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ycygpe3RoaXMuY2xvbmVkVGVuc29yc01hcCYmKE9iamVjdC52YWx1ZXModGhpcy5jbG9uZWRUZW5zb3JzTWFwKS5mb3JFYWNoKGU9Pntmb3IoY29uc3QgdCBvZiBlKXQmJiF0LmlzRGlzcG9zZWQmJnQuZGlzcG9zZSgpfSksdGhpcy5jbG9uZWRUZW5zb3JzTWFwPW51bGwpfWdldEludGVybWVkaWF0ZVRlbnNvcnMoKXtyZXR1cm4gdGhpcy5jbG9uZWRUZW5zb3JzTWFwfWFzeW5jIF9leGVjdXRlQXN5bmMoZSx0LHM9ITEscj17fSxvPXt9KXt0aGlzLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JzKCksc3x8KGU9dGhpcy5tYXBJbnB1dHMoZSksdGhpcy5jaGVja0lucHV0cyhlKSx0aGlzLmNoZWNrSW5wdXRTaGFwZUFuZFR5cGUoZSksdD10aGlzLm1hcE91dHB1dHModCksdGhpcy5jaGVja091dHB1dHModCkpO3RyeXt0aGlzLmtlZXBJbnRlcm1lZGlhdGVUZW5zb3JzPW9lKCkuZ2V0Qm9vbCgiS0VFUF9JTlRFUk1FRElBVEVfVEVOU09SUyIpfWNhdGNoKGYpe3RoaXMua2VlcEludGVybWVkaWF0ZVRlbnNvcnM9ITEsY29uc29sZS53YXJuKGYubWVzc2FnZSl9Y29uc3QgaT1uZXcgeEModGhpcy53ZWlnaHRNYXAscixvLHRoaXMuZnVuY3Rpb25FeGVjdXRvck1hcCx0aGlzLnBhcnNlTm9kZU5hbWVDYWNoZSk7dGhpcy5rZWVwSW50ZXJtZWRpYXRlVGVuc29ycyYmKHRoaXMuY2xvbmVkVGVuc29yc01hcD10aGlzLmNsb25lVGVuc29yTWFwKHRoaXMud2VpZ2h0TWFwKSk7Y29uc3QgYT1hd2FpdCB0aGlzLmV4ZWN1dGVXaXRoQ29udHJvbEZsb3coZSxpLHQscyksbD10Lm1hcChmPT5ibihmLGEsaSkpLGM9bC5tYXAoZj0+Zi5pZCksaD1PYmplY3Qua2V5cyhlKS5tYXAoZj0+ZVtmXS5pZCkscD1uZXcgU2V0KFsuLi5jLC4uLmgsLi4udGhpcy53ZWlnaHRJZHNdKTtyZXR1cm4gT2JqZWN0LnZhbHVlcyhhKS5mb3JFYWNoKGY9PntmLmZvckVhY2goZz0+e2cmJiFnLmlzRGlzcG9zZWQmJiFwLmhhcyhnLmlkKSYmZy5kaXNwb3NlKCl9KX0pLHRoaXMucGFyZW50PT1udWxsJiZpLmRpc3Bvc2UocCksbH1hc3luYyBleGVjdXRlRnVuY3Rpb25Bc3luYyhlLHQscyl7Y29uc3Qgcj1lLnJlZHVjZSgobyxpLGEpPT4ob1t0aGlzLmlucHV0c1thXS5uYW1lXT1pLG8pLHt9KTtyZXR1cm4gdGhpcy5fZXhlY3V0ZUFzeW5jKHIsdGhpcy5vdXRwdXROb2RlcywhMCx0LHMpfWFzeW5jIGV4ZWN1dGVXaXRoQ29udHJvbEZsb3coZSx0LHMscil7Y29uc3Qgbz1PYmplY3Qua2V5cyhlKSxpPW8ubWFwKGs9PnRoaXMuZ3JhcGgubm9kZXNbeHMoaylbMF1dKSxhPXMubWFwKGs9PnhzKGspWzBdKSxsPW5ldyBTZXQoYSk7bGV0IGM9YS5tYXAoaz0+dGhpcy5ncmFwaC5ub2Rlc1trXSk7Yy5sZW5ndGg9PT0wJiYoYz10aGlzLl9vdXRwdXRzKTtjb25zdHt1c2VkTm9kZXM6aCxtaXNzaW5nSW5wdXRzOnAsZHluYW1pY05vZGU6ZixzeW5jSW5wdXRzOmd9PWJDKGUsYyx0aGlzLndlaWdodE1hcCx0aGlzLl9pbml0Tm9kZXMpLHk9Wy4uLmksLi4udGhpcy5ncmFwaC53ZWlnaHRzLC4uLnRoaXMuX2luaXROb2Rlc3x8W11dLm1hcChrPT4oe25vZGU6ayxjb250ZXh0czp0LmN1cnJlbnRDb250ZXh0fSkpLHc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLndlaWdodE1hcCk7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChrPT57Y29uc3RbVCxEXT14cyhrKSxMPVtdO0xbRF09ZVtrXSx3W1RdPUx9KTtjb25zdCBiPXt9LHY9dGhpcy5nZXRGcm96ZW5UZW5zb3JJZHModyksUz17fTtmb3IoO3kubGVuZ3RoPjA7KXtjb25zdCBrPXRoaXMucHJvY2Vzc1N0YWNrKGkseSx0LHcsUyx2LGwsYixoKTthd2FpdCBQcm9taXNlLmFsbChrKX1mPT1udWxsJiYhciYmY29uc29sZS53YXJuKCJUaGlzIG1vZGVsIGV4ZWN1dGlvbiBkaWQgbm90IGNvbnRhaW4gYW55IG5vZGVzIHdpdGggY29udHJvbCBmbG93IG9yIGR5bmFtaWMgb3V0cHV0IHNoYXBlcy4gWW91IGNhbiB1c2UgbW9kZWwuZXhlY3V0ZSgpIGluc3RlYWQuIik7Y29uc3QgJD1jLmZpbHRlcihrPT4hWGkoaykmJiFibihrLm5hbWUsdyx0KSkubWFwKGs9PmsubmFtZSk7aWYoJC5sZW5ndGg+MCl7bGV0IGs9IiI7dGhyb3cgZiE9bnVsbCYmKGs9YEFsdGVybmF0aXZlbHksIHRvIGF2b2lkIHRoZSBkeW5hbWljIG9wcywgdXNlIG1vZGVsLmV4ZWN1dGUoKSBhbmQgc3BlY2lmeSB0aGUgaW5wdXRzIFske2d9XWApLG5ldyBFcnJvcihgQ2Fubm90IGNvbXB1dGUgdGhlIG91dHB1dHMgWyR7JH1dIGZyb20gdGhlIHByb3ZpZGVkIGlucHV0cyBbJHtvfV0uIENvbnNpZGVyIHByb3ZpZGluZyB0aGUgZm9sbG93aW5nIGlucHV0czogWyR7cH1dLiAke2t9YCl9cmV0dXJuIHd9cHJvY2Vzc1N0YWNrKGUsdCxzLHIsbyxpLGEsbCxjKXtjb25zdCBoPVtdO2Zvcig7dC5sZW5ndGg+MDspe2NvbnN0IHA9dC5wb3AoKTtzLmN1cnJlbnRDb250ZXh0PXAuY29udGV4dHM7bGV0IGY9IiI7aWYocC5ub2RlLm9wPT09IkVudGVyIiYmSSgiaXNDb25zdGFudCIscC5ub2RlLHIscykmJihbZl09Y28ocC5ub2RlLm5hbWUscykpLHJbcC5ub2RlLm5hbWVdPT1udWxsKXtjb25zdCBnPXlDKHAubm9kZSxyLHMsdGhpcy5fcmVzb3VyY2VNYW5hZ2VyKTtmfHwoW2ZdPWNvKHAubm9kZS5uYW1lLHMpKTtjb25zdCB5PXMuY3VycmVudENvbnRleHQ7aWkoZyk/aC5wdXNoKGcudGhlbih3PT4ocltmXT13LHRoaXMua2VlcEludGVybWVkaWF0ZVRlbnNvcnMmJih0aGlzLmNsb25lZFRlbnNvcnNNYXBbZl09dGhpcy5jbG9uZVRlbnNvckxpc3QodykpLHMuY3VycmVudENvbnRleHQ9eSx0aGlzLmNoZWNrVGVuc29yRm9yRGlzcG9zYWwoZixwLm5vZGUscixzLGksYSxsKSx0aGlzLnByb2Nlc3NDaGlsZE5vZGVzKHAubm9kZSx0LHMscixvLGMpLHcpKSk6KHJbZl09Zyx0aGlzLmtlZXBJbnRlcm1lZGlhdGVUZW5zb3JzJiYodGhpcy5jbG9uZWRUZW5zb3JzTWFwW2ZdPXRoaXMuY2xvbmVUZW5zb3JMaXN0KGcpKSx0aGlzLmNoZWNrVGVuc29yRm9yRGlzcG9zYWwoZixwLm5vZGUscixzLGksYSxsKSx0aGlzLnByb2Nlc3NDaGlsZE5vZGVzKHAubm9kZSx0LHMscixvLGMpKX1lbHNlIHRoaXMucHJvY2Vzc0NoaWxkTm9kZXMocC5ub2RlLHQscyxyLG8sYyl9cmV0dXJuIGh9cHJvY2Vzc0NoaWxkTm9kZXMoZSx0LHMscixvLGkpe2UuY2hpbGRyZW4uZm9yRWFjaChhPT57Y29uc3RbbF09Y28oYS5uYW1lLHMpO29bbF18fCFpLmhhcyhhLm5hbWUpfHwoYS5vcD09PSJNZXJnZSI/YS5pbnB1dE5hbWVzLnNvbWUoYz0+ISFibihjLHIscykpJiYob1tsXT0hMCx0LnB1c2goe2NvbnRleHRzOnMuY3VycmVudENvbnRleHQsbm9kZTphfSkpOmEuaW5wdXROYW1lcy5ldmVyeShjPT4hIWJuKGMscixzKSkmJihvW2xdPSEwLHQucHVzaCh7Y29udGV4dHM6cy5jdXJyZW50Q29udGV4dCxub2RlOmF9KSkpfSl9ZGlzcG9zZSgpe09iamVjdC5rZXlzKHRoaXMud2VpZ2h0TWFwKS5mb3JFYWNoKGU9PnRoaXMud2VpZ2h0TWFwW2VdLmZvckVhY2godD0+dC5kaXNwb3NlKCkpKX1jaGVja0lucHV0U2hhcGVBbmRUeXBlKGUpe09iamVjdC5rZXlzKGUpLmZvckVhY2godD0+e2NvbnN0IHM9ZVt0XSxbcl09eHModCksbz10aGlzLmdyYXBoLm5vZGVzW3JdO2lmKG8uYXR0clBhcmFtcy5zaGFwZSYmby5hdHRyUGFyYW1zLnNoYXBlLnZhbHVlKXtjb25zdCBpPW8uYXR0clBhcmFtcy5zaGFwZS52YWx1ZSxhPWkubGVuZ3RoPT09cy5zaGFwZS5sZW5ndGgmJnMuc2hhcGUuZXZlcnkoKGwsYyk9PmlbY109PT0tMXx8aVtjXT09PWwpO0EoYSwoKT0+YFRoZSBzaGFwZSBvZiBkaWN0Wycke28ubmFtZX0nXSBwcm92aWRlZCBpbiBtb2RlbC5leGVjdXRlKGRpY3QpIG11c3QgYmUgWyR7aX1dLCBidXQgd2FzIFske3Muc2hhcGV9XWApfW8uYXR0clBhcmFtcy5kdHlwZSYmby5hdHRyUGFyYW1zLmR0eXBlLnZhbHVlJiZBKHMuZHR5cGU9PT1vLmF0dHJQYXJhbXMuZHR5cGUudmFsdWUsKCk9PmBUaGUgZHR5cGUgb2YgZGljdFsnJHtvLm5hbWV9J10gcHJvdmlkZWQgaW4gbW9kZWwuZXhlY3V0ZShkaWN0KSBtdXN0IGJlICR7by5hdHRyUGFyYW1zLmR0eXBlLnZhbHVlfSwgYnV0IHdhcyAke3MuZHR5cGV9YCl9KX1tYXBJbnB1dHMoZSl7dmFyIHQscztjb25zdCByPXt9O2Zvcihjb25zdCBvIGluIGUpe2NvbnN0IGk9KHM9KHQ9dGhpcy5fc2lnbmF0dXJlKT09PW51bGx8fHQ9PT12b2lkIDA/dm9pZCAwOnQuaW5wdXRzKT09PW51bGx8fHM9PT12b2lkIDA/dm9pZCAwOnNbb107aSE9bnVsbD9yW2kubmFtZV09ZVtvXTpyW29dPWVbb119cmV0dXJuIHJ9Y2hlY2tJbnB1dHMoZSl7Y29uc3QgdD1PYmplY3Qua2V5cyhlKS5maWx0ZXIocz0+e2NvbnN0W3JdPXhzKHMpO3JldHVybiB0aGlzLmdyYXBoLm5vZGVzW3JdPT1udWxsfSk7aWYodC5sZW5ndGg+MCl0aHJvdyBuZXcgRXJyb3IoYFRoZSBkaWN0IHByb3ZpZGVkIGluIG1vZGVsLmV4ZWN1dGUoZGljdCkgaGFzIGtleXM6IFske3R9XSB0aGF0IGFyZSBub3QgcGFydCBvZiBncmFwaGApfW1hcE91dHB1dHMoZSl7cmV0dXJuIGUubWFwKHQ9Pnt2YXIgcyxyO2NvbnN0IG89KHI9KHM9dGhpcy5fc2lnbmF0dXJlKT09PW51bGx8fHM9PT12b2lkIDA/dm9pZCAwOnMub3V0cHV0cyk9PT1udWxsfHxyPT09dm9pZCAwP3ZvaWQgMDpyW3RdO3JldHVybiBvIT1udWxsP28ubmFtZTp0fSx7fSl9Y2hlY2tPdXRwdXRzKGUpe2UuZm9yRWFjaCh0PT57Y29uc3Rbc109eHModCk7aWYoIXRoaXMuZ3JhcGgubm9kZXNbc10pdGhyb3cgbmV3IEVycm9yKGBUaGUgb3V0cHV0ICcke3R9JyBpcyBub3QgZm91bmQgaW4gdGhlIGdyYXBoYCl9KX19Y2xhc3MgRzZ7Y29uc3RydWN0b3IoZT17fSx0PXt9KXt0aGlzLmhhc2hUYWJsZU5hbWVUb0hhbmRsZT1lLHRoaXMuaGFzaFRhYmxlTWFwPXR9YWRkSGFzaFRhYmxlKGUsdCl7dGhpcy5oYXNoVGFibGVOYW1lVG9IYW5kbGVbZV09dC5oYW5kbGUsdGhpcy5oYXNoVGFibGVNYXBbdC5pZF09dH1nZXRIYXNoVGFibGVIYW5kbGVCeU5hbWUoZSl7cmV0dXJuIHRoaXMuaGFzaFRhYmxlTmFtZVRvSGFuZGxlW2VdfWdldEhhc2hUYWJsZUJ5SWQoZSl7cmV0dXJuIHRoaXMuaGFzaFRhYmxlTWFwW2VdfWRpc3Bvc2UoKXtmb3IoY29uc3QgZSBpbiB0aGlzLmhhc2hUYWJsZU1hcCl0aGlzLmhhc2hUYWJsZU1hcFtlXS5jbGVhckFuZENsb3NlKCksZGVsZXRlIHRoaXMuaGFzaFRhYmxlTWFwW2VdO2Zvcihjb25zdCBlIGluIHRoaXMuaGFzaFRhYmxlTmFtZVRvSGFuZGxlKXRoaXMuaGFzaFRhYmxlTmFtZVRvSGFuZGxlW2VdLmRpc3Bvc2UoKSxkZWxldGUgdGhpcy5oYXNoVGFibGVOYW1lVG9IYW5kbGVbZV19fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEg2PSI/dGZqcy1mb3JtYXQ9ZmlsZSIscTY9Im1vZGVsLmpzb24iO2NsYXNzIEp3e2dldCBtb2RlbFZlcnNpb24oKXtyZXR1cm4gdGhpcy52ZXJzaW9ufWdldCBpbnB1dE5vZGVzKCl7cmV0dXJuIHRoaXMuZXhlY3V0b3IuaW5wdXROb2Rlc31nZXQgb3V0cHV0Tm9kZXMoKXtyZXR1cm4gdGhpcy5leGVjdXRvci5vdXRwdXROb2Rlc31nZXQgaW5wdXRzKCl7cmV0dXJuIHRoaXMuZXhlY3V0b3IuaW5wdXRzfWdldCBvdXRwdXRzKCl7cmV0dXJuIHRoaXMuZXhlY3V0b3Iub3V0cHV0c31nZXQgd2VpZ2h0cygpe3JldHVybiB0aGlzLmV4ZWN1dG9yLndlaWdodE1hcH1nZXQgbWV0YWRhdGEoKXtyZXR1cm4gdGhpcy5hcnRpZmFjdHMudXNlckRlZmluZWRNZXRhZGF0YX1nZXQgbW9kZWxTaWduYXR1cmUoKXtyZXR1cm4gdGhpcy5zaWduYXR1cmV9Z2V0IG1vZGVsU3RydWN0dXJlZE91dHB1dEtleXMoKXtyZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkT3V0cHV0S2V5c31jb25zdHJ1Y3RvcihlLHQ9e30scz1zdyl7dGhpcy5tb2RlbFVybD1lLHRoaXMubG9hZE9wdGlvbnM9dCx0aGlzLnZlcnNpb249Im4vYSIsdGhpcy5pbz1zLHQ9PW51bGwmJih0aGlzLmxvYWRPcHRpb25zPXt9KSx0aGlzLnJlc291cmNlTWFuYWdlcj1uZXcgRzZ9ZmluZElPSGFuZGxlcigpe2NvbnN0IGU9dGhpcy5tb2RlbFVybDtpZihlLmxvYWQhPW51bGwpdGhpcy5oYW5kbGVyPWU7ZWxzZSBpZih0aGlzLmxvYWRPcHRpb25zLnJlcXVlc3RJbml0IT1udWxsKXRoaXMuaGFuZGxlcj10aGlzLmlvLmJyb3dzZXJIVFRQUmVxdWVzdChlLHRoaXMubG9hZE9wdGlvbnMpO2Vsc2V7Y29uc3QgdD10aGlzLmlvLmdldExvYWRIYW5kbGVycyhlLHRoaXMubG9hZE9wdGlvbnMpO2lmKHQubGVuZ3RoPT09MCl0LnB1c2godGhpcy5pby5icm93c2VySFRUUFJlcXVlc3QoZSx0aGlzLmxvYWRPcHRpb25zKSk7ZWxzZSBpZih0Lmxlbmd0aD4xKXRocm93IG5ldyBFcnJvcihgRm91bmQgbW9yZSB0aGFuIG9uZSAoJHt0Lmxlbmd0aH0pIGxvYWQgaGFuZGxlcnMgZm9yIFVSTCAnJHtbZV19J2ApO3RoaXMuaGFuZGxlcj10WzBdfX1sb2FkKCl7aWYodGhpcy5maW5kSU9IYW5kbGVyKCksdGhpcy5oYW5kbGVyLmxvYWQ9PW51bGwpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcHJvY2VlZCB3aXRoIG1vZGVsIGxvYWRpbmcgYmVjYXVzZSB0aGUgSU9IYW5kbGVyIHByb3ZpZGVkIGRvZXMgbm90IGhhdmUgdGhlIGBsb2FkYCBtZXRob2QgaW1wbGVtZW50ZWQuIik7Y29uc3QgZT10aGlzLmhhbmRsZXIubG9hZCgpO3JldHVybiBpaShlKT9lLnRoZW4odD0+dC5nZXRXZWlnaHRTdHJlYW09PW51bGw/dGhpcy5sb2FkU3luYyh0KTp0aGlzLmxvYWRTdHJlYW1pbmcodCkpOnRoaXMubG9hZFN5bmMoZSl9bG9hZFN5bmMoZSl7Y29uc3QgdD10aGlzLmlvLmRlY29kZVdlaWdodHMoZS53ZWlnaHREYXRhLGUud2VpZ2h0U3BlY3MpO3JldHVybiB0aGlzLmxvYWRXaXRoV2VpZ2h0TWFwKGUsdCl9YXN5bmMgbG9hZFN0cmVhbWluZyhlKXtpZihlLmdldFdlaWdodFN0cmVhbT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoIk1vZGVsIGFydGlmYWN0cyBtaXNzaW5nIHN0cmVhbVdlaWdodHMgZnVuY3Rpb24iKTtjb25zdCB0PWF3YWl0IEEkKGUuZ2V0V2VpZ2h0U3RyZWFtKCksZS53ZWlnaHRTcGVjcyk7cmV0dXJuIHRoaXMubG9hZFdpdGhXZWlnaHRNYXAoZSx0KX1sb2FkV2l0aFdlaWdodE1hcChlLHQpe3RoaXMuYXJ0aWZhY3RzPWU7Y29uc3Qgcz10aGlzLmFydGlmYWN0cy5tb2RlbFRvcG9sb2d5O2xldCByPXRoaXMuYXJ0aWZhY3RzLnNpZ25hdHVyZTtpZih0aGlzLmFydGlmYWN0cy51c2VyRGVmaW5lZE1ldGFkYXRhIT1udWxsKXtjb25zdCBvPXRoaXMuYXJ0aWZhY3RzLnVzZXJEZWZpbmVkTWV0YWRhdGE7by5zaWduYXR1cmUhPW51bGwmJihyPW8uc2lnbmF0dXJlKSxvLnN0cnVjdHVyZWRPdXRwdXRLZXlzIT1udWxsJiYodGhpcy5zdHJ1Y3R1cmVkT3V0cHV0S2V5cz1vLnN0cnVjdHVyZWRPdXRwdXRLZXlzKX1pZih0aGlzLnNpZ25hdHVyZT1yLHRoaXMudmVyc2lvbj1gJHtzLnZlcnNpb25zLnByb2R1Y2VyfS4ke3MudmVyc2lvbnMubWluQ29uc3VtZXJ9YCx0aGlzLmV4ZWN1dG9yPW5ldyBXZihwQy5JbnN0YW5jZS50cmFuc2Zvcm1HcmFwaChzLHRoaXMuc2lnbmF0dXJlKSksdGhpcy5leGVjdXRvci53ZWlnaHRNYXA9dGhpcy5jb252ZXJ0VGVuc29yTWFwVG9UZW5zb3JzTWFwKHQpLHRoaXMuZXhlY3V0b3IucmVzb3VyY2VNYW5hZ2VyPXRoaXMucmVzb3VyY2VNYW5hZ2VyLGUubW9kZWxJbml0aWFsaXplciE9bnVsbCYmZS5tb2RlbEluaXRpYWxpemVyLm5vZGUhPW51bGwpe2NvbnN0IG89cEMuSW5zdGFuY2UudHJhbnNmb3JtR3JhcGgoZS5tb2RlbEluaXRpYWxpemVyKTt0aGlzLmluaXRpYWxpemVyPW5ldyBXZihvKSx0aGlzLmluaXRpYWxpemVyLndlaWdodE1hcD10aGlzLmV4ZWN1dG9yLndlaWdodE1hcCx0aGlzLmluaXRpYWxpemVyLnJlc291cmNlTWFuYWdlcj10aGlzLnJlc291cmNlTWFuYWdlcix0aGlzLmluaXRpYWxpemVyU2lnbmF0dXJlPWUuaW5pdGlhbGl6ZXJTaWduYXR1cmV9cmV0dXJuITB9YXN5bmMgc2F2ZShlLHQpe2lmKHR5cGVvZiBlPT0ic3RyaW5nIil7Y29uc3Qgcz10aGlzLmlvLmdldFNhdmVIYW5kbGVycyhlKTtpZihzLmxlbmd0aD09PTApdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZmluZCBhbnkgc2F2ZSBoYW5kbGVycyBmb3IgVVJMICcke2V9J2ApO2lmKHMubGVuZ3RoPjEpdGhyb3cgbmV3IEVycm9yKGBGb3VuZCBtb3JlIHRoYW4gb25lICgke3MubGVuZ3RofSkgc2F2ZSBoYW5kbGVycyBmb3IgVVJMICcke2V9J2ApO2U9c1swXX1pZihlLnNhdmU9PW51bGwpdGhyb3cgbmV3IEVycm9yKCJHcmFwaE1vZGVsLnNhdmUoKSBjYW5ub3QgcHJvY2VlZCBiZWNhdXNlIHRoZSBJT0hhbmRsZXIgcHJvdmlkZWQgZG9lcyBub3QgaGF2ZSB0aGUgYHNhdmVgIGF0dHJpYnV0ZSBkZWZpbmVkLiIpO3JldHVybiBlLnNhdmUodGhpcy5hcnRpZmFjdHMpfWFkZFN0cnVjdHVyZWRPdXRwdXROYW1lcyhlKXtpZih0aGlzLnN0cnVjdHVyZWRPdXRwdXRLZXlzKXtjb25zdCB0PWUgaW5zdGFuY2VvZiBkdD9bZV06ZSxzPXt9O3JldHVybiB0LmZvckVhY2goKHIsbyk9PnNbdGhpcy5zdHJ1Y3R1cmVkT3V0cHV0S2V5c1tvXV09ciksc31yZXR1cm4gZX1wcmVkaWN0KGUsdCl7Y29uc3Qgcz10aGlzLmV4ZWN1dGUoZSx0aGlzLm91dHB1dE5vZGVzKTtyZXR1cm4gdGhpcy5hZGRTdHJ1Y3R1cmVkT3V0cHV0TmFtZXMocyl9YXN5bmMgcHJlZGljdEFzeW5jKGUsdCl7Y29uc3Qgcz1hd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyhlLHRoaXMub3V0cHV0Tm9kZXMpO3JldHVybiB0aGlzLmFkZFN0cnVjdHVyZWRPdXRwdXROYW1lcyhzKX1ub3JtYWxpemVJbnB1dHMoZSl7dmFyIHQ7aWYoIShlIGluc3RhbmNlb2YgZHQpJiYhQXJyYXkuaXNBcnJheShlKSl7Y29uc3Qgbz0odD10aGlzLnNpZ25hdHVyZSk9PT1udWxsfHx0PT09dm9pZCAwP3ZvaWQgMDp0LmlucHV0cztpZihvIT1udWxsKWZvcihjb25zdCBpIGluIG8pe2NvbnN0IGE9b1tpXTthLnJlc291cmNlSWQhPW51bGwmJihlW2ldPXRoaXMucmVzb3VyY2VJZFRvQ2FwdHVyZWRJbnB1dFthLnJlc291cmNlSWRdKX1yZXR1cm4gZX1lPUFycmF5LmlzQXJyYXkoZSk/ZTpbZV07Y29uc3Qgcz1PYmplY3Qua2V5cyh0aGlzLnJlc291cmNlSWRUb0NhcHR1cmVkSW5wdXQpLmxlbmd0aDtpZihlLmxlbmd0aCtzIT09dGhpcy5pbnB1dE5vZGVzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoYElucHV0IHRlbnNvciBjb3VudCBtaXNtYXRjaCwgdGhlIGdyYXBoIG1vZGVsIGhhcyAke3RoaXMuaW5wdXROb2Rlcy5sZW5ndGgtc30gbm9uLXJlc291cmNlIHBsYWNlaG9sZGVycywgd2hpbGUgdGhlcmUgYXJlICR7ZS5sZW5ndGh9IGlucHV0IHRlbnNvcnMgcHJvdmlkZWQuYCk7bGV0IHI9MDtyZXR1cm4gdGhpcy5pbnB1dE5vZGVzLnJlZHVjZSgobyxpKT0+e3ZhciBhLGwsYztjb25zdCBoPShjPShsPShhPXRoaXMuc2lnbmF0dXJlKT09PW51bGx8fGE9PT12b2lkIDA/dm9pZCAwOmEuaW5wdXRzKT09PW51bGx8fGw9PT12b2lkIDA/dm9pZCAwOmxbaV0pPT09bnVsbHx8Yz09PXZvaWQgMD92b2lkIDA6Yy5yZXNvdXJjZUlkO3JldHVybiBoIT1udWxsP29baV09dGhpcy5yZXNvdXJjZUlkVG9DYXB0dXJlZElucHV0W2hdOm9baV09ZVtyKytdLG99LHt9KX1ub3JtYWxpemVPdXRwdXRzKGUpe3JldHVybiBlPWV8fHRoaXMub3V0cHV0Tm9kZXMsQXJyYXkuaXNBcnJheShlKT9lOltlXX1leGVjdXRlSW5pdGlhbGl6ZXJHcmFwaCgpe3JldHVybiB0aGlzLmluaXRpYWxpemVyPT1udWxsP1tdOnRoaXMuaW5pdGlhbGl6ZXJTaWduYXR1cmU9PW51bGw/dGhpcy5pbml0aWFsaXplci5leGVjdXRlKHt9LFtdKTp0aGlzLmluaXRpYWxpemVyLmV4ZWN1dGUoe30sT2JqZWN0LmtleXModGhpcy5pbml0aWFsaXplclNpZ25hdHVyZS5vdXRwdXRzKSl9YXN5bmMgZXhlY3V0ZUluaXRpYWxpemVyR3JhcGhBc3luYygpe3JldHVybiB0aGlzLmluaXRpYWxpemVyPT1udWxsP1tdOnRoaXMuaW5pdGlhbGl6ZXJTaWduYXR1cmU9PW51bGw/dGhpcy5pbml0aWFsaXplci5leGVjdXRlQXN5bmMoe30sW10pOnRoaXMuaW5pdGlhbGl6ZXIuZXhlY3V0ZUFzeW5jKHt9LE9iamVjdC5rZXlzKHRoaXMuaW5pdGlhbGl6ZXJTaWduYXR1cmUub3V0cHV0cykpfXNldFJlc291cmNlSWRUb0NhcHR1cmVkSW5wdXQoZSl7aWYodGhpcy5yZXNvdXJjZUlkVG9DYXB0dXJlZElucHV0PXt9LHRoaXMuaW5pdGlhbGl6ZXJTaWduYXR1cmUpe2NvbnN0IHQ9dGhpcy5pbml0aWFsaXplclNpZ25hdHVyZS5vdXRwdXRzLHM9T2JqZWN0LmtleXModCk7Zm9yKGxldCByPTA7cjxzLmxlbmd0aDtyKyspe2NvbnN0IG89c1tyXSxpPXRbb107dGhpcy5yZXNvdXJjZUlkVG9DYXB0dXJlZElucHV0W2kucmVzb3VyY2VJZF09ZVtyXX19fWV4ZWN1dGUoZSx0KXt0aGlzLnJlc291cmNlSWRUb0NhcHR1cmVkSW5wdXQ9PW51bGwmJnRoaXMuc2V0UmVzb3VyY2VJZFRvQ2FwdHVyZWRJbnB1dCh0aGlzLmV4ZWN1dGVJbml0aWFsaXplckdyYXBoKCkpLGU9dGhpcy5ub3JtYWxpemVJbnB1dHMoZSksdD10aGlzLm5vcm1hbGl6ZU91dHB1dHModCk7Y29uc3Qgcz10aGlzLmV4ZWN1dG9yLmV4ZWN1dGUoZSx0KTtyZXR1cm4gcy5sZW5ndGg+MT9zOnNbMF19YXN5bmMgZXhlY3V0ZUFzeW5jKGUsdCl7dGhpcy5yZXNvdXJjZUlkVG9DYXB0dXJlZElucHV0PT1udWxsJiZ0aGlzLnNldFJlc291cmNlSWRUb0NhcHR1cmVkSW5wdXQoYXdhaXQgdGhpcy5leGVjdXRlSW5pdGlhbGl6ZXJHcmFwaEFzeW5jKCkpLGU9dGhpcy5ub3JtYWxpemVJbnB1dHMoZSksdD10aGlzLm5vcm1hbGl6ZU91dHB1dHModCk7Y29uc3Qgcz1hd2FpdCB0aGlzLmV4ZWN1dG9yLmV4ZWN1dGVBc3luYyhlLHQpO3JldHVybiBzLmxlbmd0aD4xP3M6c1swXX1nZXRJbnRlcm1lZGlhdGVUZW5zb3JzKCl7cmV0dXJuIHRoaXMuZXhlY3V0b3IuZ2V0SW50ZXJtZWRpYXRlVGVuc29ycygpfWRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JzKCl7dGhpcy5leGVjdXRvci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ycygpfWNvbnZlcnRUZW5zb3JNYXBUb1RlbnNvcnNNYXAoZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnJlZHVjZSgodCxzKT0+KHRbc109W2Vbc11dLHQpLHt9KX1kaXNwb3NlKCl7dGhpcy5leGVjdXRvci5kaXNwb3NlKCksdGhpcy5pbml0aWFsaXplciYmKHRoaXMuaW5pdGlhbGl6ZXIuZGlzcG9zZSgpLHRoaXMucmVzb3VyY2VJZFRvQ2FwdHVyZWRJbnB1dCYmWWUodGhpcy5yZXNvdXJjZUlkVG9DYXB0dXJlZElucHV0KSksdGhpcy5yZXNvdXJjZU1hbmFnZXIuZGlzcG9zZSgpfX1hc3luYyBmdW5jdGlvbiBLNihuLGU9e30sdD1zdyl7aWYobj09bnVsbCl0aHJvdyBuZXcgRXJyb3IoIm1vZGVsVXJsIGluIGxvYWRHcmFwaE1vZGVsKCkgY2Fubm90IGJlIG51bGwuIFBsZWFzZSBwcm92aWRlIGEgdXJsIG9yIGFuIElPSGFuZGxlciB0aGF0IGxvYWRzIHRoZSBtb2RlbCIpO2U9PW51bGwmJihlPXt9KSxlLmZyb21URkh1YiYmdHlwZW9mIG49PSJzdHJpbmciJiYobj1ZNihuKSk7Y29uc3Qgcz1uZXcgSncobixlLHQpO3JldHVybiBhd2FpdCBzLmxvYWQoKSxzfWZ1bmN0aW9uIFg2KG4pe2lmKG49PW51bGwpdGhyb3cgbmV3IEVycm9yKCJtb2RlbFVybCBpbiBsb2FkR3JhcGhNb2RlbFN5bmMoKSBjYW5ub3QgYmUgbnVsbC4gUGxlYXNlIHByb3ZpZGUgbW9kZWwgYXJ0aWZhY3RzIG9yIGFuIElPSGFuZGxlciB0aGF0IGxvYWRzIHRoZSBtb2RlbCIpO2xldCBlO2lmKG4gaW5zdGFuY2VvZiBBcnJheSl7Y29uc3RbcyxyXT1uO2lmKCFzKXRocm93IG5ldyBFcnJvcigibW9kZWxKU09OIG11c3QgYmUgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGFycmF5Iik7aWYoIXJ8fCEociBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSl0aHJvdyBuZXcgRXJyb3IoIkFuIEFycmF5QnVmZmVyIG9mIHdlaWdodHMgbXVzdCBiZSB0aGUgc2Vjb25kIGVsZW1lbnQgb2YgdGhlIGFycmF5Iik7aWYoISgibW9kZWxUb3BvbG9neSJpbiBzKSl0aHJvdyBuZXcgRXJyb3IoIk1vZGVsIEpTT04gaXMgbWlzc2luZyAnbW9kZWxUb3BvbG9neSciKTtpZighKCJ3ZWlnaHRzTWFuaWZlc3QiaW4gcykpdGhyb3cgbmV3IEVycm9yKCJNb2RlbCBKU09OIGlzIG1pc3NpbmcgJ3dlaWdodHNNYW5pZmVzdCciKTtjb25zdCBvPUVmKHMud2VpZ2h0c01hbmlmZXN0KSxpPVcxKHMsbyxyKTtlPURmKGkpfWVsc2UgaWYoImxvYWQiaW4gbillPW47ZWxzZSBpZigibW9kZWxUb3BvbG9neSJpbiBuJiYid2VpZ2h0U3BlY3MiaW4gbiYmIndlaWdodERhdGEiaW4gbillPURmKG4pO2Vsc2UgdGhyb3cgbmV3IEVycm9yKCJVbmtub3duIG1vZGVsIGZvcm1hdCIpO2NvbnN0IHQ9bmV3IEp3KGUpO3JldHVybiB0LmxvYWQoKSx0fWZ1bmN0aW9uIFk2KG4pe3JldHVybiBuLmVuZHNXaXRoKCIvIil8fChuPW4rIi8iKSxgJHtufSR7cTZ9JHtINn1gfS8qKiBAbGljZW5zZSBTZWUgdGhlIExJQ0VOU0UgZmlsZS4gKi9jb25zdCBRNj0iNC4yMi4wIjsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBaNj1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsR3JhcGhNb2RlbDpKdyxkZXJlZ2lzdGVyT3A6TkcsbG9hZEdyYXBoTW9kZWw6SzYsbG9hZEdyYXBoTW9kZWxTeW5jOlg2LHJlZ2lzdGVyT3A6U0csdmVyc2lvbl9jb252ZXJ0ZXI6UTZ9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSk7LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICoKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovdmFyIHdDOyhmdW5jdGlvbihuKXtuW24uRkFJTD0wXT0iRkFJTCIsbltuLlNIT1JURVNUPTFdPSJTSE9SVEVTVCIsbltuLkxPTkdFU1Q9Ml09IkxPTkdFU1QifSkod0N8fCh3Qz17fSkpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIERlKG4sZSl7QXJyYXkuaXNBcnJheShuKXx8KG49W25dKSxuLmZvckVhY2godD0+e3QhPW51bGwmJkEodC5kdHlwZSE9PSJjb21wbGV4NjQiLCgpPT5gJHtlfSBkb2VzIG5vdCBzdXBwb3J0IGNvbXBsZXg2NCB0ZW5zb3JzIGluIHRoZSBDUFUgYmFja2VuZC5gKX0pfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEo2PUZnO2NsYXNzIGl5IGV4dGVuZHMgWmZ7bmV4dERhdGFJZCgpe3JldHVybiBpeS5uZXh0RGF0YUlkKyt9Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuYmxvY2tTaXplPTQ4LHRoaXMuZmlyc3RVc2U9ITAsdGhpcy5kYXRhPW5ldyAkMSh0aGlzLG1yKCkpfXdyaXRlKGUsdCxzKXt0aGlzLmZpcnN0VXNlJiYodGhpcy5maXJzdFVzZT0hMSxvZSgpLmdldCgiSVNfTk9ERSIpJiZEcyhgCj09PT09PT09PT09PT09PT09PT09PT09PT09PT0KSGksIGxvb2tzIGxpa2UgeW91IGFyZSBydW5uaW5nIFRlbnNvckZsb3cuanMgaW4gTm9kZS5qcy4gVG8gc3BlZWQgdGhpbmdzIHVwIGRyYW1hdGljYWxseSwgaW5zdGFsbCBvdXIgbm9kZSBiYWNrZW5kLCB2aXNpdCBodHRwczovL2dpdGh1Yi5jb20vdGVuc29yZmxvdy90ZmpzLW5vZGUgZm9yIG1vcmUgZGV0YWlscy4gCj09PT09PT09PT09PT09PT09PT09PT09PT09PT1gKSk7Y29uc3Qgcj17aWQ6dGhpcy5uZXh0RGF0YUlkKCl9O3JldHVybiB0aGlzLmRhdGEuc2V0KHIse3ZhbHVlczplLGR0eXBlOnMscmVmQ291bnQ6MX0pLHJ9bWFrZVRlbnNvckluZm8oZSx0LHMpe2xldCByO2lmKHQ9PT0ic3RyaW5nIiYmcyE9bnVsbCYmcy5sZW5ndGg+MCYmenIoc1swXSkpe2NvbnN0IG89cy5tYXAoaT0+QnIoaSkpO3I9dGhpcy53cml0ZShvLGUsdCl9ZWxzZSByPXRoaXMud3JpdGUocyxlLHQpO3JldHVybntkYXRhSWQ6cixzaGFwZTplLGR0eXBlOnR9fXJlZkNvdW50KGUpe3JldHVybiB0aGlzLmRhdGEuaGFzKGUpP3RoaXMuZGF0YS5nZXQoZSkucmVmQ291bnQ6MH1pbmNSZWYoZSl7Y29uc3QgdD10aGlzLmRhdGEuZ2V0KGUpO3QucmVmQ291bnQrK31kZWNSZWYoZSl7aWYodGhpcy5kYXRhLmhhcyhlKSl7Y29uc3QgdD10aGlzLmRhdGEuZ2V0KGUpO3QucmVmQ291bnQtLX19bW92ZShlLHQscyxyLG8pe3RoaXMuZGF0YS5zZXQoZSx7dmFsdWVzOnQsZHR5cGU6cixyZWZDb3VudDpvfSl9bnVtRGF0YUlkcygpe3JldHVybiB0aGlzLmRhdGEubnVtRGF0YUlkcygpfWFzeW5jIHJlYWQoZSl7cmV0dXJuIHRoaXMucmVhZFN5bmMoZSl9cmVhZFN5bmMoZSl7Y29uc3R7ZHR5cGU6dCxjb21wbGV4VGVuc29ySW5mb3M6c309dGhpcy5kYXRhLmdldChlKTtpZih0PT09ImNvbXBsZXg2NCIpe2NvbnN0IHI9dGhpcy5yZWFkU3luYyhzLnJlYWwuZGF0YUlkKSxvPXRoaXMucmVhZFN5bmMocy5pbWFnLmRhdGFJZCk7cmV0dXJuIGJvKHIsbyl9cmV0dXJuIGMkKHRoaXMuZGF0YS5nZXQoZSkudmFsdWVzLHQpfWJ1ZmZlclN5bmMoZSl7Y29uc3QgdD10aGlzLnJlYWRTeW5jKGUuZGF0YUlkKTtpZihlLmR0eXBlPT09InN0cmluZyIpdHJ5e2NvbnN0IHM9dC5tYXAocj0+Z28ocikpO3JldHVybiBxZShlLnNoYXBlLGUuZHR5cGUscyl9Y2F0Y2h7dGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gZGVjb2RlIGVuY29kZWQgc3RyaW5nIGJ5dGVzIGludG8gdXRmLTgiKX1yZXR1cm4gcWUoZS5zaGFwZSxlLmR0eXBlLHQpfW1ha2VPdXRwdXQoZSx0LHMpe3JldHVybiBtcigpLm1ha2VUZW5zb3JGcm9tVGVuc29ySW5mbyh0aGlzLm1ha2VUZW5zb3JJbmZvKHQscyxlKSx0aGlzKX1kaXNwb3NlRGF0YShlLHQ9ITEpe2lmKHRoaXMuZGF0YS5oYXMoZSkpe2lmKHRoaXMuZGF0YS5nZXQoZSkucmVmQ291bnQtLSwhdCYmdGhpcy5kYXRhLmdldChlKS5yZWZDb3VudD4wKXJldHVybiExO2NvbnN0e2NvbXBsZXhUZW5zb3JJbmZvczpzfT10aGlzLmRhdGEuZ2V0KGUpO3MhPW51bGwmJih0aGlzLmRpc3Bvc2VEYXRhKHMucmVhbC5kYXRhSWQsITApLHRoaXMuZGlzcG9zZURhdGEocy5pbWFnLmRhdGFJZCwhMCkpLHRoaXMuZGF0YS5kZWxldGUoZSl9cmV0dXJuITB9ZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZSl7dGhpcy5kaXNwb3NlRGF0YShlLmRhdGFJZCl9YXN5bmMgdGltZShlKXtjb25zdCB0PVZuKCk7cmV0dXJuIGUoKSx7a2VybmVsTXM6Vm4oKS10fX1tZW1vcnkoKXtyZXR1cm57dW5yZWxpYWJsZTohMCxyZWFzb25zOlsiVGhlIHJlcG9ydGVkIG1lbW9yeSBpcyBhbiB1cHBlciBib3VuZC4gRHVlIHRvIGF1dG9tYXRpYyBnYXJiYWdlIGNvbGxlY3Rpb24sIHRoZSB0cnVlIGFsbG9jYXRlZCBtZW1vcnkgbWF5IGJlIGxlc3MuIl19fXdoZXJlKGUpe0RlKFtlXSwid2hlcmUiKTtjb25zdCB0PXRoaXMucmVhZFN5bmMoZS5kYXRhSWQpO3JldHVybiBKNihlLnNoYXBlLHQpfWRpc3Bvc2UoKXt9ZmxvYXRQcmVjaXNpb24oKXtyZXR1cm4gMzJ9ZXBzaWxvbigpe3JldHVybiBzdXBlci5lcHNpbG9uKCl9fWl5Lm5leHREYXRhSWQ9MDsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHRSKG4pe2NvbnN0IGU9bmV3IEZsb2F0MzJBcnJheShuLmxlbmd0aCk7Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDsrK3QpZVt0XT1NYXRoLmFicyhuW3RdKTtyZXR1cm4gZX1jb25zdCBlSD1uPT57Y29uc3R7eDplfT1uLmlucHV0cyx0PW4uYmFja2VuZDtEZShlLCJhYnMiKTtsZXQgcz1uZXcgRmxvYXQzMkFycmF5KGNlKGUuc2hhcGUpKTtjb25zdCByPXQuZGF0YS5nZXQoZS5kYXRhSWQpLnZhbHVlcztyZXR1cm4gcz10UihyKSx0Lm1ha2VPdXRwdXQocyxlLnNoYXBlLGUuZHR5cGUpfSx0SD17a2VybmVsTmFtZTpKYyxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmVIfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBIdChuKXtyZXR1cm4oZSx0LHMscixvKT0+e2NvbnN0IGk9SGUoZSx0KSxhPWkubGVuZ3RoLGw9emUoaSksYz1jZShpKSxoPWhuKG8sYykscD1lLmxlbmd0aCxmPXQubGVuZ3RoLGc9emUoZSkseT16ZSh0KSx3PWNhKGUsaSksYj1jYSh0LGkpO2lmKHcubGVuZ3RoK2IubGVuZ3RoPT09MClmb3IobGV0IHY9MDt2PGgubGVuZ3RoOysrdiloW3ZdPW4oc1t2JXMubGVuZ3RoXSxyW3Ylci5sZW5ndGhdKTtlbHNlIGZvcihsZXQgdj0wO3Y8aC5sZW5ndGg7Kyt2KXtjb25zdCBTPXZhKHYsYSxsKSwkPVMuc2xpY2UoLXApO3cuZm9yRWFjaChMPT4kW0xdPTApO2NvbnN0IGs9YnIoJCxwLGcpLFQ9Uy5zbGljZSgtZik7Yi5mb3JFYWNoKEw9PlRbTF09MCk7Y29uc3QgRD1icihULGYseSk7aFt2XT1uKHNba10scltEXSl9cmV0dXJuW2gsaV19fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGJzKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7cmVhbDpzLGltYWc6cn09ZSxvPXQuZGF0YS5nZXQocy5kYXRhSWQpLnZhbHVlcyxpPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxhPXQubWFrZVRlbnNvckluZm8ocy5zaGFwZSwiY29tcGxleDY0IiksbD10LmRhdGEuZ2V0KGEuZGF0YUlkKTtyZXR1cm4gbC5jb21wbGV4VGVuc29ySW5mb3M9e3JlYWw6dC5tYWtlVGVuc29ySW5mbyhzLnNoYXBlLCJmbG9hdDMyIixvKSxpbWFnOnQubWFrZVRlbnNvckluZm8oci5zaGFwZSwiZmxvYXQzMiIsaSl9LGF9Y29uc3Qgbkg9e2tlcm5lbE5hbWU6YW0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpic307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gVWYobixlLHQ9ImZsb2F0MzIiKXtpZih0PT09ImNvbXBsZXg2NCIpe2NvbnN0IHI9VWYobixlLCJmbG9hdDMyIiksbz1VZihuLGUsImZsb2F0MzIiKTtyZXR1cm4gYnMoe2lucHV0czp7cmVhbDpyLGltYWc6b30sYmFja2VuZDpufSl9Y29uc3Qgcz1TbihjZShlKSx0KTtyZXR1cm4gbi5tYWtlVGVuc29ySW5mbyhlLHQscyl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWXIobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHt4OnN9PWU7cmV0dXJuIHQuaW5jUmVmKHMuZGF0YUlkKSx7ZGF0YUlkOnMuZGF0YUlkLHNoYXBlOnMuc2hhcGUsZHR5cGU6cy5kdHlwZX19Y29uc3Qgc0g9e2tlcm5lbE5hbWU6cWwsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpZcn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZ2Eobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtpbnB1dDpzfT1lLHI9dC5kYXRhLmdldChzLmRhdGFJZCkuY29tcGxleFRlbnNvckluZm9zLnJlYWwsbz10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXM7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oci5zaGFwZSxyLmR0eXBlLG8pfWNvbnN0IHJIPXtrZXJuZWxOYW1lOkJtLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6Z2F9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG5SKG4sZSx0LHMpe2lmKHM9PT0iaW50MzIiKXtjb25zdCByPUludDMyQXJyYXkuZnJvbShuKTtyZXR1cm5bZSwiaW50MzIiLHJdfWlmKHM9PT0iYm9vbCIpe2NvbnN0IHI9Z2koWzBdLHQpLFtvLGldPUh0KChhLGwpPT5hIT09bD8xOjApKGUsW10sbixyLCJib29sIik7cmV0dXJuW2ksImJvb2wiLG9dfXRocm93IG5ldyBFcnJvcihgRXJyb3IgaW4gQ2FzdDogZmFpbGVkIHRvIGNhc3QgJHt0fSB0byAke3N9YCl9ZnVuY3Rpb24gbWkobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7ZHR5cGU6b309cztpZihvPT09ImNvbXBsZXg2NCIpe2lmKHIuZHR5cGU9PT0iY29tcGxleDY0IilyZXR1cm4gWXIoe2lucHV0czp7eDpyfSxiYWNrZW5kOnR9KTtjb25zdCBoPVVmKHQsci5zaGFwZSxyLmR0eXBlKSxwPW1pKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntkdHlwZToiZmxvYXQzMiJ9fSksZj1icyh7aW5wdXRzOntyZWFsOnAsaW1hZzpofSxiYWNrZW5kOnR9KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhoKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHApLGZ9aWYoci5kdHlwZT09PSJjb21wbGV4NjQiKXtjb25zdCBoPWdhKHtpbnB1dHM6e2lucHV0OnJ9LGJhY2tlbmQ6dH0pLHA9bWkoe2lucHV0czp7eDpofSxiYWNrZW5kOnQsYXR0cnM6e2R0eXBlOm99fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaCkscH1pZighRTEoci5kdHlwZSxvKSl7Y29uc3QgaD1Zcih7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dH0pO3JldHVybntkYXRhSWQ6aC5kYXRhSWQsc2hhcGU6aC5zaGFwZSxkdHlwZTpvfX1jb25zdCBpPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxbYSxsLGNdPW5SKGksci5zaGFwZSxyLmR0eXBlLG8pO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGEsbCxjKX1jb25zdCBvSD17a2VybmVsTmFtZTpPbCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOm1pfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBvbihuLGUsdCxzKXtyZXR1cm4gdD09bnVsbD8oe2lucHV0czpyLGJhY2tlbmQ6b30pPT57Y29uc3R7YTppLGI6YX09cixsPW87RGUoW2ksYV0sbik7Y29uc3QgYz1sLmRhdGEuZ2V0KGkuZGF0YUlkKS52YWx1ZXMsaD1sLmRhdGEuZ2V0KGEuZGF0YUlkKS52YWx1ZXMscD1pLmR0eXBlPT09InN0cmluZyI/d28oYyk6YyxmPWkuZHR5cGU9PT0ic3RyaW5nIj93byhoKTpoLGc9c3x8aS5kdHlwZSxbeSx3XT1lKGkuc2hhcGUsYS5zaGFwZSxwLGYsZyk7cmV0dXJuIGwubWFrZVRlbnNvckluZm8odyxnLHkpfTooe2lucHV0czpyLGJhY2tlbmQ6b30pPT57Y29uc3R7YTppLGI6YX09cixsPW87aWYoaS5kdHlwZT09PSJjb21wbGV4NjQifHxhLmR0eXBlPT09ImNvbXBsZXg2NCIpe2NvbnN0IGM9bWkoe2lucHV0czp7eDppfSxiYWNrZW5kOmwsYXR0cnM6e2R0eXBlOiJjb21wbGV4NjQifX0pLGg9bC5kYXRhLmdldChjLmRhdGFJZCkscD1oLmNvbXBsZXhUZW5zb3JJbmZvcy5yZWFsLGY9aC5jb21wbGV4VGVuc29ySW5mb3MuaW1hZyxnPWwuZGF0YS5nZXQocC5kYXRhSWQpLnZhbHVlcyx5PWwuZGF0YS5nZXQoZi5kYXRhSWQpLnZhbHVlcyx3PW1pKHtpbnB1dHM6e3g6YX0sYmFja2VuZDpsLGF0dHJzOntkdHlwZToiY29tcGxleDY0In19KSxiPWwuZGF0YS5nZXQody5kYXRhSWQpLHY9Yi5jb21wbGV4VGVuc29ySW5mb3MucmVhbCxTPWIuY29tcGxleFRlbnNvckluZm9zLmltYWcsJD1sLmRhdGEuZ2V0KHYuZGF0YUlkKS52YWx1ZXMsaz1sLmRhdGEuZ2V0KFMuZGF0YUlkKS52YWx1ZXMsW1QsRCxMXT10KGkuc2hhcGUsYS5zaGFwZSxnLHksJCxrKSx6PWwubWFrZVRlbnNvckluZm8oTCwiZmxvYXQzMiIsVCksRj1sLm1ha2VUZW5zb3JJbmZvKEwsImZsb2F0MzIiLEQpLF89YnMoe2lucHV0czp7cmVhbDp6LGltYWc6Rn0sYmFja2VuZDpsfSk7cmV0dXJuIGwuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYyksbC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh3KSxsLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHopLGwuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oRiksX31lbHNle2NvbnN0IGM9bC5kYXRhLmdldChpLmRhdGFJZCkudmFsdWVzLGg9bC5kYXRhLmdldChhLmRhdGFJZCkudmFsdWVzLHA9c3x8aS5kdHlwZSxbZixnXT1lKGkuc2hhcGUsYS5zaGFwZSxjLGgscCk7cmV0dXJuIGwubWFrZVRlbnNvckluZm8oZyxwLGYpfX19ZnVuY3Rpb24gZXYobil7cmV0dXJuKGUsdCxzLHIsbyxpKT0+e2NvbnN0IGE9SGUoZSx0KSxsPWNlKGEpLGM9YS5sZW5ndGgsaD16ZShhKSxwPWhuKCJmbG9hdDMyIixsKSxmPWhuKCJmbG9hdDMyIixsKSxnPWNhKGUsYSkseT1jYSh0LGEpLHc9Ym8ocyxyKSxiPWJvKG8saSksdj1lLmxlbmd0aCxTPXplKGUpLCQ9dC5sZW5ndGgsaz16ZSh0KTtpZihnLmxlbmd0aCt5Lmxlbmd0aD09PTApZm9yKGxldCBUPTA7VDxwLmxlbmd0aDtUKyspe2NvbnN0IEQ9VCV3Lmxlbmd0aCxMPVQlYi5sZW5ndGgsej1uKHdbRCoyXSx3W0QqMisxXSxiW0wqMl0sYltMKjIrMV0pO3BbVF09ei5yZWFsLGZbVF09ei5pbWFnfWVsc2UgZm9yKGxldCBUPTA7VDxwLmxlbmd0aDtUKyspe2NvbnN0IEQ9dmEoVCxjLGgpLEw9RC5zbGljZSgtdik7Zy5mb3JFYWNoKE09PkxbTV09MCk7Y29uc3Qgej1icihMLHYsUyksRj1ELnNsaWNlKC0kKTt5LmZvckVhY2goTT0+RltNXT0wKTtjb25zdCBfPWJyKEYsJCxrKSxFPW4od1t6KjJdLHdbeioyKzFdLGJbXyoyXSxiW18qMisxXSk7cFtUXT1FLnJlYWwsZltUXT1FLmltYWd9cmV0dXJuW3AsZixhXX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgc1I9SHQoKChuLGUpPT5uK2UpKSxpSD1ldigoKG4sZSx0LHMpPT4oe3JlYWw6bit0LGltYWc6ZStzfSkpKSxTbD1vbihTYSxzUixpSCksYUg9e2tlcm5lbE5hbWU6U2EsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpTbH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdHYobixlLHQscyxyKXtjb25zdCBvPWNlKHMpLGk9U24ocix0KTtmb3IobGV0IGE9MDthPG4ubGVuZ3RoO2ErKyl7Y29uc3QgbD1uW2FdO2lmKGw8MCl0aHJvdyBuZXcgRXJyb3IoIklucHV0IHggbXVzdCBiZSBub24tbmVnYXRpdmUhIik7bD49cnx8KG8+MD9pW2xdKz1lW2FdOmlbbF0rPTEpfXJldHVybiBpfWZ1bmN0aW9uIHJSKG4sZSx0LHM9ITEpe2NvbnN0IHI9bi5zaGFwZVswXSxvPW4uc2hhcGVbMV0saT1xZShbcix0XSxlLmR0eXBlKTtmb3IobGV0IGE9MDthPHI7YSsrKWZvcihsZXQgbD0wO2w8bztsKyspe2NvbnN0IGM9bi5nZXQoYSxsKTtpZihjPDApdGhyb3cgbmV3IEVycm9yKCJJbnB1dCB4IG11c3QgYmUgbm9uLW5lZ2F0aXZlISIpO2M+PXR8fChzP2kuc2V0KDEsYSxjKTplLnNpemU+MD9pLnNldChpLmdldChhLGMpK2UuZ2V0KGEsbCksYSxjKTppLnNldChpLmdldChhLGMpKzEsYSxjKSl9cmV0dXJuIGl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgb1I9SHQoKChuLGUpPT5uJmUpKSxsSD1vbihhZCxvUiksdUg9e2tlcm5lbE5hbWU6YWQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpsSH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWnIobil7cmV0dXJuKGUsdCxzKT0+e2NvbnN0IHI9TXQodCxlLmxlbmd0aCk7Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDsrK28pcltvXT1uKGVbb10scyk7cmV0dXJuIHJ9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG10KG4sZSx0KXtjb25zdCBzPVpyKGUpO3JldHVybiBDaShuLHMsdCl9ZnVuY3Rpb24gQ2kobixlLHQpe3JldHVybih7aW5wdXRzOnMsYXR0cnM6cixiYWNrZW5kOm99KT0+e2NvbnN0e3g6aX09cztEZShpLG4pO2NvbnN0IGE9byxsPWEuZGF0YS5nZXQoaS5kYXRhSWQpLnZhbHVlcztsZXQgYztpZihpLmR0eXBlPT09InN0cmluZyIpe2lmKCFBcnJheS5pc0FycmF5KGwpKXRocm93IG5ldyBFcnJvcigiU3RyaW5nIHRlbnNvcidzIHZhbHVlIHdhcyBub3QgYW4gaW5zdGFuY2Ugb2YgQXJyYXkiKTtjPXdvKGwpfWVsc2UgYz1sO2NvbnN0IGg9dHx8aS5kdHlwZSxwPWUoYyxoLHIpO3JldHVybiBhLm1ha2VUZW5zb3JJbmZvKGkuc2hhcGUsaCxwKX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBpUj1acihuPT5NYXRoLmNlaWwobikpLGNIPUNpKEZsLGlSKSxkSD17a2VybmVsTmFtZTpGbCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmNIfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBhUihuLGUsdCxzKXtjb25zdCByPU10KHQsY2UoZSkpO2lmKHMmJnQhPT0ic3RyaW5nIil7bGV0IG89MDtuLmZvckVhY2goaT0+e2NvbnN0IGE9Y2UoaS5zaGFwZSk7ci5zZXQoaS52YWxzLG8pLG8rPWF9KX1lbHNle2xldCBvPTA7bi5mb3JFYWNoKGk9Pntjb25zdCBhPXQ9PT0ic3RyaW5nIj93byhpLnZhbHMpOmkudmFscztsZXQgbD0wO2ZvcihsZXQgYz0wO2M8aS5zaGFwZVswXTsrK2Mpe2NvbnN0IGg9YyplWzFdK287Zm9yKGxldCBwPTA7cDxpLnNoYXBlWzFdOysrcClyW2grcF09YVtsKytdfW8rPWkuc2hhcGVbMV19KX1yZXR1cm4gcn0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBsUj1IdCgobixlKT0+bj09PWU/MTowKSx1Uj1vbihnZCxsUixudWxsLCJib29sIiksaEg9e2tlcm5lbE5hbWU6Z2QsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp1Un07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBjUj1acihuPT5NYXRoLmV4cChuKSksZFI9Q2koV2wsY1IsImZsb2F0MzIiKSxwSD17a2VybmVsTmFtZTpXbCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmRSfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGhSPVpyKG49Pk1hdGguZXhwbTEobikpLGZIPUNpKFVsLGhSKSxtSD17a2VybmVsTmFtZTpVbCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmZIfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHBSPVpyKG49Pk1hdGguZmxvb3IobikpLGdIPUNpKGpsLHBSKSx5SD17a2VybmVsTmFtZTpqbCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmdIfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBmUj1IdCgobixlKT0+TWF0aC5mbG9vcihuL2UpKSx4SD1vbihHbCxmUixudWxsLCJpbnQzMiIpLGJIPXtrZXJuZWxOYW1lOkdsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6eEh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG1SKG4sZSx0LHMscixvLGksYSxsKXtjb25zdCBjPXFlKFtzLG9dLHQpO2ZvcihsZXQgaD0wO2g8cztoKyspe2NvbnN0IHA9W107bGV0IGY9MDtmb3IobGV0IGc9MDtnPHI7ZysrKXtjb25zdCB5PW5baCpyK2ddO2YrPXkqaVtnXSxwLnB1c2goeSl9aWYoZjwwfHxmPj1sL28pdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGluZGljZXM6ICR7cH0gZG9lcyBub3QgaW5kZXggaW50byAke2F9YCk7Zm9yKGxldCBnPTA7ZzxvO2crKyljLnZhbHVlc1toKm8rZ109ZS5nZXQoLi4uZS5pbmRleFRvTG9jKGYqbytnKSl9cmV0dXJuIGN9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZ1IobixlLHQpe2NvbnN0IHM9cWUodCxuLmR0eXBlKTtmb3IobGV0IHI9MDtyPHMuc2l6ZTsrK3Ipe2NvbnN0IGk9cy5pbmRleFRvTG9jKHIpLnNsaWNlKCksYT1pWzBdLGw9aVsyXSxjPWUubG9jVG9JbmRleChbYSxsXSk7aVsyXT1lLnZhbHVlc1tjXTtjb25zdCBoPW4ubG9jVG9JbmRleChpKTswPD1oJiZoPG4udmFsdWVzLmxlbmd0aCYmKHMudmFsdWVzW3JdPW4udmFsdWVzW2hdKX1yZXR1cm4gc30vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB5Uj1IdCgobixlKT0+bj5lPzE6MCksd0g9b24od2QseVIsbnVsbCwiYm9vbCIpLHZIPXtrZXJuZWxOYW1lOndkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6d0h9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHhSPUh0KChuLGUpPT5uPj1lPzE6MCksU0g9b24oSGwseFIsbnVsbCwiYm9vbCIpLE5IPXtrZXJuZWxOYW1lOkhsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6U0h9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGJSPUh0KChuLGUpPT5uPGU/MTowKSxrSD1vbihTZCxiUixudWxsLCJib29sIiksQ0g9e2tlcm5lbE5hbWU6U2QsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzprSH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgd1I9SHQoKG4sZSk9Pm48PWU/MTowKSwkSD1vbihOZCx3UixudWxsLCJib29sIiksSUg9e2tlcm5lbE5hbWU6TmQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzokSH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdlIobixlLHQpe2NvbnN0IHM9KGUtbikvKHQtMSkscj1Tbih0LCJmbG9hdDMyIik7clswXT1uO2ZvcihsZXQgbz0xO288ci5sZW5ndGg7bysrKXJbb109cltvLTFdK3M7cmV0dXJuIHJ9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBTUj1acihuPT5NYXRoLmxvZyhuKSksVEg9Q2koUWwsU1IpLEVIPXtrZXJuZWxOYW1lOlFsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6VEh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE5SKG4sZSx0LHMpe2NvbnN0IHI9aG4ocyxjZSh0KSk7Zm9yKGxldCBvPTA7bzxyLmxlbmd0aDsrK28pe2NvbnN0IGk9byplO2xldCBhPW5baV07Zm9yKGxldCBsPTA7bDxlOysrbCl7Y29uc3QgYz1uW2krbF07KE51bWJlci5pc05hTihjKXx8Yz5hKSYmKGE9Yyl9cltvXT1hfXJldHVybiByfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGtSPUh0KCgobixlKT0+TWF0aC5tYXgobixlKSkpLFJIPW9uKEpsLGtSKSxESD17a2VybmVsTmFtZTpKbCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlJIfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBDUj1IdCgoKG4sZSk9Pk1hdGgubWluKG4sZSkpKSxBSD1vbihldSxDUiksX0g9e2tlcm5lbE5hbWU6ZXUsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpBSH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgbnY9SHQoKChuLGUpPT5uKmUpKSxPSD1ldigoKG4sZSx0LHMpPT4oe3JlYWw6bip0LWUqcyxpbWFnOm4qcytlKnR9KSkpLGF5PW9uKG51LG52LE9IKSxGSD17a2VybmVsTmFtZTpudSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmF5fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiAkUihuLGUsdCl7Y29uc3Qgcz1TbygtMSx0KTtyZXR1cm4gbnYoW10sZSxzLG4sdCl9ZnVuY3Rpb24gTEgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHt4OnN9PWU7RGUocywibmVnIik7Y29uc3Qgcj10LmRhdGEuZ2V0KHMuZGF0YUlkKS52YWx1ZXMsW28saV09JFIocixzLnNoYXBlLHMuZHR5cGUpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGkscy5kdHlwZSxvKX1jb25zdCBQSD17a2VybmVsTmFtZTpPZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOkxIfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBJUj1IdCgoKG4sZSk9Pm4hPT1lPzE6MCkpLHpIPW9uKEZkLElSLG51bGwsImJvb2wiKSxNSD17a2VybmVsTmFtZTpGZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnpIfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBzdihuLGUsdCxzLHIpe2NvbnN0IG89ZS5sZW5ndGgsaT1jZShlKSxhPXplKGUpLGw9emUociksYz1obih0LGNlKHIpKTtmb3IobGV0IGg9MDtoPGk7KytoKXtjb25zdCBwPXZhKGgsbyxhKSxmPW5ldyBBcnJheShwLmxlbmd0aCk7Zm9yKGxldCB5PTA7eTxmLmxlbmd0aDt5KyspZlt5XT1wW3NbeV1dO2NvbnN0IGc9YnIoZixvLGwpO2NbZ109bltoXX1yZXR1cm4gY30vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBpcyhuKXtjb25zdHtpbnB1dHM6ZSxhdHRyczp0LGJhY2tlbmQ6c309bix7eDpyfT1lLHtwZXJtOm99PXQ7RGUociwidHJhbnNwb3NlIik7Y29uc3QgaT1yLnNoYXBlLmxlbmd0aCxhPW5ldyBBcnJheShpKTtmb3IobGV0IHA9MDtwPGEubGVuZ3RoO3ArKylhW3BdPXIuc2hhcGVbb1twXV07Y29uc3QgbD1zLmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsYz1zdihsLHIuc2hhcGUsci5kdHlwZSxvLGEpO3JldHVybntkYXRhSWQ6cy53cml0ZShjLGEsci5kdHlwZSksc2hhcGU6YSxkdHlwZTpyLmR0eXBlfX1jb25zdCBCSD17a2VybmVsTmFtZTplYSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmlzfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBUUihuLGUsdCxzKXtjb25zdFtyLG9dPW1uKG4scyksaT10cyhlLCJpbnQzMiIpLGE9U24oY2UociksaSksbD1jZShvKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoOysrYyl7Y29uc3QgaD1jKmw7bGV0IHA9MTtmb3IobGV0IGY9MDtmPGw7KytmKXAqPXRbaCtmXTthW2NdPXB9cmV0dXJue291dFZhbHM6YSxvdXRTaGFwZTpyLG91dER0eXBlOml9fWZ1bmN0aW9uIFZIKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2F4aXM6byxrZWVwRGltczppfT1zO0RlKHIsInByb2QiKTtjb25zdCBhPXIuc2hhcGUubGVuZ3RoLGw9UWUobyxyLnNoYXBlKSxjPUx0KGwsYSk7bGV0IGg9bCxwPXI7Y29uc3QgZj1bXTtjIT1udWxsJiYocD1pcyh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTpjfX0pLGYucHVzaChwKSxoPWp0KGgubGVuZ3RoLGEpKTtjb25zdCBnPXQuZGF0YS5nZXQocC5kYXRhSWQpLnZhbHVlcyx7b3V0VmFsczp5LG91dFNoYXBlOncsb3V0RHR5cGU6Yn09VFIocC5zaGFwZSxwLmR0eXBlLGcsaCk7bGV0IHY9dztyZXR1cm4gaSYmKHY9VXQodyxsKSksZi5mb3JFYWNoKFM9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oUykpLHQubWFrZVRlbnNvckluZm8odixiLHkpfWNvbnN0IFdIPXtrZXJuZWxOYW1lOlZkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6Vkh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFVIKG4sZSx0KXtuLmZvckVhY2goKHMscik9PntpZihzPDB8fHM+PXQpe2NvbnN0IG89dmEocixlLmxlbmd0aCx6ZShlKSkuam9pbigiLCIpO3Rocm93IG5ldyBFcnJvcihgaW5kaWNlc1ske299XSA9ICR7c30gaXMgbm90IGluIFswLCAke3R9KWApfX0pfWZ1bmN0aW9uIGpIKG4sZSl7Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDsrK3Qpe2NvbnN0IHM9blt0XSxyPXQ9PT1uLmxlbmd0aC0xP2U6blt0KzFdLmxlbmd0aDtpZihzLmxlbmd0aD09PTApdGhyb3cgbmV3IEVycm9yKCJSYWdnZWQgc3BsaXRzIG1heSBub3QgYmUgZW1wdHkiKTtpZihzWzBdPDApdGhyb3cgbmV3IEVycm9yKCJSYWdnZWQgc3BsaXRzIG11c3QgYmUgbm9uLW5lZ2F0aXZlIik7aWYoc1tzLmxlbmd0aC0xXT5yKXRocm93IG5ldyBFcnJvcigiUmFnZ2VkIHNwbGl0cyBtdXN0IG5vdCBwb2ludCBwYXN0IHZhbHVlcyIpO2ZvcihsZXQgbz0xO288cy5sZW5ndGg7KytvKWlmKHNbby0xXT5zW29dKXRocm93IG5ldyBFcnJvcigiUmFnZ2VkIHNwbGl0cyBtdXN0IGJlIHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIiKX19ZnVuY3Rpb24gR0gobixlLHQscyl7Y29uc3Qgcj1bXTtsZXQgbz0wO2NvbnN0IGk9ZS5sZW5ndGgtMSt0Lmxlbmd0aCxhPW5ldyBBcnJheShpKS5maWxsKG51bGwpLm1hcCgoKT0+WzBdKTtqSCh0LHMpO2xldCBsPTE7Zm9yKGxldCBjPTA7YzxlLmxlbmd0aC0xOysrYyl7bCo9ZVtjXTtjb25zdCBoPWVbYysxXTtmb3IobGV0IHA9MTtwPGwrMTsrK3ApYVtjXS5wdXNoKHAqaCl9Zm9yKGxldCBjPTA7YzxuLmxlbmd0aDsrK2Mpe2xldCBoPW5bY10scD1uW2NdKzE7Zm9yKGxldCBmPTA7Zjx0Lmxlbmd0aDsrK2Ype2NvbnN0IGc9dFtmXSx5PWYrZS5sZW5ndGgtMTtpZih5Pj0wKXtjb25zdCB3PWFbeV0sYj13W3cubGVuZ3RoLTFdLWdbaF07Zm9yKGxldCB2PWg7djxwOysrdilhW3ldLnB1c2goZ1t2KzFdK2IpfWg9Z1toXSxwPWdbcF19cCE9PWgmJihyLnB1c2goW2gscF0pLG8rPXAtaCl9cmV0dXJue291dFNwbGl0czphLHZhbHVlU2xpY2VzOnIsbnVtVmFsdWVzOm99fWZ1bmN0aW9uIEhIKG4pe2NvbnN0IGU9W107Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDsrK3Qpe2NvbnN0IHM9blt0XS5sZW5ndGgscj1NdCgiaW50MzIiLHMpO2UucHVzaChyKSxuW3RdLmZvckVhY2goKG8saSk9PnJbaV09byl9cmV0dXJuIGV9ZnVuY3Rpb24gdkMobixlKXtjb25zdCB0PW4uc2xpY2UoMCxlKTtmb3IoO3QubGVuZ3RoPGU7KXQucHVzaCgxKTtmb3IobGV0IHM9ZTtzPG4ubGVuZ3RoO3MrKyl0W2UtMV0qPW5bc107cmV0dXJuIHR9ZnVuY3Rpb24gcUgobixlLHQscyxyLG8pe2NvbnN0IGk9dkMoZSwyKVsxXSxhPXZDKG8sMilbMV07bGV0IGw9MDtmb3IoY29uc3QgYyBvZiB0KWZvcihsZXQgaD1jWzBdO2g8Y1sxXTsrK2gpe2ZvcihsZXQgcD0wO3A8czsrK3ApcltsKmErcF09bltoKmkrcF07KytsfX1mdW5jdGlvbiBLSChuLGUsdCxzLHIpe2NvbnN0IG89ZS5zbGljZSgpO29bMF09cjtjb25zdCBpPU10KHQsY2UobykpLGE9bi5sZW5ndGgsbD1hPT09MD8wOmEvZVswXTtyZXR1cm4gcUgobixlLHMsbCxpLG8pLFtpLG9dfWZ1bmN0aW9uIEVSKG4sZSx0LHMscixvLGksYSl7aWYobi5sZW5ndGg9PT0wKXRocm93IG5ldyBFcnJvcigicGFyYW1zTmVzdGVkU3BsaXRzIG11c3QgYmUgbm9uIGVtcHR5Iik7aWYoZVswXS5sZW5ndGg9PT0wKXRocm93IG5ldyBFcnJvcigiU3BsaXQgdGVuc29ycyBtdXN0IG5vdCBiZSBzY2FsYXJzIik7Y29uc3QgbD1lWzBdWzBdLTE7aWYoVUgobyxpLGwpLHMubGVuZ3RoPT09MCl0aHJvdyBuZXcgRXJyb3IoInBhcmFtcy5yYW5rIG11c3QgYmUgbm9uemVybyIpO2NvbnN0IGM9c1swXSx7b3V0U3BsaXRzOmgsdmFsdWVTbGljZXM6cCxudW1WYWx1ZXM6Zn09R0gobyxpLG4sYyksZz1ISChoKSx5PUtIKHQscyxyLHAsZik7cmV0dXJuW2cseVswXSx5WzFdXX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBTQz0yMTQ3NDgzNjQ3O2Z1bmN0aW9uIFJSKG4sZSx0LHMscixvLGkpe2lmKGUubGVuZ3RoPjEpdGhyb3cgbmV3IEVycm9yKCJzdGFydHMgbXVzdCBiZSBhIHNjYWxhciBvciB2ZWN0b3IiKTtpZihyLmxlbmd0aD4xKXRocm93IG5ldyBFcnJvcigibGltaXRzIG11c3QgYmUgYSBzY2FsYXIgb3IgdmVjdG9yIik7aWYoaS5sZW5ndGg+MSl0aHJvdyBuZXcgRXJyb3IoImRlbHRhcyBtdXN0IGJlIGEgc2NhbGFyIG9yIHZlY3RvciIpO2NvbnN0IGE9ZS5sZW5ndGg9PT0wLGw9ci5sZW5ndGg9PT0wLGM9aS5sZW5ndGg9PT0wLGg9W107YXx8aC5wdXNoKGVbMF0pLGx8fGgucHVzaChyWzBdKSxjfHxoLnB1c2goaVswXSk7Zm9yKGxldCBiPTE7YjxoLmxlbmd0aDsrK2IpaWYoaFtiXSE9PWhbYi0xXSl0aHJvdyBuZXcgRXJyb3IoInN0YXJ0cywgbGltaXRzLCBhbmQgZGVsdGFzIG11c3QgaGF2ZSB0aGUgc2FtZSBzaGFwZSIpO2NvbnN0IHA9aC5sZW5ndGg9PT0wPzE6aFswXSxmPU10KCJpbnQzMiIscCsxKTtmWzBdPTA7Zm9yKGxldCBiPTA7YjxwOysrYil7Y29uc3Qgdj1hP25bMF06bltiXSxTPWw/c1swXTpzW2JdLCQ9Yz9vWzBdOm9bYl07aWYoJD09PTApdGhyb3cgbmV3IEVycm9yKCJSZXF1aXJlcyBkZWx0YSAhPSAwIik7bGV0IGs7aWYoJD4wJiZTPHZ8fCQ8MCYmUz52KWs9MDtlbHNlIGlmKGs9TWF0aC5jZWlsKE1hdGguYWJzKChTLXYpLyQpKSxrPlNDKXRocm93IG5ldyBFcnJvcihgUmVxdWlyZXMgKChsaW1pdCAtIHN0YXJ0KSAvIGRlbHRhKSA8PSAke1NDfWApO2ZbYisxXT1mW2JdK2t9Y29uc3QgZz1mW3BdLHk9TXQodCxnKTtsZXQgdz0wO2ZvcihsZXQgYj0wO2I8cDsrK2Ipe2NvbnN0IHY9ZltiKzFdLWZbYl07bGV0IFM9YT9uWzBdOm5bYl07Y29uc3QgJD1jP29bMF06b1tiXTtmb3IobGV0IGs9MDtrPHY7KytrKXlbdysrXT1TLFMrPSR9cmV0dXJuW2YseV19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovdmFyIFhzPXlyO2NsYXNzIGpme2NvbnN0cnVjdG9yKGUsdCxzLHIsbyxpLGEsbCxjLGgpe3RoaXMuc2hhcGU9ZSx0aGlzLnNoYXBlU2hhcGU9dCx0aGlzLnZhbHVlcz1zLHRoaXMudmFsdWVzU2hhcGU9cix0aGlzLnZhbHVlc0RUeXBlPW8sdGhpcy5kZWZhdWx0VmFsdWU9aSx0aGlzLmRlZmF1bHRWYWx1ZVNoYXBlPWEsdGhpcy5yb3dQYXJ0aXRpb25WYWx1ZXM9bCx0aGlzLnJvd1BhcnRpdGlvblZhbHVlc1NoYXBlcz1jLHRoaXMucm93UGFydGl0aW9uVHlwZXM9ZDIoaCksdGhpcy5yYWdnZWRSYW5rPWgyKHRoaXMucm93UGFydGl0aW9uVHlwZXMpfWdldFJvd1BhcnRpdGlvblR5cGVCeURpbWVuc2lvbihlKXtyZXR1cm4gdGhpcy5yb3dQYXJ0aXRpb25UeXBlc1swXT09PVhzLkZJUlNUX0RJTV9TSVpFP3RoaXMucm93UGFydGl0aW9uVHlwZXNbZSsxXTp0aGlzLnJvd1BhcnRpdGlvblR5cGVzW2VdfWdldFJvd1BhcnRpdGlvblRlbnNvcihlKXtyZXR1cm4gdGhpcy5yb3dQYXJ0aXRpb25UeXBlc1swXT09PVhzLkZJUlNUX0RJTV9TSVpFP3RoaXMucm93UGFydGl0aW9uVmFsdWVzW2UrMV06dGhpcy5yb3dQYXJ0aXRpb25WYWx1ZXNbZV19Z2V0TWF4V2lkdGgoZSl7Y29uc3QgdD10aGlzLmdldFJvd1BhcnRpdGlvblRlbnNvcihlLTEpO3N3aXRjaCh0aGlzLmdldFJvd1BhcnRpdGlvblR5cGVCeURpbWVuc2lvbihlLTEpKXtjYXNlIFhzLlZBTFVFX1JPV0lEUzpyZXR1cm4gamYuZ2V0TWF4V2lkdGhWYWx1ZVJvd0lEKHQpO2Nhc2UgWHMuUk9XX1NQTElUUzpyZXR1cm4gamYuZ2V0TWF4V2lkdGhSb3dTcGxpdCh0KTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgQ2Fubm90IGhhbmRsZSBwYXJ0aXRpb24gdHlwZSAke1hzW3RoaXMuZ2V0Um93UGFydGl0aW9uVHlwZUJ5RGltZW5zaW9uKGUtMSldfWApfX1zdGF0aWMgZ2V0TWF4V2lkdGhSb3dTcGxpdChlKXtjb25zdCB0PWUubGVuZ3RoO2lmKHQ9PT0wfHx0PT09MSlyZXR1cm4gMDtsZXQgcz0wO2ZvcihsZXQgcj0wO3I8dC0xOysrcil7Y29uc3Qgbz1lW3IrMV0tZVtyXTtvPnMmJihzPW8pfXJldHVybiBzfXN0YXRpYyBnZXRNYXhXaWR0aFZhbHVlUm93SUQoZSl7Y29uc3QgdD1lLmxlbmd0aDtpZih0PT09MClyZXR1cm4gMDtsZXQgcz0wLHI9ZVswXSxvPTA7Zm9yKGxldCBpPTE7aTx0OysraSl7Y29uc3QgYT1lW2ldO2EhPT1yJiYocj1hLG89TWF0aC5tYXgoaS1zLG8pLHM9aSl9cmV0dXJuIE1hdGgubWF4KHQtcyxvKX10ZW5zb3JTaGFwZUZyb21UZW5zb3IoZSx0LHM9ITApe2lmKHQubGVuZ3RoPT09MCl7aWYoZVswXT09PS0xKXJldHVybltdO3Rocm93IG5ldyBFcnJvcigiVGhlIG9ubHkgdmFsaWQgc2NhbGFyIHNoYXBlIHRlbnNvciBpcyB0aGUgZnVsbHkgdW5rbm93biBzaGFwZSBzcGVjaWZpZWQgYXMgLTEuIil9cmV0dXJuIGtDKGUscyl9Y2FsY3VsYXRlT3V0cHV0U2l6ZShlKXtjb25zdCB0PXRoaXMudmFsdWVzU2hhcGUscz10aGlzLmRlZmF1bHRWYWx1ZVNoYXBlO3AyKHMsdCk7Y29uc3Qgcj10aGlzLnRlbnNvclNoYXBlRnJvbVRlbnNvcih0aGlzLnNoYXBlLHRoaXMuc2hhcGVTaGFwZSksaT1jMih0aGlzLnJhZ2dlZFJhbmsscix0KTtpWzBdPDAmJihpWzBdPWUpO2ZvcihsZXQgYT0xO2E8PXRoaXMucmFnZ2VkUmFuazsrK2EpaVthXTwwJiYoaVthXT10aGlzLmdldE1heFdpZHRoKGEpKTtyZXR1cm4gaX1jYWxjdWxhdGVGaXJzdFBhcmVudE91dHB1dEluZGV4KGUsdCxzKXtjb25zdCByPU1hdGgubWluKGUscyksbz1bXTtsZXQgaT0wO2ZvcihsZXQgYT0wO2E8cjsrK2EsaSs9dClvLnB1c2goaSk7Zm9yKGxldCBhPXI7YTxlOysrYSlvLnB1c2goLTEpO3JldHVybiBBKG8ubGVuZ3RoPT09ZSwoKT0+IkZpbmFsIGxlbmd0aCBvZiByZXN1bHQgbXVzdCBiZSBlcXVhbCB0byBmaXJzdERpbWVuc2lvbi4iKSxvfWNhbGN1bGF0ZU91dHB1dEluZGV4Um93U3BsaXQoZSx0LHMscil7Y29uc3Qgbz1lLmxlbmd0aCxpPVtdO2ZvcihsZXQgYT0wO2E8by0xOysrYSl7Y29uc3QgbD1lW2ErMV0tZVthXTtsZXQgYz1NYXRoLm1pbihyLGwpLGg9dFthXTtoPT09LTEmJihjPTApO2ZvcihsZXQgcD0wO3A8YzsrK3ApaS5wdXNoKGgpLGgrPXM7Zm9yKGxldCBwPTA7cDxsLWM7KytwKWkucHVzaCgtMSl9aWYobz4wJiZpLmxlbmd0aCE9PWVbby0xXSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcm93IHNwbGl0IHNpemUuIik7cmV0dXJuIGl9Y2FsY3VsYXRlT3V0cHV0SW5kZXhWYWx1ZVJvd0lEKGUsdCxzLHIpe2NvbnN0IG89ZS5sZW5ndGgsaT1bXTtpZihvPT09MClyZXR1cm5bXTtsZXQgYT0wLGw9ZVswXTtpZihsPj10Lmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoYEdvdCBjdXJyZW50VmFsdWVSb3dJZD0ke2x9LCB3aGljaCBpcyBub3QgbGVzcyB0aGFuICR7dC5sZW5ndGh9YCk7bGV0IGM9dFtsXTtpLnB1c2goYyk7Zm9yKGxldCBoPTE7aDxvOysraCl7Y29uc3QgcD1lW2hdO2lmKHA9PT1sKWM+PTAmJigrK2EsYTxyP2MrPXM6Yz0tMSk7ZWxzZXtpZihhPTAsbD1wLHA+PXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgR290IG5leHRWYWx1ZVJvd0lkPSR7cH0gd2hpY2ggaXMgbm90IGxlc3MgdGhhbiAke3QubGVuZ3RofWApO2M9dFtwXX1pLnB1c2goYyl9aWYoaS5sZW5ndGghPT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcm93IGlkcy4iKTtyZXR1cm4gaX1jYWxjdWxhdGVPdXRwdXRJbmRleChlLHQscyxyKXtjb25zdCBvPXRoaXMuZ2V0Um93UGFydGl0aW9uVGVuc29yKGUpLGk9dGhpcy5nZXRSb3dQYXJ0aXRpb25UeXBlQnlEaW1lbnNpb24oZSk7c3dpdGNoKGkpe2Nhc2UgWHMuVkFMVUVfUk9XSURTOnJldHVybiB0aGlzLmNhbGN1bGF0ZU91dHB1dEluZGV4VmFsdWVSb3dJRChvLHQscyxyKTtjYXNlIFhzLlJPV19TUExJVFM6aWYoby5sZW5ndGgtMT50Lmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoYFJvdyBwYXJ0aXRpb24gc2l6ZSBpcyBncmVhdGVyIHRoYW4gb3V0cHV0IHNpemU6ICR7by5sZW5ndGgtMX0gPiAke3QubGVuZ3RofWApO3JldHVybiB0aGlzLmNhbGN1bGF0ZU91dHB1dEluZGV4Um93U3BsaXQobyx0LHMscik7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHBhcnRpdGlvbiB0eXBlOiAke1hzW2ldfWApfX1nZXRGaXJzdERpbWVuc2lvblNpemUoKXtjb25zdCBlPXRoaXMucm93UGFydGl0aW9uVmFsdWVzWzBdO2lmKHRoaXMucm93UGFydGl0aW9uVHlwZXMubGVuZ3RoPT09MCl0aHJvdyBuZXcgRXJyb3IoIk5vIHJvd19wYXJ0aXRpb25fdHlwZXMgZ2l2ZW4uIik7Y29uc3QgdD10aGlzLnJvd1BhcnRpdGlvblR5cGVzWzBdO3N3aXRjaCh0KXtjYXNlIFhzLkZJUlNUX0RJTV9TSVpFOnJldHVybiBlWzBdO2Nhc2UgWHMuVkFMVUVfUk9XSURTOnRocm93IG5ldyBFcnJvcigiQ2Fubm90IGhhbmRsZSBWQUxVRV9ST1dJRFMgaW4gZmlyc3QgZGltZW5zaW9uLiIpO2Nhc2UgWHMuUk9XX1NQTElUUzpyZXR1cm4gdGhpcy5yb3dQYXJ0aXRpb25WYWx1ZXNTaGFwZXNbMF1bMF0tMTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgQ2Fubm90IGhhbmRsZSB0eXBlICR7WHNbdF19YCl9fWNvbXB1dGUoKXtpZih0aGlzLnJvd1BhcnRpdGlvblZhbHVlc1swXS5sZW5ndGg8PTApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGZpcnN0IHBhcnRpdGlvbiBpbnB1dC4gVGVuc29yIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSBlbGVtZW50LiIpO2NvbnN0IHQ9dGhpcy5nZXRGaXJzdERpbWVuc2lvblNpemUoKSxzPXRoaXMuY2FsY3VsYXRlT3V0cHV0U2l6ZSh0KSxyPW5ldyBBcnJheSh0aGlzLnJhZ2dlZFJhbmsrMSk7cltyLmxlbmd0aC0xXT0xO2ZvcihsZXQgbD1yLmxlbmd0aC0yO2w+PTA7LS1sKXJbbF09cltsKzFdKnNbbCsxXTtjb25zdCBvPWtDKHMsITEpLGk9TXQodGhpcy52YWx1ZXNEVHlwZSxjZShvKSk7aWYoclswXSpzWzBdPjApe2xldCBsPXRoaXMuY2FsY3VsYXRlRmlyc3RQYXJlbnRPdXRwdXRJbmRleCh0LHJbMF0sc1swXSk7Zm9yKGxldCBjPTE7Yzw9dGhpcy5yYWdnZWRSYW5rOysrYylsPXRoaXMuY2FsY3VsYXRlT3V0cHV0SW5kZXgoYy0xLGwscltjXSxzW2NdKTt0aGlzLnNldE91dHB1dCh0aGlzLnJhZ2dlZFJhbmssbCxpLG8pfXJldHVybltvLGldfXNldE91dHB1dChlLHQscyxyKXtpZihzLmxlbmd0aD09PTApcmV0dXJuO2NvbnN0IG89dGhpcy52YWx1ZXMsaT1zO2xldCBhPXIuc2xpY2UoKTthPWEuc2xpY2UoZSsxKTtjb25zdCBsPWNlKGEpLGM9dC5sZW5ndGg7bGV0IGg9dGhpcy5kZWZhdWx0VmFsdWU7aWYoaC5sZW5ndGghPT1sJiZoLmxlbmd0aCE9PTEpe2NvbnN0IHk9dGhpcy5kZWZhdWx0VmFsdWVTaGFwZTtyZSgoKT0+e2NvbnN0IHc9SihoLHkpO2g9dGEodyxhKS5kYXRhU3luYygpfSl9bGV0IHA9MCxmPTAsZz0wO2ZvcihsZXQgeT0wO3k8PWM7Kyt5KXtsZXQgdz15PGM/dFt5XTotMTtpZih3PT09Zyl7KytnO2NvbnRpbnVlfWlmKGY8Zyl7Y29uc3QgYj1vLnN1YmFycmF5KHAqbCksdj1pLnN1YmFycmF5KGYqbCksUz0oZy1mKSpsO05DKHYsYixTKX1pZih5Pj1jKXtjb25zdCBiPXMubGVuZ3RoO3c9TWF0aC5mbG9vcihiL2wpfWlmKHc+ZylpZih0aGlzLmRlZmF1bHRWYWx1ZS5sZW5ndGg9PT0xKWkuc3ViYXJyYXkoZypsLHcqbCkuZmlsbCh0aGlzLmRlZmF1bHRWYWx1ZVswXSksZz13O2Vsc2UgZm9yKDt3Pmc7KXtjb25zdCBiPWkuc2xpY2UoZypsKTtOQyhiLGgsbCksKytnfXc8MD8ocD15KzEsZj1nKToocD15LGY9ZyxnPWYrMSl9fX1mdW5jdGlvbiBOQyhuLGUsdCl7Zm9yKGxldCBzPTA7czx0O3MrKyluW3NdPWVbc119ZnVuY3Rpb24ga0MobixlKXtjb25zdCB0PVtdO2ZvcihsZXQgcyBvZiBuKXtpZihzPDApe2lmKCFlKXRocm93IG5ldyBFcnJvcihgRGltZW5zaW9uICR7c30gbXVzdCBiZSA+PSAwYCk7aWYoczwtMSl0aHJvdyBuZXcgRXJyb3IoYERpbWVuc2lvbiAke3N9IG11c3QgYmUgPj0gLTFgKTtzPS0xfXQucHVzaChzKX1yZXR1cm4gdH1mdW5jdGlvbiBEUihuLGUsdCxzLHIsbyxpLGEsbCxjKXtyZXR1cm4gbmV3IGpmKG4sZSx0LHMscixvLGksYSxsLGMpLmNvbXB1dGUoKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBBUihuLGUsdCxzKXtjb25zdCByPW49PT1lLG89bjxlJiZ0PDAsaT1lPG4mJnQ+MTtpZihyfHxvfHxpKXJldHVybiBTbigwLHMpO2NvbnN0IGE9TWF0aC5hYnMoTWF0aC5jZWlsKChlLW4pL3QpKSxsPVNuKGEscyk7ZTxuJiZ0PT09MSYmKHQ9LTEpLGxbMF09bjtmb3IobGV0IGM9MTtjPGwubGVuZ3RoO2MrKylsW2NdPWxbYy0xXSt0O3JldHVybiBsfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgX1I9WnIobj0+MS9NYXRoLnNxcnQobikpLFhIPUNpKGx1LF9SKSxZSD17a2VybmVsTmFtZTpsdSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlhIfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBaaShuLGUsdCxzLHIsbyxpLGEsbCxjKXtjb25zdCBoPVtzL3Iscl0scD1uLnZhbHVlcyxmPWUudmFsdWVzO2lmKHM9PT0wKXJldHVybiBxZSh0LGUuZHR5cGUpO2NvbnN0IGc9bCBpbnN0YW5jZW9mIFF0P2w6cWUoaCxlLmR0eXBlKTt0eXBlb2YgbD09InN0cmluZyJ8fHR5cGVvZiBsPT0ibnVtYmVyIj9nLnZhbHVlcy5maWxsKGwpOnR5cGVvZiBsPT0iYm9vbGVhbiImJmcudmFsdWVzLmZpbGwoK2wpO2ZvcihsZXQgeT0wO3k8bzt5Kyspe2NvbnN0IHc9W107bGV0IGI9MDtmb3IobGV0IHY9MDt2PGk7disrKXtjb25zdCBTPXBbeSppK3ZdO3cucHVzaChTKSxiKz1TKmFbdl19aWYoYjwwfHxiPj1zL3IpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGluZGljZXM6ICR7d30gZG9lcyBub3QgaW5kZXggaW50byAke3R9YCk7Zm9yKGxldCB2PTA7djxyO3YrKyljP2cudmFsdWVzW2Iqcit2XSs9Zlt5KnIrdl06Zy52YWx1ZXNbYipyK3ZdPWUucmFuaz09PTA/ZlswXTpmW3kqcit2XX1yZXR1cm4gZ30vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFFIPVpyKG49PjEvKDErTWF0aC5leHAoLW4pKSksT1I9bXQocHUsbj0+MS8oMStNYXRoLmV4cCgtbikpKSxaSD17a2VybmVsTmFtZTpwdSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOk9SfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBGUihuLGUsdCxzLHIpe2NvbnN0IG89aXcocyxlLHQpLGk9Y2UodCksYT16ZShzKTtpZihvKXtjb25zdCBwPWF3KGUsYSk7cmV0dXJuIHI9PT0ic3RyaW5nIj9uLnNsaWNlKHAscCtpKTpuLnN1YmFycmF5KHAscCtpKX1jb25zdCBsPXI9PT0ic3RyaW5nIj93byhuKTpuLGM9cWUocyxyLGwpLGg9cWUodCxyKTtmb3IobGV0IHA9MDtwPGguc2l6ZTsrK3Ape2NvbnN0IGY9aC5pbmRleFRvTG9jKHApLGc9Zi5tYXAoKHksdyk9PnkrZVt3XSk7aC5zZXQoYy5nZXQoLi4uZyksLi4uZil9cmV0dXJuIHI9PT0ic3RyaW5nIj9fMihoLnZhbHVlcyk6aC52YWx1ZXN9ZnVuY3Rpb24geWEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7YmVnaW46byxzaXplOml9PXM7RGUociwic2xpY2UiKTtjb25zdFthLGxdPUhnKHIsbyxpKTtydyhyLGEsbCk7Y29uc3QgYz10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsaD1GUihjLGEsbCxyLnNoYXBlLHIuZHR5cGUpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGwsci5kdHlwZSxoKX1jb25zdCBKSD17a2VybmVsTmFtZTpxZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnlhfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBMUihuLGUsdCxzLHIsbyxpKXtjb25zdCBhPWVbMF0sbD1vWzBdLGM9bmV3IEFycmF5KGwpLGg9bmV3IEFycmF5KGEpLHA9ZVsxXTtpZihsPT09MCl7aWYoYSE9PTApdGhyb3cgbmV3IEVycm9yKHcyKGEpKTtjb25zdCBiPU10KHQsMCksdj1NdChyLDApO3JldHVybltiLFswLHBdLHYsYyxoXX1sZXQgZj0hMCxnPTA7Y29uc3QgeT1uZXcgQXJyYXkobCkuZmlsbCgwKTtmb3IobGV0IGI9MDtiPGE7KytiKXtjb25zdCB2PW5bYipwXTtpZih2PDApdGhyb3cgbmV3IEVycm9yKHYyKGIsdikpO2lmKHY+PWwpdGhyb3cgbmV3IEVycm9yKFMyKGIsdixsKSk7Kyt5W3ZdLGY9ZiYmdj49ZyxnPXZ9bGV0IHc9ITA7Zm9yKGxldCBiPTA7YjxsOysrYil7Y29uc3Qgdj15W2JdPT09MDtjW2JdPXYsdz13JiYhdix5W2JdPU1hdGgubWF4KHlbYl0sMSksYj4wJiYoeVtiXSs9eVtiLTFdKX1pZih3JiZmKXtjb25zdCBiPW4sdj1zO2ZvcihsZXQgUz0wO1M8YTsrK1MpaFtTXT1TO3JldHVybltiLFthLHBdLHYsYyxoXX1lbHNle2NvbnN0IGI9eVtsLTFdLHY9TXQodCxiKnApLFM9TXQocixiKSwkPW5ldyBBcnJheShsKS5maWxsKDApO2ZvcihsZXQgaz0wO2s8YTsrK2spe2NvbnN0IFQ9bltrKnBdLEQ9JFtUXSxMPShUPT09MD8wOnlbVC0xXSkrRDskW1RdKys7Zm9yKGxldCB6PTA7ejxwOysreil2W0wqcCt6XT1uW2sqcCt6XTtTW0xdPXNba10saFtrXT1MfWZvcihsZXQgaz0wO2s8bDsrK2spaWYoJFtrXT09PTApe2NvbnN0IEQ9az09PTA/MDp5W2stMV07dltEKnArMF09aztmb3IobGV0IEw9MTtMPHA7KytMKXZbRCpwK0xdPTA7U1tEXT1pfXJldHVyblt2LFtiLHBdLFMsYyxoXX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUFIobixlLHQscyxyKXtjb25zdCBvPWNlKHMpLGk9ZVswXSxhPXIubGVuZ3RoLGw9W107bGV0IGM9MSxoPS0xO2ZvcihsZXQgYj0wO2I8YTsrK2Ipe2NvbnN0IHY9cltiXTtpZih2PT09LTEpe2lmKGghPT0tMSl0aHJvdyBuZXcgRXJyb3IoTjIoaCxiKSk7aD1iLGwucHVzaCgxKX1lbHNle2lmKHY8MCl0aHJvdyBuZXcgRXJyb3IoazIoYix2KSk7Yyo9dixsLnB1c2godil9fWlmKGghPT0tMSl7aWYoYzw9MCl0aHJvdyBuZXcgRXJyb3IoQzIoKSk7Y29uc3QgYj1NYXRoLnRydW5jKG8vYyk7aWYoYypiIT09byl0aHJvdyBuZXcgRXJyb3IoJDIocyxsKSk7bFtoXT1ifWlmKGNlKGwpIT09byl0aHJvdyBuZXcgRXJyb3IoSTIocyxsKSk7Y29uc3QgZj1zLmxlbmd0aCxnPVtdO2lmKGY+MCl7Z1tmLTFdPTE7Zm9yKGxldCBiPWYtMjtiPj0wOy0tYilnW2JdPWdbYisxXSpzW2IrMV19Y29uc3QgeT1bXTtpZihhPjApe3lbYS0xXT0xO2ZvcihsZXQgYj1hLTI7Yj49MDstLWIpeVtiXT15W2IrMV0qbFtiKzFdfWNvbnN0IHc9TXQodCxpKmEpO2ZvcihsZXQgYj0wO2I8aTsrK2Ipe2xldCB2PTA7Zm9yKGxldCBTPTA7UzxmOysrUyl2Kz1uW2IqZitTXSpnW1NdO2ZvcihsZXQgUz0wO1M8YTsrK1Mpd1tiKmErU109TWF0aC50cnVuYyh2L3lbU10pLHYlPXlbU119cmV0dXJuW3csW2ksYV0sbF19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcnYobixlLHQscyxyLG89ITEsaT0wKXtjb25zdCBhPXMubGVuZ3RoLGw9W2VbMF0sbi5sZW5ndGgvZVswXV0sYz1sWzFdLHA9YT4wP3JbYS0xXSsxOjA7aWYocDwwKXRocm93IG5ldyBFcnJvcihYMCgpKTtjb25zdCBmPWUuc2xpY2UoKTtmWzBdPXA7Y29uc3QgZz1mLnJlZHVjZSgoJCxrKT0+JCprLDEpLHk9TXQodCxnKTtpZihhPT09MClyZXR1cm4gcD4wJiZ5LmZpbGwoaSksW3ksZl07aWYocDw9MCl0aHJvdyBuZXcgRXJyb3IoWDAoKSk7bGV0IHc9MCxiPTEsdj0wLFM9clt3XTtmb3IoOzspe2xldCAkPTA7aWYoYjxhKXtpZigkPXJbYl0sUz09PSQpeysrYjtjb250aW51ZX1pZihTPj0kKXRocm93IG5ldyBFcnJvcihUMigpKX1pZihTPDB8fFM+PXApdGhyb3cgbmV3IEVycm9yKEUyKFMscCkpO1M+diYmeS5maWxsKGksdipjLFMqYyk7Zm9yKGxldCBrPXc7azxiOysrayl7Y29uc3QgVD1zW2tdO2lmKFQ8MHx8VD49bFswXSl0aHJvdyBuZXcgRXJyb3IoUjIoayxzW2tdLGxbMF0pKTtmb3IobGV0IEQ9MDtEPGM7RCsrKXlbUypjK0RdKz1uW1QqYytEXX1pZihvKWZvcihsZXQgaz0wO2s8YztrKyspeVtTKmMra10vPWItdztpZih3PWIsKytiLHY9UysxLFM9JCxiPmEpYnJlYWt9cmV0dXJuIHY8cCYmeS5maWxsKGksdipjLHAqYyksW3ksZl19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBlNT1acihuPT5NYXRoLnNxcnQobikpLHQ1PW10KG11LG49Pk1hdGguc3FydChuKSksbjU9e2tlcm5lbE5hbWU6bXUsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp0NX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgelI9SHQoKChuLGUpPT57Y29uc3QgdD1uLWU7cmV0dXJuIHQqdH0pKSxzNT1vbihndSx6UikscjU9e2tlcm5lbE5hbWU6Z3UsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpzNX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgTVI9WnIoKG4sZSk9Pntjb25zdHtwYXR0ZXJuOnQscmVwbGFjZUdsb2JhbDpzLHJld3JpdGU6cn09ZTtyZXR1cm4gbi5yZXBsYWNlKG5ldyBSZWdFeHAodCxzPyJnIjoiIikscil9KSxvNT1DaShaZCxNUiksaTU9e2tlcm5lbE5hbWU6WmQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpvNX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQlIobixlLHQscyl7Y29uc3Qgcj1xZShuLGUuZHR5cGUpO2ZvcihsZXQgbz0wO288ci5zaXplO28rKyl7Y29uc3QgaT1yLmluZGV4VG9Mb2MobyksYT1uZXcgQXJyYXkoaS5sZW5ndGgpO2ZvcihsZXQgbD0wO2w8YS5sZW5ndGg7bCsrKWFbbF09aVtsXSp0W2xdK3NbbF07ci5zZXQoZS5nZXQoLi4uYSksLi4uaSl9cmV0dXJuIHJ9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgYTV7Y29uc3RydWN0b3IoZSx0LHMscixvLGkpe3RoaXMuc2VwYXJhdG9yPUJyKGUpLHRoaXMubkdyYW1XaWR0aHM9dCx0aGlzLmxlZnRQYWQ9QnIocyksdGhpcy5yaWdodFBhZD1CcihyKSx0aGlzLnBhZFdpZHRoPW8sdGhpcy5wcmVzZXJ2ZVNob3J0PWl9Z2V0UGFkV2lkdGgoZSl7cmV0dXJuIE1hdGgubWluKHRoaXMucGFkV2lkdGg8MD9lLTE6dGhpcy5wYWRXaWR0aCxlLTEpfWdldE51bU5HcmFtcyhlLHQpe2NvbnN0IHM9dGhpcy5nZXRQYWRXaWR0aCh0KTtyZXR1cm4gTWF0aC5tYXgoMCxlKzIqcy10KzEpfWNyZWF0ZU5HcmFtcyhlLHQscyxyLG8saSl7Zm9yKGxldCBhPTA7YTxvOysrYSl7Y29uc3QgbD10aGlzLmdldFBhZFdpZHRoKGkpLGM9TWF0aC5tYXgoMCxsLWEpLGg9TWF0aC5tYXgoMCxsLShvLShhKzEpKSkscD1pLShjK2gpLGY9dCsoYz4wPzA6YS1sKTtsZXQgZz0wO2crPWMqdGhpcy5sZWZ0UGFkLmxlbmd0aDtmb3IobGV0IFM9MDtTPHA7KytTKWcrPWVbZitTXS5sZW5ndGg7Zys9aCp0aGlzLnJpZ2h0UGFkLmxlbmd0aDtjb25zdCB5PWMraCtwLTE7Zys9eSp0aGlzLnNlcGFyYXRvci5sZW5ndGgsc1tyK2FdPW5ldyBVaW50OEFycmF5KGcpO2NvbnN0IHc9c1tyK2FdO2xldCBiPTA7Y29uc3Qgdj1TPT5TLmZvckVhY2goJD0+d1tiKytdPSQpO2ZvcihsZXQgUz0wO1M8YzsrK1Mpdih0aGlzLmxlZnRQYWQpLHYodGhpcy5zZXBhcmF0b3IpO2ZvcihsZXQgUz0wO1M8cC0xOysrUyl2KGVbZitTXSksdih0aGlzLnNlcGFyYXRvcik7aWYocD4wKXt2KGVbZitwLTFdKTtmb3IobGV0IFM9MDtTPGg7KytTKXYodGhpcy5zZXBhcmF0b3IpLHYodGhpcy5yaWdodFBhZCl9ZWxzZXtmb3IobGV0IFM9MDtTPGgtMTsrK1Mpdih0aGlzLnJpZ2h0UGFkKSx2KHRoaXMuc2VwYXJhdG9yKTt2KHRoaXMucmlnaHRQYWQpfX19Y29tcHV0ZShlLHQpe2NvbnN0IHM9ZS5sZW5ndGgscj10Lmxlbmd0aDtpZihyPjApe2xldCBsPXRbMF07aWYobCE9PTApdGhyb3cgbmV3IEVycm9yKGBGaXJzdCBzcGxpdCB2YWx1ZSBtdXN0IGJlIDAsIGdvdCAke2x9YCk7Zm9yKGxldCBjPTE7YzxyOysrYyl7bGV0IGg9dFtjXT49bDtpZihoPWgmJnRbY108PXMsIWgpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNwbGl0IHZhbHVlICR7dFtjXX0sIG11c3QgYmUgaW4gWyR7bH0sICR7c31dYCk7bD10W2NdfWlmKGwhPT1zKXRocm93IG5ldyBFcnJvcihgTGFzdCBzcGxpdCB2YWx1ZSBtdXN0IGJlIGRhdGEgc2l6ZS4gRXhwZWN0ZWQgJHtzfSwgZ290ICR7bH1gKX1jb25zdCBvPXItMSxpPU10KCJpbnQzMiIscik7aWYocz09PTB8fHI9PT0wKXtjb25zdCBsPW5ldyBBcnJheShzKTtmb3IobGV0IGM9MDtjPD1vOysrYylpW2NdPTA7cmV0dXJuW2wsaV19aVswXT0wO2ZvcihsZXQgbD0xO2w8PW87KytsKXtjb25zdCBjPXRbbF0tdFtsLTFdO2xldCBoPTA7dGhpcy5uR3JhbVdpZHRocy5mb3JFYWNoKHA9PntoKz10aGlzLmdldE51bU5HcmFtcyhjLHApfSksdGhpcy5wcmVzZXJ2ZVNob3J0JiZjPjAmJmg9PT0wJiYoaD0xKSxpW2xdPWlbbC0xXStofWNvbnN0IGE9bmV3IEFycmF5KGlbb10pO2ZvcihsZXQgbD0wO2w8bzsrK2wpe2NvbnN0IGM9dFtsXTtsZXQgaD1pW2xdO2lmKHRoaXMubkdyYW1XaWR0aHMuZm9yRWFjaChwPT57Y29uc3QgZj10W2wrMV0tdFtsXSxnPXRoaXMuZ2V0TnVtTkdyYW1zKGYscCk7dGhpcy5jcmVhdGVOR3JhbXMoZSxjLGEsaCxnLHApLGgrPWd9KSx0aGlzLnByZXNlcnZlU2hvcnQmJmg9PT1pW2xdKXtjb25zdCBwPXRbbCsxXS10W2xdO2lmKHA9PT0wKWNvbnRpbnVlO2NvbnN0IGY9cCsyKnRoaXMucGFkV2lkdGg7dGhpcy5jcmVhdGVOR3JhbXMoZSxjLGEsaCwxLGYpfX1yZXR1cm5bYSxpXX19ZnVuY3Rpb24gVlIobixlLHQscyxyLG8saSxhKXtyZXR1cm4gbmV3IGE1KHQscyxyLG8saSxhKS5jb21wdXRlKG4sZSl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gbDUobixlLHQscyl7aWYoIW4ubGVuZ3RoKXJldHVybjtpZihlLmxlbmd0aD09PTApe2ZvcihsZXQgbz0wO288bi5sZW5ndGg7KytvKXMucHVzaChuLnN1YmFycmF5KG8sbysxKSk7cmV0dXJufWlmKGUubGVuZ3RoPT09MSl7Y29uc3Qgbz1lWzBdO2xldCBpPW4uaW5kZXhPZihvKTtmb3IoO2khPT0tMTspe2NvbnN0IGE9bi5zdWJhcnJheSgwLGkpOyghdHx8YS5sZW5ndGghPT0wKSYmcy5wdXNoKGEpLG49bi5zdWJhcnJheShpKzEpLGk9bi5pbmRleE9mKG8pfSghdHx8bi5sZW5ndGghPT0wKSYmcy5wdXNoKG4pO3JldHVybn1sZXQgcj0wO2ZvcihsZXQgbz0wO288bi5sZW5ndGgrMTtvKyspaWYobz09PW4ubGVuZ3RofHxlLmluZGV4T2YobltvXSkhPT0tMSl7Y29uc3QgaT1uLnN1YmFycmF5KHIsbyk7KCF0fHxpLmxlbmd0aCE9PTApJiZzLnB1c2goaSkscj1vKzF9fWZ1bmN0aW9uIFdSKG4sZSx0KXtjb25zdCBzPW4ubGVuZ3RoLHI9W107bGV0IG89MCxpPTA7Y29uc3QgYT1uZXcgQXJyYXkocyk7Zm9yKGxldCBmPTA7ZjxzOysrZil7Y29uc3QgZz1yLmxlbmd0aDtsNShuW2ZdLGUsdCxyKTtjb25zdCB5PXIubGVuZ3RoLWc7YVtmXT15LG8rPXksaT1NYXRoLm1heChpLHkpfWNvbnN0IGw9TXQoImludDMyIixvKjIpLGM9bmV3IEFycmF5KG8pLGg9W3MsaV07bGV0IHA9MDtmb3IobGV0IGY9MDtmPHM7KytmKWZvcihsZXQgZz0wO2c8YVtmXTsrK2cpbFtwKjJdPWYsbFtwKjIrMV09ZyxjW3BdPXJbcF0sKytwO3JldHVybltsLGMsaF19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gVVIobixlKXtjb25zdCB0PU10KCJpbnQzMiIsbi5sZW5ndGgpO2ZvcihsZXQgcz0wO3M8bi5sZW5ndGg7KytzKXRbc109diQobltzXSkubW9kdWxvKGUpLmdldExvd0JpdHNVbnNpZ25lZCgpO3JldHVybiB0fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGpSPUh0KCgobixlKT0+bi1lKSksdTU9ZXYoKChuLGUsdCxzKT0+KHtyZWFsOm4tdCxpbWFnOmUtc30pKSksb3Y9b24oeXUsalIsdTUpLGM1PXtrZXJuZWxOYW1lOnl1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6b3Z9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEdSKG4sZSl7Y29uc3QgdD1uZXcgQXJyYXkobi5yYW5rKTtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKyl0W3JdPW4uc2hhcGVbcl0qZVtyXTtjb25zdCBzPXFlKHQsbi5kdHlwZSk7Zm9yKGxldCByPTA7cjxzLnZhbHVlcy5sZW5ndGg7KytyKXtjb25zdCBvPXMuaW5kZXhUb0xvYyhyKSxpPW5ldyBBcnJheShuLnJhbmspO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF09b1tsXSVuLnNoYXBlW2xdO2NvbnN0IGE9bi5sb2NUb0luZGV4KGkpO3MudmFsdWVzW3JdPW4udmFsdWVzW2FdfXJldHVybiBzfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFRjPShuLGUpPT57Y29uc3QgdD1lLnZhbHVlLW4udmFsdWU7cmV0dXJuIHQ9PT0wP24uaW5kZXgtZS5pbmRleDp0fTtmdW5jdGlvbiBIUihuLGUsdD0wLHM9bi5sZW5ndGgtMSl7Zm9yKDtzPnQ7KXtpZihzLXQ+NjAwKXtjb25zdCBhPXMtdCsxLGw9ZS10KzEsYz1NYXRoLmxvZyhhKSxoPS41Kk1hdGguZXhwKDIqYy8zKSxwPS41Kk1hdGguc3FydChjKmgqKGEtaCkvYSkqTWF0aC5zaWduKGwtYS8yKSxmPU1hdGgubWF4KHQsTWF0aC5mbG9vcihlLWwqaC9hK3ApKSxnPU1hdGgubWluKHMsTWF0aC5mbG9vcihlKyhhLWwpKmgvYStwKSk7SFIobixlLGYsZyl9Y29uc3Qgcj1uW2VdO2xldCBvPXQsaT1zO2ZvcihwbyhuLHQsZSksVGMobltzXSxyKT4wJiZwbyhuLHQscyk7bzxpOyl7Zm9yKHBvKG4sbyxpKSxvKyssaS0tO1RjKG5bb10scik8MDspbz1vKzE7Zm9yKDtUYyhuW2ldLHIpPjA7KWk9aS0xfVRjKG5bdF0scik9PT0wP3BvKG4sdCxpKTooaT1pKzEscG8obixpLHMpKSxpPD1lJiYodD1pKzEpLGU8PWkmJihzPWktMSl9fWZ1bmN0aW9uIHFSKG4sZSx0LHMscil7Y29uc3Qgbz1lW2UubGVuZ3RoLTFdLFtpLGFdPVtuLmxlbmd0aC9vLG9dLGw9aG4odCxpKnMpLGM9aG4oImludDMyIixpKnMpO2ZvcihsZXQgcD0wO3A8aTtwKyspe2NvbnN0IGY9cCphLGc9bi5zdWJhcnJheShmLGYrYSk7bGV0IHk9bmV3IEFycmF5KGcubGVuZ3RoKTtnLmZvckVhY2goKFMsJCk9PnlbJF09e3ZhbHVlOlMsaW5kZXg6JH0pLHM8eS5sZW5ndGgmJihIUih5LHMpLHk9eS5zbGljZSgwLHMpKSxyJiZ5LnNvcnQoVGMpO2NvbnN0IHc9cCpzLGI9bC5zdWJhcnJheSh3LHcrcyksdj1jLnN1YmFycmF5KHcsdytzKTtmb3IobGV0IFM9MDtTPHM7UysrKWJbU109eVtTXS52YWx1ZSx2W1NdPXlbU10uaW5kZXh9Y29uc3QgaD1lLnNsaWNlKCk7cmV0dXJuIGhbaC5sZW5ndGgtMV09cyxbcWUoaCx0LGwpLHFlKGgsImludDMyIixjKV19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gS1IobixlLHQscyl7Y29uc3Qgcj1RZShlLHQpWzBdLG89WzEsdFswXSwxXTtmb3IobGV0IHk9MDt5PHI7eSsrKW9bMF0qPXRbeV07b1sxXT10W3JdO2ZvcihsZXQgeT1yKzE7eTx0Lmxlbmd0aDt5Kyspb1syXSo9dFt5XTtjb25zdCBpPW5ldyBNYXAsYT1uZXcgSW50MzJBcnJheSh0W3JdKSxsPW5ldyBRdChvLHMsbiksYz1bXSxoPW9bMF09PT0xJiZvWzJdPT09MTtmb3IobGV0IHk9MDt5PHRbcl07eSsrKXtsZXQgdztpZihoKXc9blt5XS50b1N0cmluZygpO2Vsc2V7Y29uc3Qgdj1bXTtmb3IobGV0IFM9MDtTPG9bMF07UysrKWZvcihsZXQgJD0wOyQ8b1syXTskKyspdi5wdXNoKGwuZ2V0KFMseSwkKSk7dz12LmpvaW4oIiwiKX1jb25zdCBiPWkuZ2V0KHcpO2lmKGIhPW51bGwpYVt5XT1iO2Vsc2V7Y29uc3Qgdj1pLnNpemU7aS5zZXQodyx2KSxhW3ldPXYsYy5wdXNoKHkpfX1jb25zdCBwPW8uc2xpY2UoKTtwWzFdPWkuc2l6ZTtjb25zdCBmPW5ldyBRdChwLHMpO2MuZm9yRWFjaCgoeSx3KT0+e2ZvcihsZXQgYj0wO2I8b1swXTtiKyspZm9yKGxldCB2PTA7djxvWzJdO3YrKylmLnNldChsLmdldChiLHksdiksYix3LHYpfSk7Y29uc3QgZz10LnNsaWNlKCk7cmV0dXJuIGdbcl09cFsxXSx7b3V0cHV0VmFsdWVzOmYudmFsdWVzLG91dHB1dFNoYXBlOmcsaW5kaWNlczphfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBkNT1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsYWRkSW1wbDpzUixiaW5jb3VudEltcGw6dHYsYmluY291bnRSZWR1Y2VJbXBsOnJSLGJpdHdpc2VBbmRJbXBsOm9SLGNhc3RJbXBsOm5SLGNlaWxJbXBsOmlSLGNvbmNhdEltcGw6YVIsZXF1YWxJbXBsOmxSLGV4cEltcGw6Y1IsZXhwbTFJbXBsOmhSLGZsb29yRGl2SW1wbDpmUixmbG9vckltcGw6cFIsZ2F0aGVyTmRJbXBsOm1SLGdhdGhlclYySW1wbDpnUixncmVhdGVyRXF1YWxJbXBsOnhSLGdyZWF0ZXJJbXBsOnlSLGxlc3NFcXVhbEltcGw6d1IsbGVzc0ltcGw6YlIsbGluU3BhY2VJbXBsOnZSLGxvZ0ltcGw6U1IsbWF4SW1wbDpOUixtYXhpbXVtSW1wbDprUixtaW5pbXVtSW1wbDpDUixtdWx0aXBseUltcGw6bnYsbmVnSW1wbDokUixub3RFcXVhbEltcGw6SVIscHJvZEltcGw6VFIscmFnZ2VkR2F0aGVySW1wbDpFUixyYWdnZWRSYW5nZUltcGw6UlIscmFnZ2VkVGVuc29yVG9UZW5zb3JJbXBsOkRSLHJhbmdlSW1wbDpBUixyc3FydEltcGw6X1Isc2NhdHRlckltcGw6Wmksc2lnbW9pZEltcGw6UUgsc2ltcGxlQWJzSW1wbDp0UixzbGljZUltcGw6RlIsc3BhcnNlRmlsbEVtcHR5Um93c0ltcGw6TFIsc3BhcnNlUmVzaGFwZUltcGw6UFIsc3BhcnNlU2VnbWVudFJlZHVjdGlvbkltcGw6cnYsc3FydEltcGw6ZTUsc3F1YXJlZERpZmZlcmVuY2VJbXBsOnpSLHN0YXRpY1JlZ2V4UmVwbGFjZUltcGw6TVIsc3RyaWRlZFNsaWNlSW1wbDpCUixzdHJpbmdOR3JhbXNJbXBsOlZSLHN0cmluZ1NwbGl0SW1wbDpXUixzdHJpbmdUb0hhc2hCdWNrZXRGYXN0SW1wbDpVUixzdWJJbXBsOmpSLHRpbGVJbXBsOkdSLHRvcEtJbXBsOnFSLHRyYW5zcG9zZUltcGw6c3YsdW5pcXVlSW1wbDpLUn0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9NMSgiY3B1IiwoKT0+bmV3IGl5LDEpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgWFI9bXQoQmwsbj0+bj49MD9uOk1hdGguZXhwKG4pLTEpLGg1PXtrZXJuZWxOYW1lOkJsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6WFJ9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFlSKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2FscGhhOm99PXM7RGUoW3JdLCJsZWFreVJlbHUiKTtjb25zdCBpPWNlKHIuc2hhcGUpLGE9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLGw9aG4oImZsb2F0MzIiLGkpO2ZvcihsZXQgYz0wO2M8YS5sZW5ndGg7YysrKWxbY109YVtjXTwwP28qYVtjXTphW2NdO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKHIuc2hhcGUsImZsb2F0MzIiLGwpfWNvbnN0IHA1PXtrZXJuZWxOYW1lOnZkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6WVJ9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgZjU9SHQoKG4sZSk9Pm48MD9lKm46bik7ZnVuY3Rpb24gUVIobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHt4OnMsYWxwaGE6cn09ZTtEZShbcyxyXSwicHJlbHUiKTtjb25zdCBvPXQuZGF0YS5nZXQocy5kYXRhSWQpLnZhbHVlcyxpPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxbYSxsXT1mNShzLnNoYXBlLHIuc2hhcGUsbyxpLCJmbG9hdDMyIik7cmV0dXJuIHQubWFrZVRlbnNvckluZm8obCwiZmxvYXQzMiIsYSl9Y29uc3QgbTU9e2tlcm5lbE5hbWU6QmQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpRUn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBaUj1tdChvdSxuPT5NYXRoLm1heCgwLG4pKSxnNT17a2VybmVsTmFtZTpvdSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlpSfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEpSPW10KGl1LG49Pk1hdGgubWluKE1hdGgubWF4KDAsbiksNikpLHk1PXtrZXJuZWxOYW1lOml1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6SlJ9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEdmKG4sZSx0LHMscil7aWYodD09PSJsaW5lYXIiKXJldHVybiBZcih7aW5wdXRzOnt4OmV9LGJhY2tlbmQ6bn0pO2lmKHQ9PT0icmVsdSIpcmV0dXJuIFpSKHtpbnB1dHM6e3g6ZX0sYmFja2VuZDpufSk7aWYodD09PSJlbHUiKXJldHVybiBYUih7aW5wdXRzOnt4OmV9LGJhY2tlbmQ6bn0pO2lmKHQ9PT0icmVsdTYiKXJldHVybiBKUih7aW5wdXRzOnt4OmV9LGJhY2tlbmQ6bn0pO2lmKHQ9PT0icHJlbHUiKXJldHVybiBRUih7aW5wdXRzOnt4OmUsYWxwaGE6c30sYmFja2VuZDpufSk7aWYodD09PSJsZWFreXJlbHUiKXJldHVybiBZUih7aW5wdXRzOnt4OmV9LGJhY2tlbmQ6bixhdHRyczp7YWxwaGE6cn19KTtpZih0PT09InNpZ21vaWQiKXJldHVybiBPUih7aW5wdXRzOnt4OmV9LGJhY2tlbmQ6bn0pO3Rocm93IG5ldyBFcnJvcihgQWN0aXZhdGlvbiAke3R9IGhhcyBub3QgYmVlbiBpbXBsZW1lbnRlZCBmb3IgdGhlIENQVSBiYWNrZW5kLmApfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGt0KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse3NoYXBlOm99PXMsaT1jZShyLnNoYXBlKSxhPVQxKG8saSksbD1jZShhKTtBKGk9PT1sLCgpPT5gVGhlIG5ldyBzaGFwZSAoJHthfSkgaGFzICR7bH0gZWxlbWVudHMgYW5kIHRoZSBvbGQgc2hhcGUgKCR7ci5zaGFwZX0pIGhhcyAke2l9IGVsZW1lbnRzLiBUaGUgbmV3IHNoYXBlIGFuZCBvbGQgc2hhcGUgbXVzdCBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiBlbGVtZW50cy5gKSx0LmluY1JlZihyLmRhdGFJZCk7Y29uc3QgYz10LmRhdGEuZ2V0KHIuZGF0YUlkKTtpZihjLmNvbXBsZXhUZW5zb3JJbmZvcyE9bnVsbCl7Y29uc3QgaD1jLmNvbXBsZXhUZW5zb3JJbmZvcy5yZWFsLHA9Yy5jb21wbGV4VGVuc29ySW5mb3MuaW1hZztoLnNoYXBlPWEscC5zaGFwZT1hfXJldHVybntkYXRhSWQ6ci5kYXRhSWQsc2hhcGU6YSxkdHlwZTpyLmR0eXBlfX1jb25zdCB4NT17a2VybmVsTmFtZTpXZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmt0fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGVEKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHthOnIsYjpvfT1lLHt0cmFuc3Bvc2VBOmksdHJhbnNwb3NlQjphfT1zO0RlKFtyLG9dLCJtYXRNdWwiKTtjb25zdCBsPXIuc2hhcGUubGVuZ3RoLGM9by5zaGFwZS5sZW5ndGgsaD1pP3Iuc2hhcGVbbC0yXTpyLnNoYXBlW2wtMV0scD1hP28uc2hhcGVbYy0xXTpvLnNoYXBlW2MtMl0sZj1pP3Iuc2hhcGVbbC0xXTpyLnNoYXBlW2wtMl0sZz1hP28uc2hhcGVbYy0yXTpvLnNoYXBlW2MtMV0seT1yLnNoYXBlLnNsaWNlKDAsLTIpLHc9by5zaGFwZS5zbGljZSgwLC0yKSxiPWNlKHkpLHY9Y2UodyksJD1IZShyLnNoYXBlLnNsaWNlKDAsLTIpLG8uc2hhcGUuc2xpY2UoMCwtMikpLmNvbmNhdChbZixnXSk7QShoPT09cCwoKT0+YEVycm9yIGluIG1hdE11bDogaW5uZXIgc2hhcGVzICgke2h9KSBhbmQgKCR7cH0pIG9mIFRlbnNvcnMgd2l0aCBzaGFwZXMgJHtyLnNoYXBlfSBhbmQgJHtvLnNoYXBlfSBhbmQgdHJhbnNwb3NlQT0ke2l9IGFuZCB0cmFuc3Bvc2VCPSR7YX0gbXVzdCBtYXRjaC5gKTtjb25zdCBrPWk/W2IsaCxmXTpbYixmLGhdLFQ9YT9bdixnLHBdOlt2LHAsZ10sRD1rdCh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6a319KSxMPWt0KHtpbnB1dHM6e3g6b30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpUfX0pLHo9aT9ELnNoYXBlWzFdOkQuc2hhcGVbMl0sRj1pP0Quc2hhcGVbMl06RC5zaGFwZVsxXSxfPWE/TC5zaGFwZVsxXTpMLnNoYXBlWzJdLEU9TWF0aC5tYXgoYix2KSxNPXQuZGF0YS5nZXQoRC5kYXRhSWQpLnZhbHVlcyxVPXQuZGF0YS5nZXQoTC5kYXRhSWQpLnZhbHVlcyxZPXplKEQuc2hhcGUpLFE9emUoTC5zaGFwZSksW25lLHNlLFZdPWk/W1lbMF0sMSxZWzFdXTpbWVswXSxZWzFdLDFdLFtLLHEsQl09YT9bMSxRWzFdLFFbMF1dOltRWzFdLDEsUVswXV0sSD1GKl8saWU9cWUoW0UsRixfXSxELmR0eXBlKSxwZT1pZS52YWx1ZXMsZGU9dC5ibG9ja1NpemU7Zm9yKGxldCBmZT0wO2ZlPEU7ZmUrKyl7Y29uc3Qgd2U9ZmUlYix2ZT1mZSV2O2ZvcihsZXQga2U9MDtrZTxGO2tlKz1kZSl7Y29uc3QgTGU9TWF0aC5taW4oa2UrZGUsRik7Zm9yKGxldCBXZT0wO1dlPF87V2UrPWRlKXtjb25zdCBudD1NYXRoLm1pbihXZStkZSxfKTtmb3IobGV0IG90PTA7b3Q8ejtvdCs9ZGUpe2NvbnN0IGh0PU1hdGgubWluKG90K2RlLHopO2ZvcihsZXQgcHQ9a2U7cHQ8TGU7cHQrKylmb3IobGV0IHV0PVdlO3V0PG50O3V0Kyspe2xldCBidD0wO2ZvcihsZXQgd3Q9b3Q7d3Q8aHQ7d3QrKyl7Y29uc3QgQ3M9TVt3ZSpuZStwdCpzZSt3dCpWXSxSdD1VW3d0KksrdXQqcSt2ZSpCXTtidCs9Q3MqUnR9cGVbZmUqSCsocHQqXyt1dCldKz1idH19fX19cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oRCksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhMKSx0Lm1ha2VUZW5zb3JJbmZvKCQsaWUuZHR5cGUsaWUudmFsdWVzKX1jb25zdCBiNT17a2VybmVsTmFtZTpvZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmVEfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHc1KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHthOnIsYjpvLGJpYXM6aSxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOmF9PWUse3RyYW5zcG9zZUE6bCx0cmFuc3Bvc2VCOmMsYWN0aXZhdGlvbjpoLGxlYWt5cmVsdUFscGhhOnB9PXM7bGV0IGYsZyx5O2NvbnN0IHc9W107Zj1lRCh7aW5wdXRzOnthOnIsYjpvfSxhdHRyczp7dHJhbnNwb3NlQTpsLHRyYW5zcG9zZUI6Y30sYmFja2VuZDp0fSksaSYmKGc9U2woe2lucHV0czp7YTpmLGI6aX0sYmFja2VuZDp0fSksdy5wdXNoKGYpLGY9ZyksaCYmKHk9R2YodCxmLGgsYSxwKSx3LnB1c2goZiksZj15KTtmb3IoY29uc3QgdiBvZiB3KXQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odik7cmV0dXJuIGZ9Y29uc3QgdjU9e2tlcm5lbE5hbWU6T2MsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp3NX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBTNT1tdChJbCxuPT5NYXRoLmFjb3MobikpLE41PXtrZXJuZWxOYW1lOklsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6UzV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgazU9bXQoVGwsbj0+TWF0aC5hY29zaChuKSksQzU9e2tlcm5lbE5hbWU6VGwsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzprNX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gJDUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHM9ZTtEZShlLCJhZGROIik7Y29uc3Qgcj1zLm1hcChhPT50LmRhdGEuZ2V0KGEuZGF0YUlkKS52YWx1ZXMpLG89cWUoc1swXS5zaGFwZSxzWzBdLmR0eXBlKSxpPW8udmFsdWVzO2ZvcihsZXQgYT0wO2E8cy5sZW5ndGg7YSsrKXtjb25zdCBsPXJbYV07Zm9yKGxldCBjPTA7YzxpLmxlbmd0aDtjKyspaVtjXSs9bFtjXX1yZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhvLnNoYXBlLG8uZHR5cGUsby52YWx1ZXMpfWNvbnN0IEk1PXtrZXJuZWxOYW1lOmVkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6JDV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFQ1KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2F4aXM6byxrZWVwRGltczppfT1zO0RlKHIsImFsbCIpO2NvbnN0IGE9UWUobyxyLnNoYXBlKTtsZXQgbD1hO2NvbnN0IGM9THQobCxyLnNoYXBlLmxlbmd0aCk7bGV0IGg9cjtjIT1udWxsJiYoaD1pcyh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTpjfX0pLGw9anQobC5sZW5ndGgsci5zaGFwZS5sZW5ndGgpKSxDbigiYWxsIixsLGguc2hhcGUubGVuZ3RoKTtjb25zdFtwLGZdPW1uKGguc2hhcGUsbCksZz1jZShmKSx5PVNuKGNlKHApLGguZHR5cGUpLHc9dC5kYXRhLmdldChoLmRhdGFJZCkudmFsdWVzO2ZvcihsZXQgdj0wO3Y8eS5sZW5ndGg7Kyt2KXtjb25zdCBTPXYqZztsZXQgJD13W1NdO2ZvcihsZXQgaz0wO2s8ZzsrK2spe2NvbnN0IFQ9d1tTK2tdOyQ9JCYmVH15W3ZdPSR9YyE9bnVsbCYmdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhoKTtjb25zdCBiPXQubWFrZVRlbnNvckluZm8ocCxoLmR0eXBlLHkpO2lmKGkpe2NvbnN0IHY9VXQocCxhKSxTPWt0KHtpbnB1dHM6e3g6Yn0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTp2fX0pO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGIpLFN9cmV0dXJuIGJ9Y29uc3QgRTU9e2tlcm5lbE5hbWU6dG0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpUNX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUjUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7YXhpczpvLGtlZXBEaW1zOml9PXM7RGUociwiYW55Iik7Y29uc3QgYT1RZShvLHIuc2hhcGUpO2xldCBsPWE7Y29uc3QgYz1MdChsLHIuc2hhcGUubGVuZ3RoKTtsZXQgaD1yO2MhPW51bGwmJihoPWlzKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntwZXJtOmN9fSksbD1qdChsLmxlbmd0aCxyLnNoYXBlLmxlbmd0aCkpLENuKCJhbnkiLGwsaC5zaGFwZS5sZW5ndGgpO2NvbnN0W3AsZl09bW4oaC5zaGFwZSxsKSxnPWNlKGYpLHk9U24oY2UocCksaC5kdHlwZSksdz10LmRhdGEuZ2V0KGguZGF0YUlkKS52YWx1ZXM7Zm9yKGxldCB2PTA7djx5Lmxlbmd0aDsrK3Ype2NvbnN0IFM9dipnO2xldCAkPXdbU107Zm9yKGxldCBrPTA7azxnOysrayl7Y29uc3QgVD13W1Mra107JD0kfHxUfXlbdl09JH1jIT1udWxsJiZ0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGgpO2NvbnN0IGI9dC5tYWtlVGVuc29ySW5mbyhwLGguZHR5cGUseSk7aWYoaSl7Y29uc3Qgdj1VdChwLGEpLFM9a3Qoe2lucHV0czp7eDpifSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOnZ9fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYiksU31yZXR1cm4gYn1jb25zdCBENT17a2VybmVsTmFtZTpubSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlI1fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBBNShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtheGlzOm99PXM7RGUociwiYXJnTWF4Iik7bGV0IGk9UWUobyxyLnNoYXBlKTtjb25zdCBhPUx0KGksci5zaGFwZS5sZW5ndGgpO2xldCBsPXI7Y29uc3QgYz1bXTthIT1udWxsJiYobD1pcyh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTphfX0pLGMucHVzaChsKSxpPWp0KGkubGVuZ3RoLGwuc2hhcGUubGVuZ3RoKSksaT1baVswXV0sQ24oImFyZ01heCIsaSxsLnNoYXBlLmxlbmd0aCk7Y29uc3RbaCxwXT1tbihsLnNoYXBlLGkpLGY9Y2UoaCksZz1TbihmLCJpbnQzMiIpLHk9Y2UocCksdz10LmRhdGEuZ2V0KGwuZGF0YUlkKS52YWx1ZXM7Zm9yKGxldCBiPTA7YjxnLmxlbmd0aDsrK2Ipe2NvbnN0IHY9Yip5O2xldCBTPXdbdl0sJD0wO2ZvcihsZXQgaz0wO2s8eTsrK2spe2NvbnN0IFQ9d1t2K2tdO1Q+UyYmKFM9VCwkPWspfWdbYl09JH1yZXR1cm4gYy5mb3JFYWNoKGI9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYikpLHQubWFrZVRlbnNvckluZm8oaCwiaW50MzIiLGcpfWNvbnN0IF81PXtrZXJuZWxOYW1lOnRkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6QTV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE81KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2F4aXM6b309cztEZShyLCJhcmdNaW4iKTtsZXQgaT1RZShvLHIuc2hhcGUpO2NvbnN0IGE9THQoaSxyLnNoYXBlLmxlbmd0aCk7bGV0IGw9cjtjb25zdCBjPVtdO2EhPW51bGwmJihsPWlzKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntwZXJtOmF9fSksYy5wdXNoKGwpLGk9anQoaS5sZW5ndGgsbC5zaGFwZS5sZW5ndGgpKSxpPVtpWzBdXSxDbigiYXJnTWluIixpLGwuc2hhcGUubGVuZ3RoKTtjb25zdFtoLHBdPW1uKGwuc2hhcGUsaSksZj1jZShoKSxnPVNuKGYsImludDMyIikseT1jZShwKSx3PXQuZGF0YS5nZXQobC5kYXRhSWQpLnZhbHVlcztmb3IobGV0IGI9MDtiPGcubGVuZ3RoOysrYil7Y29uc3Qgdj1iKnk7bGV0IFM9d1t2XSwkPTA7Zm9yKGxldCBrPTA7azx5Oysrayl7Y29uc3QgVD13W3Yra107VDxTJiYoUz1ULCQ9ayl9Z1tiXT0kfXJldHVybiBjLmZvckVhY2goYj0+dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhiKSksdC5tYWtlVGVuc29ySW5mbyhoLCJpbnQzMiIsZyl9Y29uc3QgRjU9e2tlcm5lbE5hbWU6bmQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpPNX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBMNT1tdChFbCxuPT5NYXRoLmFzaW4obikpLFA1PXtrZXJuZWxOYW1lOkVsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6TDV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgejU9bXQoUmwsbj0+TWF0aC5hc2luaChuKSksTTU9e2tlcm5lbE5hbWU6UmwsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp6NX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBCNT1tdChEbCxuPT5NYXRoLmF0YW4obikpLFY1PXtrZXJuZWxOYW1lOkRsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6QjV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgVzU9SHQoKG4sZSk9Pk1hdGguYXRhbjIobixlKSksVTU9b24oX2wsVzUpLGo1PXtrZXJuZWxOYW1lOl9sLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6VTV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRzU9bXQoQWwsbj0+TWF0aC5hdGFuaChuKSksSDU9e2tlcm5lbE5hbWU6QWwsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpHNX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gaXYobixlLHQscyxyLG8pe2NvbnN0IGk9ci5zdHJpZGVIZWlnaHQsYT1yLnN0cmlkZVdpZHRoLGw9ci5kaWxhdGlvbkhlaWdodCxjPXIuZGlsYXRpb25XaWR0aCxoPXIuZWZmZWN0aXZlRmlsdGVySGVpZ2h0LHA9ci5lZmZlY3RpdmVGaWx0ZXJXaWR0aCxmPXIucGFkSW5mby50b3AsZz1yLnBhZEluZm8ubGVmdCx5PW89PT0ibWF4Ij9OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLHc9cWUoci5vdXRTaGFwZSx0KSxiPXcudmFsdWVzLHY9ci5vdXRTaGFwZVsxXSpyLm91dFNoYXBlWzJdKnIub3V0U2hhcGVbM10sUz1yLm91dFNoYXBlWzJdKnIub3V0U2hhcGVbM10sJD1yLm91dFNoYXBlWzNdO2ZvcihsZXQgaz0wO2s8ci5iYXRjaFNpemU7KytrKXtjb25zdCBUPWsqdixEPWsqc1swXTtmb3IobGV0IEw9MDtMPHIuaW5DaGFubmVsczsrK0wpZm9yKGxldCB6PTA7ejxyLm91dEhlaWdodDsrK3ope2NvbnN0IEY9eippLWYsXz1NYXRoLm1heCgwLEYpLEU9TWF0aC5taW4oci5pbkhlaWdodCxoK0YpLE09VCt6KlM7Zm9yKGxldCBVPTA7VTxyLm91dFdpZHRoOysrVSl7Y29uc3QgWT1VKmEtZyxRPU1hdGgubWF4KDAsWSksbmU9TWF0aC5taW4oci5pbldpZHRoLHArWSk7bGV0IHNlPXksVj0wLEs9MDtmb3IobGV0IEI9XztCPEU7Qis9bCl7Y29uc3QgSD1EK0Iqc1sxXTtmb3IobGV0IGllPVE7aWU8bmU7aWUrPWMpe2NvbnN0IHBlPUgraWUqc1syXSxkZT1uW3BlK0xdO289PT0ibWF4IiYmZGU+c2U/c2U9ZGU6bz09PSJhdmciJiYoVis9ZGUsSysrKX1pZihpc05hTihzZSkpYnJlYWt9Y29uc3QgcT1NK1UqJCtMO2JbcV09bz09PSJhdmciP1YvSzpzZX19fXJldHVybiB3fWZ1bmN0aW9uIHREKG4sZSx0LHMscj0hMSxvPSExKXtjb25zdCBpPXFlKHMub3V0U2hhcGUsImludDMyIiksYT1zLnN0cmlkZUhlaWdodCxsPXMuc3RyaWRlV2lkdGgsYz1zLmRpbGF0aW9uSGVpZ2h0LGg9cy5kaWxhdGlvbldpZHRoLHA9cy5lZmZlY3RpdmVGaWx0ZXJIZWlnaHQsZj1zLmVmZmVjdGl2ZUZpbHRlcldpZHRoLGc9cy5wYWRJbmZvLnRvcCx5PXMucGFkSW5mby5sZWZ0LHc9cWUoZSx0LG4pO2ZvcihsZXQgYj0wO2I8cy5iYXRjaFNpemU7KytiKWZvcihsZXQgdj0wO3Y8cy5pbkNoYW5uZWxzOysrdilmb3IobGV0IFM9MDtTPHMub3V0SGVpZ2h0OysrUyl7Y29uc3QgJD1TKmEtZztsZXQgaz0kO2Zvcig7azwwOylrKz1jO2NvbnN0IFQ9TWF0aC5taW4ocy5pbkhlaWdodCxwKyQpO2ZvcihsZXQgRD0wO0Q8cy5vdXRXaWR0aDsrK0Qpe2NvbnN0IEw9RCpsLXk7bGV0IHo9TDtmb3IoO3o8MDspeis9aDtjb25zdCBGPU1hdGgubWluKHMuaW5XaWR0aCxmK0wpO2xldCBfPU51bWJlci5ORUdBVElWRV9JTkZJTklUWSxFPS0xO2ZvcihsZXQgTT1rO008VDtNKz1jKXtjb25zdCBVPU0tJDtmb3IobGV0IFk9ejtZPEY7WSs9aCl7Y29uc3QgUT1ZLUwsbmU9dy5nZXQoYixNLFksdik7bmU+XyYmKF89bmUscj9FPW8/KChiKnMuaW5IZWlnaHQrTSkqcy5pbldpZHRoK1kpKnMuaW5DaGFubmVscyt2OihNKnMuaW5XaWR0aCtZKSpzLmluQ2hhbm5lbHMrdjpFPVUqZitRKX19aS5zZXQoRSxiLFMsRCx2KX19cmV0dXJuIGl9ZnVuY3Rpb24gbkQobixlLHQscyxyLG8pe2NvbnN0IGk9ci5zdHJpZGVEZXB0aCxhPXIuc3RyaWRlSGVpZ2h0LGw9ci5zdHJpZGVXaWR0aCxjPXIuZGlsYXRpb25EZXB0aCxoPXIuZGlsYXRpb25IZWlnaHQscD1yLmRpbGF0aW9uV2lkdGgsZj1yLmVmZmVjdGl2ZUZpbHRlckRlcHRoLGc9ci5lZmZlY3RpdmVGaWx0ZXJIZWlnaHQseT1yLmVmZmVjdGl2ZUZpbHRlcldpZHRoLHc9ci5wYWRJbmZvLmZyb250LGI9ci5wYWRJbmZvLnRvcCx2PXIucGFkSW5mby5sZWZ0LFM9bz09PSJtYXgiP051bWJlci5ORUdBVElWRV9JTkZJTklUWTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksJD1xZShyLm91dFNoYXBlLHQpLGs9JC52YWx1ZXMsVD1yLm91dFNoYXBlWzFdKnIub3V0U2hhcGVbMl0qci5vdXRTaGFwZVszXSpyLm91dFNoYXBlWzRdLEQ9ci5vdXRTaGFwZVsyXSpyLm91dFNoYXBlWzNdKnIub3V0U2hhcGVbNF0sTD1yLm91dFNoYXBlWzNdKnIub3V0U2hhcGVbNF0sej1yLm91dFNoYXBlWzRdO2ZvcihsZXQgRj0wO0Y8ci5iYXRjaFNpemU7KytGKXtjb25zdCBfPUYqVCxFPUYqc1swXTtmb3IobGV0IE09MDtNPHIuaW5DaGFubmVsczsrK00pZm9yKGxldCBVPTA7VTxyLm91dERlcHRoOysrVSl7Y29uc3QgWT1VKmktdztsZXQgUT1ZO2Zvcig7UTwwOylRKz1jO2NvbnN0IG5lPU1hdGgubWluKHIuaW5EZXB0aCxmK1kpLHNlPV8rVSpEO2ZvcihsZXQgVj0wO1Y8ci5vdXRIZWlnaHQ7KytWKXtjb25zdCBLPVYqYS1iO2xldCBxPUs7Zm9yKDtxPDA7KXErPWg7Y29uc3QgQj1NYXRoLm1pbihyLmluSGVpZ2h0LGcrSyksSD1zZStWKkw7Zm9yKGxldCBpZT0wO2llPHIub3V0V2lkdGg7KytpZSl7Y29uc3QgcGU9aWUqbC12O2xldCBkZT1wZTtmb3IoO2RlPDA7KWRlKz1wO2NvbnN0IGZlPU1hdGgubWluKHIuaW5XaWR0aCx5K3BlKSx3ZT1IK2llKno7bGV0IHZlPVMsa2U9MCxMZT0wO2ZvcihsZXQgbnQ9UTtudDxuZTtudCs9Yyl7Y29uc3Qgb3Q9RStudCpzWzFdO2ZvcihsZXQgaHQ9cTtodDxCO2h0Kz1oKXtjb25zdCBwdD1vdCtodCpzWzJdO2ZvcihsZXQgdXQ9ZGU7dXQ8ZmU7dXQrPXApe2NvbnN0IGJ0PXB0K3V0KnNbM10sd3Q9bltidCtNXTtpZihvPT09Im1heCImJnd0PnZlP3ZlPXd0Om89PT0iYXZnIiYmKGtlKz13dCxMZSsrKSxpc05hTih2ZSkpYnJlYWt9aWYoaXNOYU4odmUpKWJyZWFrfWlmKGlzTmFOKHZlKSlicmVha31jb25zdCBXZT13ZStNO2tbV2VdPW89PT0iYXZnIj9rZS9NYXRoLm1heChMZSwxKTp2ZX19fX1yZXR1cm4gJH1mdW5jdGlvbiBxNShuLGUpe2NvbnN0IHQ9cWUoZS5vdXRTaGFwZSwiaW50MzIiKSxzPWUuc3RyaWRlRGVwdGgscj1lLnN0cmlkZUhlaWdodCxvPWUuc3RyaWRlV2lkdGgsaT1lLmRpbGF0aW9uRGVwdGgsYT1lLmRpbGF0aW9uSGVpZ2h0LGw9ZS5kaWxhdGlvbldpZHRoLGM9ZS5lZmZlY3RpdmVGaWx0ZXJEZXB0aCxoPWUuZWZmZWN0aXZlRmlsdGVySGVpZ2h0LHA9ZS5lZmZlY3RpdmVGaWx0ZXJXaWR0aCxmPWUucGFkSW5mby5mcm9udCxnPWUucGFkSW5mby50b3AseT1lLnBhZEluZm8ubGVmdDtmb3IobGV0IHc9MDt3PGUuYmF0Y2hTaXplOysrdylmb3IobGV0IGI9MDtiPGUuaW5DaGFubmVsczsrK2IpZm9yKGxldCB2PTA7djxlLm91dERlcHRoOysrdil7Y29uc3QgUz12KnMtZjtsZXQgJD1TO2Zvcig7JDwwOykkKz1pO2NvbnN0IGs9TWF0aC5taW4oZS5pbkRlcHRoLGMrUyk7Zm9yKGxldCBUPTA7VDxlLm91dEhlaWdodDsrK1Qpe2NvbnN0IEQ9VCpyLWc7bGV0IEw9RDtmb3IoO0w8MDspTCs9YTtjb25zdCB6PU1hdGgubWluKGUuaW5IZWlnaHQsaCtEKTtmb3IobGV0IEY9MDtGPGUub3V0V2lkdGg7KytGKXtjb25zdCBfPUYqby15O2xldCBFPV87Zm9yKDtFPDA7KUUrPWw7Y29uc3QgTT1NYXRoLm1pbihlLmluV2lkdGgscCtfKTtsZXQgVT1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksWT0tMTtmb3IobGV0IFE9JDtRPGs7USs9aSl7Y29uc3QgbmU9US1TO2ZvcihsZXQgc2U9TDtzZTx6O3NlKz1hKXtjb25zdCBWPXNlLUQ7Zm9yKGxldCBLPUU7SzxNO0srPWwpe2NvbnN0IHE9Sy1fLEI9bi5nZXQodyxRLHNlLEssYik7Qj49VSYmKFU9QixZPW5lKmgqcCtWKmgrcSl9fX10LnNldChZLHcsdixULEYsYil9fX1yZXR1cm4gdH0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBLNShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lO0RlKHIsImF2Z1Bvb2wiKTtjb25zdHtmaWx0ZXJTaXplOm8sc3RyaWRlczppLHBhZDphLGRpbVJvdW5kaW5nTW9kZTpsfT1zLGM9MTtBKGtuKGksYyksKCk9PmBFcnJvciBpbiBhdmdQb29sOiBFaXRoZXIgc3RyaWRlcyBvciBkaWxhdGlvbnMgbXVzdCBiZSAxLiBHb3Qgc3RyaWRlcyAke2l9IGFuZCBkaWxhdGlvbnMgJyR7Y30nYCk7Y29uc3QgaD1ucihyLnNoYXBlLG8saSxjLGEsbCk7bGV0IHA7aWYoaC5maWx0ZXJXaWR0aD09PTEmJmguZmlsdGVySGVpZ2h0PT09MSYmSmUoaC5pblNoYXBlLGgub3V0U2hhcGUpKXA9WXIoe2lucHV0czp7eDpyfSxiYWNrZW5kOnR9KTtlbHNle2NvbnN0IGY9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLGc9emUoci5zaGFwZSkseT1pdihmLHIuc2hhcGUsci5kdHlwZSxnLGgsImF2ZyIpO3A9dC5tYWtlVGVuc29ySW5mbyhoLm91dFNoYXBlLHIuZHR5cGUseS52YWx1ZXMpfXJldHVybiBwfWNvbnN0IFg1PXtrZXJuZWxOYW1lOnNkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6SzV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFk1KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2ZpbHRlclNpemU6byxzdHJpZGVzOmkscGFkOmEsZGltUm91bmRpbmdNb2RlOmwsZGF0YUZvcm1hdDpjfT1zO0RlKHIsImF2Z1Bvb2wzZCIpO2NvbnN0IGg9Tm8oci5zaGFwZSxvLGksMSxhLGwsYykscD10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsZj1uRChwLHIuc2hhcGUsci5kdHlwZSx6ZShyLnNoYXBlKSxoLCJhdmciKTtyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhmLnNoYXBlLCJmbG9hdDMyIixmLnZhbHVlcyl9Y29uc3QgUTU9e2tlcm5lbE5hbWU6cmQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpZNX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWjUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2R5OnIsaW5wdXQ6b309ZSx7ZmlsdGVyU2l6ZTppLHN0cmlkZXM6YSxwYWQ6bCxkaW1Sb3VuZGluZ01vZGU6Y309cztEZShbcixvXSwiYXZnUG9vbDNER3JhZCIpO2NvbnN0IGg9Tm8oby5zaGFwZSxpLGEsMSxsLGMpLHA9aC5zdHJpZGVEZXB0aCxmPWguc3RyaWRlSGVpZ2h0LGc9aC5zdHJpZGVXaWR0aCx5PWguZmlsdGVyRGVwdGgsdz1oLmZpbHRlckhlaWdodCxiPWguZmlsdGVyV2lkdGgsdj1oLmRpbGF0aW9uRGVwdGgsUz1oLmRpbGF0aW9uSGVpZ2h0LCQ9aC5kaWxhdGlvbldpZHRoLGs9aC5lZmZlY3RpdmVGaWx0ZXJEZXB0aCxUPWguZWZmZWN0aXZlRmlsdGVySGVpZ2h0LEQ9aC5lZmZlY3RpdmVGaWx0ZXJXaWR0aCxMPWstMS1oLnBhZEluZm8uZnJvbnQsej1ELTEtaC5wYWRJbmZvLmxlZnQsRj1ULTEtaC5wYWRJbmZvLnRvcCxfPXFlKG8uc2hhcGUsImZsb2F0MzIiKSxFPTEvKHkqdypiKSxNPXQuYnVmZmVyU3luYyhyKTtmb3IobGV0IFU9MDtVPGguYmF0Y2hTaXplOysrVSlmb3IobGV0IFk9MDtZPGguaW5DaGFubmVsczsrK1kpZm9yKGxldCBRPTA7UTxoLmluRGVwdGg7KytRKWZvcihsZXQgbmU9MDtuZTxoLmluSGVpZ2h0OysrbmUpZm9yKGxldCBzZT0wO3NlPGguaW5XaWR0aDsrK3NlKXtjb25zdCBWPVEtTCxLPW5lLUYscT1zZS16O2xldCBCPTA7Zm9yKGxldCBIPTA7SDxrO0grPXYpe2NvbnN0IGllPShWK0gpL3A7aWYoIShpZTwwfHxpZT49aC5vdXREZXB0aHx8TWF0aC5mbG9vcihpZSkhPT1pZSkpZm9yKGxldCBwZT0wO3BlPFQ7cGUrPVMpe2NvbnN0IGRlPShLK3BlKS9mO2lmKCEoZGU8MHx8ZGU+PWgub3V0SGVpZ2h0fHxNYXRoLmZsb29yKGRlKSE9PWRlKSlmb3IobGV0IGZlPTA7ZmU8RDtmZSs9JCl7Y29uc3Qgd2U9KHErZmUpL2c7aWYod2U8MHx8d2U+PWgub3V0V2lkdGh8fE1hdGguZmxvb3Iod2UpIT09d2UpY29udGludWU7Y29uc3QgdmU9TS5nZXQoVSxpZSxkZSx3ZSxZKTtCKz12ZX19fV8uc2V0KEIqRSxVLFEsbmUsc2UsWSl9cmV0dXJuIHQubWFrZVRlbnNvckluZm8oXy5zaGFwZSxfLmR0eXBlLF8udmFsdWVzKX1jb25zdCBKNT17a2VybmVsTmFtZTpybSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlo1fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBlOChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7ZHk6cixpbnB1dDpvfT1lLGk9bztEZShbcixvXSwiYXZnUG9vbEdyYWQiKTtjb25zdHtmaWx0ZXJTaXplOmEsc3RyaWRlczpsLHBhZDpjfT1zLGg9bnIoaS5zaGFwZSxhLGwsMSxjKSxwPWguc3RyaWRlSGVpZ2h0LGY9aC5zdHJpZGVXaWR0aCxnPWguZmlsdGVySGVpZ2h0LHk9aC5maWx0ZXJXaWR0aCx3PWguZGlsYXRpb25IZWlnaHQsYj1oLmRpbGF0aW9uV2lkdGgsdj1oLmVmZmVjdGl2ZUZpbHRlckhlaWdodCxTPWguZWZmZWN0aXZlRmlsdGVyV2lkdGgsJD1TLTEtaC5wYWRJbmZvLmxlZnQsaz12LTEtaC5wYWRJbmZvLnRvcCxUPXFlKGkuc2hhcGUsImZsb2F0MzIiKSxEPTEvKGcqeSksTD10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsej1xZShyLnNoYXBlLCJmbG9hdDMyIixMKTtmb3IobGV0IEY9MDtGPGguYmF0Y2hTaXplOysrRilmb3IobGV0IF89MDtfPGguaW5DaGFubmVsczsrK18pZm9yKGxldCBFPTA7RTxoLmluSGVpZ2h0OysrRSlmb3IobGV0IE09MDtNPGguaW5XaWR0aDsrK00pe2NvbnN0IFU9RS1rLFk9TS0kO2xldCBRPTA7Zm9yKGxldCBuZT0wO25lPHY7bmUrPXcpe2NvbnN0IHNlPShVK25lKS9wO2lmKCEoc2U8MHx8c2U+PWgub3V0SGVpZ2h0fHxNYXRoLmZsb29yKHNlKSE9PXNlKSlmb3IobGV0IFY9MDtWPFM7Vis9Yil7Y29uc3QgSz0oWStWKS9mO2lmKEs8MHx8Sz49aC5vdXRXaWR0aHx8TWF0aC5mbG9vcihLKSE9PUspY29udGludWU7Y29uc3QgcT16LmdldChGLHNlLEssXyk7USs9cX19VC5zZXQoUSpELEYsRSxNLF8pfXJldHVybiB0Lm1ha2VUZW5zb3JJbmZvKFQuc2hhcGUsVC5kdHlwZSxULnZhbHVlcyl9Y29uc3QgdDg9e2tlcm5lbE5hbWU6c20sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzplOH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gbjgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cixzY2FsZTpvLG9mZnNldDppLG1lYW46YSx2YXJpYW5jZTpsfT1lO0EoYS5zaGFwZS5sZW5ndGg9PT1sLnNoYXBlLmxlbmd0aCwoKT0+IkJhdGNoIG5vcm1hbGl6YXRpb24gZ3JhZGllbnQgcmVxdWlyZXMgbWVhbiBhbmQgdmFyaWFuY2UgdG8gaGF2ZSBlcXVhbCByYW5rcy4iKSxBKGk9PW51bGx8fGEuc2hhcGUubGVuZ3RoPT09aS5zaGFwZS5sZW5ndGgsKCk9PiJCYXRjaCBub3JtYWxpemF0aW9uIGdyYWRpZW50IHJlcXVpcmVzIG1lYW4gYW5kIG9mZnNldCB0byBoYXZlIGVxdWFsIHJhbmtzLiIpLEEobz09bnVsbHx8YS5zaGFwZS5sZW5ndGg9PT1vLnNoYXBlLmxlbmd0aCwoKT0+IkJhdGNoIG5vcm1hbGl6YXRpb24gZ3JhZGllbnQgcmVxdWlyZXMgbWVhbiBhbmQgc2NhbGUgdG8gaGF2ZSBlcXVhbCByYW5rcy4iKSxEZShbcixhLGwsbyxpXSwiYmF0Y2hOb3JtIik7bGV0e3ZhcmlhbmNlRXBzaWxvbjpjfT1zO2M9PW51bGwmJihjPS4wMDEpO2NvbnN0IGg9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLHA9dC5kYXRhLmdldChhLmRhdGFJZCkudmFsdWVzLGY9dC5kYXRhLmdldChsLmRhdGFJZCkudmFsdWVzLGc9bz90LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXM6bmV3IEZsb2F0MzJBcnJheShbMV0pLHk9aT90LmRhdGEuZ2V0KGkuZGF0YUlkKS52YWx1ZXM6bmV3IEZsb2F0MzJBcnJheShbMF0pLHc9bmV3IEZsb2F0MzJBcnJheShoLmxlbmd0aCksYj15Lmxlbmd0aCx2PWcubGVuZ3RoLFM9Zi5sZW5ndGgsJD1wLmxlbmd0aDtsZXQgaz0wLFQ9MCxEPTAsTD0wO2ZvcihsZXQgej0wO3o8aC5sZW5ndGg7Kyt6KXdbel09eVtrKytdKyhoW3pdLXBbVCsrXSkqZ1tEKytdL01hdGguc3FydChmW0wrK10rYyksaz49YiYmKGs9MCksVD49JCYmKFQ9MCksRD49diYmKEQ9MCksTD49UyYmKEw9MCk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oci5zaGFwZSxyLmR0eXBlLHcpfWNvbnN0IHM4PXtrZXJuZWxOYW1lOnhkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6bjh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHI4KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2Jsb2NrU2hhcGU6byxjcm9wczppfT1zO0RlKFtyXSwiYmF0Y2hUb1NwYWNlTkQiKTtjb25zdCBhPW8ucmVkdWNlKCh2LFMpPT52KlMpLGw9U2goci5zaGFwZSxvLGEpLGM9TmgobC5sZW5ndGgsby5sZW5ndGgpLGg9a2goci5zaGFwZSxvLGEpLHA9cHcoaSxvLmxlbmd0aCksZj1mdyhoLGksby5sZW5ndGgpLGc9a3Qoe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmx9fSkseT1pcyh7aW5wdXRzOnt4Omd9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTpjfX0pLHc9a3Qoe2lucHV0czp7eDp5fSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmh9fSksYj15YSh7aW5wdXRzOnt4Ond9LGJhY2tlbmQ6dCxhdHRyczp7YmVnaW46cCxzaXplOmZ9fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZyksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh5KSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHcpLGJ9Y29uc3Qgbzg9e2tlcm5lbE5hbWU6aWQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpyOH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gaTgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cix3ZWlnaHRzOm99PWUse3NpemU6aX09cyxhPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxsPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyxjPXR2KGEsbCxvLmR0eXBlLG8uc2hhcGUsaSk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oW2ldLG8uZHR5cGUsYyl9Y29uc3QgYTg9e2tlcm5lbE5hbWU6b20sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzppOH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gbDgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtzMDpzLHMxOnJ9PWUsbz10LmRhdGEuZ2V0KHMuZGF0YUlkKS52YWx1ZXMsaT10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsYT1IZShBcnJheS5mcm9tKG8pLEFycmF5LmZyb20oaSkpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKFthLmxlbmd0aF0sImludDMyIixJbnQzMkFycmF5LmZyb20oYSkpfWNvbnN0IHU4PXtrZXJuZWxOYW1lOmltLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6bDh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgYzg9bXQoTGwsKG4sZSk9Pntjb25zdCB0PWU7cmV0dXJuIG4+dC5jbGlwVmFsdWVNYXg/dC5jbGlwVmFsdWVNYXg6bjx0LmNsaXBWYWx1ZU1pbj90LmNsaXBWYWx1ZU1pbjpufSksZDg9e2tlcm5lbE5hbWU6TGwsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpjOH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBoOD1uPT57Y29uc3R7eDplfT1uLmlucHV0cyx0PW4uYmFja2VuZCxzPW5ldyBGbG9hdDMyQXJyYXkoY2UoZS5zaGFwZSkpLHI9dC5kYXRhLmdldChlLmRhdGFJZCksbz1yLmNvbXBsZXhUZW5zb3JJbmZvcy5yZWFsLGk9ci5jb21wbGV4VGVuc29ySW5mb3MuaW1hZyxhPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyxsPXQuZGF0YS5nZXQoaS5kYXRhSWQpLnZhbHVlcztmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKyl7Y29uc3QgaD1hW2NdLHA9bFtjXTtzW2NdPU1hdGguaHlwb3QoaCxwKX1yZXR1cm4gdC5tYWtlT3V0cHV0KHMsZS5zaGFwZSwiZmxvYXQzMiIpfSxwOD17a2VybmVsTmFtZTpsZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmg4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBObChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se2lucHV0OnN9PWUscj10LmRhdGEuZ2V0KHMuZGF0YUlkKS5jb21wbGV4VGVuc29ySW5mb3MuaW1hZyxvPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcztyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhyLnNoYXBlLHIuZHR5cGUsbyl9Y29uc3QgZjg9e2tlcm5lbE5hbWU6JG0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpObH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24ga2wobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2F4aXM6cn09cyxvPVFlKHIsZVswXS5zaGFwZSlbMF0saT1lLm1hcCh3PT53LnNoYXBlKTtjdyhpLG8pO2xldCBhPVdyKGUubWFwKHc9Pncuc2hhcGUpLG8pO2lmKGNlKGEpPT09MClyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhhLGVbMF0uZHR5cGUsW10pO2NvbnN0IGw9ZS5maWx0ZXIodz0+Y2Uody5zaGFwZSk+MCk7aWYobC5sZW5ndGg9PT0xKXJldHVybiBZcih7aW5wdXRzOnt4OmxbMF19LGJhY2tlbmQ6dH0pO2lmKGxbMF0uZHR5cGU9PT0iY29tcGxleDY0Iil7Y29uc3Qgdz1sLm1hcChrPT5nYSh7aW5wdXRzOntpbnB1dDprfSxiYWNrZW5kOnR9KSksYj1sLm1hcChrPT5ObCh7aW5wdXRzOntpbnB1dDprfSxiYWNrZW5kOnR9KSksdj1rbCh7aW5wdXRzOncsYmFja2VuZDp0LGF0dHJzOntheGlzOm99fSksUz1rbCh7aW5wdXRzOmIsYmFja2VuZDp0LGF0dHJzOntheGlzOm99fSksJD1icyh7aW5wdXRzOntyZWFsOnYsaW1hZzpTfSxiYWNrZW5kOnR9KTtyZXR1cm4gdy5mb3JFYWNoKGs9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaykpLGIuZm9yRWFjaChrPT50LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGspKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHYpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oUyksJH1jb25zdCBjPWwubWFwKHc9Pntjb25zdCB2PVstMSxjZSh3LnNoYXBlLnNsaWNlKG8pKV07cmV0dXJuIGt0KHtpbnB1dHM6e3g6d30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTp2fX0pfSksaD1jLm1hcCh3PT4oe3ZhbHM6dC5kYXRhLmdldCh3LmRhdGFJZCkudmFsdWVzLHNoYXBlOncuc2hhcGV9KSk7YT1XcihjLm1hcCh3PT53LnNoYXBlKSwxKTtjb25zdCBwPWNbMF0uc2hhcGVbMF09PT0xLGY9YVIoaCxhLGVbMF0uZHR5cGUscCksZz1XcihsLm1hcCh3PT53LnNoYXBlKSxvKSx5PXQubWFrZVRlbnNvckluZm8oZyxlWzBdLmR0eXBlLGYpO3JldHVybiBjLmZvckVhY2godz0+dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh3KSkseX1jb25zdCBtOD17a2VybmVsTmFtZTp1ZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmtsfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBzRChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLGZpbHRlcjpvfT1lLHtzdHJpZGVzOmkscGFkOmEsZGF0YUZvcm1hdDpsLGRpbGF0aW9uczpjLGRpbVJvdW5kaW5nTW9kZTpofT1zO0RlKFtyLG9dLCJjb252MmQiKTtjb25zdCBwPWtvKGwpLGY9Zm4oci5zaGFwZSxvLnNoYXBlLGksYyxhLGgsITEscCksZz1mLmZpbHRlckhlaWdodCx5PWYuZmlsdGVyV2lkdGgsdz1mLmRpbGF0aW9uSGVpZ2h0LGI9Zi5kaWxhdGlvbldpZHRoLHY9Zi5wYWRJbmZvLmxlZnQsUz1mLnBhZEluZm8udG9wLCQ9Zi5kYXRhRm9ybWF0PT09ImNoYW5uZWxzTGFzdCIsaz1uZXcgUXQoZi5vdXRTaGFwZSxyLmR0eXBlKSxUPXplKHIuc2hhcGUpLEQ9emUoby5zaGFwZSksTD1UWzBdLHo9JD9UWzFdOlRbMl0sRj0kP1RbMl06MSxfPSQ/MTpUWzFdLEU9ay5zdHJpZGVzWzBdLE09JD9rLnN0cmlkZXNbMV06ay5zdHJpZGVzWzJdLFU9JD9rLnN0cmlkZXNbMl06MSxZPSQ/MTprLnN0cmlkZXNbMV0sUT10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsbmU9dC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzLHNlPWsudmFsdWVzO2ZvcihsZXQgVj0wO1Y8Zi5iYXRjaFNpemU7KytWKXtjb25zdCBLPVYqTCxxPVYqRTtmb3IobGV0IEI9MDtCPGYub3V0SGVpZ2h0OysrQil7Y29uc3QgSD1xK0IqTSxpZT1CKmYuc3RyaWRlSGVpZ2h0LVM7Zm9yKGxldCBwZT0wO3BlPGc7KytwZSl7Y29uc3QgZGU9aWUrcGUqdztpZihkZTwwfHxkZT49Zi5pbkhlaWdodCljb250aW51ZTtjb25zdCBmZT1wZSpEWzBdLHdlPUsrZGUqejtmb3IobGV0IHZlPTA7dmU8Zi5vdXRXaWR0aDsrK3ZlKXtjb25zdCBrZT1IK3ZlKlUsTGU9dmUqZi5zdHJpZGVXaWR0aC12O2ZvcihsZXQgV2U9MDtXZTx5OysrV2Upe2NvbnN0IG50PUxlK1dlKmI7aWYobnQ8MHx8bnQ+PWYuaW5XaWR0aCljb250aW51ZTtjb25zdCBvdD1mZStXZSpEWzFdLGh0PXdlK250KkY7bGV0IHB0PW90O2ZvcihsZXQgdXQ9MDt1dDxmLmluQ2hhbm5lbHM7Kyt1dCl7Y29uc3QgYnQ9UVtodCt1dCpfXTtmb3IobGV0IHd0PTA7d3Q8Zi5vdXRDaGFubmVsczsrK3d0KXNlW2tlK3d0KlldKz1idCpuZVtwdCt3dF07cHQrPWYub3V0Q2hhbm5lbHN9fX19fX1yZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhrLnNoYXBlLGsuZHR5cGUsc2UpfWNvbnN0IGc4PXtrZXJuZWxOYW1lOmNkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6c0R9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHk4KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnIsZHk6b309ZSx7c3RyaWRlczppLHBhZDphLGRhdGFGb3JtYXQ6bCxkaW1Sb3VuZGluZ01vZGU6YyxmaWx0ZXJTaGFwZTpofT1zO0RlKFtyLG9dLCJjb252MmRCYWNrcHJvcEZpbHRlciIpO2NvbnN0IHA9a28obCksZj1mbihyLnNoYXBlLGgsaSwxLGEsYywhMSxwKSx7c3RyaWRlSGVpZ2h0Omcsc3RyaWRlV2lkdGg6eSxmaWx0ZXJIZWlnaHQ6dyxmaWx0ZXJXaWR0aDpifT1mLHY9Zi5kYXRhRm9ybWF0PT09ImNoYW5uZWxzTGFzdCIsUz1uZXcgUXQoZi5maWx0ZXJTaGFwZSwiZmxvYXQzMiIpLCQ9Zi5wYWRJbmZvLmxlZnQsaz1mLnBhZEluZm8udG9wLFQ9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLEQ9dC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzLEw9bmV3IFF0KHIuc2hhcGUsci5kdHlwZSxUKSx6PW5ldyBRdChvLnNoYXBlLG8uZHR5cGUsRCk7Zm9yKGxldCBGPTA7Rjx3OysrRil7Y29uc3QgXz1NYXRoLm1heCgwLE1hdGguY2VpbCgoay1GKS9nKSksRT1NYXRoLm1pbihmLm91dEhlaWdodCwoZi5pbkhlaWdodCtrLUYpL2cpO2ZvcihsZXQgTT0wO008YjsrK00pe2NvbnN0IFU9TWF0aC5tYXgoMCxNYXRoLmNlaWwoKCQtTSkveSkpLFk9TWF0aC5taW4oZi5vdXRXaWR0aCwoZi5pbldpZHRoKyQtTSkveSk7Zm9yKGxldCBRPTA7UTxmLmluQ2hhbm5lbHM7KytRKWZvcihsZXQgbmU9MDtuZTxmLm91dENoYW5uZWxzOysrbmUpe2xldCBzZT0wO2ZvcihsZXQgVj0wO1Y8Zi5iYXRjaFNpemU7KytWKWZvcihsZXQgSz1fO0s8RTsrK0spe2NvbnN0IHE9RitLKmctaztmb3IobGV0IEI9VTtCPFk7KytCKXtjb25zdCBIPU0rQip5LSQ7dj9zZSs9TC5nZXQoVixxLEgsUSkqei5nZXQoVixLLEIsbmUpOnNlKz1MLmdldChWLFEscSxIKSp6LmdldChWLG5lLEssQil9fVMuc2V0KHNlLEYsTSxRLG5lKX19fXJldHVybiB0Lm1ha2VUZW5zb3JJbmZvKFMuc2hhcGUsUy5kdHlwZSxTLnZhbHVlcyl9Y29uc3QgeDg9e2tlcm5lbE5hbWU6bG0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp5OH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gYjgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2R5OnIsZmlsdGVyOm99PWUse2lucHV0U2hhcGU6aSxzdHJpZGVzOmEscGFkOmwsZGF0YUZvcm1hdDpjLGRpbVJvdW5kaW5nTW9kZTpofT1zO0RlKFtyLG9dLCJjb252MmRCYWNrcHJvcElucHV0Iik7Y29uc3QgcD16ZShvLnNoYXBlKSxmPXplKHIuc2hhcGUpO2xldCBnPWtvKGMpO2NvbnN0IHk9Zm4oaSxvLnNoYXBlLGEsMSxsLGgsITEsZyksdz1uZXcgUXQoeS5pblNoYXBlLCJmbG9hdDMyIiksYj13LnZhbHVlcyx2PXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxTPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyxbJCxrLFRdPXAse2JhdGNoU2l6ZTpELGZpbHRlckhlaWdodDpMLGZpbHRlcldpZHRoOnosaW5DaGFubmVsczpGLGluSGVpZ2h0Ol8saW5XaWR0aDpFLG91dENoYW5uZWxzOk0sb3V0SGVpZ2h0OlUsb3V0V2lkdGg6WSxzdHJpZGVIZWlnaHQ6USxzdHJpZGVXaWR0aDpuZX09eTtnPXkuZGF0YUZvcm1hdDtjb25zdCBzZT1MLTEteS5wYWRJbmZvLnRvcCxWPXotMS15LnBhZEluZm8ubGVmdCxLPWc9PT0iY2hhbm5lbHNMYXN0IixxPXcuc3RyaWRlc1swXSxCPUs/dy5zdHJpZGVzWzFdOncuc3RyaWRlc1syXSxIPUs/dy5zdHJpZGVzWzJdOjEsaWU9Sz8xOncuc3RyaWRlc1sxXSxwZT1mWzBdLGRlPUs/ZlsxXTpmWzJdLGZlPUs/ZlsyXToxLHdlPUs/MTpmWzFdO2ZvcihsZXQgdmU9MDt2ZTxEOysrdmUpZm9yKGxldCBrZT0wO2tlPEY7KytrZSlmb3IobGV0IExlPTA7TGU8XzsrK0xlKXtjb25zdCBXZT1MZS1zZSxudD1NYXRoLm1heCgwLE1hdGguY2VpbChXZS9RKSksb3Q9TWF0aC5taW4oVSwoTCtXZSkvUSk7Zm9yKGxldCBodD0wO2h0PEU7KytodCl7Y29uc3QgcHQ9aHQtVix1dD1NYXRoLm1heCgwLE1hdGguY2VpbChwdC9uZSkpLGJ0PU1hdGgubWluKFksKHorcHQpL25lKTtsZXQgd3Q9MDtmb3IobGV0IFJ0PW50O1J0PG90OysrUnQpe2NvbnN0IFhuPVJ0KlEtV2U7Zm9yKGxldCBUbj11dDtUbjxidDsrK1RuKXtjb25zdCBFcj1UbipuZS1wdCxscz1wZSp2ZStkZSpSdCtmZSpUbixCcz0kKihMLTEtWG4pK2sqKHotMS1FcikrVCprZTtmb3IobGV0IG9yPTA7b3I8TTsrK29yKXtjb25zdCBWcz12W2xzK3dlKm9yXSwkcz1TW0JzK29yXTt3dCs9VnMqJHN9fX1jb25zdCBDcz1xKnZlK0IqTGUrSCpodCtpZSprZTtiW0NzXT13dH19cmV0dXJuIHQubWFrZVRlbnNvckluZm8ody5zaGFwZSx3LmR0eXBlLHcudmFsdWVzKX1jb25zdCB3OD17a2VybmVsTmFtZTpkZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmI4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB2OChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLGZpbHRlcjpvfT1lLHtzdHJpZGVzOmkscGFkOmEsZGlsYXRpb25zOmx9PXM7RGUoW3Isb10sImNvbnYzZCIpO2NvbnN0IGM9eGkoci5zaGFwZSxvLnNoYXBlLGksbCxhKSx7ZmlsdGVyRGVwdGg6aCxmaWx0ZXJIZWlnaHQ6cCxmaWx0ZXJXaWR0aDpmLGRpbGF0aW9uRGVwdGg6ZyxkaWxhdGlvbkhlaWdodDp5LGRpbGF0aW9uV2lkdGg6dyxwYWRJbmZvOmJ9PWMsdj1iLmZyb250LFM9Yi5sZWZ0LCQ9Yi50b3Asaz1uZXcgUXQoYy5vdXRTaGFwZSxyLmR0eXBlKSxUPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxEPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyxMPWsudmFsdWVzLHo9emUoci5zaGFwZSksRj16ZShvLnNoYXBlKTtmb3IobGV0IF89MDtfPGMuYmF0Y2hTaXplOysrXyl7Y29uc3QgRT1fKnpbMF0sTT1fKmsuc3RyaWRlc1swXTtmb3IobGV0IFU9MDtVPGMub3V0RGVwdGg7KytVKXtjb25zdCBZPU0rVSprLnN0cmlkZXNbMV0sUT1VKmMuc3RyaWRlRGVwdGgtdjtmb3IobGV0IG5lPTA7bmU8aDsrK25lKXtjb25zdCBzZT1RK25lKmc7aWYoc2U8MHx8c2U+PWMuaW5EZXB0aCljb250aW51ZTtjb25zdCBWPW5lKkZbMF0sSz1FK3NlKnpbMV07Zm9yKGxldCBxPTA7cTxjLm91dEhlaWdodDsrK3Epe2NvbnN0IEI9WStxKmsuc3RyaWRlc1syXSxIPXEqYy5zdHJpZGVIZWlnaHQtJDtmb3IobGV0IGllPTA7aWU8cDsrK2llKXtjb25zdCBwZT1IK2llKnk7aWYocGU8MHx8cGU+PWMuaW5IZWlnaHQpY29udGludWU7Y29uc3QgZGU9VitpZSpGWzFdLGZlPUsrcGUqelsyXTtmb3IobGV0IHdlPTA7d2U8Yy5vdXRXaWR0aDsrK3dlKXtjb25zdCB2ZT1CK3dlKmMub3V0Q2hhbm5lbHMsa2U9d2UqYy5zdHJpZGVXaWR0aC1TO2ZvcihsZXQgTGU9MDtMZTxmOysrTGUpe2NvbnN0IFdlPWtlK0xlKnc7aWYoV2U8MHx8V2U+PWMuaW5XaWR0aCljb250aW51ZTtjb25zdCBudD1kZStMZSpGWzJdLG90PWZlK1dlKmMuaW5DaGFubmVscztsZXQgaHQ9bnQ7Zm9yKGxldCBwdD0wO3B0PGMuaW5DaGFubmVsczsrK3B0KXtjb25zdCB1dD1UW290K3B0XTtmb3IobGV0IGJ0PTA7YnQ8Yy5vdXRDaGFubmVsczsrK2J0KUxbdmUrYnRdKz11dCpEW2h0K2J0XTtodCs9Yy5vdXRDaGFubmVsc319fX19fX19cmV0dXJuIHQubWFrZVRlbnNvckluZm8oay5zaGFwZSxrLmR0eXBlLGsudmFsdWVzKX1jb25zdCBTOD17a2VybmVsTmFtZTpoZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnY4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBOOChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLGR5Om99PWUse3N0cmlkZXM6aSxwYWQ6YSxmaWx0ZXJTaGFwZTpsfT1zO0RlKFtyLG9dLCJjb252M2RCYWNrcHJvcEZpbHRlclYyIik7Y29uc3QgYz16ZShyLnNoYXBlKSxoPXplKG8uc2hhcGUpLHA9eGkoci5zaGFwZSxsLGksMSxhKSxmPXAuc3RyaWRlRGVwdGgsZz1wLnN0cmlkZUhlaWdodCx5PXAuc3RyaWRlV2lkdGgsdz1wLmZpbHRlckRlcHRoLGI9cC5maWx0ZXJIZWlnaHQsdj1wLmZpbHRlcldpZHRoLFM9bmV3IFF0KHAuZmlsdGVyU2hhcGUsImZsb2F0MzIiKSwkPVMudmFsdWVzLFtrLFQsRCxMXT1TLnN0cmlkZXMsej10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMsW0YsXyxFLE1dPWgsVT10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsW1ksUSxuZSxzZV09YyxWPXAucGFkSW5mby5mcm9udCxLPXAucGFkSW5mby5sZWZ0LHE9cC5wYWRJbmZvLnRvcDtmb3IobGV0IEI9MDtCPHc7KytCKXtjb25zdCBIPU1hdGgubWF4KDAsTWF0aC5jZWlsKChWLUIpL2YpKSxpZT1NYXRoLm1pbihwLm91dERlcHRoLChwLmluRGVwdGgrVi1CKS9mKSxwZT1CKms7Zm9yKGxldCBkZT0wO2RlPGI7KytkZSl7Y29uc3QgZmU9TWF0aC5tYXgoMCxNYXRoLmNlaWwoKHEtZGUpL2cpKSx3ZT1NYXRoLm1pbihwLm91dEhlaWdodCwocC5pbkhlaWdodCtxLWRlKS9nKSx2ZT1kZSpUK3BlO2ZvcihsZXQga2U9MDtrZTx2Oysra2Upe2NvbnN0IExlPU1hdGgubWF4KDAsTWF0aC5jZWlsKChLLWtlKS95KSksV2U9TWF0aC5taW4ocC5vdXRXaWR0aCwocC5pbldpZHRoK0sta2UpL3kpLG50PWtlKkQrdmU7Zm9yKGxldCBvdD0wO290PHAuaW5DaGFubmVsczsrK290KXtjb25zdCBodD1vdCpMK250O2ZvcihsZXQgcHQ9MDtwdDxwLm91dENoYW5uZWxzOysrcHQpe2xldCB1dD0wO2ZvcihsZXQgYnQ9MDtidDxwLmJhdGNoU2l6ZTsrK2J0KXtjb25zdCB3dD1idCpZLENzPWJ0KkY7Zm9yKGxldCBSdD1IO1J0PGllOysrUnQpe2NvbnN0IFRuPShCK1J0KmYtVikqUSt3dCxFcj1SdCpfK0NzO2ZvcihsZXQgbHM9ZmU7bHM8d2U7Kytscyl7Y29uc3Qgb3I9KGRlK2xzKmctcSkqbmUrVG4sVnM9bHMqRStFcjtmb3IobGV0ICRzPUxlOyRzPFdlOysrJHMpe2NvbnN0IEpyPShrZSskcyp5LUspKnNlK29yLGVvPSRzKk0rVnM7dXQrPVVbSnIrb3RdKnpbZW8rcHRdfX19fSRbaHQrcHRdPXV0fX19fX1yZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhTLnNoYXBlLFMuZHR5cGUsUy52YWx1ZXMpfWNvbnN0IGs4PXtrZXJuZWxOYW1lOnVtLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6Tjh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEM4KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtkeTpyLGZpbHRlcjpvfT1lLHtwYWQ6aSxzdHJpZGVzOmEsaW5wdXRTaGFwZTpsfT1zO0RlKFtyXSwiY29udjNkQmFja3Byb3BJbnB1dFYyIik7Y29uc3QgYz16ZShyLnNoYXBlKSxoPXplKG8uc2hhcGUpLHA9eGkobCxvLnNoYXBlLGEsMSxpKSxmPW5ldyBRdChwLmluU2hhcGUsImZsb2F0MzIiKSxnPWYudmFsdWVzLFt5LHcsYix2XT1mLnN0cmlkZXMsUz10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsWyQsayxULERdPWMsTD10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMsW3osRixfLEVdPWgse2JhdGNoU2l6ZTpNLGZpbHRlckRlcHRoOlUsZmlsdGVySGVpZ2h0OlksZmlsdGVyV2lkdGg6USxpbkNoYW5uZWxzOm5lLGluRGVwdGg6c2UsaW5IZWlnaHQ6VixpbldpZHRoOkssb3V0Q2hhbm5lbHM6cSxvdXREZXB0aDpCLG91dEhlaWdodDpILG91dFdpZHRoOmllLHN0cmlkZURlcHRoOnBlLHN0cmlkZUhlaWdodDpkZSxzdHJpZGVXaWR0aDpmZX09cCx3ZT1VLTEtcC5wYWRJbmZvLmZyb250LHZlPVktMS1wLnBhZEluZm8udG9wLGtlPVEtMS1wLnBhZEluZm8ubGVmdDtmb3IobGV0IExlPTA7TGU8TTsrK0xlKWZvcihsZXQgV2U9MDtXZTxuZTsrK1dlKWZvcihsZXQgbnQ9MDtudDxzZTsrK250KXtjb25zdCBvdD1udC13ZSxodD1NYXRoLm1heCgwLE1hdGguY2VpbChvdC9wZSkpLHB0PU1hdGgubWluKEIsKFUrb3QpL3BlKTtmb3IobGV0IHV0PTA7dXQ8VjsrK3V0KXtjb25zdCBidD11dC12ZSx3dD1NYXRoLm1heCgwLE1hdGguY2VpbChidC9kZSkpLENzPU1hdGgubWluKEgsKFkrYnQpL2RlKTtmb3IobGV0IFJ0PTA7UnQ8SzsrK1J0KXtjb25zdCBYbj1SdC1rZSxUbj1NYXRoLm1heCgwLE1hdGguY2VpbChYbi9mZSkpLEVyPU1hdGgubWluKGllLChRK1huKS9mZSk7bGV0IGxzPTA7Zm9yKGxldCBCcz1odDtCczxwdDsrK0JzKXtjb25zdCBvcj1CcypwZS1vdDtmb3IobGV0IFZzPXd0O1ZzPENzOysrVnMpe2NvbnN0ICRzPVZzKmRlLWJ0O2ZvcihsZXQgUm89VG47Um88RXI7KytSbyl7Y29uc3QgSnI9Um8qZmUtWG4sZW89JCpMZStrKkJzK1QqVnMrRCpSbyxweT16KihVLTEtb3IpK0YqKFktMS0kcykrXyooUS0xLUpyKStFKldlO2ZvcihsZXQgSWk9MDtJaTxxOysrSWkpe2NvbnN0IE1oPVNbZW8rSWldLGZ5PUxbcHkrSWldO2xzKz1NaCpmeX19fX1nW3kqTGUrdypudCtiKnV0K3YqUnQrV2VdPWxzfX19cmV0dXJuIHQubWFrZVRlbnNvckluZm8oZi5zaGFwZSxmLmR0eXBlLGYudmFsdWVzKX1jb25zdCAkOD17a2VybmVsTmFtZTpjbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOkM4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBJOD1tdChQbCxuPT5NYXRoLmNvcyhuKSksVDg9e2tlcm5lbE5hbWU6UGwsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpJOH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBFOD1tdCh6bCxuPT5NYXRoLmNvc2gobikpLFI4PXtrZXJuZWxOYW1lOnpsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6RTh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEQ4KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtpbWFnZTpyLGJveGVzOm8sYm94SW5kOml9PWUse2Nyb3BTaXplOmEsbWV0aG9kOmwsZXh0cmFwb2xhdGlvblZhbHVlOmN9PXMsW2gscCxmLGddPXIuc2hhcGUseT1vLnNoYXBlWzBdLFt3LGJdPWEsdj1xZShbeSx3LGIsZ10sImZsb2F0MzIiKSxTPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcywkPXQuZGF0YS5nZXQoaS5kYXRhSWQpLnZhbHVlcyxrPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxUPXplKHIuc2hhcGUpLEQ9emUodi5zaGFwZSk7Zm9yKGxldCBMPTA7TDx5O0wrKyl7Y29uc3Qgej1MKjQsRj1TW3pdLF89U1t6KzFdLEU9U1t6KzJdLE09U1t6KzNdLFU9JFtMXTtpZihVPj1oKWNvbnRpbnVlO2NvbnN0IFk9dz4xPyhFLUYpKihwLTEpLyh3LTEpOjAsUT1iPjE/KE0tXykqKGYtMSkvKGItMSk6MDtmb3IobGV0IG5lPTA7bmU8dztuZSsrKXtjb25zdCBzZT13PjE/RioocC0xKStuZSpZOi41KihGK0UpKihwLTEpO2lmKHNlPDB8fHNlPnAtMSl7Zm9yKGxldCBWPTA7VjxiO1YrKylmb3IobGV0IEs9MDtLPGc7SysrKXtjb25zdCBxPUsrVipEWzJdK25lKkRbMV0rTCpEWzBdO3YudmFsdWVzW3FdPWN9Y29udGludWV9aWYobD09PSJiaWxpbmVhciIpe2NvbnN0IFY9TWF0aC5mbG9vcihzZSksSz1NYXRoLmNlaWwoc2UpLHE9c2UtVjtmb3IobGV0IEI9MDtCPGI7QisrKXtjb25zdCBIPWI+MT9fKihmLTEpK0IqUTouNSooXytNKSooZi0xKTtpZihIPDB8fEg+Zi0xKXtmb3IobGV0IGZlPTA7ZmU8ZztmZSsrKXtjb25zdCB3ZT1mZStCKkRbMl0rbmUqRFsxXStMKkRbMF07di52YWx1ZXNbd2VdPWN9Y29udGludWV9Y29uc3QgaWU9TWF0aC5mbG9vcihIKSxwZT1NYXRoLmNlaWwoSCksZGU9SC1pZTtmb3IobGV0IGZlPTA7ZmU8ZztmZSsrKXtsZXQgd2U9ZmUraWUqVFsyXStWKlRbMV0rVSpUWzBdO2NvbnN0IHZlPWtbd2VdO3dlPWZlK3BlKlRbMl0rVipUWzFdK1UqVFswXTtjb25zdCBrZT1rW3dlXTt3ZT1mZStpZSpUWzJdK0sqVFsxXStVKlRbMF07Y29uc3QgTGU9a1t3ZV07d2U9ZmUrcGUqVFsyXStLKlRbMV0rVSpUWzBdO2NvbnN0IFdlPWtbd2VdLG50PXZlKyhrZS12ZSkqZGUsb3Q9TGUrKFdlLUxlKSpkZTt3ZT1mZStCKkRbMl0rbmUqRFsxXStMKkRbMF0sdi52YWx1ZXNbd2VdPW50KyhvdC1udCkqcX19fWVsc2UgZm9yKGxldCBWPTA7VjxiOysrVil7Y29uc3QgSz1iPjE/XyooZi0xKStWKlE6LjUqKF8rTSkqKGYtMSk7aWYoSzwwfHxLPmYtMSl7Zm9yKGxldCBIPTA7SDxnO0grKyl7Y29uc3QgaWU9SCtWKkRbMl0rbmUqRFsxXStMKkRbMF07di52YWx1ZXNbaWVdPWN9Y29udGludWV9Y29uc3QgcT1NYXRoLnJvdW5kKEspLEI9TWF0aC5yb3VuZChzZSk7Zm9yKGxldCBIPTA7SDxnO0grKyl7Y29uc3QgaWU9SCtxKlRbMl0rQipUWzFdK1UqVFswXSxwZT1IK1YqRFsyXStuZSpEWzFdK0wqRFswXTt2LnZhbHVlc1twZV09a1tpZV19fX19cmV0dXJuIHQubWFrZVRlbnNvckluZm8odi5zaGFwZSx2LmR0eXBlLHYudmFsdWVzKX1jb25zdCBBOD17a2VybmVsTmFtZTpobSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOkQ4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBfOChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtheGlzOm8sZXhjbHVzaXZlOmkscmV2ZXJzZTphfT1zO0RlKHIsImN1bXByb2QiKTtjb25zdCBsPUx0KFtvXSxyLnNoYXBlLmxlbmd0aCk7bGV0IGM9cjtsIT1udWxsJiYoYz1pcyh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTpsfX0pKTtjb25zdCBoPWp0KDEsci5zaGFwZS5sZW5ndGgpWzBdO2lmKGghPT1jLnNoYXBlLmxlbmd0aC0xKXRocm93IG5ldyBFcnJvcihgYmFja2VuZC5jdW1wcm9kIGluIENQVSBleHBlY3RzIGFuIGlubmVyLW1vc3QgYXhpcz0ke2Muc2hhcGUubGVuZ3RoLTF9IGJ1dCBnb3QgYXhpcz0ke2h9YCk7Y29uc3QgcD10cyhjLmR0eXBlLCJpbnQzMiIpLGY9ZW0oY2UoYy5zaGFwZSkscCksZz10LmRhdGEuZ2V0KGMuZGF0YUlkKS52YWx1ZXMseT1jLnNoYXBlW2Muc2hhcGUubGVuZ3RoLTFdLHc9YT8odixTKT0+dit5LVMtMToodixTKT0+ditTO2ZvcihsZXQgdj0wO3Y8Zy5sZW5ndGg7dis9eSlmb3IobGV0IFM9MDtTPHk7UysrKXtjb25zdCAkPXcodixTKTtpZihTPT09MClmWyRdPWk/MTpnWyRdO2Vsc2V7Y29uc3Qgaz13KHYsUy0xKTtmWyRdPWk/Z1trXSpmW2tdOmdbJF0qZltrXX19Y29uc3QgYj10Lm1ha2VUZW5zb3JJbmZvKGMuc2hhcGUscCxmKTtpZihsIT1udWxsKXtjb25zdCB2PWJpKGwpLFM9aXMoe2lucHV0czp7eDpifSxiYWNrZW5kOnQsYXR0cnM6e3Blcm06dn19KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhiKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGMpLFN9cmV0dXJuIGJ9Y29uc3QgTzg9e2tlcm5lbE5hbWU6ZG0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpfOH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gRjgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7YXhpczpvLGV4Y2x1c2l2ZTppLHJldmVyc2U6YX09cztEZShyLCJjdW1zdW0iKTtjb25zdCBsPUx0KFtvXSxyLnNoYXBlLmxlbmd0aCk7bGV0IGM9cjtsIT1udWxsJiYoYz1pcyh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTpsfX0pKTtjb25zdCBoPWp0KDEsci5zaGFwZS5sZW5ndGgpWzBdO2lmKGghPT1jLnNoYXBlLmxlbmd0aC0xKXRocm93IG5ldyBFcnJvcihgYmFja2VuZC5jdW1zdW0gaW4gQ1BVIGV4cGVjdHMgYW4gaW5uZXItbW9zdCBheGlzPSR7Yy5zaGFwZS5sZW5ndGgtMX0gYnV0IGdvdCBheGlzPSR7aH1gKTtjb25zdCBwPXRzKGMuZHR5cGUsImludDMyIiksZj1TbihjZShjLnNoYXBlKSxwKSxnPXQuZGF0YS5nZXQoYy5kYXRhSWQpLnZhbHVlcyx5PWMuc2hhcGVbYy5zaGFwZS5sZW5ndGgtMV0sdz1hPyh2LFMpPT52K3ktUy0xOih2LFMpPT52K1M7Zm9yKGxldCB2PTA7djxnLmxlbmd0aDt2Kz15KWZvcihsZXQgUz0wO1M8eTtTKyspe2NvbnN0ICQ9dyh2LFMpO2lmKFM9PT0wKWZbJF09aT8wOmdbJF07ZWxzZXtjb25zdCBrPXcodixTLTEpO2ZbJF09aT9nW2tdK2Zba106Z1skXStmW2tdfX1jb25zdCBiPXQubWFrZVRlbnNvckluZm8oYy5zaGFwZSxwLGYpO2lmKGwhPW51bGwpe2NvbnN0IHY9YmkobCksUz1pcyh7aW5wdXRzOnt4OmJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTp2fX0pO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGIpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYyksU31yZXR1cm4gYn1jb25zdCBMOD17a2VybmVsTmFtZTpwZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOkY4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBQOChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLHdlaWdodHM6b309ZSx7c2l6ZTppLGJpbmFyeU91dHB1dDphfT1zO2lmKHIuc2hhcGUubGVuZ3RoPT09MSl7Y29uc3QgbD10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsYz10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMsaD10dihsLGMsby5kdHlwZSxvLnNoYXBlLGkpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKFtpXSxvLmR0eXBlLGgpfWVsc2UgaWYoci5zaGFwZS5sZW5ndGg9PT0yKXtjb25zdCBsPXQuYnVmZmVyU3luYyhyKSxjPXQuYnVmZmVyU3luYyhvKSxoPXJSKGwsYyxpLGEpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGguc2hhcGUsby5kdHlwZSxoLnZhbHVlcyl9dGhyb3cgbmV3IEVycm9yKGBFcnJvciBpbiBkZW5zZUJpbmNvdW50OiBpbnB1dCBtdXN0IGJlIGF0IG1vc3QgcmFuayAyLCBidXQgZ290IHJhbmske3Iuc2hhcGUubGVuZ3RofS5gKX1jb25zdCB6OD17a2VybmVsTmFtZTpwbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlA4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBNOChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtibG9ja1NpemU6byxkYXRhRm9ybWF0Oml9PXM7QShpPT09Ik5IV0MiLCgpPT5gT25seSBOSFdDIGRhdGFGb3JtYXQgc3VwcG9ydGVkIG9uIENQVSBmb3IgZGVwdGhUb1NwYWNlLiBHb3QgJHtpfWApO2NvbnN0IGE9ci5zaGFwZVswXSxsPXIuc2hhcGVbMV0sYz1yLnNoYXBlWzJdLGg9ci5zaGFwZVszXSxwPWwqbyxmPWMqbyxnPWgvKG8qbykseT10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsdz1uZXcgRmxvYXQzMkFycmF5KGEqcCpmKmcpO2xldCBiPTA7Zm9yKGxldCB2PTA7djxhOysrdilmb3IobGV0IFM9MDtTPHA7KytTKXtjb25zdCAkPU1hdGguZmxvb3IoUy9vKSxrPVMlbztmb3IobGV0IFQ9MDtUPGY7KytUKXtjb25zdCBEPU1hdGguZmxvb3IoVC9vKSxMPVQlbyx6PShrKm8rTCkqZztmb3IobGV0IEY9MDtGPGc7KytGKXtjb25zdCBFPUYreitoKihEK2MqKCQrbCp2KSk7d1tiKytdPXlbRV19fX1yZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhbYSxwLGYsZ10sci5kdHlwZSx3KX1jb25zdCBCOD17a2VybmVsTmFtZTpmbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOk04fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiByRChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLGZpbHRlcjpvfT1lLHtzdHJpZGVzOmkscGFkOmEsZGlsYXRpb25zOmwsZGltUm91bmRpbmdNb2RlOmN9PXM7RGUoW3Isb10sImRlcHRod2lzZUNvbnYyRE5hdGl2ZSIpO2NvbnN0IGg9emUoci5zaGFwZSkscD16ZShvLnNoYXBlKTtsZXQgZj1sO2Y9PW51bGwmJihmPVsxLDFdKSxBKGtuKGksZiksKCk9PmBFcnJvciBpbiBkZXB0aHdpc2VDb252MmQ6IEVpdGhlciBzdHJpZGVzIG9yIGRpbGF0aW9ucyBtdXN0IGJlIDEuIEdvdCBzdHJpZGVzICR7aX0gYW5kIGRpbGF0aW9ucyAnJHtmfSdgKTtjb25zdCBnPWZuKHIuc2hhcGUsby5zaGFwZSxpLGYsYSxjLCEwKSx7ZmlsdGVySGVpZ2h0OnksZmlsdGVyV2lkdGg6dyxkaWxhdGlvbkhlaWdodDpiLGRpbGF0aW9uV2lkdGg6dixwYWRJbmZvOlN9PWcsJD1TLmxlZnQsaz1TLnRvcCxUPWcub3V0Q2hhbm5lbHMvZy5pbkNoYW5uZWxzLEQ9bmV3IFF0KGcub3V0U2hhcGUsci5kdHlwZSksTD10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsej10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMsRj1ELnZhbHVlcztmb3IobGV0IF89MDtfPGcuYmF0Y2hTaXplOysrXyl7Y29uc3QgRT1fKmhbMF0sTT1fKkQuc3RyaWRlc1swXTtmb3IobGV0IFU9MDtVPGcub3V0SGVpZ2h0OysrVSl7Y29uc3QgWT1NK1UqRC5zdHJpZGVzWzFdLFE9VSpnLnN0cmlkZUhlaWdodC1rO2ZvcihsZXQgbmU9MDtuZTx5OysrbmUpe2NvbnN0IHNlPVErbmUqYjtpZihzZTwwfHxzZT49Zy5pbkhlaWdodCljb250aW51ZTtjb25zdCBWPW5lKnBbMF0sSz1FK3NlKmhbMV07Zm9yKGxldCBxPTA7cTxnLm91dFdpZHRoOysrcSl7Y29uc3QgQj1ZK3EqRC5zdHJpZGVzWzJdLEg9cSpnLnN0cmlkZVdpZHRoLSQ7Zm9yKGxldCBpZT0wO2llPHc7KytpZSl7Y29uc3QgcGU9SCtpZSp2O2lmKHBlPDB8fHBlPj1nLmluV2lkdGgpY29udGludWU7Y29uc3QgZGU9VitpZSpwWzFdLGZlPUsrcGUqZy5pbkNoYW5uZWxzO2xldCB3ZT1CLHZlPWRlO2ZvcihsZXQga2U9MDtrZTxnLmluQ2hhbm5lbHM7KytrZSl7Y29uc3QgTGU9TFtmZStrZV07Zm9yKGxldCBXZT0wO1dlPFQ7KytXZSlGW3dlK1dlXSs9TGUqelt2ZStXZV07d2UrPVQsdmUrPVR9fX19fX1yZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhELnNoYXBlLEQuZHR5cGUsRC52YWx1ZXMpfWNvbnN0IFY4PXtrZXJuZWxOYW1lOmZkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6ckR9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFc4KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnIsZHk6b309ZSx7c3RyaWRlczppLGRpbGF0aW9uczphLHBhZDpsLGRpbVJvdW5kaW5nTW9kZTpjLGZpbHRlclNoYXBlOmh9PXM7RGUoW3Isb10sImRlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wRmlsdGVyIik7Y29uc3QgcD1mbihyLnNoYXBlLGgsaSxhLGwsYywhMCkse3N0cmlkZUhlaWdodDpmLHN0cmlkZVdpZHRoOmcsZmlsdGVySGVpZ2h0OnksZmlsdGVyV2lkdGg6d309cCxiPW5ldyBRdChwLmZpbHRlclNoYXBlLCJmbG9hdDMyIiksdj1wLnBhZEluZm8ubGVmdCxTPXAucGFkSW5mby50b3AsJD1wLm91dENoYW5uZWxzL3AuaW5DaGFubmVscyxrPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxUPW5ldyBRdChyLnNoYXBlLHIuZHR5cGUsayksRD10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMsTD1uZXcgUXQoby5zaGFwZSxvLmR0eXBlLEQpO2ZvcihsZXQgej0wO3o8eTsrK3ope2NvbnN0IEY9TWF0aC5tYXgoMCxNYXRoLmNlaWwoKFMteikvZikpLF89TWF0aC5taW4ocC5vdXRIZWlnaHQsKHAuaW5IZWlnaHQrUy16KS9mKTtmb3IobGV0IEU9MDtFPHc7KytFKXtjb25zdCBNPU1hdGgubWF4KDAsTWF0aC5jZWlsKCh2LUUpL2cpKSxVPU1hdGgubWluKHAub3V0V2lkdGgsKHAuaW5XaWR0aCt2LUUpL2cpO2ZvcihsZXQgWT0wO1k8cC5vdXRDaGFubmVsczsrK1kpe2NvbnN0IFE9TWF0aC50cnVuYyhZLyQpLG5lPVklJDtsZXQgc2U9MDtmb3IobGV0IFY9MDtWPHAuYmF0Y2hTaXplOysrVilmb3IobGV0IEs9RjtLPF87KytLKXtjb25zdCBxPXorSypmLVM7Zm9yKGxldCBCPU07QjxVOysrQil7Y29uc3QgSD1FK0IqZy12O3NlKz1ULmdldChWLHEsSCxRKSpMLmdldChWLEssQixZKX19Yi5zZXQoc2UseixFLFEsbmUpfX19cmV0dXJuIHQubWFrZVRlbnNvckluZm8oYi5zaGFwZSxiLmR0eXBlLGIudmFsdWVzKX1jb25zdCBVOD17a2VybmVsTmFtZTptbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlc4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBqOChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7ZHk6cixmaWx0ZXI6b309ZSx7c3RyaWRlczppLGRpbGF0aW9uczphLHBhZDpsLGRpbVJvdW5kaW5nTW9kZTpjLGlucHV0U2hhcGU6aH09cztEZShbcixvXSwiZGVwdGh3aXNlQ29udjJETmF0aXZlQmFja3Byb3BJbnB1dCIpO2NvbnN0IHA9emUoci5zaGFwZSksZj16ZShvLnNoYXBlKSxnPWZuKGgsby5zaGFwZSxpLGEsbCxjLCEwKSx5PW5ldyBRdChnLmluU2hhcGUsImZsb2F0MzIiKSx3PXkudmFsdWVzLFtiLHYsU109eS5zdHJpZGVzLCQ9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLFtrLFQsRF09cCxMPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyxbeixGLF9dPWYse2JhdGNoU2l6ZTpFLGZpbHRlckhlaWdodDpNLGZpbHRlcldpZHRoOlUsaW5DaGFubmVsczpZLGluSGVpZ2h0OlEsaW5XaWR0aDpuZSxvdXRDaGFubmVsczpzZSxvdXRIZWlnaHQ6VixvdXRXaWR0aDpLLHN0cmlkZUhlaWdodDpxLHN0cmlkZVdpZHRoOkJ9PWcsSD1NLTEtZy5wYWRJbmZvLnRvcCxpZT1VLTEtZy5wYWRJbmZvLmxlZnQscGU9c2UvWTtmb3IobGV0IGRlPTA7ZGU8RTsrK2RlKWZvcihsZXQgZmU9MDtmZTxZOysrZmUpZm9yKGxldCB3ZT0wO3dlPFE7Kyt3ZSl7Y29uc3QgdmU9d2UtSCxrZT1NYXRoLm1heCgwLE1hdGguY2VpbCh2ZS9xKSksTGU9TWF0aC5taW4oViwoTSt2ZSkvcSk7Zm9yKGxldCBXZT0wO1dlPG5lOysrV2Upe2NvbnN0IG50PVdlLWllLG90PU1hdGgubWF4KDAsTWF0aC5jZWlsKG50L0IpKSxodD1NYXRoLm1pbihLLChVK250KS9CKTtsZXQgcHQ9MDtmb3IobGV0IHV0PWtlO3V0PExlOysrdXQpe2NvbnN0IGJ0PXV0KnEtdmU7Zm9yKGxldCB3dD1vdDt3dDxodDsrK3d0KXtjb25zdCBDcz13dCpCLW50LFJ0PWsqZGUrVCp1dCtEKnd0LFhuPXoqKE0tMS1idCkrRiooVS0xLUNzKStfKmZlO2ZvcihsZXQgVG49MDtUbjxwZTsrK1RuKXtjb25zdCBFcj1mZSpwZStUbixscz0kW1J0K0VyXSxCcz1MW1huK1RuXTtwdCs9bHMqQnN9fX13W2IqZGUrdip3ZStTKldlK2ZlXT1wdH19cmV0dXJuIHQubWFrZVRlbnNvckluZm8oeS5zaGFwZSx5LmR0eXBlLHkudmFsdWVzKX1jb25zdCBHOD17a2VybmVsTmFtZTpnbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmo4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBIOChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se3g6c309ZSxyPWNlKHMuc2hhcGUpLG89dC5kYXRhLmdldChzLmRhdGFJZCkudmFsdWVzLGk9cWUoW3Iscl0scy5kdHlwZSksYT1pLnZhbHVlcztmb3IobGV0IGM9MDtjPG8ubGVuZ3RoO2MrKylhW2MqcitjXT1vW2NdO2NvbnN0IGw9Wy4uLnMuc2hhcGUsLi4ucy5zaGFwZV07cmV0dXJuIHQubWFrZVRlbnNvckluZm8obCxpLmR0eXBlLGkudmFsdWVzKX1jb25zdCBxOD17a2VybmVsTmFtZTp5bSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOkg4fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBLOD17a2VybmVsTmFtZTptZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOih7aW5wdXRzOm4sYmFja2VuZDplLGF0dHJzOnR9KT0+e2NvbnN0e3g6cyxmaWx0ZXI6cn09bix7c3RyaWRlczpvLHBhZDppLGRpbGF0aW9uczphfT10LGw9ZSxjPWwuZGF0YS5nZXQocy5kYXRhSWQpLnZhbHVlcyxoPXMuc2hhcGUubGVuZ3RoLHA9bC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLGY9ci5zaGFwZS5sZW5ndGgse2JhdGNoU2l6ZTpnLGluSGVpZ2h0OnksaW5XaWR0aDp3LGluQ2hhbm5lbHM6YixvdXRIZWlnaHQ6dixvdXRXaWR0aDpTLHBhZEluZm86JCxzdHJpZGVIZWlnaHQ6ayxzdHJpZGVXaWR0aDpULGZpbHRlckhlaWdodDpELGZpbHRlcldpZHRoOkwsZGlsYXRpb25IZWlnaHQ6eixkaWxhdGlvbldpZHRoOkYsb3V0U2hhcGU6X309cmgocy5zaGFwZSxyLnNoYXBlLG8saSwiTkhXQyIsYSksRT1jZShfKSxNPV8ubGVuZ3RoLFU9TXQocy5kdHlwZSxFKTtmb3IobGV0IFE9MDtRPGc7KytRKWZvcihsZXQgbmU9MDtuZTx2OysrbmUpe2NvbnN0IHNlPW5lKmstJC50b3A7Zm9yKGxldCBWPTA7VjxTOysrVil7Y29uc3QgSz1WKlQtJC5sZWZ0O2ZvcihsZXQgcT0wO3E8YjsrK3Epe2xldCBCPU51bWJlci5NSU5fU0FGRV9JTlRFR0VSO2ZvcihsZXQgaWU9MDtpZTxEOysraWUpe2NvbnN0IHBlPXNlK2llKno7aWYocGU+PTAmJnBlPHkpZm9yKGxldCBkZT0wO2RlPEw7KytkZSl7Y29uc3QgZmU9SytkZSpGO2lmKGZlPj0wJiZmZTx3KXtjb25zdCB3ZT1icihbUSxwZSxmZSxxXSxoLHplKHMuc2hhcGUpKSx2ZT1icihbaWUsZGUscV0sZix6ZShyLnNoYXBlKSksa2U9Y1t3ZV0rcFt2ZV07a2U+QiYmKEI9a2UpfX19Y29uc3QgSD1icihbUSxuZSxWLHFdLE0semUoXykpO1VbSF09Qn19fXJldHVybntkYXRhSWQ6bC53cml0ZShnaShVLHMuZHR5cGUpLF8scy5kdHlwZSksc2hhcGU6XyxkdHlwZTpzLmR0eXBlfX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFg4PXtrZXJuZWxOYW1lOiRmLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6KHtpbnB1dHM6bixiYWNrZW5kOmUsYXR0cnM6dH0pPT57Y29uc3R7eDpzLGZpbHRlcjpyLGR5Om99PW4se3N0cmlkZXM6aSxwYWQ6YSxkaWxhdGlvbnM6bH09dCxjPWUsaD1GcyhzLnNoYXBlLGMuZGF0YS5nZXQocy5kYXRhSWQpLnZhbHVlcykscD1GcyhyLnNoYXBlLGMuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcykse2JhdGNoU2l6ZTpmLGluSGVpZ2h0OmcsaW5XaWR0aDp5LGluQ2hhbm5lbHM6dyxvdXRIZWlnaHQ6YixvdXRXaWR0aDp2LHBhZEluZm86UyxzdHJpZGVIZWlnaHQ6JCxzdHJpZGVXaWR0aDprLGZpbHRlckhlaWdodDpULGZpbHRlcldpZHRoOkQsZGlsYXRpb25IZWlnaHQ6TCxkaWxhdGlvbldpZHRoOnosb3V0U2hhcGU6Rn09cmgocy5zaGFwZSxyLnNoYXBlLGksYSwiTkhXQyIsbCk7QShvLnJhbms9PT1GLmxlbmd0aCwoKT0+YEVycm9yIGluICR7JGZ9LCBkeSBtdXN0IGhhdmUgdGhlIHNhbWUgcmFuayBhcyBvdXRwdXQgJHtGLmxlbmd0aH0sIGJ1dCBnb3QgJHtvLnJhbmt9YCk7Y29uc3QgXz1GcyhGLGMuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyksRT1SMShyLnNoYXBlLHIuZHR5cGUpO2ZvcihsZXQgVT0wO1U8ZjsrK1UpZm9yKGxldCBZPTA7WTxiOysrWSl7Y29uc3QgUT1ZKiQtUy50b3A7Zm9yKGxldCBuZT0wO25lPHY7KytuZSl7Y29uc3Qgc2U9bmUqay1TLmxlZnQ7Zm9yKGxldCBWPTA7Vjx3OysrVil7bGV0IEs9TnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIscT0wLEI9MDtmb3IobGV0IEg9MDtIPFQ7KytIKXtjb25zdCBpZT1RK0gqTDtpZihpZT49MCYmaWU8Zylmb3IobGV0IHBlPTA7cGU8RDsrK3BlKXtjb25zdCBkZT1zZStwZSp6O2lmKGRlPj0wJiZkZTx5KXtjb25zdCBmZT1oW1VdW2llXVtkZV1bVl0rcFtIXVtwZV1bVl07ZmU+SyYmKEs9ZmUscT1ILEI9cGUpfX19RVtxXVtCXVtWXSs9X1tVXVtZXVtuZV1bVl19fX1yZXR1cm57ZGF0YUlkOmMud3JpdGUoZ2koRSxzLmR0eXBlKSxyLnNoYXBlLHIuZHR5cGUpLHNoYXBlOnIuc2hhcGUsZHR5cGU6ci5kdHlwZX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBZOD17a2VybmVsTmFtZTpDZixiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOih7aW5wdXRzOm4sYmFja2VuZDplLGF0dHJzOnR9KT0+e2NvbnN0e3g6cyxmaWx0ZXI6cixkeTpvfT1uLHtzdHJpZGVzOmkscGFkOmEsZGlsYXRpb25zOmx9PXQsYz1lLGg9RnMocy5zaGFwZSxjLmRhdGEuZ2V0KHMuZGF0YUlkKS52YWx1ZXMpLHA9RnMoci5zaGFwZSxjLmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMpLHtiYXRjaFNpemU6ZixpbkhlaWdodDpnLGluV2lkdGg6eSxpbkNoYW5uZWxzOncsb3V0SGVpZ2h0OmIsb3V0V2lkdGg6dixwYWRJbmZvOlMsc3RyaWRlSGVpZ2h0OiQsc3RyaWRlV2lkdGg6ayxmaWx0ZXJIZWlnaHQ6VCxmaWx0ZXJXaWR0aDpELGRpbGF0aW9uSGVpZ2h0OkwsZGlsYXRpb25XaWR0aDp6LG91dFNoYXBlOkZ9PXJoKHMuc2hhcGUsci5zaGFwZSxpLGEsIk5IV0MiLGwpO0Eoby5yYW5rPT09Ri5sZW5ndGgsKCk9PmBFcnJvciBpbiAke0NmfSwgZHkgbXVzdCBoYXZlIHRoZSBzYW1lIHJhbmsgYXMgb3V0cHV0ICR7Ri5sZW5ndGh9LCBidXQgZ290ICR7by5yYW5rfWApO2NvbnN0IF89RnMoRixjLmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMpLEU9UjEocy5zaGFwZSxzLmR0eXBlKTtmb3IobGV0IFU9MDtVPGY7KytVKWZvcihsZXQgWT0wO1k8YjsrK1kpe2NvbnN0IFE9WSokLVMudG9wO2ZvcihsZXQgbmU9MDtuZTx2OysrbmUpe2NvbnN0IHNlPW5lKmstUy5sZWZ0O2ZvcihsZXQgVj0wO1Y8dzsrK1Ype2xldCBLPU51bWJlci5NSU5fU0FGRV9JTlRFR0VSLHE9UTwwPzA6USxCPXNlPDA/MDpzZTtmb3IobGV0IEg9MDtIPFQ7KytIKXtjb25zdCBpZT1RK0gqTDtpZihpZT49MCYmaWU8Zylmb3IobGV0IHBlPTA7cGU8RDsrK3BlKXtjb25zdCBkZT1zZStwZSp6O2lmKGRlPj0wJiZkZTx5KXtjb25zdCBmZT1oW1VdW2llXVtkZV1bVl0rcFtIXVtwZV1bVl07ZmU+SyYmKEs9ZmUscT1pZSxCPWRlKX19fUVbVV1bcV1bQl1bVl0rPV9bVV1bWV1bbmVdW1ZdfX19cmV0dXJue2RhdGFJZDpjLndyaXRlKGdpKEUscy5kdHlwZSkscy5zaGFwZSxzLmR0eXBlKSxzaGFwZTpzLnNoYXBlLGR0eXBlOnMuZHR5cGV9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUTgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2ltYWdlOnJ9PWUse2NhbnZhczpvLG9wdGlvbnM6aX09cyx7Y29udGV4dE9wdGlvbnM6YSxpbWFnZU9wdGlvbnM6bH09aXx8e30sYz1sPy5hbHBoYXx8MSxoPWE/LmNvbnRleHRUeXBlfHwiMmQiO2lmKGghPT0iMmQiKXRocm93IG5ldyBFcnJvcihgQ29udGV4dCB0eXBlICR7YS5jb250ZXh0VHlwZX0gaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgQ1BVIGJhY2tlbmQuYCk7Y29uc3QgcD1vLmdldENvbnRleHQoaCxhPy5jb250ZXh0QXR0cmlidXRlc3x8e30pO2lmKHA9PW51bGwpdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZ2V0IHRoZSBjb250ZXh0IHdpdGggJHtofSB0eXBlLmApO2NvbnN0W2YsZ109ci5zaGFwZS5zbGljZSgwLDIpLHk9ci5zaGFwZS5sZW5ndGg9PT0yPzE6ci5zaGFwZVsyXSx3PXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxiPXIuZHR5cGU9PT0iZmxvYXQzMiI/MjU1OjEsdj1uZXcgVWludDhDbGFtcGVkQXJyYXkoZypmKjQpO2ZvcihsZXQgJD0wOyQ8ZipnOysrJCl7Y29uc3Qgaz1bMCwwLDAsMjU1KmNdO2ZvcihsZXQgRD0wO0Q8eTtEKyspe2NvbnN0IEw9d1skKnkrRF07aWYoci5kdHlwZT09PSJmbG9hdDMyIil7aWYoTDwwfHxMPjEpdGhyb3cgbmV3IEVycm9yKGBUZW5zb3IgdmFsdWVzIGZvciBhIGZsb2F0MzIgVGVuc29yIG11c3QgYmUgaW4gdGhlIHJhbmdlIFswIC0gMV0gYnV0IGVuY291bnRlcmVkICR7TH0uYCl9ZWxzZSBpZihyLmR0eXBlPT09ImludDMyIiYmKEw8MHx8TD4yNTUpKXRocm93IG5ldyBFcnJvcihgVGVuc29yIHZhbHVlcyBmb3IgYSBpbnQzMiBUZW5zb3IgbXVzdCBiZSBpbiB0aGUgcmFuZ2UgWzAgLSAyNTVdIGJ1dCBlbmNvdW50ZXJlZCAke0x9LmApO3k9PT0xPyhrWzBdPUwqYixrWzFdPUwqYixrWzJdPUwqYik6a1tEXT1MKmJ9Y29uc3QgVD0kKjQ7dltUKzBdPU1hdGgucm91bmQoa1swXSksdltUKzFdPU1hdGgucm91bmQoa1sxXSksdltUKzJdPU1hdGgucm91bmQoa1syXSksdltUKzNdPU1hdGgucm91bmQoa1szXSl9by53aWR0aD1nLG8uaGVpZ2h0PWY7Y29uc3QgUz1uZXcgSW1hZ2VEYXRhKHYsZyxmKTtyZXR1cm4gcC5wdXRJbWFnZURhdGEoUywwLDApLHJ9Y29uc3QgWjg9e2tlcm5lbE5hbWU6eG0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpROH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gX2gobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7YXhpczpvLGtlZXBEaW1zOml9PXM7RGUociwic3VtIik7bGV0IGE7ci5kdHlwZT09PSJib29sIj9hPW1pKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntkdHlwZToiaW50MzIifX0pOmE9WXIoe2lucHV0czp7eDpyfSxiYWNrZW5kOnR9KTtjb25zdCBsPWEuc2hhcGUubGVuZ3RoLGM9UWUobyxhLnNoYXBlKSxoPUx0KGMsbCk7bGV0IHA9YyxmPWE7aCE9bnVsbCYmKGY9aXMoe2lucHV0czp7eDphfSxiYWNrZW5kOnQsYXR0cnM6e3Blcm06aH19KSxwPWp0KHAubGVuZ3RoLGwpKSxDbigic3VtIixwLGYuc2hhcGUubGVuZ3RoKTtjb25zdFtnLHldPW1uKGYuc2hhcGUscCksdz10cyhmLmR0eXBlLCJpbnQzMiIpO2xldCBiPVVmKHQsZyx3KTtjb25zdCB2PWNlKHkpLFM9dC5kYXRhLmdldChiLmRhdGFJZCkudmFsdWVzLCQ9dC5kYXRhLmdldChmLmRhdGFJZCkudmFsdWVzO2ZvcihsZXQgaz0wO2s8Uy5sZW5ndGg7KytrKXtjb25zdCBUPWsqdjtsZXQgRD0wO2ZvcihsZXQgTD0wO0w8djsrK0wpRCs9JFtUK0xdO1Nba109RH1pZihpKXtjb25zdCBrPVV0KGIuc2hhcGUsYyksVD1iO2I9a3Qoe2lucHV0czp7eDpifSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmt9fSksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhUKX1yZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhhKSxoIT1udWxsJiZ0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGYpLGJ9Y29uc3QgSjg9e2tlcm5lbE5hbWU6S2QsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpfaH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZXEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2VxdWF0aW9uOnJ9PXMsbz1lLHthbGxEaW1zOmksc3VtbWVkRGltczphLGlkRGltczpsfT1TdyhyLG8ubGVuZ3RoKTtrdyhpLmxlbmd0aCxsLG8pO2NvbnN0e3BhdGg6YyxzdGVwczpofT1DdyhhLGwpLHA9aC5sZW5ndGg7bGV0IGY9bnVsbCxnPWkubGVuZ3RoO2NvbnN0IHk9W107Zm9yKGxldCB3PTA7dzxwOysrdyl7Zm9yKGNvbnN0IGIgb2YgaFt3XSl7Y29uc3R7cGVybXV0YXRpb25JbmRpY2VzOnYsZXhwYW5kRGltczpTfT1OdyhnLGxbYl0pO2xldCAkOyR3KHYpPyQ9b1tiXTooJD1pcyh7aW5wdXRzOnt4Om9bYl19LGJhY2tlbmQ6dCxhdHRyczp7cGVybTp2fX0pLHkucHVzaCgkKSk7Y29uc3Qgaz0kLnNoYXBlLnNsaWNlKCk7Zm9yKGxldCBUPTA7VDxTLmxlbmd0aDsrK1Qpay5zcGxpY2UoU1tUXSwwLDEpO0plKCQuc2hhcGUsayl8fCgkPWt0KHtpbnB1dHM6e3g6JH0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTprfX0pLHkucHVzaCgkKSksZj09PW51bGw/Zj0kOihmPWF5KHtpbnB1dHM6e2E6JCxiOmZ9LGJhY2tlbmQ6dH0pLHkucHVzaChmKSl9dzxwLTEmJihjW3ddPj0wJiYoZj1faCh7aW5wdXRzOnt4OmZ9LGJhY2tlbmQ6dCxhdHRyczp7YXhpczpjW3ddLShpLmxlbmd0aC1nKSxrZWVwRGltczohMX19KSx5LnB1c2goZikpLGctLSl9Zm9yKGNvbnN0IHcgb2YgeSl3IT09ZiYmdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh3KTtyZXR1cm4gZn1jb25zdCB0cT17a2VybmVsTmFtZTpibSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmVxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBucShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se2R5OnMseTpyfT1lO0RlKFtzLHJdLCJlbHVHcmFkIik7Y29uc3Qgbz1uZXcgRmxvYXQzMkFycmF5KGNlKHIuc2hhcGUpKSxpPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxhPXQuZGF0YS5nZXQocy5kYXRhSWQpLnZhbHVlcztmb3IobGV0IGw9MDtsPGkubGVuZ3RoOysrbCl7Y29uc3QgYz1pW2xdO2M+PTA/b1tsXT1hW2xdOm9bbF09YVtsXSooYysxKX1yZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhyLnNoYXBlLCJmbG9hdDMyIixvKX1jb25zdCBzcT17a2VybmVsTmFtZTp3bSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOm5xfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHJxPW13LG9xPWd3LGlxPXl3LGFxPXh3LGxxPWJ3LHVxPXd3LGNxPW10KFZsLG49Pntjb25zdCBlPU1hdGguc2lnbihuKSx0PU1hdGguYWJzKG4pLHM9MS8oMStycSp0KTtyZXR1cm4gZSooMS0oKCgodXEqcytscSkqcythcSkqcytpcSkqcytvcSkqcypNYXRoLmV4cCgtdCp0KSl9KSxkcT17a2VybmVsTmFtZTpWbCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmNxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBIZihuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7aW5wdXQ6cn09ZSx7ZGltOm99PXMsaT1yLnNoYXBlLmxlbmd0aCxhPXIuc2hhcGUuc2xpY2UoKTtsZXQgbD1vO3JldHVybiBvPDAmJihBKC0oaSsxKTw9bywoKT0+YEF4aXMgbXVzdCBiZSBpbiB0aGUgaW50ZXJ2YWwgWyR7LShpKzEpfSwgJHtpfV1gKSxsPWkrbysxKSxhLnNwbGljZShsLDAsMSksa3Qoe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmF9fSl9Y29uc3QgaHE9e2tlcm5lbE5hbWU6eWQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpIZn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgcHE9SHQoKG4sZSk9Pm4vZSksYXY9b24oTWwscHEpLHkxPXtrZXJuZWxOYW1lOk1sLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6YXZ9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG9EKG4sZSx0KXtjb25zdCBzPW4uc2hhcGUscj1zWzBdLG89c1sxXSxpPXQuZGF0YS5nZXQobi5kYXRhSWQpLGE9aS5jb21wbGV4VGVuc29ySW5mb3MucmVhbCxsPWkuY29tcGxleFRlbnNvckluZm9zLmltYWcsYz1bcixvXSxoPWNlKGMpLHA9aG4oImZsb2F0MzIiLGgpLGY9aG4oImZsb2F0MzIiLGgpO2ZvcihsZXQgYj0wO2I8cjtiKyspe2NvbnN0IHY9eWEoe2lucHV0czp7eDphfSxiYWNrZW5kOnQsYXR0cnM6e2JlZ2luOltiLDBdLHNpemU6WzEsb119fSksUz15YSh7aW5wdXRzOnt4Omx9LGJhY2tlbmQ6dCxhdHRyczp7YmVnaW46W2IsMF0sc2l6ZTpbMSxvXX19KSwkPWJzKHtpbnB1dHM6e3JlYWw6dixpbWFnOlN9LGJhY2tlbmQ6dH0pLHtyZWFsOmssaW1hZzpUfT1mcSgkLGUsdCksRD1ibyhrLFQpO2ZvcihsZXQgTD0wO0w8bztMKyspe2NvbnN0IHo9dncoRCxMKTtwW2IqbytMXT16LnJlYWwsZltiKm8rTF09ei5pbWFnfXQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odiksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhTKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKCQpfWNvbnN0IGc9dC5tYWtlVGVuc29ySW5mbyhjLCJmbG9hdDMyIixwKSx5PXQubWFrZVRlbnNvckluZm8oYywiZmxvYXQzMiIsZiksdz1icyh7aW5wdXRzOntyZWFsOmcsaW1hZzp5fSxiYWNrZW5kOnR9KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhnKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHkpLHd9ZnVuY3Rpb24gZnEobixlLHQpe2NvbnN0IHM9Y2Uobi5zaGFwZSkscj10LmRhdGEuZ2V0KG4uZGF0YUlkKSxvPXQuZGF0YS5nZXQoci5jb21wbGV4VGVuc29ySW5mb3MucmVhbC5kYXRhSWQpLnZhbHVlcyxpPXQuZGF0YS5nZXQoci5jb21wbGV4VGVuc29ySW5mb3MuaW1hZy5kYXRhSWQpLnZhbHVlcztpZihtcShzKSl7Y29uc3QgYT14MShvLGkscyxlLHQpLGw9W24uc2hhcGVbMF0sbi5zaGFwZVsxXV07aWYoZSl7Y29uc3QgYz10Lm1ha2VUZW5zb3JJbmZvKGwsImZsb2F0MzIiLGEucmVhbCksaD10Lm1ha2VUZW5zb3JJbmZvKGwsImZsb2F0MzIiLGEuaW1hZykscD10Lm1ha2VUZW5zb3JJbmZvKFtdLCJmbG9hdDMyIixTbyhzLCJmbG9hdDMyIikpLGY9WXIoe2lucHV0czp7eDpwfSxiYWNrZW5kOnR9KSxnPXkxLmtlcm5lbEZ1bmMoe2lucHV0czp7YTpjLGI6cH0sYmFja2VuZDp0fSkseT15MS5rZXJuZWxGdW5jKHtpbnB1dHM6e2E6aCxiOmZ9LGJhY2tlbmQ6dH0pLHc9dC5kYXRhLmdldChnLmRhdGFJZCkudmFsdWVzLGI9dC5kYXRhLmdldCh5LmRhdGFJZCkudmFsdWVzO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGMpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaCksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhwKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGYpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZyksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh5KSx7cmVhbDp3LGltYWc6Yn19cmV0dXJuIGF9ZWxzZXtjb25zdCBhPWJvKG8saSksbD1ncShhLHMsZSk7cmV0dXJuIGYyKGwpfX1mdW5jdGlvbiBtcShuKXtyZXR1cm4obiZuLTEpPT09MH1mdW5jdGlvbiB4MShuLGUsdCxzLHIpe2lmKHQ9PT0xKXJldHVybntyZWFsOm4saW1hZzplfTtjb25zdCBvPWJvKG4sZSksaT10LzIsYT1tMihvKSxsPWEucmVhbCxjPWEuaW1hZyxoPVtsLmxlbmd0aF0scD1yLm1ha2VUZW5zb3JJbmZvKGgsImZsb2F0MzIiLGwpLGY9ci5tYWtlVGVuc29ySW5mbyhoLCJmbG9hdDMyIixjKSxnPWJzKHtpbnB1dHM6e3JlYWw6cCxpbWFnOmZ9LGJhY2tlbmQ6cn0pLHk9ZzIobyksdz15LnJlYWwsYj15LmltYWcsdj1bdy5sZW5ndGhdLFM9ci5tYWtlVGVuc29ySW5mbyh2LCJmbG9hdDMyIix3KSwkPXIubWFrZVRlbnNvckluZm8odiwiZmxvYXQzMiIsYiksaz1icyh7aW5wdXRzOntyZWFsOlMsaW1hZzokfSxiYWNrZW5kOnJ9KSxUPXgxKGwsYyxpLHMsciksRD1ULnJlYWwsTD1ULmltYWcsej1bRC5sZW5ndGhdLEY9ci5tYWtlVGVuc29ySW5mbyh6LCJmbG9hdDMyIixEKSxfPXIubWFrZVRlbnNvckluZm8oeiwiZmxvYXQzMiIsTCksRT1icyh7aW5wdXRzOntyZWFsOkYsaW1hZzpffSxiYWNrZW5kOnJ9KSxNPXgxKHcsYixpLHMsciksVT1NLnJlYWwsWT1NLmltYWcsUT1bVS5sZW5ndGhdLG5lPXIubWFrZVRlbnNvckluZm8oUSwiZmxvYXQzMiIsVSksc2U9ci5tYWtlVGVuc29ySW5mbyhRLCJmbG9hdDMyIixZKSxWPWJzKHtpbnB1dHM6e3JlYWw6bmUsaW1hZzpzZX0sYmFja2VuZDpyfSksSz14Mih0LHMpLHE9W0sucmVhbC5sZW5ndGhdLEI9ci5tYWtlVGVuc29ySW5mbyhxLCJmbG9hdDMyIixLLnJlYWwpLEg9ci5tYWtlVGVuc29ySW5mbyhxLCJmbG9hdDMyIixLLmltYWcpLGllPWJzKHtpbnB1dHM6e3JlYWw6QixpbWFnOkh9LGJhY2tlbmQ6cn0pLHBlPWF5KHtpbnB1dHM6e2E6aWUsYjpWfSxiYWNrZW5kOnJ9KSxkZT1TbCh7aW5wdXRzOnthOkUsYjpwZX0sYmFja2VuZDpyfSksZmU9b3Yoe2lucHV0czp7YTpFLGI6cGV9LGJhY2tlbmQ6cn0pLHdlPWdhKHtpbnB1dHM6e2lucHV0OmRlfSxiYWNrZW5kOnJ9KSx2ZT1nYSh7aW5wdXRzOntpbnB1dDpmZX0sYmFja2VuZDpyfSksa2U9Tmwoe2lucHV0czp7aW5wdXQ6ZGV9LGJhY2tlbmQ6cn0pLExlPU5sKHtpbnB1dHM6e2lucHV0OmZlfSxiYWNrZW5kOnJ9KSxXZT1rbCh7aW5wdXRzOlt3ZSx2ZV0sYmFja2VuZDpyLGF0dHJzOntheGlzOjB9fSksbnQ9a2woe2lucHV0czpba2UsTGVdLGJhY2tlbmQ6cixhdHRyczp7YXhpczowfX0pLG90PXIuZGF0YS5nZXQoV2UuZGF0YUlkKS52YWx1ZXMsaHQ9ci5kYXRhLmdldChudC5kYXRhSWQpLnZhbHVlcztyZXR1cm4gci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhwKSxyLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGYpLHIuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZyksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhTKSxyLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKCQpLHIuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oayksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhGKSxyLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKF8pLHIuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oRSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhuZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhzZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhWKSxyLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKEIpLHIuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oSCksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhpZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhwZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhkZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhmZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh3ZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhrZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh2ZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhMZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhXZSksci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhudCkse3JlYWw6b3QsaW1hZzpodH19ZnVuY3Rpb24gZ3EobixlLHQpe2NvbnN0IHM9bmV3IEZsb2F0MzJBcnJheShlKjIpO2ZvcihsZXQgcj0wO3I8ZTtyKyspe2xldCBvPTAsaT0wO2ZvcihsZXQgYT0wO2E8ZTthKyspe2NvbnN0IGw9YjIociphLGUsdCksYz12dyhuLGEpO28rPWMucmVhbCpsLnJlYWwtYy5pbWFnKmwuaW1hZyxpKz1jLnJlYWwqbC5pbWFnK2MuaW1hZypsLnJlYWx9dCYmKG8vPWUsaS89ZSkseTIocyxvLGkscil9cmV0dXJuIHN9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24geXEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtpbnB1dDpzfT1lLHI9Y2Uocy5zaGFwZSksbz1zLnNoYXBlW3Muc2hhcGUubGVuZ3RoLTFdLGk9ci9vLGE9a3Qoe2lucHV0czp7eDpzfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOltpLG9dfX0pLGw9b0QoYSwhMSx0KSxjPWt0KHtpbnB1dHM6e3g6bH0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpzLnNoYXBlfX0pO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGEpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8obCksY31jb25zdCB4cT17a2VybmVsTmFtZTp2bSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnlxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBsdihuKXtjb25zdHtiYWNrZW5kOmUsYXR0cnM6dH09bix7c2hhcGU6cyx2YWx1ZTpyLGR0eXBlOm99PXQsaT1vfHx3YShyKSxhPU10KGksY2UocykpO3JldHVybiB3cShhLHIsaSksZS5tYWtlVGVuc29ySW5mbyhzLGksYSl9Y29uc3QgYnE9e2tlcm5lbE5hbWU6U20sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpsdn07ZnVuY3Rpb24gd3EobixlLHQpe24uZmlsbChlKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB2cT17a2VybmVsTmFtZTpObSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOih7aW5wdXRzOm4sYXR0cnM6ZSxiYWNrZW5kOnR9KT0+e2NvbnN0e2ltYWdlOnN9PW4scj10LG89aG4ocy5kdHlwZSxjZShzLnNoYXBlKSksW2ksYSxsLGNdPXMuc2hhcGUsaD1yLmRhdGEuZ2V0KHMuZGF0YUlkKS52YWx1ZXM7Zm9yKGxldCBmPTA7ZjxpO2YrKyl7Y29uc3QgZz1mKmwqYSpjO2ZvcihsZXQgeT0wO3k8YTt5Kyspe2NvbnN0IHc9eSoobCpjKTtmb3IobGV0IGI9MDtiPGw7YisrKXtjb25zdCB2PWIqYztmb3IobGV0IFM9MDtTPGM7UysrKXtjb25zdCAkPU1hdGgucm91bmQobC1iLTEpLGs9Zyt3K3YrUztsZXQgVD1oW2tdO2lmKCQ+PTAmJiQ8bCl7Y29uc3QgRD0kKmMsTD1nK3crRCtTO1Q9aFtMXX1vW2tdPVR9fX19cmV0dXJue2RhdGFJZDpyLndyaXRlKG8scy5zaGFwZSxzLmR0eXBlKSxzaGFwZTpzLnNoYXBlLGR0eXBlOnMuZHR5cGV9fX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gU3Eobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cixmaWx0ZXI6byxiaWFzOmkscHJlbHVBY3RpdmF0aW9uV2VpZ2h0czphfT1lLHtzdHJpZGVzOmwscGFkOmMsZGF0YUZvcm1hdDpoLGRpbGF0aW9uczpwLGRpbVJvdW5kaW5nTW9kZTpmLGFjdGl2YXRpb246ZyxsZWFreXJlbHVBbHBoYTp5fT1zO2xldCB3PXNEKHtpbnB1dHM6e3g6cixmaWx0ZXI6b30sYmFja2VuZDp0LGF0dHJzOntzdHJpZGVzOmwscGFkOmMsZGF0YUZvcm1hdDpoLGRpbGF0aW9uczpwLGRpbVJvdW5kaW5nTW9kZTpmfX0pO2lmKGkpe2NvbnN0IGI9dztpZihoPT09Ik5DSFciJiZpLnNoYXBlLmxlbmd0aD09PTEmJmkuc2hhcGVbMF0hPT0xKXtjb25zdCB2PWt0KHtpbnB1dHM6e3g6aX0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpbaS5zaGFwZVswXSwxLDFdfX0pO3c9U2woe2lucHV0czp7YTp3LGI6dn0sYmFja2VuZDp0fSksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh2KX1lbHNlIHc9U2woe2lucHV0czp7YTp3LGI6aX0sYmFja2VuZDp0fSk7dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhiKX1pZihnKXtjb25zdCBiPXc7aWYoaD09PSJOQ0hXIiYmZz09PSJwcmVsdSImJmEuc2hhcGUubGVuZ3RoPT09MSYmYS5zaGFwZVswXSE9PTEpe2NvbnN0IHY9a3Qoe2lucHV0czp7eDphfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOlthLnNoYXBlWzBdLDEsMV19fSk7dz1HZih0LHcsZyx2LHkpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odil9ZWxzZSB3PUdmKHQsdyxnLGEseSk7dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhiKX1yZXR1cm4gd31jb25zdCBOcT17a2VybmVsTmFtZTpGYyxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlNxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBrcShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLGZpbHRlcjpvLGJpYXM6aSxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOmF9PWUse3N0cmlkZXM6bCxwYWQ6YyxkYXRhRm9ybWF0OmgsZGlsYXRpb25zOnAsZGltUm91bmRpbmdNb2RlOmYsYWN0aXZhdGlvbjpnLGxlYWt5cmVsdUFscGhhOnl9PXM7bGV0IHc9ckQoe2lucHV0czp7eDpyLGZpbHRlcjpvfSxiYWNrZW5kOnQsYXR0cnM6e3N0cmlkZXM6bCxwYWQ6YyxkYXRhRm9ybWF0OmgsZGlsYXRpb25zOnAsZGltUm91bmRpbmdNb2RlOmZ9fSk7aWYoaSl7Y29uc3QgYj13O3c9U2woe2lucHV0czp7YTp3LGI6aX0sYmFja2VuZDp0fSksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhiKX1pZihnKXtjb25zdCBiPXc7dz1HZih0LHcsZyxhLHkpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYil9cmV0dXJuIHd9Y29uc3QgQ3E9e2tlcm5lbE5hbWU6TGMsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzprcX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gJHEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtwYXJhbXM6cyxpbmRpY2VzOnJ9PWUsbz1jZShzLnNoYXBlKSxpPXIuc2hhcGUsYT1pW2kubGVuZ3RoLTFdLFtsLGMsaCxwXT1HZyhzLHIpO2lmKGM9PT0wKXJldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGwscy5kdHlwZSxbXSk7Y29uc3QgZj10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsZz10LmJ1ZmZlclN5bmMocykseT1tUihmLGcscy5kdHlwZSxjLGEsaCxwLHMuc2hhcGUsbyk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8obCxzLmR0eXBlLHkudmFsdWVzKX1jb25zdCBJcT17a2VybmVsTmFtZTprbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOiRxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBUcShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLGluZGljZXM6b309ZSx7YXhpczppLGJhdGNoRGltczphfT1zO0RlKFtyLG9dLCJnYXRoZXJWMiIpO2NvbnN0IGw9UWUoaSxyLnNoYXBlKVswXSxjPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyxoPXIuc2hhcGVbbF07Zm9yKGxldCBrPTA7azxjLmxlbmd0aDsrK2spe2NvbnN0IFQ9Y1trXTtBKFQ8PWgtMSYmVD49MCwoKT0+YEdhdGhlclYyOiB0aGUgaW5kZXggdmFsdWUgJHtUfSBpcyBub3QgaW4gWzAsICR7aC0xfV1gKX1sZXQgcD1hO2E9PW51bGwmJihwPTApO2NvbnN0IGY9Y2Uoby5zaGFwZSksZz1UdyhyLG8sbCxwKSx5PWt0KHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpbZy5iYXRjaFNpemUsZy5vdXRlclNpemUsZy5kaW1TaXplLGcuc2xpY2VTaXplXX19KSx3PWt0KHtpbnB1dHM6e3g6b30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpbZy5iYXRjaFNpemUsZi9nLmJhdGNoU2l6ZV19fSksYj1bZy5iYXRjaFNpemUsZy5vdXRlclNpemUsZi9nLmJhdGNoU2l6ZSxnLnNsaWNlU2l6ZV0sdj10LmJ1ZmZlclN5bmModyksUz10LmJ1ZmZlclN5bmMoeSksJD1nUihTLHYsYik7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oeSksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh3KSx0Lm1ha2VUZW5zb3JJbmZvKGcub3V0cHV0U2hhcGUsJC5kdHlwZSwkLnZhbHVlcyl9Y29uc3QgRXE9e2tlcm5lbE5hbWU6YmQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpUcX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUnEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtpbnB1dDpzfT1lLHI9Y2Uocy5zaGFwZSksbz1zLnNoYXBlW3Muc2hhcGUubGVuZ3RoLTFdLGk9ci9vLGE9a3Qoe2lucHV0czp7eDpzfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOltpLG9dfX0pLGw9b0QoYSwhMCx0KSxjPWt0KHtpbnB1dHM6e3g6bH0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpzLnNoYXBlfX0pO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGEpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8obCksY31jb25zdCBEcT17a2VybmVsTmFtZTpDbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlJxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEFxPW10KEtsLG49Pk51bWJlci5pc0Zpbml0ZShuKT8xOjAsImJvb2wiKSxfcT17a2VybmVsTmFtZTpLbCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOkFxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IE9xPW10KFhsLG49Pk1hdGguYWJzKG4pPT09MS8wPzE6MCwiYm9vbCIpLEZxPXtrZXJuZWxOYW1lOlhsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6T3F9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgTHE9bXQoWWwsbj0+TnVtYmVyLmlzTmFOKG4pPzE6MCwiYm9vbCIpLFBxPXtrZXJuZWxOYW1lOllsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6THF9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHpxKG4pe2NvbnN0e2JhY2tlbmQ6ZSxhdHRyczp0fT1uLHtzdGFydDpzLHN0b3A6cixudW06b309dCxpPXZSKHMscixvKTtyZXR1cm4gZS5tYWtlVGVuc29ySW5mbyhbaS5sZW5ndGhdLCJmbG9hdDMyIixpKX1jb25zdCBNcT17a2VybmVsTmFtZTpJbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnpxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEJxPW10KFpsLG49Pk1hdGgubG9nMXAobikpLFZxPXtrZXJuZWxOYW1lOlpsLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6QnF9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFdxPUh0KChuLGUpPT5uJiZlKSxVcT1vbihrZCxXcSxudWxsLCJib29sIiksanE9e2tlcm5lbE5hbWU6a2QsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpVcX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gQVMgSVMgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBHcT1tdChDZCxuPT5uPzA6MSwiYm9vbCIpLEhxPXtrZXJuZWxOYW1lOkNkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6R3F9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHFxPUh0KChuLGUpPT5ufHxlKSxLcT1vbigkZCxxcSxudWxsLCJib29sIiksWHE9e2tlcm5lbE5hbWU6JGQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpLcX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWXEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7ZGVwdGhSYWRpdXM6byxiaWFzOmksYWxwaGE6YSxiZXRhOmx9PXM7RGUociwiTFJOIik7Y29uc3QgYz1yLnNoYXBlWzNdLGg9Yy0xLHA9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLGY9Y2Uoci5zaGFwZSksZz1uZXcgRmxvYXQzMkFycmF5KGYpO2Z1bmN0aW9uIHkodyl7Y29uc3QgYj13JWM7bGV0IHY9dy1iK01hdGgubWF4KDAsYi1vKTtjb25zdCBTPXctYitNYXRoLm1pbihiK28saCk7bGV0ICQ9MDtmb3IoO3Y8PVM7disrKXtjb25zdCBrPXBbdl07JCs9ayprfXJldHVybiAkfWZvcihsZXQgdz0wO3c8Zjt3Kyspe2NvbnN0IGI9eSh3KSx2PXBbd10qTWF0aC5wb3coaSthKmIsLWwpO2dbd109dn1yZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhyLnNoYXBlLHIuZHR5cGUsZyl9Y29uc3QgUXE9e2tlcm5lbE5hbWU6SWQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpZcX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWnEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cix5Om8sZHk6aX09ZSx7ZGVwdGhSYWRpdXM6YSxiaWFzOmwsYWxwaGE6YyxiZXRhOmh9PXM7RGUoaSwiTFJOR3JhZCIpO2NvbnN0IHA9Y2UoaS5zaGFwZSksZj1pLnNoYXBlWzNdLGc9dC5kYXRhLmdldChpLmRhdGFJZCkudmFsdWVzLHk9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLHc9dC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzLGI9bmV3IEZsb2F0MzJBcnJheShwKSx2PXA7Zm9yKGxldCBTPTA7Uzx2O1MrKyl7Y29uc3QgJD1TJWYsaz1TLSQrTWF0aC5tYXgoMCwkLWEpLFQ9Uy0kK01hdGgubWluKGYsJCthKzEpO2xldCBEPTA7Zm9yKGxldCBMPWs7TDxUO0wrKylEKz1NYXRoLnBvdyh5W0xdLDIpO0Q9YypEK2w7Zm9yKGxldCBMPWs7TDxUO0wrKyl7bGV0IHo9LTIqYypoKnlbTF0qd1tTXS9EO1M9PT1MJiYoeis9TWF0aC5wb3coRCwtaCkpLHoqPWdbU10sYltMXSs9en19cmV0dXJuIHQubWFrZVRlbnNvckluZm8oaS5zaGFwZSxyLmR0eXBlLGIpfWNvbnN0IEpxPXtrZXJuZWxOYW1lOlRtLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6WnF9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGlEKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse3JlZHVjdGlvbkluZGljZXM6byxrZWVwRGltczppfT1zLGE9dDtsZXQgbD1yLnNoYXBlO2NvbnN0IGM9bC5sZW5ndGgsaD1RZShvLGwpO2xldCBwPWg7Y29uc3QgZj1MdChwLGMpO2xldCBnPWEuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcztpZihmIT1udWxsKXtjb25zdCBrPW5ldyBBcnJheShjKTtmb3IobGV0IFQ9MDtUPGsubGVuZ3RoO1QrKylrW1RdPWxbZltUXV07Zz1zdihnLGwsci5kdHlwZSxmLGspLHA9anQocC5sZW5ndGgsYyksbD1rfURlKHIsIm1heCIpLENuKCJtYXgiLHAsYyk7Y29uc3RbeSx3XT1tbihsLHApLGI9Y2Uodyksdj1OUihnLGIseSxyLmR0eXBlKSxTPWEud3JpdGUodix5LHIuZHR5cGUpO2xldCAkPXk7cmV0dXJuIGkmJigkPVV0KHksaCkpLHtkYXRhSWQ6UyxzaGFwZTokLGR0eXBlOnIuZHR5cGV9fWNvbnN0IGVLPXtrZXJuZWxOYW1lOlRkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6aUR9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHRLKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWU7RGUociwibWF4UG9vbCIpO2NvbnN0e2ZpbHRlclNpemU6byxzdHJpZGVzOmkscGFkOmEsZGltUm91bmRpbmdNb2RlOmx9PXMsYz0xO0Eoa24oaSxjKSwoKT0+YEVycm9yIGluIG1heFBvb2w6IEVpdGhlciBzdHJpZGVzIG9yIGRpbGF0aW9ucyBtdXN0IGJlIDEuIEdvdCBzdHJpZGVzICR7aX0gYW5kIGRpbGF0aW9ucyAnJHtjfSdgKTtjb25zdCBoPW5yKHIuc2hhcGUsbyxpLGMsYSxsKTtsZXQgcDtpZihoLmZpbHRlcldpZHRoPT09MSYmaC5maWx0ZXJIZWlnaHQ9PT0xJiZKZShoLmluU2hhcGUsaC5vdXRTaGFwZSkpcD1Zcih7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dH0pO2Vsc2V7Y29uc3QgZj10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsZz16ZShyLnNoYXBlKSx5PWl2KGYsci5zaGFwZSxyLmR0eXBlLGcsaCwibWF4Iik7cD10Lm1ha2VUZW5zb3JJbmZvKGgub3V0U2hhcGUsci5kdHlwZSx5LnZhbHVlcyl9cmV0dXJuIHB9Y29uc3Qgbks9e2tlcm5lbE5hbWU6RWQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp0S307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gc0sobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7ZmlsdGVyU2l6ZTpvLHN0cmlkZXM6aSxwYWQ6YSxkaW1Sb3VuZGluZ01vZGU6bCxkYXRhRm9ybWF0OmN9PXM7RGUociwibWF4UG9vbDNkIik7Y29uc3QgaD1ObyhyLnNoYXBlLG8saSwxLGEsbCxjKSxwPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxmPW5EKHAsci5zaGFwZSxyLmR0eXBlLHplKHIuc2hhcGUpLGgsIm1heCIpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGYuc2hhcGUsImZsb2F0MzIiLGYudmFsdWVzKX1jb25zdCBySz17a2VybmVsTmFtZTpSZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnNLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBvSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7ZHk6cixpbnB1dDpvfT1lLHtmaWx0ZXJTaXplOmksc3RyaWRlczphLHBhZDpsLGRpbVJvdW5kaW5nTW9kZTpjfT1zO0RlKFtyLG9dLCJtYXhQb29sM0RHcmFkIik7Y29uc3QgaD1ObyhvLnNoYXBlLGksYSwxLGwsYykscD10LmJ1ZmZlclN5bmMobyksZj1xNShwLGgpLGc9aC5zdHJpZGVEZXB0aCx5PWguc3RyaWRlSGVpZ2h0LHc9aC5zdHJpZGVXaWR0aCxiPWguZGlsYXRpb25EZXB0aCx2PWguZGlsYXRpb25IZWlnaHQsUz1oLmRpbGF0aW9uV2lkdGgsJD1oLmVmZmVjdGl2ZUZpbHRlckRlcHRoLGs9aC5lZmZlY3RpdmVGaWx0ZXJIZWlnaHQsVD1oLmVmZmVjdGl2ZUZpbHRlcldpZHRoLEQ9JC0xLWgucGFkSW5mby5mcm9udCxMPVQtMS1oLnBhZEluZm8ubGVmdCx6PWstMS1oLnBhZEluZm8udG9wLEY9cWUoby5zaGFwZSwiZmxvYXQzMiIpLF89dC5idWZmZXJTeW5jKHIpO2ZvcihsZXQgRT0wO0U8aC5iYXRjaFNpemU7KytFKWZvcihsZXQgTT0wO008aC5pbkNoYW5uZWxzOysrTSlmb3IobGV0IFU9MDtVPGguaW5EZXB0aDsrK1UpZm9yKGxldCBZPTA7WTxoLmluSGVpZ2h0OysrWSlmb3IobGV0IFE9MDtRPGguaW5XaWR0aDsrK1Epe2NvbnN0IG5lPVUtRCxzZT1ZLXosVj1RLUw7bGV0IEs9MDtmb3IobGV0IHE9MDtxPCQ7cSs9Yil7Y29uc3QgQj0obmUrcSkvZztpZighKEI8MHx8Qj49aC5vdXREZXB0aHx8TWF0aC5mbG9vcihCKSE9PUIpKWZvcihsZXQgSD0wO0g8aztIKz12KXtjb25zdCBpZT0oc2UrSCkveTtpZighKGllPDB8fGllPj1oLm91dEhlaWdodHx8TWF0aC5mbG9vcihpZSkhPT1pZSkpZm9yKGxldCBwZT0wO3BlPFQ7cGUrPVMpe2NvbnN0IGRlPShWK3BlKS93O2lmKGRlPDB8fGRlPj1oLm91dFdpZHRofHxNYXRoLmZsb29yKGRlKSE9PWRlKWNvbnRpbnVlO2NvbnN0IGZlPSQqaypULTEtZi5nZXQoRSxCLGllLGRlLE0pLHdlPXEqaypUK0gqVCtwZSx2ZT1mZT09PXdlPzE6MDtpZih2ZT09PTApY29udGludWU7Y29uc3Qga2U9Xy5nZXQoRSxCLGllLGRlLE0pO0srPWtlKnZlfX19Ri5zZXQoSyxFLFUsWSxRLE0pfXJldHVybiB0Lm1ha2VUZW5zb3JJbmZvKEYuc2hhcGUsRi5kdHlwZSxGLnZhbHVlcyl9Y29uc3QgaUs9e2tlcm5lbE5hbWU6Um0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpvS307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gYUsobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2R5OnIsaW5wdXQ6byxvdXRwdXQ6aX09ZSxhPW87RGUoW28saV0sIm1heFBvb2xHcmFkIik7Y29uc3R7ZmlsdGVyU2l6ZTpsLHN0cmlkZXM6YyxwYWQ6aCxkaW1Sb3VuZGluZ01vZGU6cH09cyxmPW5yKGEuc2hhcGUsbCxjLDEsaCxwKSxnPXQuZGF0YS5nZXQoYS5kYXRhSWQpLnZhbHVlcyx5PXFlKGYub3V0U2hhcGUsYS5kdHlwZSx0RChnLGEuc2hhcGUsYS5kdHlwZSxmKS52YWx1ZXMpLHc9Zi5zdHJpZGVIZWlnaHQsYj1mLnN0cmlkZVdpZHRoLHY9Zi5kaWxhdGlvbkhlaWdodCxTPWYuZGlsYXRpb25XaWR0aCwkPWYuZWZmZWN0aXZlRmlsdGVySGVpZ2h0LGs9Zi5lZmZlY3RpdmVGaWx0ZXJXaWR0aCxUPWstMS1mLnBhZEluZm8ubGVmdCxEPSQtMS1mLnBhZEluZm8udG9wLEw9cWUoYS5zaGFwZSwiZmxvYXQzMiIpLHo9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLEY9cWUoci5zaGFwZSwiZmxvYXQzMiIseik7Zm9yKGxldCBfPTA7XzxmLmJhdGNoU2l6ZTsrK18pZm9yKGxldCBFPTA7RTxmLmluQ2hhbm5lbHM7KytFKWZvcihsZXQgTT0wO008Zi5pbkhlaWdodDsrK00pZm9yKGxldCBVPTA7VTxmLmluV2lkdGg7KytVKXtjb25zdCBZPU0tRCxRPVUtVDtsZXQgbmU9MDtmb3IobGV0IHNlPTA7c2U8JDtzZSs9dil7Y29uc3QgVj0oWStzZSkvdztpZighKFY8MHx8Vj49Zi5vdXRIZWlnaHR8fE1hdGguZmxvb3IoVikhPT1WKSlmb3IobGV0IEs9MDtLPGs7Sys9Uyl7Y29uc3QgcT0oUStLKS9iO2lmKHE8MHx8cT49Zi5vdXRXaWR0aHx8TWF0aC5mbG9vcihxKSE9PXEpY29udGludWU7Y29uc3QgQj0kKmstMS15LmdldChfLFYscSxFKSxIPXNlKmsrSyxpZT1CPT09SD8xOjA7aWYoaWU9PT0wKWNvbnRpbnVlO2NvbnN0IHBlPUYuZ2V0KF8sVixxLEUpO25lKz1wZSppZX19TC5zZXQobmUsXyxNLFUsRSl9cmV0dXJuIHQubWFrZVRlbnNvckluZm8oTC5zaGFwZSxMLmR0eXBlLEwudmFsdWVzKX1jb25zdCBsSz17a2VybmVsTmFtZTpFbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmFLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB1SyhuLGUsdCxzLHIpe2NvbnN0IG89emUoZSksaT1pdihuLGUsdCxvLHIsIm1heCIpLGE9dEQobixlLHQsciwhMCxzKTtyZXR1cm5baS52YWx1ZXMsYS52YWx1ZXNdfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGNLPXtrZXJuZWxOYW1lOkRtLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6KHtpbnB1dHM6bixhdHRyczplLGJhY2tlbmQ6dH0pPT57Y29uc3R7eDpzfT1uLHtmaWx0ZXJTaXplOnIsc3RyaWRlczpvLHBhZDppLGluY2x1ZGVCYXRjaEluSW5kZXg6YX09ZSxsPXQ7RGUocywiTWF4UG9vbFdpdGhBcmdtYXgiKTtjb25zdCBjPWwuZGF0YS5nZXQocy5kYXRhSWQpLnZhbHVlcyxoPW5yKHMuc2hhcGUscixvLFsxLDFdLGkpLFtwLGZdPXVLKGMscy5zaGFwZSxzLmR0eXBlLGEsaCksZz1sLndyaXRlKHAsaC5vdXRTaGFwZSxzLmR0eXBlKSx5PWwud3JpdGUoZixoLm91dFNoYXBlLHMuZHR5cGUpO3JldHVyblt7ZGF0YUlkOmcsc2hhcGU6aC5vdXRTaGFwZSxkdHlwZTpzLmR0eXBlfSx7ZGF0YUlkOnksc2hhcGU6aC5vdXRTaGFwZSxkdHlwZToiaW50MzIifV19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBkSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtheGlzOm8sa2VlcERpbXM6aX09cyxhPVFlKG8sci5zaGFwZSksYz1tbihyLnNoYXBlLGEpWzFdLGg9Y2UoYykscD1bXSxmPXQubWFrZVRlbnNvckluZm8oW10sImZsb2F0MzIiLG5ldyBGbG9hdDMyQXJyYXkoW2hdKSk7cC5wdXNoKGYpO2NvbnN0IGc9bWkoe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e2R0eXBlOiJmbG9hdDMyIn19KTtwLnB1c2goZyk7Y29uc3QgeT1hdih7aW5wdXRzOnthOmcsYjpmfSxiYWNrZW5kOnR9KTtwLnB1c2goeSk7Y29uc3Qgdz1faCh7aW5wdXRzOnt4Onl9LGJhY2tlbmQ6dCxhdHRyczp7YXhpczpvLGtlZXBEaW1zOml9fSk7cmV0dXJuIHAuZm9yRWFjaChiPT50LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGIpKSx3fWNvbnN0IGhLPXtrZXJuZWxOYW1lOkRkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6ZEt9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHBLKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2F4aXM6byxrZWVwRGltczppfT1zO0RlKHIsIm1pbiIpO2NvbnN0IGE9UWUobyxyLnNoYXBlKTtsZXQgbD1hO2NvbnN0IGM9THQobCxyLnNoYXBlLmxlbmd0aCk7bGV0IGg9cjtjIT1udWxsJiYoaD1pcyh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTpjfX0pLGw9anQobC5sZW5ndGgsci5zaGFwZS5sZW5ndGgpKSxDbigibWluIixsLGguc2hhcGUubGVuZ3RoKTtjb25zdFtwLGZdPW1uKGguc2hhcGUsbCksZz1jZShmKSx5PVNuKGNlKHApLGguZHR5cGUpLHc9dC5kYXRhLmdldChoLmRhdGFJZCkudmFsdWVzO2ZvcihsZXQgdj0wO3Y8eS5sZW5ndGg7Kyt2KXtjb25zdCBTPXYqZztsZXQgJD13W1NdO2ZvcihsZXQgaz0wO2s8ZzsrK2spe2NvbnN0IFQ9d1tTK2tdOyhOdW1iZXIuaXNOYU4oVCl8fFQ8JCkmJigkPVQpfXlbdl09JH1jIT1udWxsJiZ0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGgpO2NvbnN0IGI9dC5tYWtlVGVuc29ySW5mbyhwLGguZHR5cGUseSk7aWYoaSl7Y29uc3Qgdj1VdChwLGEpLFM9a3Qoe2lucHV0czp7eDpifSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOnZ9fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYiksU31yZXR1cm4gYn1jb25zdCBmSz17a2VybmVsTmFtZTpBZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnBLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBtSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtwYWRkaW5nczpvLG1vZGU6aX09cztEZShyLCJtaXJyb3JQYWQiKTtjb25zdCBhPW8ubWFwKCgkLGspPT4kWzBdK3Iuc2hhcGVba10rJFsxXSksbD1vLm1hcCgkPT4kWzBdKSxjPW8ubWFwKCgkLGspPT4kWzBdK3Iuc2hhcGVba10pLGg9aT09PSJyZWZsZWN0Ij8wOjEscD10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsZj1yLnNoYXBlLmxlbmd0aCxnPXplKHIuc2hhcGUpLHk9Y2UoYSksdz1hLmxlbmd0aCxiPXplKGEpLHY9aG4oci5kdHlwZSx5KTtmb3IobGV0ICQ9MDskPHk7JCsrKXtsZXQgaz12YSgkLHcsYik7Zm9yKGxldCBEPTA7RDx3O0QrKylrW0RdPGxbRF0/a1tEXT1sW0RdKjIta1tEXS1oOmtbRF0+PWNbRF0mJihrW0RdPShjW0RdLTEpKjIta1tEXStoKTtrPWsubWFwKChELEwpPT5ELWxbTF0pO2NvbnN0IFQ9YnIoayxmLGcpO3ZbJF09cFtUXX1yZXR1cm57ZGF0YUlkOnQud3JpdGUodixhLHIuZHR5cGUpLHNoYXBlOmEsZHR5cGU6ci5kdHlwZX19Y29uc3QgZ0s9e2tlcm5lbE5hbWU6X2QsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzptS307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgeUs9SHQoKChuLGUpPT57Y29uc3QgdD1uJWU7cmV0dXJuIG48MCYmZTwwfHxuPj0wJiZlPj0wP3Q6KHQrZSklZX0pKSx4Sz1vbih0dSx5SyksYks9e2tlcm5lbE5hbWU6dHUsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp4S307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gYUQobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2xvZ2l0czpyfT1lLHtkaW06b309cyxpPXIuc2hhcGUubGVuZ3RoO2xldCBhPW87aWYoYT09PS0xJiYoYT1pLTEpLGEhPT1pLTEpdGhyb3cgRXJyb3IoYFNvZnRtYXggYWxvbmcgYSBub24tbGFzdCBkaW1lbnNpb24gaXMgbm90IHlldCBzdXBwb3J0ZWQuIExvZ2l0cyB3YXMgcmFuayAke2l9IGFuZCBkaW0gd2FzICR7YX1gKTtjb25zdCBsPVFlKFthXSxyLnNoYXBlKSxjPWlEKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntyZWR1Y3Rpb25JbmRpY2VzOmwsa2VlcERpbXM6ITF9fSksaD1VdChjLnNoYXBlLGwpLHA9a3Qoe2lucHV0czp7eDpjfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmh9fSksZj1vdih7aW5wdXRzOnthOnIsYjpwfSxiYWNrZW5kOnR9KSxnPWRSKHtpbnB1dHM6e3g6Zn0sYmFja2VuZDp0fSkseT1faCh7aW5wdXRzOnt4Omd9LGJhY2tlbmQ6dCxhdHRyczp7YXhpczpsLGtlZXBEaW1zOiExfX0pLHc9a3Qoe2lucHV0czp7eDp5fSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmh9fSksYj1hdih7aW5wdXRzOnthOmcsYjp3fSxiYWNrZW5kOnR9KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhjKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHApLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZiksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhnKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHkpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odyksYn1jb25zdCB3Sz17a2VybmVsTmFtZTpRZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmFEfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB2SyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7bG9naXRzOnJ9PWUse251bVNhbXBsZXM6byxzZWVkOmksbm9ybWFsaXplZDphfT1zO0RlKHIsIm11bHRpbm9taWFsIik7Y29uc3QgbD1hP3I6YUQoe2lucHV0czp7bG9naXRzOnJ9LGJhY2tlbmQ6dCxhdHRyczp7ZGltOi0xfX0pLGM9bC5zaGFwZVswXSxoPWwuc2hhcGVbMV0scD10LmRhdGEuZ2V0KGwuZGF0YUlkKS52YWx1ZXMsZj1bYyxvXSxnPVNuKGNlKGYpLCJpbnQzMiIpO2ZvcihsZXQgeT0wO3k8YzsrK3kpe2NvbnN0IHc9eSpoLGI9bmV3IEZsb2F0MzJBcnJheShoLTEpO2JbMF09cFt3XTtmb3IobGV0ICQ9MTskPGIubGVuZ3RoOysrJCliWyRdPWJbJC0xXStwW3crJF07Y29uc3Qgdj13Zy5hbGVhKGkudG9TdHJpbmcoKSksUz15Km87Zm9yKGxldCAkPTA7JDxvOysrJCl7Y29uc3Qgaz12KCk7Z1tTKyRdPWIubGVuZ3RoO2ZvcihsZXQgVD0wO1Q8Yi5sZW5ndGg7VCsrKWlmKGs8YltUXSl7Z1tTKyRdPVQ7YnJlYWt9fX1yZXR1cm4gYXx8dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhsKSx0Lm1ha2VUZW5zb3JJbmZvKGYsImludDMyIixnKX1jb25zdCBTSz17a2VybmVsTmFtZTpBbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnZLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBOSz1WZztmdW5jdGlvbiBrSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7Ym94ZXM6cixzY29yZXM6b309ZSx7bWF4T3V0cHV0U2l6ZTppLGlvdVRocmVzaG9sZDphLHNjb3JlVGhyZXNob2xkOmx9PXM7RGUociwiTm9uTWF4U3VwcHJlc3Npb24iKTtjb25zdCBjPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxoPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyx7c2VsZWN0ZWRJbmRpY2VzOnB9PU5LKGMsaCxpLGEsbCk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oW3AubGVuZ3RoXSwiaW50MzIiLG5ldyBJbnQzMkFycmF5KHApKX1jb25zdCBDSz17a2VybmVsTmFtZTpfbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmtLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCAkSz1XZztmdW5jdGlvbiBJSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7Ym94ZXM6cixzY29yZXM6b309ZSx7bWF4T3V0cHV0U2l6ZTppLGlvdVRocmVzaG9sZDphLHNjb3JlVGhyZXNob2xkOmwscGFkVG9NYXhPdXRwdXRTaXplOmN9PXM7RGUociwiTm9uTWF4U3VwcHJlc3Npb25QYWRkZWQiKTtjb25zdCBoPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxwPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyx7c2VsZWN0ZWRJbmRpY2VzOmYsdmFsaWRPdXRwdXRzOmd9PSRLKGgscCxpLGEsbCxjKTtyZXR1cm5bdC5tYWtlVGVuc29ySW5mbyhbZi5sZW5ndGhdLCJpbnQzMiIsbmV3IEludDMyQXJyYXkoZikpLHQubWFrZVRlbnNvckluZm8oW10sImludDMyIixuZXcgSW50MzJBcnJheShbZ10pKV19Y29uc3QgVEs9e2tlcm5lbE5hbWU6T20sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpJS307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRUs9VWc7ZnVuY3Rpb24gUksobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2JveGVzOnIsc2NvcmVzOm99PWUse21heE91dHB1dFNpemU6aSxpb3VUaHJlc2hvbGQ6YSxzY29yZVRocmVzaG9sZDpsLHNvZnRObXNTaWdtYTpjfT1zO0RlKHIsIk5vbk1heFN1cHByZXNzaW9uV2l0aFNjb3JlIik7Y29uc3QgaD10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMscD10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMsZj1pLGc9YSx5PWwsdz1jLHtzZWxlY3RlZEluZGljZXM6YixzZWxlY3RlZFNjb3Jlczp2fT1FSyhoLHAsZixnLHksdyk7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oW2IubGVuZ3RoXSwiaW50MzIiLG5ldyBJbnQzMkFycmF5KGIpKSx0Lm1ha2VUZW5zb3JJbmZvKFt2Lmxlbmd0aF0sImZsb2F0MzIiLG5ldyBGbG9hdDMyQXJyYXkodikpXX1jb25zdCBESz17a2VybmVsTmFtZTpGbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlJLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBBSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7aW5kaWNlczpyfT1lLHtkdHlwZTpvLGRlcHRoOmksb25WYWx1ZTphLG9mZlZhbHVlOmx9PXM7RGUociwib25lSG90Iik7Y29uc3QgYz1jZShyLnNoYXBlKSxoPW5ldyBGbG9hdDMyQXJyYXkoYyppKTtoLmZpbGwobCk7Y29uc3QgcD10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXM7Zm9yKGxldCBmPTA7ZjxjOysrZilwW2ZdPj0wJiZwW2ZdPGkmJihoW2YqaStwW2ZdXT1hKTtyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhbLi4uci5zaGFwZSxpXSxvLGgpfWNvbnN0IF9LPXtrZXJuZWxOYW1lOlBkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6QUt9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHFmKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7eDpzfT1lO2lmKHMuZHR5cGU9PT0ic3RyaW5nIil0aHJvdyBuZXcgRXJyb3IoInplcm9zTGlrZSBpcyBub3Qgc3VwcG9ydGVkIGZvciBzdHJpbmcgdGVuc29ycyIpO2lmKHMuZHR5cGU9PT0iY29tcGxleDY0Iil7Y29uc3Qgcj1nYSh7aW5wdXRzOntpbnB1dDpzfSxiYWNrZW5kOnR9KSxvPXFmKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0fSksaT1ObCh7aW5wdXRzOntpbnB1dDpzfSxiYWNrZW5kOnR9KSxhPXFmKHtpbnB1dHM6e3g6aX0sYmFja2VuZDp0fSksbD1icyh7aW5wdXRzOntyZWFsOm8saW1hZzphfSxiYWNrZW5kOnR9KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhyKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKG8pLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaSksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhhKSxsfWVsc2UgcmV0dXJuIGx2KHtiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOnMuc2hhcGUsdmFsdWU6MCxkdHlwZTpzLmR0eXBlfX0pfWNvbnN0IE9LPXtrZXJuZWxOYW1lOnRoLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6cWZ9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGxEKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7eDpzfT1lO2lmKHMuZHR5cGU9PT0ic3RyaW5nIil0aHJvdyBuZXcgRXJyb3IoIm9uZXNMaWtlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHN0cmluZyB0ZW5zb3JzIik7aWYocy5kdHlwZT09PSJjb21wbGV4NjQiKXtjb25zdCByPWdhKHtpbnB1dHM6e2lucHV0OnN9LGJhY2tlbmQ6dH0pLG89bEQoe2lucHV0czp7eDpyfSxiYWNrZW5kOnR9KSxpPU5sKHtpbnB1dHM6e2lucHV0OnN9LGJhY2tlbmQ6dH0pLGE9cWYoe2lucHV0czp7eDppfSxiYWNrZW5kOnR9KSxsPWJzKHtpbnB1dHM6e3JlYWw6byxpbWFnOmF9LGJhY2tlbmQ6dH0pO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHIpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8obyksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhpKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGEpLGx9ZWxzZSByZXR1cm4gbHYoe2JhY2tlbmQ6dCxhdHRyczp7c2hhcGU6cy5zaGFwZSx2YWx1ZToxLGR0eXBlOnMuZHR5cGV9fSl9Y29uc3QgRks9e2tlcm5lbE5hbWU6TGQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpsRH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdUQobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2F4aXM6cn09cztpZihlLmxlbmd0aD09PTEpcmV0dXJuIEhmKHtpbnB1dHM6e2lucHV0OmVbMF19LGJhY2tlbmQ6dCxhdHRyczp7ZGltOnJ9fSk7Y29uc3Qgbz1lWzBdLnNoYXBlLGk9ZVswXS5kdHlwZTtlLmZvckVhY2goaD0+e05uKG8saC5zaGFwZSwiQWxsIHRlbnNvcnMgcGFzc2VkIHRvIHN0YWNrIG11c3QgaGF2ZSBtYXRjaGluZyBzaGFwZXMiKSxBKGk9PT1oLmR0eXBlLCgpPT4iQWxsIHRlbnNvcnMgcGFzc2VkIHRvIHN0YWNrIG11c3QgaGF2ZSBtYXRjaGluZyBkdHlwZXMiKX0pO2NvbnN0IGE9W10sbD1lLm1hcChoPT57Y29uc3QgcD1IZih7aW5wdXRzOntpbnB1dDpofSxiYWNrZW5kOnQsYXR0cnM6e2RpbTpyfX0pO3JldHVybiBhLnB1c2gocCkscH0pLGM9a2woe2lucHV0czpsLGJhY2tlbmQ6dCxhdHRyczp7YXhpczpyfX0pO3JldHVybiBhLmZvckVhY2goaD0+dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhoKSksY31jb25zdCBMSz17a2VybmVsTmFtZTp6ZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnVEfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBQSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtwYWRkaW5nczpvLGNvbnN0YW50VmFsdWU6aX09cztEZShyLCJwYWQiKTtjb25zdCBhPW8ubWFwKChTLCQpPT5TWzBdK3Iuc2hhcGVbJF0rU1sxXSksbD1vLm1hcChTPT5TWzBdKSxjPXQuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxoPWNlKHIuc2hhcGUpLHA9ci5zaGFwZS5sZW5ndGgsZj16ZShyLnNoYXBlKSxnPWNlKGEpLHk9YS5sZW5ndGgsdz16ZShhKSxiPWhuKHIuZHR5cGUsZyk7aSE9PTAmJmIuZmlsbChpKTtmb3IobGV0IFM9MDtTPGg7UysrKXtjb25zdCBrPXZhKFMscCxmKS5tYXAoKEQsTCk9PkQrbFtMXSksVD1icihrLHksdyk7YltUXT1jW1NdfXJldHVybntkYXRhSWQ6dC53cml0ZShiLGEsci5kdHlwZSksc2hhcGU6YSxkdHlwZTpyLmR0eXBlfX1jb25zdCBjRD17a2VybmVsTmFtZTpNZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlBLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB6Sz1IdCgobixlKT0+TWF0aC5wb3cobixlKSksTUs9b24oc3UsekspLEJLPXtrZXJuZWxOYW1lOnN1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6TUt9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFZLKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtwYXJhbXNOZXN0ZWRTcGxpdHM6cixwYXJhbXNEZW5zZVZhbHVlczpvLGluZGljZXM6aX09ZSx7b3V0cHV0UmFnZ2VkUmFuazphfT1zLGw9ci5tYXAodj0+dC5kYXRhLmdldCh2LmRhdGFJZCkudmFsdWVzKSxjPXIubWFwKHY9PnYuc2hhcGUpLGg9dC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzLHA9dC5kYXRhLmdldChpLmRhdGFJZCkudmFsdWVzLFtmLGcseV09RVIobCxjLGgsby5zaGFwZSxvLmR0eXBlLHAsaS5zaGFwZSksdz1mLm1hcCh2PT50Lm1ha2VUZW5zb3JJbmZvKFt2Lmxlbmd0aF0sImludDMyIix2KSksYj10Lm1ha2VUZW5zb3JJbmZvKHksby5kdHlwZSxnKTtyZXR1cm4gdy5jb25jYXQoW2JdKX1jb25zdCBXSz17a2VybmVsTmFtZTpMbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlZLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBVSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se3N0YXJ0czpzLGxpbWl0czpyLGRlbHRhczpvfT1lLGk9dC5kYXRhLmdldChzLmRhdGFJZCkudmFsdWVzLGE9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLGw9dC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzLFtjLGhdPVJSKGkscy5zaGFwZSxzLmR0eXBlLGEsci5zaGFwZSxsLG8uc2hhcGUpLHA9dC5tYWtlVGVuc29ySW5mbyhbYy5sZW5ndGhdLCJpbnQzMiIsYyksZj10Lm1ha2VUZW5zb3JJbmZvKFtoLmxlbmd0aF0scy5kdHlwZSxoKTtyZXR1cm5bcCxmXX1jb25zdCBqSz17a2VybmVsTmFtZTpQbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlVLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBHSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7c2hhcGU6cix2YWx1ZXM6byxkZWZhdWx0VmFsdWU6aSxyb3dQYXJ0aXRpb25UZW5zb3JzOmF9PWUse3Jvd1BhcnRpdGlvblR5cGVzOmx9PXMsYz10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsaD10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMscD10LmRhdGEuZ2V0KGkuZGF0YUlkKS52YWx1ZXMsZj1hLm1hcChiPT50LmRhdGEuZ2V0KGIuZGF0YUlkKS52YWx1ZXMpLGc9YS5tYXAoYj0+Yi5zaGFwZSksW3ksd109RFIoYyxyLnNoYXBlLGgsby5zaGFwZSxvLmR0eXBlLHAsaS5zaGFwZSxmLGcsbCk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oeSxvLmR0eXBlLHcpfWNvbnN0IEhLPXtrZXJuZWxOYW1lOnptLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6R0t9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHFLKG4pe2NvbnN0e2JhY2tlbmQ6ZSxhdHRyczp0fT1uLHtzdGFydDpzLHN0b3A6cixkdHlwZTpvLHN0ZXA6aX09dCxhPUFSKHMscixpLG8pO3JldHVybiBlLm1ha2VUZW5zb3JJbmZvKFthLmxlbmd0aF0sbyxhKX1jb25zdCBLSz17a2VybmVsTmFtZTpNbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnFLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFhLPW10KHJ1LG49PjEvbiksWUs9e2tlcm5lbE5hbWU6cnUsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpYS307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUUsobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2ltYWdlczpyfT1lLHthbGlnbkNvcm5lcnM6byxoYWxmUGl4ZWxDZW50ZXJzOmksc2l6ZTphfT1zO0RlKHIsInJlc2l6ZUJpbGluZWFyIik7Y29uc3QgbD16ZShyLnNoYXBlKSxbYyxoXT1hLFtwLGYsZyx5XT1yLnNoYXBlLHc9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLGI9bmV3IEZsb2F0MzJBcnJheShjZShbcCxjLGgseV0pKSx2PVtvJiZjPjE/Zi0xOmYsbyYmaD4xP2ctMTpnXSxTPVtvJiZjPjE/Yy0xOmMsbyYmaD4xP2gtMTpoXTtsZXQgJD0wO2NvbnN0IGs9dlswXS9TWzBdLFQ9dlsxXS9TWzFdO2ZvcihsZXQgRD0wO0Q8cDtEKyspZm9yKGxldCBMPTA7TDxjO0wrKyl7bGV0IHo7aT96PWsqKEwrLjUpLS41Ono9aypMO2NvbnN0IEY9TWF0aC5tYXgoMCxNYXRoLmZsb29yKHopKSxfPXotRixFPU1hdGgubWluKGYtMSxNYXRoLmNlaWwoeikpLE09RCpsWzBdK0YqbFsxXSxVPUQqbFswXStFKmxbMV07Zm9yKGxldCBZPTA7WTxoO1krKyl7bGV0IFE7aT9RPVQqKFkrLjUpLS41OlE9VCpZO2NvbnN0IG5lPU1hdGgubWF4KDAsTWF0aC5mbG9vcihRKSksc2U9US1uZSxWPU1hdGgubWluKGctMSxNYXRoLmNlaWwoUSkpLEs9TStuZSpsWzJdLHE9VStuZSpsWzJdLEI9TStWKmxbMl0sSD1VK1YqbFsyXTtmb3IobGV0IGllPTA7aWU8eTtpZSsrKXtjb25zdCBwZT13W0sraWVdLGRlPXdbcStpZV0sZmU9d1tCK2llXSx3ZT13W0graWVdLHZlPXBlKyhmZS1wZSkqc2Usa2U9ZGUrKHdlLWRlKSpzZSxMZT12ZSsoa2UtdmUpKl87YlskKytdPUxlfX19cmV0dXJuIHQubWFrZVRlbnNvckluZm8oW3AsYyxoLHldLCJmbG9hdDMyIixiKX1jb25zdCBaSz17a2VybmVsTmFtZTpqZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlFLfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBKSyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7aW1hZ2VzOnIsZHk6b309ZSx7YWxpZ25Db3JuZXJzOml9PXM7RGUoW28scl0sInJlc2l6ZUJpbGluZWFyR3JhZCIpO2NvbnN0IGE9emUoci5zaGFwZSksW2wsYyxoLHBdPXIuc2hhcGUsWyxmLGddPW8uc2hhcGUseT1uZXcgRmxvYXQzMkFycmF5KGwqYypoKnApLHc9W2kmJmY+MT9jLTE6YyxpJiZnPjE/aC0xOmhdLGI9W2kmJmY+MT9mLTE6ZixpJiZnPjE/Zy0xOmddLHY9d1swXS9iWzBdLFM9d1sxXS9iWzFdLCQ9dC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzO2xldCBrPTA7Zm9yKGxldCBUPTA7VDxsO1QrKyl7Y29uc3QgRD1UKmFbMF07Zm9yKGxldCBMPTA7TDxmO0wrKyl7Y29uc3Qgej1MKnYsRj1NYXRoLmZsb29yKHopLF89TWF0aC5taW4oTWF0aC5jZWlsKHopLGMtMSksRT1EK0YqYVsxXSxNPUQrXyphWzFdLFU9ei1GLFk9MS1VO2ZvcihsZXQgUT0wO1E8ZztRKyspe2NvbnN0IG5lPVEqUyxzZT1NYXRoLmZsb29yKG5lKSxWPU1hdGgubWluKE1hdGguY2VpbChuZSksaC0xKSxLPW5lLXNlLHE9MS1LLEI9RStzZSphWzJdLEg9RStWKmFbMl0saWU9TStzZSphWzJdLHBlPU0rViphWzJdLGRlPVkqcSxmZT1ZKkssd2U9VSpxLHZlPVUqSztmb3IobGV0IGtlPTA7a2U8cDtrZSsrKXtjb25zdCBMZT0kW2srK107eVtCK2tlXSs9TGUqZGUseVtIK2tlXSs9TGUqZmUseVtpZStrZV0rPUxlKndlLHlbcGUra2VdKz1MZSp2ZX19fX1yZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhbbCxoLGMscF0sImZsb2F0MzIiLHkpfWNvbnN0IGU3PXtrZXJuZWxOYW1lOldtLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6Skt9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHQ3KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtpbWFnZXM6cn09ZSx7YWxpZ25Db3JuZXJzOm8saGFsZlBpeGVsQ2VudGVyczppLHNpemU6YX09cztEZShyLCJyZXNpemVOZWFyZXN0TmVpZ2hib3IiKTtjb25zdCBsPXplKHIuc2hhcGUpLFtjLGhdPWEsW3AsZixnLHldPXIuc2hhcGUsdz10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsYj1uZXcgRmxvYXQzMkFycmF5KHAqYypoKnkpLHY9W28mJmM+MT9mLTE6ZixvJiZoPjE/Zy0xOmddLFM9W28mJmM+MT9jLTE6YyxvJiZoPjE/aC0xOmhdLCQ9dlswXS9TWzBdLGs9dlsxXS9TWzFdO2xldCBUPTA7Zm9yKGxldCBEPTA7RDxwO0QrKyl7Y29uc3QgTD1EKmxbMF07Zm9yKGxldCB6PTA7ejxjO3orKyl7Y29uc3QgRj1pPyQqKHorLjUpOiQqejtsZXQgXz1NYXRoLm1pbihmLTEsbz9NYXRoLnJvdW5kKEYpOk1hdGguZmxvb3IoRikpO2kmJihfPU1hdGgubWF4KDAsXykpO2NvbnN0IEU9TCtfKmxbMV07Zm9yKGxldCBNPTA7TTxoO00rKyl7Y29uc3QgVT1pP2sqKE0rLjUpOmsqTTtsZXQgWT1NYXRoLm1pbihnLTEsbz9NYXRoLnJvdW5kKFUpOk1hdGguZmxvb3IoVSkpO2kmJihZPU1hdGgubWF4KDAsWSkpO2NvbnN0IFE9RStZKmxbMl07Zm9yKGxldCBuZT0wO25lPHk7bmUrKyl7Y29uc3Qgc2U9d1tRK25lXTtiW1QrK109c2V9fX19cmV0dXJuIHQubWFrZVRlbnNvckluZm8oW3AsYyxoLHldLHIuZHR5cGUsYil9Y29uc3Qgbjc9e2tlcm5lbE5hbWU6VWQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp0N307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gczcobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2ltYWdlczpyLGR5Om99PWUse2FsaWduQ29ybmVyczppfT1zO0RlKFtvLHJdLCJyZXNpemVOZWFyZXN0TmVpZ2hib3JHcmFkIik7Y29uc3QgYT16ZShyLnNoYXBlKSxsPXplKG8uc2hhcGUpLFtjLGgscCxmXT1yLnNoYXBlLFssZyx5XT1vLnNoYXBlLHc9bmV3IEZsb2F0MzJBcnJheShjKmgqcCpmKSxiPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyx2PVtpJiZnPjE/aC0xOmgsaSYmeT4xP3AtMTpwXSxTPVtpJiZnPjE/Zy0xOmcsaSYmeT4xP3ktMTp5XSwkPXZbMF0vU1swXSxrPXZbMV0vU1sxXSxUPTEvJCxEPTEvayxMPU1hdGguY2VpbChUKSoyKzIsej1NYXRoLmNlaWwoRCkqMisyO2ZvcihsZXQgRj0wO0Y8YztGKyspe2NvbnN0IF89RiphWzBdO2ZvcihsZXQgRT0wO0U8aDtFKyspe2NvbnN0IE09XytFKmFbMV0sVT1NYXRoLmZsb29yKEUqVCksWT1NYXRoLmZsb29yKFUtTC8yKTtmb3IobGV0IFE9MDtRPHA7USsrKXtjb25zdCBuZT1NK1EqYVsyXSxzZT1NYXRoLmZsb29yKFEqRCksVj1NYXRoLmZsb29yKHNlLXovMik7Zm9yKGxldCBLPTA7SzxmO0srKyl7bGV0IHE9MDtmb3IobGV0IEI9MDtCPEw7QisrKXtjb25zdCBIPUIrWTtpZihIPDB8fEg+PWcpY29udGludWU7Y29uc3QgaWU9XytIKmxbMV0scGU9SCokLGRlPU1hdGgubWluKGgtMSxpP01hdGgucm91bmQocGUpOk1hdGguZmxvb3IocGUpKTtpZihFPT09ZGUpZm9yKGxldCBmZT0wO2ZlPHo7ZmUrKyl7Y29uc3Qgd2U9ZmUrVjtpZih3ZTwwfHx3ZT49eSljb250aW51ZTtjb25zdCB2ZT1pZSt3ZSpsWzJdLGtlPXdlKmssTGU9TWF0aC5taW4ocC0xLGk/TWF0aC5yb3VuZChrZSk6TWF0aC5mbG9vcihrZSkpO1E9PT1MZSYmKHErPWJbdmUrS10pfX13W25lK0tdPXF9fX19cmV0dXJuIHQubWFrZVRlbnNvckluZm8oci5zaGFwZSxyLmR0eXBlLHcpfWNvbnN0IHI3PXtrZXJuZWxOYW1lOlZtLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6czd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG83KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2RpbXM6b309cztEZShyLCJyZXZlcnNlIik7Y29uc3QgaT1yLnNoYXBlLmxlbmd0aCxhPVFlKG8sci5zaGFwZSk7aWYoaT09PTApcmV0dXJuIFlyKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0fSk7Y29uc3QgbD1uZXcgUXQoci5zaGFwZSxyLmR0eXBlKSxjPXQuYnVmZmVyU3luYyhyKTtmb3IobGV0IGg9MDtoPGwuc2l6ZTtoKyspe2NvbnN0IHA9bC5pbmRleFRvTG9jKGgpLGY9cC5zbGljZSgpO2EuZm9yRWFjaChnPT5mW2ddPXIuc2hhcGVbZ10tMS1mW2ddKSxsLnNldChjLmdldCguLi5mKSwuLi5wKX1yZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhsLnNoYXBlLGwuZHR5cGUsbC52YWx1ZXMpfWNvbnN0IGk3PXtrZXJuZWxOYW1lOkdkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6bzd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGE3PXtrZXJuZWxOYW1lOm9nLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6KHtpbnB1dHM6bixhdHRyczplLGJhY2tlbmQ6dH0pPT57Y29uc3R7aW1hZ2U6c309bix7cmFkaWFuczpyLGZpbGxWYWx1ZTpvLGNlbnRlcjppfT1lLGE9dCxsPWhuKHMuZHR5cGUsY2Uocy5zaGFwZSkpLFtjLGgscCxmXT1zLnNoYXBlLFtnLHldPWh3KGksaCxwKSx3PTI1NSxiPU1hdGguc2luKHIpLHY9TWF0aC5jb3MociksUz1hLmRhdGEuZ2V0KHMuZGF0YUlkKS52YWx1ZXM7Zm9yKGxldCBrPTA7azxjO2srKyl7Y29uc3QgVD1rKnAqaCpmO2ZvcihsZXQgRD0wO0Q8aDtEKyspe2NvbnN0IEw9RCoocCpmKTtmb3IobGV0IHo9MDt6PHA7eisrKXtjb25zdCBGPXoqZjtmb3IobGV0IF89MDtfPGY7XysrKXtjb25zdCBFPVtjLEQseixfXSxNPUVbMl0sVT1FWzFdO2xldCBZPShNLWcpKnYtKFUteSkqYixRPShNLWcpKmIrKFUteSkqdjtZPU1hdGgucm91bmQoWStnKSxRPU1hdGgucm91bmQoUSt5KTtsZXQgbmU9bztpZih0eXBlb2YgbyE9Im51bWJlciImJihfPT09Mz9uZT13Om5lPW9bX10pLFk+PTAmJlk8cCYmUT49MCYmUTxoKXtjb25zdCBWPVEqKHAqZiksSz1ZKmYscT1UK1YrSytfO25lPVNbcV19Y29uc3Qgc2U9VCtMK0YrXztsW3NlXT1uZX19fX1yZXR1cm57ZGF0YUlkOmEud3JpdGUobCxzLnNoYXBlLHMuZHR5cGUpLHNoYXBlOnMuc2hhcGUsZHR5cGU6cy5kdHlwZX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGw3PW10KGF1LG49Pntjb25zdCBlPU1hdGguZmxvb3Iobik7cmV0dXJuIG4tZTwuNT9NYXRoLmZsb29yKG4pOm4tZT4uNT9NYXRoLmNlaWwobik6ZSUyPT09MD9lOmUrMX0pLHU3PXtrZXJuZWxOYW1lOmF1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6bDd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGM3KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtpbmRpY2VzOnIsdXBkYXRlczpvfT1lLHtzaGFwZTppfT1zLHtzbGljZVJhbms6YSxudW1VcGRhdGVzOmwsc2xpY2VTaXplOmMsc3RyaWRlczpoLG91dHB1dFNpemU6cH09TmkobyxyLGkpLGY9ITAsZz10LmJ1ZmZlclN5bmMocikseT10LmJ1ZmZlclN5bmMobyksdz1aaShnLHksaSxwLGMsbCxhLGgsMCxmKTtyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhpLHcuZHR5cGUsdy52YWx1ZXMpfWNvbnN0IGQ3PXtrZXJuZWxOYW1lOlVtLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6Yzd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGg3KG4sZSl7bGV0IHQ9MCxzPW4ubGVuZ3RoLHI9MDtmb3IoO3Q8czspcj1NYXRoLmZsb29yKCh0K3MpLzIpLG5bcl08ZT90PXIrMTpzPXI7cmV0dXJuIHN9ZnVuY3Rpb24gcDcobixlKXtsZXQgdD0wLHM9bi5sZW5ndGgscj0wO2Zvcig7dDxzOylyPU1hdGguZmxvb3IoKHQrcykvMiksbltyXTw9ZT90PXIrMTpzPXI7cmV0dXJuIHN9ZnVuY3Rpb24gZjcobixlLHQscyxyLG8pe2NvbnN0IGk9TXQoImludDMyIix0KnIpO2ZvcihsZXQgYT0wO2E8dDsrK2Epe2NvbnN0IGw9bi5zbGljZShhKnMsKGErMSkqcyksYz1hKnI7Zm9yKGxldCBoPTA7aDxyOysraClpW2MraF09bz09PSJsZWZ0Ij9oNyhsLGVbaCtjXSk6cDcobCxlW2grY10pfXJldHVybiBpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG03KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtzb3J0ZWRTZXF1ZW5jZTpyLHZhbHVlczpvfT1lLHtzaWRlOml9PXMsYT10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsbD10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMsYz1mNyhhLGwsci5zaGFwZVswXSxyLnNoYXBlWzFdLG8uc2hhcGVbMV0saSk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oby5zaGFwZSwiaW50MzIiLGMpfWNvbnN0IGc3PXtrZXJuZWxOYW1lOkdtLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6bTd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHk3KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7Y29uZGl0aW9uOnMsdDpyLGU6b309ZTtEZShbcyxyLG9dLCJzZWxlY3QiKTtjb25zdCBpPXMuc2hhcGUubGVuZ3RoLGE9dC5kYXRhLmdldChzLmRhdGFJZCkudmFsdWVzLGw9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLGM9dC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzLGg9dHMoci5kdHlwZSxvLmR0eXBlKSxwPVNuKGNlKHIuc2hhcGUpLGgpO2xldCBmPTA7Y29uc3QgZz1pPT09MHx8aT4xfHxyLnNoYXBlLmxlbmd0aD09PTE/MTpjZShyLnNoYXBlLnNsaWNlKDEpKTtmb3IobGV0IHk9MDt5PGEubGVuZ3RoO3krKylmb3IobGV0IHc9MDt3PGc7dysrKWFbeV09PT0xP3BbZisrXT1sW3ldOnBbZisrXT1jW3ldO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKHIuc2hhcGUsaCxwKX1jb25zdCB4Nz17a2VybmVsTmFtZTpIZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOnk3fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGI3PUtnLHc3PVhnLHY3PW10KHV1LG49Pm4+PTA/dzcqbjpiNyooTWF0aC5leHAobiktMSkpLFM3PXtrZXJuZWxOYW1lOnV1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6djd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgTjc9bXQoaHUsbj0+bjwwPy0xOm4+MD8xOjApLGs3PXtrZXJuZWxOYW1lOmh1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6Tjd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgQzc9bXQoY3Usbj0+TWF0aC5zaW4obikpLCQ3PXtrZXJuZWxOYW1lOmN1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6Qzd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgSTc9bXQoZHUsbj0+TWF0aC5zaW5oKG4pKSxUNz17a2VybmVsTmFtZTpkdSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOkk3fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEU3PTExOTIwOTI4OTU1MDc4MTI1ZS0yMyxDQz1NYXRoLmxvZyhFNykrMixSNz1tdChmdSxuPT57Y29uc3QgZT1uPi1DQyx0PW48Q0Mscz1NYXRoLmV4cChuKTtsZXQgcjtyZXR1cm4gdD9yPXM6ZT9yPW46cj1NYXRoLmxvZygxK3MpLHJ9KSxENz17a2VybmVsTmFtZTpmdSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlI3fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBBNyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtibG9ja1NoYXBlOm8scGFkZGluZ3M6aX09cztEZShbcl0sInNwYWNlVG9CYXRjaE5EIik7Y29uc3QgYT1jZShvKSxsPVtbMCwwXV07bC5wdXNoKC4uLmkpO2ZvcihsZXQgRD0xK28ubGVuZ3RoO0Q8ci5zaGFwZS5sZW5ndGg7KytEKWwucHVzaChbMCwwXSk7Y29uc3QgYz1jRC5rZXJuZWxGdW5jKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntwYWRkaW5nczpsLGNvbnN0YW50VmFsdWU6MH19KSxoPVNoKGMuc2hhcGUsbyxhLCExKSxwPU5oKGgubGVuZ3RoLG8ubGVuZ3RoLCExKSxmPWtoKGMuc2hhcGUsbyxhLCExKSx3PWt0KHtpbnB1dHM6e3g6Y30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpofX0pLFM9aXMoe2lucHV0czp7eDp3fSxiYWNrZW5kOnQsYXR0cnM6e3Blcm06cH19KSxUPWt0KHtpbnB1dHM6e3g6U30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpmfX0pO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGMpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odyksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhTKSxUfWNvbnN0IF83PXtrZXJuZWxOYW1lOlhkLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6QTd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE83KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7aW5kaWNlczpzLHZhbHVlczpyLGRlbnNlU2hhcGU6byxkZWZhdWx0VmFsdWU6aX09ZTtpZihvLnNoYXBlLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKGBEZW5zZSBzaGFwZSBtdXN0IGJlIGEgdmVjdG9yLCBzYXc6CiAgICAgICAgJHtvLnNoYXBlfWApO2lmKHMuc2hhcGUubGVuZ3RoIT09Mil0aHJvdyBuZXcgRXJyb3IoYEluZGljZXMgbXVzdCBiZSBhIG1hdHJpeCwgc2F3OgogICAgICAgICR7cy5zaGFwZX1gKTtpZihyLnNoYXBlLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKGBWYWx1ZXMgbXVzdCBiZSBhIHZlY3Rvciwgc2F3OgogICAgICAgICR7ci5zaGFwZX1gKTtpZihpLnNoYXBlLmxlbmd0aCE9PTApdGhyb3cgbmV3IEVycm9yKGBEZWZhdWx0IHZhbHVlIG11c3QgYmUgYSBzY2FsYXIsIHNhdzoKICAgICAgICAke2kuc2hhcGV9YCk7Y29uc3QgYT10LmRhdGEuZ2V0KHMuZGF0YUlkKS52YWx1ZXMsbD10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsYz10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMsaD10LmRhdGEuZ2V0KGkuZGF0YUlkKS52YWx1ZXNbMF0sW3AsZixnLHksd109TFIoYSxzLnNoYXBlLHMuZHR5cGUsbCxyLmR0eXBlLGMsaCk7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oZixzLmR0eXBlLHApLHQubWFrZVRlbnNvckluZm8oW2ZbMF1dLHIuZHR5cGUsZyksdC5tYWtlVGVuc29ySW5mbyhbeS5sZW5ndGhdLCJib29sIixuZXcgVWludDhBcnJheSh5Lm1hcChiPT5OdW1iZXIoYikpKSksdC5tYWtlVGVuc29ySW5mbyhbdy5sZW5ndGhdLHMuZHR5cGUsbmV3IEludDMyQXJyYXkodykpXX1jb25zdCBGNz17a2VybmVsTmFtZTpIbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOk83fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBMNyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se2lucHV0SW5kaWNlczpzLGlucHV0U2hhcGU6cixuZXdTaGFwZTpvfT1lO2lmKHMuc2hhcGUubGVuZ3RoIT09Mil0aHJvdyBuZXcgRXJyb3IoYElucHV0IGluZGljZXMgc2hvdWxkIGJlIGEgbWF0cml4IGJ1dCByZWNlaXZlZCBzaGFwZQogICAgICAgICR7cy5zaGFwZX1gKTtpZihyLnNoYXBlLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKGBJbnB1dCBzaGFwZSBzaG91bGQgYmUgYSB2ZWN0b3IgYnV0IHJlY2VpdmVkIHNoYXBlCiAgICAgICAgJHtyLnNoYXBlfWApO2lmKG8uc2hhcGUubGVuZ3RoIT09MSl0aHJvdyBuZXcgRXJyb3IoYFRhcmdldCBzaGFwZSBzaG91bGQgYmUgYSB2ZWN0b3IgYnV0IHJlY2VpdmVkIHNoYXBlICR7by5zaGFwZX1gKTtjb25zdCBpPUFycmF5LmZyb20odC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzKSxhPXQuZGF0YS5nZXQocy5kYXRhSWQpLnZhbHVlcyxsPUFycmF5LmZyb20odC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzKSxbYyxoLHBdPVBSKGEscy5zaGFwZSxzLmR0eXBlLGksbCk7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oaCxzLmR0eXBlLGMpLHQubWFrZVRlbnNvckluZm8oW3AubGVuZ3RoXSxvLmR0eXBlLG5ldyBJbnQzMkFycmF5KHApKV19Y29uc3QgUDc9e2tlcm5lbE5hbWU6cW0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpMN307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gejcobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtkYXRhOnMsaW5kaWNlczpyLHNlZ21lbnRJZHM6b309ZTtpZihzLnNoYXBlLmxlbmd0aDwxKXRocm93IG5ldyBFcnJvcigiRGF0YSBzaG91bGQgYmUgYXQgbGVhc3QgMSBkaW1lbnNpb25hbCBidXQgcmVjZWl2ZWQgc2NhbGFyIik7aWYoci5zaGFwZS5sZW5ndGghPT0xKXRocm93IG5ldyBFcnJvcihgSW5kaWNlcyBzaG91bGQgYmUgYSB2ZWN0b3IgYnV0IHJlY2VpdmVkIHNoYXBlCiAgICAgICAgICAke3Iuc2hhcGV9YCk7aWYoby5zaGFwZS5sZW5ndGghPT0xKXRocm93IG5ldyBFcnJvcihgU2VnbWVudCBpZHMgc2hvdWxkIGJlIGEgdmVjdG9yIGJ1dCByZWNlaXZlZCBzaGFwZQogICAgICAgICAgJHtvLnNoYXBlfWApO2lmKHIuc2hhcGVbMF0hPT1vLnNoYXBlWzBdKXRocm93IG5ldyBFcnJvcigic2VnbWVudElkcyBhbmQgaW5kaWNlcyBzaG91bGQgaGF2ZSBzYW1lIHNpemUuIik7Y29uc3QgaT10LmRhdGEuZ2V0KHMuZGF0YUlkKS52YWx1ZXMsYT10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsbD10LmRhdGEuZ2V0KG8uZGF0YUlkKS52YWx1ZXMsW2MsaF09cnYoaSxzLnNoYXBlLHMuZHR5cGUsYSxsLCEwKTtyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhoLHMuZHR5cGUsYyl9Y29uc3QgTTc9e2tlcm5lbE5hbWU6S20sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp6N307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQjcobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtkYXRhOnMsaW5kaWNlczpyLHNlZ21lbnRJZHM6b309ZTtpZihzLnNoYXBlLmxlbmd0aDwxKXRocm93IG5ldyBFcnJvcigiRGF0YSBzaG91bGQgYmUgYXQgbGVhc3QgMSBkaW1lbnNpb25hbCBidXQgcmVjZWl2ZWQgc2NhbGFyIik7aWYoci5zaGFwZS5sZW5ndGghPT0xKXRocm93IG5ldyBFcnJvcihgSW5kaWNlcyBzaG91bGQgYmUgYSB2ZWN0b3IgYnV0IHJlY2VpdmVkIHNoYXBlCiAgICAgICAgICR7ci5zaGFwZX1gKTtpZihvLnNoYXBlLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKGBTZWdtZW50IGlkcyBzaG91bGQgYmUgYSB2ZWN0b3IgYnV0IHJlY2VpdmVkIHNoYXBlCiAgICAgICAgICR7by5zaGFwZX1gKTtpZihyLnNoYXBlWzBdIT09by5zaGFwZVswXSl0aHJvdyBuZXcgRXJyb3IoInNlZ21lbnRJZHMgYW5kIGluZGljZXMgc2hvdWxkIGhhdmUgc2FtZSBzaXplLiIpO2NvbnN0IGk9dC5kYXRhLmdldChzLmRhdGFJZCkudmFsdWVzLGE9dC5kYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLGw9dC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzLFtjLGhdPXJ2KGkscy5zaGFwZSxzLmR0eXBlLGEsbCk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oaCxzLmR0eXBlLGMpfWNvbnN0IFY3PXtrZXJuZWxOYW1lOlhtLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6Qjd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFc3KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtzcGFyc2VJbmRpY2VzOnIsc3BhcnNlVmFsdWVzOm8sZGVmYXVsdFZhbHVlOml9PWUse291dHB1dFNoYXBlOmF9PXMse3NsaWNlUmFuazpsLG51bVVwZGF0ZXM6YyxzbGljZVNpemU6aCxzdHJpZGVzOnAsb3V0cHV0U2l6ZTpmfT1OaShvLHIsYSksZz0hMSx5PXQuYnVmZmVyU3luYyhyKTtsZXQgdztzd2l0Y2goby5kdHlwZSl7Y2FzZSJib29sIjp7Y29uc3QgYj10LmJ1ZmZlclN5bmMobyksdj0hIXQuZGF0YS5nZXQoaS5kYXRhSWQpLnZhbHVlc1swXTt3PVppKHksYixhLGYsaCxjLGwscCx2LGcpO2JyZWFrfWNhc2UiZmxvYXQzMiI6e2NvbnN0IGI9dC5idWZmZXJTeW5jKG8pLHY9dC5kYXRhLmdldChpLmRhdGFJZCkudmFsdWVzWzBdO3c9WmkoeSxiLGEsZixoLGMsbCxwLHYsZyk7YnJlYWt9Y2FzZSJpbnQzMiI6e2NvbnN0IGI9dC5idWZmZXJTeW5jKG8pLHY9dC5kYXRhLmdldChpLmRhdGFJZCkudmFsdWVzWzBdO3c9WmkoeSxiLGEsZixoLGMsbCxwLHYsZyk7YnJlYWt9Y2FzZSJzdHJpbmciOntjb25zdCBiPXQuYnVmZmVyU3luYyhvKSx2PWdvKHQuZGF0YS5nZXQoaS5kYXRhSWQpLnZhbHVlc1swXSk7dz1aaSh5LGIsYSxmLGgsYyxsLHAsdixnKTticmVha31kZWZhdWx0OnRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgdHlwZSAke28uZHR5cGV9YCl9cmV0dXJuIHQubWFrZVRlbnNvckluZm8oYSx3LmR0eXBlLHcudmFsdWVzKX1jb25zdCBVNz17a2VybmVsTmFtZTpZbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOlc3fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBqNyhuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtudW1PclNpemVTcGxpdHM6byxheGlzOml9PXMsYT1RZShpLHIuc2hhcGUpWzBdLGw9SXcocixvLGEpLGM9bmV3IEFycmF5KHIuc2hhcGUubGVuZ3RoKS5maWxsKDApLGg9ci5zaGFwZS5zbGljZSgpO3JldHVybiBsLm1hcChwPT57Y29uc3QgZj1bLi4uaF07ZlthXT1wO2NvbnN0IGc9eWEoe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e2JlZ2luOmMsc2l6ZTpmfX0pO3JldHVybiBjW2FdKz1wLGd9KX1jb25zdCBHNz17a2VybmVsTmFtZTpZZCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOmo3fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBINz17a2VybmVsTmFtZTpRbSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOih7aW5wdXRzOm4sYmFja2VuZDplfSk9Pntjb25zdHt4OnR9PW4scz1lO0RlKHQsInNxdWFyZSIpO2NvbnN0IHI9cy5kYXRhLmdldCh0LmRhdGFJZCkudmFsdWVzLG89bmV3IEZsb2F0MzJBcnJheShyLmxlbmd0aCk7Zm9yKGxldCBhPTA7YTxyLmxlbmd0aDsrK2Epe2NvbnN0IGw9clthXTtvW2FdPWwqbH1yZXR1cm57ZGF0YUlkOnMud3JpdGUobyx0LnNoYXBlLHQuZHR5cGUpLHNoYXBlOnQuc2hhcGUsZHR5cGU6dC5kdHlwZX19fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHE3PW10KHZ1LChuLGUpPT57Y29uc3QgdD1lO3JldHVybiBpc05hTihuKT9OYU46bj4wPzE6dC5hbHBoYX0pLEs3PXtrZXJuZWxOYW1lOnZ1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6cTd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFg3KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2JlZ2luOm8sZW5kOmksc3RyaWRlczphLGJlZ2luTWFzazpsLGVuZE1hc2s6YyxlbGxpcHNpc01hc2s6aCxuZXdBeGlzTWFzazpwLHNocmlua0F4aXNNYXNrOmZ9PXM7RGUociwic3RyaWRlZFNsaWNlIik7Y29uc3R7ZmluYWxTaGFwZVNwYXJzZTpnLGZpbmFsU2hhcGU6eSxpc0lkZW50aXR5Oncsc2xpY2VEaW0wOmIsaXNTaW1wbGVTbGljZTp2LGJlZ2luOlMsZW5kOiQsc3RyaWRlczprfT1sdyhyLnNoYXBlLG8saSxhLGwsYyxoLHAsZik7bGV0IFQ7aWYodylUPWt0KHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTp5fX0pO2Vsc2UgaWYoYnx8dil7QShyLnNoYXBlLmxlbmd0aD49MSwoKT0+YElucHV0IG11c3QgaGF2ZSByYW5rIGF0IGxlYXN0IDEsIGdvdDogJHtyLnNoYXBlLmxlbmd0aH1gKTtjb25zdCBEPW93KFMsJCxrKSxMPXlhKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntiZWdpbjpTLHNpemU6RH19KTtUPWt0KHtpbnB1dHM6e3g6TH0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTp5fX0pLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oTCl9ZWxzZXtjb25zdCBEPXQuYnVmZmVyU3luYyhyKSxMPUJSKGcsRCxrLFMpO1Q9dC5tYWtlVGVuc29ySW5mbyh5LEwuZHR5cGUsTC52YWx1ZXMpfXJldHVybiBUfWNvbnN0IFk3PXtrZXJuZWxOYW1lOlptLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6WDd9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFE3KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtzZXBhcmF0b3I6cixuR3JhbVdpZHRoczpvLGxlZnRQYWQ6aSxyaWdodFBhZDphLHBhZFdpZHRoOmwscHJlc2VydmVTaG9ydFNlcXVlbmNlczpjfT1zLHtkYXRhOmgsZGF0YVNwbGl0czpwfT1lLGY9dC5kYXRhLmdldChoLmRhdGFJZCkudmFsdWVzLGc9dC5kYXRhLmdldChwLmRhdGFJZCkudmFsdWVzLFt5LHddPVZSKGYsZyxyLG8saSxhLGwsYyk7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oW3kubGVuZ3RoXSwic3RyaW5nIix5KSx0Lm1ha2VUZW5zb3JJbmZvKHAuc2hhcGUsImludDMyIix3KV19Y29uc3QgWjc9e2tlcm5lbE5hbWU6Sm0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpRN307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gSjcobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3NraXBFbXB0eTpyfT1zLHtpbnB1dDpvLGRlbGltaXRlcjppfT1lO2lmKG8uZHR5cGUhPT0ic3RyaW5nIil0aHJvdyBuZXcgRXJyb3IoIklucHV0IG11c3QgYmUgb2YgZGF0YXR5cGUgc3RyaW5nIik7aWYoby5zaGFwZS5sZW5ndGghPT0xKXRocm93IG5ldyBFcnJvcihgSW5wdXQgbXVzdCBiZSBhIHZlY3RvciwgZ290IHNoYXBlOiAke28uc2hhcGV9YCk7aWYoaS5zaGFwZS5sZW5ndGghPT0wKXRocm93IG5ldyBFcnJvcihgRGVsaW1pdGVyIG11c3QgYmUgYSBzY2FsYXIsIGdvdCBzaGFwZTogJHtpLnNoYXBlfWApO2NvbnN0IGE9dC5kYXRhLmdldChvLmRhdGFJZCkudmFsdWVzLGw9dC5kYXRhLmdldChpLmRhdGFJZCkudmFsdWVzWzBdLFtjLGgscF09V1IoYSxsLHIpLGY9aC5sZW5ndGg7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oW2YsMl0sImludDMyIixjKSx0Lm1ha2VUZW5zb3JJbmZvKFtmXSwic3RyaW5nIixoKSx0Lm1ha2VUZW5zb3JJbmZvKFsyXSwiaW50MzIiLG5ldyBJbnQzMkFycmF5KHApKV19Y29uc3QgZVg9e2tlcm5lbE5hbWU6ZWcsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpKN307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdFgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se251bUJ1Y2tldHM6cn09cyx7aW5wdXQ6b309ZTtpZihvLmR0eXBlIT09InN0cmluZyIpdGhyb3cgbmV3IEVycm9yKCJJbnB1dCBtdXN0IGJlIG9mIGRhdGF0eXBlIHN0cmluZyIpO2lmKHI8PTApdGhyb3cgbmV3IEVycm9yKCJOdW1iZXIgb2YgYnVja2V0cyBtdXN0IGJlIGF0IGxlYXN0IDEiKTtjb25zdCBpPXQuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyxhPVVSKGkscik7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oby5zaGFwZSwiaW50MzIiLGEpfWNvbnN0IG5YPXtrZXJuZWxOYW1lOnRnLGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6dFh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgc1g9bXQoeHUsbj0+TWF0aC50YW4obikpLHJYPXtrZXJuZWxOYW1lOnh1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6c1h9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgTGljZW5zZSk7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qgb1g9bXQoYnUsbj0+TWF0aC50YW5oKG4pKSxpWD17a2VybmVsTmFtZTpidSxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOm9YfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBhWChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se3RlbnNvcjpzLGluZGljZXM6cix1cGRhdGVzOm99PWUse3NsaWNlUmFuazppLG51bVVwZGF0ZXM6YSxzbGljZVNpemU6bCxzdHJpZGVzOmMsb3V0cHV0U2l6ZTpofT1OaShvLHIscy5zaGFwZSkscD0hMSxmPXQuYnVmZmVyU3luYyhyKSxnPXQuYnVmZmVyU3luYyhvKSx5PXQuYnVmZmVyU3luYyhzKSx3PVppKGYsZyxzLnNoYXBlLGgsbCxhLGksYyx5LHApO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKHMuc2hhcGUsdy5kdHlwZSx3LnZhbHVlcyl9Y29uc3QgbFg9e2tlcm5lbE5hbWU6am0sYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzphWH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdVgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7cmVwczpvfT1zO0RlKHIsInRpbGUiKTtjb25zdCBpPUdSKHQuYnVmZmVyU3luYyhyKSxvKTtyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhpLnNoYXBlLGkuZHR5cGUsaS52YWx1ZXMpfWNvbnN0IGNYPXtrZXJuZWxOYW1lOnd1LGJhY2tlbmROYW1lOiJjcHUiLGtlcm5lbEZ1bmM6dVh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGRYKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2s6byxzb3J0ZWQ6aX09cztEZShyLCJ0b3BrIik7Y29uc3QgYT10LmRhdGEuZ2V0KHIuZGF0YUlkKS52YWx1ZXMsW2wsY109cVIoYSxyLnNoYXBlLHIuZHR5cGUsbyxpKTtyZXR1cm5bdC5tYWtlVGVuc29ySW5mbyhsLnNoYXBlLGwuZHR5cGUsbC52YWx1ZXMpLHQubWFrZVRlbnNvckluZm8oYy5zaGFwZSxjLmR0eXBlLGMudmFsdWVzKV19Y29uc3QgaFg9e2tlcm5lbE5hbWU6bmcsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpkWH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcFgobil7Y29uc3R7aW5wdXRzOmUsYXR0cnM6dCxiYWNrZW5kOnN9PW4se2ltYWdlOnIsdHJhbnNmb3JtczpvfT1lLHtpbnRlcnBvbGF0aW9uOmksZmlsbE1vZGU6YSxmaWxsVmFsdWU6bCxvdXRwdXRTaGFwZTpjfT10LFtoLHAsZixnXT1yLnNoYXBlLFt5LHddPWM/P1twLGZdLGI9W2gseSx3LGddLHY9emUoci5zaGFwZSksUz12WzBdLCQ9dlsxXSxrPXZbMl0sVD16ZShiKSxEPVRbMF0sTD1UWzFdLHo9VFsyXSxGPWhuKHIuZHR5cGUsY2UoYikpO0YuZmlsbChsKTtjb25zdCBfPXMuZGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxFPXMuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcztmb3IobGV0IFU9MDtVPGg7KytVKXtjb25zdCBZPW8uc2hhcGVbMF09PT0xP0U6RS5zdWJhcnJheShVKjgsVSo4KzgpO2ZvcihsZXQgUT0wO1E8eTsrK1EpZm9yKGxldCBuZT0wO25lPHc7KytuZSlmb3IobGV0IHNlPTA7c2U8ZzsrK3NlKXtsZXQgVjtjb25zdCBLPVlbNl0qbmUrWVs3XSpRKzE7aWYoSz09PTApY29udGludWU7Y29uc3QgcT0oWVswXSpuZStZWzFdKlErWVsyXSkvSyxCPShZWzNdKm5lK1lbNF0qUStZWzVdKS9LLEg9JEMocSxmLGEpLGllPSRDKEIscCxhKTtzd2l0Y2goaSl7Y2FzZSJuZWFyZXN0IjpWPWJYKF8scCxmLFMsJCxrLFUsaWUsSCxzZSxsKTticmVhaztjYXNlImJpbGluZWFyIjpWPXdYKF8scCxmLFMsJCxrLFUsaWUsSCxzZSxsKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgRXJyb3IgaW4gVHJhbnNmb3JtOiBFeHBlY3QgJ25lYXJlc3QnIG9yICdiaWxpbmVhcicsIGJ1dCBnb3QgJHtpfWApfWNvbnN0IHBlPVUqRCtRKkwrbmUqeitzZTtGW3BlXT1WfXJldHVybiBzLm1ha2VUZW5zb3JJbmZvKGIsci5kdHlwZSxGKX1yZXR1cm57ZGF0YUlkOnMud3JpdGUoRixiLHIuZHR5cGUpLHNoYXBlOnIuc2hhcGUsZHR5cGU6ci5kdHlwZX19Y29uc3QgZlg9e2tlcm5lbE5hbWU6c2csYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpwWH07ZnVuY3Rpb24gJEMobixlLHQpe3N3aXRjaCh0KXtjYXNlInJlZmxlY3QiOnJldHVybiBtWChuLGUpO2Nhc2Uid3JhcCI6cmV0dXJuIGdYKG4sZSk7Y2FzZSJuZWFyZXN0IjpyZXR1cm4geFgobixlKTtjYXNlImNvbnN0YW50IjpkZWZhdWx0OnJldHVybiB5WChuKX19ZnVuY3Rpb24gbVgobixlKXtsZXQgdD1uO2lmKHQ8MClpZihlPD0xKXQ9MDtlbHNle2NvbnN0IHM9MiplO3Q8cyYmKHQ9cypNYXRoLnRydW5jKC10L3MpK3QpLHQ9dDwtZT90K3M6LXQtMX1lbHNlIGlmKHQ+ZS0xKWlmKGU8PTEpdD0wO2Vsc2V7Y29uc3Qgcz0yKmU7dC09cypNYXRoLnRydW5jKHQvcyksdD49ZSYmKHQ9cy10LTEpfXJldHVybiByaSgwLHQsZS0xKX1mdW5jdGlvbiBnWChuLGUpe2xldCB0PW47aWYodDwwKWlmKGU8PTEpdD0wO2Vsc2V7Y29uc3Qgcz1lLTE7dCs9ZSooTWF0aC50cnVuYygtdC9zKSsxKX1lbHNlIGlmKHQ+ZS0xKWlmKGU8PTEpdD0wO2Vsc2V7Y29uc3Qgcz1lLTE7dC09ZSpNYXRoLnRydW5jKHQvcyl9cmV0dXJuIHJpKDAsdCxlLTEpfWZ1bmN0aW9uIHlYKG4sZSl7cmV0dXJuIG59ZnVuY3Rpb24geFgobixlKXtyZXR1cm4gcmkoMCxuLGUtMSl9ZnVuY3Rpb24gRWMobixlLHQscyxyLG8saSxhLGwsYyxoKXtjb25zdCBwPWkqcythKnIrbCpvK2M7cmV0dXJuIDA8PWEmJmE8ZSYmMDw9bCYmbDx0P25bcF06aH1mdW5jdGlvbiBiWChuLGUsdCxzLHIsbyxpLGEsbCxjLGgpe2NvbnN0IHA9TWF0aC5yb3VuZChhKSxmPU1hdGgucm91bmQobCk7cmV0dXJuIEVjKG4sZSx0LHMscixvLGkscCxmLGMsaCl9ZnVuY3Rpb24gd1gobixlLHQscyxyLG8saSxhLGwsYyxoKXtjb25zdCBwPU1hdGguZmxvb3IoYSksZj1NYXRoLmZsb29yKGwpLGc9cCsxLHk9ZisxLHc9KHktbCkqRWMobixlLHQscyxyLG8saSxwLGYsYyxoKSsobC1mKSpFYyhuLGUsdCxzLHIsbyxpLHAseSxjLGgpLGI9KHktbCkqRWMobixlLHQscyxyLG8saSxnLGYsYyxoKSsobC1mKSpFYyhuLGUsdCxzLHIsbyxpLGcseSxjLGgpO3JldHVybihnLWEpKncrKGEtcCkqYn0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHZYKG4pe2NvbnN0e2lucHV0czplLGF0dHJzOnQsYmFja2VuZDpzfT1uLHtheGlzOnJ9PXQse3g6b309ZTtEZShvLCJ1bmlxdWUiKTtjb25zdCBpPXMuZGF0YS5nZXQoby5kYXRhSWQpLnZhbHVlcyx7b3V0cHV0VmFsdWVzOmEsb3V0cHV0U2hhcGU6bCxpbmRpY2VzOmN9PUtSKGkscixvLnNoYXBlLG8uZHR5cGUpO3JldHVybltzLm1ha2VUZW5zb3JJbmZvKGwsby5kdHlwZSxhKSxzLm1ha2VUZW5zb3JJbmZvKFtjLmxlbmd0aF0sImludDMyIixjKV19Y29uc3QgU1g9e2tlcm5lbE5hbWU6cmcsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzp2WH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gTlgobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3ZhbHVlOnJ9PWU7bGV0e2F4aXM6b309cztvPDAmJihvKz1yLnNoYXBlLmxlbmd0aCk7Y29uc3QgaT1yLnNoYXBlLmxlbmd0aCxhPXIuc2hhcGVbb10sbD1uZXcgQXJyYXkoaS0xKTtsZXQgYz0wO2ZvcihsZXQgZz0wO2c8aTtnKyspZyE9PW8mJihsW2MrK109ci5zaGFwZVtnXSk7Y29uc3QgaD1uZXcgQXJyYXkoaSkuZmlsbCgwKSxwPXIuc2hhcGUuc2xpY2UoKTtwW29dPTE7Y29uc3QgZj1uZXcgQXJyYXkoYSk7Zm9yKGxldCBnPTA7ZzxmLmxlbmd0aDtnKyspe2hbb109Zztjb25zdCB5PXlhKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntiZWdpbjpoLHNpemU6cH19KTtmW2ddPWt0KHtpbnB1dHM6e3g6eX0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpsfX0pLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oeSl9cmV0dXJuIGZ9Y29uc3Qga1g9e2tlcm5lbE5hbWU6SmQsYmFja2VuZE5hbWU6ImNwdSIsa2VybmVsRnVuYzpOWH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQ1gobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cixzZWdtZW50SWRzOm99PWUse251bVNlZ21lbnRzOml9PXM7RGUociwidW5zb3J0ZWRTZWdtZW50U3VtIik7Y29uc3QgYT1yLnNoYXBlLmxlbmd0aCxsPW8uc2hhcGUubGVuZ3RoLGM9W10saD1bXSxwPWEtbDtsZXQgZj1vO2ZvcihsZXQgeT0wO3k8cDsrK3kpe2NvbnN0IHc9SGYoe2lucHV0czp7aW5wdXQ6Zn0sYmFja2VuZDp0LGF0dHJzOntkaW06eSsxfX0pO2Y9dyxoLnB1c2godyl9Zm9yKGxldCB5PTA7eTxpOysreSl7Y29uc3Qgdz1Tbyh5LCJpbnQzMiIpLGI9dC5tYWtlVGVuc29ySW5mbyhbXSwiaW50MzIiLHcpLHY9dVIoe2lucHV0czp7YTpiLGI6Zn0sYmFja2VuZDp0fSksUz1taSh7aW5wdXRzOnt4OnZ9LGJhY2tlbmQ6dCxhdHRyczp7ZHR5cGU6ImZsb2F0MzIifX0pLCQ9YXkoe2lucHV0czp7YTpTLGI6cn0sYmFja2VuZDp0fSksaz1faCh7aW5wdXRzOnt4OiR9LGJhY2tlbmQ6dCxhdHRyczp7YXhpczowLGtlZXBEaW1zOiExfX0pO2MucHVzaChrKSxoLnB1c2goYiksaC5wdXNoKHYpLGgucHVzaChTKSxoLnB1c2goJCksaC5wdXNoKGspfWNvbnN0IGc9dUQoe2lucHV0czpjLGJhY2tlbmQ6dCxhdHRyczp7YXhpczowfX0pO3JldHVybiBoLmZvckVhY2goeT0+dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh5KSksZ31jb25zdCAkWD17a2VybmVsTmFtZTplaCxiYWNrZW5kTmFtZToiY3B1IixrZXJuZWxGdW5jOkNYfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBJWD1bdjUsdEgsTjUsQzUsYUgsSTUsRTUsRDUsXzUsRjUsUDUsTTUsVjUsajUsSDUsWDUsUTUsSjUsdDgsYjUsczgsbzgsYTgsdUgsdTgsb0gsZEgsZDgsbkgscDgsbTgsZzgseDgsdzgsUzgsazgsJDgsVDgsUjgsQTgsTzgsTDgsejgsQjgsVjgsVTgsRzgscTgsSzgsWDgsWTgsWjgsdHEsaDUsc3EsaEgsZHEscEgsaHEsbUgseHEsYnEsdnEseUgsYkgsTnEsQ3EsSXEsRXEsdkgsTkgsc0gsRHEsZjgsX3EsRnEsUHEscDUsQ0gsSUgsTXEsRUgsVnEsanEsSHEsWHEsUXEsSnEsZUssREgsbkssckssaUssbEssY0ssaEssZkssX0gsZ0ssYkssU0ssRkgsUEgsQ0ssVEssREssTUgsX0ssRkssTEssY0QsQkssbTUsV0gsV0ssakssSEssS0ssckgseTEsWUssZzUseTUseDUsWkssZTcsbjcscjcsaTcsYTcsdTcsWUgsZDcsZzcseDcsUzcsWkgsazcsJDcsVDcsSkgsd0ssRDcsXzcsRjcsUDcsTTcsVjcsVTcsRzcsbjUsSDcscjUsaTUsSzcsWTcsWjcsZVgsblgsYzUsSjgsclgsaVgsbFgsY1gsaFgsZlgsQkgsU1gsa1gsJFgsT0tdO2Zvcihjb25zdCBuIG9mIElYKWlnKG4pOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFlpPXt9LHRmPXthbHBoYTohMSxhbnRpYWxpYXM6ITEscHJlbXVsdGlwbGllZEFscGhhOiExLHByZXNlcnZlRHJhd2luZ0J1ZmZlcjohMSxkZXB0aDohMSxzdGVuY2lsOiExLGZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6ITB9O2Z1bmN0aW9uIFRYKG4sZSl7WWlbbl09ZX1mdW5jdGlvbiBDcihuLGUpe2lmKCEobiBpbiBZaSl8fGUhPW51bGwpe2NvbnN0IHM9UlgobixlKTtpZihzIT09bnVsbClZaVtuXT1zO2Vsc2UgcmV0dXJuIGNvbnNvbGUubG9nKCJDb3VsZCBub3QgZ2V0IGNvbnRleHQgZm9yIFdlYkdMIHZlcnNpb24iLG4pLG51bGx9Y29uc3QgdD1ZaVtuXTtyZXR1cm4gdD09bnVsbHx8dC5pc0NvbnRleHRMb3N0KCk/KGRlbGV0ZSBZaVtuXSxDcihuKSk6KHQuZGlzYWJsZSh0LkRFUFRIX1RFU1QpLHQuZGlzYWJsZSh0LlNURU5DSUxfVEVTVCksdC5kaXNhYmxlKHQuQkxFTkQpLHQuZGlzYWJsZSh0LkRJVEhFUiksdC5kaXNhYmxlKHQuUE9MWUdPTl9PRkZTRVRfRklMTCksdC5kaXNhYmxlKHQuU0FNUExFX0NPVkVSQUdFKSx0LmVuYWJsZSh0LlNDSVNTT1JfVEVTVCksdC5lbmFibGUodC5DVUxMX0ZBQ0UpLHQuY3VsbEZhY2UodC5CQUNLKSxZaVtuXSl9ZnVuY3Rpb24gRVgobil7aWYoIW9lKCkuZ2V0Qm9vbCgiSVNfU0FGQVJJIikmJnR5cGVvZiBPZmZzY3JlZW5DYW52YXM8InUiJiZuPT09MilyZXR1cm4gbmV3IE9mZnNjcmVlbkNhbnZhcygzMDAsMTUwKTtpZih0eXBlb2YgZG9jdW1lbnQ8InUiKXJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTt0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjcmVhdGUgYSBjYW52YXMgaW4gdGhpcyBjb250ZXh0Iil9ZnVuY3Rpb24gUlgobixlKXtpZihuIT09MSYmbiE9PTIpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZ2V0IFdlYkdMIHJlbmRlcmluZyBjb250ZXh0LCBXZWJHTCBpcyBkaXNhYmxlZC4iKTtjb25zdCB0PWU/P0VYKG4pO3JldHVybiB0LmFkZEV2ZW50TGlzdGVuZXIoIndlYmdsY29udGV4dGxvc3QiLHM9PntzLnByZXZlbnREZWZhdWx0KCksZGVsZXRlIFlpW25dfSwhMSksb2UoKS5nZXRCb29sKCJTT0ZUV0FSRV9XRUJHTF9FTkFCTEVEIikmJih0Zi5mYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0PSExKSxuPT09MT90LmdldENvbnRleHQoIndlYmdsIix0Zil8fHQuZ2V0Q29udGV4dCgiZXhwZXJpbWVudGFsLXdlYmdsIix0Zik6dC5nZXRDb250ZXh0KCJ3ZWJnbDIiLHRmKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi92YXIgWGM7KGZ1bmN0aW9uKG4pe25bbi5ERU5TRT0wXT0iREVOU0UiLG5bbi5TSEFSRURfQkFUQ0g9MV09IlNIQVJFRF9CQVRDSCJ9KShYY3x8KFhjPXt9KSk7dmFyIE9zOyhmdW5jdGlvbihuKXtuW24uUkVOREVSPTBdPSJSRU5ERVIiLG5bbi5VUExPQUQ9MV09IlVQTE9BRCIsbltuLlBJWEVMUz0yXT0iUElYRUxTIixuW24uRE9XTkxPQUQ9M109IkRPV05MT0FEIn0pKE9zfHwoT3M9e30pKTt2YXIgd247KGZ1bmN0aW9uKG4pe25bbi5VTlBBQ0tFRF9GTE9BVDE2PTBdPSJVTlBBQ0tFRF9GTE9BVDE2IixuW24uVU5QQUNLRURfRkxPQVQzMj0xXT0iVU5QQUNLRURfRkxPQVQzMiIsbltuLlBBQ0tFRF80WDFfVU5TSUdORURfQllURT0yXT0iUEFDS0VEXzRYMV9VTlNJR05FRF9CWVRFIixuW24uUEFDS0VEXzJYMl9GTE9BVDMyPTNdPSJQQUNLRURfMlgyX0ZMT0FUMzIiLG5bbi5QQUNLRURfMlgyX0ZMT0FUMTY9NF09IlBBQ0tFRF8yWDJfRkxPQVQxNiJ9KSh3bnx8KHduPXt9KSk7ZnVuY3Rpb24gT2gobixlKXtyZXR1cm5bZSxuXX1mdW5jdGlvbiBEWChuLGUpe3JldHVybiBuKmV9ZnVuY3Rpb24gbmYobil7Y29uc3QgZT1jZShuKSx0PU1hdGguY2VpbChlLzQpO3JldHVybiBTZih0KX1mdW5jdGlvbiBSdShuLGUpe3JldHVybltNYXRoLm1heCgxLE1hdGguY2VpbChlLzIpKSxNYXRoLm1heCgxLE1hdGguY2VpbChuLzIpKV19ZnVuY3Rpb24gQVgobixlKXtjb25zdFt0LHNdPVJ1KG4sZSk7cmV0dXJuIHQqcyo0fWZ1bmN0aW9uIHV2KG4sZSl7Y29uc3QgdD1uO2xldCBzLHIsbyxpLGEsbCxjLGgscCxmO3JldHVybiBvZSgpLmdldE51bWJlcigiV0VCR0xfVkVSU0lPTiIpPT09Mj8ocz10LlIzMkYscj10LlIxNkYsbz10LlJHQkExNkYsaT10LlJHQkEzMkYsYT10LlJFRCxjPTQsaD0xLHA9dC5IQUxGX0ZMT0FULGY9dC5GTE9BVCxsPXQuUkdCQTgpOihzPW4uUkdCQSxyPW4uUkdCQSxvPW4uUkdCQSxpPXQuUkdCQSxhPW4uUkdCQSxjPTQsaD00LHA9ZSE9bnVsbD9lLkhBTEZfRkxPQVRfT0VTOm51bGwsZj1uLkZMT0FULGw9bi5SR0JBKSx7aW50ZXJuYWxGb3JtYXRGbG9hdDpzLGludGVybmFsRm9ybWF0SGFsZkZsb2F0OnIsaW50ZXJuYWxGb3JtYXRQYWNrZWRIYWxmRmxvYXQ6byxpbnRlcm5hbEZvcm1hdFBhY2tlZEZsb2F0OmksdGV4dHVyZUZvcm1hdEZsb2F0OmEsZG93bmxvYWRUZXh0dXJlRm9ybWF0OmwsZG93bmxvYWRVbnBhY2tOdW1DaGFubmVsczpjLGRlZmF1bHROdW1DaGFubmVsczpoLHRleHR1cmVUeXBlSGFsZkZsb2F0OnAsdGV4dHVyZVR5cGVGbG9hdDpmfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiAkZShuLGUpe2NvbnN0IHQ9ZSgpO3JldHVybiBvZSgpLmdldEJvb2woIkRFQlVHIikmJl9YKG4pLHR9ZnVuY3Rpb24gX1gobil7Y29uc3QgZT1uLmdldEVycm9yKCk7aWYoZSE9PW4uTk9fRVJST1IpdGhyb3cgbmV3IEVycm9yKCJXZWJHTCBFcnJvcjogIitQWChuLGUpKX1jb25zdCBPWD01OTZlLTEwLEZYPTY1NTA0O2Z1bmN0aW9uIExYKG4pe3JldHVybiEhKG9lKCkuZ2V0Qm9vbCgiV0VCR0xfUkVOREVSX0ZMT0FUMzJfRU5BQkxFRCIpfHxuPT09MHx8T1g8TWF0aC5hYnMobikmJk1hdGguYWJzKG4pPEZYKX1mdW5jdGlvbiBQWChuLGUpe3N3aXRjaChlKXtjYXNlIG4uTk9fRVJST1I6cmV0dXJuIk5PX0VSUk9SIjtjYXNlIG4uSU5WQUxJRF9FTlVNOnJldHVybiJJTlZBTElEX0VOVU0iO2Nhc2Ugbi5JTlZBTElEX1ZBTFVFOnJldHVybiJJTlZBTElEX1ZBTFVFIjtjYXNlIG4uSU5WQUxJRF9PUEVSQVRJT046cmV0dXJuIklOVkFMSURfT1BFUkFUSU9OIjtjYXNlIG4uSU5WQUxJRF9GUkFNRUJVRkZFUl9PUEVSQVRJT046cmV0dXJuIklOVkFMSURfRlJBTUVCVUZGRVJfT1BFUkFUSU9OIjtjYXNlIG4uT1VUX09GX01FTU9SWTpyZXR1cm4iT1VUX09GX01FTU9SWSI7Y2FzZSBuLkNPTlRFWFRfTE9TVF9XRUJHTDpyZXR1cm4iQ09OVEVYVF9MT1NUX1dFQkdMIjtkZWZhdWx0OnJldHVybmBVbmtub3duIGVycm9yIGNvZGUgJHtlfWB9fWZ1bmN0aW9uIHNmKG4sZSl7cmV0dXJuIEVvKG4sKCk9Pm4uZ2V0RXh0ZW5zaW9uKGUpLCdFeHRlbnNpb24gIicrZSsnIiBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgYnJvd3Nlci4nKX1mdW5jdGlvbiB6WChuLGUpe2NvbnN0IHQ9RW8obiwoKT0+bi5jcmVhdGVTaGFkZXIobi5WRVJURVhfU0hBREVSKSwiVW5hYmxlIHRvIGNyZWF0ZSB2ZXJ0ZXggV2ViR0xTaGFkZXIuIik7aWYoJGUobiwoKT0+bi5zaGFkZXJTb3VyY2UodCxlKSksJGUobiwoKT0+bi5jb21waWxlU2hhZGVyKHQpKSxuLmdldFNoYWRlclBhcmFtZXRlcih0LG4uQ09NUElMRV9TVEFUVVMpPT09ITEpdGhyb3cgY29uc29sZS5sb2cobi5nZXRTaGFkZXJJbmZvTG9nKHQpKSxuZXcgRXJyb3IoIkZhaWxlZCB0byBjb21waWxlIHZlcnRleCBzaGFkZXIuIik7cmV0dXJuIHR9ZnVuY3Rpb24gTVgobixlKXtjb25zdCB0PUVvKG4sKCk9Pm4uY3JlYXRlU2hhZGVyKG4uRlJBR01FTlRfU0hBREVSKSwiVW5hYmxlIHRvIGNyZWF0ZSBmcmFnbWVudCBXZWJHTFNoYWRlci4iKTtpZigkZShuLCgpPT5uLnNoYWRlclNvdXJjZSh0LGUpKSwkZShuLCgpPT5uLmNvbXBpbGVTaGFkZXIodCkpLG9lKCkuZ2V0KCJFTkdJTkVfQ09NUElMRV9PTkxZIikpcmV0dXJuIHQ7aWYobi5nZXRTaGFkZXJQYXJhbWV0ZXIodCxuLkNPTVBJTEVfU1RBVFVTKT09PSExKXRocm93IGREKGUsbi5nZXRTaGFkZXJJbmZvTG9nKHQpKSxuZXcgRXJyb3IoIkZhaWxlZCB0byBjb21waWxlIGZyYWdtZW50IHNoYWRlci4iKTtyZXR1cm4gdH1jb25zdCBCWD0vRVJST1I6IFswLTldKzooWzAtOV0rKTovZztmdW5jdGlvbiBkRChuLGUpe2NvbnN0IHQ9QlguZXhlYyhlKTtpZih0PT1udWxsKXtjb25zb2xlLmxvZyhgQ291bGRuJ3QgcGFyc2UgbGluZSBudW1iZXIgaW4gZXJyb3I6ICR7ZX1gKSxjb25zb2xlLmxvZyhuKTtyZXR1cm59Y29uc3Qgcz0rdFsxXSxyPW4uc3BsaXQoYApgKSxvPXIubGVuZ3RoLnRvU3RyaW5nKCkubGVuZ3RoKzIsaT1yLm1hcCgocCxmKT0+SmkoKGYrMSkudG9TdHJpbmcoKSxvKStwKTtsZXQgYT0wO2ZvcihsZXQgcD0wO3A8aS5sZW5ndGg7cCsrKWE9TWF0aC5tYXgoaVtwXS5sZW5ndGgsYSk7Y29uc3QgbD1pLnNsaWNlKDAscy0xKSxjPWkuc2xpY2Uocy0xLHMpLGg9aS5zbGljZShzKTtjb25zb2xlLmxvZyhsLmpvaW4oYApgKSksY29uc29sZS5sb2coZS5zcGxpdChgCmApWzBdKSxjb25zb2xlLmxvZyhgJWMgJHtKaShjWzBdLGEpfWAsImJvcmRlcjoxcHggc29saWQgcmVkOyBiYWNrZ3JvdW5kLWNvbG9yOiNlM2QyZDI7IGNvbG9yOiNhNjE3MTciKSxjb25zb2xlLmxvZyhoLmpvaW4oYApgKSl9ZnVuY3Rpb24gVlgobil7cmV0dXJuIEVvKG4sKCk9Pm4uY3JlYXRlUHJvZ3JhbSgpLCJVbmFibGUgdG8gY3JlYXRlIFdlYkdMUHJvZ3JhbS4iKX1mdW5jdGlvbiBXWChuLGUpe2lmKCRlKG4sKCk9Pm4ubGlua1Byb2dyYW0oZSkpLCFvZSgpLmdldCgiRU5HSU5FX0NPTVBJTEVfT05MWSIpJiZuLmdldFByb2dyYW1QYXJhbWV0ZXIoZSxuLkxJTktfU1RBVFVTKT09PSExKXRocm93IGNvbnNvbGUubG9nKG4uZ2V0UHJvZ3JhbUluZm9Mb2coZSkpLG5ldyBFcnJvcigiRmFpbGVkIHRvIGxpbmsgdmVydGV4IGFuZCBmcmFnbWVudCBzaGFkZXJzLiIpfWZ1bmN0aW9uIE4wKG4sZSl7aWYoJGUobiwoKT0+bi52YWxpZGF0ZVByb2dyYW0oZSkpLG4uZ2V0UHJvZ3JhbVBhcmFtZXRlcihlLG4uVkFMSURBVEVfU1RBVFVTKT09PSExKXRocm93IGNvbnNvbGUubG9nKG4uZ2V0UHJvZ3JhbUluZm9Mb2coZSkpLG5ldyBFcnJvcigiU2hhZGVyIHByb2dyYW0gdmFsaWRhdGlvbiBmYWlsZWQuIil9ZnVuY3Rpb24gVVgobixlKXtjb25zdCB0PUVvKG4sKCk9Pm4uY3JlYXRlQnVmZmVyKCksIlVuYWJsZSB0byBjcmVhdGUgV2ViR0xCdWZmZXIiKTtyZXR1cm4gJGUobiwoKT0+bi5iaW5kQnVmZmVyKG4uQVJSQVlfQlVGRkVSLHQpKSwkZShuLCgpPT5uLmJ1ZmZlckRhdGEobi5BUlJBWV9CVUZGRVIsZSxuLlNUQVRJQ19EUkFXKSksdH1mdW5jdGlvbiBqWChuLGUpe2NvbnN0IHQ9RW8obiwoKT0+bi5jcmVhdGVCdWZmZXIoKSwiVW5hYmxlIHRvIGNyZWF0ZSBXZWJHTEJ1ZmZlciIpO3JldHVybiAkZShuLCgpPT5uLmJpbmRCdWZmZXIobi5FTEVNRU5UX0FSUkFZX0JVRkZFUix0KSksJGUobiwoKT0+bi5idWZmZXJEYXRhKG4uRUxFTUVOVF9BUlJBWV9CVUZGRVIsZSxuLlNUQVRJQ19EUkFXKSksdH1mdW5jdGlvbiBHWChuKXtyZXR1cm4gRW8obiwoKT0+bi5jcmVhdGVUZXh0dXJlKCksIlVuYWJsZSB0byBjcmVhdGUgV2ViR0xUZXh0dXJlLiIpfWZ1bmN0aW9uIEhYKG4sZSl7Y29uc3QgdD1vZSgpLmdldE51bWJlcigiV0VCR0xfTUFYX1RFWFRVUkVfU0laRSIpO2lmKG48PTB8fGU8PTApe2NvbnN0IHM9YFske259eCR7ZX1dYDt0aHJvdyBuZXcgRXJyb3IoIlJlcXVlc3RlZCB0ZXh0dXJlIHNpemUgIitzKyIgaXMgaW52YWxpZC4iKX1pZihuPnR8fGU+dCl7Y29uc3Qgcz1gWyR7bn14JHtlfV1gLHI9YFske3R9eCR7dH1dYDt0aHJvdyBuZXcgRXJyb3IoIlJlcXVlc3RlZCB0ZXh0dXJlIHNpemUgIitzKyIgZ3JlYXRlciB0aGFuIFdlYkdMIG1heGltdW0gb24gdGhpcyBicm93c2VyIC8gR1BVICIrcisiLiIpfX1mdW5jdGlvbiBxWChuKXtyZXR1cm4gRW8obiwoKT0+bi5jcmVhdGVGcmFtZWJ1ZmZlcigpLCJVbmFibGUgdG8gY3JlYXRlIFdlYkdMRnJhbWVidWZmZXIuIil9ZnVuY3Rpb24gSUMobixlLHQscyxyLG8saSl7Y29uc3QgYT1uLmdldEF0dHJpYkxvY2F0aW9uKGUsdCk7cmV0dXJuIGE9PT0tMT8hMTooJGUobiwoKT0+bi5iaW5kQnVmZmVyKG4uQVJSQVlfQlVGRkVSLHMpKSwkZShuLCgpPT5uLnZlcnRleEF0dHJpYlBvaW50ZXIoYSxyLG4uRkxPQVQsITEsbyxpKSksJGUobiwoKT0+bi5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhKSksITApfWZ1bmN0aW9uIEtYKG4sZSx0KXtKWChuLHQpLCRlKG4sKCk9Pm4uYWN0aXZlVGV4dHVyZShuLlRFWFRVUkUwK3QpKSwkZShuLCgpPT5uLmJpbmRUZXh0dXJlKG4uVEVYVFVSRV8yRCxlKSl9ZnVuY3Rpb24gWFgobixlLHQpe3JldHVybiBFbyhuLCgpPT5uLmdldFVuaWZvcm1Mb2NhdGlvbihlLHQpLCd1bmlmb3JtICInK3QrJyIgbm90IHByZXNlbnQgaW4gcHJvZ3JhbS4nKX1mdW5jdGlvbiBZWChuLGUsdCl7cmV0dXJuIG4uZ2V0VW5pZm9ybUxvY2F0aW9uKGUsdCl9ZnVuY3Rpb24gUVgobixlLHQscyl7JGUobiwoKT0+S1gobixlLHMpKSwkZShuLCgpPT5uLnVuaWZvcm0xaSh0LHMpKX1mdW5jdGlvbiBrMChuLGUsdCl7JGUobiwoKT0+bi5iaW5kRnJhbWVidWZmZXIobi5GUkFNRUJVRkZFUix0KSksJGUobiwoKT0+bi5mcmFtZWJ1ZmZlclRleHR1cmUyRChuLkZSQU1FQlVGRkVSLG4uQ09MT1JfQVRUQUNITUVOVDAsbi5URVhUVVJFXzJELGUsMCkpfWZ1bmN0aW9uIFRDKG4sZSl7JGUobiwoKT0+bi5iaW5kRnJhbWVidWZmZXIobi5GUkFNRUJVRkZFUixlKSksJGUobiwoKT0+bi5mcmFtZWJ1ZmZlclRleHR1cmUyRChuLkZSQU1FQlVGRkVSLG4uQ09MT1JfQVRUQUNITUVOVDAsbi5URVhUVVJFXzJELG51bGwsMCkpfWZ1bmN0aW9uIHJmKG4pe2NvbnN0IGU9bi5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKG4uRlJBTUVCVUZGRVIpO2lmKGUhPT1uLkZSQU1FQlVGRkVSX0NPTVBMRVRFKXRocm93IG5ldyBFcnJvcigiRXJyb3IgYmluZGluZyBmcmFtZWJ1ZmZlcjogIitaWChuLGUpKX1mdW5jdGlvbiBaWChuLGUpe3N3aXRjaChlKXtjYXNlIG4uRlJBTUVCVUZGRVJfSU5DT01QTEVURV9BVFRBQ0hNRU5UOnJldHVybiJGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0FUVEFDSE1FTlQiO2Nhc2Ugbi5GUkFNRUJVRkZFUl9JTkNPTVBMRVRFX01JU1NJTkdfQVRUQUNITUVOVDpyZXR1cm4iRlJBTUVCVUZGRVJfSU5DT01QTEVURV9NSVNTSU5HX0FUVEFDSE1FTlQiO2Nhc2Ugbi5GUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0RJTUVOU0lPTlM6cmV0dXJuIkZSQU1FQlVGRkVSX0lOQ09NUExFVEVfRElNRU5TSU9OUyI7Y2FzZSBuLkZSQU1FQlVGRkVSX1VOU1VQUE9SVEVEOnJldHVybiJGUkFNRUJVRkZFUl9VTlNVUFBPUlRFRCI7ZGVmYXVsdDpyZXR1cm5gdW5rbm93biBlcnJvciAke2V9YH19ZnVuY3Rpb24gRW8obixlLHQpe2NvbnN0IHM9JGUobiwoKT0+ZSgpKTtpZihzPT1udWxsKXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gc31mdW5jdGlvbiBKWChuLGUpe2NvbnN0IHQ9bi5NQVhfQ09NQklORURfVEVYVFVSRV9JTUFHRV9VTklUUy0xLHM9ZStuLlRFWFRVUkUwO2lmKHM8bi5URVhUVVJFMHx8cz50KXtjb25zdCByPWBbZ2wuVEVYVFVSRTAsIGdsLlRFWFRVUkUke3R9XWA7dGhyb3cgbmV3IEVycm9yKGB0ZXh0dXJlVW5pdCBtdXN0IGJlIGluICR7cn0uYCl9fWZ1bmN0aW9uIENsKG4sZT0yKXtyZXR1cm4gY2Uobi5zbGljZSgwLG4ubGVuZ3RoLWUpKX1mdW5jdGlvbiAkbChuKXtpZihuLmxlbmd0aD09PTApdGhyb3cgRXJyb3IoIkNhbm5vdCBnZXQgcm93cyBhbmQgY29sdW1ucyBvZiBhbiBlbXB0eSBzaGFwZSBhcnJheS4iKTtyZXR1cm5bbi5sZW5ndGg+MT9uW24ubGVuZ3RoLTJdOjEsbltuLmxlbmd0aC0xXV19ZnVuY3Rpb24gb2Yobil7bGV0IGU9WzEsMSwxXTtyZXR1cm4gbi5sZW5ndGg9PT0wfHxuLmxlbmd0aD09PTEmJm5bMF09PT0xfHwoZT1bQ2wobiksLi4uJGwobildKSxlfWZ1bmN0aW9uIGU5KG4sZT0hMSl7bGV0IHQ9b2UoKS5nZXROdW1iZXIoIldFQkdMX01BWF9URVhUVVJFX1NJWkUiKSxzPW9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9NQVhfU0laRV9GT1JfTkFSUk9XX1RFWFRVUkUiKTtzPT09MS8wJiZvZSgpLmdldEJvb2woIldFQkdMX0FVVE9fU1FVQVJJRllfTkFSUk9XX1RFWFRVUkVfU0hBUEUiKSYmKHM9dC8yKSxlJiYodD10KjIscz1zKjIsbj1uLm1hcCgoYSxsKT0+bD49bi5sZW5ndGgtMj9KZihuW2xdKTpuW2xdKSxuLmxlbmd0aD09PTEmJihuPVsyLG5bMF1dKSksbi5sZW5ndGghPT0yJiYobj12byhuKS5uZXdTaGFwZSk7bGV0IHI9Y2Uobiksbz1udWxsO24ubGVuZ3RoPD0xJiZyPD10P289WzEscl06bi5sZW5ndGg9PT0yJiZuWzBdPD10JiZuWzFdPD10P289bjpuLmxlbmd0aD09PTMmJm5bMF0qblsxXTw9dCYmblsyXTw9dD9vPVtuWzBdKm5bMV0sblsyXV06bi5sZW5ndGg9PT0zJiZuWzBdPD10JiZuWzFdKm5bMl08PXQ/bz1bblswXSxuWzFdKm5bMl1dOm4ubGVuZ3RoPT09NCYmblswXSpuWzFdKm5bMl08PXQmJm5bM108PXQ/bz1bblswXSpuWzFdKm5bMl0sblszXV06bi5sZW5ndGg9PT00JiZuWzBdPD10JiZuWzFdKm5bMl0qblszXTw9dCYmKG89W25bMF0sblsxXSpuWzJdKm5bM11dKTtjb25zdCBpPW8hPW51bGwmJk1hdGgubWF4KC4uLm8pPnMmJk1hdGgubWluKC4uLm8pPD0oZT8yOjEpJiZNYXRoLm1pbiguLi5vKT4wO2lmKG89PW51bGx8fGkpaWYoZSl7Y29uc3QgYT1DbChuKTtsZXQgbD0yLGM9MjtuLmxlbmd0aCYmKFtsLGNdPSRsKG4pKSxyPWEqKGwvMikqKGMvMiksbz1TZihyKS5tYXAoaD0+aCoyKX1lbHNlIG89U2Yocik7cmV0dXJuIG99ZnVuY3Rpb24gYWYobil7cmV0dXJuIG4lMj09PTB9ZnVuY3Rpb24gS2YobixlKXtpZihuPW4uc2xpY2UoLTIpLGU9ZS5zbGljZSgtMiksSmUobixlKXx8IW4ubGVuZ3RofHwhZS5sZW5ndGh8fG5bMF09PT0wfHxuWzFdPT09MHx8ZVswXT09PTB8fGVbMV09PT0wKXJldHVybiEwO2lmKG4ubGVuZ3RoIT09ZS5sZW5ndGgpe2NvbnN0IHQ9bltuLmxlbmd0aC0xXSxzPWVbZS5sZW5ndGgtMV07aWYodD09PXN8fGFmKHQpJiZhZihzKSYmKG5bMF09PT0xfHxlWzBdPT09MSkpcmV0dXJuITB9cmV0dXJuIG5bMV09PT1lWzFdJiZhZihuWzBdKSYmYWYoZVswXSl9bGV0IEMwLCQwO2Z1bmN0aW9uIHQ5KG4pe2lmKEMwPT1udWxsKXtjb25zdCBlPUNyKG4pO0MwPWUuZ2V0UGFyYW1ldGVyKGUuTUFYX1RFWFRVUkVfU0laRSl9cmV0dXJuIEMwfWZ1bmN0aW9uIG45KG4pe2lmKCQwPT1udWxsKXtjb25zdCBlPUNyKG4pOyQwPWUuZ2V0UGFyYW1ldGVyKGUuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpfXJldHVybiBNYXRoLm1pbigxNiwkMCl9ZnVuY3Rpb24gczkobil7aWYobj09PTApcmV0dXJuIDA7bGV0IGU7Y29uc3QgdD1DcihuKTtyZXR1cm4gSnModCwiRVhUX2Rpc2pvaW50X3RpbWVyX3F1ZXJ5X3dlYmdsMiIpJiZuPT09Mj9lPTI6SnModCwiRVhUX2Rpc2pvaW50X3RpbWVyX3F1ZXJ5Iik/ZT0xOmU9MCxlfWZ1bmN0aW9uIEpzKG4sZSl7cmV0dXJuIG4uZ2V0RXh0ZW5zaW9uKGUpIT1udWxsfWZ1bmN0aW9uIEVDKG4pe3RyeXtpZihDcihuKSE9bnVsbClyZXR1cm4hMH1jYXRjaChlKXtyZXR1cm4gY29uc29sZS5sb2coIkVycm9yIHdoZW4gZ2V0dGluZyBXZWJHTCBjb250ZXh0OiAiLGUpLCExfXJldHVybiExfWZ1bmN0aW9uIHI5KG4pe2lmKG49PT0wKXJldHVybiExO2NvbnN0IGU9Q3Iobik7aWYobj09PTEpe2lmKCFKcyhlLCJPRVNfdGV4dHVyZV9mbG9hdCIpKXJldHVybiExfWVsc2UgaWYoIUpzKGUsIkVYVF9jb2xvcl9idWZmZXJfZmxvYXQiKSlyZXR1cm4hMTtyZXR1cm4gYjEoZSl9ZnVuY3Rpb24gbzkobil7aWYobj09PTApcmV0dXJuITE7Y29uc3QgZT1DcihuKTtpZihuPT09MSl7aWYoIUpzKGUsIk9FU190ZXh0dXJlX2Zsb2F0Iil8fCFKcyhlLCJXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXQiKSlyZXR1cm4hMX1lbHNle2lmKEpzKGUsIkVYVF9jb2xvcl9idWZmZXJfZmxvYXQiKSlyZXR1cm4gYjEoZSk7Y29uc3Qgcz0iRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0IjtpZihKcyhlLHMpKXtjb25zdCByPWUuZ2V0RXh0ZW5zaW9uKHMpO3JldHVybiBpOShlLHIpfXJldHVybiExfXJldHVybiBiMShlKX1mdW5jdGlvbiBiMShuKXtjb25zdCBlPXV2KG4pLHQ9bi5jcmVhdGVUZXh0dXJlKCk7bi5iaW5kVGV4dHVyZShuLlRFWFRVUkVfMkQsdCksbi50ZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLGUuaW50ZXJuYWxGb3JtYXRGbG9hdCwxLDEsMCxlLnRleHR1cmVGb3JtYXRGbG9hdCxlLnRleHR1cmVUeXBlRmxvYXQsbnVsbCk7Y29uc3Qgbz1uLmNyZWF0ZUZyYW1lYnVmZmVyKCk7bi5iaW5kRnJhbWVidWZmZXIobi5GUkFNRUJVRkZFUixvKSxuLmZyYW1lYnVmZmVyVGV4dHVyZTJEKG4uRlJBTUVCVUZGRVIsbi5DT0xPUl9BVFRBQ0hNRU5UMCxuLlRFWFRVUkVfMkQsdCwwKTtjb25zdCBpPW4uY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhuLkZSQU1FQlVGRkVSKT09PW4uRlJBTUVCVUZGRVJfQ09NUExFVEU7cmV0dXJuIG4uYmluZFRleHR1cmUobi5URVhUVVJFXzJELG51bGwpLG4uYmluZEZyYW1lYnVmZmVyKG4uRlJBTUVCVUZGRVIsbnVsbCksbi5kZWxldGVUZXh0dXJlKHQpLG4uZGVsZXRlRnJhbWVidWZmZXIobyksaX1mdW5jdGlvbiBpOShuLGUpe2NvbnN0IHQ9dXYobixlKSxzPW4uY3JlYXRlVGV4dHVyZSgpO24uYmluZFRleHR1cmUobi5URVhUVVJFXzJELHMpLG4udGV4SW1hZ2UyRChuLlRFWFRVUkVfMkQsMCx0LmludGVybmFsRm9ybWF0SGFsZkZsb2F0LDEsMSwwLHQudGV4dHVyZUZvcm1hdEZsb2F0LHQudGV4dHVyZVR5cGVIYWxmRmxvYXQsbnVsbCk7Y29uc3QgaT1uLmNyZWF0ZUZyYW1lYnVmZmVyKCk7bi5iaW5kRnJhbWVidWZmZXIobi5GUkFNRUJVRkZFUixpKSxuLmZyYW1lYnVmZmVyVGV4dHVyZTJEKG4uRlJBTUVCVUZGRVIsbi5DT0xPUl9BVFRBQ0hNRU5UMCxuLlRFWFRVUkVfMkQscywwKTtjb25zdCBhPW4uY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhuLkZSQU1FQlVGRkVSKT09PW4uRlJBTUVCVUZGRVJfQ09NUExFVEU7cmV0dXJuIG4uYmluZFRleHR1cmUobi5URVhUVVJFXzJELG51bGwpLG4uYmluZEZyYW1lYnVmZmVyKG4uRlJBTUVCVUZGRVIsbnVsbCksbi5kZWxldGVUZXh0dXJlKHMpLG4uZGVsZXRlRnJhbWVidWZmZXIoaSksYX1mdW5jdGlvbiBhOShuKXtyZXR1cm4gbiE9PTI/ITE6Q3IobikuZmVuY2VTeW5jIT1udWxsfWZ1bmN0aW9uIEZoKG4sZSl7QXJyYXkuaXNBcnJheShuKXx8KG49W25dKSxuLmZvckVhY2godD0+e3QhPW51bGwmJkEodC5kdHlwZSE9PSJjb21wbGV4NjQiLCgpPT5gJHtlfSBkb2VzIG5vdCBzdXBwb3J0IGNvbXBsZXg2NCB0ZW5zb3JzIGluIHRoZSBXZWJHTCBiYWNrZW5kLmApfSl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgX2U9b2UoKTtfZS5yZWdpc3RlckZsYWcoIkhBU19XRUJHTCIsKCk9Pl9lLmdldE51bWJlcigiV0VCR0xfVkVSU0lPTiIpPjApO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfVkVSU0lPTiIsKCk9PkVDKDIpPzI6RUMoMSk/MTowKTtfZS5yZWdpc3RlckZsYWcoIldFQkdMX0NIRUNLX05VTUVSSUNBTF9QUk9CTEVNUyIsKCk9PiExKTtfZS5yZWdpc3RlckZsYWcoIldFQkdMX0JVRkZFUl9TVVBQT1JURUQiLCgpPT5fZS5nZXQoIldFQkdMX1ZFUlNJT04iKT09PTIpO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfQ1BVX0ZPUldBUkQiLCgpPT4hMCk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9GT1JDRV9GMTZfVEVYVFVSRVMiLCgpPT4hMSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9QQUNLIiwoKT0+X2UuZ2V0Qm9vbCgiSEFTX1dFQkdMIikpO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfUEFDS19OT1JNQUxJWkFUSU9OIiwoKT0+X2UuZ2V0Qm9vbCgiV0VCR0xfUEFDSyIpKTtfZS5yZWdpc3RlckZsYWcoIldFQkdMX1BBQ0tfQ0xJUCIsKCk9Pl9lLmdldEJvb2woIldFQkdMX1BBQ0siKSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9QQUNLX0RFUFRIV0lTRUNPTlYiLCgpPT5fZS5nZXRCb29sKCJXRUJHTF9QQUNLIikpO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfUEFDS19CSU5BUllfT1BFUkFUSU9OUyIsKCk9Pl9lLmdldEJvb2woIldFQkdMX1BBQ0siKSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9QQUNLX1VOQVJZX09QRVJBVElPTlMiLCgpPT5fZS5nZXRCb29sKCJXRUJHTF9QQUNLIikpO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfUEFDS19BUlJBWV9PUEVSQVRJT05TIiwoKT0+X2UuZ2V0Qm9vbCgiV0VCR0xfUEFDSyIpKTtfZS5yZWdpc3RlckZsYWcoIldFQkdMX1BBQ0tfSU1BR0VfT1BFUkFUSU9OUyIsKCk9Pl9lLmdldEJvb2woIldFQkdMX1BBQ0siKSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9QQUNLX1JFRFVDRSIsKCk9Pl9lLmdldEJvb2woIldFQkdMX1BBQ0siKSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9MQVpJTFlfVU5QQUNLIiwoKT0+X2UuZ2V0Qm9vbCgiV0VCR0xfUEFDSyIpKTtfZS5yZWdpc3RlckZsYWcoIldFQkdMX0NPTlZfSU0yQ09MIiwoKT0+X2UuZ2V0Qm9vbCgiV0VCR0xfUEFDSyIpKTtfZS5yZWdpc3RlckZsYWcoIldFQkdMX1BBQ0tfQ09OVjJEVFJBTlNQT1NFIiwoKT0+X2UuZ2V0Qm9vbCgiV0VCR0xfUEFDSyIpKTtfZS5yZWdpc3RlckZsYWcoIldFQkdMX01BWF9URVhUVVJFX1NJWkUiLCgpPT50OShfZS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKSkpO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfTUFYX1RFWFRVUkVTX0lOX1NIQURFUiIsKCk9Pm45KF9lLmdldE51bWJlcigiV0VCR0xfVkVSU0lPTiIpKSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9ESVNKT0lOVF9RVUVSWV9USU1FUl9FWFRFTlNJT05fVkVSU0lPTiIsKCk9Pntjb25zdCBuPV9lLmdldE51bWJlcigiV0VCR0xfVkVSU0lPTiIpO3JldHVybiBuPT09MD8wOnM5KG4pfSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9ESVNKT0lOVF9RVUVSWV9USU1FUl9FWFRFTlNJT05fUkVMSUFCTEUiLCgpPT5fZS5nZXROdW1iZXIoIldFQkdMX0RJU0pPSU5UX1FVRVJZX1RJTUVSX0VYVEVOU0lPTl9WRVJTSU9OIik+MCYmIUYxKCkpO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfUkVOREVSX0ZMT0FUMzJfQ0FQQUJMRSIsKCk9PnI5KF9lLmdldE51bWJlcigiV0VCR0xfVkVSU0lPTiIpKSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9SRU5ERVJfRkxPQVQzMl9FTkFCTEVEIiwoKT0+X2UuZ2V0Qm9vbCgiV0VCR0xfRk9SQ0VfRjE2X1RFWFRVUkVTIik/ITE6X2UuZ2V0Qm9vbCgiV0VCR0xfUkVOREVSX0ZMT0FUMzJfQ0FQQUJMRSIpKTtfZS5yZWdpc3RlckZsYWcoIldFQkdMX0RPV05MT0FEX0ZMT0FUX0VOQUJMRUQiLCgpPT5vOShfZS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKSkpO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfRkVOQ0VfQVBJX0VOQUJMRUQiLCgpPT5hOShfZS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKSkpO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfU0laRV9VUExPQURfVU5JRk9STSIsKCk9Pl9lLmdldEJvb2woIldFQkdMX1JFTkRFUl9GTE9BVDMyX0VOQUJMRUQiKT80OjApO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfREVMRVRFX1RFWFRVUkVfVEhSRVNIT0xEIiwoKT0+LTEsbj0+e2lmKHR5cGVvZiBuIT0ibnVtYmVyIil0aHJvdyBuZXcgRXJyb3IoYFdFQkdMX0RFTEVURV9URVhUVVJFX1RIUkVTSE9MRCBtdXN0IGJlIGEgbnVtYmVyIGJ1dCBnb3QgJHtufS5gKTtpZihuPDAmJm4hPT0tMSl0aHJvdyBuZXcgRXJyb3IoYFdFQkdMX0RFTEVURV9URVhUVVJFX1RIUkVTSE9MRCBtdXN0IGJlIC0xIChpbmRpY2F0aW5nIG5ldmVyIGRlbGV0ZSkgb3IgYXQgbGVhc3QgMCwgYnV0IGdvdCAke259LmApfSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9GTFVTSF9USFJFU0hPTEQiLCgpPT5GMSgpPzE6LTEsbj0+e2lmKHR5cGVvZiBuIT0ibnVtYmVyIil0aHJvdyBuZXcgRXJyb3IoYFdFQkdMX0ZMVVNIX1RIUkVTSE9MRCBtdXN0IGJlIGEgbnVtYmVyIGJ1dCBnb3QgJHtufS5gKTtpZihuPDAmJm4hPT0tMSl0aHJvdyBuZXcgRXJyb3IoYFdFQkdMX0ZMVVNIX1RIUkVTSE9MRCBtdXN0IGJlIC0xIChpbmRpY2F0aW5nIG5ldmVyIG1hbnVhbCBmbHVzaCkgb3IgYXQgbGVhc3QgMCwgYnV0IGdvdCAke259LmApfSk7X2UucmVnaXN0ZXJGbGFnKCJDUFVfSEFORE9GRl9TSVpFX1RIUkVTSE9MRCIsKCk9PjEyOCk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9VU0VfU0hBUEVTX1VOSUZPUk1TIiwoKT0+ITEpO19lLnJlZ2lzdGVyRmxhZygiVE9QS19MQVNUX0RJTV9DUFVfSEFORE9GRl9TSVpFX1RIUkVTSE9MRCIsKCk9PjFlNSk7X2UucmVnaXN0ZXJGbGFnKCJUT1BLX0tfQ1BVX0hBTkRPRkZfVEhSRVNIT0xEIiwoKT0+MTI4KTtfZS5yZWdpc3RlckZsYWcoIldFQkdMX0VYUF9DT05WIiwoKT0+ITEpO19lLnJlZ2lzdGVyRmxhZygiU09GVFdBUkVfV0VCR0xfRU5BQkxFRCIsKCk9Pl9lLmdldEJvb2woIklTX1RFU1QiKSk7X2UucmVnaXN0ZXJGbGFnKCJXRUJHTF9NQVhfU0laRV9GT1JfTkFSUk9XX1RFWFRVUkUiLCgpPT4xLzApO19lLnJlZ2lzdGVyRmxhZygiV0VCR0xfQVVUT19TUVVBUklGWV9OQVJST1dfVEVYVFVSRV9TSEFQRSIsKCk9PiExKTtfZS5yZWdpc3RlckZsYWcoIldFQkdMMl9JU05BTl9DVVNUT00iLCgpPT4hMSk7X2UucmVnaXN0ZXJGbGFnKCJFTkdJTkVfQ09NUElMRV9PTkxZIiwoKT0+ITEpOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEtuKCl7bGV0IG4sZSx0LHMscixvLGksYSxsLGM7cmV0dXJuIG9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9WRVJTSU9OIik9PT0yPyhuPSIjdmVyc2lvbiAzMDAgZXMiLGU9ImluIix0PSJvdXQiLHM9ImluIixyPSJ0ZXh0dXJlIixvPSJvdXRwdXRDb2xvciIsaT0ib3V0IHZlYzQgb3V0cHV0Q29sb3I7IixhPW9lKCkuZ2V0Qm9vbCgiV0VCR0wyX0lTTkFOX0NVU1RPTSIpP2AKICAgICAgYm9vbCBpc25hbl9jdXN0b20oZmxvYXQgdmFsKSB7CiAgICAgICAgdWludCBmbG9hdFRvVWludCA9IGZsb2F0Qml0c1RvVWludCh2YWwpOwogICAgICAgIHJldHVybiAoZmxvYXRUb1VpbnQgJiAweDdmZmZmZmZmdSkgPiAweDdmODAwMDAwdTsKICAgICAgfQoKICAgICAgYnZlYzQgaXNuYW5fY3VzdG9tKHZlYzQgdmFsKSB7CiAgICAgICAgcmV0dXJuIGJ2ZWM0KGlzbmFuX2N1c3RvbSh2YWwueCksCiAgICAgICAgICBpc25hbl9jdXN0b20odmFsLnkpLCBpc25hbl9jdXN0b20odmFsLnopLCBpc25hbl9jdXN0b20odmFsLncpKTsKICAgICAgfQoKICAgICAgI2RlZmluZSBpc25hbih2YWx1ZSkgaXNuYW5fY3VzdG9tKHZhbHVlKQogICAgYDoiIixsPSIiLGM9YAogICAgICAjZGVmaW5lIHJvdW5kKHZhbHVlKSBuZXdSb3VuZCh2YWx1ZSkKICAgICAgaW50IG5ld1JvdW5kKGZsb2F0IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGludChmbG9vcih2YWx1ZSArIDAuNSkpOwogICAgICB9CgogICAgICBpdmVjNCBuZXdSb3VuZCh2ZWM0IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGl2ZWM0KGZsb29yKHZhbHVlICsgdmVjNCgwLjUpKSk7CiAgICAgIH0KICAgIGApOihuPSIiLGU9ImF0dHJpYnV0ZSIsdD0idmFyeWluZyIscz0idmFyeWluZyIscj0idGV4dHVyZTJEIixvPSJnbF9GcmFnQ29sb3IiLGk9IiIsYT1gCiAgICAgICNkZWZpbmUgaXNuYW4odmFsdWUpIGlzbmFuX2N1c3RvbSh2YWx1ZSkKICAgICAgYm9vbCBpc25hbl9jdXN0b20oZmxvYXQgdmFsKSB7CiAgICAgICAgcmV0dXJuICh2YWwgPiAwLiB8fCB2YWwgPCAxLiB8fCB2YWwgPT0gMC4pID8gZmFsc2UgOiB0cnVlOwogICAgICB9CiAgICAgIGJ2ZWM0IGlzbmFuX2N1c3RvbSh2ZWM0IHZhbCkgewogICAgICAgIHJldHVybiBidmVjNChpc25hbih2YWwueCksIGlzbmFuKHZhbC55KSwgaXNuYW4odmFsLnopLCBpc25hbih2YWwudykpOwogICAgICB9CiAgICBgLGw9YAogICAgICB1bmlmb3JtIGZsb2F0IElORklOSVRZOwoKICAgICAgYm9vbCBpc2luZihmbG9hdCB2YWwpIHsKICAgICAgICByZXR1cm4gYWJzKHZhbCkgPT0gSU5GSU5JVFk7CiAgICAgIH0KICAgICAgYnZlYzQgaXNpbmYodmVjNCB2YWwpIHsKICAgICAgICByZXR1cm4gZXF1YWwoYWJzKHZhbCksIHZlYzQoSU5GSU5JVFkpKTsKICAgICAgfQogICAgYCxjPWAKICAgICAgaW50IHJvdW5kKGZsb2F0IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGludChmbG9vcih2YWx1ZSArIDAuNSkpOwogICAgICB9CgogICAgICBpdmVjNCByb3VuZCh2ZWM0IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGl2ZWM0KGZsb29yKHZhbHVlICsgdmVjNCgwLjUpKSk7CiAgICAgIH0KICAgIGApLHt2ZXJzaW9uOm4sYXR0cmlidXRlOmUsdmFyeWluZ1ZzOnQsdmFyeWluZ0ZzOnMsdGV4dHVyZTJEOnIsb3V0cHV0Om8sZGVmaW5lT3V0cHV0OmksZGVmaW5lU3BlY2lhbE5hTjphLGRlZmluZVNwZWNpYWxJbmY6bCxkZWZpbmVSb3VuZDpjfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBFYShuLGUsdD0iaW5kZXgiKXtjb25zdCBzPXplKGUpO3JldHVybiBzLm1hcCgocixvKT0+e2NvbnN0IGk9YGludCAke25bb119ID0gJHt0fSAvICR7cn1gLGE9bz09PXMubGVuZ3RoLTE/YGludCAke25bbysxXX0gPSAke3R9IC0gJHtuW29dfSAqICR7cn1gOmBpbmRleCAtPSAke25bb119ICogJHtyfWA7cmV0dXJuYCR7aX07ICR7YX07YH0pLmpvaW4oIiIpfWZ1bmN0aW9uIGx5KG4sZSx0PSJpbmRleCIpe2NvbnN0IHM9emUoZSk7cmV0dXJuIHMubWFwKChyLG8pPT57Y29uc3QgaT1gaW50ICR7bltvXX0gPSAke3R9IC8gb3V0U2hhcGVTdHJpZGVzWyR7b31dYCxhPW89PT1zLmxlbmd0aC0xP2BpbnQgJHtuW28rMV19ID0gJHt0fSAtICR7bltvXX0gKiBvdXRTaGFwZVN0cmlkZXNbJHtvfV1gOmBpbmRleCAtPSAke25bb119ICogb3V0U2hhcGVTdHJpZGVzWyR7b31dYDtyZXR1cm5gJHtpfTsgJHthfTtgfSkuam9pbigiIil9ZnVuY3Rpb24gbDkobixlKXtjb25zdCB0PW4ubGVuZ3RoLHM9bi5tYXAobz0+YCR7ZX1bJHtvfV1gKSxyPW5ldyBBcnJheSh0LTEpO3JbdC0yXT1zW3QtMV07Zm9yKGxldCBvPXQtMztvPj0wOy0tbylyW29dPWAoJHtyW28rMV19ICogJHtzW28rMV19KWA7cmV0dXJuIHJ9ZnVuY3Rpb24gdTkobixlLHQ9ImluZGV4Iil7Y29uc3Qgcz1uLm1hcCgobyxpKT0+aSkscj1sOShzLGUpO3JldHVybiByLm1hcCgobyxpKT0+e2NvbnN0IGE9YGludCAke25baV19ID0gJHt0fSAvICR7cltpXX1gLGw9aT09PXIubGVuZ3RoLTE/YGludCAke25baSsxXX0gPSAke3R9IC0gJHtuW2ldfSAqICR7cltpXX1gOmBpbmRleCAtPSAke25baV19ICogJHtyW2ldfWA7cmV0dXJuYCR7YX07ICR7bH07YH0pLmpvaW4oIiIpfWZ1bmN0aW9uIGN2KG4pe2NvbnN0IGU9emUobikubWFwKHQ9PnQudG9TdHJpbmcoKSk7cmV0dXJuYAogIGludCBnZXRGbGF0SW5kZXgoaXZlYzMgY29vcmRzKSB7CiAgICByZXR1cm4gY29vcmRzLnggKiAke2VbMF19ICsgY29vcmRzLnkgKiAke2VbMV19ICsgY29vcmRzLno7CiAgfQpgfWZ1bmN0aW9uIGR2KCl7cmV0dXJuYAogIGludCBnZXRGbGF0SW5kZXgoaXZlYzMgY29vcmRzKSB7CiAgICByZXR1cm4gY29vcmRzLnggKiBvdXRTaGFwZVN0cmlkZXNbMF0gKyBjb29yZHMueSAqIG91dFNoYXBlU3RyaWRlc1sxXSArIGNvb3Jkcy56OwogIH0KYH1jb25zdCBoRD1gCiAgY29uc3QgZmxvYXQgRkxPQVRfTUFYID0gMS43MDE0MTE4NGUzODsKICBjb25zdCBmbG9hdCBGTE9BVF9NSU4gPSAxLjE3NTQ5NDM1ZS0zODsKCiAgbG93cCB2ZWM0IGVuY29kZV9mbG9hdChoaWdocCBmbG9hdCB2KSB7CiAgICBpZiAoaXNuYW4odikpIHsKICAgICAgcmV0dXJuIHZlYzQoMjU1LCAyNTUsIDI1NSwgMjU1KTsKICAgIH0KCiAgICBoaWdocCBmbG9hdCBhdiA9IGFicyh2KTsKCiAgICBpZihhdiA8IEZMT0FUX01JTikgewogICAgICByZXR1cm4gdmVjNCgwLjAsIDAuMCwgMC4wLCAwLjApOwogICAgfSBlbHNlIGlmKHYgPiBGTE9BVF9NQVgpIHsKICAgICAgcmV0dXJuIHZlYzQoMC4wLCAwLjAsIDEyOC4wLCAxMjcuMCkgLyAyNTUuMDsKICAgIH0gZWxzZSBpZih2IDwgLUZMT0FUX01BWCkgewogICAgICByZXR1cm4gdmVjNCgwLjAsIDAuMCwgIDEyOC4wLCAyNTUuMCkgLyAyNTUuMDsKICAgIH0KCiAgICBoaWdocCB2ZWM0IGMgPSB2ZWM0KDAsMCwwLDApOwoKICAgIGhpZ2hwIGZsb2F0IGUgPSBmbG9vcihsb2cyKGF2KSk7CiAgICBoaWdocCBmbG9hdCBtID0gZXhwMihmcmFjdChsb2cyKGF2KSkpIC0gMS4wOwoKICAgIGNbMl0gPSBmbG9vcigxMjguMCAqIG0pOwogICAgbSAtPSBjWzJdIC8gMTI4LjA7CiAgICBjWzFdID0gZmxvb3IoMzI3NjguMCAqIG0pOwogICAgbSAtPSBjWzFdIC8gMzI3NjguMDsKICAgIGNbMF0gPSBmbG9vcig4Mzg4NjA4LjAgKiBtKTsKCiAgICBoaWdocCBmbG9hdCBlYmlhcyA9IGUgKyAxMjcuMDsKICAgIGNbM10gPSBmbG9vcihlYmlhcyAvIDIuMCk7CiAgICBlYmlhcyAtPSBjWzNdICogMi4wOwogICAgY1syXSArPSBmbG9vcihlYmlhcykgKiAxMjguMDsKCiAgICBjWzNdICs9IDEyOC4wICogc3RlcCgwLjAsIC12KTsKCiAgICByZXR1cm4gYyAvIDI1NS4wOwogIH0KYDsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdHtnZXRCcm9hZGNhc3REaW1zOnBEfT1PMjtmdW5jdGlvbiBjOShuLGUsdCl7Y29uc3Qgcz1bXTtpZihuLmZvckVhY2goZz0+e2NvbnN0IHk9Y2UoZy5zaGFwZUluZm8ubG9naWNhbFNoYXBlKTtpZihnLnNoYXBlSW5mby5pc1VuaWZvcm0/cy5wdXNoKGB1bmlmb3JtIGZsb2F0ICR7Zy5uYW1lfSR7eT4xP2BbJHt5fV1gOiIifTtgKToocy5wdXNoKGB1bmlmb3JtIHNhbXBsZXIyRCAke2cubmFtZX07YCkscy5wdXNoKGB1bmlmb3JtIGludCBvZmZzZXQke2cubmFtZX07YCkpLHQuZW5hYmxlU2hhcGVVbmlmb3Jtcyl7Y29uc3R7dW5pZm9ybVNoYXBlOnd9PWh2KHQucGFja2VkSW5wdXRzLGcuc2hhcGVJbmZvLmxvZ2ljYWxTaGFwZSxnLnNoYXBlSW5mby50ZXhTaGFwZSk7c3dpdGNoKHcubGVuZ3RoKXtjYXNlIDE6cy5wdXNoKGB1bmlmb3JtIGludCAke2cubmFtZX1TaGFwZTtgKTticmVhaztjYXNlIDI6cy5wdXNoKGB1bmlmb3JtIGl2ZWMyICR7Zy5uYW1lfVNoYXBlO2ApO2JyZWFrO2Nhc2UgMzpzLnB1c2goYHVuaWZvcm0gaXZlYzMgJHtnLm5hbWV9U2hhcGU7YCk7YnJlYWs7Y2FzZSA0OnMucHVzaChgdW5pZm9ybSBpdmVjNCAke2cubmFtZX1TaGFwZTtgKTticmVha31zLnB1c2goYHVuaWZvcm0gaXZlYzIgJHtnLm5hbWV9VGV4U2hhcGU7YCl9fSksdC5lbmFibGVTaGFwZVVuaWZvcm1zKXtzd2l0Y2goZS5sb2dpY2FsU2hhcGUubGVuZ3RoKXtjYXNlIDE6cy5wdXNoKCJ1bmlmb3JtIGludCBvdXRTaGFwZTsiKTticmVhaztjYXNlIDI6cy5wdXNoKCJ1bmlmb3JtIGl2ZWMyIG91dFNoYXBlOyIpLHMucHVzaCgidW5pZm9ybSBpbnQgb3V0U2hhcGVTdHJpZGVzOyIpO2JyZWFrO2Nhc2UgMzpzLnB1c2goInVuaWZvcm0gaXZlYzMgb3V0U2hhcGU7Iikscy5wdXNoKCJ1bmlmb3JtIGl2ZWMyIG91dFNoYXBlU3RyaWRlczsiKTticmVhaztjYXNlIDQ6cy5wdXNoKCJ1bmlmb3JtIGl2ZWM0IG91dFNoYXBlOyIpLHMucHVzaCgidW5pZm9ybSBpdmVjMyBvdXRTaGFwZVN0cmlkZXM7Iik7YnJlYWt9cy5wdXNoKCJ1bmlmb3JtIGl2ZWMyIG91dFRleFNoYXBlOyIpfXQuY3VzdG9tVW5pZm9ybXMmJnQuY3VzdG9tVW5pZm9ybXMuZm9yRWFjaChnPT57cy5wdXNoKGB1bmlmb3JtICR7Zy50eXBlfSAke2cubmFtZX0ke2cuYXJyYXlJbmRleD9gWyR7Zy5hcnJheUluZGV4fV1gOiIifTtgKX0pO2NvbnN0IHI9cy5qb2luKGAKYCksbz1uLm1hcChnPT5kOShnLGUsdC5wYWNrZWRJbnB1dHMsdC5lbmFibGVTaGFwZVVuaWZvcm1zKSkuam9pbihgCmApLGk9ZS50ZXhTaGFwZSxhPUtuKCksbD1mOShhKTtsZXQgYyxoLHA9eTkoYSk7cmV0dXJuIGUuaXNQYWNrZWQ/KGM9aDkoZS5sb2dpY2FsU2hhcGUsaSx0LmVuYWJsZVNoYXBlVW5pZm9ybXMpLGg9ZzkoYSkpOihjPXA5KGUubG9naWNhbFNoYXBlLGksdC5lbmFibGVTaGFwZVVuaWZvcm1zKSxoPW05KGEpKSx0LnBhY2tlZElucHV0cyYmKHArPXY5KSxbcCxsLGgscixjLG8sdC51c2VyQ29kZV0uam9pbihgCmApfWZ1bmN0aW9uIER1KG4sZT0hMSl7Y29uc3QgdD1uLnNoYXBlSW5mby5sb2dpY2FsU2hhcGU7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIF85KG4sZSk7Y2FzZSAxOnJldHVybiBGOShuLGUpO2Nhc2UgMjpyZXR1cm4gUDkobixlKTtjYXNlIDM6cmV0dXJuIE05KG4sZSk7Y2FzZSA0OnJldHVybiBWOShuLGUpO2Nhc2UgNTpyZXR1cm4gVzkobik7Y2FzZSA2OnJldHVybiBVOShuKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgJHt0Lmxlbmd0aH0tRCBpbnB1dCBzYW1wbGluZyBpcyBub3QgeWV0IHN1cHBvcnRlZGApfX1mdW5jdGlvbiBmRChuLGUpe3N3aXRjaChuLnNoYXBlSW5mby5sb2dpY2FsU2hhcGUubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIEE5KG4pO2Nhc2UgMTpyZXR1cm4gTzkobixlKTtjYXNlIDI6cmV0dXJuIEw5KG4sZSk7Y2FzZSAzOnJldHVybiB6OShuLGUpO2RlZmF1bHQ6cmV0dXJuIEI5KG4sZSl9fWZ1bmN0aW9uIGQ5KG4sZSx0PSExLHMpe2xldCByPSIiO3Q/cis9ZkQobixzKTpyKz1EdShuLHMpO2NvbnN0IG89bi5zaGFwZUluZm8ubG9naWNhbFNoYXBlLGk9ZS5sb2dpY2FsU2hhcGU7cmV0dXJuIG8ubGVuZ3RoPD1pLmxlbmd0aCYmKHQ/cis9ajkobixlKTpyKz1HOShuLGUpKSxyfWZ1bmN0aW9uIGg5KG4sZSx0KXtzd2l0Y2gobi5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbUQoKTtjYXNlIDE6cmV0dXJuIFM5KG4sZSx0KTtjYXNlIDI6cmV0dXJuIFI5KG4sZSx0KTtjYXNlIDM6cmV0dXJuIGs5KG4sZSx0KTtkZWZhdWx0OnJldHVybiAkOShuLGUsdCl9fWZ1bmN0aW9uIHA5KG4sZSx0KXtzd2l0Y2gobi5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbUQoKTtjYXNlIDE6cmV0dXJuIE45KG4sZSx0KTtjYXNlIDI6cmV0dXJuIEQ5KG4sZSx0KTtjYXNlIDM6cmV0dXJuIEM5KG4sZSx0KTtjYXNlIDQ6cmV0dXJuIEk5KG4sZSx0KTtjYXNlIDU6cmV0dXJuIFQ5KG4sZSk7Y2FzZSA2OnJldHVybiBFOShuLGUpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGAke24ubGVuZ3RofS1EIG91dHB1dCBzYW1wbGluZyBpcyBub3QgeWV0IHN1cHBvcnRlZGApfX1mdW5jdGlvbiBmOShuKXtyZXR1cm5gCiAgICBmbG9hdCBzYW1wbGVUZXh0dXJlKHNhbXBsZXIyRCB0ZXh0dXJlU2FtcGxlciwgdmVjMiB1dikgewogICAgICByZXR1cm4gJHtuLnRleHR1cmUyRH0odGV4dHVyZVNhbXBsZXIsIHV2KS5yOwogICAgfQogIGB9ZnVuY3Rpb24gbTkobil7cmV0dXJuYAogICAgdm9pZCBzZXRPdXRwdXQoZmxvYXQgdmFsKSB7CiAgICAgICR7bi5vdXRwdXR9ID0gdmVjNCh2YWwsIDAsIDAsIDApOwogICAgfQogIGB9ZnVuY3Rpb24gZzkobil7cmV0dXJuYAogICAgdm9pZCBzZXRPdXRwdXQodmVjNCB2YWwpIHsKICAgICAgJHtuLm91dHB1dH0gPSB2YWw7CiAgICB9CiAgYH1mdW5jdGlvbiB5OShuKXtyZXR1cm5gJHtuLnZlcnNpb259CiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7CiAgICBwcmVjaXNpb24gaGlnaHAgaW50OwogICAgcHJlY2lzaW9uIGhpZ2hwIHNhbXBsZXIyRDsKICAgICR7bi52YXJ5aW5nRnN9IHZlYzIgcmVzdWx0VVY7CiAgICAke24uZGVmaW5lT3V0cHV0fQogICAgY29uc3QgdmVjMiBoYWxmQ1IgPSB2ZWMyKDAuNSwgMC41KTsKCiAgICBzdHJ1Y3QgaXZlYzUKICAgIHsKICAgICAgaW50IHg7CiAgICAgIGludCB5OwogICAgICBpbnQgejsKICAgICAgaW50IHc7CiAgICAgIGludCB1OwogICAgfTsKCiAgICBzdHJ1Y3QgaXZlYzYKICAgIHsKICAgICAgaW50IHg7CiAgICAgIGludCB5OwogICAgICBpbnQgejsKICAgICAgaW50IHc7CiAgICAgIGludCB1OwogICAgICBpbnQgdjsKICAgIH07CgogICAgdW5pZm9ybSBmbG9hdCBOQU47CiAgICAke24uZGVmaW5lU3BlY2lhbE5hTn0KICAgICR7bi5kZWZpbmVTcGVjaWFsSW5mfQogICAgJHtuLmRlZmluZVJvdW5kfQoKICAgIGludCBpbW9kKGludCB4LCBpbnQgeSkgewogICAgICByZXR1cm4geCAtIHkgKiAoeCAvIHkpOwogICAgfQoKICAgIGludCBpZGl2KGludCBhLCBpbnQgYiwgZmxvYXQgc2lnbikgewogICAgICBpbnQgcmVzID0gYSAvIGI7CiAgICAgIGludCBtb2QgPSBpbW9kKGEsIGIpOwogICAgICBpZiAoc2lnbiA8IDAuICYmIG1vZCAhPSAwKSB7CiAgICAgICAgcmVzIC09IDE7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlczsKICAgIH0KCiAgICAvL0Jhc2VkIG9uIHRoZSB3b3JrIG9mIERhdmUgSG9za2lucwogICAgLy9odHRwczovL3d3dy5zaGFkZXJ0b3kuY29tL3ZpZXcvNGRqU1JXCiAgICAjZGVmaW5lIEhBU0hTQ0FMRTEgNDQzLjg5NzUKICAgIGZsb2F0IHJhbmRvbShmbG9hdCBzZWVkKXsKICAgICAgdmVjMiBwID0gcmVzdWx0VVYgKiBzZWVkOwogICAgICB2ZWMzIHAzICA9IGZyYWN0KHZlYzMocC54eXgpICogSEFTSFNDQUxFMSk7CiAgICAgIHAzICs9IGRvdChwMywgcDMueXp4ICsgMTkuMTkpOwogICAgICByZXR1cm4gZnJhY3QoKHAzLnggKyBwMy55KSAqIHAzLnopOwogICAgfQoKICAgICR7eDl9CiAgICAke2I5fQogICAgJHt3OX0KICBgfWNvbnN0IHg5PWAKdmVjMiB1dkZyb21GbGF0KGludCB0ZXhOdW1SLCBpbnQgdGV4TnVtQywgaW50IGluZGV4KSB7CiAgaW50IHRleFIgPSBpbmRleCAvIHRleE51bUM7CiAgaW50IHRleEMgPSBpbmRleCAtIHRleFIgKiB0ZXhOdW1DOwogIHJldHVybiAodmVjMih0ZXhDLCB0ZXhSKSArIGhhbGZDUikgLyB2ZWMyKHRleE51bUMsIHRleE51bVIpOwp9CnZlYzIgcGFja2VkVVZmcm9tMUQoaW50IHRleE51bVIsIGludCB0ZXhOdW1DLCBpbnQgaW5kZXgpIHsKICBpbnQgdGV4ZWxJbmRleCA9IGluZGV4IC8gMjsKICBpbnQgdGV4UiA9IHRleGVsSW5kZXggLyB0ZXhOdW1DOwogIGludCB0ZXhDID0gdGV4ZWxJbmRleCAtIHRleFIgKiB0ZXhOdW1DOwogIHJldHVybiAodmVjMih0ZXhDLCB0ZXhSKSArIGhhbGZDUikgLyB2ZWMyKHRleE51bUMsIHRleE51bVIpOwp9CmAsYjk9YAp2ZWMyIHBhY2tlZFVWZnJvbTJEKGludCB0ZXhlbHNJbkxvZ2ljYWxSb3csIGludCB0ZXhOdW1SLAogIGludCB0ZXhOdW1DLCBpbnQgcm93LCBpbnQgY29sKSB7CiAgaW50IHRleGVsSW5kZXggPSAocm93IC8gMikgKiB0ZXhlbHNJbkxvZ2ljYWxSb3cgKyAoY29sIC8gMik7CiAgaW50IHRleFIgPSB0ZXhlbEluZGV4IC8gdGV4TnVtQzsKICBpbnQgdGV4QyA9IHRleGVsSW5kZXggLSB0ZXhSICogdGV4TnVtQzsKICByZXR1cm4gKHZlYzIodGV4QywgdGV4UikgKyBoYWxmQ1IpIC8gdmVjMih0ZXhOdW1DLCB0ZXhOdW1SKTsKfQpgLHc5PWAKdmVjMiBwYWNrZWRVVmZyb20zRChpbnQgdGV4TnVtUiwgaW50IHRleE51bUMsCiAgICBpbnQgdGV4ZWxzSW5CYXRjaCwgaW50IHRleGVsc0luTG9naWNhbFJvdywgaW50IGIsCiAgICBpbnQgcm93LCBpbnQgY29sKSB7CiAgaW50IGluZGV4ID0gYiAqIHRleGVsc0luQmF0Y2ggKyAocm93IC8gMikgKiB0ZXhlbHNJbkxvZ2ljYWxSb3cgKyAoY29sIC8gMik7CiAgaW50IHRleFIgPSBpbmRleCAvIHRleE51bUM7CiAgaW50IHRleEMgPSBpbmRleCAtIHRleFIgKiB0ZXhOdW1DOwogIHJldHVybiAodmVjMih0ZXhDLCB0ZXhSKSArIGhhbGZDUikgLyB2ZWMyKHRleE51bUMsIHRleE51bVIpOwp9CmAsdjk9YAogIGZsb2F0IGdldENoYW5uZWwodmVjNCBmcmFnLCB2ZWMyIGlubmVyRGltcykgewogICAgdmVjMiBtb2RDb29yZCA9IG1vZChpbm5lckRpbXMsIDIuKTsKICAgIHJldHVybiBtb2RDb29yZC54ID09IDAuID8KICAgICAgKG1vZENvb3JkLnkgPT0gMC4gPyBmcmFnLnIgOiBmcmFnLmcpIDoKICAgICAgKG1vZENvb3JkLnkgPT0gMC4gPyBmcmFnLmIgOiBmcmFnLmEpOwogIH0KICBmbG9hdCBnZXRDaGFubmVsKHZlYzQgZnJhZywgaW50IGRpbSkgewogICAgZmxvYXQgbW9kQ29vcmQgPSBtb2QoZmxvYXQoZGltKSwgMi4pOwogICAgcmV0dXJuIG1vZENvb3JkID09IDAuID8gZnJhZy5yIDogZnJhZy5nOwogIH0KYDtmdW5jdGlvbiBtRCgpe3JldHVybmAKICAgIGludCBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogIGB9ZnVuY3Rpb24gUzkobixlLHQpe2NvbnN0IHM9W01hdGguY2VpbChlWzBdLzIpLE1hdGguY2VpbChlWzFdLzIpXTtyZXR1cm4gc1swXT09PTE/dD9gCiAgICAgIGludCBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgICAgcmV0dXJuIDIgKiBpbnQocmVzdWx0VVYueCAqIGNlaWwoZmxvYXQob3V0VGV4U2hhcGVbMV0pIC8gMi4wKSk7CiAgICAgIH0KICAgIGA6YAogICAgICBpbnQgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICAgIHJldHVybiAyICogaW50KHJlc3VsdFVWLnggKiAke3NbMV19LjApOwogICAgICB9CiAgICBgOnNbMV09PT0xP3Q/YAogICAgICBpbnQgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICAgIHJldHVybiAyICogaW50KHJlc3VsdFVWLnkgKiBjZWlsKGZsb2F0KG91dFRleFNoYXBlWzBdKSAvIDIuMCkpOwogICAgICB9CiAgICBgOmAKICAgICAgaW50IGdldE91dHB1dENvb3JkcygpIHsKICAgICAgICByZXR1cm4gMiAqIGludChyZXN1bHRVVi55ICogJHtzWzBdfS4wKTsKICAgICAgfQogICAgYDp0P2AKICAgIGludCBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgIGl2ZWMyIHBhY2tlZFRleFNoYXBlID0gaXZlYzIoY2VpbChmbG9hdChvdXRUZXhTaGFwZVswXSkgLyAyLjApLCBjZWlsKGZsb2F0KG91dFRleFNoYXBlWzFdKSAvIDIuMCkpOwogICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyKHBhY2tlZFRleFNoYXBlWzBdLCBwYWNrZWRUZXhTaGFwZVsxXSkpOwogICAgICByZXR1cm4gMiAqIChyZXNUZXhSQy54ICogcGFja2VkVGV4U2hhcGVbMV0gKyByZXNUZXhSQy55KTsKICAgIH0KICBgOmAKICAgIGludCBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgIGl2ZWMyIHJlc1RleFJDID0gaXZlYzIocmVzdWx0VVYueXggKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIoJHtzWzBdfSwgJHtzWzFdfSkpOwogICAgICByZXR1cm4gMiAqIChyZXNUZXhSQy54ICogJHtzWzFdfSArIHJlc1RleFJDLnkpOwogICAgfQogIGB9ZnVuY3Rpb24gTjkobixlLHQpe3JldHVybiBlWzBdPT09MT90P2AKICAgICAgaW50IGdldE91dHB1dENvb3JkcygpIHsKICAgICAgICByZXR1cm4gaW50KHJlc3VsdFVWLnggKiBmbG9hdChvdXRUZXhTaGFwZVsxXSkpOwogICAgICB9CiAgICBgOmAKICAgICAgaW50IGdldE91dHB1dENvb3JkcygpIHsKICAgICAgICByZXR1cm4gaW50KHJlc3VsdFVWLnggKiAke2VbMV19LjApOwogICAgICB9CiAgICBgOmVbMV09PT0xP3Q/YAogICAgICBpbnQgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICAgIHJldHVybiBpbnQocmVzdWx0VVYueSAqIGZsb2F0KG91dFRleFNoYXBlWzBdKSk7CiAgICAgIH0KICAgIGA6YAogICAgICBpbnQgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICAgIHJldHVybiBpbnQocmVzdWx0VVYueSAqICR7ZVswXX0uMCk7CiAgICAgIH0KICAgIGA6dD9gCiAgICBpbnQgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyKG91dFRleFNoYXBlWzBdLCBvdXRUZXhTaGFwZVsxXSkpOwogICAgICByZXR1cm4gcmVzVGV4UkMueCAqIG91dFRleFNoYXBlWzFdICsgcmVzVGV4UkMueTsKICAgIH0KICBgOmAKICAgIGludCBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgIGl2ZWMyIHJlc1RleFJDID0gaXZlYzIocmVzdWx0VVYueXggKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIoJHtlWzBdfSwgJHtlWzFdfSkpOwogICAgICByZXR1cm4gcmVzVGV4UkMueCAqICR7ZVsxXX0gKyByZXNUZXhSQy55OwogICAgfQogIGB9ZnVuY3Rpb24gazkobixlLHQpe2lmKHQpcmV0dXJuYAogICAgaXZlYzMgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICBpdmVjMiBwYWNrZWRUZXhTaGFwZSA9IGl2ZWMyKGNlaWwoZmxvYXQob3V0VGV4U2hhcGVbMF0pIC8gMi4wKSwgY2VpbChmbG9hdChvdXRUZXhTaGFwZVsxXSkgLyAyLjApKTsKICAgICAgaW50IHRleGVsc0luTG9naWNhbFJvdyA9IGludChjZWlsKGZsb2F0KG91dFNoYXBlWzJdKSAvIDIuMCkpOwogICAgICBpbnQgdGV4ZWxzSW5CYXRjaCA9IHRleGVsc0luTG9naWNhbFJvdyAqIGludChjZWlsKGZsb2F0KG91dFNoYXBlWzFdKSAvIDIuMCkpOwogICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyKHBhY2tlZFRleFNoYXBlWzBdLCBwYWNrZWRUZXhTaGFwZVsxXSkpOwogICAgICBpbnQgaW5kZXggPSByZXNUZXhSQy54ICogcGFja2VkVGV4U2hhcGVbMV0gKyByZXNUZXhSQy55OwoKICAgICAgaW50IGIgPSBpbmRleCAvIHRleGVsc0luQmF0Y2g7CiAgICAgIGluZGV4IC09IGIgKiB0ZXhlbHNJbkJhdGNoOwoKICAgICAgaW50IHIgPSAyICogKGluZGV4IC8gdGV4ZWxzSW5Mb2dpY2FsUm93KTsKICAgICAgaW50IGMgPSBpbW9kKGluZGV4LCB0ZXhlbHNJbkxvZ2ljYWxSb3cpICogMjsKCiAgICAgIHJldHVybiBpdmVjMyhiLCByLCBjKTsKICAgIH0KICBgO2NvbnN0IHM9W01hdGguY2VpbChlWzBdLzIpLE1hdGguY2VpbChlWzFdLzIpXSxyPU1hdGguY2VpbChuWzJdLzIpLG89cipNYXRoLmNlaWwoblsxXS8yKTtyZXR1cm5gCiAgICBpdmVjMyBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgIGl2ZWMyIHJlc1RleFJDID0gaXZlYzIocmVzdWx0VVYueXggKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIoJHtzWzBdfSwgJHtzWzFdfSkpOwogICAgICBpbnQgaW5kZXggPSByZXNUZXhSQy54ICogJHtzWzFdfSArIHJlc1RleFJDLnk7CgogICAgICBpbnQgYiA9IGluZGV4IC8gJHtvfTsKICAgICAgaW5kZXggLT0gYiAqICR7b307CgogICAgICBpbnQgciA9IDIgKiAoaW5kZXggLyAke3J9KTsKICAgICAgaW50IGMgPSBpbW9kKGluZGV4LCAke3J9KSAqIDI7CgogICAgICByZXR1cm4gaXZlYzMoYiwgciwgYyk7CiAgICB9CiAgYH1mdW5jdGlvbiBDOShuLGUsdCl7aWYodClyZXR1cm5gCiAgaXZlYzMgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgaXZlYzIgcmVzVGV4UkMgPSBpdmVjMihyZXN1bHRVVi55eCAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIob3V0VGV4U2hhcGVbMF0sIG91dFRleFNoYXBlWzFdKSk7CiAgICBpbnQgaW5kZXggPSByZXNUZXhSQy54ICogb3V0VGV4U2hhcGVbMV0gKyByZXNUZXhSQy55OwogICAgJHtseShbInIiLCJjIiwiZCJdLG4pfQogICAgcmV0dXJuIGl2ZWMzKHIsIGMsIGQpOwogIH0KYDtjb25zdCBzPUVhKFsiciIsImMiLCJkIl0sbik7cmV0dXJuYAogICAgaXZlYzMgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyKCR7ZVswXX0sICR7ZVsxXX0pKTsKICAgICAgaW50IGluZGV4ID0gcmVzVGV4UkMueCAqICR7ZVsxXX0gKyByZXNUZXhSQy55OwogICAgICAke3N9CiAgICAgIHJldHVybiBpdmVjMyhyLCBjLCBkKTsKICAgIH0KICBgfWZ1bmN0aW9uICQ5KG4sZSx0KXtpZih0KXJldHVybmAKICAgIGl2ZWM0IGdldE91dHB1dENvb3JkcygpIHsKICAgICAgaXZlYzIgcGFja2VkVGV4U2hhcGUgPSBpdmVjMihjZWlsKGZsb2F0KG91dFRleFNoYXBlWzBdKSAvIDIuMCksIGNlaWwoZmxvYXQob3V0VGV4U2hhcGVbMV0pIC8gMi4wKSk7CiAgICAgIGl2ZWMyIHJlc1RleFJDID0gaXZlYzIocmVzdWx0VVYueXggKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIocGFja2VkVGV4U2hhcGVbMF0sIHBhY2tlZFRleFNoYXBlWzFdKSk7CiAgICAgIGludCBpbmRleCA9IHJlc1RleFJDLnggKiBwYWNrZWRUZXhTaGFwZVsxXSArIHJlc1RleFJDLnk7CgogICAgICBpbnQgdGV4ZWxzSW5Mb2dpY2FsUm93ID0gaW50KGNlaWwoZmxvYXQob3V0U2hhcGVbM10pIC8gMi4wKSk7CiAgICAgIGludCB0ZXhlbHNJbkJhdGNoID0gdGV4ZWxzSW5Mb2dpY2FsUm93ICogaW50KGNlaWwoZmxvYXQob3V0U2hhcGVbMl0pIC8gMi4wKSk7CiAgICAgIGludCB0ZXhlbHNJbkJhdGNoTiA9IHRleGVsc0luQmF0Y2ggKiBvdXRTaGFwZVsxXTsKCiAgICAgIGludCBiMiA9IGluZGV4IC8gdGV4ZWxzSW5CYXRjaE47CiAgICAgIGluZGV4IC09IGIyICogdGV4ZWxzSW5CYXRjaE47CgogICAgICBpbnQgYiA9IGluZGV4IC8gdGV4ZWxzSW5CYXRjaDsKICAgICAgaW5kZXggLT0gYiAqIHRleGVsc0luQmF0Y2g7CgogICAgICBpbnQgciA9IDIgKiAoaW5kZXggLyB0ZXhlbHNJbkxvZ2ljYWxSb3cpOwogICAgICBpbnQgYyA9IGltb2QoaW5kZXgsIHRleGVsc0luTG9naWNhbFJvdykgKiAyOwoKICAgICAgcmV0dXJuIGl2ZWM0KGIyLCBiLCByLCBjKTsKICAgIH0KICBgO2NvbnN0IHM9W01hdGguY2VpbChlWzBdLzIpLE1hdGguY2VpbChlWzFdLzIpXSxyPU1hdGguY2VpbChuW24ubGVuZ3RoLTFdLzIpLG89cipNYXRoLmNlaWwobltuLmxlbmd0aC0yXS8yKTtsZXQgaT1vLGE9IiIsbD0iYiwgciwgYyI7Zm9yKGxldCBjPTI7YzxuLmxlbmd0aC0xO2MrKylpKj1uW24ubGVuZ3RoLWMtMV0sYT1gCiAgICAgIGludCBiJHtjfSA9IGluZGV4IC8gJHtpfTsKICAgICAgaW5kZXggLT0gYiR7Y30gKiAke2l9OwogICAgYCthLGw9YGIke2N9LCBgK2w7cmV0dXJuYAogICAgaXZlYyR7bi5sZW5ndGh9IGdldE91dHB1dENvb3JkcygpIHsKICAgICAgaXZlYzIgcmVzVGV4UkMgPSBpdmVjMihyZXN1bHRVVi55eCAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMigke3NbMF19LCAke3NbMV19KSk7CiAgICAgIGludCBpbmRleCA9IHJlc1RleFJDLnggKiAke3NbMV19ICsgcmVzVGV4UkMueTsKCiAgICAgICR7YX0KCiAgICAgIGludCBiID0gaW5kZXggLyAke299OwogICAgICBpbmRleCAtPSBiICogJHtvfTsKCiAgICAgIGludCByID0gMiAqIChpbmRleCAvICR7cn0pOwogICAgICBpbnQgYyA9IGltb2QoaW5kZXgsICR7cn0pICogMjsKCiAgICAgIHJldHVybiBpdmVjJHtuLmxlbmd0aH0oJHtsfSk7CiAgICB9CiAgYH1mdW5jdGlvbiBJOShuLGUsdCl7aWYodClyZXR1cm5gCiAgICBpdmVjNCBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgIGl2ZWMyIHJlc1RleFJDID0gaXZlYzIocmVzdWx0VVYueXggKgogICAgICAgIHZlYzIob3V0VGV4U2hhcGVbMF0sIG91dFRleFNoYXBlWzFdKSk7CiAgICAgIGludCBpbmRleCA9IHJlc1RleFJDLnggKiBvdXRUZXhTaGFwZVsxXSArIHJlc1RleFJDLnk7CiAgICAgICR7bHkoWyJyIiwiYyIsImQiLCJkMiJdLG4pfQogICAgICByZXR1cm4gaXZlYzQociwgYywgZCwgZDIpOwogICAgfQogIGA7Y29uc3Qgcz1FYShbInIiLCJjIiwiZCIsImQyIl0sbik7cmV0dXJuYAogICAgaXZlYzQgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICB2ZWMyKCR7ZVswXX0sICR7ZVsxXX0pKTsKICAgICAgaW50IGluZGV4ID0gcmVzVGV4UkMueCAqICR7ZVsxXX0gKyByZXNUZXhSQy55OwogICAgICAke3N9CiAgICAgIHJldHVybiBpdmVjNChyLCBjLCBkLCBkMik7CiAgICB9CiAgYH1mdW5jdGlvbiBUOShuLGUpe2NvbnN0IHQ9RWEoWyJyIiwiYyIsImQiLCJkMiIsImQzIl0sbik7cmV0dXJuYAogICAgaXZlYzUgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICogdmVjMigke2VbMF19LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZVsxXX0pKTsKCiAgICAgIGludCBpbmRleCA9IHJlc1RleFJDLnggKiAke2VbMV19ICsgcmVzVGV4UkMueTsKCiAgICAgICR7dH0KCiAgICAgIGl2ZWM1IG91dFNoYXBlID0gaXZlYzUociwgYywgZCwgZDIsIGQzKTsKICAgICAgcmV0dXJuIG91dFNoYXBlOwogICAgfQogIGB9ZnVuY3Rpb24gRTkobixlKXtjb25zdCB0PUVhKFsiciIsImMiLCJkIiwiZDIiLCJkMyIsImQ0Il0sbik7cmV0dXJuYAogICAgaXZlYzYgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICB2ZWMyKCR7ZVswXX0sICR7ZVsxXX0pKTsKICAgICAgaW50IGluZGV4ID0gcmVzVGV4UkMueCAqICR7ZVsxXX0gKyByZXNUZXhSQy55OwoKICAgICAgJHt0fQoKICAgICAgaXZlYzYgcmVzdWx0ID0gaXZlYzYociwgYywgZCwgZDIsIGQzLCBkNCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgYH1mdW5jdGlvbiBSOShuLGUsdCl7Y29uc3Qgcz1bTWF0aC5jZWlsKGVbMF0vMiksTWF0aC5jZWlsKGVbMV0vMildO2lmKEplKG4sZSkpcmV0dXJuIHQ/YAogICAgICBpdmVjMiBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgICAgaXZlYzIgcGFja2VkVGV4U2hhcGUgPSBpdmVjMihjZWlsKGZsb2F0KG91dFRleFNoYXBlWzBdKSAvIDIuMCksIGNlaWwoZmxvYXQob3V0VGV4U2hhcGVbMV0pIC8gMi4wKSk7CiAgICAgICAgcmV0dXJuIDIgKiBpdmVjMihyZXN1bHRVVi55eCAqIHZlYzIocGFja2VkVGV4U2hhcGVbMF0sIHBhY2tlZFRleFNoYXBlWzFdKSk7CiAgICAgIH0KICAgIGA6YAogICAgICBpdmVjMiBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgICAgcmV0dXJuIDIgKiBpdmVjMihyZXN1bHRVVi55eCAqIHZlYzIoJHtzWzBdfSwgJHtzWzFdfSkpOwogICAgICB9CiAgICBgO2NvbnN0IHI9TWF0aC5jZWlsKG5bMV0vMik7cmV0dXJuIHQ/YAogICAgaXZlYzIgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICBpdmVjMiBwYWNrZWRUZXhTaGFwZSA9IGl2ZWMyKGNlaWwoZmxvYXQob3V0VGV4U2hhcGVbMF0pIC8gMi4wKSwgY2VpbChmbG9hdChvdXRUZXhTaGFwZVsxXSkgLyAyLjApKTsKICAgICAgaW50IHRleGVsc0luTG9naWNhbFJvdyA9IGludChjZWlsKGZsb2F0KG91dFNoYXBlWzFdKSAvIDIuMCkpOwogICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyKHBhY2tlZFRleFNoYXBlWzBdLCBwYWNrZWRUZXhTaGFwZVsxXSkpOwoKICAgICAgaW50IGluZGV4ID0gcmVzVGV4UkMueCAqIHBhY2tlZFRleFNoYXBlWzFdICsgcmVzVGV4UkMueTsKICAgICAgaW50IHIgPSAyICogKGluZGV4IC8gdGV4ZWxzSW5Mb2dpY2FsUm93KTsKICAgICAgaW50IGMgPSBpbW9kKGluZGV4LCB0ZXhlbHNJbkxvZ2ljYWxSb3cpICogMjsKCiAgICAgIHJldHVybiBpdmVjMihyLCBjKTsKICAgIH0KICBgOmAKICAgIGl2ZWMyIGdldE91dHB1dENvb3JkcygpIHsKICAgICAgaXZlYzIgcmVzVGV4UkMgPSBpdmVjMihyZXN1bHRVVi55eCAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMigke3NbMF19LCAke3NbMV19KSk7CgogICAgICBpbnQgaW5kZXggPSByZXNUZXhSQy54ICogJHtzWzFdfSArIHJlc1RleFJDLnk7CiAgICAgIGludCByID0gMiAqIChpbmRleCAvICR7cn0pOwogICAgICBpbnQgYyA9IGltb2QoaW5kZXgsICR7cn0pICogMjsKCiAgICAgIHJldHVybiBpdmVjMihyLCBjKTsKICAgIH0KICBgfWZ1bmN0aW9uIEQ5KG4sZSx0KXtyZXR1cm4gSmUobixlKT90P2AKICAgICAgaXZlYzIgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICAgIHJldHVybiBpdmVjMihyZXN1bHRVVi55eCAqIHZlYzIob3V0VGV4U2hhcGVbMF0sIG91dFRleFNoYXBlWzFdKSk7CiAgICAgIH0KICAgIGA6YAogICAgICBpdmVjMiBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgICAgcmV0dXJuIGl2ZWMyKHJlc3VsdFVWLnl4ICogdmVjMigke2VbMF19LCAke2VbMV19KSk7CiAgICAgIH0KICAgIGA6blsxXT09PTE/dD9gCiAgICAgIGl2ZWMyIGdldE91dHB1dENvb3JkcygpIHsKICAgICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIob3V0VGV4U2hhcGVbMF0sIG91dFRleFNoYXBlWzFdKSk7CiAgICAgICAgaW50IGluZGV4ID0gcmVzVGV4UkMueCAqIG91dFRleFNoYXBlWzFdICsgcmVzVGV4UkMueTsKICAgICAgICByZXR1cm4gaXZlYzIoaW5kZXgsIDApOwogICAgICB9CiAgICBgOmAKICAgICAgaXZlYzIgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICAgIGl2ZWMyIHJlc1RleFJDID0gaXZlYzIocmVzdWx0VVYueXggKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMigke2VbMF19LCAke2VbMV19KSk7CiAgICAgICAgaW50IGluZGV4ID0gcmVzVGV4UkMueCAqICR7ZVsxXX0gKyByZXNUZXhSQy55OwogICAgICAgIHJldHVybiBpdmVjMihpbmRleCwgMCk7CiAgICAgIH0KICAgIGA6blswXT09PTE/dD9gCiAgICAgIGl2ZWMyIGdldE91dHB1dENvb3JkcygpIHsKICAgICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIob3V0VGV4U2hhcGVbMF0sIG91dFRleFNoYXBlWzFdKSk7CiAgICAgICAgaW50IGluZGV4ID0gcmVzVGV4UkMueCAqIG91dFRleFNoYXBlWzFdICsgcmVzVGV4UkMueTsKICAgICAgICByZXR1cm4gaXZlYzIoMCwgaW5kZXgpOwogICAgICB9CiAgICBgOmAKICAgICAgaXZlYzIgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICAgIGl2ZWMyIHJlc1RleFJDID0gaXZlYzIocmVzdWx0VVYueXggKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMigke2VbMF19LCAke2VbMV19KSk7CiAgICAgICAgaW50IGluZGV4ID0gcmVzVGV4UkMueCAqICR7ZVsxXX0gKyByZXNUZXhSQy55OwogICAgICAgIHJldHVybiBpdmVjMigwLCBpbmRleCk7CiAgICAgIH0KICAgIGA6dD9gCiAgICBpdmVjMiBnZXRPdXRwdXRDb29yZHMoKSB7CiAgICAgIGl2ZWMyIHJlc1RleFJDID0gaXZlYzIocmVzdWx0VVYueXggKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIob3V0VGV4U2hhcGVbMF0sIG91dFRleFNoYXBlWzFdKSk7CiAgICAgIGludCBpbmRleCA9IHJlc1RleFJDLnggKiBvdXRUZXhTaGFwZVsxXSArIHJlc1RleFJDLnk7CiAgICAgIGludCByID0gaW5kZXggLyBvdXRTaGFwZVsxXTsKICAgICAgaW50IGMgPSBpbmRleCAtIHIgKiBvdXRTaGFwZVsxXTsKICAgICAgcmV0dXJuIGl2ZWMyKHIsIGMpOwogICAgfQogIGA6YAogICAgaXZlYzIgZ2V0T3V0cHV0Q29vcmRzKCkgewogICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyKCR7ZVswXX0sICR7ZVsxXX0pKTsKICAgICAgaW50IGluZGV4ID0gcmVzVGV4UkMueCAqICR7ZVsxXX0gKyByZXNUZXhSQy55OwogICAgICBpbnQgciA9IGluZGV4IC8gJHtuWzFdfTsKICAgICAgaW50IGMgPSBpbmRleCAtIHIgKiAke25bMV19OwogICAgICByZXR1cm4gaXZlYzIociwgYyk7CiAgICB9CiAgYH1mdW5jdGlvbiBSYShuKXtyZXR1cm5gb2Zmc2V0JHtufWB9ZnVuY3Rpb24gQTkobil7Y29uc3QgZT1uLm5hbWUsdD0iZ2V0IitlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSkscz1LbigpO3JldHVybmAKICAgIHZlYzQgJHt0fSgpIHsKICAgICAgcmV0dXJuICR7cy50ZXh0dXJlMkR9KCR7ZX0sIGhhbGZDUik7CiAgICB9CiAgYH1mdW5jdGlvbiBfOShuLGUpe2NvbnN0IHQ9bi5uYW1lLHM9ImdldCIrdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpO2lmKG4uc2hhcGVJbmZvLmlzVW5pZm9ybSlyZXR1cm5gZmxvYXQgJHtzfSgpIHtyZXR1cm4gJHt0fTt9YDtjb25zdFtyLG9dPW4uc2hhcGVJbmZvLnRleFNoYXBlO2lmKHI9PT0xJiZvPT09MSlyZXR1cm5gCiAgICAgIGZsb2F0ICR7c30oKSB7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHt0fSwgaGFsZkNSKTsKICAgICAgfQogICAgYDtjb25zdCBpPVJhKHQpO2lmKGUpcmV0dXJuYAogICAgZmxvYXQgJHtzfSgpIHsKICAgICAgdmVjMiB1diA9IHV2RnJvbUZsYXQoJHt0fVRleFNoYXBlWzBdLCAke3R9VGV4U2hhcGVbMV0sICR7aX0pOwogICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3R9LCB1dik7CiAgICB9CiAgYDtjb25zdFthLGxdPW4uc2hhcGVJbmZvLnRleFNoYXBlO3JldHVybmAKICAgIGZsb2F0ICR7c30oKSB7CiAgICAgIHZlYzIgdXYgPSB1dkZyb21GbGF0KCR7YX0sICR7bH0sICR7aX0pOwogICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3R9LCB1dik7CiAgICB9CiAgYH1mdW5jdGlvbiBPOShuLGUpe2NvbnN0IHQ9bi5uYW1lLHM9ImdldCIrdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9bi5zaGFwZUluZm8udGV4U2hhcGUsbz1LbigpO2lmKGUpcmV0dXJuYAogICAgdmVjNCAke3N9KGludCBpbmRleCkgewogICAgICBpdmVjMiBwYWNrZWRUZXhTaGFwZSA9IGl2ZWMyKGNlaWwoZmxvYXQoJHt0fVRleFNoYXBlWzBdKSAvIDIuMCksIGNlaWwoZmxvYXQoJHt0fVRleFNoYXBlWzFdKSAvIDIuMCkpOwogICAgICB2ZWMyIHV2ID0gcGFja2VkVVZmcm9tMUQoCiAgICAgICAgcGFja2VkVGV4U2hhcGVbMF0sIHBhY2tlZFRleFNoYXBlWzFdLCBpbmRleCk7CiAgICAgIHJldHVybiAke28udGV4dHVyZTJEfSgke3R9LCB1dik7CiAgICB9CiAgYDtjb25zdCBpPVtNYXRoLmNlaWwoclswXS8yKSxNYXRoLmNlaWwoclsxXS8yKV07cmV0dXJuYAogICAgdmVjNCAke3N9KGludCBpbmRleCkgewogICAgICB2ZWMyIHV2ID0gcGFja2VkVVZmcm9tMUQoCiAgICAgICAgJHtpWzBdfSwgJHtpWzFdfSwgaW5kZXgpOwogICAgICByZXR1cm4gJHtvLnRleHR1cmUyRH0oJHt0fSwgdXYpOwogICAgfQogIGB9ZnVuY3Rpb24gRjkobixlKXtjb25zdCB0PW4ubmFtZSxzPSJnZXQiK3QuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKTtpZihuLnNoYXBlSW5mby5pc1VuaWZvcm0pcmV0dXJuYAogICAgICBmbG9hdCAke3N9KGludCBpbmRleCkgewogICAgICAgICR7QXUobil9CiAgICAgIH0KICAgIGA7Y29uc3Qgcj1uLnNoYXBlSW5mby50ZXhTaGFwZSxvPXJbMF0saT1yWzFdO2lmKGk9PT0xJiZvPT09MSlyZXR1cm5gCiAgICAgIGZsb2F0ICR7c30oaW50IGluZGV4KSB7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHt0fSwgaGFsZkNSKTsKICAgICAgfQogICAgYDtjb25zdCBhPVJhKHQpO3JldHVybiBpPT09MT9lP2AKICAgICAgZmxvYXQgJHtzfShpbnQgaW5kZXgpIHsKICAgICAgICB2ZWMyIHV2ID0gdmVjMigwLjUsIChmbG9hdChpbmRleCArICR7YX0pICsgMC41KSAvIGZsb2F0KCR7dH1UZXhTaGFwZVswXSkpOwogICAgICAgIHJldHVybiBzYW1wbGVUZXh0dXJlKCR7dH0sIHV2KTsKICAgICAgfQogICAgYDpgCiAgICAgIGZsb2F0ICR7c30oaW50IGluZGV4KSB7CiAgICAgICAgdmVjMiB1diA9IHZlYzIoMC41LCAoZmxvYXQoaW5kZXggKyAke2F9KSArIDAuNSkgLyAke299LjApOwogICAgICAgIHJldHVybiBzYW1wbGVUZXh0dXJlKCR7dH0sIHV2KTsKICAgICAgfQogICAgYDpvPT09MT9lP2AKICAgICAgZmxvYXQgJHtzfShpbnQgaW5kZXgpIHsKICAgICAgICB2ZWMyIHV2ID0gdmVjMigoZmxvYXQoaW5kZXggKyAke2F9KSArIDAuNSkgLyBmbG9hdCgke3R9VGV4U2hhcGVbMV0pLCAwLjUpOwogICAgICAgIHJldHVybiBzYW1wbGVUZXh0dXJlKCR7dH0sIHV2KTsKICAgICAgfQogICAgYDpgCiAgICAgIGZsb2F0ICR7c30oaW50IGluZGV4KSB7CiAgICAgICAgdmVjMiB1diA9IHZlYzIoKGZsb2F0KGluZGV4ICsgJHthfSkgKyAwLjUpIC8gJHtpfS4wLCAwLjUpOwogICAgICAgIHJldHVybiBzYW1wbGVUZXh0dXJlKCR7dH0sIHV2KTsKICAgICAgfQogICAgYDplP2AKICAgIGZsb2F0ICR7c30oaW50IGluZGV4KSB7CiAgICAgIHZlYzIgdXYgPSB1dkZyb21GbGF0KCR7dH1UZXhTaGFwZVswXSwgJHt0fVRleFNoYXBlWzFdLCBpbmRleCArICR7YX0pOwogICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3R9LCB1dik7CiAgICB9CiAgYDpgCiAgICBmbG9hdCAke3N9KGludCBpbmRleCkgewogICAgICB2ZWMyIHV2ID0gdXZGcm9tRmxhdCgke299LCAke2l9LCBpbmRleCArICR7YX0pOwogICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3R9LCB1dik7CiAgICB9CiAgYH1mdW5jdGlvbiBMOShuLGUpe2NvbnN0IHQ9bi5zaGFwZUluZm8ubG9naWNhbFNoYXBlLHM9bi5uYW1lLHI9ImdldCIrcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpLG89bi5zaGFwZUluZm8udGV4U2hhcGUsaT1vWzBdLGE9b1sxXSxsPUtuKCk7aWYobyE9bnVsbCYmSmUodCxvKSlyZXR1cm4gZT9gCiAgICAgIHZlYzQgJHtyfShpbnQgcm93LCBpbnQgY29sKSB7CiAgICAgICAgdmVjMiB1diA9ICh2ZWMyKGNvbCwgcm93KSArIGhhbGZDUikgLyB2ZWMyKCR7c31UZXhTaGFwZVsxXSwgJHtzfVRleFNoYXBlWzBdKTsKCiAgICAgICAgcmV0dXJuICR7bC50ZXh0dXJlMkR9KCR7c30sIHV2KTsKICAgICAgfQogICAgYDpgCiAgICAgIHZlYzQgJHtyfShpbnQgcm93LCBpbnQgY29sKSB7CiAgICAgICAgdmVjMiB1diA9ICh2ZWMyKGNvbCwgcm93KSArIGhhbGZDUikgLyB2ZWMyKCR7YX0uMCwgJHtpfS4wKTsKCiAgICAgICAgcmV0dXJuICR7bC50ZXh0dXJlMkR9KCR7c30sIHV2KTsKICAgICAgfQogICAgYDtpZihlKXJldHVybmAKICAgIHZlYzQgJHtyfShpbnQgcm93LCBpbnQgY29sKSB7CiAgICAgIGl2ZWMyIHBhY2tlZFRleFNoYXBlID0gaXZlYzIoY2VpbChmbG9hdCgke3N9VGV4U2hhcGVbMF0pIC8gMi4wKSwgY2VpbChmbG9hdCgke3N9VGV4U2hhcGVbMV0pIC8gMi4wKSk7CiAgICAgIGludCB2YWx1ZXNQZXJSb3cgPSBpbnQoY2VpbChmbG9hdCgke3N9U2hhcGVbMV0pIC8gMi4wKSk7CiAgICAgIHZlYzIgdXYgPSBwYWNrZWRVVmZyb20yRCh2YWx1ZXNQZXJSb3csIHBhY2tlZFRleFNoYXBlWzBdLCBwYWNrZWRUZXhTaGFwZVsxXSwgcm93LCBjb2wpOwogICAgICByZXR1cm4gJHtsLnRleHR1cmUyRH0oJHtzfSwgdXYpOwogICAgfQogIGA7Y29uc3QgYz1bTWF0aC5jZWlsKG9bMF0vMiksTWF0aC5jZWlsKG9bMV0vMildLGg9TWF0aC5jZWlsKHRbMV0vMik7cmV0dXJuYAogICAgdmVjNCAke3J9KGludCByb3csIGludCBjb2wpIHsKICAgICAgdmVjMiB1diA9IHBhY2tlZFVWZnJvbTJEKCR7aH0sICR7Y1swXX0sICR7Y1sxXX0sIHJvdywgY29sKTsKICAgICAgcmV0dXJuICR7bC50ZXh0dXJlMkR9KCR7c30sIHV2KTsKICAgIH0KICBgfWZ1bmN0aW9uIFA5KG4sZSl7Y29uc3QgdD1uLnNoYXBlSW5mby5sb2dpY2FsU2hhcGUscz1uLm5hbWUscj0iZ2V0IitzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Muc2xpY2UoMSksbz1uLnNoYXBlSW5mby50ZXhTaGFwZTtpZihvIT1udWxsJiZKZSh0LG8pKXtpZihlKXJldHVybmAKICAgICAgZmxvYXQgJHtyfShpbnQgcm93LCBpbnQgY29sKSB7CiAgICAgICAgdmVjMiB1diA9ICh2ZWMyKGNvbCwgcm93KSArIGhhbGZDUikgLyB2ZWMyKCR7c31UZXhTaGFwZVsxXSwgJHtzfVRleFNoYXBlWzBdKTsKICAgICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3N9LCB1dik7CiAgICAgIH0KICAgIGA7Y29uc3QgZj1vWzBdLGc9b1sxXTtyZXR1cm5gCiAgICBmbG9hdCAke3J9KGludCByb3csIGludCBjb2wpIHsKICAgICAgdmVjMiB1diA9ICh2ZWMyKGNvbCwgcm93KSArIGhhbGZDUikgLyB2ZWMyKCR7Z30uMCwgJHtmfS4wKTsKICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgfQogIGB9Y29uc3R7bmV3U2hhcGU6aSxrZXB0RGltczphfT12byh0KSxsPWk7aWYobC5sZW5ndGg8dC5sZW5ndGgpe2NvbnN0IGY9X3UobixsKSxnPVsicm93IiwiY29sIl07cmV0dXJuYAogICAgICAke0R1KGYsZSl9CiAgICAgIGZsb2F0ICR7cn0oaW50IHJvdywgaW50IGNvbCkgewogICAgICAgIHJldHVybiAke3J9KCR7T3UoZyxhKX0pOwogICAgICB9CiAgICBgfWlmKG4uc2hhcGVJbmZvLmlzVW5pZm9ybSlyZXR1cm5gCiAgICAgIGZsb2F0ICR7cn0oaW50IHJvdywgaW50IGNvbCkgewogICAgICAgIGludCBpbmRleCA9IHJvdW5kKGRvdCh2ZWMyKHJvdywgY29sKSwgdmVjMigke3RbMV19LCAxKSkpOwogICAgICAgICR7QXUobil9CiAgICAgIH0KICAgIGA7Y29uc3QgYz1vWzBdLGg9b1sxXSxwPVJhKHMpO3JldHVybiBoPT09MT9lP2AKICAgICAgZmxvYXQgJHtyfShpbnQgcm93LCBpbnQgY29sKSB7CiAgICAgICAgZmxvYXQgaW5kZXggPSBkb3QodmVjMyhyb3csIGNvbCwgJHtwfSksIHZlYzMoJHtzfVNoYXBlWzFdLCAxLCAxKSk7CiAgICAgICAgdmVjMiB1diA9IHZlYzIoMC41LCAoaW5kZXggKyAwLjUpIC8gZmxvYXQoJHtzfVRleFNoYXBlWzBdKSk7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgICB9CiAgICBgOmAKICAgIGZsb2F0ICR7cn0oaW50IHJvdywgaW50IGNvbCkgewogICAgICBmbG9hdCBpbmRleCA9IGRvdCh2ZWMzKHJvdywgY29sLCAke3B9KSwgdmVjMygke3RbMV19LCAxLCAxKSk7CiAgICAgIHZlYzIgdXYgPSB2ZWMyKDAuNSwgKGluZGV4ICsgMC41KSAvICR7Y30uMCk7CiAgICAgIHJldHVybiBzYW1wbGVUZXh0dXJlKCR7c30sIHV2KTsKICAgIH0KICBgOmM9PT0xP2U/YAogICAgICBmbG9hdCAke3J9KGludCByb3csIGludCBjb2wpIHsKICAgICAgICBmbG9hdCBpbmRleCA9IGRvdCh2ZWMzKHJvdywgY29sLCAke3B9KSwgdmVjMygke3N9U2hhcGVbMV0sIDEsIDEpKTsKICAgICAgICB2ZWMyIHV2ID0gdmVjMigoaW5kZXggKyAwLjUpIC8gZmxvYXQoJHtzfVRleFNoYXBlWzFdKSwgMC41KTsKICAgICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3N9LCB1dik7CiAgICAgIH0KICAgIGA6YAogICAgZmxvYXQgJHtyfShpbnQgcm93LCBpbnQgY29sKSB7CiAgICAgIGZsb2F0IGluZGV4ID0gZG90KHZlYzMocm93LCBjb2wsICR7cH0pLCB2ZWMzKCR7dFsxXX0sIDEsIDEpKTsKICAgICAgdmVjMiB1diA9IHZlYzIoKGluZGV4ICsgMC41KSAvICR7aH0uMCwgMC41KTsKICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgfQogIGA6ZT9gCiAgICAgIGZsb2F0ICR7cn0oaW50IHJvdywgaW50IGNvbCkgewogICAgICAgIC8vIEV4cGxpY2l0bHkgdXNlIGludGVnZXIgb3BlcmF0aW9ucyBhcyBkb3QoKSBvbmx5IHdvcmtzIG9uIGZsb2F0cy4KICAgICAgICBpbnQgaW5kZXggPSByb3cgKiAke3N9U2hhcGVbMV0gKyBjb2wgKyAke3B9OwogICAgICAgIHZlYzIgdXYgPSB1dkZyb21GbGF0KCR7c31UZXhTaGFwZVswXSwgJHtzfVRleFNoYXBlWzFdLCBpbmRleCk7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgICB9CiAgICBgOmAKICBmbG9hdCAke3J9KGludCByb3csIGludCBjb2wpIHsKICAgIC8vIEV4cGxpY2l0bHkgdXNlIGludGVnZXIgb3BlcmF0aW9ucyBhcyBkb3QoKSBvbmx5IHdvcmtzIG9uIGZsb2F0cy4KICAgIGludCBpbmRleCA9IHJvdyAqICR7dFsxXX0gKyBjb2wgKyAke3B9OwogICAgdmVjMiB1diA9IHV2RnJvbUZsYXQoJHtjfSwgJHtofSwgaW5kZXgpOwogICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogIH0KYH1mdW5jdGlvbiB6OShuLGUpe2NvbnN0IHQ9bi5zaGFwZUluZm8ubG9naWNhbFNoYXBlLHM9bi5uYW1lLHI9ImdldCIrcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpLG89bi5zaGFwZUluZm8udGV4U2hhcGUsaT1bTWF0aC5jZWlsKG9bMF0vMiksTWF0aC5jZWlsKG9bMV0vMildO2lmKHRbMF09PT0xKXtjb25zdCBmPXQuc2xpY2UoMSksZz1bMSwyXSx5PV91KG4sZiksdz1bImIiLCJyb3ciLCJjb2wiXTtyZXR1cm5gCiAgICAgICAgJHtmRCh5LGUpfQogICAgICAgIHZlYzQgJHtyfShpbnQgYiwgaW50IHJvdywgaW50IGNvbCkgewogICAgICAgICAgcmV0dXJuICR7cn0oJHtPdSh3LGcpfSk7CiAgICAgICAgfQogICAgICBgfWNvbnN0IGE9S24oKTtpZihlKXJldHVybmAKICAgIHZlYzQgJHtyfShpbnQgYiwgaW50IHJvdywgaW50IGNvbCkgewogICAgICBpdmVjMiBwYWNrZWRUZXhTaGFwZSA9IGl2ZWMyKGNlaWwoZmxvYXQoJHtzfVRleFNoYXBlWzBdKSAvIDIuMCksIGNlaWwoZmxvYXQoJHtzfVRleFNoYXBlWzFdKSAvIDIuMCkpOwogICAgICBpbnQgdmFsdWVzUGVyUm93ID0gaW50KGNlaWwoZmxvYXQoJHtzfVNoYXBlWzJdKSAvIDIuMCkpOwogICAgICBpbnQgdGV4ZWxzSW5CYXRjaCA9IHZhbHVlc1BlclJvdyAqIGludChjZWlsKGZsb2F0KCR7c31TaGFwZVsxXSkgLyAyLjApKTsKICAgICAgdmVjMiB1diA9IHBhY2tlZFVWZnJvbTNEKAogICAgICAgIHBhY2tlZFRleFNoYXBlWzBdLCBwYWNrZWRUZXhTaGFwZVsxXSwgdGV4ZWxzSW5CYXRjaCwgdmFsdWVzUGVyUm93LCBiLCByb3csIGNvbCk7CiAgICAgIHJldHVybiAke2EudGV4dHVyZTJEfSgke3N9LCB1dik7CiAgICB9CiAgYDtjb25zdCBsPWlbMF0sYz1pWzFdLGg9TWF0aC5jZWlsKHRbMl0vMikscD1oKk1hdGguY2VpbCh0WzFdLzIpO3JldHVybmAKICAgIHZlYzQgJHtyfShpbnQgYiwgaW50IHJvdywgaW50IGNvbCkgewogICAgICB2ZWMyIHV2ID0gcGFja2VkVVZmcm9tM0QoCiAgICAgICAgJHtsfSwgJHtjfSwgJHtwfSwgJHtofSwgYiwgcm93LCBjb2wpOwogICAgICByZXR1cm4gJHthLnRleHR1cmUyRH0oJHtzfSwgdXYpOwogICAgfQogIGB9ZnVuY3Rpb24gTTkobixlKXtjb25zdCB0PW4uc2hhcGVJbmZvLmxvZ2ljYWxTaGFwZSxzPW4ubmFtZSxyPSJnZXQiK3MuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSxvPXRbMV0qdFsyXSxpPXRbMl0se25ld1NoYXBlOmEsa2VwdERpbXM6bH09dm8odCksYz1hO2lmKGMubGVuZ3RoPHQubGVuZ3RoKXtjb25zdCB3PV91KG4sYyksYj1bInJvdyIsImNvbCIsImRlcHRoIl07cmV0dXJuYAogICAgICAgICR7RHUodyxlKX0KICAgICAgICBmbG9hdCAke3J9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCkgewogICAgICAgICAgcmV0dXJuICR7cn0oJHtPdShiLGwpfSk7CiAgICAgICAgfQogICAgICBgfWlmKG4uc2hhcGVJbmZvLmlzVW5pZm9ybSlyZXR1cm5gCiAgICAgIGZsb2F0ICR7cn0oaW50IHJvdywgaW50IGNvbCwgaW50IGRlcHRoKSB7CiAgICAgICAgaW50IGluZGV4ID0gcm91bmQoZG90KHZlYzMocm93LCBjb2wsIGRlcHRoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzKCR7b30sICR7aX0sIDEpKSk7CiAgICAgICAgJHtBdShuKX0KICAgICAgfQogICAgYDtjb25zdCBoPW4uc2hhcGVJbmZvLnRleFNoYXBlLHA9aFswXSxmPWhbMV0sZz1uLnNoYXBlSW5mby5mbGF0T2Zmc2V0O2lmKGY9PT1vJiZnPT1udWxsKXJldHVybiBlP2AKICAgICAgZmxvYXQgJHtyfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgpIHsKICAgICAgICBpbnQgc3RyaWRlMSA9ICR7c31TaGFwZVsyXTsKICAgICAgICBmbG9hdCB0ZXhSID0gZmxvYXQocm93KTsKICAgICAgICBmbG9hdCB0ZXhDID0gZG90KHZlYzIoY29sLCBkZXB0aCksIHZlYzIoc3RyaWRlMSwgMSkpOwogICAgICAgIHZlYzIgdXYgPSAodmVjMih0ZXhDLCB0ZXhSKSArIGhhbGZDUikgLwogICAgICAgICAgICAgICAgICAgdmVjMigke3N9VGV4U2hhcGVbMV0sICR7c31UZXhTaGFwZVswXSk7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgICB9CiAgICBgOmAKICAgICAgICBmbG9hdCAke3J9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCkgewogICAgICAgICAgZmxvYXQgdGV4UiA9IGZsb2F0KHJvdyk7CiAgICAgICAgICBmbG9hdCB0ZXhDID0gZG90KHZlYzIoY29sLCBkZXB0aCksIHZlYzIoJHtpfSwgMSkpOwogICAgICAgICAgdmVjMiB1diA9ICh2ZWMyKHRleEMsIHRleFIpICsgaGFsZkNSKSAvCiAgICAgICAgICAgICAgICAgICAgIHZlYzIoJHtmfS4wLCAke3B9LjApOwogICAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgICAgIH0KICAgICAgYDtpZihmPT09aSYmZz09bnVsbClyZXR1cm4gZT9gCiAgICAgIGZsb2F0ICR7cn0oaW50IHJvdywgaW50IGNvbCwgaW50IGRlcHRoKSB7CiAgICAgICAgZmxvYXQgdGV4UiA9IGRvdCh2ZWMyKHJvdywgY29sKSwgdmVjMigke3N9U2hhcGVbMV0sIDEpKTsKICAgICAgICBmbG9hdCB0ZXhDID0gZmxvYXQoZGVwdGgpOwogICAgICAgIHZlYzIgdXYgPSAodmVjMih0ZXhDLCB0ZXhSKSArIGhhbGZDUikgLyB2ZWMyKCR7c31UZXhTaGFwZVsxXSwgJHtzfVRleFNoYXBlWzBdKTsKICAgICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3N9LCB1dik7CiAgICAgIH0KICAgIGA6YAogICAgZmxvYXQgJHtyfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgpIHsKICAgICAgZmxvYXQgdGV4UiA9IGRvdCh2ZWMyKHJvdywgY29sKSwgdmVjMigke3RbMV19LCAxKSk7CiAgICAgIGZsb2F0IHRleEMgPSBmbG9hdChkZXB0aCk7CiAgICAgIHZlYzIgdXYgPSAodmVjMih0ZXhDLCB0ZXhSKSArIGhhbGZDUikgLyB2ZWMyKCR7Zn0uMCwgJHtwfS4wKTsKICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgfQogIGA7Y29uc3QgeT1SYShzKTtyZXR1cm4gZT9gCiAgICBmbG9hdCAke3J9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCkgewogICAgICAvLyBFeHBsaWNpdGx5IHVzZSBpbnRlZ2VyIG9wZXJhdGlvbnMgYXMgZG90KCkgb25seSB3b3JrcyBvbiBmbG9hdHMuCiAgICAgIGludCBzdHJpZGUwID0gJHtzfVNoYXBlWzFdICogJHtzfVNoYXBlWzJdOwogICAgICBpbnQgc3RyaWRlMSA9ICR7c31TaGFwZVsyXTsKICAgICAgaW50IGluZGV4ID0gcm93ICogc3RyaWRlMCArIGNvbCAqIHN0cmlkZTEgKyBkZXB0aCArICR7eX07CiAgICAgIHZlYzIgdXYgPSB1dkZyb21GbGF0KCR7c31UZXhTaGFwZVswXSwgJHtzfVRleFNoYXBlWzFdLCBpbmRleCk7CiAgICAgIHJldHVybiBzYW1wbGVUZXh0dXJlKCR7c30sIHV2KTsKICAgIH0KICAgIGA6YAogICAgICBmbG9hdCAke3J9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCkgewogICAgICAgIC8vIEV4cGxpY2l0bHkgdXNlIGludGVnZXIgb3BlcmF0aW9ucyBhcyBkb3QoKSBvbmx5IHdvcmtzIG9uIGZsb2F0cy4KICAgICAgICBpbnQgaW5kZXggPSByb3cgKiAke299ICsgY29sICogJHtpfSArIGRlcHRoICsgJHt5fTsKICAgICAgICB2ZWMyIHV2ID0gdXZGcm9tRmxhdCgke3B9LCAke2Z9LCBpbmRleCk7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgICB9CiAgYH1mdW5jdGlvbiBCOShuLGUpe2NvbnN0IHQ9bi5uYW1lLHM9ImdldCIrdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9S24oKTtpZihlKXJldHVybmAKICAgIHZlYzQgJHtzfShpbnQgYjIsIGludCBiLCBpbnQgcm93LCBpbnQgY29sKSB7CiAgICAgIGludCB2YWx1ZXNQZXJSb3cgPSBpbnQoY2VpbChmbG9hdCgke3R9U2hhcGVbM10pIC8gMi4wKSk7CiAgICAgIGludCB0ZXhlbHNJbkJhdGNoID0gdmFsdWVzUGVyUm93ICogaW50KGNlaWwoZmxvYXQoJHt0fVNoYXBlWzJdKSAvIDIuMCkpOwogICAgICBpbnQgaW5kZXggPSBiICogdGV4ZWxzSW5CYXRjaCArIChyb3cgLyAyKSAqIHZhbHVlc1BlclJvdyArIChjb2wgLyAyKTsKICAgICAgdGV4ZWxzSW5CYXRjaCAqPSAke3R9U2hhcGVbMV07CiAgICAgIGluZGV4ID0gYjIgKiB0ZXhlbHNJbkJhdGNoICsgaW5kZXg7CiAgICAgIGl2ZWMyIHBhY2tlZFRleFNoYXBlID0gaXZlYzIoY2VpbChmbG9hdCgke3R9VGV4U2hhcGVbMF0pIC8gMi4wKSwgY2VpbChmbG9hdCgke3R9VGV4U2hhcGVbMV0pIC8gMi4wKSk7CiAgICAgIGludCB0ZXhSID0gaW5kZXggLyBwYWNrZWRUZXhTaGFwZVsxXTsKICAgICAgaW50IHRleEMgPSBpbmRleCAtIHRleFIgKiBwYWNrZWRUZXhTaGFwZVsxXTsKICAgICAgdmVjMiB1diA9ICh2ZWMyKHRleEMsIHRleFIpICsgaGFsZkNSKSAvIHZlYzIocGFja2VkVGV4U2hhcGVbMV0sIHBhY2tlZFRleFNoYXBlWzBdKTsgcmV0dXJuICR7ci50ZXh0dXJlMkR9KCR7dH0sIHV2KTsKICAgIH0KICBgO2NvbnN0IG89bi5zaGFwZUluZm8ubG9naWNhbFNoYXBlLGk9by5sZW5ndGgsYT1uLnNoYXBlSW5mby50ZXhTaGFwZSxsPVtNYXRoLmNlaWwoYVswXS8yKSxNYXRoLmNlaWwoYVsxXS8yKV0sYz1sWzBdLGg9bFsxXSxwPU1hdGguY2VpbChvW2ktMV0vMik7bGV0IGY9cCpNYXRoLmNlaWwob1tpLTJdLzIpLGc9ImludCBiLCBpbnQgcm93LCBpbnQgY29sIix5PWBiICogJHtmfSArIChyb3cgLyAyKSAqICR7cH0gKyAoY29sIC8gMilgO2ZvcihsZXQgdz0yO3c8aS0xO3crKylnPWBpbnQgYiR7d30sIGArZyxmKj1vW2ktdy0xXSx5PWBiJHt3fSAqICR7Zn0gKyBgK3k7cmV0dXJuYAogICAgdmVjNCAke3N9KCR7Z30pIHsKICAgICAgaW50IGluZGV4ID0gJHt5fTsKICAgICAgaW50IHRleFIgPSBpbmRleCAvICR7aH07CiAgICAgIGludCB0ZXhDID0gaW5kZXggLSB0ZXhSICogJHtofTsKICAgICAgdmVjMiB1diA9ICh2ZWMyKHRleEMsIHRleFIpICsgaGFsZkNSKSAvIHZlYzIoJHtofSwgJHtjfSk7CiAgICAgIHJldHVybiAke3IudGV4dHVyZTJEfSgke3R9LCB1dik7CiAgICB9CiAgYH1mdW5jdGlvbiBWOShuLGUpe2NvbnN0IHQ9bi5zaGFwZUluZm8ubG9naWNhbFNoYXBlLHM9bi5uYW1lLHI9ImdldCIrcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpLG89dFszXSxpPXRbMl0qbyxhPXRbMV0qaSx7bmV3U2hhcGU6bCxrZXB0RGltczpjfT12byh0KTtpZihsLmxlbmd0aDx0Lmxlbmd0aCl7Y29uc3QgUz1fdShuLGwpLCQ9WyJyb3ciLCJjb2wiLCJkZXB0aCIsImRlcHRoMiJdO3JldHVybmAKICAgICAgJHtEdShTLGUpfQogICAgICBmbG9hdCAke3J9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCwgaW50IGRlcHRoMikgewogICAgICAgIHJldHVybiAke3J9KCR7T3UoJCxjKX0pOwogICAgICB9CiAgICBgfWlmKG4uc2hhcGVJbmZvLmlzVW5pZm9ybSlyZXR1cm5gCiAgICAgIGZsb2F0ICR7cn0oaW50IHJvdywgaW50IGNvbCwgaW50IGRlcHRoLCBpbnQgZGVwdGgyKSB7CiAgICAgICAgaW50IGluZGV4ID0gcm91bmQoZG90KHZlYzQocm93LCBjb2wsIGRlcHRoLCBkZXB0aDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQoJHthfSwgJHtpfSwgJHtvfSwgMSkpKTsKICAgICAgICAke0F1KG4pfQogICAgICB9CiAgICBgO2NvbnN0IGg9bi5zaGFwZUluZm8uZmxhdE9mZnNldCxwPW4uc2hhcGVJbmZvLnRleFNoYXBlLGY9cFswXSxnPXBbMV0seT1gaW50IHN0cmlkZTIgPSAke3N9U2hhcGVbM107YCx3PWBpbnQgc3RyaWRlMSA9ICR7c31TaGFwZVsyXSAqIHN0cmlkZTI7YCxiPWBpbnQgc3RyaWRlMCA9ICR7c31TaGFwZVsxXSAqIHN0cmlkZTE7YDtpZihnPT09YSYmaD09bnVsbClyZXR1cm4gZT9gCiAgICAgIGZsb2F0ICR7cn0oaW50IHJvdywgaW50IGNvbCwgaW50IGRlcHRoLCBpbnQgZGVwdGgyKSB7CiAgICAgICAgJHt5fQogICAgICAgICR7d30KICAgICAgICBmbG9hdCB0ZXhSID0gZmxvYXQocm93KTsKICAgICAgICBmbG9hdCB0ZXhDID0KICAgICAgICAgICAgZG90KHZlYzMoY29sLCBkZXB0aCwgZGVwdGgyKSwKICAgICAgICAgICAgICAgIHZlYzMoc3RyaWRlMSwgc3RyaWRlMiwgMSkpOwogICAgICAgIHZlYzIgdXYgPSAodmVjMih0ZXhDLCB0ZXhSKSArIGhhbGZDUikgLwogICAgICAgICAgICAgICAgICAgdmVjMigke3N9VGV4U2hhcGVbMV0sICR7c31UZXhTaGFwZVswXSk7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgICB9CiAgICBgOmAKICAgICAgZmxvYXQgJHtyfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgsIGludCBkZXB0aDIpIHsKICAgICAgICBmbG9hdCB0ZXhSID0gZmxvYXQocm93KTsKICAgICAgICBmbG9hdCB0ZXhDID0KICAgICAgICAgICAgZG90KHZlYzMoY29sLCBkZXB0aCwgZGVwdGgyKSwKICAgICAgICAgICAgICAgIHZlYzMoJHtpfSwgJHtvfSwgMSkpOwogICAgICAgIHZlYzIgdXYgPSAodmVjMih0ZXhDLCB0ZXhSKSArIGhhbGZDUikgLwogICAgICAgICAgICAgICAgICAgdmVjMigke2d9LjAsICR7Zn0uMCk7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgICB9CiAgICBgO2lmKGc9PT1vJiZoPT1udWxsKXJldHVybiBlP2AKICAgICAgZmxvYXQgJHtyfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgsIGludCBkZXB0aDIpIHsKICAgICAgICBmbG9hdCB0ZXhSID0gZG90KHZlYzMocm93LCBjb2wsIGRlcHRoKSwKICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoJHtzfVNoYXBlWzFdICogJHtzfVNoYXBlWzJdLCAke3N9U2hhcGVbMl0sIDEpKTsKICAgICAgICBmbG9hdCB0ZXhDID0gZmxvYXQoZGVwdGgyKTsKICAgICAgICB2ZWMyIHV2ID0gKHZlYzIodGV4QywgdGV4UikgKyBoYWxmQ1IpIC8KICAgICAgICAgICAgICAgICAgdmVjMigke3N9VGV4U2hhcGVbMV0sICR7c31UZXhTaGFwZVswXSk7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgICB9CiAgICBgOmAKICAgICAgZmxvYXQgJHtyfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgsIGludCBkZXB0aDIpIHsKICAgICAgICBmbG9hdCB0ZXhSID0gZG90KHZlYzMocm93LCBjb2wsIGRlcHRoKSwKICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoJHt0WzFdKnRbMl19LCAke3RbMl19LCAxKSk7CiAgICAgICAgZmxvYXQgdGV4QyA9IGZsb2F0KGRlcHRoMik7CiAgICAgICAgdmVjMiB1diA9ICh2ZWMyKHRleEMsIHRleFIpICsgaGFsZkNSKSAvCiAgICAgICAgICAgICAgICAgIHZlYzIoJHtnfS4wLCAke2Z9LjApOwogICAgICAgIHJldHVybiBzYW1wbGVUZXh0dXJlKCR7c30sIHV2KTsKICAgICAgfQogICAgYDtjb25zdCB2PVJhKHMpO3JldHVybiBlP2AKICAgIGZsb2F0ICR7cn0oaW50IHJvdywgaW50IGNvbCwgaW50IGRlcHRoLCBpbnQgZGVwdGgyKSB7CiAgICAgIC8vIEV4cGxpY2l0bHkgdXNlIGludGVnZXIgb3BlcmF0aW9ucyBhcyBkb3QoKSBvbmx5IHdvcmtzIG9uIGZsb2F0cy4KICAgICAgJHt5fQogICAgICAke3d9CiAgICAgICR7Yn0KICAgICAgaW50IGluZGV4ID0gcm93ICogc3RyaWRlMCArIGNvbCAqIHN0cmlkZTEgKwogICAgICAgICAgZGVwdGggKiBzdHJpZGUyICsgZGVwdGgyOwogICAgICB2ZWMyIHV2ID0gdXZGcm9tRmxhdCgke3N9VGV4U2hhcGVbMF0sICR7c31UZXhTaGFwZVsxXSwgaW5kZXggKyAke3Z9KTsKICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHtzfSwgdXYpOwogICAgfQogIGA6YAogICAgZmxvYXQgJHtyfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgsIGludCBkZXB0aDIpIHsKICAgICAgLy8gRXhwbGljaXRseSB1c2UgaW50ZWdlciBvcGVyYXRpb25zIGFzIGRvdCgpIG9ubHkgd29ya3Mgb24gZmxvYXRzLgogICAgICBpbnQgaW5kZXggPSByb3cgKiAke2F9ICsgY29sICogJHtpfSArCiAgICAgICAgICBkZXB0aCAqICR7b30gKyBkZXB0aDI7CiAgICAgIHZlYzIgdXYgPSB1dkZyb21GbGF0KCR7Zn0sICR7Z30sIGluZGV4ICsgJHt2fSk7CiAgICAgIHJldHVybiBzYW1wbGVUZXh0dXJlKCR7c30sIHV2KTsKICAgIH0KICBgfWZ1bmN0aW9uIFc5KG4pe2NvbnN0IGU9bi5zaGFwZUluZm8ubG9naWNhbFNoYXBlLHQ9bi5uYW1lLHM9ImdldCIrdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9ZVs0XSxvPWVbM10qcixpPWVbMl0qbyxhPWVbMV0qaSx7bmV3U2hhcGU6bCxrZXB0RGltczpjfT12byhlKTtpZihsLmxlbmd0aDxlLmxlbmd0aCl7Y29uc3Qgdz1fdShuLGwpLGI9WyJyb3ciLCJjb2wiLCJkZXB0aCIsImRlcHRoMiIsImRlcHRoMyJdO3JldHVybmAKICAgICAgJHtEdSh3KX0KICAgICAgZmxvYXQgJHtzfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgsIGludCBkZXB0aDIsIGludCBkZXB0aDMpIHsKICAgICAgICByZXR1cm4gJHtzfSgke091KGIsYyl9KTsKICAgICAgfQogICAgYH1pZihuLnNoYXBlSW5mby5pc1VuaWZvcm0pcmV0dXJuYAogICAgICBmbG9hdCAke3N9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCwgaW50IGRlcHRoMiwgaW50IGRlcHRoMykgewogICAgICAgIGZsb2F0IGluZGV4ID0gZG90KAogICAgICAgICAgdmVjNChyb3csIGNvbCwgZGVwdGgsIGRlcHRoMiksCiAgICAgICAgICB2ZWM0KCR7YX0sICR7aX0sICR7b30sICR7cn0pKSArCiAgICAgICAgICBkZXB0aDM7CiAgICAgICAgJHtBdShuKX0KICAgICAgfQogICAgYDtjb25zdCBoPW4uc2hhcGVJbmZvLmZsYXRPZmZzZXQscD1uLnNoYXBlSW5mby50ZXhTaGFwZSxmPXBbMF0sZz1wWzFdO2lmKGc9PT1hJiZoPT1udWxsKXJldHVybmAKICAgICAgZmxvYXQgJHtzfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgsIGludCBkZXB0aDIsIGludCBkZXB0aDMpIHsKICAgICAgICBpbnQgdGV4UiA9IHJvdzsKICAgICAgICBmbG9hdCB0ZXhDID0gZG90KHZlYzQoY29sLCBkZXB0aCwgZGVwdGgyLCBkZXB0aDMpLAogICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCgke2l9LCAke299LCAke3J9LCAxKSk7CiAgICAgICAgdmVjMiB1diA9ICh2ZWMyKHRleEMsIHRleFIpICsgaGFsZkNSKSAvCiAgICAgICAgICAgICAgICAgICB2ZWMyKCR7Z30uMCwgJHtmfS4wKTsKICAgICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3R9LCB1dik7CiAgICAgIH0KICAgIGA7aWYoZz09PXImJmg9PW51bGwpcmV0dXJuYAogICAgICBmbG9hdCAke3N9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCwgaW50IGRlcHRoMiwgaW50IGRlcHRoMykgewogICAgICAgIGZsb2F0IHRleFIgPSBkb3QoCiAgICAgICAgICB2ZWM0KHJvdywgY29sLCBkZXB0aCwgZGVwdGgyKSwKICAgICAgICAgIHZlYzQoJHtlWzFdKmVbMl0qZVszXX0sCiAgICAgICAgICAgICAgICR7ZVsyXSplWzNdfSwgJHtlWzNdfSwgMSkpOwogICAgICAgIGludCB0ZXhDID0gZGVwdGgzOwogICAgICAgIHZlYzIgdXYgPSAodmVjMih0ZXhDLCB0ZXhSKSArIGhhbGZDUikgLwogICAgICAgICAgICAgICAgICB2ZWMyKCR7Z30uMCwgJHtmfS4wKTsKICAgICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3R9LCB1dik7CiAgICAgIH0KICAgIGA7Y29uc3QgeT1SYSh0KTtyZXR1cm5gCiAgICBmbG9hdCAke3N9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCwgaW50IGRlcHRoMiwgaW50IGRlcHRoMykgewogICAgICAvLyBFeHBsaWNpdGx5IHVzZSBpbnRlZ2VyIG9wZXJhdGlvbnMgYXMgZG90KCkgb25seSB3b3JrcyBvbiBmbG9hdHMuCiAgICAgIGludCBpbmRleCA9IHJvdyAqICR7YX0gKyBjb2wgKiAke2l9ICsgZGVwdGggKiAke299ICsKICAgICAgICAgIGRlcHRoMiAqICR7cn0gKyBkZXB0aDMgKyAke3l9OwogICAgICB2ZWMyIHV2ID0gdXZGcm9tRmxhdCgke2Z9LCAke2d9LCBpbmRleCk7CiAgICAgIHJldHVybiBzYW1wbGVUZXh0dXJlKCR7dH0sIHV2KTsKICAgIH0KICBgfWZ1bmN0aW9uIFU5KG4pe2NvbnN0IGU9bi5zaGFwZUluZm8ubG9naWNhbFNoYXBlLHQ9bi5uYW1lLHM9ImdldCIrdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHtuZXdTaGFwZTpyLGtlcHREaW1zOm99PXZvKGUpO2lmKHIubGVuZ3RoPGUubGVuZ3RoKXtjb25zdCBiPV91KG4sciksdj1bInJvdyIsImNvbCIsImRlcHRoIiwiZGVwdGgyIiwiZGVwdGgzIiwiZGVwdGg0Il07cmV0dXJuYAogICAgICAke0R1KGIpfQogICAgICBmbG9hdCAke3N9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCwKICAgICAgICAgICAgICAgICAgICBpbnQgZGVwdGgyLCBpbnQgZGVwdGgzLCBpbnQgZGVwdGg0KSB7CiAgICAgICAgcmV0dXJuICR7c30oJHtPdSh2LG8pfSk7CiAgICAgIH0KICAgIGB9Y29uc3QgaT1lWzVdLGE9ZVs0XSppLGw9ZVszXSphLGM9ZVsyXSpsLGg9ZVsxXSpjO2lmKG4uc2hhcGVJbmZvLmlzVW5pZm9ybSlyZXR1cm5gCiAgICAgIGZsb2F0ICR7c30oaW50IHJvdywgaW50IGNvbCwgaW50IGRlcHRoLAogICAgICAgICAgICAgICAgICBpbnQgZGVwdGgyLCBpbnQgZGVwdGgzLCBpbnQgZGVwdGg0KSB7CiAgICAgICAgaW50IGluZGV4ID0gcm91bmQoZG90KAogICAgICAgICAgdmVjNChyb3csIGNvbCwgZGVwdGgsIGRlcHRoMiksCiAgICAgICAgICB2ZWM0KCR7aH0sICR7Y30sICR7bH0sICR7YX0pKSArCiAgICAgICAgICBkb3QoCiAgICAgICAgICAgIHZlYzIoZGVwdGgzLCBkZXB0aDQpLAogICAgICAgICAgICB2ZWMyKCR7aX0sIDEpKSk7CiAgICAgICAgJHtBdShuKX0KICAgICAgfQogICAgYDtjb25zdCBwPW4uc2hhcGVJbmZvLmZsYXRPZmZzZXQsZj1uLnNoYXBlSW5mby50ZXhTaGFwZSxnPWZbMF0seT1mWzFdO2lmKHk9PT1oJiZwPT1udWxsKXJldHVybmAKICAgICAgZmxvYXQgJHtzfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgsCiAgICAgICAgICAgICAgICAgICAgaW50IGRlcHRoMiwgaW50IGRlcHRoMywgaW50IGRlcHRoNCkgewogICAgICAgIGludCB0ZXhSID0gcm93OwogICAgICAgIGZsb2F0IHRleEMgPSBkb3QodmVjNChjb2wsIGRlcHRoLCBkZXB0aDIsIGRlcHRoMyksCiAgICAgICAgICB2ZWM0KCR7Y30sICR7bH0sICR7YX0sICR7aX0pKSArCiAgICAgICAgICAgICAgIGZsb2F0KGRlcHRoNCk7CiAgICAgICAgdmVjMiB1diA9ICh2ZWMyKHRleEMsIHRleFIpICsgaGFsZkNSKSAvCiAgICAgICAgICAgICAgICAgICB2ZWMyKCR7eX0uMCwgJHtnfS4wKTsKICAgICAgICByZXR1cm4gc2FtcGxlVGV4dHVyZSgke3R9LCB1dik7CiAgICAgIH0KICAgIGA7aWYoeT09PWkmJnA9PW51bGwpcmV0dXJuYAogICAgICBmbG9hdCAke3N9KGludCByb3csIGludCBjb2wsIGludCBkZXB0aCwKICAgICAgICAgICAgICAgICAgICBpbnQgZGVwdGgyLCBpbnQgZGVwdGgzLCBpbnQgZGVwdGg0KSB7CiAgICAgICAgZmxvYXQgdGV4UiA9IGRvdCh2ZWM0KHJvdywgY29sLCBkZXB0aCwgZGVwdGgyKSwKICAgICAgICAgIHZlYzQoJHtlWzFdKmVbMl0qZVszXSplWzRdfSwKICAgICAgICAgICAgICAgJHtlWzJdKmVbM10qZVs0XX0sCiAgICAgICAgICAgICAgICR7ZVszXSplWzRdfSwKICAgICAgICAgICAgICAgJHtlWzRdfSkpICsgZmxvYXQoZGVwdGgzKTsKICAgICAgICBpbnQgdGV4QyA9IGRlcHRoNDsKICAgICAgICB2ZWMyIHV2ID0gKHZlYzIodGV4QywgdGV4UikgKyBoYWxmQ1IpIC8KICAgICAgICAgICAgICAgICAgdmVjMigke3l9LjAsICR7Z30uMCk7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHt0fSwgdXYpOwogICAgICB9CiAgICBgO2NvbnN0IHc9UmEodCk7cmV0dXJuYAogICAgZmxvYXQgJHtzfShpbnQgcm93LCBpbnQgY29sLCBpbnQgZGVwdGgsCiAgICAgICAgICAgICAgICAgIGludCBkZXB0aDIsIGludCBkZXB0aDMsIGludCBkZXB0aDQpIHsKICAgICAgLy8gRXhwbGljaXRseSB1c2UgaW50ZWdlciBvcGVyYXRpb25zIGFzIGRvdCgpIG9ubHkgd29ya3Mgb24gZmxvYXRzLgogICAgICBpbnQgaW5kZXggPSByb3cgKiAke2h9ICsgY29sICogJHtjfSArIGRlcHRoICogJHtsfSArCiAgICAgICAgICBkZXB0aDIgKiAke2F9ICsgZGVwdGgzICogJHtpfSArIGRlcHRoNCArICR7d307CiAgICAgIHZlYzIgdXYgPSB1dkZyb21GbGF0KCR7Z30sICR7eX0sIGluZGV4KTsKICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHt0fSwgdXYpOwogICAgfQogIGB9ZnVuY3Rpb24gQXUobil7Y29uc3QgZT1uLm5hbWUsdD1jZShuLnNoYXBlSW5mby5sb2dpY2FsU2hhcGUpO3JldHVybiB0PDI/YHJldHVybiAke2V9O2A6YAogICAgZm9yIChpbnQgaSA9IDA7IGkgPCAke3R9OyBpKyspIHsKICAgICAgaWYgKGkgPT0gaW5kZXgpIHsKICAgICAgICByZXR1cm4gJHtlfVtpXTsKICAgICAgfQogICAgfQogIGB9ZnVuY3Rpb24gajkobixlKXtjb25zdCB0PW4ubmFtZSxzPXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKSxyPSJnZXQiK3MrIkF0T3V0Q29vcmRzIixvPW4uc2hhcGVJbmZvLmxvZ2ljYWxTaGFwZS5sZW5ndGgsaT1lLmxvZ2ljYWxTaGFwZS5sZW5ndGgsYT1wRChuLnNoYXBlSW5mby5sb2dpY2FsU2hhcGUsZS5sb2dpY2FsU2hhcGUpLGw9eHQoaSksYz1pLW87bGV0IGg7Y29uc3QgcD1bIngiLCJ5IiwieiIsInciLCJ1IiwidiJdO289PT0wP2g9IiI6aTwyJiZhLmxlbmd0aD49MT9oPSJjb29yZHMgPSAwOyI6aD1hLm1hcChTPT5gY29vcmRzLiR7cFtTK2NdfSA9IDA7YCkuam9pbihgCmApO2xldCBmPSIiO2k8MiYmbz4wP2Y9ImNvb3JkcyI6Zj1uLnNoYXBlSW5mby5sb2dpY2FsU2hhcGUubWFwKChTLCQpPT5gY29vcmRzLiR7cFskK2NdfWApLmpvaW4oIiwgIik7bGV0IGc9InJldHVybiBvdXRwdXRWYWx1ZTsiO2NvbnN0IHc9Y2Uobi5zaGFwZUluZm8ubG9naWNhbFNoYXBlKT09PTEsdj1jZShlLmxvZ2ljYWxTaGFwZSk9PT0xO2lmKG89PT0xJiYhdyYmIXYpZz1gCiAgICAgIHJldHVybiB2ZWM0KG91dHB1dFZhbHVlLnh5LCBvdXRwdXRWYWx1ZS54eSk7CiAgICBgO2Vsc2UgaWYodyYmIXYpaT09PTE/Zz1gCiAgICAgICAgcmV0dXJuIHZlYzQob3V0cHV0VmFsdWUueCwgb3V0cHV0VmFsdWUueCwgMC4sIDAuKTsKICAgICAgYDpnPWAKICAgICAgICByZXR1cm4gdmVjNChvdXRwdXRWYWx1ZS54KTsKICAgICAgYDtlbHNlIGlmKGEubGVuZ3RoKXtjb25zdCBTPW8tMiwkPW8tMTthLmluZGV4T2YoUyk+LTEmJmEuaW5kZXhPZigkKT4tMT9nPSJyZXR1cm4gdmVjNChvdXRwdXRWYWx1ZS54KTsiOmEuaW5kZXhPZihTKT4tMT9nPSJyZXR1cm4gdmVjNChvdXRwdXRWYWx1ZS54LCBvdXRwdXRWYWx1ZS55LCBvdXRwdXRWYWx1ZS54LCBvdXRwdXRWYWx1ZS55KTsiOmEuaW5kZXhPZigkKT4tMSYmKGc9InJldHVybiB2ZWM0KG91dHB1dFZhbHVlLnh4LCBvdXRwdXRWYWx1ZS56eik7Iil9cmV0dXJuYAogICAgdmVjNCAke3J9KCkgewogICAgICAke2x9IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAke2h9CiAgICAgIHZlYzQgb3V0cHV0VmFsdWUgPSBnZXQke3N9KCR7Zn0pOwogICAgICAke2d9CiAgICB9CiAgYH1mdW5jdGlvbiBHOShuLGUpe2NvbnN0IHQ9bi5uYW1lLHM9dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9ImdldCIrcysiQXRPdXRDb29yZHMiLG89ZS50ZXhTaGFwZSxpPW4uc2hhcGVJbmZvLnRleFNoYXBlLGE9bi5zaGFwZUluZm8ubG9naWNhbFNoYXBlLmxlbmd0aCxsPWUubG9naWNhbFNoYXBlLmxlbmd0aDtpZighbi5zaGFwZUluZm8uaXNVbmlmb3JtJiZhPT09bCYmbi5zaGFwZUluZm8uZmxhdE9mZnNldD09bnVsbCYmSmUoaSxvKSlyZXR1cm5gCiAgICAgIGZsb2F0ICR7cn0oKSB7CiAgICAgICAgcmV0dXJuIHNhbXBsZVRleHR1cmUoJHt0fSwgcmVzdWx0VVYpOwogICAgICB9CiAgICBgO2NvbnN0IGM9eHQobCksaD1wRChuLnNoYXBlSW5mby5sb2dpY2FsU2hhcGUsZS5sb2dpY2FsU2hhcGUpLHA9bC1hO2xldCBmO2NvbnN0IGc9WyJ4IiwieSIsInoiLCJ3IiwidSIsInYiXTthPT09MD9mPSIiOmw8MiYmaC5sZW5ndGg+PTE/Zj0iY29vcmRzID0gMDsiOmY9aC5tYXAodz0+YGNvb3Jkcy4ke2dbdytwXX0gPSAwO2ApLmpvaW4oYApgKTtsZXQgeT0iIjtyZXR1cm4gbDwyJiZhPjA/eT0iY29vcmRzIjp5PW4uc2hhcGVJbmZvLmxvZ2ljYWxTaGFwZS5tYXAoKHcsYik9PmBjb29yZHMuJHtnW2IrcF19YCkuam9pbigiLCAiKSxgCiAgICBmbG9hdCAke3J9KCkgewogICAgICAke2N9IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAke2Z9CiAgICAgIHJldHVybiBnZXQke3N9KCR7eX0pOwogICAgfQogIGB9ZnVuY3Rpb24geHQobil7aWYobjw9MSlyZXR1cm4iaW50IjtpZihuPT09MilyZXR1cm4iaXZlYzIiO2lmKG49PT0zKXJldHVybiJpdmVjMyI7aWYobj09PTQpcmV0dXJuIml2ZWM0IjtpZihuPT09NSlyZXR1cm4iaXZlYzUiO2lmKG49PT02KXJldHVybiJpdmVjNiI7dGhyb3cgRXJyb3IoYEdQVSBmb3IgcmFuayAke259IGlzIG5vdCB5ZXQgc3VwcG9ydGVkYCl9ZnVuY3Rpb24gaHYobixlLHQpe2NvbnN0e25ld1NoYXBlOnMsa2VwdERpbXM6cn09dm8oZSksbz1lLmxlbmd0aCxpPW4mJm89PT0zJiZlWzBdPT09MSxhPWk/ZS5zbGljZSgxKTpzLGw9IW4mJm8+MSYmIUplKGUsdCkmJnMubGVuZ3RoPG98fGk7cmV0dXJue3VzZVNxdWVlemVTaGFwZTpsLHVuaWZvcm1TaGFwZTpsP2E6ZSxrZXB0RGltczpyfX1mdW5jdGlvbiBfdShuLGUpe2NvbnN0IHQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuKSk7cmV0dXJuIHQuc2hhcGVJbmZvLmxvZ2ljYWxTaGFwZT1lLHR9ZnVuY3Rpb24gT3UobixlKXtyZXR1cm4gZS5tYXAodD0+blt0XSkuam9pbigiLCAiKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBIOShuLGUsdCxzKXtjb25zdCByPXQubWFwKChoLHApPT57Y29uc3QgZj17bG9naWNhbFNoYXBlOmguc2hhcGUsdGV4U2hhcGU6aC5pc1VuaWZvcm0/bnVsbDpoLnRleERhdGEudGV4U2hhcGUsaXNVbmlmb3JtOmguaXNVbmlmb3JtLGlzUGFja2VkOmguaXNVbmlmb3JtPyExOmgudGV4RGF0YS5pc1BhY2tlZCxmbGF0T2Zmc2V0Om51bGx9O3JldHVybiBoLnRleERhdGEhPW51bGwmJmgudGV4RGF0YS5zbGljZSE9bnVsbCYmaC50ZXhEYXRhLnNsaWNlLmZsYXRPZmZzZXQ+MCYmKGYuZmxhdE9mZnNldD1oLnRleERhdGEuc2xpY2UuZmxhdE9mZnNldCkse25hbWU6ZS52YXJpYWJsZU5hbWVzW3BdLHNoYXBlSW5mbzpmfX0pLG89ci5tYXAoaD0+aC5zaGFwZUluZm8pLGk9e2xvZ2ljYWxTaGFwZTpzLnNoYXBlLHRleFNoYXBlOnMudGV4RGF0YS50ZXhTaGFwZSxpc1VuaWZvcm06ITEsaXNQYWNrZWQ6cy50ZXhEYXRhLmlzUGFja2VkLGZsYXRPZmZzZXQ6bnVsbH0sYT1jOShyLGksZSksbD1NWChuLmdsLGEpLGM9bi5jcmVhdGVQcm9ncmFtKGwpO3JldHVybiBvZSgpLmdldCgiRU5HSU5FX0NPTVBJTEVfT05MWSIpP3twcm9ncmFtOmUsZnJhZ21lbnRTaGFkZXI6bCxzb3VyY2U6YSx3ZWJHTFByb2dyYW06YyxpblNoYXBlSW5mb3M6byxvdXRTaGFwZUluZm86aSx2YXJpYWJsZXNMb2NhdGlvbnM6bnVsbCxjdXN0b21Vbmlmb3JtTG9jYXRpb25zOm51bGwsaW5mTG9jOm51bGwsbmFuTG9jOm51bGwsb3V0U2hhcGVMb2NhdGlvbjpudWxsLG91dFNoYXBlU3RyaWRlc0xvY2F0aW9uOm51bGwsb3V0VGV4U2hhcGVMb2NhdGlvbjpudWxsfToobi5idWlsZFZhbyhjKSxPYmplY3QuYXNzaWduKHtwcm9ncmFtOmUsZnJhZ21lbnRTaGFkZXI6bCxzb3VyY2U6YSx3ZWJHTFByb2dyYW06YyxpblNoYXBlSW5mb3M6byxvdXRTaGFwZUluZm86aX0sZ0QobixlLGMpKSl9ZnVuY3Rpb24gZ0QobixlLHQpe2NvbnN0IHM9W10scj1bXTtsZXQgbyxpLGEsbD1udWxsLGM9bnVsbDtjPW4uZ2V0VW5pZm9ybUxvY2F0aW9uKHQsIk5BTiIsITEpLG9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9WRVJTSU9OIik9PT0xJiYobD1uLmdldFVuaWZvcm1Mb2NhdGlvbih0LCJJTkZJTklUWSIsITEpKTtjb25zdCBoPSExO2Zvcihjb25zdCBwIG9mIGUudmFyaWFibGVOYW1lcyl7Y29uc3QgZj17bmFtZTpwLHVuaWZvcm06bi5nZXRVbmlmb3JtTG9jYXRpb24odCxwLGgpLG9mZnNldDpuLmdldFVuaWZvcm1Mb2NhdGlvbih0LGBvZmZzZXQke3B9YCxoKX07ZS5lbmFibGVTaGFwZVVuaWZvcm1zJiYoZi5zaGFwZT1uLmdldFVuaWZvcm1Mb2NhdGlvbih0LGAke3B9U2hhcGVgLGgpLGYudGV4U2hhcGU9bi5nZXRVbmlmb3JtTG9jYXRpb24odCxgJHtwfVRleFNoYXBlYCxoKSkscy5wdXNoKGYpfWlmKGUuZW5hYmxlU2hhcGVVbmlmb3JtcyYmKG89bi5nZXRVbmlmb3JtTG9jYXRpb24odCwib3V0U2hhcGUiLGgpLGE9bi5nZXRVbmlmb3JtTG9jYXRpb24odCwib3V0U2hhcGVTdHJpZGVzIixoKSxpPW4uZ2V0VW5pZm9ybUxvY2F0aW9uKHQsIm91dFRleFNoYXBlIixoKSksZS5jdXN0b21Vbmlmb3Jtcylmb3IoY29uc3QgcCBvZiBlLmN1c3RvbVVuaWZvcm1zKXIucHVzaChuLmdldFVuaWZvcm1Mb2NhdGlvbih0LHAubmFtZSxoKSk7cmV0dXJue3ZhcmlhYmxlc0xvY2F0aW9uczpzLGN1c3RvbVVuaWZvcm1Mb2NhdGlvbnM6cixpbmZMb2M6bCxuYW5Mb2M6YyxvdXRTaGFwZUxvY2F0aW9uOm8sb3V0U2hhcGVTdHJpZGVzTG9jYXRpb246YSxvdXRUZXhTaGFwZUxvY2F0aW9uOml9fWZ1bmN0aW9uIFJDKG4sZSl7aWYobi5sZW5ndGghPT1lLmxlbmd0aCl0aHJvdyBFcnJvcihgQmluYXJ5IHdhcyBjb21waWxlZCB3aXRoICR7bi5sZW5ndGh9IGlucHV0cywgYnV0IHdhcyBleGVjdXRlZCB3aXRoICR7ZS5sZW5ndGh9IGlucHV0c2ApO24uZm9yRWFjaCgodCxzKT0+e2NvbnN0IHI9dC5sb2dpY2FsU2hhcGUsbz1lW3NdLGk9by5zaGFwZTtpZighSmUocixpKSl0aHJvdyBFcnJvcihgQmluYXJ5IHdhcyBjb21waWxlZCB3aXRoIGRpZmZlcmVudCBzaGFwZXMgdGhhbiB0aGUgY3VycmVudCBhcmdzLiBTaGFwZXMgJHtyfSBhbmQgJHtpfSBtdXN0IG1hdGNoYCk7aWYodC5pc1VuaWZvcm0mJm8uaXNVbmlmb3JtKXJldHVybjtjb25zdCBhPXQudGV4U2hhcGUsbD1vLmlzVW5pZm9ybT9udWxsOm8udGV4RGF0YS50ZXhTaGFwZTtpZighSmUoYSxsKSl0aHJvdyBFcnJvcihgQmluYXJ5IHdhcyBjb21waWxlZCB3aXRoIGRpZmZlcmVudCB0ZXh0dXJlIHNoYXBlcyB0aGFuIHRoZSBjdXJyZW50IGFyZ3MuIFNoYXBlICR7YX0gYW5kICR7bH0gbXVzdCBtYXRjaGApfSl9ZnVuY3Rpb24gcTkobixlLHQscyxyKXtlLnByb2dyYW0uZW5hYmxlU2hhcGVVbmlmb3Jtc3x8KFJDKGUuaW5TaGFwZUluZm9zLHQpLFJDKFtlLm91dFNoYXBlSW5mb10sW3NdKSk7Y29uc3Qgbz1zLnRleERhdGEudGV4dHVyZSxpPXMudGV4RGF0YS50ZXhTaGFwZTtzLnRleERhdGEuaXNQYWNrZWQ/bi5zZXRPdXRwdXRQYWNrZWRNYXRyaXhUZXh0dXJlKG8udGV4dHVyZSxpWzBdLGlbMV0pOm4uc2V0T3V0cHV0TWF0cml4VGV4dHVyZShvLnRleHR1cmUsaVswXSxpWzFdKSxuLnNldFByb2dyYW0oZS53ZWJHTFByb2dyYW0pLG4uYmluZFZlcnRleEFycmF5KGUud2ViR0xQcm9ncmFtLnZhbyksb2UoKS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKT09PTEmJmUuaW5mTG9jIT09bnVsbCYmbi5nbC51bmlmb3JtMWYoZS5pbmZMb2MsMS8wKSxlLm5hbkxvYyE9PW51bGwmJm4uZ2wudW5pZm9ybTFmKGUubmFuTG9jLE5hTik7Zm9yKGxldCBsPTA7bDx0Lmxlbmd0aDsrK2wpe2NvbnN0IGM9dFtsXSx7dW5pZm9ybTpoLG9mZnNldDpwLHNoYXBlOmYsdGV4U2hhcGU6Z309ZS52YXJpYWJsZXNMb2NhdGlvbnNbbF07aWYoZil7Y29uc3R7dW5pZm9ybVNoYXBlOnl9PWh2KGUucHJvZ3JhbS5wYWNrZWRJbnB1dHMsYy5zaGFwZSxjLnRleERhdGEudGV4U2hhcGUpO3N3aXRjaCh5Lmxlbmd0aCl7Y2FzZSAxOm4uZ2wudW5pZm9ybTFpdihmLG5ldyBJbnQzMkFycmF5KHkpKTticmVhaztjYXNlIDI6bi5nbC51bmlmb3JtMml2KGYsbmV3IEludDMyQXJyYXkoeSkpO2JyZWFrO2Nhc2UgMzpuLmdsLnVuaWZvcm0zaXYoZixuZXcgSW50MzJBcnJheSh5KSk7YnJlYWs7Y2FzZSA0Om4uZ2wudW5pZm9ybTRpdihmLG5ldyBJbnQzMkFycmF5KHkpKTticmVha319aWYoZyYmbi5nbC51bmlmb3JtMmkoZyxjLnRleERhdGEudGV4U2hhcGVbMF0sYy50ZXhEYXRhLnRleFNoYXBlWzFdKSxoIT1udWxsKXtpZihjLmlzVW5pZm9ybSl7aWYoY2UoYy5zaGFwZSk8MiluLmdsLnVuaWZvcm0xZihoLGMudW5pZm9ybVZhbHVlc1swXSk7ZWxzZXtsZXQgeT1jLnVuaWZvcm1WYWx1ZXM7eSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8KHk9bmV3IEZsb2F0MzJBcnJheSh5KSksbi5nbC51bmlmb3JtMWZ2KGgseSl9Y29udGludWV9Yy50ZXhEYXRhLnNsaWNlIT1udWxsJiZwIT1udWxsJiZuLmdsLnVuaWZvcm0xaShwLGMudGV4RGF0YS5zbGljZS5mbGF0T2Zmc2V0KSxuLnNldElucHV0TWF0cml4VGV4dHVyZShjLnRleERhdGEudGV4dHVyZS50ZXh0dXJlLGgsbCl9fWNvbnN0IGE9ZS5vdXRTaGFwZUxvY2F0aW9uO2lmKGEpc3dpdGNoKHMuc2hhcGUubGVuZ3RoKXtjYXNlIDE6bi5nbC51bmlmb3JtMWl2KGEsbmV3IEludDMyQXJyYXkocy5zaGFwZSkpO2JyZWFrO2Nhc2UgMjpuLmdsLnVuaWZvcm0yaXYoYSxuZXcgSW50MzJBcnJheShzLnNoYXBlKSk7YnJlYWs7Y2FzZSAzOm4uZ2wudW5pZm9ybTNpdihhLG5ldyBJbnQzMkFycmF5KHMuc2hhcGUpKTticmVhaztjYXNlIDQ6bi5nbC51bmlmb3JtNGl2KGEsbmV3IEludDMyQXJyYXkocy5zaGFwZSkpO2JyZWFrfWlmKGUub3V0U2hhcGVTdHJpZGVzTG9jYXRpb24pe2NvbnN0IGw9emUocy5zaGFwZSk7c3dpdGNoKHMuc2hhcGUubGVuZ3RoKXtjYXNlIDI6bi5nbC51bmlmb3JtMWl2KGUub3V0U2hhcGVTdHJpZGVzTG9jYXRpb24sbmV3IEludDMyQXJyYXkobCkpO2JyZWFrO2Nhc2UgMzpuLmdsLnVuaWZvcm0yaXYoZS5vdXRTaGFwZVN0cmlkZXNMb2NhdGlvbixuZXcgSW50MzJBcnJheShsKSk7YnJlYWs7Y2FzZSA0Om4uZ2wudW5pZm9ybTNpdihlLm91dFNoYXBlU3RyaWRlc0xvY2F0aW9uLG5ldyBJbnQzMkFycmF5KGwpKTticmVha319aWYoZS5vdXRUZXhTaGFwZUxvY2F0aW9uJiZuLmdsLnVuaWZvcm0yaShlLm91dFRleFNoYXBlTG9jYXRpb24scy50ZXhEYXRhLnRleFNoYXBlWzBdLHMudGV4RGF0YS50ZXhTaGFwZVsxXSksZS5wcm9ncmFtLmN1c3RvbVVuaWZvcm1zJiZyKWZvcihsZXQgbD0wO2w8ZS5wcm9ncmFtLmN1c3RvbVVuaWZvcm1zLmxlbmd0aDsrK2wpe2NvbnN0IGM9ZS5wcm9ncmFtLmN1c3RvbVVuaWZvcm1zW2xdLGg9ZS5jdXN0b21Vbmlmb3JtTG9jYXRpb25zW2xdLHA9cltsXTtpZihjLnR5cGU9PT0iZmxvYXQiKW4uZ2wudW5pZm9ybTFmdihoLHApO2Vsc2UgaWYoYy50eXBlPT09InZlYzIiKW4uZ2wudW5pZm9ybTJmdihoLHApO2Vsc2UgaWYoYy50eXBlPT09InZlYzMiKW4uZ2wudW5pZm9ybTNmdihoLHApO2Vsc2UgaWYoYy50eXBlPT09InZlYzQiKW4uZ2wudW5pZm9ybTRmdihoLHApO2Vsc2UgaWYoYy50eXBlPT09ImludCIpbi5nbC51bmlmb3JtMWl2KGgscCk7ZWxzZSBpZihjLnR5cGU9PT0iaXZlYzIiKW4uZ2wudW5pZm9ybTJpdihoLHApO2Vsc2UgaWYoYy50eXBlPT09Iml2ZWMzIiluLmdsLnVuaWZvcm0zaXYoaCxwKTtlbHNlIGlmKGMudHlwZT09PSJpdmVjNCIpbi5nbC51bmlmb3JtNGl2KGgscCk7ZWxzZSB0aHJvdyBFcnJvcihgdW5pZm9ybSB0eXBlICR7Yy50eXBlfSBpcyBub3Qgc3VwcG9ydGVkIHlldC5gKX1uLmV4ZWN1dGVQcm9ncmFtKCl9ZnVuY3Rpb24gSzkobixlLHQpe2xldCBzPSIiO2UuY29uY2F0KHQpLmZvckVhY2goaT0+e2NvbnN0IGE9aS50ZXhEYXRhIT1udWxsJiZpLnRleERhdGEuc2xpY2UhPW51bGwmJmkudGV4RGF0YS5zbGljZS5mbGF0T2Zmc2V0PjA7aWYobi5lbmFibGVTaGFwZVVuaWZvcm1zJiYhaS5pc1VuaWZvcm0pe2NvbnN0IGw9aS50ZXhEYXRhLnRleFNoYXBlLHt1c2VTcXVlZXplU2hhcGU6Yyx1bmlmb3JtU2hhcGU6aCxrZXB0RGltczpwfT1odihuLnBhY2tlZElucHV0cyxpLnNoYXBlLGwpO2xldCBmPSIiLGc9IiIseT0iIjtpZihoLmxlbmd0aD09PTEmJm4ucGFja2VkSW5wdXRzKXtjb25zdCBUPVtNYXRoLmNlaWwobFswXS8yKSxNYXRoLmNlaWwobFsxXS8yKV07Zj1gJHtUWzBdPjF9XyR7VFsxXT4xfWB9ZWxzZSBpZihoLmxlbmd0aD09PTImJiFuLnBhY2tlZElucHV0cylnPWAke2hbMF0+MX1fJHtoWzFdPjF9YDtlbHNlIGlmKGgubGVuZ3RoPjImJiFuLnBhY2tlZElucHV0cyl7Y29uc3QgVD16ZShoKTt5PWAke1RbMF09PT1sWzFdfV8ke1RbVC5sZW5ndGgtMV09PT1sWzFdfWB9Y29uc3Qgdz1pLnNoYXBlLmxlbmd0aCxiPWgubGVuZ3RoPT09MiYmSmUoaS5zaGFwZSxsKSx2PWNlKGkuc2hhcGUpPT09MSxTPWNhKGkuc2hhcGUsdC5zaGFwZSksJD0hbi5wYWNrZWRJbnB1dHMmJnc9PT10LnNoYXBlLmxlbmd0aCYmSmUobCx0LnRleERhdGEudGV4U2hhcGUpLGs9bi5wYWNrZWRJbnB1dHN8fGgubGVuZ3RoPjI/IiI6YCR7bFswXT4xfV8ke2xbMV0+MX1gO3MrPWAke3d9XyR7JH1fJHtjP3A6IiJ9XyR7aC5sZW5ndGh9XyR7dn1fJHtTfV8ke2J9XyR7Zn1fJHtnfV8ke3l9XyR7a31fJHthfWB9ZWxzZXtjb25zdCBsPWkuaXNVbmlmb3JtPyJ1bmlmb3JtIjppLnRleERhdGEudGV4U2hhcGU7cys9YCR7aS5zaGFwZX1fJHtsfV8ke2F9YH19KTtjb25zdCByPW4udXNlckNvZGU7bGV0IG89bi5jb25zdHJ1Y3Rvci5uYW1lO3JldHVybiBvKz0iXyIrcysiXyIrcitgJHtvZSgpLmdldE51bWJlcigiV0VCR0xfVkVSU0lPTiIpfWAsb31mdW5jdGlvbiBMbihuKXtyZXR1cm4gb2UoKS5nZXRCb29sKCJXRUJHTF9VU0VfU0hBUEVTX1VOSUZPUk1TIikmJm48PTR9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgWDl7Y29uc3RydWN0b3IoZSl7dGhpcy52YXJpYWJsZU5hbWVzPVsiQSJdLHRoaXMucGFja2VkSW5wdXRzPSExLHRoaXMucGFja2VkT3V0cHV0PSEwLHRoaXMub3V0UGFja2luZ1NjaGVtZT1YYy5ERU5TRSx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToidGV4U2hhcGUiLHR5cGU6Iml2ZWMyIn1dO2NvbnN0IHQ9S24oKTt0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPUxuKHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoKSx0aGlzLnVzZXJDb2RlPWAKICAgICAgaXZlYzMgb3V0Q29vcmRzRnJvbUZsYXRJbmRleChpbnQgaW5kZXgpIHsKICAgICAgICAke3RoaXMuZW5hYmxlU2hhcGVVbmlmb3Jtcz9seShbInIiLCJjIiwiZCJdLGUpOkVhKFsiciIsImMiLCJkIl0sZSl9CiAgICAgICAgcmV0dXJuIGl2ZWMzKHIsIGMsIGQpOwogICAgICB9CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzIgcmVzVGV4UkMgPSBpdmVjMihyZXN1bHRVVi55eCAqIHZlYzIodGV4U2hhcGVbMF0sIHRleFNoYXBlWzFdKSk7CiAgICAgICAgaW50IGluZGV4ID0gNCAqIChyZXNUZXhSQy54ICogdGV4U2hhcGVbMV0gKyByZXNUZXhSQy55KTsKCiAgICAgICAgdmVjNCByZXN1bHQgPSB2ZWM0KDAuKTsKCiAgICAgICAgZm9yIChpbnQgaT0wOyBpPDQ7IGkrKykgewogICAgICAgICAgaW50IGZsYXRJbmRleCA9IGluZGV4ICsgaTsKICAgICAgICAgIGl2ZWMzIHJjID0gb3V0Q29vcmRzRnJvbUZsYXRJbmRleChmbGF0SW5kZXgpOwogICAgICAgICAgcmVzdWx0W2ldID0gZ2V0QShyYy54LCByYy55LCByYy56KTsKICAgICAgICB9CgogICAgICAgICR7dC5vdXRwdXR9ID0gcmVzdWx0OwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBZOXtjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITAsdGhpcy5vdXRQYWNraW5nU2NoZW1lPVhjLkRFTlNFLHRoaXMuY3VzdG9tVW5pZm9ybXM9W3tuYW1lOiJ0ZXhTaGFwZSIsdHlwZToiaXZlYzIifV07Y29uc3QgdD1LbigpO3RoaXMub3V0cHV0U2hhcGU9ZSx0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM9TG4odGhpcy5vdXRwdXRTaGFwZS5sZW5ndGgpLHRoaXMudXNlckNvZGU9YAogICAgICBpdmVjMyBvdXRDb29yZHNGcm9tRmxhdEluZGV4KGludCBpbmRleCkgewogICAgICAgICR7dGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zP2x5KFsiciIsImMiLCJkIl0sZSk6RWEoWyJyIiwiYyIsImQiXSxlKX0KICAgICAgICByZXR1cm4gaXZlYzMociwgYywgZCk7CiAgICAgIH0KCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMiByZXNUZXhSQyA9IGl2ZWMyKHJlc3VsdFVWLnl4ICogdmVjMih0ZXhTaGFwZVswXSwgdGV4U2hhcGVbMV0pKTsKICAgICAgICBpbnQgaW5kZXggPSA0ICogKHJlc1RleFJDLnggKiB0ZXhTaGFwZVsxXSArIHJlc1RleFJDLnkpOwoKICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMC4pOwoKICAgICAgICBmb3IgKGludCBpPTA7IGk8NDsgaSsrKSB7CiAgICAgICAgICBpbnQgZmxhdEluZGV4ID0gaW5kZXggKyBpOwogICAgICAgICAgaXZlYzMgcmMgPSBvdXRDb29yZHNGcm9tRmxhdEluZGV4KGZsYXRJbmRleCk7CiAgICAgICAgICByZXN1bHRbaV0gPSBnZXRDaGFubmVsKGdldEEocmMueCwgcmMueSwgcmMueiksIHZlYzIocmMueSwgcmMueikpOwogICAgICAgIH0KCiAgICAgICAgJHt0Lm91dHB1dH0gPSByZXN1bHQ7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIFE5e2NvbnN0cnVjdG9yKGUpe3RoaXMudmFyaWFibGVOYW1lcz1bIkEiXSx0aGlzLm91dFRleFVzYWdlPU9zLkRPV05MT0FEO2NvbnN0IHQ9S24oKTt0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy51c2VyQ29kZT1gCiAgICAgICR7aER9CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgZmxvYXQgeCA9IGdldEFBdE91dENvb3JkcygpOwogICAgICAgICR7dC5vdXRwdXR9ID0gZW5jb2RlX2Zsb2F0KHgpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBaOXtjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITEsdGhpcy5vdXRUZXhVc2FnZT1Pcy5ET1dOTE9BRDtjb25zdCB0PUtuKCk7dGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMudXNlckNvZGU9YAogICAgICAke2hEfQoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWMzIGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGZsb2F0IHggPSBnZXRDaGFubmVsKGdldEFBdE91dENvb3JkcygpLCB2ZWMyKGNvb3Jkcy55LCBjb29yZHMueikpOwogICAgICAgICR7dC5vdXRwdXR9ID0gZW5jb2RlX2Zsb2F0KHgpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBKOT17UjowLEc6MSxCOjIsQTozfTtjbGFzcyBEQ3tjb25zdHJ1Y3RvcihlLHQ9ITEscz0iUkdCQSIpe3RoaXMudmFyaWFibGVOYW1lcz1bIkEiXSx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToidGV4U2hhcGUiLHR5cGU6Iml2ZWMyIn1dO2NvbnN0IHI9S24oKTt0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPUxuKHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoKTtsZXQgbz0icmVzdWx0Ijt0JiYobz0iZmxvb3IocmVzdWx0ICogMjU1LiArIDAuNSkiKTtsZXQgaT0iIjtmb3IobGV0IGE9MDthPHMubGVuZ3RoO2ErKyl7Y29uc3QgbD1zW2FdO2krPWAKICAgICAgICAgIGlmKG9mZnNldCA9PSAke2F9KSB7CiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlc1ske0o5W2xdfV07CiAgICAgICAgICB9YH10aGlzLnVzZXJDb2RlPWAKICAgICAgJHt0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM/ZHYoKTpjdihlKX0KCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMyBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgZmxhdEluZGV4ID0gZ2V0RmxhdEluZGV4KGNvb3Jkcyk7CiAgICAgICAgZmxvYXQgcmVzdWx0ID0gMC47CiAgICAgICAgaW50IG9mZnNldCA9IGltb2QoZmxhdEluZGV4LCAke3MubGVuZ3RofSk7CgogICAgICAgIGZsYXRJbmRleCA9IGlkaXYoZmxhdEluZGV4LCAke3MubGVuZ3RofSwgMS4pOwoKICAgICAgICBpbnQgciA9IGZsYXRJbmRleCAvIHRleFNoYXBlWzFdOwogICAgICAgIGlmIChyIDwgdGV4U2hhcGVbMF0pIHsKICAgICAgICAgIGludCBjID0gaW1vZChmbGF0SW5kZXgsIHRleFNoYXBlWzFdKTsKICAgICAgICAgIHZlYzIgdXYgPSAodmVjMihjLCByKSArIGhhbGZDUikgLyB2ZWMyKHRleFNoYXBlWzFdLCB0ZXhTaGFwZVswXSk7CiAgICAgICAgICB2ZWM0IHZhbHVlcyA9ICR7ci50ZXh0dXJlMkR9KEEsIHV2KTsKICAgICAgICAgICR7aX0KICAgICAgICB9CiAgICAgICAgJHtyLm91dHB1dH0gPSB2ZWM0KCR7b30sIDAuLCAwLiwgMC4pOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBlWXtjb25zdHJ1Y3RvcihlLHQ9ITEpe3RoaXMudmFyaWFibGVOYW1lcz1bIkEiXSx0aGlzLnBhY2tlZElucHV0cz0hMSx0aGlzLnBhY2tlZE91dHB1dD0hMCx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToidGV4U2hhcGUiLHR5cGU6Iml2ZWMyIn1dO2NvbnN0IHM9S24oKTt0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPUxuKHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoKTtsZXQgcj0iIixvPSJyZXN1bHQiO3QmJihvPSJmbG9vcihyZXN1bHQgKiAyNTUuICsgMC41KSIpO2ZvcihsZXQgaT0wO2k8PTE7aSsrKWZvcihsZXQgYT0wO2E8PTE7YSsrKXtjb25zdCBsPWkqMithO3IrPWAKICAgICAgICAgIGxvY2FsQ29vcmRzID0gY29vcmRzOwogICAgICAgICAgaWYobG9jYWxDb29yZHNbMl0gKyAke2F9IDwgJHt0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM/Im91dFNoYXBlWzJdIjpgJHtlWzJdfWB9KSB7CiAgICAgICAgICBsb2NhbENvb3Jkc1syXSArPSAke2F9OwogICAgICAgICAgaWYgKGxvY2FsQ29vcmRzWzFdICsgJHtpfSA8ICR7dGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPyJvdXRTaGFwZVsxXSI6YCR7ZVsxXX1gfSkgewogICAgICAgICAgICBsb2NhbENvb3Jkc1sxXSArPSAke2l9OwoKICAgICAgICAgICAgZmxhdEluZGV4ID0gZ2V0RmxhdEluZGV4KGxvY2FsQ29vcmRzKTsKICAgICAgICAgICAgb2Zmc2V0ID0gaW1vZChmbGF0SW5kZXgsIDQpOwoKICAgICAgICAgICAgZmxhdEluZGV4ID0gaWRpdihmbGF0SW5kZXgsIDQsIDEuKTsKCiAgICAgICAgICAgIGludCByID0gZmxhdEluZGV4IC8gdGV4U2hhcGVbMV07CiAgICAgICAgICAgIGludCBjID0gaW1vZChmbGF0SW5kZXgsIHRleFNoYXBlWzFdKTsKICAgICAgICAgICAgdmVjMiB1diA9ICh2ZWMyKGMsIHIpICsgaGFsZkNSKSAvIHZlYzIodGV4U2hhcGVbMV0sIHRleFNoYXBlWzBdKTsKICAgICAgICAgICAgdmFsdWVzID0gJHtzLnRleHR1cmUyRH0oQSwgdXYpOwoKICAgICAgICAgICAgaWYgKG9mZnNldCA9PSAwKSB7CiAgICAgICAgICAgICAgcmVzdWx0WyR7bH1dID0gdmFsdWVzWzBdOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9mZnNldCA9PSAxKSB7CiAgICAgICAgICAgICAgcmVzdWx0WyR7bH1dID0gdmFsdWVzWzFdOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9mZnNldCA9PSAyKSB7CiAgICAgICAgICAgICAgcmVzdWx0WyR7bH1dID0gdmFsdWVzWzJdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdFske2x9XSA9IHZhbHVlc1szXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBgfXRoaXMudXNlckNvZGU9YAogICAgICAgICR7dGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zP2R2KCk6Y3YoZSl9CgogICAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAgIGl2ZWMzIGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwoKICAgICAgICAgIHZlYzQgcmVzdWx0ID0gdmVjNCgwLik7CiAgICAgICAgICBpbnQgZmxhdEluZGV4LCByLCBjLCBvZmZzZXQ7CiAgICAgICAgICBpdmVjMyBsb2NhbENvb3JkczsKICAgICAgICAgIHZlYzIgdXY7CiAgICAgICAgICB2ZWM0IHZhbHVlczsKCiAgICAgICAgICAke3J9CgogICAgICAgICAgJHtzLm91dHB1dH0gPSAke299OwogICAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHRZKG4pe2NvbnN0IGU9S24oKSx0PWAke2UudmVyc2lvbn0KICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDsKICAgICR7ZS5hdHRyaWJ1dGV9IHZlYzMgY2xpcFNwYWNlUG9zOwogICAgJHtlLmF0dHJpYnV0ZX0gdmVjMiB1djsKICAgICR7ZS52YXJ5aW5nVnN9IHZlYzIgcmVzdWx0VVY7CgogICAgdm9pZCBtYWluKCkgewogICAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoY2xpcFNwYWNlUG9zLCAxKTsKICAgICAgcmVzdWx0VVYgPSB1djsKICAgIH1gO3JldHVybiB6WChuLHQpfWZ1bmN0aW9uIG5ZKG4pe2NvbnN0IGU9bmV3IEZsb2F0MzJBcnJheShbLTEsMSwwLDAsMSwtMSwtMSwwLDAsMCwxLDEsMCwxLDEsMSwtMSwwLDEsMF0pO3JldHVybiBVWChuLGUpfWZ1bmN0aW9uIHNZKG4pe2NvbnN0IGU9bmV3IFVpbnQxNkFycmF5KFswLDEsMiwyLDEsM10pO3JldHVybiBqWChuLGUpfWZ1bmN0aW9uIExoKG4sZSx0LHMscixvKXtIWChlLHQpO2NvbnN0IGk9R1gobiksYT1uLlRFWFRVUkVfMkQ7cmV0dXJuICRlKG4sKCk9Pm4uYmluZFRleHR1cmUoYSxpKSksJGUobiwoKT0+bi50ZXhQYXJhbWV0ZXJpKGEsbi5URVhUVVJFX1dSQVBfUyxuLkNMQU1QX1RPX0VER0UpKSwkZShuLCgpPT5uLnRleFBhcmFtZXRlcmkoYSxuLlRFWFRVUkVfV1JBUF9ULG4uQ0xBTVBfVE9fRURHRSkpLCRlKG4sKCk9Pm4udGV4UGFyYW1ldGVyaShhLG4uVEVYVFVSRV9NSU5fRklMVEVSLG4uTkVBUkVTVCkpLCRlKG4sKCk9Pm4udGV4UGFyYW1ldGVyaShhLG4uVEVYVFVSRV9NQUdfRklMVEVSLG4uTkVBUkVTVCkpLG9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9WRVJTSU9OIik9PT0xPyRlKG4sKCk9Pm4udGV4SW1hZ2UyRChhLDAscyxlLHQsMCxyLG8sbnVsbCkpOiRlKG4sKCk9Pm4udGV4U3RvcmFnZTJEKGEsMSxzLGUsdCkpLCRlKG4sKCk9Pm4uYmluZFRleHR1cmUobi5URVhUVVJFXzJELG51bGwpKSx7dGV4dHVyZTppLHRleFNoYXBlOlt0LGVdfX1mdW5jdGlvbiB5RChuKXtyZXR1cm4gbi5pbnRlcm5hbEZvcm1hdEZsb2F0fWZ1bmN0aW9uIHJZKG4sZSx0LHMpe2NvbnN0W3Isb109T2goZSx0KTtyZXR1cm4gTGgobixyLG8seUQocykscy50ZXh0dXJlRm9ybWF0RmxvYXQsbi5GTE9BVCl9ZnVuY3Rpb24geEQobil7cmV0dXJuIG4uaW50ZXJuYWxGb3JtYXRIYWxmRmxvYXR9ZnVuY3Rpb24gb1kobixlLHQscyl7Y29uc3RbcixvXT1PaChlLHQpO3JldHVybiBMaChuLHIsbyx4RChzKSxzLnRleHR1cmVGb3JtYXRGbG9hdCxzLnRleHR1cmVUeXBlSGFsZkZsb2F0KX1mdW5jdGlvbiBiRChuKXtyZXR1cm4gbi5kb3dubG9hZFRleHR1cmVGb3JtYXR9ZnVuY3Rpb24gaVkobixlLHQscyl7Y29uc3RbcixvXT1PaChlLHQpO3JldHVybiBMaChuLHIsbyxiRChzKSxuLlJHQkEsbi5VTlNJR05FRF9CWVRFKX1mdW5jdGlvbiB3RChuKXtyZXR1cm4gbi5pbnRlcm5hbEZvcm1hdFBhY2tlZEZsb2F0fWZ1bmN0aW9uIGFZKG4sZSx0LHMpe2NvbnN0W3Isb109UnUoZSx0KTtyZXR1cm4gTGgobixyLG8sd0Qocyksbi5SR0JBLG4uRkxPQVQpfWZ1bmN0aW9uIHZEKG4pe3JldHVybiBuLmludGVybmFsRm9ybWF0UGFja2VkSGFsZkZsb2F0fWZ1bmN0aW9uIGxZKG4sZSx0LHMpe2NvbnN0W3Isb109UnUoZSx0KTtyZXR1cm4gTGgobixyLG8sdkQocyksbi5SR0JBLHMudGV4dHVyZVR5cGVIYWxmRmxvYXQpfWZ1bmN0aW9uIHVZKG4sZSx0KXtyZXR1cm4gJGUobiwoKT0+bi5iaW5kQnVmZmVyKG4uQVJSQVlfQlVGRkVSLHQpKSxJQyhuLGUsImNsaXBTcGFjZVBvcyIsdCwzLDIwLDApJiZJQyhuLGUsInV2Iix0LDIsMjAsMTIpfWZ1bmN0aW9uIGNZKG4sZSx0LHMscixvKXskZShuLCgpPT5uLmJpbmRUZXh0dXJlKG4uVEVYVFVSRV8yRCxlKSk7bGV0IGksYSxsO3IgaW5zdGFuY2VvZiBVaW50OEFycmF5PyhpPW5ldyBVaW50OEFycmF5KHQqcyo0KSxhPW4uVU5TSUdORURfQllURSxsPW4uUkdCQSk6KGk9bmV3IEZsb2F0MzJBcnJheSh0KnMqNCksYT1uLkZMT0FULGw9by5pbnRlcm5hbEZvcm1hdFBhY2tlZEZsb2F0KSxpLnNldChyKSxvZSgpLmdldE51bWJlcigiV0VCR0xfVkVSU0lPTiIpPT09Mj8kZShuLCgpPT5uLnRleFN1YkltYWdlMkQobi5URVhUVVJFXzJELDAsMCwwLHQscyxuLlJHQkEsYSxpKSk6JGUobiwoKT0+bi50ZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLGwsdCxzLDAsbi5SR0JBLGEsaSkpLCRlKG4sKCk9Pm4uYmluZFRleHR1cmUobi5URVhUVVJFXzJELG51bGwpKX1mdW5jdGlvbiBkWShuLGUsdCl7JGUobiwoKT0+bi5iaW5kVGV4dHVyZShuLlRFWFRVUkVfMkQsZSkpLHQuZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk/b2UoKS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKT09PTI/JGUobiwoKT0+bi50ZXhTdWJJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLDAsMCx0LndpZHRoLHQuaGVpZ2h0LG4uUkdCQSxuLlVOU0lHTkVEX0JZVEUsdC5kYXRhKSk6JGUobiwoKT0+bi50ZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLG4uUkdCQSx0LndpZHRoLHQuaGVpZ2h0LDAsbi5SR0JBLG4uVU5TSUdORURfQllURSx0LmRhdGEpKTpvZSgpLmdldE51bWJlcigiV0VCR0xfVkVSU0lPTiIpPT09Mj8kZShuLCgpPT5uLnRleFN1YkltYWdlMkQobi5URVhUVVJFXzJELDAsMCwwLG4uUkdCQSxuLlVOU0lHTkVEX0JZVEUsdCkpOiRlKG4sKCk9Pm4udGV4SW1hZ2UyRChuLlRFWFRVUkVfMkQsMCxuLlJHQkEsbi5SR0JBLG4uVU5TSUdORURfQllURSx0KSksJGUobiwoKT0+bi5iaW5kVGV4dHVyZShuLlRFWFRVUkVfMkQsbnVsbCkpfWZ1bmN0aW9uIGhZKG4sZSx0LHMpe2NvbnN0IHI9bi5jcmVhdGVCdWZmZXIoKTskZShuLCgpPT5uLmJpbmRCdWZmZXIobi5QSVhFTF9QQUNLX0JVRkZFUixyKSk7Y29uc3QgYT00KjQqZSp0O3JldHVybiAkZShuLCgpPT5uLmJ1ZmZlckRhdGEobi5QSVhFTF9QQUNLX0JVRkZFUixhLG4uU1RSRUFNX1JFQUQpKSwkZShuLCgpPT5uLnJlYWRQaXhlbHMoMCwwLHQsZSxuLlJHQkEsbi5GTE9BVCwwKSksJGUobiwoKT0+bi5iaW5kQnVmZmVyKG4uUElYRUxfUEFDS19CVUZGRVIsbnVsbCkpLHJ9ZnVuY3Rpb24gcFkobixlLHQpe2NvbnN0IHM9bixyPW5ldyBGbG9hdDMyQXJyYXkodCk7cmV0dXJuIHMuYmluZEJ1ZmZlcihzLlBJWEVMX1BBQ0tfQlVGRkVSLGUpLHMuZ2V0QnVmZmVyU3ViRGF0YShzLlBJWEVMX1BBQ0tfQlVGRkVSLDAscikscy5iaW5kQnVmZmVyKHMuUElYRUxfUEFDS19CVUZGRVIsbnVsbCkscn1mdW5jdGlvbiBmWShuLGUsdCxzKXtjb25zdFtyLG9dPU9oKGUsdCksaT00LGE9bmV3IFVpbnQ4QXJyYXkoRFgoZSp0LGkpKTtyZXR1cm4gJGUobiwoKT0+bi5yZWFkUGl4ZWxzKDAsMCxyLG8scy5kb3dubG9hZFRleHR1cmVGb3JtYXQsbi5VTlNJR05FRF9CWVRFLGEpKSxuZXcgRmxvYXQzMkFycmF5KGEuYnVmZmVyKX1mdW5jdGlvbiBtWShuLGUsdCxzLHIsbyxpLGEpe2NvbnN0IGw9bixjPW5ldyBGbG9hdDMyQXJyYXkoQVgobyxpKSk7cmV0dXJuIGwuYmluZEJ1ZmZlcihsLlBJWEVMX1BBQ0tfQlVGRkVSLGUpLGwuZ2V0QnVmZmVyU3ViRGF0YShsLlBJWEVMX1BBQ0tfQlVGRkVSLDAsYyksbC5iaW5kQnVmZmVyKGwuUElYRUxfUEFDS19CVUZGRVIsbnVsbCksY31mdW5jdGlvbiBnWShuLGUsdCl7Y29uc3Qgcz1uZXcgRmxvYXQzMkFycmF5KGUqdCo0KTtyZXR1cm4gJGUobiwoKT0+bi5yZWFkUGl4ZWxzKDAsMCx0LGUsbi5SR0JBLG4uRkxPQVQscykpLHN9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgSTB7Y29uc3RydWN0b3IoZSl7dGhpcy5vdXRwdXRUZXh0dXJlPW51bGwsdGhpcy5wcm9ncmFtPW51bGwsdGhpcy5kaXNwb3NlZD0hMSx0aGlzLml0ZW1zVG9Qb2xsPVtdO2NvbnN0IHQ9b2UoKS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKTtpZihlIT1udWxsPyh0aGlzLmdsPWUsVFgodCxlKSk6dGhpcy5nbD1Dcih0KSxlPXRoaXMuZ2wsb2UoKS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKT09PTIpe2NvbnN0IG89ZTt0aGlzLmNyZWF0ZVZlcnRleEFycmF5PSgpPT4kZShvLCgpPT5vLmNyZWF0ZVZlcnRleEFycmF5KCkpLHRoaXMuYmluZFZlcnRleEFycmF5PWk9PiRlKG8sKCk9Pm8uYmluZFZlcnRleEFycmF5KGkpKSx0aGlzLmRlbGV0ZVZlcnRleEFycmF5PWk9PiRlKG8sKCk9Pm8uZGVsZXRlVmVydGV4QXJyYXkoaSkpLHRoaXMuZ2V0VmVydGV4QXJyYXk9KCk9PiRlKG8sKCk9Pm8uZ2V0UGFyYW1ldGVyKG8uVkVSVEVYX0FSUkFZX0JJTkRJTkcpKX1lbHNlIGlmKGUhPW51bGwpe2NvbnN0IG89ZS5nZXRFeHRlbnNpb24oIk9FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0Iik7aWYobz09bnVsbCl0aHJvdyBuZXcgRXJyb3IoIkFsbCBXZWJHTDEgaW1wbGVtZW50YXRpb25zIGFyZSBleHBlY3RlZCB0byBvZmZlciBPRVNfdmVydGV4X2FycmF5X29iamVjdC4iKTt0aGlzLmNyZWF0ZVZlcnRleEFycmF5PSgpPT4kZShlLCgpPT5vLmNyZWF0ZVZlcnRleEFycmF5T0VTKCkpLHRoaXMuYmluZFZlcnRleEFycmF5PWk9PiRlKGUsKCk9Pm8uYmluZFZlcnRleEFycmF5T0VTKGkpKSx0aGlzLmRlbGV0ZVZlcnRleEFycmF5PWk9PiRlKGUsKCk9Pm8uZGVsZXRlVmVydGV4QXJyYXlPRVMoaSkpLHRoaXMuZ2V0VmVydGV4QXJyYXk9KCk9PiRlKGUsKCk9PmUuZ2V0UGFyYW1ldGVyKG8uVkVSVEVYX0FSUkFZX0JJTkRJTkdfT0VTKSl9bGV0IHM9IldFQkdMX2NvbG9yX2J1ZmZlcl9mbG9hdCI7Y29uc3Qgcj0iRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0IjtpZih0aGlzLnBhcmFsbGVsQ29tcGlsYXRpb25FeHRlbnNpb249dGhpcy5nbC5nZXRFeHRlbnNpb24oIktIUl9wYXJhbGxlbF9zaGFkZXJfY29tcGlsZSIpLG9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9WRVJTSU9OIik9PT0xKXtjb25zdCBvPSJPRVNfdGV4dHVyZV9mbG9hdCIsaT0iT0VTX3RleHR1cmVfaGFsZl9mbG9hdCI7aWYodGhpcy50ZXh0dXJlRmxvYXRFeHRlbnNpb249c2YodGhpcy5nbCxvKSxKcyh0aGlzLmdsLGkpKXRoaXMudGV4dHVyZUhhbGZGbG9hdEV4dGVuc2lvbj1zZih0aGlzLmdsLGkpO2Vsc2UgaWYob2UoKS5nZXQoIldFQkdMX0ZPUkNFX0YxNl9URVhUVVJFUyIpKXRocm93IG5ldyBFcnJvcigiR0wgY29udGV4dCBkb2VzIG5vdCBzdXBwb3J0IGhhbGYgZmxvYXQgdGV4dHVyZXMsIHlldCB0aGUgZW52aXJvbm1lbnQgZmxhZyBXRUJHTF9GT1JDRV9GMTZfVEVYVFVSRVMgaXMgc2V0IHRvIHRydWUuIik7aWYodGhpcy5jb2xvckJ1ZmZlckZsb2F0RXh0ZW5zaW9uPXRoaXMuZ2wuZ2V0RXh0ZW5zaW9uKHMpLEpzKHRoaXMuZ2wscikpdGhpcy5jb2xvckJ1ZmZlckhhbGZGbG9hdEV4dGVuc2lvbj1zZih0aGlzLmdsLHIpO2Vsc2UgaWYob2UoKS5nZXQoIldFQkdMX0ZPUkNFX0YxNl9URVhUVVJFUyIpKXRocm93IG5ldyBFcnJvcigiR0wgY29udGV4dCBkb2VzIG5vdCBzdXBwb3J0IGNvbG9yIHJlbmRlcmFibGUgaGFsZiBmbG9hdHMsIHlldCB0aGUgZW52aXJvbm1lbnQgZmxhZyBXRUJHTF9GT1JDRV9GMTZfVEVYVFVSRVMgaXMgc2V0IHRvIHRydWUuIil9ZWxzZSBpZihzPSJFWFRfY29sb3JfYnVmZmVyX2Zsb2F0IixKcyh0aGlzLmdsLHMpKXRoaXMuY29sb3JCdWZmZXJGbG9hdEV4dGVuc2lvbj10aGlzLmdsLmdldEV4dGVuc2lvbihzKTtlbHNlIGlmKEpzKHRoaXMuZ2wscikpdGhpcy5jb2xvckJ1ZmZlckhhbGZGbG9hdEV4dGVuc2lvbj10aGlzLmdsLmdldEV4dGVuc2lvbihyKTtlbHNlIHRocm93IG5ldyBFcnJvcigiR0wgY29udGV4dCBkb2VzIG5vdCBzdXBwb3J0IGNvbG9yIHJlbmRlcmFibGUgZmxvYXRzIik7dGhpcy52ZXJ0ZXhCdWZmZXI9blkodGhpcy5nbCksdGhpcy5pbmRleEJ1ZmZlcj1zWSh0aGlzLmdsKSx0aGlzLmZyYW1lYnVmZmVyPXFYKHRoaXMuZ2wpLHRoaXMudGV4dHVyZUNvbmZpZz11dih0aGlzLmdsLHRoaXMudGV4dHVyZUhhbGZGbG9hdEV4dGVuc2lvbil9Z2V0IGRlYnVnKCl7cmV0dXJuIG9lKCkuZ2V0Qm9vbCgiREVCVUciKX1kaXNwb3NlKCl7aWYodGhpcy5kaXNwb3NlZClyZXR1cm47dGhpcy5wcm9ncmFtIT1udWxsJiZjb25zb2xlLndhcm4oIkRpc3Bvc2luZyBhIEdQR1BVQ29udGV4dCB0aGF0IHN0aWxsIGhhcyBhIGJvdW5kIFdlYkdMUHJvZ3JhbS4gVGhpcyBpcyBwcm9iYWJseSBhIHJlc291cmNlIGxlYWssIGRlbGV0ZSB0aGUgcHJvZ3JhbSB3aXRoIEdQR1BVQ29udGV4dC5kZWxldGVQcm9ncmFtIGJlZm9yZSBkaXNwb3NpbmcuIiksdGhpcy5vdXRwdXRUZXh0dXJlIT1udWxsJiZjb25zb2xlLndhcm4oIkRpc3Bvc2luZyBhIEdQR1BVQ29udGV4dCB0aGF0IHN0aWxsIGhhcyBhIGJvdW5kIG91dHB1dCBtYXRyaXggdGV4dHVyZS4gIFRoaXMgaXMgcHJvYmFibHkgYSByZXNvdXJjZSBsZWFrLCBkZWxldGUgdGhlIG91dHB1dCBtYXRyaXggdGV4dHVyZSB3aXRoIEdQR1BVQ29udGV4dC5kZWxldGVNYXRyaXhUZXh0dXJlIGJlZm9yZSBkaXNwb3NpbmcuIik7Y29uc3QgZT10aGlzLmdsOyRlKGUsKCk9PmUuZmluaXNoKCkpLCRlKGUsKCk9PmUuYmluZEZyYW1lYnVmZmVyKGUuRlJBTUVCVUZGRVIsbnVsbCkpLCRlKGUsKCk9PmUuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5mcmFtZWJ1ZmZlcikpLCRlKGUsKCk9PmUuYmluZEJ1ZmZlcihlLkFSUkFZX0JVRkZFUixudWxsKSksJGUoZSwoKT0+ZS5iaW5kQnVmZmVyKGUuRUxFTUVOVF9BUlJBWV9CVUZGRVIsbnVsbCkpLCRlKGUsKCk9PmUuZGVsZXRlQnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIpKSx0aGlzLmRpc3Bvc2VkPSEwfWNyZWF0ZUZsb2F0MzJNYXRyaXhUZXh0dXJlKGUsdCl7cmV0dXJuIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCksclkodGhpcy5nbCxlLHQsdGhpcy50ZXh0dXJlQ29uZmlnKX1jcmVhdGVGbG9hdDE2TWF0cml4VGV4dHVyZShlLHQpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLG9ZKHRoaXMuZ2wsZSx0LHRoaXMudGV4dHVyZUNvbmZpZyl9Y3JlYXRlVW5zaWduZWRCeXRlc01hdHJpeFRleHR1cmUoZSx0KXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxpWSh0aGlzLmdsLGUsdCx0aGlzLnRleHR1cmVDb25maWcpfXVwbG9hZFBpeGVsRGF0YVRvVGV4dHVyZShlLHQpe3RoaXMudGhyb3dJZkRpc3Bvc2VkKCksZFkodGhpcy5nbCxlLHQpfXVwbG9hZERlbnNlTWF0cml4VG9UZXh0dXJlKGUsdCxzLHIpe3RoaXMudGhyb3dJZkRpc3Bvc2VkKCksY1kodGhpcy5nbCxlLHQscyxyLHRoaXMudGV4dHVyZUNvbmZpZyl9Y3JlYXRlRmxvYXQxNlBhY2tlZE1hdHJpeFRleHR1cmUoZSx0KXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxsWSh0aGlzLmdsLGUsdCx0aGlzLnRleHR1cmVDb25maWcpfWNyZWF0ZVBhY2tlZE1hdHJpeFRleHR1cmUoZSx0KXtyZXR1cm4gdGhpcy50aHJvd0lmRGlzcG9zZWQoKSxhWSh0aGlzLmdsLGUsdCx0aGlzLnRleHR1cmVDb25maWcpfWRlbGV0ZU1hdHJpeFRleHR1cmUoZSl7dGhpcy50aHJvd0lmRGlzcG9zZWQoKSx0aGlzLm91dHB1dFRleHR1cmU9PT1lJiYoVEModGhpcy5nbCx0aGlzLmZyYW1lYnVmZmVyKSx0aGlzLm91dHB1dFRleHR1cmU9bnVsbCksJGUodGhpcy5nbCwoKT0+dGhpcy5nbC5kZWxldGVUZXh0dXJlKGUpKX1kb3dubG9hZEJ5dGVFbmNvZGVkRmxvYXRNYXRyaXhGcm9tT3V0cHV0VGV4dHVyZShlLHQscyl7cmV0dXJuIHRoaXMuZG93bmxvYWRNYXRyaXhEcml2ZXIoZSwoKT0+ZlkodGhpcy5nbCx0LHMsdGhpcy50ZXh0dXJlQ29uZmlnKSl9ZG93bmxvYWRQYWNrZWRNYXRyaXhGcm9tQnVmZmVyKGUsdCxzLHIsbyxpKXtyZXR1cm4gbVkodGhpcy5nbCxlLHQscyxyLG8saSx0aGlzLnRleHR1cmVDb25maWcpfWRvd25sb2FkRmxvYXQzMk1hdHJpeEZyb21CdWZmZXIoZSx0KXtyZXR1cm4gcFkodGhpcy5nbCxlLHQpfWNyZWF0ZUJ1ZmZlckZyb21UZXh0dXJlKGUsdCxzKXt0aGlzLmJpbmRUZXh0dXJlVG9GcmFtZUJ1ZmZlcihlKTtjb25zdCByPWhZKHRoaXMuZ2wsdCxzLHRoaXMudGV4dHVyZUNvbmZpZyk7cmV0dXJuIHRoaXMudW5iaW5kVGV4dHVyZVRvRnJhbWVCdWZmZXIoKSxyfWNyZWF0ZUFuZFdhaXRGb3JGZW5jZSgpe2NvbnN0IGU9dGhpcy5jcmVhdGVGZW5jZSh0aGlzLmdsKTtyZXR1cm4gdGhpcy5wb2xsRmVuY2UoZSl9Y3JlYXRlRmVuY2UoZSl7bGV0IHQscztpZihvZSgpLmdldEJvb2woIldFQkdMX0ZFTkNFX0FQSV9FTkFCTEVEIikpe2NvbnN0IHI9ZSxvPXIuZmVuY2VTeW5jKHIuU1lOQ19HUFVfQ09NTUFORFNfQ09NUExFVEUsMCk7ZS5mbHVzaCgpLHM9KCk9Pntjb25zdCBpPXIuY2xpZW50V2FpdFN5bmMobywwLDApO3JldHVybiBpPT09ci5BTFJFQURZX1NJR05BTEVEfHxpPT09ci5DT05ESVRJT05fU0FUSVNGSUVEfSx0PW99ZWxzZSBvZSgpLmdldE51bWJlcigiV0VCR0xfRElTSk9JTlRfUVVFUllfVElNRVJfRVhURU5TSU9OX1ZFUlNJT04iKT4wPyh0PXRoaXMuYmVnaW5RdWVyeSgpLHRoaXMuZW5kUXVlcnkoKSxzPSgpPT50aGlzLmlzUXVlcnlBdmFpbGFibGUodCxvZSgpLmdldE51bWJlcigiV0VCR0xfRElTSk9JTlRfUVVFUllfVElNRVJfRVhURU5TSU9OX1ZFUlNJT04iKSkpOnM9KCk9PiEwO3JldHVybntxdWVyeTp0LGlzRmVuY2VQYXNzZWQ6c319ZG93bmxvYWRNYXRyaXhGcm9tUGFja2VkVGV4dHVyZShlLHQscyl7cmV0dXJuIHRoaXMuZG93bmxvYWRNYXRyaXhEcml2ZXIoZSwoKT0+Z1kodGhpcy5nbCx0LHMpKX1jcmVhdGVQcm9ncmFtKGUpe3RoaXMudGhyb3dJZkRpc3Bvc2VkKCk7Y29uc3QgdD10aGlzLmdsO3RoaXMudmVydGV4U2hhZGVyPT1udWxsJiYodGhpcy52ZXJ0ZXhTaGFkZXI9dFkodCkpO2NvbnN0IHM9VlgodCk7JGUodCwoKT0+dC5hdHRhY2hTaGFkZXIocyx0aGlzLnZlcnRleFNoYWRlcikpLCRlKHQsKCk9PnQuYXR0YWNoU2hhZGVyKHMsZSkpLFdYKHQscyk7Y29uc3Qgcj1PYmplY3QuYXNzaWduKHMse3Zhbzp0aGlzLmNyZWF0ZVZlcnRleEFycmF5KCl9KTtyZXR1cm4gdGhpcy5kZWJ1ZyYmTjAodCxyKSxyfWJ1aWxkVmFvKGUpe3RoaXMuc2V0UHJvZ3JhbShlKSx0aGlzLmJpbmRWZXJ0ZXhBcnJheShlLnZhbyk7Y29uc3QgdD10aGlzLmdsOyRlKHQsKCk9PnQuYmluZEJ1ZmZlcih0LkVMRU1FTlRfQVJSQVlfQlVGRkVSLHRoaXMuaW5kZXhCdWZmZXIpKSx1WSh0LGUsdGhpcy52ZXJ0ZXhCdWZmZXIpfWRlbGV0ZVByb2dyYW0oZSl7dGhpcy50aHJvd0lmRGlzcG9zZWQoKSxlPT09dGhpcy5wcm9ncmFtJiYodGhpcy5wcm9ncmFtPW51bGwpLGUhPW51bGwmJigkZSh0aGlzLmdsLCgpPT50aGlzLmdsLmRlbGV0ZVByb2dyYW0oZSkpLHRoaXMuZGVsZXRlVmVydGV4QXJyYXkoZS52YW8pKX1zZXRQcm9ncmFtKGUpe3RoaXMudGhyb3dJZkRpc3Bvc2VkKCksdGhpcy5wcm9ncmFtPWUsdGhpcy5wcm9ncmFtIT1udWxsJiZ0aGlzLmRlYnVnJiZOMCh0aGlzLmdsLHRoaXMucHJvZ3JhbSksJGUodGhpcy5nbCwoKT0+dGhpcy5nbC51c2VQcm9ncmFtKGUpKX1nZXRVbmlmb3JtTG9jYXRpb24oZSx0LHM9ITApe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHM/WFgodGhpcy5nbCxlLHQpOllYKHRoaXMuZ2wsZSx0KX1nZXRBdHRyaWJ1dGVMb2NhdGlvbihlLHQpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLCRlKHRoaXMuZ2wsKCk9PnRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24oZSx0KSl9Z2V0VW5pZm9ybUxvY2F0aW9uTm9UaHJvdyhlLHQpe3JldHVybiB0aGlzLnRocm93SWZEaXNwb3NlZCgpLHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsdCl9c2V0SW5wdXRNYXRyaXhUZXh0dXJlKGUsdCxzKXt0aGlzLnRocm93SWZEaXNwb3NlZCgpLHRoaXMudGhyb3dJZk5vUHJvZ3JhbSgpLFFYKHRoaXMuZ2wsZSx0LHMpfXNldE91dHB1dE1hdHJpeFRleHR1cmUoZSx0LHMpe3RoaXMuc2V0T3V0cHV0TWF0cml4VGV4dHVyZURyaXZlcihlLHMsdCl9c2V0T3V0cHV0UGFja2VkTWF0cml4VGV4dHVyZShlLHQscyl7dGhpcy50aHJvd0lmRGlzcG9zZWQoKTtjb25zdFtyLG9dPVJ1KHQscyk7dGhpcy5zZXRPdXRwdXRNYXRyaXhUZXh0dXJlRHJpdmVyKGUscixvKX1zZXRPdXRwdXRNYXRyaXhXcml0ZVJlZ2lvbihlLHQscyxyKXt0aGlzLnNldE91dHB1dE1hdHJpeFdyaXRlUmVnaW9uRHJpdmVyKHMsZSxyLHQpfXNldE91dHB1dFBhY2tlZE1hdHJpeFdyaXRlUmVnaW9uKGUsdCxzLHIpe3Rocm93IG5ldyBFcnJvcigic2V0T3V0cHV0UGFja2VkTWF0cml4V3JpdGVSZWdpb24gbm90IGltcGxlbWVudGVkLiIpfWRlYnVnVmFsaWRhdGUoKXt0aGlzLnByb2dyYW0hPW51bGwmJk4wKHRoaXMuZ2wsdGhpcy5wcm9ncmFtKSxyZih0aGlzLmdsKX1leGVjdXRlUHJvZ3JhbSgpe3RoaXMudGhyb3dJZkRpc3Bvc2VkKCksdGhpcy50aHJvd0lmTm9Qcm9ncmFtKCk7Y29uc3QgZT10aGlzLmdsO2lmKHRoaXMuZGVidWcpe2NvbnN0IHQ9dGhpcy5nZXRWZXJ0ZXhBcnJheSgpO2NvbnNvbGUuYXNzZXJ0KHQ9PT10aGlzLnByb2dyYW0udmFvLCJWQU8gY2hhbmdlZCBiZXR3ZWVuIHNldFByb2dyYW0gYW5kIGV4ZWN1dGVQcm9ncmFtISIpLHRoaXMuZGVidWdWYWxpZGF0ZSgpfSRlKGUsKCk9PmUuZHJhd0VsZW1lbnRzKGUuVFJJQU5HTEVTLDYsZS5VTlNJR05FRF9TSE9SVCwwKSl9YmxvY2tVbnRpbEFsbFByb2dyYW1zQ29tcGxldGVkKCl7dGhpcy50aHJvd0lmRGlzcG9zZWQoKSwkZSh0aGlzLmdsLCgpPT50aGlzLmdsLmZpbmlzaCgpKX1nZXRRdWVyeVRpbWVyRXh0ZW5zaW9uKCl7cmV0dXJuIHRoaXMuZGlzam9pbnRRdWVyeVRpbWVyRXh0ZW5zaW9uPT1udWxsJiYodGhpcy5kaXNqb2ludFF1ZXJ5VGltZXJFeHRlbnNpb249c2YodGhpcy5nbCxvZSgpLmdldE51bWJlcigiV0VCR0xfRElTSk9JTlRfUVVFUllfVElNRVJfRVhURU5TSU9OX1ZFUlNJT04iKT09PTI/IkVYVF9kaXNqb2ludF90aW1lcl9xdWVyeV93ZWJnbDIiOiJFWFRfZGlzam9pbnRfdGltZXJfcXVlcnkiKSksdGhpcy5kaXNqb2ludFF1ZXJ5VGltZXJFeHRlbnNpb259Z2V0UXVlcnlUaW1lckV4dGVuc2lvbldlYkdMMigpe3JldHVybiB0aGlzLmdldFF1ZXJ5VGltZXJFeHRlbnNpb24oKX1nZXRRdWVyeVRpbWVyRXh0ZW5zaW9uV2ViR0wxKCl7cmV0dXJuIHRoaXMuZ2V0UXVlcnlUaW1lckV4dGVuc2lvbigpfWJlZ2luUXVlcnkoKXtpZihvZSgpLmdldE51bWJlcigiV0VCR0xfRElTSk9JTlRfUVVFUllfVElNRVJfRVhURU5TSU9OX1ZFUlNJT04iKT09PTIpe2NvbnN0IHM9dGhpcy5nbCxyPXRoaXMuZ2V0UXVlcnlUaW1lckV4dGVuc2lvbldlYkdMMigpLG89cy5jcmVhdGVRdWVyeSgpO3JldHVybiBzLmJlZ2luUXVlcnkoci5USU1FX0VMQVBTRURfRVhULG8pLG99Y29uc3QgZT10aGlzLmdldFF1ZXJ5VGltZXJFeHRlbnNpb25XZWJHTDEoKSx0PWUuY3JlYXRlUXVlcnlFWFQoKTtyZXR1cm4gZS5iZWdpblF1ZXJ5RVhUKGUuVElNRV9FTEFQU0VEX0VYVCx0KSx0fWVuZFF1ZXJ5KCl7aWYob2UoKS5nZXROdW1iZXIoIldFQkdMX0RJU0pPSU5UX1FVRVJZX1RJTUVSX0VYVEVOU0lPTl9WRVJTSU9OIik9PT0yKXtjb25zdCB0PXRoaXMuZ2wscz10aGlzLmdldFF1ZXJ5VGltZXJFeHRlbnNpb25XZWJHTDIoKTt0LmVuZFF1ZXJ5KHMuVElNRV9FTEFQU0VEX0VYVCk7cmV0dXJufWNvbnN0IGU9dGhpcy5nZXRRdWVyeVRpbWVyRXh0ZW5zaW9uV2ViR0wxKCk7ZS5lbmRRdWVyeUVYVChlLlRJTUVfRUxBUFNFRF9FWFQpfWFzeW5jIHdhaXRGb3JRdWVyeUFuZEdldFRpbWUoZSl7cmV0dXJuIGF3YWl0IEUwKCgpPT50aGlzLmRpc3Bvc2VkfHx0aGlzLmlzUXVlcnlBdmFpbGFibGUoZSxvZSgpLmdldE51bWJlcigiV0VCR0xfRElTSk9JTlRfUVVFUllfVElNRVJfRVhURU5TSU9OX1ZFUlNJT04iKSkpLHRoaXMuZ2V0UXVlcnlUaW1lKGUsb2UoKS5nZXROdW1iZXIoIldFQkdMX0RJU0pPSU5UX1FVRVJZX1RJTUVSX0VYVEVOU0lPTl9WRVJTSU9OIikpfWdldFF1ZXJ5VGltZShlLHQpe2lmKHQ9PT0wKXJldHVybiBudWxsO2lmKHQ9PT0yKXtjb25zdCBzPXRoaXMuZ2w7cmV0dXJuIHMuZ2V0UXVlcnlQYXJhbWV0ZXIoZSxzLlFVRVJZX1JFU1VMVCkvMWU2fWVsc2V7Y29uc3Qgcz10aGlzLmdldFF1ZXJ5VGltZXJFeHRlbnNpb25XZWJHTDEoKTtyZXR1cm4gcy5nZXRRdWVyeU9iamVjdEVYVChlLHMuUVVFUllfUkVTVUxUX0VYVCkvMWU2fX1pc1F1ZXJ5QXZhaWxhYmxlKGUsdCl7aWYodD09PTApcmV0dXJuITA7aWYodD09PTIpe2NvbnN0IHM9dGhpcy5nbCxyPXRoaXMuZ2V0UXVlcnlUaW1lckV4dGVuc2lvbldlYkdMMigpLG89cy5nZXRRdWVyeVBhcmFtZXRlcihlLHMuUVVFUllfUkVTVUxUX0FWQUlMQUJMRSk7cmV0dXJuIHRoaXMuZGlzam9pbnQ9PW51bGwmJih0aGlzLmRpc2pvaW50PXRoaXMuZ2wuZ2V0UGFyYW1ldGVyKHIuR1BVX0RJU0pPSU5UX0VYVCkpLG8mJiF0aGlzLmRpc2pvaW50fWVsc2V7Y29uc3Qgcz10aGlzLmdldFF1ZXJ5VGltZXJFeHRlbnNpb25XZWJHTDEoKSxyPXMuZ2V0UXVlcnlPYmplY3RFWFQoZSxzLlFVRVJZX1JFU1VMVF9BVkFJTEFCTEVfRVhUKTtyZXR1cm4gdGhpcy5kaXNqb2ludD09bnVsbCYmKHRoaXMuZGlzam9pbnQ9dGhpcy5nbC5nZXRQYXJhbWV0ZXIocy5HUFVfRElTSk9JTlRfRVhUKSksciYmIXRoaXMuZGlzam9pbnR9fXBvbGxGZW5jZShlKXtyZXR1cm4gbmV3IFByb21pc2UodD0+e3RoaXMuYWRkSXRlbVRvUG9sbCgoKT0+ZS5pc0ZlbmNlUGFzc2VkKCksKCk9PnQoKSl9KX1wb2xsSXRlbXMoKXtjb25zdCBlPXlZKHRoaXMuaXRlbXNUb1BvbGwubWFwKHQ9PnQuaXNEb25lRm4pKTtmb3IobGV0IHQ9MDt0PD1lOysrdCl7Y29uc3R7cmVzb2x2ZUZuOnN9PXRoaXMuaXRlbXNUb1BvbGxbdF07cygpfXRoaXMuaXRlbXNUb1BvbGw9dGhpcy5pdGVtc1RvUG9sbC5zbGljZShlKzEpfWFkZEl0ZW1Ub1BvbGwoZSx0KXtpZih0aGlzLml0ZW1zVG9Qb2xsLnB1c2goe2lzRG9uZUZuOmUscmVzb2x2ZUZuOnR9KSx0aGlzLml0ZW1zVG9Qb2xsLmxlbmd0aD4xKXJldHVybjtsZXQgczsic2V0VGltZW91dEN1c3RvbSJpbiBvZSgpLnBsYXRmb3JtJiYocz1vZSgpLnBsYXRmb3JtLnNldFRpbWVvdXRDdXN0b20uYmluZChvZSgpLnBsYXRmb3JtKSksRTAoKCk9Pih0aGlzLnBvbGxJdGVtcygpLHRoaXMuaXRlbXNUb1BvbGwubGVuZ3RoPT09MCksKCk9PjAsbnVsbCxzKX1iaW5kVGV4dHVyZVRvRnJhbWVCdWZmZXIoZSl7dGhpcy50aHJvd0lmRGlzcG9zZWQoKSxrMCh0aGlzLmdsLGUsdGhpcy5mcmFtZWJ1ZmZlciksdGhpcy5kZWJ1ZyYmcmYodGhpcy5nbCl9dW5iaW5kVGV4dHVyZVRvRnJhbWVCdWZmZXIoKXt0aGlzLm91dHB1dFRleHR1cmUhPW51bGw/KGswKHRoaXMuZ2wsdGhpcy5vdXRwdXRUZXh0dXJlLHRoaXMuZnJhbWVidWZmZXIpLHRoaXMuZGVidWcmJnJmKHRoaXMuZ2wpKTpUQyh0aGlzLmdsLHRoaXMuZnJhbWVidWZmZXIpfWRvd25sb2FkTWF0cml4RHJpdmVyKGUsdCl7dGhpcy5iaW5kVGV4dHVyZVRvRnJhbWVCdWZmZXIoZSk7Y29uc3Qgcz10KCk7cmV0dXJuIHRoaXMudW5iaW5kVGV4dHVyZVRvRnJhbWVCdWZmZXIoKSxzfXNldE91dHB1dE1hdHJpeFRleHR1cmVEcml2ZXIoZSx0LHMpe3RoaXMudGhyb3dJZkRpc3Bvc2VkKCk7Y29uc3Qgcj10aGlzLmdsO2swKHIsZSx0aGlzLmZyYW1lYnVmZmVyKSx0aGlzLmRlYnVnJiZyZihyKSx0aGlzLm91dHB1dFRleHR1cmU9ZSwkZShyLCgpPT5yLnZpZXdwb3J0KDAsMCx0LHMpKSwkZShyLCgpPT5yLnNjaXNzb3IoMCwwLHQscykpfXNldE91dHB1dE1hdHJpeFdyaXRlUmVnaW9uRHJpdmVyKGUsdCxzLHIpe3RoaXMudGhyb3dJZkRpc3Bvc2VkKCksJGUodGhpcy5nbCwoKT0+dGhpcy5nbC5zY2lzc29yKGUsdCxzLHIpKX10aHJvd0lmRGlzcG9zZWQoKXtpZih0aGlzLmRpc3Bvc2VkKXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGVkIHRvIHVzZSBkaXNwb3NlZCBHUEdQVUNvbnRleHQuIil9dGhyb3dJZk5vUHJvZ3JhbSgpe2lmKHRoaXMucHJvZ3JhbT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoIk5vIEdQVSBwcm9ncmFtIGlzIGN1cnJlbnRseSBzZXQuIil9fWZ1bmN0aW9uIHlZKG4pe2xldCBlPTA7Zm9yKDtlPG4ubGVuZ3RoJiZuW2VdKCk7KytlKTtyZXR1cm4gZS0xfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0e2FkZEltcGw6eFksYmluY291bnRJbXBsOlNELGJpbmNvdW50UmVkdWNlSW1wbDpiWSxiaXR3aXNlQW5kSW1wbDp3WSxjYXN0SW1wbDp2WSxjZWlsSW1wbDpTWSxjb25jYXRJbXBsOk5ZLGVxdWFsSW1wbDprWSxleHBJbXBsOkNZLGV4cG0xSW1wbDokWSxmbG9vckltcGw6SVksZ2F0aGVyTmRJbXBsOlRZLGdhdGhlclYySW1wbDpFWSxncmVhdGVySW1wbDpSWSxncmVhdGVyRXF1YWxJbXBsOkRZLGxlc3NJbXBsOkFZLGxlc3NFcXVhbEltcGw6X1ksbGluU3BhY2VJbXBsOk9ZLGxvZ0ltcGw6RlksbWF4SW1wbDpMWSxtYXhpbXVtSW1wbDpQWSxtaW5pbXVtSW1wbDp6WSxtdWx0aXBseUltcGw6TVksbmVnSW1wbDpCWSxub3RFcXVhbEltcGw6VlkscHJvZEltcGw6V1kscmFnZ2VkR2F0aGVySW1wbDpVWSxyYWdnZWRSYW5nZUltcGw6alkscmFnZ2VkVGVuc29yVG9UZW5zb3JJbXBsOkdZLHJhbmdlSW1wbDpIWSxyc3FydEltcGw6cVksc2NhdHRlckltcGw6S1ksc2lnbW9pZEltcGw6WFksc2ltcGxlQWJzSW1wbDpORCxzbGljZUltcGw6WVksc3BhcnNlRmlsbEVtcHR5Um93c0ltcGw6UVksc3BhcnNlUmVzaGFwZUltcGw6Wlksc3BhcnNlU2VnbWVudFJlZHVjdGlvbkltcGw6a0Qsc3FydEltcGw6Slksc3RhdGljUmVnZXhSZXBsYWNlSW1wbDplUSxzdHJpZGVkU2xpY2VJbXBsOnRRLHN0cmluZ05HcmFtc0ltcGw6blEsc3RyaW5nU3BsaXRJbXBsOnNRLHN0cmluZ1RvSGFzaEJ1Y2tldEZhc3RJbXBsOnJRLHN1YkltcGw6b1EsdGlsZUltcGw6aVEsdG9wS0ltcGw6YVEsdHJhbnNwb3NlSW1wbDpwdix1bmlxdWVJbXBsOmxRfT1kNTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBDRChuLGUpe3JldHVyblsieCIsInkiLCJ6IiwidyIsInUiLCJ2Il0uc2xpY2UoMCxlKS5tYXAodD0+YCR7bn0uJHt0fWApfWZ1bmN0aW9uIEduKG4sZSl7cmV0dXJuIGU9PT0xP1tuXTpDRChuLGUpfWZ1bmN0aW9uIHVRKG4sZSl7aWYobj09PTEpcmV0dXJuInJjIjtsZXQgdD0iIjtmb3IobGV0IHM9MDtzPG47cysrKXQrPWVbc10sczxuLTEmJih0Kz0iLCIpO3JldHVybiB0fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIGNRe2NvbnN0cnVjdG9yKGUpe2lmKHRoaXMudmFyaWFibGVOYW1lcz1bIkEiXSx0aGlzLnBhY2tlZElucHV0cz0hMSx0aGlzLnBhY2tlZE91dHB1dD0hMCx0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy5yYW5rPWUubGVuZ3RoLHRoaXMuZW5hYmxlU2hhcGVVbmlmb3Jtcz1Mbih0aGlzLm91dHB1dFNoYXBlLmxlbmd0aCksdGhpcy5yYW5rPT09MCl0aGlzLnVzZXJDb2RlPWAKICAgICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgICBzZXRPdXRwdXQodmVjNChnZXRBKCksIDAuLCAwLiwgMC4pKTsKICAgICAgICB9CiAgICAgIGA7ZWxzZXtjb25zdCB0PUduKCJyYyIsdGhpcy5yYW5rKSxzPXh0KHRoaXMucmFuaykscj10aGlzLmdldE91dE9mQm91bmRzQ29uZGl0aW9uKHQpLG89dGhpcy5nZXRTZXR1cCh0KSxpPXRoaXMuZ2V0T3V0cHV0KHQpO3RoaXMudXNlckNvZGU9YAogICAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAgICR7c30gcmMgPSBnZXRPdXRwdXRDb29yZHMoKTsKCiAgICAgICAgICBpZigke3J9KSB7CiAgICAgICAgICAgIHNldE91dHB1dCh2ZWM0KDApKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR7b30KCiAgICAgICAgICAgIHNldE91dHB1dCh2ZWM0KCR7aX0pKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIGB9fWdldFNvdXJjZUNvb3Jkc0FycihlKXtjb25zdCB0PVtdO2ZvcihsZXQgcz0wO3M8PTE7cysrKWZvcihsZXQgcj0wO3I8PTE7cisrKXtsZXQgbz1gJHtzPT09MD8iciI6InJwMSJ9LCAke3I9PT0wPyJjIjoiY3AxIn1gO2ZvcihsZXQgaT0yO2k8dGhpcy5yYW5rO2krKylvPWAke2VbZS5sZW5ndGgtMS1pXX0sYCtvO3QucHVzaChvKX1yZXR1cm4gdH1nZXRPdXRPZkJvdW5kc0NvbmRpdGlvbihlKXtpZih0aGlzLnJhbms9PT0xKXJldHVybmByYyA+ICR7dGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPyJvdXRTaGFwZSI6dGhpcy5vdXRwdXRTaGFwZVswXX1gO2xldCB0PSIiO2ZvcihsZXQgcz10aGlzLnJhbmstMjtzPHRoaXMucmFuaztzKyspdCs9YCR7ZVtzXX0gPj0gJHt0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM/YG91dFNoYXBlWyR7c31dYDp0aGlzLm91dHB1dFNoYXBlW3NdfWAsczx0aGlzLnJhbmstMSYmKHQrPSJ8fCIpO3JldHVybiB0fWdldFNldHVwKGUpe2lmKHRoaXMucmFuaz09PTEpcmV0dXJuIiI7Y29uc3QgdD1lLnNsaWNlKC0yKSxzPXRoaXMuZW5hYmxlU2hhcGVVbmlmb3Jtcz9gb3V0U2hhcGVbJHt0aGlzLnJhbmt9IC0gMV1gOnRoaXMub3V0cHV0U2hhcGVbdGhpcy5yYW5rLTFdLHI9dGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zP2BvdXRTaGFwZVske3RoaXMucmFua30gLSAyXWA6dGhpcy5vdXRwdXRTaGFwZVt0aGlzLnJhbmstMl07cmV0dXJuYAogICAgICBpbnQgciA9ICR7dFswXX07CiAgICAgIGludCBjID0gJHt0WzFdfTsKICAgICAgaW50IHJwMSA9IHIgKyAxOwogICAgICBpbnQgY3AxID0gYyArIDE7CgogICAgICBib29sIGNFZGdlID0gY3AxID49ICR7c307CiAgICAgIGJvb2wgckVkZ2UgPSBycDEgPj0gJHtyfTsKICAgIGB9Z2V0T3V0cHV0KGUpe2NvbnN0IHQ9dGhpcy5nZXRTb3VyY2VDb29yZHNBcnIoZSk7cmV0dXJuIHRoaXMucmFuaz09PTE/YGdldEEocmMpLCAocmMgKyAxID49ICR7dGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPyJvdXRTaGFwZSI6dGhpcy5vdXRwdXRTaGFwZVswXX0gPyAwLiA6IGdldEEocmMgKyAxKSksIDAsIDBgOmBnZXRBKCR7dFswXX0pLAogICAgICAgICAgICBjRWRnZSA/IDAuIDogZ2V0QSgke3RbMV19KSwKICAgICAgICAgICAgckVkZ2UgPyAwLiA6IGdldEEoJHt0WzJdfSksCiAgICAgICAgICAgIHJFZGdlIHx8IGNFZGdlID8gMC4gOiBnZXRBKCR7dFszXX0pYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgJER7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITAsdGhpcy5jdXN0b21Vbmlmb3Jtcz1be25hbWU6ImlucHV0U2hhcGUiLHR5cGU6Iml2ZWMzIn1dLHRoaXMub3V0cHV0U2hhcGU9ZSx0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM9TG4odGhpcy5vdXRwdXRTaGFwZS5sZW5ndGgpO2xldCBzPSIiO2ZvcihsZXQgcj0wO3I8NDtyKyspe2xldCBvPSJ0aGlzUkMgPSByYzsiO3IlMj09PTEmJihvKz0idGhpc1JDLnogKz0gMTsiKSxyPjEmJihvKz0idGhpc1JDLnkgKz0gMTsiKSxzKz1gCiAgICAgICAgJHtvfQogICAgICAgICR7cj4wPyJpZih0aGlzUkMueSA8IHJvd3MgJiYgdGhpc1JDLnogPCBjb2xzKXsiOiIifQogICAgICAgICAgaW50IGZsYXRJbmRleCA9IGdldEZsYXRJbmRleCh0aGlzUkMpOwoKICAgICAgICAgIGl2ZWMzIGlucHV0UkMgPSBpbnB1dENvb3Jkc0Zyb21SZXNoYXBlZE91dENvb3JkcyhmbGF0SW5kZXgpOwogICAgICAgICAgdmVjMiBpbnB1dFJDSW5uZXJEaW1zID0gdmVjMihmbG9hdChpbnB1dFJDLnkpLGZsb2F0KGlucHV0UkMueikpOwoKICAgICAgICAgIHJlc3VsdFske3J9XSA9CiAgICAgICAgICAgIGdldENoYW5uZWwoZ2V0QShpbnB1dFJDLngsIGlucHV0UkMueSwgaW5wdXRSQy56KSwgaW5wdXRSQ0lubmVyRGltcyk7CiAgICAgICAgJHtyPjA/In0iOiIifQogICAgICBgfXRoaXMudXNlckNvZGU9YAogICAgICAke2RRKHQsdGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zKX0KICAgICAgJHt0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM/ZHYoKTpjdihlKX0KCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMyByYyA9IGdldE91dHB1dENvb3JkcygpOwoKICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMC4pOwoKICAgICAgICBpdmVjMyB0aGlzUkM7CiAgICAgICAgaW50IHJvd3MgPSAke3RoaXMuZW5hYmxlU2hhcGVVbmlmb3Jtcz8ib3V0U2hhcGVbMV0iOmVbMV19OwogICAgICAgIGludCBjb2xzID0gJHt0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM/Im91dFNoYXBlWzJdIjplWzJdfTsKCiAgICAgICAgJHtzfQoKICAgICAgICBzZXRPdXRwdXQocmVzdWx0KTsKICAgICAgfQogICAgYH19ZnVuY3Rpb24gZFEobixlKXtyZXR1cm5gCiAgICBpdmVjMyBpbnB1dENvb3Jkc0Zyb21SZXNoYXBlZE91dENvb3JkcyhpbnQgaW5kZXgpIHsKICAgICAgJHtlP3U5KFsiciIsImMiLCJkIl0sImlucHV0U2hhcGUiKTpFYShbInIiLCJjIiwiZCJdLG4pfQogICAgICByZXR1cm4gaXZlYzMociwgYywgZCk7CiAgICB9CiAgYH0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBoUXtjb25zdHJ1Y3RvcihlKXt0aGlzLmdwZ3B1PWUsdGhpcy5udW1Vc2VkVGV4dHVyZXM9MCx0aGlzLm51bUZyZWVUZXh0dXJlcz0wLHRoaXMuX251bUJ5dGVzQWxsb2NhdGVkPTAsdGhpcy5fbnVtQnl0ZXNGcmVlPTAsdGhpcy5mcmVlVGV4dHVyZXM9e30sdGhpcy51c2VkVGV4dHVyZXM9e30sdGhpcy5sb2dFbmFibGVkPSExfWFjcXVpcmVUZXh0dXJlKGUsdCxzKXtjb25zdCByPV9DKHQscyksbz1PQyhlLHIscyk7byBpbiB0aGlzLmZyZWVUZXh0dXJlc3x8KHRoaXMuZnJlZVRleHR1cmVzW29dPVtdKSxvIGluIHRoaXMudXNlZFRleHR1cmVzfHwodGhpcy51c2VkVGV4dHVyZXNbb109W10pO2NvbnN0IGk9QUMoZSxyLHRoaXMuZ3BncHUuZ2wsdGhpcy5ncGdwdS50ZXh0dXJlQ29uZmlnLHMpO2lmKHRoaXMuZnJlZVRleHR1cmVzW29dLmxlbmd0aD4wKXt0aGlzLm51bUZyZWVUZXh0dXJlcy0tLHRoaXMubnVtVXNlZFRleHR1cmVzKyssdGhpcy5fbnVtQnl0ZXNGcmVlLT1pLHRoaXMubG9nKCk7Y29uc3QgbD10aGlzLmZyZWVUZXh0dXJlc1tvXS5wb3AoKTtyZXR1cm4gdGhpcy51c2VkVGV4dHVyZXNbb10ucHVzaChsKSxsfWxldCBhO3JldHVybiByPT09d24uUEFDS0VEXzJYMl9GTE9BVDMyP2E9dGhpcy5ncGdwdS5jcmVhdGVQYWNrZWRNYXRyaXhUZXh0dXJlKGVbMF0sZVsxXSk6cj09PXduLlBBQ0tFRF8yWDJfRkxPQVQxNj9hPXRoaXMuZ3BncHUuY3JlYXRlRmxvYXQxNlBhY2tlZE1hdHJpeFRleHR1cmUoZVswXSxlWzFdKTpyPT09d24uVU5QQUNLRURfRkxPQVQzMj9hPXRoaXMuZ3BncHUuY3JlYXRlRmxvYXQzMk1hdHJpeFRleHR1cmUoZVswXSxlWzFdKTpyPT09d24uVU5QQUNLRURfRkxPQVQxNj9hPXRoaXMuZ3BncHUuY3JlYXRlRmxvYXQxNk1hdHJpeFRleHR1cmUoZVswXSxlWzFdKTpyPT09d24uUEFDS0VEXzRYMV9VTlNJR05FRF9CWVRFJiYoYT10aGlzLmdwZ3B1LmNyZWF0ZVVuc2lnbmVkQnl0ZXNNYXRyaXhUZXh0dXJlKGVbMF0sZVsxXSkpLHRoaXMudXNlZFRleHR1cmVzW29dLnB1c2goYSksdGhpcy5udW1Vc2VkVGV4dHVyZXMrKyx0aGlzLl9udW1CeXRlc0FsbG9jYXRlZCs9aSx0aGlzLmxvZygpLGF9cmVsZWFzZVRleHR1cmUoZSx0LHMscil7aWYodGhpcy5mcmVlVGV4dHVyZXM9PW51bGwpcmV0dXJuO2NvbnN0IG89X0MocyxyKSxpPU9DKHQsbyxyKTtpIGluIHRoaXMuZnJlZVRleHR1cmVzfHwodGhpcy5mcmVlVGV4dHVyZXNbaV09W10pO2NvbnN0IGE9QUModCxvLHRoaXMuZ3BncHUuZ2wsdGhpcy5ncGdwdS50ZXh0dXJlQ29uZmlnLHIpLGw9b2UoKS5nZXROdW1iZXIoIldFQkdMX0RFTEVURV9URVhUVVJFX1RIUkVTSE9MRCIpO2whPT0tMSYmdGhpcy5fbnVtQnl0ZXNBbGxvY2F0ZWQ+bD8odGhpcy5ncGdwdS5kZWxldGVNYXRyaXhUZXh0dXJlKGUudGV4dHVyZSksdGhpcy5fbnVtQnl0ZXNBbGxvY2F0ZWQtPWEpOih0aGlzLmZyZWVUZXh0dXJlc1tpXS5wdXNoKGUpLHRoaXMubnVtRnJlZVRleHR1cmVzKyssdGhpcy5fbnVtQnl0ZXNGcmVlKz1hKSx0aGlzLm51bVVzZWRUZXh0dXJlcy0tO2NvbnN0IGM9dGhpcy51c2VkVGV4dHVyZXNbaV0saD1jJiZjLmluZGV4T2YoZSk7aWYoaD09bnVsbHx8aDwwKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHJlbGVhc2UgYSB0ZXh0dXJlIHRoYXQgd2FzIG5ldmVyIHByb3ZpZGVkIGJ5IHRoaXMgdGV4dHVyZSBtYW5hZ2VyIik7Y1toXT1jW2MubGVuZ3RoLTFdLGMucG9wKCksdGhpcy5sb2coKX1sb2coKXtpZighdGhpcy5sb2dFbmFibGVkKXJldHVybjtjb25zdCBlPXRoaXMubnVtRnJlZVRleHR1cmVzK3RoaXMubnVtVXNlZFRleHR1cmVzO2NvbnNvbGUubG9nKCJGcmVlL1VzZWQiLGAke3RoaXMubnVtRnJlZVRleHR1cmVzfSAvICR7dGhpcy5udW1Vc2VkVGV4dHVyZXN9YCxgKCR7ZX0pYCk7Y29uc3QgdD10aGlzLl9udW1CeXRlc0ZyZWUvdGhpcy5fbnVtQnl0ZXNBbGxvY2F0ZWQ7Y29uc29sZS5sb2coYEJ5dGVzIGFsbG9jYXRlZDogJHt0aGlzLl9udW1CeXRlc0FsbG9jYXRlZH1gKSxjb25zb2xlLmxvZyhgQnl0ZXMgdW51c2VkOiAke3RoaXMuX251bUJ5dGVzRnJlZX0gKCR7TWF0aC5yb3VuZCgxMDAqdCl9JSlgKX1nZXQgbnVtQnl0ZXNBbGxvY2F0ZWQoKXtyZXR1cm4gdGhpcy5fbnVtQnl0ZXNBbGxvY2F0ZWR9Z2V0IG51bUJ5dGVzRnJlZSgpe3JldHVybiB0aGlzLl9udW1CeXRlc0ZyZWV9Z2V0TnVtVXNlZFRleHR1cmVzKCl7cmV0dXJuIHRoaXMubnVtVXNlZFRleHR1cmVzfWdldE51bUZyZWVUZXh0dXJlcygpe3JldHVybiB0aGlzLm51bUZyZWVUZXh0dXJlc31kaXNwb3NlKCl7aWYodGhpcy5mcmVlVGV4dHVyZXMhPW51bGwpe2Zvcihjb25zdCBlIGluIHRoaXMuZnJlZVRleHR1cmVzKXRoaXMuZnJlZVRleHR1cmVzW2VdLmZvckVhY2godD0+e3RoaXMuZ3BncHUuZGVsZXRlTWF0cml4VGV4dHVyZSh0LnRleHR1cmUpfSk7Zm9yKGNvbnN0IGUgaW4gdGhpcy51c2VkVGV4dHVyZXMpdGhpcy51c2VkVGV4dHVyZXNbZV0uZm9yRWFjaCh0PT57dGhpcy5ncGdwdS5kZWxldGVNYXRyaXhUZXh0dXJlKHQudGV4dHVyZSl9KTt0aGlzLmZyZWVUZXh0dXJlcz1udWxsLHRoaXMudXNlZFRleHR1cmVzPW51bGwsdGhpcy5udW1Vc2VkVGV4dHVyZXM9MCx0aGlzLm51bUZyZWVUZXh0dXJlcz0wLHRoaXMuX251bUJ5dGVzQWxsb2NhdGVkPTAsdGhpcy5fbnVtQnl0ZXNGcmVlPTB9fX1mdW5jdGlvbiBwUShuLGUpe2NvbnN0IHQ9bjtpZihlPT09dC5SMzJGKXJldHVybiA0O2lmKGU9PT10LlIxNkYpcmV0dXJuIDI7aWYoZT09PXQuUkdCQTMyRilyZXR1cm4gMTY7aWYoZT09PW4uUkdCQSlyZXR1cm4gMTY7aWYoZT09PXQuUkdCQTE2RilyZXR1cm4gODtpZihlPT09dC5SR0JBOClyZXR1cm4gNDt0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gaW50ZXJuYWwgZm9ybWF0ICR7ZX1gKX1mdW5jdGlvbiBBQyhuLGUsdCxzLHIpe2NvbnN0IG89ZlEoZSxzKTtsZXQgaTtpZihyKXtjb25zdFtsLGNdPVJ1KG5bMF0sblsxXSk7aT1sKmN9ZWxzZXtjb25zdFtsLGNdPU9oKG5bMF0sblsxXSk7aT1sKmN9Y29uc3QgYT1wUSh0LG8pO3JldHVybiBpKmF9ZnVuY3Rpb24gZlEobixlKXtzd2l0Y2gobil7Y2FzZSB3bi5QQUNLRURfMlgyX0ZMT0FUMzI6cmV0dXJuIHdEKGUpO2Nhc2Ugd24uUEFDS0VEXzJYMl9GTE9BVDE2OnJldHVybiB2RChlKTtjYXNlIHduLlVOUEFDS0VEX0ZMT0FUMzI6cmV0dXJuIHlEKGUpO2Nhc2Ugd24uVU5QQUNLRURfRkxPQVQxNjpyZXR1cm4geEQoZSk7Y2FzZSB3bi5QQUNLRURfNFgxX1VOU0lHTkVEX0JZVEU6cmV0dXJuIGJEKGUpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHBoeXNpY2FsIHRleHR1cmUgdHlwZSAke259YCl9fWZ1bmN0aW9uIG1RKG4pe3JldHVybiBvZSgpLmdldEJvb2woIldFQkdMX1JFTkRFUl9GTE9BVDMyX0VOQUJMRUQiKT9uP3duLlBBQ0tFRF8yWDJfRkxPQVQzMjp3bi5VTlBBQ0tFRF9GTE9BVDMyOm4/d24uUEFDS0VEXzJYMl9GTE9BVDE2OnduLlVOUEFDS0VEX0ZMT0FUMTZ9ZnVuY3Rpb24gX0MobixlKXtpZihuPT09T3MuVVBMT0FEKXJldHVybiB3bi5QQUNLRURfMlgyX0ZMT0FUMzI7aWYobj09PU9zLlJFTkRFUnx8bj09bnVsbClyZXR1cm4gbVEoZSk7aWYobj09PU9zLkRPV05MT0FEfHxuPT09T3MuUElYRUxTKXJldHVybiB3bi5QQUNLRURfNFgxX1VOU0lHTkVEX0JZVEU7dGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGxvZ2ljYWwgdGV4dHVyZSB0eXBlICR7bn1gKX1mdW5jdGlvbiBPQyhuLGUsdCl7cmV0dXJuYCR7blswXX1fJHtuWzFdfV8ke2V9XyR7dH1gfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIE1ye2NvbnN0cnVjdG9yKGUsdCl7dGhpcy52YXJpYWJsZU5hbWVzPVsiQSJdLHRoaXMub3V0cHV0U2hhcGU9ZSx0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM9TG4odGhpcy5vdXRwdXRTaGFwZS5sZW5ndGgpLHRoaXMudXNlckNvZGU9YAogICAgICBmbG9hdCB1bmFyeU9wZXJhdGlvbihmbG9hdCB4KSB7CiAgICAgICAgJHt0fQogICAgICB9CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgZmxvYXQgeCA9IGdldEFBdE91dENvb3JkcygpOwogICAgICAgIGZsb2F0IHkgPSB1bmFyeU9wZXJhdGlvbih4KTsKCiAgICAgICAgc2V0T3V0cHV0KHkpOwogICAgICB9CiAgICBgfX1jb25zdCBycj0iaWYgKGlzbmFuKHgpKSByZXR1cm4geDsiLGdRPSJyZXR1cm4geDsiLEZDPSJyZXR1cm4gYWJzKHgpOyIseVE9InJldHVybiAoeCA+PSAwLjApID8geCA6IChleHAoeCkgLSAxLjApOyIseFE9cnIrYAogIHJldHVybiAoeCA8IDAuMCkgPyAwLjAgOiB4OwpgLGJRPXJyK2AKICByZXR1cm4gKHggPCAwLjApID8gMC4wIDogbWluKDYuMCwgeCk7CmAsWW89InJldHVybiB4OyIsd1E9InJldHVybiAxLjAgLyAoMS4wICsgZXhwKC0xLjAgKiB4KSk7IjsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB2UT0icmV0dXJuIHg7IixTUT1gCiAgdmVjNCByZXN1bHQ7CgogIHJlc3VsdC5yID0gKHguciA+PSAwLjApID8geC5yIDogKGV4cCh4LnIpIC0gMS4wKTsKICByZXN1bHQuZyA9ICh4LmcgPj0gMC4wKSA/IHguZyA6IChleHAoeC5nKSAtIDEuMCk7CiAgcmVzdWx0LmIgPSAoeC5iID49IDAuMCkgPyB4LmIgOiAoZXhwKHguYikgLSAxLjApOwogIHJlc3VsdC5hID0gKHguYSA+PSAwLjApID8geC5hIDogKGV4cCh4LmEpIC0gMS4wKTsKCiAgcmV0dXJuIHJlc3VsdDsKYCxOUT1gCiAgdmVjNCByZXN1bHQgPSB4ICogdmVjNChncmVhdGVyVGhhbkVxdWFsKHgsIHZlYzQoMC4wKSkpOwogIGJ2ZWM0IGlzTmFOID0gaXNuYW4oeCk7CgogIHJlc3VsdC5yID0gaXNOYU4uciA/IHguciA6IHJlc3VsdC5yOwogIHJlc3VsdC5nID0gaXNOYU4uZyA/IHguZyA6IHJlc3VsdC5nOwogIHJlc3VsdC5iID0gaXNOYU4uYiA/IHguYiA6IHJlc3VsdC5iOwogIHJlc3VsdC5hID0gaXNOYU4uYSA/IHguYSA6IHJlc3VsdC5hOwoKICByZXR1cm4gcmVzdWx0OwpgLGtRPWAKICB2ZWM0IHJlc3VsdCA9IG1pbih4LCB2ZWM0KDYuKSkgKiB2ZWM0KGdyZWF0ZXJUaGFuRXF1YWwoeCwgdmVjNCgwLjApKSk7CiAgYnZlYzQgaXNOYU4gPSBpc25hbih4KTsKCiAgcmVzdWx0LnIgPSBpc05hTi5yID8geC5yIDogcmVzdWx0LnI7CiAgcmVzdWx0LmcgPSBpc05hTi5nID8geC5nIDogcmVzdWx0Lmc7CiAgcmVzdWx0LmIgPSBpc05hTi5iID8geC5iIDogcmVzdWx0LmI7CiAgcmVzdWx0LmEgPSBpc05hTi5hID8geC5hIDogcmVzdWx0LmE7CgogIHJldHVybiByZXN1bHQ7CmAsQ1E9InJldHVybiAxLjAgLyAoMS4wICsgZXhwKC0xLjAgKiB4KSk7IjtjbGFzcyBlaXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudmFyaWFibGVOYW1lcz1bIkEiXSx0aGlzLnBhY2tlZElucHV0cz0hMCx0aGlzLnBhY2tlZE91dHB1dD0hMCx0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPUxuKHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoKSx0aGlzLnVzZXJDb2RlPWAKICAgICAgdmVjNCB1bmFyeU9wZXJhdGlvbih2ZWM0IHgpIHsKICAgICAgICAke3R9CiAgICAgIH0KCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICB2ZWM0IHggPSBnZXRBQXRPdXRDb29yZHMoKTsKICAgICAgICB2ZWM0IHkgPSB1bmFyeU9wZXJhdGlvbih4KTsKCiAgICAgICAgc2V0T3V0cHV0KHkpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyAkUXtjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITEsdGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMuZW5hYmxlU2hhcGVVbmlmb3Jtcz1Mbih0aGlzLm91dHB1dFNoYXBlLmxlbmd0aCk7Y29uc3QgdD1lLmxlbmd0aCxzPUduKCJyYyIsdCkscj14dCh0KSxvPXVRKHQscyksaT1zLnNsaWNlKC0yKSxhPXQ8PTE/InJjIjpgdmVjMigke2kuam9pbigiLCIpfSlgO3RoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgJHtyfSByYyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIHZlYzQgcGFja2VkSW5wdXQgPSBnZXRBKCR7b30pOwoKICAgICAgICBzZXRPdXRwdXQoZ2V0Q2hhbm5lbChwYWNrZWRJbnB1dCwgJHthfSkpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBJUT1GZyxUUT0xZS03LEVRPTFlLTQsbGY9e307ZnVuY3Rpb24gUlEobil7cmV0dXJuIG4gaW4gbGZ8fChsZltuXT17fSksbGZbbl19Y29uc3QgRFE9b2UoKS5nZXROdW1iZXIoIkNQVV9IQU5ET0ZGX1NJWkVfVEhSRVNIT0xEIiksQVE9NjAwO2Z1bmN0aW9uIF9RKCl7cmV0dXJuIG9lKCkuZ2xvYmFsLnNjcmVlbj09bnVsbD8xMDI0Om9lKCkuZ2xvYmFsLnNjcmVlbi5oZWlnaHQqb2UoKS5nbG9iYWwuc2NyZWVuLndpZHRoKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKkFRLzEwMjQvMTAyNH1jbGFzcyB1eSBleHRlbmRzIFpme25leHREYXRhSWQoKXtyZXR1cm4gdXkubmV4dERhdGFJZCsrfWNvbnN0cnVjdG9yKGUpe2lmKHN1cGVyKCksdGhpcy5wZW5kaW5nUmVhZD1uZXcgV2Vha01hcCx0aGlzLnBlbmRpbmdEaXNwb3NhbD1uZXcgV2Vha1NldCx0aGlzLmRhdGFSZWZDb3VudD1uZXcgV2Vha01hcCx0aGlzLm51bUJ5dGVzSW5HUFU9MCx0aGlzLnVwbG9hZFdhaXRNcz0wLHRoaXMuZG93bmxvYWRXYWl0TXM9MCx0aGlzLmxhc3RHbEZsdXNoVGltZT0wLHRoaXMud2FybmVkQWJvdXRNZW1vcnk9ITEsdGhpcy5wZW5kaW5nRGVsZXRlcz0wLHRoaXMuZGlzcG9zZWQ9ITEsIW9lKCkuZ2V0Qm9vbCgiSEFTX1dFQkdMIikpdGhyb3cgbmV3IEVycm9yKCJXZWJHTCBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgZGV2aWNlIik7bGV0IHQ7aWYoZSE9bnVsbCl7aWYoZSBpbnN0YW5jZW9mIEkwKXQ9ZTtlbHNle2NvbnN0IHM9Q3Iob2UoKS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKSxlKTt0PW5ldyBJMChzKX10aGlzLmJpbmFyeUNhY2hlPXt9LHRoaXMuZ3BncHVDcmVhdGVkTG9jYWxseT0hMX1lbHNle2NvbnN0IHM9Q3Iob2UoKS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKSk7dD1uZXcgSTAocyksdGhpcy5iaW5hcnlDYWNoZT1SUShvZSgpLmdldE51bWJlcigiV0VCR0xfVkVSU0lPTiIpKSx0aGlzLmdwZ3B1Q3JlYXRlZExvY2FsbHk9ITB9dGhpcy5ncGdwdT10LHRoaXMuY2FudmFzPXRoaXMuZ3BncHUuZ2wuY2FudmFzLHRoaXMudGV4dHVyZU1hbmFnZXI9bmV3IGhRKHRoaXMuZ3BncHUpLHRoaXMubnVtTUJCZWZvcmVXYXJuaW5nPV9RKCksdGhpcy50ZXhEYXRhPW5ldyAkMSh0aGlzLG1yKCkpfW51bURhdGFJZHMoKXtyZXR1cm4gdGhpcy50ZXhEYXRhLm51bURhdGFJZHMoKS10aGlzLnBlbmRpbmdEZWxldGVzfXdyaXRlVGV4dHVyZShlLHQscyxyLG8saSl7Y29uc3QgYT10aGlzLm1ha2VUZW5zb3JJbmZvKHQscyksbD10aGlzLnRleERhdGEuZ2V0KGEuZGF0YUlkKTtsLmlzUGFja2VkPSExLGwudGV4dHVyZT17dGV4dHVyZTplLHRleFNoYXBlOltyLG9dfSxsLnRleFNoYXBlPVtyLG9dO2NvbnN0IGM9b2YodCksaD1uZXcgREMoYywhMSxpKSxwPXRoaXMucnVuV2ViR0xQcm9ncmFtKGgsW2FdLHMsW1tyLG9dXSk7cmV0dXJuIHAuc2hhcGU9dCxsLnRleHR1cmU9bnVsbCx0aGlzLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGEpLHAuZGF0YUlkfXdyaXRlKGUsdCxzKXtpZigob2UoKS5nZXRCb29sKCJXRUJHTF9DSEVDS19OVU1FUklDQUxfUFJPQkxFTVMiKXx8b2UoKS5nZXRCb29sKCJERUJVRyIpKSYmdGhpcy5jaGVja051bWVyaWNhbFByb2JsZW1zKGUpLHM9PT0iY29tcGxleDY0IiYmZSE9bnVsbCl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCB3cml0ZSB0byBhIGNvbXBsZXg2NCBkdHlwZS4gUGxlYXNlIHVzZSB0Zi5jb21wbGV4KHJlYWwsIGltYWcpLiIpO2NvbnN0IHI9e2lkOnRoaXMubmV4dERhdGFJZCgpfTtyZXR1cm4gdGhpcy50ZXhEYXRhLnNldChyLHtzaGFwZTp0LGR0eXBlOnMsdmFsdWVzOmUsdXNhZ2U6T3MuVVBMT0FELHJlZkNvdW50OjF9KSxyfXJlZkNvdW50KGUpe3JldHVybiB0aGlzLnRleERhdGEuaGFzKGUpP3RoaXMudGV4RGF0YS5nZXQoZSkucmVmQ291bnQ6MH1pbmNSZWYoZSl7Y29uc3QgdD10aGlzLnRleERhdGEuZ2V0KGUpO3QucmVmQ291bnQrK31kZWNSZWYoZSl7aWYodGhpcy50ZXhEYXRhLmhhcyhlKSl7Y29uc3QgdD10aGlzLnRleERhdGEuZ2V0KGUpO3QucmVmQ291bnQtLX19bW92ZShlLHQscyxyLG8pe2lmKG9lKCkuZ2V0Qm9vbCgiREVCVUciKSYmdGhpcy5jaGVja051bWVyaWNhbFByb2JsZW1zKHQpLHI9PT0iY29tcGxleDY0Iil0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCB3cml0ZSB0byBhIGNvbXBsZXg2NCBkdHlwZS4gUGxlYXNlIHVzZSB0Zi5jb21wbGV4KHJlYWwsIGltYWcpLiIpO3RoaXMudGV4RGF0YS5zZXQoZSx7c2hhcGU6cyxkdHlwZTpyLHZhbHVlczp0LHVzYWdlOk9zLlVQTE9BRCxyZWZDb3VudDpvfSl9ZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZSl7dGhpcy5kaXNwb3NlRGF0YShlLmRhdGFJZCl9cmVhZFN5bmMoZSl7Y29uc3QgdD10aGlzLnRleERhdGEuZ2V0KGUpLHt2YWx1ZXM6cyxkdHlwZTpyLGNvbXBsZXhUZW5zb3JJbmZvczpvLHNsaWNlOmksc2hhcGU6YSxpc1BhY2tlZDpsfT10O2lmKGkhPW51bGwpe2xldCBmO2w/Zj1uZXcgZWkoYSxZbyk6Zj1uZXcgTXIoYSxZbyk7Y29uc3QgZz10aGlzLnJ1bldlYkdMUHJvZ3JhbShmLFt7ZGF0YUlkOmUsc2hhcGU6YSxkdHlwZTpyfV0scikseT10aGlzLnJlYWRTeW5jKGcuZGF0YUlkKTtyZXR1cm4gdGhpcy5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhnKSx5fWlmKHMhPW51bGwpcmV0dXJuIHRoaXMuY29udmVydEFuZENhY2hlT25DUFUoZSk7aWYocj09PSJzdHJpbmciKXJldHVybiBzO2NvbnN0IGM9dGhpcy5hY3RpdmVUaW1lcnMhPW51bGw7bGV0IGg7YyYmKGg9Vm4oKSk7bGV0IHA7aWYocj09PSJjb21wbGV4NjQiKXtjb25zdCBmPXRoaXMucmVhZFN5bmMoby5yZWFsLmRhdGFJZCksZz10aGlzLnJlYWRTeW5jKG8uaW1hZy5kYXRhSWQpO3A9Ym8oZixnKX1lbHNlIHA9dGhpcy5nZXRWYWx1ZXNGcm9tVGV4dHVyZShlKTtyZXR1cm4gYyYmKHRoaXMuZG93bmxvYWRXYWl0TXMrPVZuKCktaCksdGhpcy5jb252ZXJ0QW5kQ2FjaGVPbkNQVShlLHApfWFzeW5jIHJlYWQoZSl7aWYodGhpcy5wZW5kaW5nUmVhZC5oYXMoZSkpe2NvbnN0IHk9dGhpcy5wZW5kaW5nUmVhZC5nZXQoZSk7cmV0dXJuIG5ldyBQcm9taXNlKHc9PnkucHVzaCh3KSl9Y29uc3QgdD10aGlzLnRleERhdGEuZ2V0KGUpLHt2YWx1ZXM6cyxzaGFwZTpyLHNsaWNlOm8sZHR5cGU6aSxjb21wbGV4VGVuc29ySW5mb3M6YSxpc1BhY2tlZDpsfT10O2lmKG8hPW51bGwpe2xldCB5O2w/eT1uZXcgZWkocixZbyk6eT1uZXcgTXIocixZbyk7Y29uc3Qgdz10aGlzLnJ1bldlYkdMUHJvZ3JhbSh5LFt7ZGF0YUlkOmUsc2hhcGU6cixkdHlwZTppfV0saSksYj10aGlzLnJlYWQody5kYXRhSWQpO3JldHVybiB0aGlzLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHcpLGJ9aWYocyE9bnVsbClyZXR1cm4gdGhpcy5jb252ZXJ0QW5kQ2FjaGVPbkNQVShlKTtpZihvZSgpLmdldEJvb2woIkRFQlVHIikmJiFvZSgpLmdldEJvb2woIldFQkdMX0RPV05MT0FEX0ZMT0FUX0VOQUJMRUQiKSYmb2UoKS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKT09PTIpdGhyb3cgbmV3IEVycm9yKCJ0ZW5zb3IuZGF0YSgpIHdpdGggV0VCR0xfRE9XTkxPQURfRkxPQVRfRU5BQkxFRD1mYWxzZSBhbmQgV0VCR0xfVkVSU0lPTj0yIG5vdCB5ZXQgc3VwcG9ydGVkLiIpO2xldCBjPW51bGwsaDtpZihpIT09ImNvbXBsZXg2NCImJm9lKCkuZ2V0KCJXRUJHTF9CVUZGRVJfU1VQUE9SVEVEIikpe2g9dGhpcy5kZWNvZGUoZSk7Y29uc3QgeT10aGlzLnRleERhdGEuZ2V0KGguZGF0YUlkKTtjPXRoaXMuZ3BncHUuY3JlYXRlQnVmZmVyRnJvbVRleHR1cmUoeS50ZXh0dXJlLnRleHR1cmUsLi4ubmYocikpfXRoaXMucGVuZGluZ1JlYWQuc2V0KGUsW10pLGkhPT0iY29tcGxleDY0IiYmYXdhaXQgdGhpcy5ncGdwdS5jcmVhdGVBbmRXYWl0Rm9yRmVuY2UoKTtsZXQgcDtpZihpPT09ImNvbXBsZXg2NCIpe2NvbnN0IHk9YXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMucmVhZChhLnJlYWwuZGF0YUlkKSx0aGlzLnJlYWQoYS5pbWFnLmRhdGFJZCldKSx3PXlbMF0sYj15WzFdO3A9Ym8odyxiKX1lbHNlIGlmKGM9PW51bGwpcD10aGlzLmdldFZhbHVlc0Zyb21UZXh0dXJlKGUpO2Vsc2V7Y29uc3QgeT1jZShyKTtwPXRoaXMuZ3BncHUuZG93bmxvYWRGbG9hdDMyTWF0cml4RnJvbUJ1ZmZlcihjLHkpfWlmKGghPW51bGwmJnRoaXMuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaCksYyE9bnVsbCl7Y29uc3QgeT10aGlzLmdwZ3B1LmdsOyRlKHksKCk9PnkuZGVsZXRlQnVmZmVyKGMpKX1jb25zdCBmPXRoaXMuY29udmVydEFuZENhY2hlT25DUFUoZSxwKSxnPXRoaXMucGVuZGluZ1JlYWQuZ2V0KGUpO3JldHVybiB0aGlzLnBlbmRpbmdSZWFkLmRlbGV0ZShlKSxnLmZvckVhY2goeT0+eShmKSksdGhpcy5wZW5kaW5nRGlzcG9zYWwuaGFzKGUpJiYodGhpcy5wZW5kaW5nRGlzcG9zYWwuZGVsZXRlKGUpLHRoaXMuZGlzcG9zZURhdGEoZSkmJm1yKCkucmVtb3ZlRGF0YUlkKGUsdGhpcyksdGhpcy5wZW5kaW5nRGVsZXRlcy0tKSxmfXJlYWRUb0dQVShlLHQ9e30pe2NvbnN0IHM9dGhpcy50ZXhEYXRhLmdldChlKSx7dmFsdWVzOnIsc2hhcGU6byxzbGljZTppLGR0eXBlOmEsaXNQYWNrZWQ6bCx0ZXh0dXJlOmN9PXM7aWYoYT09PSJjb21wbGV4NjQiKXRocm93IG5ldyBFcnJvcigiRG9lcyBub3Qgc3VwcG9ydCByZWFkaW5nIHRleHR1cmUgZm9yIGNvbXBsZXg2NCBkdHlwZS4iKTtpZihpIT1udWxsKXtsZXQgZztsP2c9bmV3IGVpKG8sWW8pOmc9bmV3IE1yKG8sWW8pO2NvbnN0IHk9dGhpcy5ydW5XZWJHTFByb2dyYW0oZyxbe2RhdGFJZDplLHNoYXBlOm8sZHR5cGU6YX1dLGEpLHc9dGhpcy5yZWFkVG9HUFUoeSx0KTtyZXR1cm4gdGhpcy5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh5KSx3fWlmKGM9PW51bGwpdGhyb3cgciE9bnVsbD9uZXcgRXJyb3IoIkRhdGEgaXMgbm90IG9uIEdQVSBidXQgb24gQ1BVLiIpOm5ldyBFcnJvcigiVGhlcmUgaXMgbm8gZGF0YSBvbiBHUFUgb3IgQ1BVLiIpO2NvbnN0IGg9dGhpcy5kZWNvZGUoZSx0LmN1c3RvbVRleFNoYXBlKSxwPW1yKCkubWFrZVRlbnNvckZyb21UZW5zb3JJbmZvKGgpLGY9dGhpcy50ZXhEYXRhLmdldChoLmRhdGFJZCk7cmV0dXJuIE9iamVjdC5hc3NpZ24oe3RlbnNvclJlZjpwfSxmLnRleHR1cmUpfWJ1ZmZlclN5bmMoZSl7Y29uc3QgdD10aGlzLnJlYWRTeW5jKGUuZGF0YUlkKTtpZihlLmR0eXBlPT09InN0cmluZyIpdHJ5e2NvbnN0IHM9dC5tYXAocj0+Z28ocikpO3JldHVybiBxZShlLnNoYXBlLGUuZHR5cGUscyl9Y2F0Y2h7dGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gZGVjb2RlIGVuY29kZWQgc3RyaW5nIGJ5dGVzIGludG8gdXRmLTgiKX1yZXR1cm4gcWUoZS5zaGFwZSxlLmR0eXBlLHQpfWNoZWNrTnVtZXJpY2FsUHJvYmxlbXMoZSl7aWYoZSE9bnVsbClmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3Qgcz1lW3RdO2lmKCFMWChzKSl0aHJvdyBvZSgpLmdldEJvb2woIldFQkdMX1JFTkRFUl9GTE9BVDMyX0NBUEFCTEUiKT9FcnJvcihgVGhlIHZhbHVlICR7c30gY2Fubm90IGJlIHJlcHJlc2VudGVkIHdpdGggeW91ciBjdXJyZW50IHNldHRpbmdzLiBDb25zaWRlciBlbmFibGluZyBmbG9hdDMyIHJlbmRlcmluZzogJ3RmLmVudigpLnNldCgnV0VCR0xfUkVOREVSX0ZMT0FUMzJfRU5BQkxFRCcsIHRydWUpOydgKTpFcnJvcihgVGhlIHZhbHVlICR7c30gY2Fubm90IGJlIHJlcHJlc2VudGVkIG9uIHRoaXMgZGV2aWNlLmApfX1nZXRWYWx1ZXNGcm9tVGV4dHVyZShlKXtjb25zdHtzaGFwZTp0LGR0eXBlOnMsaXNQYWNrZWQ6cn09dGhpcy50ZXhEYXRhLmdldChlKSxvPWNlKHQpO2lmKG9lKCkuZ2V0Qm9vbCgiV0VCR0xfRE9XTkxPQURfRkxPQVRfRU5BQkxFRCIpKXtjb25zdCBmPXRoaXMuZGVjb2RlKGUpLGc9dGhpcy50ZXhEYXRhLmdldChmLmRhdGFJZCkseT10aGlzLmdwZ3B1LmRvd25sb2FkTWF0cml4RnJvbVBhY2tlZFRleHR1cmUoZy50ZXh0dXJlLnRleHR1cmUsLi4ubmYodCkpLnN1YmFycmF5KDAsbyk7cmV0dXJuIHRoaXMuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZikseX1jb25zdCBpPW9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDSyIpJiZyPT09ITAsYT1pP29mKHQpOnQsbD1pP25ldyBaOShhKTpuZXcgUTkoYSksYz10aGlzLnJ1bldlYkdMUHJvZ3JhbShsLFt7c2hhcGU6YSxkdHlwZTpzLGRhdGFJZDplfV0sImZsb2F0MzIiKSxoPXRoaXMudGV4RGF0YS5nZXQoYy5kYXRhSWQpLHA9dGhpcy5ncGdwdS5kb3dubG9hZEJ5dGVFbmNvZGVkRmxvYXRNYXRyaXhGcm9tT3V0cHV0VGV4dHVyZShoLnRleHR1cmUudGV4dHVyZSxoLnRleFNoYXBlWzBdLGgudGV4U2hhcGVbMV0pLnN1YmFycmF5KDAsbyk7cmV0dXJuIHRoaXMuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYykscH10aW1lckF2YWlsYWJsZSgpe3JldHVybiBvZSgpLmdldE51bWJlcigiV0VCR0xfRElTSk9JTlRfUVVFUllfVElNRVJfRVhURU5TSU9OX1JFTElBQkxFIik+MH10aW1lKGUpe2NvbnN0IHQ9dGhpcy5hY3RpdmVUaW1lcnMscz1bXTtsZXQgcj0hMTt0aGlzLnByb2dyYW1UaW1lcnNTdGFjaz09bnVsbD8odGhpcy5wcm9ncmFtVGltZXJzU3RhY2s9cyxyPSEwKTp0aGlzLmFjdGl2ZVRpbWVycy5wdXNoKHMpLHRoaXMuYWN0aXZlVGltZXJzPXMsZSgpO2NvbnN0IG89R3IodGhpcy5hY3RpdmVUaW1lcnMubWFwKGw9PmwucXVlcnkpKS5maWx0ZXIobD0+bCE9bnVsbCksaT1Hcih0aGlzLmFjdGl2ZVRpbWVycy5tYXAobD0+bC5uYW1lKSkuZmlsdGVyKGw9PmwhPW51bGwpO3RoaXMuYWN0aXZlVGltZXJzPXQsciYmKHRoaXMucHJvZ3JhbVRpbWVyc1N0YWNrPW51bGwpO2NvbnN0IGE9e3VwbG9hZFdhaXRNczp0aGlzLnVwbG9hZFdhaXRNcyxkb3dubG9hZFdhaXRNczp0aGlzLmRvd25sb2FkV2FpdE1zLGtlcm5lbE1zOm51bGwsd2FsbE1zOm51bGx9O3JldHVybihhc3luYygpPT57aWYob2UoKS5nZXROdW1iZXIoIldFQkdMX0RJU0pPSU5UX1FVRVJZX1RJTUVSX0VYVEVOU0lPTl9SRUxJQUJMRSIpPjApe2NvbnN0IGw9YXdhaXQgUHJvbWlzZS5hbGwobyk7YS5rZXJuZWxNcz1zJChsKSxhLmdldEV4dHJhUHJvZmlsZUluZm89KCk9PmwubWFwKChjLGgpPT4oe25hbWU6aVtoXSxtczpjfSkpLm1hcChjPT5gJHtjLm5hbWV9OiAke2MubXN9YCkuam9pbigiLCAiKX1lbHNlIGEua2VybmVsTXM9e2Vycm9yOiJXZWJHTCBxdWVyeSB0aW1lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC4ifTtyZXR1cm4gdGhpcy51cGxvYWRXYWl0TXM9MCx0aGlzLmRvd25sb2FkV2FpdE1zPTAsYX0pKCl9bWVtb3J5KCl7cmV0dXJue3VucmVsaWFibGU6ITEsbnVtQnl0ZXNJbkdQVTp0aGlzLm51bUJ5dGVzSW5HUFUsbnVtQnl0ZXNJbkdQVUFsbG9jYXRlZDp0aGlzLnRleHR1cmVNYW5hZ2VyLm51bUJ5dGVzQWxsb2NhdGVkLG51bUJ5dGVzSW5HUFVGcmVlOnRoaXMudGV4dHVyZU1hbmFnZXIubnVtQnl0ZXNGcmVlfX1zdGFydFRpbWVyKCl7cmV0dXJuIG9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9ESVNKT0lOVF9RVUVSWV9USU1FUl9FWFRFTlNJT05fUkVMSUFCTEUiKT4wP3RoaXMuZ3BncHUuYmVnaW5RdWVyeSgpOntzdGFydE1zOlZuKCksZW5kTXM6bnVsbH19ZW5kVGltZXIoZSl7cmV0dXJuIG9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9ESVNKT0lOVF9RVUVSWV9USU1FUl9FWFRFTlNJT05fUkVMSUFCTEUiKT4wPyh0aGlzLmdwZ3B1LmVuZFF1ZXJ5KCksZSk6KGUuZW5kTXM9Vm4oKSxlKX1hc3luYyBnZXRRdWVyeVRpbWUoZSl7aWYob2UoKS5nZXROdW1iZXIoIldFQkdMX0RJU0pPSU5UX1FVRVJZX1RJTUVSX0VYVEVOU0lPTl9SRUxJQUJMRSIpPjApcmV0dXJuIHRoaXMuZ3BncHUud2FpdEZvclF1ZXJ5QW5kR2V0VGltZShlKTtjb25zdCB0PWU7cmV0dXJuIHQuZW5kTXMtdC5zdGFydE1zfWRpc3Bvc2VEYXRhKGUsdD0hMSl7aWYodGhpcy5wZW5kaW5nRGlzcG9zYWwuaGFzKGUpKXJldHVybiExO2lmKCF0aGlzLnRleERhdGEuaGFzKGUpKXJldHVybiEwO2lmKHQ/dGhpcy50ZXhEYXRhLmdldChlKS5yZWZDb3VudD0wOnRoaXMudGV4RGF0YS5nZXQoZSkucmVmQ291bnQtLSwhdCYmdGhpcy50ZXhEYXRhLmdldChlKS5yZWZDb3VudD4wKXJldHVybiExO2lmKHRoaXMucGVuZGluZ1JlYWQuaGFzKGUpKXJldHVybiB0aGlzLnBlbmRpbmdEaXNwb3NhbC5hZGQoZSksdGhpcy5wZW5kaW5nRGVsZXRlcysrLCExO3RoaXMucmVsZWFzZUdQVURhdGEoZSk7Y29uc3R7Y29tcGxleFRlbnNvckluZm9zOnN9PXRoaXMudGV4RGF0YS5nZXQoZSk7cmV0dXJuIHMhPW51bGwmJih0aGlzLmRpc3Bvc2VEYXRhKHMucmVhbC5kYXRhSWQsdCksdGhpcy5kaXNwb3NlRGF0YShzLmltYWcuZGF0YUlkLHQpKSx0aGlzLnRleERhdGEuZGVsZXRlKGUpLCEwfXJlbGVhc2VHUFVEYXRhKGUpe2NvbnN0e3RleHR1cmU6dCxkdHlwZTpzLHRleFNoYXBlOnIsdXNhZ2U6byxpc1BhY2tlZDppLHNsaWNlOmF9PXRoaXMudGV4RGF0YS5nZXQoZSksbD1hJiZhLm9yaWdEYXRhSWR8fGUsYz10aGlzLmRhdGFSZWZDb3VudC5nZXQobCk7Yz4xP3RoaXMuZGF0YVJlZkNvdW50LnNldChsLGMtMSk6KHRoaXMuZGF0YVJlZkNvdW50LmRlbGV0ZShsKSx0IT1udWxsJiYodGhpcy5udW1CeXRlc0luR1BVLT10aGlzLmNvbXB1dGVCeXRlcyhyLHMpLHRoaXMudGV4dHVyZU1hbmFnZXIucmVsZWFzZVRleHR1cmUodCxyLG8saSkpKTtjb25zdCBoPXRoaXMudGV4RGF0YS5nZXQoZSk7aC50ZXh0dXJlPW51bGwsaC50ZXhTaGFwZT1udWxsLGguaXNQYWNrZWQ9ITEsaC5zbGljZT1udWxsfWdldFRleHR1cmUoZSl7cmV0dXJuIHRoaXMudXBsb2FkVG9HUFUoZSksdGhpcy50ZXhEYXRhLmdldChlKS50ZXh0dXJlLnRleHR1cmV9Z2V0RGF0YUluZm8oZSl7cmV0dXJuIHRoaXMudGV4RGF0YS5nZXQoZSl9c2hvdWxkRXhlY3V0ZU9uQ1BVKGUsdD1EUSl7cmV0dXJuIG9lKCkuZ2V0Qm9vbCgiV0VCR0xfQ1BVX0ZPUldBUkQiKSYmZS5ldmVyeShzPT50aGlzLnRleERhdGEuZ2V0KHMuZGF0YUlkKS50ZXh0dXJlPT1udWxsJiZjZShzLnNoYXBlKTx0KX1nZXRHUEdQVUNvbnRleHQoKXtyZXR1cm4gdGhpcy5ncGdwdX13aGVyZShlKXtEcygidGYud2hlcmUoKSBpbiB3ZWJnbCBsb2NrcyB0aGUgVUkgdGhyZWFkLiBDYWxsIHRmLndoZXJlQXN5bmMoKSBpbnN0ZWFkIik7Y29uc3QgdD1lLmRhdGFTeW5jKCk7cmV0dXJuIElRKGUuc2hhcGUsdCl9cGFja2VkVW5hcnlPcChlLHQscyl7Y29uc3Qgcj1uZXcgZWkoZS5zaGFwZSx0KSxvPXRoaXMuY29tcGlsZUFuZFJ1bihyLFtlXSxzKTtyZXR1cm4gbXIoKS5tYWtlVGVuc29yRnJvbVRlbnNvckluZm8obyl9YWJzKGUpe2lmKHRoaXMuc2hvdWxkRXhlY3V0ZU9uQ1BVKFtlXSkmJmUuZHR5cGUhPT0iY29tcGxleDY0Iil7Y29uc3Qgcj1ORCh0aGlzLnRleERhdGEuZ2V0KGUuZGF0YUlkKS52YWx1ZXMpO3JldHVybiB0aGlzLm1ha2VPdXRwdXQoZS5zaGFwZSxlLmR0eXBlLHIpfWlmKG9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDS19VTkFSWV9PUEVSQVRJT05TIikpcmV0dXJuIHRoaXMucGFja2VkVW5hcnlPcChlLEZDLGUuZHR5cGUpO2NvbnN0IHQ9bmV3IE1yKGUuc2hhcGUsRkMpLHM9dGhpcy5jb21waWxlQW5kUnVuKHQsW2VdKTtyZXR1cm4gbXIoKS5tYWtlVGVuc29yRnJvbVRlbnNvckluZm8ocyl9bWFrZVRlbnNvckluZm8oZSx0LHMpe2xldCByO2lmKHQ9PT0ic3RyaW5nIiYmcyE9bnVsbCYmcy5sZW5ndGg+MCYmenIoc1swXSkpe2NvbnN0IG89cy5tYXAoaT0+QnIoaSkpO3I9dGhpcy53cml0ZShvLGUsdCl9ZWxzZSByPXRoaXMud3JpdGUocyxlLHQpO3JldHVybiB0aGlzLnRleERhdGEuZ2V0KHIpLnVzYWdlPW51bGwse2RhdGFJZDpyLHNoYXBlOmUsZHR5cGU6dH19bWFrZU91dHB1dChlLHQscyl7cmV0dXJuIG1yKCkubWFrZVRlbnNvckZyb21UZW5zb3JJbmZvKHRoaXMubWFrZVRlbnNvckluZm8oZSx0LHMpLHRoaXMpfXVucGFja1RlbnNvcihlKXtjb25zdCB0PW5ldyAkUShlLnNoYXBlKTtyZXR1cm4gdGhpcy5ydW5XZWJHTFByb2dyYW0odCxbZV0sZS5kdHlwZSl9cGFja1RlbnNvcihlKXtjb25zdCB0PW5ldyBjUShlLnNoYXBlKTtyZXR1cm4gdGhpcy5ydW5XZWJHTFByb2dyYW0odCxbZV0sZS5kdHlwZSxudWxsLCEwKX1wYWNrZWRSZXNoYXBlKGUsdCl7Y29uc3Qgcz1bQ2woZS5zaGFwZSksLi4uJGwoZS5zaGFwZSldLHI9e2R0eXBlOmUuZHR5cGUsc2hhcGU6cyxkYXRhSWQ6ZS5kYXRhSWR9LG89W0NsKHQpLC4uLiRsKHQpXSxpPW5ldyAkRChvLHMpLGE9ITAsbD1bc10sYz10aGlzLnJ1bldlYkdMUHJvZ3JhbShpLFtyXSxlLmR0eXBlLGwsYSk7cmV0dXJue2RhdGFJZDpjLmRhdGFJZCxzaGFwZTp0LGR0eXBlOmMuZHR5cGV9fWRlY29kZShlLHQpe2NvbnN0IHM9dGhpcy50ZXhEYXRhLmdldChlKSx7aXNQYWNrZWQ6cixzaGFwZTpvLGR0eXBlOml9PXM7aWYodCE9bnVsbCl7Y29uc3QgZj1jZShvKSxnPXRbMF0qdFsxXSo0O0EoZjw9ZywoKT0+ImN1c3RvbVRleFNoYXBlIGlzIHRvbyBzbWFsbC4gUm93ICogQ29sdW1uICogNCBzaG91bGQgYmUgZXF1YWwgb3IgbGFyZ2VyIHRoYW4gdGhlIHNpemUgb2YgdGhlIHRlbnNvciBkYXRhLiIpfWNvbnN0IGE9b2Yobyk7bGV0IGw7cj9sPW5ldyBZOShhKTpsPW5ldyBYOShhKTtjb25zdCBjPSEwLGg9W3Q/P25mKGEpXSxwPXRoaXMucnVuV2ViR0xQcm9ncmFtKGwsW3tzaGFwZTphLGR0eXBlOmksZGF0YUlkOmV9XSxpLGgsYyx0KTtyZXR1cm57ZHR5cGU6aSxzaGFwZTpvLGRhdGFJZDpwLmRhdGFJZH19cnVuV2ViR0xQcm9ncmFtKGUsdCxzLHIsbz0hMSxpKXtjb25zdCBhPXRoaXMubWFrZVRlbnNvckluZm8oZS5vdXRwdXRTaGFwZSxzKSxsPXRoaXMudGV4RGF0YS5nZXQoYS5kYXRhSWQpO2lmKGUucGFja2VkT3V0cHV0JiYobC5pc1BhY2tlZD0hMCksZS5vdXRQYWNraW5nU2NoZW1lPT09WGMuREVOU0Upe2NvbnN0IHY9aT8/bmYoZS5vdXRwdXRTaGFwZSk7bC50ZXhTaGFwZT12Lm1hcChTPT5TKjIpfWlmKGUub3V0VGV4VXNhZ2UhPW51bGwmJihsLnVzYWdlPWUub3V0VGV4VXNhZ2UpLGNlKGEuc2hhcGUpPT09MClyZXR1cm4gbC52YWx1ZXM9aG4oYS5kdHlwZSwwKSxhO2NvbnN0IGM9W10saD10Lm1hcCh2PT57aWYodi5kdHlwZT09PSJjb21wbGV4NjQiKXRocm93IG5ldyBFcnJvcigiR1BHUFVQcm9ncmFtIGRvZXMgbm90IHN1cHBvcnQgY29tcGxleDY0IGlucHV0LiBGb3IgY29tcGxleDY0IGR0eXBlcywgcGxlYXNlIHNlcGFyYXRlIHRoZSBwcm9ncmFtIGludG8gcmVhbCBhbmQgaW1hZ2luYXJ5IHBhcnRzLiIpO2xldCBTPXRoaXMudGV4RGF0YS5nZXQodi5kYXRhSWQpO2lmKFMudGV4dHVyZT09bnVsbCl7aWYoIWUucGFja2VkSW5wdXRzJiZjZSh2LnNoYXBlKTw9b2UoKS5nZXROdW1iZXIoIldFQkdMX1NJWkVfVVBMT0FEX1VOSUZPUk0iKSlyZXR1cm57c2hhcGU6di5zaGFwZSx0ZXhEYXRhOm51bGwsaXNVbmlmb3JtOiEwLHVuaWZvcm1WYWx1ZXM6Uy52YWx1ZXN9O2UucGFja2VkSW5wdXRzJiYoUy5pc1BhY2tlZD0hMCxTLnNoYXBlPXYuc2hhcGUpfWlmKHRoaXMudXBsb2FkVG9HUFUodi5kYXRhSWQpLCEhUy5pc1BhY2tlZCE9ISFlLnBhY2tlZElucHV0cyl2PVMuaXNQYWNrZWQ/dGhpcy51bnBhY2tUZW5zb3Iodik6dGhpcy5wYWNrVGVuc29yKHYpLGMucHVzaCh2KSxTPXRoaXMudGV4RGF0YS5nZXQodi5kYXRhSWQpO2Vsc2UgaWYoUy5pc1BhY2tlZCYmIUtmKFMuc2hhcGUsdi5zaGFwZSkpe2NvbnN0ICQ9dixrPXYuc2hhcGU7di5zaGFwZT1TLnNoYXBlLHY9dGhpcy5wYWNrZWRSZXNoYXBlKHYsayksYy5wdXNoKHYpLFM9dGhpcy50ZXhEYXRhLmdldCh2LmRhdGFJZCksJC5zaGFwZT1rfXJldHVybntzaGFwZTp2LnNoYXBlLHRleERhdGE6Uyxpc1VuaWZvcm06ITF9fSk7dGhpcy51cGxvYWRUb0dQVShhLmRhdGFJZCk7Y29uc3QgcD17c2hhcGU6YS5zaGFwZSx0ZXhEYXRhOmwsaXNVbmlmb3JtOiExfSxmPUs5KGUsaCxwKSxnPXRoaXMuZ2V0QW5kU2F2ZUJpbmFyeShmLCgpPT5IOSh0aGlzLmdwZ3B1LGUsaCxwKSkseT10aGlzLmFjdGl2ZVRpbWVycyE9bnVsbDtsZXQgdzt5JiYodz10aGlzLnN0YXJ0VGltZXIoKSksb2UoKS5nZXQoIkVOR0lORV9DT01QSUxFX09OTFkiKXx8cTkodGhpcy5ncGdwdSxnLGgscCxyKSxjLmZvckVhY2godj0+dGhpcy5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh2KSkseSYmKHc9dGhpcy5lbmRUaW1lcih3KSx0aGlzLmFjdGl2ZVRpbWVycy5wdXNoKHtuYW1lOmUuY29uc3RydWN0b3IubmFtZSxxdWVyeTp0aGlzLmdldFF1ZXJ5VGltZSh3KX0pKTtjb25zdCBiPW9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9GTFVTSF9USFJFU0hPTEQiKTtpZihiPjApe2NvbnN0IHY9Vm4oKTt2LXRoaXMubGFzdEdsRmx1c2hUaW1lPmImJih0aGlzLmdwZ3B1LmdsLmZsdXNoKCksdGhpcy5sYXN0R2xGbHVzaFRpbWU9dil9aWYoIW9lKCkuZ2V0Qm9vbCgiV0VCR0xfTEFaSUxZX1VOUEFDSyIpJiZsLmlzUGFja2VkJiZvPT09ITEpe2NvbnN0IHY9dGhpcy51bnBhY2tUZW5zb3IoYSk7cmV0dXJuIHRoaXMuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYSksdn1yZXR1cm4gYX1jb21waWxlQW5kUnVuKGUsdCxzLHIsbz0hMSl7cmV0dXJuIHM9c3x8dFswXS5kdHlwZSx0aGlzLnJ1bldlYkdMUHJvZ3JhbShlLHQscyxyLG8pfWdldEFuZFNhdmVCaW5hcnkoZSx0KXtyZXR1cm4gZSBpbiB0aGlzLmJpbmFyeUNhY2hlfHwodGhpcy5iaW5hcnlDYWNoZVtlXT10KCkpLHRoaXMuYmluYXJ5Q2FjaGVbZV19Z2V0VGV4dHVyZU1hbmFnZXIoKXtyZXR1cm4gdGhpcy50ZXh0dXJlTWFuYWdlcn1kaXNwb3NlKCl7dGhpcy5kaXNwb3NlZHx8KG9lKCkuZ2V0Qm9vbCgiSVNfVEVTVCIpfHxPYmplY3Qua2V5cyh0aGlzLmJpbmFyeUNhY2hlKS5mb3JFYWNoKHQ9Pnt0aGlzLmdwZ3B1LmRlbGV0ZVByb2dyYW0odGhpcy5iaW5hcnlDYWNoZVt0XS53ZWJHTFByb2dyYW0pLGRlbGV0ZSB0aGlzLmJpbmFyeUNhY2hlW3RdfSksdGhpcy50ZXh0dXJlTWFuYWdlci5kaXNwb3NlKCksdGhpcy5jYW52YXMhPW51bGwmJnR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudDwidSImJnRoaXMuY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQ/dGhpcy5jYW52YXMucmVtb3ZlKCk6dGhpcy5jYW52YXM9bnVsbCx0aGlzLmdwZ3B1Q3JlYXRlZExvY2FsbHkmJih0aGlzLmdwZ3B1LnByb2dyYW09bnVsbCx0aGlzLmdwZ3B1LmRpc3Bvc2UoKSksdGhpcy5kaXNwb3NlZD0hMCl9ZmxvYXRQcmVjaXNpb24oKXtyZXR1cm4gdGhpcy5mbG9hdFByZWNpc2lvblZhbHVlPT1udWxsJiYodGhpcy5mbG9hdFByZWNpc2lvblZhbHVlPXJlKCgpPT57aWYoIW9lKCkuZ2V0KCJXRUJHTF9SRU5ERVJfRkxPQVQzMl9FTkFCTEVEIikpe2NvbnN0IGU9b2UoKS5nZXRCb29sKCJERUJVRyIpO29lKCkuc2V0KCJERUJVRyIsITEpO2NvbnN0IHQ9dGhpcy5hYnMoTWUoMWUtOCkpLmRhdGFTeW5jKClbMF07aWYob2UoKS5zZXQoIkRFQlVHIixlKSx0PjApcmV0dXJuIDMyfXJldHVybiAxNn0pKSx0aGlzLmZsb2F0UHJlY2lzaW9uVmFsdWV9ZXBzaWxvbigpe3JldHVybiB0aGlzLmZsb2F0UHJlY2lzaW9uKCk9PT0zMj9UUTpFUX11cGxvYWRUb0dQVShlKXtjb25zdCB0PXRoaXMudGV4RGF0YS5nZXQoZSkse3NoYXBlOnMsZHR5cGU6cix2YWx1ZXM6byx0ZXh0dXJlOmksdXNhZ2U6YSxpc1BhY2tlZDpsfT10O2lmKGkhPW51bGwpcmV0dXJuO2NvbnN0IGM9dGhpcy5hY3RpdmVUaW1lcnMhPW51bGw7bGV0IGg7YyYmKGg9Vm4oKSk7bGV0IHA9dC50ZXhTaGFwZTtpZihwPT1udWxsJiYocD1lOShzLGwpLHQudGV4U2hhcGU9cCksbyE9bnVsbCl7Y29uc3QgZj1vZihzKTtsZXQgZyx5PXBbMV0sdz1wWzBdO2NvbnN0IGI9byBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fG8gaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheTsobHx8IWIpJiYoW3ksd109UnUocFswXSxwWzFdKSksbD9nPW5ldyBlWShmLGIpOmc9bmV3IERDKGYsYik7Y29uc3Qgdj1iP1t3LHldOnAsUz10aGlzLm1ha2VUZW5zb3JJbmZvKHYsciksJD10aGlzLnRleERhdGEuZ2V0KFMuZGF0YUlkKTtiPyQudXNhZ2U9T3MuUElYRUxTOiQudXNhZ2U9T3MuVVBMT0FELCQudGV4U2hhcGU9dix0aGlzLmdwZ3B1LnVwbG9hZERlbnNlTWF0cml4VG9UZXh0dXJlKHRoaXMuZ2V0VGV4dHVyZShTLmRhdGFJZCkseSx3LG8pO2NvbnN0IGs9W1t3LHldXSxEPXRoaXMucnVuV2ViR0xQcm9ncmFtKGcsW1NdLHIsaywhMCksTD10aGlzLnRleERhdGEuZ2V0KEQuZGF0YUlkKTt0LnRleFNoYXBlPUwudGV4U2hhcGUsdC5pc1BhY2tlZD1MLmlzUGFja2VkLHQudXNhZ2U9TC51c2FnZSxvZSgpLmdldCgiRU5HSU5FX0NPTVBJTEVfT05MWSIpP3RoaXMuZGlzcG9zZURhdGEoRC5kYXRhSWQpOih0LnRleHR1cmU9TC50ZXh0dXJlLHQudmFsdWVzPW51bGwsdGhpcy50ZXhEYXRhLmRlbGV0ZShELmRhdGFJZCkpLHRoaXMuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oUyksYyYmKHRoaXMudXBsb2FkV2FpdE1zKz1WbigpLWgpfWVsc2V7Y29uc3QgZj10aGlzLmFjcXVpcmVUZXh0dXJlKHAsYSxyLGwpO3QudGV4dHVyZT1mfX1jb252ZXJ0QW5kQ2FjaGVPbkNQVShlLHQpe2NvbnN0IHM9dGhpcy50ZXhEYXRhLmdldChlKSx7ZHR5cGU6cn09cztyZXR1cm4gdCE9bnVsbCYmKHMudmFsdWVzPU9RKHQscikpLHMudmFsdWVzfWFjcXVpcmVUZXh0dXJlKGUsdCxzLHIpe2lmKHRoaXMubnVtQnl0ZXNJbkdQVSs9dGhpcy5jb21wdXRlQnl0ZXMoZSxzKSwhdGhpcy53YXJuZWRBYm91dE1lbW9yeSYmdGhpcy5udW1CeXRlc0luR1BVPnRoaXMubnVtTUJCZWZvcmVXYXJuaW5nKjEwMjQqMTAyNCl7Y29uc3Qgbz0odGhpcy5udW1CeXRlc0luR1BVLzEwMjQvMTAyNCkudG9GaXhlZCgyKTt0aGlzLndhcm5lZEFib3V0TWVtb3J5PSEwLGNvbnNvbGUud2FybihgSGlnaCBtZW1vcnkgdXNhZ2UgaW4gR1BVOiAke299IE1CLCBtb3N0IGxpa2VseSBkdWUgdG8gYSBtZW1vcnkgbGVha2ApfXJldHVybiB0aGlzLnRleHR1cmVNYW5hZ2VyLmFjcXVpcmVUZXh0dXJlKGUsdCxyKX1jb21wdXRlQnl0ZXMoZSx0KXtyZXR1cm4gZVswXSplWzFdKl9jKHQpfWNoZWNrQ29tcGlsZUNvbXBsZXRpb24oKXtmb3IoY29uc3RbLGVdb2YgT2JqZWN0LmVudHJpZXModGhpcy5iaW5hcnlDYWNoZSkpdGhpcy5jaGVja0NvbXBsZXRpb25fKGUpfWFzeW5jIGNoZWNrQ29tcGlsZUNvbXBsZXRpb25Bc3luYygpe2NvbnN0IGU9W107aWYodGhpcy5ncGdwdS5wYXJhbGxlbENvbXBpbGF0aW9uRXh0ZW5zaW9uKXtmb3IoY29uc3RbLHRdb2YgT2JqZWN0LmVudHJpZXModGhpcy5iaW5hcnlDYWNoZSkpZS5wdXNoKHRoaXMuY2hlY2tDb21wbGV0aW9uQXN5bmNfKHQpKTtyZXR1cm4gUHJvbWlzZS5hbGwoZSl9ZWxzZXtmb3IoY29uc3RbLHRdb2YgT2JqZWN0LmVudHJpZXModGhpcy5iaW5hcnlDYWNoZSkpe2NvbnN0IHM9bmV3IFByb21pc2Uocj0+e3RyeXt0aGlzLmNoZWNrQ29tcGxldGlvbl8odCkscighMCl9Y2F0Y2gobyl7dGhyb3cgb319KTtlLnB1c2gocyl9cmV0dXJuIFByb21pc2UuYWxsKGUpfX1hc3luYyBjaGVja0NvbXBsZXRpb25Bc3luY18oZSl7cmV0dXJuIHRoaXMuZ3BncHUuZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihlLndlYkdMUHJvZ3JhbSx0aGlzLmdwZ3B1LnBhcmFsbGVsQ29tcGlsYXRpb25FeHRlbnNpb24uQ09NUExFVElPTl9TVEFUVVNfS0hSKT90aGlzLmNoZWNrQ29tcGxldGlvbl8oZSk6KGF3YWl0IHV3KCksdGhpcy5jaGVja0NvbXBsZXRpb25Bc3luY18oZSkpfWNoZWNrQ29tcGxldGlvbl8oZSl7aWYodGhpcy5ncGdwdS5nbC5nZXRQcm9ncmFtUGFyYW1ldGVyKGUud2ViR0xQcm9ncmFtLHRoaXMuZ3BncHUuZ2wuTElOS19TVEFUVVMpPT09ITEpdGhyb3cgY29uc29sZS5sb2codGhpcy5ncGdwdS5nbC5nZXRQcm9ncmFtSW5mb0xvZyhlLndlYkdMUHJvZ3JhbSkpLHRoaXMuZ3BncHUuZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGUuZnJhZ21lbnRTaGFkZXIsdGhpcy5ncGdwdS5nbC5DT01QSUxFX1NUQVRVUyk9PT0hMT8oZEQoZS5zb3VyY2UsdGhpcy5ncGdwdS5nbC5nZXRTaGFkZXJJbmZvTG9nKGUuZnJhZ21lbnRTaGFkZXIpKSxuZXcgRXJyb3IoIkZhaWxlZCB0byBjb21waWxlIGZyYWdtZW50IHNoYWRlci4iKSk6bmV3IEVycm9yKCJGYWlsZWQgdG8gbGluayB2ZXJ0ZXggYW5kIGZyYWdtZW50IHNoYWRlcnMuIik7cmV0dXJuITB9Z2V0VW5pZm9ybUxvY2F0aW9ucygpe2Zvcihjb25zdCBlIG9mIE9iamVjdC52YWx1ZXModGhpcy5iaW5hcnlDYWNoZSkpe3RoaXMuZ3BncHUuYnVpbGRWYW8oZS53ZWJHTFByb2dyYW0pO2NvbnN0e3ZhcmlhYmxlc0xvY2F0aW9uczp0LGN1c3RvbVVuaWZvcm1Mb2NhdGlvbnM6cyxpbmZMb2M6cixuYW5Mb2M6byxvdXRTaGFwZUxvY2F0aW9uOmksb3V0U2hhcGVTdHJpZGVzTG9jYXRpb246YSxvdXRUZXhTaGFwZUxvY2F0aW9uOmx9PWdEKHRoaXMuZ3BncHUsZS5wcm9ncmFtLGUud2ViR0xQcm9ncmFtKTtlLnZhcmlhYmxlc0xvY2F0aW9ucz10LGUuY3VzdG9tVW5pZm9ybUxvY2F0aW9ucz1zLGUuaW5mTG9jPXIsZS5uYW5Mb2M9byxlLm91dFNoYXBlTG9jYXRpb249aSxlLm91dFNoYXBlU3RyaWRlc0xvY2F0aW9uPWEsZS5vdXRUZXhTaGFwZUxvY2F0aW9uPWx9fWNyZWF0ZVRlbnNvckZyb21HUFVEYXRhKGUsdCxzKXtlLmNoYW5uZWxzPWUuY2hhbm5lbHN8fCJSR0JBIjtjb25zdHt0ZXh0dXJlOnIsaGVpZ2h0Om8sd2lkdGg6aSxjaGFubmVsczphfT1lLGw9bXIoKS5iYWNrZW5kO2lmKCFsLmdwZ3B1LmdsLmlzVGV4dHVyZShyKSl0aHJvdyBuZXcgRXJyb3IoIlRoZSB0ZXh0dXJlIGlzIGludmFsaWQuIEFsc28sIHBsZWFzZSBtYWtlIHN1cmUgdGhlIHRleHR1cmUgYW5kIHRoZSBURkpTIFdlYkdMIGJhY2tlbmQgYXJlIHVzaW5nIHRoZSBzYW1lIGNhbnZhcy4gSWYgeW91IHdhbnQgdG8gdXNlIHlvdXIgb3duIGN1c3RvbSBjYW52YXMsIHlvdSBoYXZlIHRvIGNyZWF0ZSBhbmQgdXNlIHRoZSBjdXN0b20gVEZKUyBXZWJHTCBiYWNrZW5kIGNyZWF0ZWQgZnJvbSB0aGUgY2FudmFzIHRocm91Z2ggJ25ldyB0Zi5NYXRoQmFja2VuZFdlYkdMKGN1c3RvbUNhbnZhcyknLiIpO2NvbnN0IGM9bC53cml0ZVRleHR1cmUocix0LHMsbyxpLGEpO3JldHVybiBtcigpLm1ha2VUZW5zb3JGcm9tRGF0YUlkKGMsdCxzLGwpfX11eS5uZXh0RGF0YUlkPTA7ZnVuY3Rpb24gT1EobixlKXtpZihlPT09ImZsb2F0MzIifHxlPT09ImNvbXBsZXg2NCIpcmV0dXJuIG47aWYoZT09PSJpbnQzMiJ8fGU9PT0iYm9vbCIpe2NvbnN0IHQ9ZT09PSJpbnQzMiI/bmV3IEludDMyQXJyYXkobi5sZW5ndGgpOm5ldyBVaW50OEFycmF5KG4ubGVuZ3RoKTtmb3IobGV0IHM9MDtzPHQubGVuZ3RoOysrcyl0W3NdPU1hdGgucm91bmQobltzXSk7cmV0dXJuIHR9ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZHR5cGUgJHtlfWApfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL0wxKCkmJk0xKCJ3ZWJnbCIsKCk9Pm5ldyB1eSwyKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBmdj1gCiAgaWYgKGlzbmFuKGEpKSByZXR1cm4gYTsKICBpZiAoaXNuYW4oYikpIHJldHVybiBiOwpgO2NsYXNzIHhhe2NvbnN0cnVjdG9yKGUsdCxzKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIiwiQiJdLHRoaXMub3V0cHV0U2hhcGU9SGUodCxzKSx0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM9TG4odGhpcy5vdXRwdXRTaGFwZS5sZW5ndGgpLHRoaXMudXNlckNvZGU9YAogICAgICBmbG9hdCBiaW5hcnlPcGVyYXRpb24oZmxvYXQgYSwgZmxvYXQgYikgewogICAgICAgICR7ZX0KICAgICAgfQoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGZsb2F0IGEgPSBnZXRBQXRPdXRDb29yZHMoKTsKICAgICAgICBmbG9hdCBiID0gZ2V0QkF0T3V0Q29vcmRzKCk7CiAgICAgICAgc2V0T3V0cHV0KGJpbmFyeU9wZXJhdGlvbihhLCBiKSk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IERhPWAKICByZXN1bHQuciA9IGlzTmFOLnIgPyBOQU4gOiByZXN1bHQucjsKICByZXN1bHQuZyA9IGlzTmFOLmcgPyBOQU4gOiByZXN1bHQuZzsKICByZXN1bHQuYiA9IGlzTmFOLmIgPyBOQU4gOiByZXN1bHQuYjsKICByZXN1bHQuYSA9IGlzTmFOLmEgPyBOQU4gOiByZXN1bHQuYTsKYDtjbGFzcyBGdXtjb25zdHJ1Y3RvcihlLHQscyxyPSExKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIiwiQiJdLHRoaXMuc3VwcG9ydHNCcm9hZGNhc3Rpbmc9ITAsdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITAsdGhpcy5vdXRwdXRTaGFwZT1IZSh0LHMpO2NvbnN0IG89dGhpcy5vdXRwdXRTaGFwZS5sZW5ndGg7dGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPUxuKG8pO2xldCBpPSIiO2lmKHIpaWYobz09PTB8fGNlKHRoaXMub3V0cHV0U2hhcGUpPT09MSlpPWAKICAgICAgICAgIHJlc3VsdC55ID0gMC47CiAgICAgICAgICByZXN1bHQueiA9IDAuOwogICAgICAgICAgcmVzdWx0LncgPSAwLjsKICAgICAgICBgO2Vsc2UgaWYoaT1gCiAgICAgICAgICAke3h0KG8pfSBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBgLG89PT0xKXRoaXMuZW5hYmxlU2hhcGVVbmlmb3Jtcz9pKz1gCiAgICAgICAgICAgIHJlc3VsdC55ID0gKGNvb3JkcyArIDEpID49IG91dFNoYXBlID8gMC4gOiByZXN1bHQueTsKICAgICAgICAgICAgcmVzdWx0LnogPSAwLjsKICAgICAgICAgICAgcmVzdWx0LncgPSAwLjsKICAgICAgICAgIGA6aSs9YAogICAgICAgICAgICByZXN1bHQueSA9IChjb29yZHMgKyAxKSA+PSAke3RoaXMub3V0cHV0U2hhcGVbMF19ID8gMC4gOiByZXN1bHQueTsKICAgICAgICAgICAgcmVzdWx0LnogPSAwLjsKICAgICAgICAgICAgcmVzdWx0LncgPSAwLjsKICAgICAgICAgIGA7ZWxzZXtjb25zdCBsPUduKCJjb29yZHMiLG8pO3RoaXMuZW5hYmxlU2hhcGVVbmlmb3Jtcz9pKz1gCiAgICAgICAgICAgIGJvb2wgbmV4dFJvd091dE9mQm91bmRzID0KICAgICAgICAgICAgICAoJHtsW28tMl19ICsgMSkgPj0gb3V0U2hhcGVbJHtvfSAtIDJdOwogICAgICAgICAgICBib29sIG5leHRDb2xPdXRPZkJvdW5kcyA9CiAgICAgICAgICAgICAgKCR7bFtvLTFdfSArIDEpID49IG91dFNoYXBlWyR7b30gLSAxXTsKICAgICAgICAgICAgcmVzdWx0LnkgPSBuZXh0Q29sT3V0T2ZCb3VuZHMgPyAwLiA6IHJlc3VsdC55OwogICAgICAgICAgICByZXN1bHQueiA9IG5leHRSb3dPdXRPZkJvdW5kcyA/IDAuIDogcmVzdWx0Lno7CiAgICAgICAgICAgIHJlc3VsdC53ID0gbmV4dENvbE91dE9mQm91bmRzIHx8IG5leHRSb3dPdXRPZkJvdW5kcyA/IDAuIDogcmVzdWx0Lnc7CiAgICAgICAgICBgOmkrPWAKICAgICAgICAgICAgYm9vbCBuZXh0Um93T3V0T2ZCb3VuZHMgPQogICAgICAgICAgICAgICgke2xbby0yXX0gKyAxKSA+PSAke3RoaXMub3V0cHV0U2hhcGVbby0yXX07CiAgICAgICAgICAgIGJvb2wgbmV4dENvbE91dE9mQm91bmRzID0KICAgICAgICAgICAgICAoJHtsW28tMV19ICsgMSkgPj0gJHt0aGlzLm91dHB1dFNoYXBlW28tMV19OwogICAgICAgICAgICByZXN1bHQueSA9IG5leHRDb2xPdXRPZkJvdW5kcyA/IDAuIDogcmVzdWx0Lnk7CiAgICAgICAgICAgIHJlc3VsdC56ID0gbmV4dFJvd091dE9mQm91bmRzID8gMC4gOiByZXN1bHQuejsKICAgICAgICAgICAgcmVzdWx0LncgPSBuZXh0Q29sT3V0T2ZCb3VuZHMgfHwgbmV4dFJvd091dE9mQm91bmRzID8gMC4gOiByZXN1bHQudzsKICAgICAgICAgIGB9dGhpcy51c2VyQ29kZT1gCiAgICAgIHZlYzQgYmluYXJ5T3BlcmF0aW9uKHZlYzQgYSwgdmVjNCBiKSB7CiAgICAgICAgJHtlfQogICAgICB9CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgdmVjNCBhID0gZ2V0QUF0T3V0Q29vcmRzKCk7CiAgICAgICAgdmVjNCBiID0gZ2V0QkF0T3V0Q29vcmRzKCk7CgogICAgICAgIHZlYzQgcmVzdWx0ID0gYmluYXJ5T3BlcmF0aW9uKGEsIGIpOwogICAgICAgICR7aX0KCiAgICAgICAgc2V0T3V0cHV0KHJlc3VsdCk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE5zKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7eDpzfT1lO3JldHVybiB0LmluY1JlZihzLmRhdGFJZCkse2RhdGFJZDpzLmRhdGFJZCxzaGFwZTpzLnNoYXBlLGR0eXBlOnMuZHR5cGV9fWNvbnN0IEZRPXtrZXJuZWxOYW1lOnFsLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpOc307LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gJGkobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtyZWFsOnMsaW1hZzpyfT1lLG89dC5tYWtlVGVuc29ySW5mbyhzLnNoYXBlLCJjb21wbGV4NjQiKSxpPXQudGV4RGF0YS5nZXQoby5kYXRhSWQpLGE9TnMoe2lucHV0czp7eDpzfSxiYWNrZW5kOnR9KSxsPU5zKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0fSk7cmV0dXJuIGkuY29tcGxleFRlbnNvckluZm9zPXtyZWFsOmEsaW1hZzpsfSxvfWNvbnN0IExRPXtrZXJuZWxOYW1lOmFtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzokaX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgSUQ9InJldHVybiAoYSA8IDAuKSA/IGIgKiBhIDogYTsiLFREPWAKICB2ZWM0IGFMZXNzVGhhblplcm8gPSB2ZWM0KGxlc3NUaGFuKGEsIHZlYzQoMC4pKSk7CiAgcmV0dXJuIChhTGVzc1RoYW5aZXJvICogKGIgKiBhKSkgKyAoKHZlYzQoMS4wKSAtIGFMZXNzVGhhblplcm8pICogYSk7CmA7ZnVuY3Rpb24gUFEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7YWxwaGE6b309cyxpPXQubWFrZVRlbnNvckluZm8oW10sImZsb2F0MzIiLFNvKG8sImZsb2F0MzIiKSksYT1vZSgpLmdldEJvb2woIldFQkdMX1BBQ0tfQklOQVJZX09QRVJBVElPTlMiKT9uZXcgRnUoVEQsci5zaGFwZSxpLnNoYXBlKTpuZXcgeGEoSUQsci5zaGFwZSxpLnNoYXBlKSxsPXQucnVuV2ViR0xQcm9ncmFtKGEsW3IsaV0sImZsb2F0MzIiKTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhpKSxsfWNvbnN0IHpRPXtrZXJuZWxOYW1lOnZkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpQUX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRUQ9InJldHVybiAoYSA8IDAuKSA/IGIgKiBhIDogYTsiLFJEPWAKICB2ZWM0IGFMZXNzVGhhblplcm8gPSB2ZWM0KGxlc3NUaGFuKGEsIHZlYzQoMC4pKSk7CiAgcmV0dXJuIChhTGVzc1RoYW5aZXJvICogKGIgKiBhKSkgKyAoKHZlYzQoMS4wKSAtIGFMZXNzVGhhblplcm8pICogYSk7CmA7ZnVuY3Rpb24gTVEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHt4OnMsYWxwaGE6cn09ZSxvPW9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDS19CSU5BUllfT1BFUkFUSU9OUyIpP25ldyBGdShSRCxzLnNoYXBlLHIuc2hhcGUpOm5ldyB4YShFRCxzLnNoYXBlLHIuc2hhcGUpO3JldHVybiB0LnJ1bldlYkdMUHJvZ3JhbShvLFtzLHJdLCJmbG9hdDMyIil9Y29uc3QgQlE9e2tlcm5lbE5hbWU6QmQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOk1RfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBMdT0iaWYgKGlzbmFuKHgpKSByZXR1cm4geDsiO2Z1bmN0aW9uIGl0KHtvcFNuaXBwZXQ6bixwYWNrZWRPcFNuaXBwZXQ6ZSxjcHVLZXJuZWxJbXBsOnQsZHR5cGU6c30pe3JldHVybih7aW5wdXRzOnIsYmFja2VuZDpvfSk9Pntjb25zdHt4Oml9PXIsYT1vLGw9c3x8aS5kdHlwZTtpZihhLnNob3VsZEV4ZWN1dGVPbkNQVShbaV0pJiZ0IT1udWxsKXtjb25zdCBwPWEudGV4RGF0YS5nZXQoaS5kYXRhSWQpLGY9dChwLnZhbHVlcyxsKTtyZXR1cm4gYS5tYWtlVGVuc29ySW5mbyhpLnNoYXBlLGwsZil9Y29uc3QgYz1vZSgpLmdldEJvb2woIldFQkdMX1BBQ0tfVU5BUllfT1BFUkFUSU9OUyIpJiZlIT1udWxsO2xldCBoO3JldHVybiBjP2g9bmV3IGVpKGkuc2hhcGUsZSk6aD1uZXcgTXIoaS5zaGFwZSxuKSxhLnJ1bldlYkdMUHJvZ3JhbShoLFtpXSxsKX19ZnVuY3Rpb24gSW4oe29wU25pcHBldDpuLHBhY2tlZE9wU25pcHBldDplLGNoZWNrT3V0T2ZCb3VuZHM6dD0hMSxzdXBwb3J0c0NvbXBsZXg6cz0hMSxjcHVLZXJuZWxJbXBsOnIsZHR5cGU6b30pe3JldHVybih7aW5wdXRzOmksYmFja2VuZDphfSk9Pntjb25zdHthOmwsYjpjfT1pLGg9YTtpZihzJiZsLmR0eXBlPT09ImNvbXBsZXg2NCIpe2NvbnN0IHk9aC50ZXhEYXRhLmdldChsLmRhdGFJZCksdz1oLnRleERhdGEuZ2V0KGMuZGF0YUlkKSxbYix2XT1bW3kuY29tcGxleFRlbnNvckluZm9zLnJlYWwsdy5jb21wbGV4VGVuc29ySW5mb3MucmVhbF0sW3kuY29tcGxleFRlbnNvckluZm9zLmltYWcsdy5jb21wbGV4VGVuc29ySW5mb3MuaW1hZ11dLm1hcCgkPT57Y29uc3RbayxUXT0kLEQ9e2RhdGFJZDprLmRhdGFJZCxkdHlwZTprLmR0eXBlLHNoYXBlOmwuc2hhcGV9LEw9e2RhdGFJZDpULmRhdGFJZCxkdHlwZTpULmR0eXBlLHNoYXBlOmMuc2hhcGV9LHo9bmV3IHhhKG4sbC5zaGFwZSxjLnNoYXBlKTtyZXR1cm4gaC5ydW5XZWJHTFByb2dyYW0oeixbRCxMXSx0cyhrLmR0eXBlLFQuZHR5cGUpKX0pLFM9JGkoe2lucHV0czp7cmVhbDpiLGltYWc6dn0sYmFja2VuZDpofSk7cmV0dXJuIGguZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYiksaC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh2KSxTfWNvbnN0IHA9b3x8dHMobC5kdHlwZSxjLmR0eXBlKTtpZigobC5kdHlwZT09PSJzdHJpbmcifHxjLmR0eXBlPT09InN0cmluZyJ8fGguc2hvdWxkRXhlY3V0ZU9uQ1BVKFtsLGNdKSkmJnIhPW51bGwpe2NvbnN0IHk9aC50ZXhEYXRhLmdldChsLmRhdGFJZCkudmFsdWVzLHc9aC50ZXhEYXRhLmdldChjLmRhdGFJZCkudmFsdWVzLGI9bC5kdHlwZT09PSJzdHJpbmciP3dvKHkpOnksdj1sLmR0eXBlPT09InN0cmluZyI/d28odyk6dyxbUywkXT1yKGwuc2hhcGUsYy5zaGFwZSxiLHYscCksaz1oLm1ha2VUZW5zb3JJbmZvKCQscCksVD1oLnRleERhdGEuZ2V0KGsuZGF0YUlkKTtyZXR1cm4gVC52YWx1ZXM9UyxrfWNvbnN0IGY9b2UoKS5nZXRCb29sKCJXRUJHTF9QQUNLX0JJTkFSWV9PUEVSQVRJT05TIikmJmUhPW51bGw7bGV0IGc7cmV0dXJuIGY/Zz1uZXcgRnUoZSxsLnNoYXBlLGMuc2hhcGUsdCk6Zz1uZXcgeGEobixsLnNoYXBlLGMuc2hhcGUpLGgucnVuV2ViR0xQcm9ncmFtKGcsW2wsY10scCl9fWZ1bmN0aW9uIFljKG4sZT0hMSl7aWYobj09PSJsaW5lYXIiKXJldHVybiBlP3ZROmdRO2lmKG49PT0icmVsdSIpcmV0dXJuIGU/TlE6eFE7aWYobj09PSJlbHUiKXJldHVybiBlP1NROnlRO2lmKG49PT0icmVsdTYiKXJldHVybiBlP2tROmJRO2lmKG49PT0icHJlbHUiKXJldHVybiBlP1JEOkVEO2lmKG49PT0ibGVha3lyZWx1IilyZXR1cm4gZT9URDpJRDtpZihuPT09InNpZ21vaWQiKXJldHVybiBlP0NROndRO3Rocm93IG5ldyBFcnJvcihgQWN0aXZhdGlvbiAke259IGhhcyBub3QgYmVlbiBpbXBsZW1lbnRlZCBmb3IgdGhlIFdlYkdMIGJhY2tlbmQuYCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgRER7Y29uc3RydWN0b3IoZSx0LHMscj0hMSxvPSExLGk9ITEsYT1udWxsLGw9ITEsYz0hMSl7dGhpcy52YXJpYWJsZU5hbWVzPVsibWF0cml4QSIsIm1hdHJpeEIiXSx0aGlzLnBhY2tlZElucHV0cz0hMCx0aGlzLnBhY2tlZE91dHB1dD0hMCx0aGlzLm91dHB1dFNoYXBlPXMsdGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPUxuKHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoKTtjb25zdCBoPXI/ZVsxXTplWzJdLHA9TWF0aC5jZWlsKGgvMiksZj1yPyJpICogMiwgcmMueSI6InJjLnksIGkgKiAyIixnPW8/InJjLnosIGkgKiAyIjoiaSAqIDIsIHJjLnoiLHk9cj9bImEueHh5eSIsImEuenp3dyJdOlsiYS54eHp6IiwiYS55eXd3Il0sdz1vP1siYi54enh6IiwiYi55d3l3Il06WyJiLnh5eHkiLCJiLnp3enciXTtsZXQgYj0iIix2PSIiO2EmJihsP2I9YHZlYzQgYWN0aXZhdGlvbih2ZWM0IGEpIHsKICAgICAgICAgIHZlYzQgYiA9IGdldFByZWx1QWN0aXZhdGlvbldlaWdodHNBdE91dENvb3JkcygpOwogICAgICAgICAgJHthfQogICAgICAgIH1gOmM/Yj1gdmVjNCBhY3RpdmF0aW9uKHZlYzQgYSkgewogICAgICAgICAgdmVjNCBiID0gZ2V0TGVha3lyZWx1QWxwaGFBdE91dENvb3JkcygpOwogICAgICAgICAgJHthfQogICAgICAgIH1gOmI9YHZlYzQgYWN0aXZhdGlvbih2ZWM0IHgpIHsKICAgICAgICAgICR7YX0KICAgICAgICB9YCx2PSJyZXN1bHQgPSBhY3RpdmF0aW9uKHJlc3VsdCk7Iik7Y29uc3QgUz1pPyJyZXN1bHQgKz0gZ2V0Qmlhc0F0T3V0Q29vcmRzKCk7IjoiIjtpJiZ0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgiYmlhcyIpLGwmJnRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCJwcmVsdUFjdGl2YXRpb25XZWlnaHRzIiksYyYmdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goImxlYWt5cmVsdUFscGhhIik7bGV0ICQ9InJjLngiLGs9InJjLngiO2VbMF08dFswXT8kPWBpbW9kKHJjLngsICR7ZVswXX0pYDp0WzBdPGVbMF0mJihrPWBpbW9kKHJjLngsICR7dFswXX0pYCksdGhpcy51c2VyQ29kZT1gCiAgICAgICR7Yn0KICAgICAgLy8gRG9uJ3QgdXNlIHVuaWZvcm0gZm9yIHNoYXJlZERpbWVuc2lvblBhY2tlZCBmb3IgcGVyZm9ybWFuY2UuCiAgICAgIGNvbnN0IGZsb2F0IHNoYXJlZERpbWVuc2lvbiA9ICR7cH0uMDsKCiAgICAgIHZlYzQgZG90MngyQVJvd0JDb2woaXZlYzMgcmMpIHsKICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMCk7CiAgICAgICAgaW50IGJhdGNoQSA9ICR7JH07CiAgICAgICAgaW50IGJhdGNoQiA9ICR7a307CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAke3B9OyBpKyspIHsKICAgICAgICAgIHZlYzQgYSA9IGdldE1hdHJpeEEoYmF0Y2hBLCAke2Z9KTsKICAgICAgICAgIHZlYzQgYiA9IGdldE1hdHJpeEIoYmF0Y2hCLCAke2d9KTsKCiAgICAgICAgICAvLyBUaGVzZSBzd2l6emxlZCBwcm9kdWN0cyBuZWVkIHRvIGJlIHNlcGFyYXRlbHkgYWRkZWQuCiAgICAgICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS90ZW5zb3JmbG93L3RmanMvaXNzdWVzLzE3MzUKICAgICAgICAgIHJlc3VsdCArPSAoJHt5WzBdfSAqICR7d1swXX0pOwogICAgICAgICAgcmVzdWx0ICs9ICgke3lbMV19ICogJHt3WzFdfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMyByYyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIHZlYzQgcmVzdWx0ID0gZG90MngyQVJvd0JDb2wocmMpOwoKICAgICAgICAke1N9CgogICAgICAgICR7dn0KCiAgICAgICAgc2V0T3V0cHV0KHJlc3VsdCk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IExDPXtSRUFMOiJyZXR1cm4gYXJlYWwgKiBicmVhbCAtIGFpbWFnICogYmltYWc7IixJTUFHOiJyZXR1cm4gYXJlYWwgKiBiaW1hZyArIGFpbWFnICogYnJlYWw7In07Y2xhc3MgUEN7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudmFyaWFibGVOYW1lcz1bIkFSZWFsIiwiQUltYWciLCJCUmVhbCIsIkJJbWFnIl0sdGhpcy5vdXRwdXRTaGFwZT1IZSh0LHMpLHRoaXMudXNlckNvZGU9YAogICAgICBmbG9hdCBiaW5hcnlPcENvbXBsZXgoCiAgICAgICAgICBmbG9hdCBhcmVhbCwgZmxvYXQgYWltYWcsIGZsb2F0IGJyZWFsLCBmbG9hdCBiaW1hZykgewogICAgICAgICR7ZX0KICAgICAgfQoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGZsb2F0IGFyZWFsID0gZ2V0QVJlYWxBdE91dENvb3JkcygpOwogICAgICAgIGZsb2F0IGFpbWFnID0gZ2V0QUltYWdBdE91dENvb3JkcygpOwogICAgICAgIGZsb2F0IGJyZWFsID0gZ2V0QlJlYWxBdE91dENvb3JkcygpOwogICAgICAgIGZsb2F0IGJpbWFnID0gZ2V0QkltYWdBdE91dENvb3JkcygpOwogICAgICAgIHNldE91dHB1dChiaW5hcnlPcENvbXBsZXgoYXJlYWwsIGFpbWFnLCBicmVhbCwgYmltYWcpKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgekM9InJldHVybiBhICogYjsiO2Z1bmN0aW9uIG12KG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7YTpzLGI6cn09ZSxvPXRzKHMuZHR5cGUsci5kdHlwZSk7aWYocy5kdHlwZT09PSJjb21wbGV4NjQiKXtjb25zdCBhPXQudGV4RGF0YS5nZXQocy5kYXRhSWQpLGw9dC50ZXhEYXRhLmdldChyLmRhdGFJZCksYz1uZXcgUEMoTEMuUkVBTCxzLnNoYXBlLHIuc2hhcGUpLGg9bmV3IFBDKExDLklNQUcscy5zaGFwZSxyLnNoYXBlKSxwPVt7ZGF0YUlkOmEuY29tcGxleFRlbnNvckluZm9zLnJlYWwuZGF0YUlkLGR0eXBlOmEuY29tcGxleFRlbnNvckluZm9zLnJlYWwuZHR5cGUsc2hhcGU6cy5zaGFwZX0se2RhdGFJZDphLmNvbXBsZXhUZW5zb3JJbmZvcy5pbWFnLmRhdGFJZCxkdHlwZTphLmNvbXBsZXhUZW5zb3JJbmZvcy5pbWFnLmR0eXBlLHNoYXBlOnMuc2hhcGV9LHtkYXRhSWQ6bC5jb21wbGV4VGVuc29ySW5mb3MucmVhbC5kYXRhSWQsZHR5cGU6bC5jb21wbGV4VGVuc29ySW5mb3MucmVhbC5kdHlwZSxzaGFwZTpyLnNoYXBlfSx7ZGF0YUlkOmwuY29tcGxleFRlbnNvckluZm9zLmltYWcuZGF0YUlkLGR0eXBlOmwuY29tcGxleFRlbnNvckluZm9zLmltYWcuZHR5cGUsc2hhcGU6ci5zaGFwZX1dLGY9dC5ydW5XZWJHTFByb2dyYW0oYyxwLCJmbG9hdDMyIiksZz10LnJ1bldlYkdMUHJvZ3JhbShoLHAsImZsb2F0MzIiKSx5PSRpKHtpbnB1dHM6e3JlYWw6ZixpbWFnOmd9LGJhY2tlbmQ6dH0pO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGYpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZykseX1pZih0LnNob3VsZEV4ZWN1dGVPbkNQVShbcyxyXSkpe2NvbnN0IGE9dC50ZXhEYXRhLmdldChzLmRhdGFJZCksbD10LnRleERhdGEuZ2V0KHIuZGF0YUlkKSxbYyxoXT1NWShzLnNoYXBlLHIuc2hhcGUsYS52YWx1ZXMsbC52YWx1ZXMsbykscD10Lm1ha2VUZW5zb3JJbmZvKGgsbyksZj10LnRleERhdGEuZ2V0KHAuZGF0YUlkKTtyZXR1cm4gZi52YWx1ZXM9YyxwfWxldCBpO3JldHVybiBvZSgpLmdldEJvb2woIldFQkdMX1BBQ0tfQklOQVJZX09QRVJBVElPTlMiKT9pPW5ldyBGdSh6QyxzLnNoYXBlLHIuc2hhcGUpOmk9bmV3IHhhKHpDLHMuc2hhcGUsci5zaGFwZSksdC5ydW5XZWJHTFByb2dyYW0oaSxbcyxyXSxvKX1jb25zdCBWUT17a2VybmVsTmFtZTpudSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6bXZ9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFdRKG4sZSx0KXtjb25zdCBzPVtDbChuLnNoYXBlKSwuLi4kbChuLnNoYXBlKV0scj17ZHR5cGU6bi5kdHlwZSxzaGFwZTpzLGRhdGFJZDpuLmRhdGFJZH0sbz1bQ2woZSksLi4uJGwoZSldLGk9bmV3ICREKG8scyksYT0hMCxsPVtzXSxjPXQucnVuV2ViR0xQcm9ncmFtKGksW3JdLG4uZHR5cGUsbCxhKTtyZXR1cm57ZGF0YUlkOmMuZGF0YUlkLHNoYXBlOmUsZHR5cGU6Yy5kdHlwZX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQ2Uobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7c2hhcGU6b309cyxpPXQsYT1jZShyLnNoYXBlKSxsPVQxKG8sYSksYz1jZShsKTtBKGE9PT1jLCgpPT5gVGhlIG5ldyBzaGFwZSAoJHtsfSkgaGFzICR7Y30gZWxlbWVudHMgYW5kIHRoZSBvbGQgc2hhcGUgKCR7ci5zaGFwZX0pIGhhcyAke2F9IGVsZW1lbnRzLiBUaGUgbmV3IHNoYXBlIGFuZCBvbGQgc2hhcGUgbXVzdCBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiBlbGVtZW50cy5gKTtjb25zdCBoPWkudGV4RGF0YS5nZXQoci5kYXRhSWQpO3JldHVybiBoLmlzUGFja2VkJiYhS2Yoci5zaGFwZSxsKSYmIShoLnRleHR1cmUhPT1udWxsJiZLZihoLnNoYXBlLGwpKT9XUShyLGwsaSk6KGkuaW5jUmVmKHIuZGF0YUlkKSx7ZGF0YUlkOnIuZGF0YUlkLHNoYXBlOmwsZHR5cGU6ci5kdHlwZX0pfWNvbnN0IFVRPXtrZXJuZWxOYW1lOldkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpDZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgTUN7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4Il07Y29uc3R7d2luZG93U2l6ZTpzLGJhdGNoU2l6ZTpyLGluU2l6ZTpvLG91dFNpemU6aX09ZTt0aGlzLm91dHB1dFNoYXBlPVtyLGldO2NvbnN0IGE9TWF0aC5mbG9vcihzLzQpKjQsbD1zJTQ7bGV0IGM9InN1bVZhbHVlICs9IGRvdCh2YWx1ZXMsIG9uZXMpOyI7aWYodCE9bnVsbCl7Y29uc3QgcD0xL3Q7Yz1gc3VtVmFsdWUgKz0gZG90KHZhbHVlcyAqICR7cmEocCk/cC50b1ByZWNpc2lvbigyKTpwfSwgb25lcyk7YH1sZXQgaD0iIjtvJXM+MCYmKGg9YAogICAgICAgIGlmIChpbklkeCA8IDAgfHwgaW5JZHggPj0gJHtvfSkgewogICAgICAgICAgcmV0dXJuIDAuMDsKICAgICAgICB9CiAgICAgIGApLHRoaXMudXNlckNvZGU9YAogICAgICBjb25zdCB2ZWM0IG9uZXMgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIDEuMCk7CgogICAgICBmbG9hdCBnZXRWYWx1ZShpbnQgYmF0Y2gsIGludCBpbklkeCkgewogICAgICAgICR7aH0KICAgICAgICByZXR1cm4gZ2V0WChiYXRjaCwgaW5JZHgpOwogICAgICB9CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzIgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGJhdGNoID0gY29vcmRzWzBdOwogICAgICAgIGludCBvdXRJZHggPSBjb29yZHNbMV07CiAgICAgICAgaW50IGluT2Zmc2V0ID0gb3V0SWR4ICogJHtzfTsKCiAgICAgICAgZmxvYXQgc3VtVmFsdWUgPSAwLjA7CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgJHthfTsgaSArPSA0KSB7CiAgICAgICAgICBpbnQgaW5JZHggPSBpbk9mZnNldCArIGk7CiAgICAgICAgICB2ZWM0IHZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCksCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCArIDEpLAogICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgaW5JZHggKyAyKSwKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4ICsgMykKICAgICAgICAgICk7CgogICAgICAgICAgJHtjfQogICAgICAgIH0KCiAgICAgICAgaW50IGluSWR4ID0gaW5PZmZzZXQgKyAke2F9OwogICAgICAgIGlmICgke2w9PT0xfSkgewogICAgICAgICAgdmVjNCB2YWx1ZXMgPSB2ZWM0KGdldFZhbHVlKGJhdGNoLCBpbklkeCksIDAuMCwgMC4wLCAwLjApOwoKICAgICAgICAgICR7Y30KICAgICAgICB9IGVsc2UgaWYgKCR7bD09PTJ9KSB7CiAgICAgICAgICB2ZWM0IHZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCksCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCArIDEpLCAwLjAsIDAuMCk7CgogICAgICAgICAgJHtjfQogICAgICAgIH0gZWxzZSBpZiAoJHtsPT09M30pIHsKICAgICAgICAgIHZlYzQgdmFsdWVzID0gdmVjNCgKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4KSwKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4ICsgMSksCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCArIDIpLCAwLjApOwoKICAgICAgICAgICR7Y30KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KHN1bVZhbHVlKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgalF7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4Il07Y29uc3R7d2luZG93U2l6ZTpzLGJhdGNoU2l6ZTpyLGluU2l6ZTpvLG91dFNpemU6aX09ZTt0aGlzLm91dHB1dFNoYXBlPVtyLGldO2xldCBhPSIwLjAiLGw9IiI7dD09PSJwcm9kIj9hPSIxLjAiOnQ9PT0ibWluIj8oYT0iMS4wIC8gMWUtMjAiLGw9Im1pbiIpOnQ9PT0ibWF4IiYmKGE9Ii0xLjAgLyAxZS0yMCIsbD0ibWF4Iik7bGV0IGM9YCR7dH0oJHt0fSgke3R9KG1pbk1heFZhbHVlWzBdLCBtaW5NYXhWYWx1ZVsxXSksIG1pbk1heFZhbHVlWzJdKSwgbWluTWF4VmFsdWVbM10pYDt0PT09InN1bSI/Yz0ic3VtVmFsdWUiOnQ9PT0icHJvZCI/Yz0icHJvZFZhbHVlIjp0PT09ImFsbCI/Yz0iYWxsVmFsdWUiOnQ9PT0iYW55IiYmKGM9ImFueVZhbHVlIik7Y29uc3QgaD1NYXRoLmZsb29yKHMvNCkqNCxwPXMlNDtsZXQgZj1gCiAgICAgIGlmICgke3Q9PT0ic3VtIn0pIHsKICAgICAgICBzdW1WYWx1ZSArPSBkb3QodmFsdWVzLCBvbmVzKTsKICAgICAgfSBlbHNlIGlmICgke3Q9PT0icHJvZCJ9KSB7CiAgICAgICAgdmVjMiB0bXAgPSB2ZWMyKHZhbHVlc1swXSwgdmFsdWVzWzFdKSAqIHZlYzIodmFsdWVzWzJdLCB2YWx1ZXNbM10pOwogICAgICAgIHByb2RWYWx1ZSAqPSB0bXBbMF0gKiB0bXBbMV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWluTWF4VmFsdWUgPSAke2x9KHZhbHVlcywgbWluTWF4VmFsdWUpOwogICAgICAgIGlmICgke3Q9PT0ibWluIn0gfHwgJHt0PT09Im1heCJ9KSB7CiAgICAgICAgICBtaW5NYXhWYWx1ZSA9ICR7bH0odmFsdWVzLCBtaW5NYXhWYWx1ZSk7CiAgICAgICAgICBidmVjNCBpc05hTiA9IGlzbmFuKHZhbHVlcyk7CiAgICAgICAgICBpZiAoaXNOYU4uciB8fCBpc05hTi5nIHx8IGlzTmFOLmIgfHwgaXNOYU4uYSkgewogICAgICAgICAgICBtaW5NYXhWYWx1ZSA9IHZlYzQoTkFOKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIGAsZz0idmVjNCI7dD09PSJhbGwiPyhhPSIxLjAiLGY9YAogICAgICAgIGJvb2wgcmVkdWNlZEFsbFZhbHVlID0gYWxsKHZhbHVlcyk7CiAgICAgICAgZmxvYXQgZmxvYXRlZFJlZHVjZWRBbGxWYWx1ZSA9IGZsb2F0KHJlZHVjZWRBbGxWYWx1ZSk7CiAgICAgICAgYWxsVmFsdWUgPSBmbG9hdChhbGxWYWx1ZSA+PSAxLjAgJiYgZmxvYXRlZFJlZHVjZWRBbGxWYWx1ZSA+PSAxLjApOwogICAgICBgLGc9ImJ2ZWM0Iik6dD09PSJhbnkiJiYoYT0iMC4wIixmPWAKICAgICAgICBib29sIHJlZHVjZWRBbnlWYWx1ZSA9IGFueSh2YWx1ZXMpOwogICAgICAgIGZsb2F0IGZsb2F0ZWRSZWR1Y2VkQW55VmFsdWUgPSBmbG9hdChyZWR1Y2VkQW55VmFsdWUpOwogICAgICAgIGFueVZhbHVlID0gZmxvYXQoYW55VmFsdWUgPj0gMS4wIHx8IGZsb2F0ZWRSZWR1Y2VkQW55VmFsdWUgPj0gMS4wKTsKICAgICAgYCxnPSJidmVjNCIpO2xldCB5PSIiO28lcz4wJiYoeT1gCiAgICAgICAgaWYgKGluSWR4IDwgMCB8fCBpbklkeCA+PSAke299KSB7CiAgICAgICAgICByZXR1cm4gaW5pdGlhbGl6YXRpb25WYWx1ZTsKICAgICAgICB9CiAgICAgIGApLHRoaXMudXNlckNvZGU9YAogICAgICBjb25zdCBmbG9hdCBpbml0aWFsaXphdGlvblZhbHVlID0gJHthfTsKICAgICAgY29uc3QgdmVjNCBvbmVzID0gdmVjNCgxLjAsIDEuMCwgMS4wLCAxLjApOwoKICAgICAgZmxvYXQgZ2V0VmFsdWUoaW50IGJhdGNoLCBpbnQgaW5JZHgpIHsKICAgICAgICAke3l9CiAgICAgICAgcmV0dXJuIGdldFgoYmF0Y2gsIGluSWR4KTsKICAgICAgfQoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWMyIGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiYXRjaCA9IGNvb3Jkc1swXTsKICAgICAgICBpbnQgb3V0SWR4ID0gY29vcmRzWzFdOwogICAgICAgIGludCBpbk9mZnNldCA9IG91dElkeCAqICR7c307CgogICAgICAgIHZlYzQgbWluTWF4VmFsdWUgPSB2ZWM0KCR7YX0pOwogICAgICAgIGZsb2F0IHByb2RWYWx1ZSA9IDEuMDsKICAgICAgICBmbG9hdCBzdW1WYWx1ZSA9IDAuMDsKICAgICAgICBmbG9hdCBhbGxWYWx1ZSA9IDEuMDsKICAgICAgICBmbG9hdCBhbnlWYWx1ZSA9IDAuMDsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAke2h9OyBpICs9IDQpIHsKICAgICAgICAgIGludCBpbklkeCA9IGluT2Zmc2V0ICsgaTsKICAgICAgICAgICR7Z30gdmFsdWVzID0gJHtnfSgKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4KSwKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4ICsgMSksCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCArIDIpLAogICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgaW5JZHggKyAzKQogICAgICAgICAgKTsKCiAgICAgICAgICAke2Z9CiAgICAgICAgfQoKICAgICAgICBpbnQgaW5JZHggPSBpbk9mZnNldCArICR7aH07CiAgICAgICAgaWYgKCR7cD09PTF9KSB7CiAgICAgICAgICAke2d9IHZhbHVlcyA9ICR7Z30oCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCksCiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUsCiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUsCiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUKICAgICAgICAgICk7CgogICAgICAgICAgJHtmfQogICAgICAgIH0gZWxzZSBpZiAoJHtwPT09Mn0pIHsKICAgICAgICAgICR7Z30gdmFsdWVzID0gJHtnfSgKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4KSwKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4ICsgMSksCiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUsCiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUKICAgICAgICAgICk7CgogICAgICAgICAgJHtmfQogICAgICAgIH0gZWxzZSBpZiAoJHtwPT09M30pIHsKICAgICAgICAgICR7Z30gdmFsdWVzID0gJHtnfSgKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4KSwKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4ICsgMSksCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCArIDIpLAogICAgICAgICAgICBpbml0aWFsaXphdGlvblZhbHVlCiAgICAgICAgICApOwoKICAgICAgICAgICR7Zn0KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KCR7Y30pOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBHUShuKXtjb25zdCBlPVtdO2Zvcig7ZS5sZW5ndGg9PT0wfHxlW2UubGVuZ3RoLTFdLm91dFNpemUhPT0xOyl7Y29uc3QgdD1lLmxlbmd0aD9lW2UubGVuZ3RoLTFdLm91dFNpemU6blsxXSxzPXFnKHQpO2UucHVzaCh7aW5TaXplOnQsd2luZG93U2l6ZTpzLG91dFNpemU6TWF0aC5jZWlsKHQvcyl9KX1yZXR1cm4gZX1mdW5jdGlvbiBBYShuLGUsdCxzKXtjb25zdCByPUdRKG4uc2hhcGUpO2xldCBvPW47Zm9yKGxldCBpPTA7aTxyLmxlbmd0aDtpKyspe2NvbnN0e2luU2l6ZTphLHdpbmRvd1NpemU6bCxvdXRTaXplOmN9PXJbaV07bGV0IGgscDt0PT09Im1lYW4iP2g9aT09PTA/bmV3IE1DKHt3aW5kb3dTaXplOmwsaW5TaXplOmEsYmF0Y2hTaXplOm4uc2hhcGVbMF0sb3V0U2l6ZTpjfSxhKTpuZXcgTUMoe3dpbmRvd1NpemU6bCxpblNpemU6YSxiYXRjaFNpemU6bi5zaGFwZVswXSxvdXRTaXplOmN9KTpoPW5ldyBqUSh7d2luZG93U2l6ZTpsLGluU2l6ZTphLGJhdGNoU2l6ZTpuLnNoYXBlWzBdLG91dFNpemU6Y30sdCkscD1vLG89cy5ydW5XZWJHTFByb2dyYW0oaCxbb10sZSkscC5kYXRhSWQhPT1uLmRhdGFJZCYmcy5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhwKX1yZXR1cm4gb30vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBIUXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudmFyaWFibGVOYW1lcz1bIkEiXTtjb25zdCBzPW5ldyBBcnJheShlLmxlbmd0aCk7Zm9yKGxldCBpPTA7aTxzLmxlbmd0aDtpKyspc1tpXT1lW3RbaV1dO3RoaXMub3V0cHV0U2hhcGU9cyx0aGlzLnJhbms9cy5sZW5ndGg7Y29uc3Qgcj14dCh0aGlzLnJhbmspLG89cVEodCk7dGhpcy51c2VyQ29kZT1gCiAgICB2b2lkIG1haW4oKSB7CiAgICAgICR7cn0gcmVzUkMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgc2V0T3V0cHV0KGdldEEoJHtvfSkpOwogICAgfQogICAgYH19ZnVuY3Rpb24gcVEobil7Y29uc3QgZT1uLmxlbmd0aDtpZihlPjYpdGhyb3cgRXJyb3IoYFRyYW5zcG9zZSBmb3IgcmFuayAke2V9IGlzIG5vdCB5ZXQgc3VwcG9ydGVkYCk7Y29uc3QgdD1bInJlc1JDLngiLCJyZXNSQy55IiwicmVzUkMueiIsInJlc1JDLnciLCJyZXNSQy51IiwicmVzUkMudiJdLHM9bmV3IEFycmF5KGUpO2ZvcihsZXQgcj0wO3I8bi5sZW5ndGg7cisrKXNbbltyXV09dFtyXTtyZXR1cm4gcy5qb2luKCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgS1F7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITA7Y29uc3Qgcz1uZXcgQXJyYXkoZS5sZW5ndGgpO2ZvcihsZXQgaD0wO2g8cy5sZW5ndGg7aCsrKXNbaF09ZVt0W2hdXTtpZih0aGlzLm91dHB1dFNoYXBlPXMsdGhpcy5yYW5rPXMubGVuZ3RoLHRoaXMucmFuaz42KXRocm93IEVycm9yKGBQYWNrZWQgdHJhbnNwb3NlIGZvciByYW5rICR7dGhpcy5yYW5rfSBpcyBub3QgeWV0IHN1cHBvcnRlZC5gKTtjb25zdCByPXh0KHRoaXMucmFuayksbz1DRCgicmMiLHRoaXMucmFuayksaT1uZXcgQXJyYXkodGhpcy5yYW5rKTtmb3IobGV0IGg9MDtoPHQubGVuZ3RoO2grKylpW3RbaF1dPW9baF07Y29uc3QgYT1gdmVjMigke2kuc2xpY2UoLTIpLmpvaW4oKX0pYCxsPWArKyR7b1t0aGlzLnJhbmstMV19IDwgJHtzW3RoaXMucmFuay0xXX1gLGM9YGdldENoYW5uZWwoZ2V0QSgke2kuam9pbigpfSksICR7YX0pYDt0aGlzLnVzZXJDb2RlPWAKICAgIHZvaWQgbWFpbigpIHsKICAgICAgJHtyfSByYyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMC4pOwogICAgICByZXN1bHRbMF0gPSAke2N9OwogICAgICBpZigke2x9KSB7CiAgICAgICAgcmVzdWx0WzFdID0gJHtjfTsKICAgICAgfQogICAgICAtLSR7b1t0aGlzLnJhbmstMV19OwogICAgICBpZigrKyR7b1t0aGlzLnJhbmstMl19IDwgJHtzW3RoaXMucmFuay0yXX0pIHsKICAgICAgICByZXN1bHRbMl0gPSAke2N9OwogICAgICAgIGlmKCR7bH0pIHsKICAgICAgICAgIHJlc3VsdFszXSA9ICR7Y307CiAgICAgICAgfQogICAgICB9CiAgICAgIHNldE91dHB1dChyZXN1bHQpOwogICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gY3kobixlLHQpe2NvbnN0IHM9b2UoKS5nZXRCb29sKCJXRUJHTF9QQUNLX0FSUkFZX09QRVJBVElPTlMiKT9uZXcgS1Eobi5zaGFwZSxlKTpuZXcgSFEobi5zaGFwZSxlKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0ocyxbbl0sbi5kdHlwZSl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gWFEobixlLHQscyl7Y29uc3Qgcj1lLG89bi5zaGFwZS5sZW5ndGgsaT1RZShyLG4uc2hhcGUpO2xldCBhPWk7Y29uc3QgbD1MdChhLG8pLGM9bCE9bnVsbDtsZXQgaD1uO2MmJihoPWN5KG4sbCxzKSxhPWp0KGEubGVuZ3RoLG8pKSxDbigic3VtIixhLG8pO2NvbnN0W3AsZl09bW4oaC5zaGFwZSxhKTtsZXQgZz1wO3QmJihnPVV0KHAsaSkpO2NvbnN0IHk9Y2UoZiksYj1jZShuLnNoYXBlKS95LHY9Q2Uoe2lucHV0czp7eDpofSxhdHRyczp7c2hhcGU6W2IseV19LGJhY2tlbmQ6c30pLFM9YWcobi5kdHlwZSksJD1BYSh2LFMsInN1bSIscyksaz1DZSh7aW5wdXRzOnt4OiR9LGF0dHJzOntzaGFwZTpnfSxiYWNrZW5kOnN9KTtyZXR1cm4gcy5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh2KSxzLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKCQpLGMmJnMuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaCksa30vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBkeShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtheGlzOm8sa2VlcERpbXM6aX09cztyZXR1cm4gWFEocixvLGksdCl9Y29uc3QgWVE9e2tlcm5lbE5hbWU6S2QsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmR5fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBIbihuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtwZXJtOm99PXMsaT10LGE9ci5zaGFwZS5sZW5ndGgsbD1uZXcgQXJyYXkoYSk7Zm9yKGxldCBoPTA7aDxsLmxlbmd0aDtoKyspbFtoXT1yLnNoYXBlW29baF1dO2xldCBjO2lmKGkuc2hvdWxkRXhlY3V0ZU9uQ1BVKFtyXSkpe2NvbnN0IHA9aS50ZXhEYXRhLmdldChyLmRhdGFJZCkudmFsdWVzLGY9cHYocCxyLnNoYXBlLHIuZHR5cGUsbyxsKTtjPWkubWFrZVRlbnNvckluZm8obCxyLmR0eXBlKTtjb25zdCBnPWkudGV4RGF0YS5nZXQoYy5kYXRhSWQpO2cudmFsdWVzPWZ9ZWxzZSBjPWN5KHIsbyxpKTtyZXR1cm4gY31jb25zdCBRUT17a2VybmVsTmFtZTplYSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6SG59Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEFEPTFlMztmdW5jdGlvbiBYZih7YTpuLGI6ZSx0cmFuc3Bvc2VBOnQsdHJhbnNwb3NlQjpzLGJhY2tlbmQ6cixiaWFzOm89bnVsbCxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOmk9bnVsbCxsZWFreXJlbHVBbHBoYTphPTAsYWN0aXZhdGlvbjpsPW51bGx9KXtjb25zdCBjPW4uc2hhcGUubGVuZ3RoLGg9ZS5zaGFwZS5sZW5ndGgscD10P24uc2hhcGVbYy0yXTpuLnNoYXBlW2MtMV0sZj1zP2Uuc2hhcGVbaC0xXTplLnNoYXBlW2gtMl0sZz10P24uc2hhcGVbYy0xXTpuLnNoYXBlW2MtMl0seT1zP2Uuc2hhcGVbaC0yXTplLnNoYXBlW2gtMV0sdz1uLnNoYXBlLnNsaWNlKDAsLTIpLGI9ZS5zaGFwZS5zbGljZSgwLC0yKSx2PWNlKHcpLFM9Y2UoYiksaz1IZShuLnNoYXBlLnNsaWNlKDAsLTIpLGUuc2hhcGUuc2xpY2UoMCwtMikpLmNvbmNhdChbZyx5XSk7QShwPT09ZiwoKT0+YEVycm9yIGluIG1hdE11bDogaW5uZXIgc2hhcGVzICgke3B9KSBhbmQgKCR7Zn0pIG9mIFRlbnNvcnMgd2l0aCBzaGFwZXMgJHtuLnNoYXBlfSBhbmQgJHtlLnNoYXBlfSBhbmQgdHJhbnNwb3NlQT0ke3R9IGFuZCB0cmFuc3Bvc2VCPSR7c30gbXVzdCBtYXRjaC5gKTtjb25zdCBUPXQ/W3YscCxnXTpbdixnLHBdLEQ9cz9bUyx5LGZdOltTLGYseV0sTD1DZSh7aW5wdXRzOnt4Om59LGJhY2tlbmQ6cixhdHRyczp7c2hhcGU6VH19KSx6PUNlKHtpbnB1dHM6e3g6ZX0sYmFja2VuZDpyLGF0dHJzOntzaGFwZTpEfX0pLEY9W0wsel0sXz1NYXRoLm1heCh2LFMpLEU9dD9MLnNoYXBlWzFdOkwuc2hhcGVbMl0sTT1vIT1udWxsLFU9aSE9bnVsbCxZPWw9PT0ibGVha3lyZWx1IixRPWwhPW51bGw/WWMobCwhMCk6bnVsbCxuZT1NfHxVfHxZfHxRIT1udWxsO2xldCBzZTtpZigoZz09PTF8fHk9PT0xKSYmRT5BRCYmbmU9PT0hMSl7bGV0IEs9TCxxPXo7dCYmKEs9SG4oe2lucHV0czp7eDpMfSxiYWNrZW5kOnIsYXR0cnM6e3Blcm06WzAsMiwxXX19KSxGLnB1c2goSykpLHMmJihxPUhuKHtpbnB1dHM6e3g6en0sYmFja2VuZDpyLGF0dHJzOntwZXJtOlswLDIsMV19fSksRi5wdXNoKHEpKTtjb25zdCBCPXkhPT0xLEg9eT09PTE7bGV0IGllPUs7QiYmKGllPUNlKHtpbnB1dHM6e3g6S30sYmFja2VuZDpyLGF0dHJzOntzaGFwZTpbXyxFLDFdfX0pLEYucHVzaChpZSkpO2NvbnN0IHBlPXk9PT0xPzI6MTtsZXQgZGU9cTtIJiYoZGU9Q2Uoe2lucHV0czp7eDpxfSxiYWNrZW5kOnIsYXR0cnM6e3NoYXBlOltfLDEsRV19fSksRi5wdXNoKGRlKSk7Y29uc3QgZmU9bXYoe2lucHV0czp7YTppZSxiOmRlfSxiYWNrZW5kOnJ9KTtzZT1keSh7aW5wdXRzOnt4OmZlfSxiYWNrZW5kOnIsYXR0cnM6e2F4aXM6cGUsa2VlcERpbXM6ITB9fSksRi5wdXNoKGZlKX1lbHNle2NvbnN0IEs9dHMobi5kdHlwZSxlLmR0eXBlKSxxPW5ldyBERChULEQsW18sZyx5XSx0LHMsTSxRLFUsWSksQj1bTCx6XTtpZihvIT1udWxsJiZCLnB1c2gobyksVSYmQi5wdXNoKGkpLFkpe2NvbnN0IEg9ci5tYWtlVGVuc29ySW5mbyhbXSwiZmxvYXQzMiIsU28oYSwiZmxvYXQzMiIpKTtCLnB1c2goSCksRi5wdXNoKEgpfXNlPXIucnVuV2ViR0xQcm9ncmFtKHEsQixLKX1jb25zdCBWPUNlKHtpbnB1dHM6e3g6c2V9LGJhY2tlbmQ6cixhdHRyczp7c2hhcGU6a319KTtGLnB1c2goc2UpO2Zvcihjb25zdCBLIG9mIEYpci5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhLKTtyZXR1cm4gVn0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFpRKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHthOnIsYjpvLGJpYXM6aSxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOmF9PWUse3RyYW5zcG9zZUE6bCx0cmFuc3Bvc2VCOmMsYWN0aXZhdGlvbjpoLGxlYWt5cmVsdUFscGhhOnB9PXM7cmV0dXJuIFhmKHthOnIsYjpvLHRyYW5zcG9zZUE6bCx0cmFuc3Bvc2VCOmMsYmFja2VuZDp0LGJpYXM6aSxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOmEsbGVha3lyZWx1QWxwaGE6cCxhY3RpdmF0aW9uOmh9KX1jb25zdCBKUT17a2VybmVsTmFtZTpPYyxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6WlF9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEJDPSJyZXR1cm4gYWJzKHgpOyI7ZnVuY3Rpb24gZVoobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHt4OnN9PWU7aWYodC5zaG91bGRFeGVjdXRlT25DUFUoW3NdKSYmcy5kdHlwZSE9PSJjb21wbGV4NjQiKXtjb25zdCBvPXQudGV4RGF0YS5nZXQocy5kYXRhSWQpLGk9TkQoby52YWx1ZXMpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKHMuc2hhcGUscy5kdHlwZSxpKX1sZXQgcjtyZXR1cm4gb2UoKS5nZXRCb29sKCJXRUJHTF9QQUNLX1VOQVJZX09QRVJBVElPTlMiKT9yPW5ldyBlaShzLnNoYXBlLEJDKTpyPW5ldyBNcihzLnNoYXBlLEJDKSx0LnJ1bldlYkdMUHJvZ3JhbShyLFtzXSxzLmR0eXBlKX1jb25zdCB0Wj17a2VybmVsTmFtZTpKYyxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6ZVp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IG5aPXJyK2AKICBpZiAoYWJzKHgpID4gMS4pIHsKICAgIHJldHVybiBOQU47CiAgfQogIHJldHVybiBhY29zKHgpOwpgLHNaPWl0KHtvcFNuaXBwZXQ6blp9KSxyWj17a2VybmVsTmFtZTpJbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6c1p9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IG9aPXJyK2AKICBpZiAoeCA8IDEuMCkgcmV0dXJuIE5BTjsKcmV0dXJuIGxvZyh4ICsgc3FydCh4ICogeCAtIDEuMCkpO2AsaVo9aXQoe29wU25pcHBldDpvWn0pLGFaPXtrZXJuZWxOYW1lOlRsLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzppWn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgVkM9InJldHVybiBhICsgYjsiLGxaPUluKHtvcFNuaXBwZXQ6VkMscGFja2VkT3BTbmlwcGV0OlZDLHN1cHBvcnRzQ29tcGxleDohMCxjcHVLZXJuZWxJbXBsOnhZfSksdVo9e2tlcm5lbE5hbWU6U2EsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmxafTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBjWntjb25zdHJ1Y3RvcihlLHQpe3RoaXMub3V0cHV0U2hhcGU9W10sdGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMudmFyaWFibGVOYW1lcz10Lm1hcCgobyxpKT0+YFQke2l9YCk7Y29uc3Qgcz1bXTt0aGlzLnZhcmlhYmxlTmFtZXMuZm9yRWFjaChvPT57cy5wdXNoKGBmbG9hdCB2JHtvfSA9IGdldCR7b31BdE91dENvb3JkcygpO2ApfSk7Y29uc3Qgcj10aGlzLnZhcmlhYmxlTmFtZXMubWFwKG89PmB2JHtvfWApLmpvaW4oIiArICIpO3RoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgJHtzLmpvaW4oYAogICAgICAgIGApfQoKICAgICAgICBmbG9hdCByZXN1bHQgPSAke3J9OwogICAgICAgIHNldE91dHB1dChyZXN1bHQpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBkWntjb25zdHJ1Y3RvcihlLHQpe3RoaXMub3V0cHV0U2hhcGU9W10sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITAsdGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMudmFyaWFibGVOYW1lcz10Lm1hcCgobyxpKT0+YFQke2l9YCk7Y29uc3Qgcz1bXTt0aGlzLnZhcmlhYmxlTmFtZXMuZm9yRWFjaChvPT57cy5wdXNoKGB2ZWM0IHYke299ID0gZ2V0JHtvfUF0T3V0Q29vcmRzKCk7YCl9KTtjb25zdCByPXRoaXMudmFyaWFibGVOYW1lcy5tYXAobz0+YHYke299YCkuam9pbigiICsgIik7dGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAke3Muam9pbihgCiAgICAgICAgYCl9CgogICAgICAgIHZlYzQgcmVzdWx0ID0gJHtyfTsKICAgICAgICBzZXRPdXRwdXQocmVzdWx0KTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdmYobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHM9ZTtpZihzLmxlbmd0aD09PTEpcmV0dXJuIE5zKHtpbnB1dHM6e3g6c1swXX0sYmFja2VuZDp0fSk7aWYocy5sZW5ndGg+b2UoKS5nZXROdW1iZXIoIldFQkdMX01BWF9URVhUVVJFU19JTl9TSEFERVIiKSl7Y29uc3QgbD1NYXRoLmZsb29yKHMubGVuZ3RoLzIpLGM9dmYoe2lucHV0czpzLnNsaWNlKDAsbCksYmFja2VuZDp0fSksaD12Zih7aW5wdXRzOnMuc2xpY2UobCksYmFja2VuZDp0fSk7cmV0dXJuIHZmKHtpbnB1dHM6W2MsaF0sYmFja2VuZDp0fSl9Y29uc3Qgcj1zLm1hcChsPT5sLmR0eXBlKS5yZWR1Y2UoKGwsYyk9PnRzKGwsYykpLG89cy5tYXAobD0+bC5zaGFwZSksYT1vZSgpLmdldEJvb2woIldFQkdMX1BBQ0siKT9uZXcgZFooc1swXS5zaGFwZSxvKTpuZXcgY1ooc1swXS5zaGFwZSxvKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oYSxzLHIpfWNvbnN0IGhaPXtrZXJuZWxOYW1lOmVkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzp2Zn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcFoobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7YXhpczpvLGtlZXBEaW1zOml9PXMsYT1yLnNoYXBlLmxlbmd0aCxsPVFlKG8sci5zaGFwZSk7bGV0IGM9bDtjb25zdCBoPUx0KGMsYSk7bGV0IHA9cjtoIT1udWxsJiYocD1Ibih7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTpofX0pLGM9anQoYy5sZW5ndGgsYSkpLENuKCJhbGwiLGMsYSk7Y29uc3RbZixnXT1tbihwLnNoYXBlLGMpLHk9Y2UoZyksdz1DZSh7aW5wdXRzOnt4OnB9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6Wy0xLHldfX0pLGI9QWEodyx3LmR0eXBlLCJhbGwiLHQpO2xldCB2O2lmKGkpe2NvbnN0IFM9VXQoZixsKTt2PUNlKHtpbnB1dHM6e3g6Yn0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpTfX0pfWVsc2Ugdj1DZSh7aW5wdXRzOnt4OmJ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6Zn19KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh3KSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGIpLGghPW51bGwmJnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8ocCksdn1jb25zdCBmWj17a2VybmVsTmFtZTp0bSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6cFp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIG1aKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2F4aXM6byxrZWVwRGltczppfT1zLGE9ci5zaGFwZS5sZW5ndGgsbD1RZShvLHIuc2hhcGUpO2xldCBjPWw7Y29uc3QgaD1MdChjLGEpO2xldCBwPXI7aCE9bnVsbCYmKHA9SG4oe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e3Blcm06aH19KSxjPWp0KGMubGVuZ3RoLGEpKSxDbigiYW55IixjLGEpO2NvbnN0W2YsZ109bW4ocC5zaGFwZSxjKSx5PWNlKGcpLHc9Q2Uoe2lucHV0czp7eDpwfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOlstMSx5XX19KSxiPUFhKHcsdy5kdHlwZSwiYW55Iix0KTtsZXQgdjtpZihpKXtjb25zdCBTPVV0KGYsbCk7dj1DZSh7aW5wdXRzOnt4OmJ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6U319KX1lbHNlIHY9Q2Uoe2lucHV0czp7eDpifSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmZ9fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odyksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhiKSxoIT1udWxsJiZ0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHApLHZ9Y29uc3QgZ1o9e2tlcm5lbE5hbWU6bm0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOm1afTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyB5Wntjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy52YXJpYWJsZU5hbWVzPVsiQSJdO2NvbnN0e3dpbmRvd1NpemU6cixiYXRjaFNpemU6byxvdXRTaXplOml9PWU7c3x8dGhpcy52YXJpYWJsZU5hbWVzLnB1c2goImJlc3RJbmRpY2VzQSIpLHRoaXMub3V0cHV0U2hhcGU9W28saV07Y29uc3QgYT10PT09Im1heCI/Ij4iOiI8IixsPXM/ImluT2Zmc2V0ICsgaTsiOiJyb3VuZChnZXRCZXN0SW5kaWNlc0EoYmF0Y2gsIGluT2Zmc2V0ICsgaSkpOyI7dGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMiBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYmF0Y2ggPSBjb29yZHNbMF07CiAgICAgICAgaW50IG91dElkeCA9IGNvb3Jkc1sxXTsKICAgICAgICBpbnQgaW5PZmZzZXQgPSBvdXRJZHggKiAke3J9OwoKICAgICAgICBpbnQgYmVzdEluZGV4ID0gaW5PZmZzZXQ7CiAgICAgICAgZmxvYXQgYmVzdFZhbHVlID0gZ2V0QShiYXRjaCwgYmVzdEluZGV4KTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAke3J9OyBpKyspIHsKICAgICAgICAgIGludCBpbklkeCA9ICR7bH07CiAgICAgICAgICBmbG9hdCBjYW5kaWRhdGUgPSBnZXRBKGJhdGNoLCBpbklkeCk7CiAgICAgICAgICBpZiAoY2FuZGlkYXRlICR7YX0gYmVzdFZhbHVlKSB7CiAgICAgICAgICAgIGJlc3RWYWx1ZSA9IGNhbmRpZGF0ZTsKICAgICAgICAgICAgYmVzdEluZGV4ID0gaW5JZHg7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNldE91dHB1dChmbG9hdChiZXN0SW5kZXgpKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgeFp7Y29uc3RydWN0b3IoZSx0LHMscil7dGhpcy52YXJpYWJsZU5hbWVzPVsiQSJdLHRoaXMucGFja2VkSW5wdXRzPSEwLHRoaXMucGFja2VkT3V0cHV0PSEwLEEoZS5sZW5ndGg+MiwoKT0+YFBhY2tlZCBhcmcke3MuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKX0gc3VwcG9ydHMgb25seSBpbnB1dHMgd2l0aCByYW5rIGFib3ZlIDIuYCk7Y29uc3Qgbz1lW2UubGVuZ3RoLTFdLGk9TWF0aC5jZWlsKG8vdCk7dGhpcy5vdXRwdXRTaGFwZT1lLnNsaWNlKDAsLTEpLGk+MSYmdGhpcy5vdXRwdXRTaGFwZS5wdXNoKGkpLHJ8fHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCJiZXN0SW5kaWNlc0EiKTtjb25zdCBhPXRoaXMub3V0cHV0U2hhcGUsbD1hLmxlbmd0aCxjPXh0KGwpLGg9R24oImNvb3JkcyIsbCk7bGV0IHAsZjtpZihpPT09MSl7Zj1sKzE7Y29uc3Qgej14dChmKTtwPWAKICAgICAgICAke3p9IHNvdXJjZUxvY1IgPSAke3p9KCR7aC5qb2luKCl9LCAwKTsKICAgICAgICArKyR7aFtsLTFdfTsKICAgICAgICAke3p9IHNvdXJjZUxvY0cgPSAke3p9KCR7aC5qb2luKCl9LCAwKTsKICAgICAgICArKyR7aFtsLTJdfTsKICAgICAgICAke3p9IHNvdXJjZUxvY0EgPSAke3p9KCR7aC5qb2luKCl9LCAwKTsKICAgICAgICAtLSR7aFtsLTFdfTsKICAgICAgICAke3p9IHNvdXJjZUxvY0IgPSAke3p9KCR7aC5qb2luKCl9LCAwKTsKICAgICAgICAtLSR7aFtsLTJdfTtgfWVsc2UgZj1sLHA9YAogICAgICAgICR7Y30gc291cmNlTG9jUiA9IGNvb3JkczsKICAgICAgICArKyR7aFtsLTFdfTsKICAgICAgICAke2N9IHNvdXJjZUxvY0cgPSBjb29yZHM7CiAgICAgICAgKyske2hbbC0yXX07CiAgICAgICAgJHtjfSBzb3VyY2VMb2NBID0gY29vcmRzOwogICAgICAgIC0tJHtoW2wtMV19OwogICAgICAgICR7Y30gc291cmNlTG9jQiA9IGNvb3JkczsKICAgICAgICAtLSR7aFtsLTJdfTtgO2NvbnN0IGc9WyJ4IiwieSIsInoiLCJ3IiwidSIsInYiXS5zbGljZSgwLGYpLHk9Ii4iK2dbZi0xXSx3PWcubWFwKHo9PiJpbnQgIit6KSxiPUduKCJzb3VyY2VMb2NSIixmLTEpLmNvbmNhdCgiaW5JZHguciIpLHY9R24oInNvdXJjZUxvY0ciLGYtMSkuY29uY2F0KCJpbklkeC5nIiksUz1Hbigic291cmNlTG9jQiIsZi0xKS5jb25jYXQoImluSWR4LmIiKSwkPUduKCJzb3VyY2VMb2NBIixmLTEpLmNvbmNhdCgiaW5JZHguYSIpLGs9cz09PSJtYXgiPyJncmVhdGVyVGhhbiI6Imxlc3NUaGFuIixUPXI/IiI6YAogICAgICAgICAgaW5JZHggPSByb3VuZCh2ZWM0KGdldEJlc3RJbmRpY2VzQUNoYW5uZWwoJHtiLmpvaW4oKX0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEJlc3RJbmRpY2VzQUNoYW5uZWwoJHt2LmpvaW4oKX0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEJlc3RJbmRpY2VzQUNoYW5uZWwoJHtTLmpvaW4oKX0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEJlc3RJbmRpY2VzQUNoYW5uZWwoJHskLmpvaW4oKX0pKSk7YCxEPWB2ZWM0KAogICAgICAgICAgICBnZXRBQ2hhbm5lbCgke2Iuam9pbigpfSksCiAgICAgICAgICAgIGhhc05leHRDb2wgPyBnZXRBQ2hhbm5lbCgke3Yuam9pbigpfSkgOiAwLiwKICAgICAgICAgICAgaGFzTmV4dFJvdyA/IGdldEFDaGFubmVsKCR7Uy5qb2luKCl9KSA6IDAuLAogICAgICAgICAgICBoYXNOZXh0Um93ICYmIGhhc05leHRDb2wgPyBnZXRBQ2hhbm5lbCgkeyQuam9pbigpfSkgOiAwLilgLEw9cj8iIjpgCiAgICAgIGZsb2F0IGdldEJlc3RJbmRpY2VzQUNoYW5uZWwoJHt3LmpvaW4oKX0pIHsKICAgICAgICByZXR1cm4gZ2V0Q2hhbm5lbChnZXRCZXN0SW5kaWNlc0EoJHtnLmpvaW4oKX0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyKCR7Zy5zbGljZSgtMikuam9pbigpfSkpOwogICAgICB9YDt0aGlzLnVzZXJDb2RlPWAKICAgICAgZmxvYXQgZ2V0QUNoYW5uZWwoJHt3LmpvaW4oKX0pIHsKICAgICAgICByZXR1cm4gZ2V0Q2hhbm5lbChnZXRBKCR7Zy5qb2luKCl9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIoJHtnLnNsaWNlKC0yKS5qb2luKCl9KSk7CiAgICAgIH0KICAgICAgJHtMfQogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgJHtjfSBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBib29sIGhhc05leHRDb2wgPSAke2hbbC0xXX0gPCAke2FbbC0xXS0xfTsKICAgICAgICBib29sIGhhc05leHRSb3cgPSAke2hbbC0yXX0gPCAke2FbbC0yXS0xfTsKICAgICAgICAke3B9CiAgICAgICAgaXZlYzQgc3JjSWR4ID0gaXZlYzQoc291cmNlTG9jUiR7eX0sIHNvdXJjZUxvY0cke3l9LAogICAgICAgICAgc291cmNlTG9jQiR7eX0sIHNvdXJjZUxvY0Eke3l9KSAqICR7dH07CiAgICAgICAgaXZlYzQgaW5JZHggPSBzcmNJZHg7CiAgICAgICAgdmVjNCBiZXN0SW5kZXggPSB2ZWM0KGluSWR4KTsKICAgICAgICB2ZWM0IGJlc3RWYWx1ZSA9ICR7RH07CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgJHt0fTsgaSsrKSB7CiAgICAgICAgICBpbklkeCA9IHNyY0lkeDsKICAgICAgICAgICR7VH0KICAgICAgICAgIHZlYzQgY2FuZGlkYXRlID0gJHtEfTsKICAgICAgICAgIGJ2ZWM0IG5hbiA9IGlzbmFuKGNhbmRpZGF0ZSk7CiAgICAgICAgICBidmVjNCByZXBsYWNlID0gYnZlYzQoCiAgICAgICAgICAgIHZlYzQoJHtrfShjYW5kaWRhdGUsIGJlc3RWYWx1ZSkpICogKHZlYzQoMS4wKSAtIHZlYzQobmFuKSkpOwoKICAgICAgICAgIGJlc3RWYWx1ZSA9IHZlYzQocmVwbGFjZS54ICA/IGNhbmRpZGF0ZS54IDogYmVzdFZhbHVlLngsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2UueSAgPyBjYW5kaWRhdGUueSA6IGJlc3RWYWx1ZS55LAogICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlLnogID8gY2FuZGlkYXRlLnogOiBiZXN0VmFsdWUueiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZS53ICA/IGNhbmRpZGF0ZS53IDogYmVzdFZhbHVlLncpOwogICAgICAgICAgYmVzdEluZGV4ID0gbWl4KGJlc3RJbmRleCwgdmVjNChpbklkeCksIHZlYzQocmVwbGFjZSkpOwogICAgICAgICAgc3JjSWR4Kys7CiAgICAgICAgfQogICAgICAgIHNldE91dHB1dChiZXN0SW5kZXgpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBfRChuLGUsdCxzPW51bGwpe2xldCByPWUuc2hhcGVbMF0sbz1lLnNoYXBlWzFdO3MhPW51bGwmJihyPXMuc2hhcGVbMF0sbz1zLnNoYXBlWzFdKTtjb25zdCBpPXFnKG8pLGE9e3dpbmRvd1NpemU6aSxpblNpemU6byxiYXRjaFNpemU6cixvdXRTaXplOk1hdGguY2VpbChvL2kpfSxsPW5ldyB5WihhLHQscz09bnVsbCksYz1bZV07cyE9bnVsbCYmYy5wdXNoKHMpO2NvbnN0IGg9bi5ydW5XZWJHTFByb2dyYW0obCxjLCJpbnQzMiIpO2lmKGguc2hhcGVbMV09PT0xKXJldHVybiBoO2NvbnN0IHA9X0QobixlLHQsaCk7cmV0dXJuIG4uZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaCkscH1mdW5jdGlvbiBPRChuLGUsdCxzPW51bGwpe2NvbnN0IHI9cyE9bnVsbD9zLnNoYXBlOmUuc2hhcGUsbz1yW3IubGVuZ3RoLTFdLGk9cWcobyksYT1uZXcgeFoocixpLHQscz09bnVsbCksbD1zPT1udWxsP1tlXTpbZSxzXSxjPW4ucnVuV2ViR0xQcm9ncmFtKGEsbCwiaW50MzIiKTtpZihjLnNoYXBlLmxlbmd0aD09PWUuc2hhcGUubGVuZ3RoKXtjb25zdCBoPU9EKG4sZSx0LGMpO3JldHVybiBuLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGMpLGh9cmV0dXJuIGN9ZnVuY3Rpb24gRkQobixlLHQscyl7Y29uc3Qgcj1bdF07aWYoQ24oImFyZyIrcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpLHIsZS5zaGFwZS5sZW5ndGgpLCFvZSgpLmdldEJvb2woIldFQkdMX1BBQ0tfUkVEVUNFIil8fGUuc2hhcGUubGVuZ3RoPD0yKXtjb25zdCBvPVtdLGk9bi50ZXhEYXRhLmdldChlLmRhdGFJZCksYT1pIT09bnVsbCYmaS5pc1BhY2tlZDtsZXQgbD1lO2EmJihsPW4udW5wYWNrVGVuc29yKGUpLG8ucHVzaChsKSk7Y29uc3RbYyxoXT1tbihsLnNoYXBlLHIpLHA9Y2UoaCksZj1DZSh7aW5wdXRzOnt4Omx9LGJhY2tlbmQ6bixhdHRyczp7c2hhcGU6Wy0xLHBdfX0pO28ucHVzaChmKTtjb25zdCBnPV9EKG4sZixzKTtvLnB1c2goZyk7Y29uc3QgeT1DZSh7aW5wdXRzOnt4Omd9LGJhY2tlbmQ6bixhdHRyczp7c2hhcGU6Y319KTtyZXR1cm4gby5mb3JFYWNoKHc9Pm4uZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odykpLHl9cmV0dXJuIE9EKG4sZSxzKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBiWihuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtheGlzOm99PXM7bGV0IGk9UWUobyxyLnNoYXBlKTtjb25zdCBhPUx0KGksci5zaGFwZS5sZW5ndGgpO2xldCBsPXI7Y29uc3QgYz1bXTthIT1udWxsJiYobD1Ibih7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTphfX0pLGMucHVzaChsKSxpPWp0KGkubGVuZ3RoLGwuc2hhcGUubGVuZ3RoKSksQ24oImFyZ01heCIsW2lbMF1dLGwuc2hhcGUubGVuZ3RoKTtjb25zdCBoPUZEKHQsbCxpWzBdLCJtYXgiKTtyZXR1cm4gYy5mb3JFYWNoKHA9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8ocCkpLGh9Y29uc3Qgd1o9e2tlcm5lbE5hbWU6dGQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmJafTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB2WihuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtheGlzOm99PXM7bGV0IGk9UWUobyxyLnNoYXBlKTtjb25zdCBhPUx0KGksci5zaGFwZS5sZW5ndGgpO2xldCBsPXI7Y29uc3QgYz1bXTthIT1udWxsJiYobD1Ibih7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTphfX0pLGMucHVzaChsKSxpPWp0KGkubGVuZ3RoLGwuc2hhcGUubGVuZ3RoKSksQ24oImFyZ01pbiIsW2lbMF1dLGwuc2hhcGUubGVuZ3RoKTtjb25zdCBoPUZEKHQsbCxpWzBdLCJtaW4iKTtyZXR1cm4gYy5mb3JFYWNoKHA9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8ocCkpLGh9Y29uc3QgU1o9e2tlcm5lbE5hbWU6bmQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnZafTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBOWj1ycitgCiAgaWYgKGFicyh4KSA+IDEuKSB7CiAgICByZXR1cm4gTkFOOwogIH0KICByZXR1cm4gYXNpbih4KTsKYCxrWj1pdCh7b3BTbmlwcGV0Ok5afSksQ1o9e2tlcm5lbE5hbWU6RWwsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmtafTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCAkWj1ycisicmV0dXJuIGxvZyh4ICsgc3FydCh4ICogeCArIDEuMCkpOyIsSVo9aXQoe29wU25pcHBldDokWn0pLFRaPXtrZXJuZWxOYW1lOlJsLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpJWn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRVo9cnIrYAogIHJldHVybiBhdGFuKHgpOwpgLFJaPWl0KHtvcFNuaXBwZXQ6RVp9KSxEWj17a2VybmVsTmFtZTpEbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6Ulp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEFaPWZ2K2AKICByZXR1cm4gYXRhbihhLCBiKTsKYCxfWj1gCiAgdmVjNCByZXN1bHQgPSBhdGFuKGEsIGIpOwogIGJ2ZWM0IGlzTmFOQSA9IGlzbmFuKGEpOwogIGJ2ZWM0IGlzTmFOQiA9IGlzbmFuKGIpOwogIGJ2ZWM0IGlzTmFOID0gYnZlYzQoaXNOYU5BLnggfHwgaXNOYU5CLngsIGlzTmFOQS55IHx8IGlzTmFOQi55LCBpc05hTkEueiB8fCBpc05hTkIueiwgaXNOYU5BLncgfHwgaXNOYU5CLncpOwogIGArRGErYAogIHJldHVybiByZXN1bHQ7CmAsT1o9SW4oe29wU25pcHBldDpBWixwYWNrZWRPcFNuaXBwZXQ6X1p9KSxGWj17a2VybmVsTmFtZTpfbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6T1p9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IExaPXJyK2AKICBpZiAoKHggPCAtMS4wKSB8fCAoeCA+IDEuMCkpIHJldHVybiBOQU47CnJldHVybiAobG9nKDEuMCArIHgpIC0gbG9nKDEuMCAtIHgpKSAvIDIuMDtgLFBaPWl0KHtvcFNuaXBwZXQ6TFp9KSx6Wj17a2VybmVsTmFtZTpBbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6UFp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIFFje2NvbnN0cnVjdG9yKGUsdCxzLHI9ITEsbz0hMSl7aWYodGhpcy52YXJpYWJsZU5hbWVzPVsieCJdLHQ9PT0iYXZnIiYmcyl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjb21wdXRlIHBvc2l0aW9ucyBmb3IgYXZlcmFnZSBwb29sLiIpO2NvbnN0IGk9ZS5maWx0ZXJXaWR0aCxhPWUuc3RyaWRlSGVpZ2h0LGw9ZS5zdHJpZGVXaWR0aCxjPWUuZGlsYXRpb25IZWlnaHQsaD1lLmRpbGF0aW9uV2lkdGgscD1lLmVmZmVjdGl2ZUZpbHRlckhlaWdodCxmPWUuZWZmZWN0aXZlRmlsdGVyV2lkdGgsZz1lLnBhZEluZm8udG9wLHk9ZS5wYWRJbmZvLmxlZnQ7dGhpcy5vdXRwdXRTaGFwZT1lLm91dFNoYXBlO2NvbnN0IHc9dD09PSJhdmciLGI9YCgoYmF0Y2ggICogJHtlLmluSGVpZ2h0fSArIHhSKSAqICR7ZS5pbldpZHRofSArIHhDKSAqICR7ZS5pbkNoYW5uZWxzfSArIGRgLHY9YCh4UiAqICR7ZS5pbldpZHRofSArIHhDKSAqICR7ZS5pbkNoYW5uZWxzfSArIGRgO2xldCBTPSIwLjAiO2lmKHd8fChTPSItMS4wIC8gMWUtMjAiKSxzKXt0aGlzLnVzZXJDb2RlPWAKICAgICAgICBjb25zdCBpdmVjMiBzdHJpZGVzID0gaXZlYzIoJHthfSwgJHtsfSk7CiAgICAgICAgY29uc3QgaXZlYzIgcGFkcyA9IGl2ZWMyKCR7Z30sICR7eX0pOwoKICAgICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICAgIGludCBiYXRjaCA9IGNvb3Jkc1swXTsKICAgICAgICAgIGludCBkID0gY29vcmRzWzNdOwoKICAgICAgICAgIGl2ZWMyIHhSQ0Nvcm5lciA9IGNvb3Jkcy55eiAqIHN0cmlkZXMgLSBwYWRzOwogICAgICAgICAgaW50IHhSQ29ybmVyID0geFJDQ29ybmVyLng7CiAgICAgICAgICBpbnQgeENDb3JuZXIgPSB4UkNDb3JuZXIueTsKCiAgICAgICAgICAvLyBtYXgvbWluIHgoPywgPywgZCkgdG8gZ2V0IHkoeVIsIHlDLCBkKS4KICAgICAgICAgIC8vID8gPSB0byBiZSBkZXRlcm1pbmVkCiAgICAgICAgICBmbG9hdCBtaW5NYXhWYWx1ZSA9IDAuMDsKICAgICAgICAgIGZsb2F0IG1pbk1heFZhbHVlRm91bmQgPSAwLjA7CiAgICAgICAgICBpbnQgbWluTWF4UG9zaXRpb24gPSAwOwogICAgICAgICAgZmxvYXQgYXZnVmFsdWUgPSAwLjA7CgogICAgICAgICAgZm9yIChpbnQgd1IgPSAwOyB3UiA8ICR7cH07CiAgICAgICAgICAgICAgd1IgKz0gJHtjfSkgewogICAgICAgICAgICBpbnQgeFIgPSB4UkNvcm5lciArIHdSOwoKICAgICAgICAgICAgaWYgKHhSIDwgMCB8fCB4UiA+PSAke2UuaW5IZWlnaHR9KSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAoaW50IHdDID0gMDsgd0MgPCAke2Z9OwogICAgICAgICAgICAgICAgd0MgKz0gJHtofSkgewogICAgICAgICAgICAgIGludCB4QyA9IHhDQ29ybmVyICsgd0M7CgogICAgICAgICAgICAgIGlmICh4QyA8IDAgfHwgeEMgPj0gJHtlLmluV2lkdGh9KSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZsb2F0IHZhbHVlID0gZ2V0WChiYXRjaCwgeFIsIHhDLCBkKTsKCiAgICAgICAgICAgICAgLy8gSWYgYSBtaW4gLyBtYXggdmFsdWUgaGFzIGFscmVhZHkgYmVlbiBmb3VuZCwgdXNlIGl0LiBJZiBub3QsCiAgICAgICAgICAgICAgLy8gdXNlIHRoZSBjdXJyZW50IHZhbHVlLgogICAgICAgICAgICAgIGZsb2F0IGN1cnJNaW5NYXhWYWx1ZSA9IG1peCgKICAgICAgICAgICAgICAgICAgdmFsdWUsIG1pbk1heFZhbHVlLCBtaW5NYXhWYWx1ZUZvdW5kKTsKICAgICAgICAgICAgICBpZiAodmFsdWUgPj0gY3Vyck1pbk1heFZhbHVlKSB7CiAgICAgICAgICAgICAgICBtaW5NYXhWYWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgICAgbWluTWF4VmFsdWVGb3VuZCA9IDEuMDsKICAgICAgICAgICAgICAgIG1pbk1heFBvc2l0aW9uID0gJHtyP28/Yjp2OmB3UiAqICR7Zn0gKyB3Q2B9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2V0T3V0cHV0KGZsb2F0KG1pbk1heFBvc2l0aW9uKSk7CiAgICAgICAgfQogICAgICBgO3JldHVybn1jb25zdCAkPSJtYXgiO2xldCBrPWAke3R9KCR7dH0oJHt0fShtaW5NYXhWYWx1ZVswXSwgbWluTWF4VmFsdWVbMV0pLCBtaW5NYXhWYWx1ZVsyXSksIG1pbk1heFZhbHVlWzNdKWA7dD09PSJhdmciJiYoaz0iYXZnVmFsdWUgLyBtYXgoY291bnQsIDEuMCkiKTtjb25zdCBUPU1hdGguZmxvb3IoaS80KSo0LEQ9aSU0LEw9YAogICAgICBpZiAoJHt3fSkgewogICAgICAgIGF2Z1ZhbHVlICs9IGRvdCh2YWx1ZXMsIG9uZXMpOwogICAgICB9IGVsc2UgewogICAgICAgIG1pbk1heFZhbHVlID0gJHskfSh2YWx1ZXMsIG1pbk1heFZhbHVlKTsKICAgICAgfQogICAgYDt0aGlzLnVzZXJDb2RlPWAKICAgICAgY29uc3QgaXZlYzIgc3RyaWRlcyA9IGl2ZWMyKCR7YX0sICR7bH0pOwogICAgICBjb25zdCBpdmVjMiBwYWRzID0gaXZlYzIoJHtnfSwgJHt5fSk7CiAgICAgIGNvbnN0IGZsb2F0IGluaXRpYWxpemF0aW9uVmFsdWUgPSAke1N9OwogICAgICBjb25zdCB2ZWM0IG9uZXMgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIDEuMCk7CgogICAgICBmbG9hdCBjb3VudCA9IDAuMDsKCiAgICAgIGZsb2F0IGdldFZhbHVlKGludCBiYXRjaCwgaW50IHhSLCBpbnQgeEMsIGludCBkKSB7CiAgICAgICAgaWYgKHhDIDwgMCB8fCB4QyA+PSAke2UuaW5XaWR0aH0pIHsKICAgICAgICAgIHJldHVybiBpbml0aWFsaXphdGlvblZhbHVlOwogICAgICAgIH0KICAgICAgICBjb3VudCArPSAxLjA7CiAgICAgICAgcmV0dXJuIGdldFgoYmF0Y2gsIHhSLCB4QywgZCk7CiAgICAgIH0KCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYmF0Y2ggPSBjb29yZHNbMF07CiAgICAgICAgaW50IGQgPSBjb29yZHNbM107CgogICAgICAgIGl2ZWMyIHhSQ0Nvcm5lciA9IGNvb3Jkcy55eiAqIHN0cmlkZXMgLSBwYWRzOwogICAgICAgIGludCB4UkNvcm5lciA9IHhSQ0Nvcm5lci54OwogICAgICAgIGludCB4Q0Nvcm5lciA9IHhSQ0Nvcm5lci55OwoKICAgICAgICAvLyBtYXgvbWluIHgoPywgPywgZCkgdG8gZ2V0IHkoeVIsIHlDLCBkKS4KICAgICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZAogICAgICAgIHZlYzQgbWluTWF4VmFsdWUgPSB2ZWM0KCR7U30pOwogICAgICAgIGZsb2F0IGF2Z1ZhbHVlID0gMC4wOwogICAgICAgIGNvdW50ID0gMC4wOwoKICAgICAgICBmb3IgKGludCB3UiA9IDA7IHdSIDwgJHtwfTsKICAgICAgICAgICAgd1IgKz0gJHtjfSkgewogICAgICAgICAgaW50IHhSID0geFJDb3JuZXIgKyB3UjsKCiAgICAgICAgICBpZiAoeFIgPCAwIHx8IHhSID49ICR7ZS5pbkhlaWdodH0pIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yIChpbnQgd0MgPSAwOyB3QyA8ICR7VH07IHdDICs9IDQpIHsKICAgICAgICAgICAgaW50IHhDID0geENDb3JuZXIgKyB3QyAqICR7aH07CgogICAgICAgICAgICB2ZWM0IHZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIHhSLCB4QywgZCksCiAgICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIHhSLCB4QyArICR7aH0sIGQpLAogICAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCB4UiwgeEMgKyAyICogJHtofSwgZCksCiAgICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIHhSLCB4QyArIDMgKiAke2h9LCBkKQogICAgICAgICAgICApOwoKICAgICAgICAgICAgJHtMfQogICAgICAgICAgfQoKICAgICAgICAgIGludCB4QyA9IHhDQ29ybmVyICsgJHtUfTsKICAgICAgICAgIGlmICgke0Q9PT0xfSkgewogICAgICAgICAgICB2ZWM0IHZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIHhSLCB4QywgZCksCiAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25WYWx1ZSwKICAgICAgICAgICAgICBpbml0aWFsaXphdGlvblZhbHVlLAogICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICR7TH0KICAgICAgICAgIH0gZWxzZSBpZiAoJHtEPT09Mn0pIHsKICAgICAgICAgICAgdmVjNCB2YWx1ZXMgPSB2ZWM0KAogICAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCB4UiwgeEMsIGQpLAogICAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCB4UiwgeEMgKyAke2h9LCBkKSwKICAgICAgICAgICAgICBpbml0aWFsaXphdGlvblZhbHVlLAogICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICR7TH0KICAgICAgICAgIH0gZWxzZSBpZiAoJHtEPT09M30pIHsKICAgICAgICAgICAgdmVjNCB2YWx1ZXMgPSB2ZWM0KAogICAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCB4UiwgeEMsIGQpLAogICAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCB4UiwgeEMgKyAke2h9LCBkKSwKICAgICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgeFIsIHhDICsgMiAqICR7aH0sIGQpLAogICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICR7TH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KCR7a30pOwogICAgICB9CiAgICBgfX1jbGFzcyBndntjb25zdHJ1Y3RvcihlLHQscyxyPSExLG89ITEpe2lmKHRoaXMudmFyaWFibGVOYW1lcz1bIngiXSx0PT09ImF2ZyImJnMpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY29tcHV0ZSBwb3NpdGlvbnMgZm9yIGF2ZXJhZ2UgcG9vbC4iKTtjb25zdCBpPWUuZmlsdGVyV2lkdGgsYT1lLnN0cmlkZURlcHRoLGw9ZS5zdHJpZGVIZWlnaHQsYz1lLnN0cmlkZVdpZHRoLGg9ZS5kaWxhdGlvbkRlcHRoLHA9ZS5kaWxhdGlvbkhlaWdodCxmPWUuZGlsYXRpb25XaWR0aCxnPWUuZWZmZWN0aXZlRmlsdGVyRGVwdGgseT1lLmVmZmVjdGl2ZUZpbHRlckhlaWdodCx3PWUuZWZmZWN0aXZlRmlsdGVyV2lkdGgsYj1lLnBhZEluZm8uZnJvbnQsdj1lLnBhZEluZm8udG9wLFM9ZS5wYWRJbmZvLmxlZnQ7dGhpcy5vdXRwdXRTaGFwZT1lLm91dFNoYXBlO2NvbnN0ICQ9dD09PSJhdmciO2xldCBrPSIwLjAiO2lmKCR8fChrPSItMS4wIC8gMWUtMjAiKSxzKXt0aGlzLnVzZXJDb2RlPWAKICAgICAgICBjb25zdCBpdmVjMyBzdHJpZGVzID0KICAgICAgICAgICAgaXZlYzMoJHthfSwgJHtsfSwgJHtjfSk7CiAgICAgICAgY29uc3QgaXZlYzMgcGFkcyA9IGl2ZWMzKCR7Yn0sICR7dn0sICR7U30pOwoKICAgICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgICBpdmVjNSBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICAgIGludCBiYXRjaCA9IGNvb3Jkcy54OwogICAgICAgICAgaW50IGNoID0gY29vcmRzLnU7CgogICAgICAgICAgaXZlYzMgeENvcm5lciA9IGl2ZWMzKGNvb3Jkcy55LCBjb29yZHMueiwgY29vcmRzLncpICogc3RyaWRlcyAtIHBhZHM7CiAgICAgICAgICBpbnQgeERDb3JuZXIgPSB4Q29ybmVyLng7CiAgICAgICAgICBpbnQgeFJDb3JuZXIgPSB4Q29ybmVyLnk7CiAgICAgICAgICBpbnQgeENDb3JuZXIgPSB4Q29ybmVyLno7CgogICAgICAgICAgLy8gbWF4L21pbiB4KD8sID8sID8sIGNoKSB0byBnZXQgeSh5RCwgeVIsIHlDLCBjaCkuCiAgICAgICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZAogICAgICAgICAgZmxvYXQgbWluTWF4VmFsdWUgPSAwLjA7CiAgICAgICAgICBmbG9hdCBtaW5NYXhWYWx1ZUZvdW5kID0gMC4wOwogICAgICAgICAgaW50IG1pbk1heFBvc2l0aW9uID0gMDsKCiAgICAgICAgICBmb3IgKGludCB3RCA9IDA7IHdEIDwgJHtnfTsKICAgICAgICAgICAgICB3RCArPSAke2h9KSB7CiAgICAgICAgICAgIGludCB4RCA9IHhEQ29ybmVyICsgd0Q7CgogICAgICAgICAgICBpZiAoeEQgPCAwIHx8IHhEID49ICR7ZS5pbkRlcHRofSkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKGludCB3UiA9IDA7IHdSIDwgJHt5fTsKICAgICAgICAgICAgICAgIHdSICs9ICR7cH0pIHsKICAgICAgICAgICAgICBpbnQgeFIgPSB4UkNvcm5lciArIHdSOwoKICAgICAgICAgICAgICBpZiAoeFIgPCAwIHx8IHhSID49ICR7ZS5pbkhlaWdodH0pIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yIChpbnQgd0MgPSAwOyB3QyA8ICR7d307CiAgICAgICAgICAgICAgICAgIHdDICs9ICR7Zn0pIHsKICAgICAgICAgICAgICAgIGludCB4QyA9IHhDQ29ybmVyICsgd0M7CgogICAgICAgICAgICAgICAgaWYgKHhDIDwgMCB8fCB4QyA+PSAke2UuaW5XaWR0aH0pIHsKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZmxvYXQgdmFsdWUgPSBnZXRYKGJhdGNoLCB4RCwgeFIsIHhDLCBjaCk7CgogICAgICAgICAgICAgICAgLy8gSWYgYSBtaW4gLyBtYXggdmFsdWUgaGFzIGFscmVhZHkgYmVlbiBmb3VuZCwgdXNlIGl0LiBJZiBub3QsCiAgICAgICAgICAgICAgICAvLyB1c2UgdGhlIGN1cnJlbnQgdmFsdWUuCiAgICAgICAgICAgICAgICBmbG9hdCBjdXJyTWluTWF4VmFsdWUgPSBtaXgoCiAgICAgICAgICAgICAgICAgICAgdmFsdWUsIG1pbk1heFZhbHVlLCBtaW5NYXhWYWx1ZUZvdW5kKTsKICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+PSBjdXJyTWluTWF4VmFsdWUpIHsKICAgICAgICAgICAgICAgICAgbWluTWF4VmFsdWUgPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgbWluTWF4VmFsdWVGb3VuZCA9IDEuMDsKICAgICAgICAgICAgICAgICAgbWluTWF4UG9zaXRpb24gPSAke3I/bz9gKCgoYmF0Y2ggKiAke2UuaW5EZXB0aH0gKyB4RCkgKiAke2UuaW5IZWlnaHR9ICsgeFIpICogJHtlLmluV2lkdGh9ICsgeEMpICogJHtlLmluQ2hhbm5lbHN9ICsgY2hgOmAoKHhEICogJHtlLmluSGVpZ2h0fSArIHhSKSAqICR7ZS5pbldpZHRofSArIHhDKSAqICR7ZS5pbkNoYW5uZWxzfSArIGNoYDpgd0QgKiAke3l9ICogJHt3fSArCiAgICAgICAgICAgICAgICAgICAgICB3UiAqICR7d30gKyB3Q2B9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2V0T3V0cHV0KGZsb2F0KG1pbk1heFBvc2l0aW9uKSk7CiAgICAgICAgfQogICAgICBgO3JldHVybn1jb25zdCBUPSJtYXgiO2xldCBEPWAke3R9KCR7dH0oJHt0fShtaW5NYXhWYWx1ZVswXSwgbWluTWF4VmFsdWVbMV0pLCBtaW5NYXhWYWx1ZVsyXSksIG1pbk1heFZhbHVlWzNdKWA7dD09PSJhdmciJiYoRD0iYXZnVmFsdWUgLyBtYXgoY291bnQsIDEuMCkiKTtjb25zdCBMPU1hdGguZmxvb3IoaS80KSo0LHo9aSU0LEY9YAogICAgICBpZiAoJHskfSkgewogICAgICAgIGF2Z1ZhbHVlICs9IGRvdCh2YWx1ZXMsIG9uZXMpOwogICAgICB9IGVsc2UgewogICAgICAgIG1pbk1heFZhbHVlID0gJHtUfSh2YWx1ZXMsIG1pbk1heFZhbHVlKTsKICAgICAgfQogICAgYDt0aGlzLnVzZXJDb2RlPWAKICAgICAgY29uc3QgaXZlYzMgc3RyaWRlcyA9CiAgICAgICAgaXZlYzMoJHthfSwgJHtsfSwgJHtjfSk7CiAgICAgIGNvbnN0IGl2ZWMzIHBhZHMgPSBpdmVjMygke2J9LCAke3Z9LCAke1N9KTsKICAgICAgY29uc3QgZmxvYXQgaW5pdGlhbGl6YXRpb25WYWx1ZSA9ICR7a307CiAgICAgIGNvbnN0IHZlYzQgb25lcyA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgMS4wKTsKCiAgICAgIGZsb2F0IGNvdW50ID0gMC4wOwoKICAgICAgZmxvYXQgZ2V0VmFsdWUoaW50IGJhdGNoLCBpbnQgeEQsIGludCB4UiwgaW50IHhDLCBpbnQgY2gpIHsKICAgICAgICBpZiAoeEMgPCAwIHx8IHhDID49ICR7ZS5pbldpZHRofSkgewogICAgICAgICAgcmV0dXJuIGluaXRpYWxpemF0aW9uVmFsdWU7CiAgICAgICAgfQogICAgICAgIGNvdW50ICs9IDEuMDsKICAgICAgICByZXR1cm4gZ2V0WChiYXRjaCwgeEQsIHhSLCB4QywgY2gpOwogICAgICB9CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzUgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGJhdGNoID0gY29vcmRzLng7CiAgICAgICAgaW50IGNoID0gY29vcmRzLnU7CgogICAgICAgIGl2ZWMzIHhDb3JuZXIgPSBpdmVjMyhjb29yZHMueSwgY29vcmRzLnosIGNvb3Jkcy53KSAqIHN0cmlkZXMgLSBwYWRzOwogICAgICAgIGludCB4RENvcm5lciA9IHhDb3JuZXIueDsKICAgICAgICBpbnQgeFJDb3JuZXIgPSB4Q29ybmVyLnk7CiAgICAgICAgaW50IHhDQ29ybmVyID0geENvcm5lci56OwoKICAgICAgICAvLyBtYXgvbWluIHgoPywgPywgPywgZCkgdG8gZ2V0IHkoeUQsIHlSLCB5QywgY2gpLgogICAgICAgIC8vID8gPSB0byBiZSBkZXRlcm1pbmVkCiAgICAgICAgdmVjNCBtaW5NYXhWYWx1ZSA9IHZlYzQoJHtrfSk7CiAgICAgICAgZmxvYXQgYXZnVmFsdWUgPSAwLjA7CiAgICAgICAgY291bnQgPSAwLjA7CgogICAgICAgIGZvciAoaW50IHdEID0gMDsgd0QgPCAke2d9OwogICAgICAgICAgICB3RCArPSAke2h9KSB7CiAgICAgICAgICBpbnQgeEQgPSB4RENvcm5lciArIHdEOwoKICAgICAgICAgIGlmICh4RCA8IDAgfHwgeEQgPj0gJHtlLmluRGVwdGh9KSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAoaW50IHdSID0gMDsgd1IgPCAke3l9OwogICAgICAgICAgICB3UiArPSAke3B9KSB7CiAgICAgICAgICAgIGludCB4UiA9IHhSQ29ybmVyICsgd1I7CgogICAgICAgICAgICBpZiAoeFIgPCAwIHx8IHhSID49ICR7ZS5pbkhlaWdodH0pIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChpbnQgd0MgPSAwOyB3QyA8ICR7TH07IHdDICs9IDQpIHsKICAgICAgICAgICAgICBpbnQgeEMgPSB4Q0Nvcm5lciArIHdDICogJHtmfTsKCiAgICAgICAgICAgICAgdmVjNCB2YWx1ZXMgPSB2ZWM0KAogICAgICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIHhELCB4UiwgeEMsIGNoKSwKICAgICAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCB4RCwgeFIsIHhDICsgJHtmfSwgY2gpLAogICAgICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIHhELCB4UiwgeEMgKyAyICogJHtmfSwgY2gpLAogICAgICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIHhELCB4UiwgeEMgKyAzICogJHtmfSwgY2gpCiAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgJHtGfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpbnQgeEMgPSB4Q0Nvcm5lciArICR7TH07CiAgICAgICAgICAgIGlmICgke3o9PT0xfSkgewogICAgICAgICAgICAgIHZlYzQgdmFsdWVzID0gdmVjNCgKICAgICAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCB4RCwgeFIsIHhDLCBjaCksCiAgICAgICAgICAgICAgICBpbml0aWFsaXphdGlvblZhbHVlLAogICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25WYWx1ZSwKICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUKICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAke0Z9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHt6PT09Mn0pIHsKICAgICAgICAgICAgICB2ZWM0IHZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgeEQsIHhSLCB4QywgY2gpLAogICAgICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIHhELCB4UiwgeEMgKyAke2Z9LCBjaCksCiAgICAgICAgICAgICAgICBpbml0aWFsaXphdGlvblZhbHVlLAogICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25WYWx1ZQogICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICR7Rn0KICAgICAgICAgICAgfSBlbHNlIGlmICgke3o9PT0zfSkgewogICAgICAgICAgICAgIHZlYzQgdmFsdWVzID0gdmVjNCgKICAgICAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCB4RCwgeFIsIHhDLCBjaCksCiAgICAgICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgeEQsIHhSLCB4QyArICR7Zn0sIGNoKSwKICAgICAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCB4RCwgeFIsIHhDICsgMiAqICR7Zn0sIGNoKSwKICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uVmFsdWUKICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAke0Z9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KCR7RH0pOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBNWihuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lO0ZoKHIsImF2Z1Bvb2wiKTtjb25zdHtmaWx0ZXJTaXplOm8sc3RyaWRlczppLHBhZDphLGRpbVJvdW5kaW5nTW9kZTpsfT1zLGM9MTtBKGtuKGksYyksKCk9PmBFcnJvciBpbiBhdmdQb29sOiBFaXRoZXIgc3RyaWRlcyBvciBkaWxhdGlvbnMgbXVzdCBiZSAxLiBHb3Qgc3RyaWRlcyAke2l9IGFuZCBkaWxhdGlvbnMgJyR7Y30nYCk7Y29uc3QgaD1ucihyLnNoYXBlLG8saSxjLGEsbCk7aWYoaC5maWx0ZXJXaWR0aD09PTEmJmguZmlsdGVySGVpZ2h0PT09MSYmSmUoaC5pblNoYXBlLGgub3V0U2hhcGUpKXJldHVybiBOcyh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dH0pO2NvbnN0IHA9bmV3IFFjKGgsImF2ZyIsITEpO3JldHVybiB0LnJ1bldlYkdMUHJvZ3JhbShwLFtyXSwiZmxvYXQzMiIpfWNvbnN0IEJaPXtrZXJuZWxOYW1lOnNkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpNWn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gVloobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7ZmlsdGVyU2l6ZTpvLHN0cmlkZXM6aSxwYWQ6YSxkaW1Sb3VuZGluZ01vZGU6bCxkYXRhRm9ybWF0OmN9PXMsaD1bMSwxLDFdLHA9Tm8oci5zaGFwZSxvLGksaCxhLGwsYyksZj1uZXcgZ3YocCwiYXZnIiwhMSk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGYsW3JdLCJmbG9hdDMyIil9Y29uc3QgV1o9e2tlcm5lbE5hbWU6cmQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlZafTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBVWntjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJkeSJdLHRoaXMub3V0cHV0U2hhcGU9ZS5pblNoYXBlO2NvbnN0IHQ9ZS5maWx0ZXJIZWlnaHQscz1lLmZpbHRlcldpZHRoLHI9ZS5zdHJpZGVIZWlnaHQsbz1lLnN0cmlkZVdpZHRoLGk9ZS5kaWxhdGlvbkhlaWdodCxhPWUuZGlsYXRpb25XaWR0aCxsPWUuZWZmZWN0aXZlRmlsdGVySGVpZ2h0LGM9ZS5lZmZlY3RpdmVGaWx0ZXJXaWR0aCxoPWwtMS1lLnBhZEluZm8udG9wLHA9Yy0xLWUucGFkSW5mby5sZWZ0LGY9MS8odCpzKTt0aGlzLnVzZXJDb2RlPWAKICAgICAgY29uc3QgaXZlYzIgcGFkcyA9IGl2ZWMyKCR7aH0sICR7cH0pOwogICAgICBjb25zdCBmbG9hdCBhdmdNdWx0aXBsaWVyID0gZmxvYXQoJHtmfSk7CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGIgPSBjb29yZHNbMF07CiAgICAgICAgaW50IGQgPSBjb29yZHNbM107CgogICAgICAgIGl2ZWMyIGR5UkNDb3JuZXIgPSBjb29yZHMueXogLSBwYWRzOwogICAgICAgIGludCBkeVJDb3JuZXIgPSBkeVJDQ29ybmVyLng7CiAgICAgICAgaW50IGR5Q0Nvcm5lciA9IGR5UkNDb3JuZXIueTsKCiAgICAgICAgLy8gQ29udm9sdmUgZHkoPywgPywgZCkgd2l0aCBwb3MgbWFzayg6LCA6LCBkKSB0byBnZXQgZHgoeFIsIHhDLCBkKS4KICAgICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZC4gOiA9IGFjcm9zcyBhbGwgdmFsdWVzIGluIHRoYXQgYXhpcy4KICAgICAgICBmbG9hdCBkb3RQcm9kID0gMC4wOwogICAgICAgIGZvciAoaW50IHdSID0gMDsgd1IgPCAke2x9OwogICAgICAgICAgICB3UiArPSAke2l9KSB7CiAgICAgICAgICBmbG9hdCBkeVIgPSBmbG9hdChkeVJDb3JuZXIgKyB3UikgLyAke3J9LjA7CgogICAgICAgICAgaWYgKGR5UiA8IDAuMCB8fCBkeVIgPj0gJHtlLm91dEhlaWdodH0uMCB8fCBmcmFjdChkeVIpID4gMC4wKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaW50IGlkeVIgPSBpbnQoZHlSKTsKCiAgICAgICAgICBmb3IgKGludCB3QyA9IDA7IHdDIDwgJHtjfTsKICAgICAgICAgICAgd0MrPSAke2F9KSB7CiAgICAgICAgICAgIGZsb2F0IGR5QyA9IGZsb2F0KGR5Q0Nvcm5lciArIHdDKSAvICR7b30uMDsKCiAgICAgICAgICAgIGlmIChkeUMgPCAwLjAgfHwgZHlDID49ICR7ZS5vdXRXaWR0aH0uMCB8fAogICAgICAgICAgICAgICAgZnJhY3QoZHlDKSA+IDAuMCkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGludCBpZHlDID0gaW50KGR5Qyk7CgogICAgICAgICAgICBmbG9hdCBkeVZhbHVlID0gZ2V0RHkoYiwgaWR5UiwgaWR5QywgZCk7CgogICAgICAgICAgICBkb3RQcm9kICs9IGR5VmFsdWUgKiBhdmdNdWx0aXBsaWVyOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXRPdXRwdXQoZG90UHJvZCk7CiAgICAgIH0KICAgIGB9fWNsYXNzIGpae2NvbnN0cnVjdG9yKGUpe3RoaXMudmFyaWFibGVOYW1lcz1bImR5Il0sdGhpcy5vdXRwdXRTaGFwZT1lLmluU2hhcGU7Y29uc3QgdD1lLmZpbHRlckRlcHRoLHM9ZS5maWx0ZXJIZWlnaHQscj1lLmZpbHRlcldpZHRoLG89ZS5zdHJpZGVEZXB0aCxpPWUuc3RyaWRlSGVpZ2h0LGE9ZS5zdHJpZGVXaWR0aCxsPWUuZGlsYXRpb25EZXB0aCxjPWUuZGlsYXRpb25IZWlnaHQsaD1lLmRpbGF0aW9uV2lkdGgscD1lLmVmZmVjdGl2ZUZpbHRlckRlcHRoLGY9ZS5lZmZlY3RpdmVGaWx0ZXJIZWlnaHQsZz1lLmVmZmVjdGl2ZUZpbHRlcldpZHRoLHk9cC0xLWUucGFkSW5mby5mcm9udCx3PWYtMS1lLnBhZEluZm8udG9wLGI9Zy0xLWUucGFkSW5mby5sZWZ0LHY9MS8odCpzKnIpO3RoaXMudXNlckNvZGU9YAogICAgICBjb25zdCBpdmVjMyBwYWRzID0gaXZlYzMoJHt5fSwgJHt3fSwgJHtifSk7CiAgICAgIGNvbnN0IGZsb2F0IGF2Z011bHRpcGxpZXIgPSBmbG9hdCgke3Z9KTsKCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjNSBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYmF0Y2ggPSBjb29yZHMueDsKICAgICAgICBpbnQgY2ggPSBjb29yZHMudTsKCiAgICAgICAgaXZlYzMgZHlDb3JuZXIgPSBpdmVjMyhjb29yZHMueSwgY29vcmRzLnosIGNvb3Jkcy53KSAtIHBhZHM7CiAgICAgICAgaW50IGR5RENvcm5lciA9IGR5Q29ybmVyLng7CiAgICAgICAgaW50IGR5UkNvcm5lciA9IGR5Q29ybmVyLnk7CiAgICAgICAgaW50IGR5Q0Nvcm5lciA9IGR5Q29ybmVyLno7CgogICAgICAgIC8vIENvbnZvbHZlIGR5KD8sID8sID8sIGQpIHdpdGggcG9zIG1hc2soOiwgOiwgOiwgY2gpIHRvIGdldAogICAgICAgIC8vIGR4KHhELCB4UiwgeEMsIGNoKS4KICAgICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZC4gOiA9IGFjcm9zcyBhbGwgdmFsdWVzIGluIHRoYXQgYXhpcy4KICAgICAgICBmbG9hdCBkb3RQcm9kID0gMC4wOwoKICAgICAgICBmb3IgKGludCB3RCA9IDA7IHdEIDwgJHtwfTsKICAgICAgICAgICAgd0QgKz0gJHtsfSkgewogICAgICAgICAgZmxvYXQgZHlEID0gZmxvYXQoZHlEQ29ybmVyICsgd0QpIC8gJHtvfS4wOwoKICAgICAgICAgIGlmIChkeUQgPCAwLjAgfHwgZHlEID49ICR7ZS5vdXREZXB0aH0uMCB8fCBmcmFjdChkeUQpID4gMC4wKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaW50IGlkeUQgPSBpbnQoZHlEKTsKCiAgICAgICAgICBmb3IgKGludCB3UiA9IDA7IHdSIDwgJHtmfTsKICAgICAgICAgICAgICB3UiArPSAke2N9KSB7CiAgICAgICAgICAgIGZsb2F0IGR5UiA9IGZsb2F0KGR5UkNvcm5lciArIHdSKSAvICR7aX0uMDsKCiAgICAgICAgICAgIGlmIChkeVIgPCAwLjAgfHwgZHlSID49ICR7ZS5vdXRIZWlnaHR9LjAgfHwKICAgICAgICAgICAgICAgIGZyYWN0KGR5UikgPiAwLjApIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbnQgaWR5UiA9IGludChkeVIpOwoKICAgICAgICAgICAgZm9yIChpbnQgd0MgPSAwOyB3QyA8ICR7Z307CiAgICAgICAgICAgICAgICB3QyArPSAke2h9KSB7CiAgICAgICAgICAgICAgZmxvYXQgZHlDID0gZmxvYXQoZHlDQ29ybmVyICsgd0MpIC8gJHthfS4wOwoKICAgICAgICAgICAgICBpZiAoZHlDIDwgMC4wIHx8IGR5QyA+PSAke2Uub3V0V2lkdGh9LjAgfHwKICAgICAgICAgICAgICAgICAgZnJhY3QoZHlDKSA+IDAuMCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGludCBpZHlDID0gaW50KGR5Qyk7CgogICAgICAgICAgICAgIGZsb2F0IGR5VmFsdWUgPSBnZXREeShiYXRjaCwgaWR5RCwgaWR5UiwgaWR5QywgY2gpOwoKICAgICAgICAgICAgICBkb3RQcm9kICs9IGR5VmFsdWUgKiBhdmdNdWx0aXBsaWVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNldE91dHB1dChkb3RQcm9kKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gR1oobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2R5OnIsaW5wdXQ6b309ZSxpPW8se2ZpbHRlclNpemU6YSxzdHJpZGVzOmwscGFkOmMsZGltUm91bmRpbmdNb2RlOmh9PXMscD1bMSwxLDFdLGY9Tm8oaS5zaGFwZSxhLGwscCxjLGgpLGc9bmV3IGpaKGYpO3JldHVybiB0LnJ1bldlYkdMUHJvZ3JhbShnLFtyXSxpLmR0eXBlKX1jb25zdCBIWj17a2VybmVsTmFtZTpybSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6R1p9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHFaKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtkeTpyLGlucHV0Om99PWUsaT1vO0ZoKFtyLG9dLCJhdmdQb29sR3JhZCIpO2NvbnN0e2ZpbHRlclNpemU6YSxzdHJpZGVzOmwscGFkOmN9PXMsaD1ucihpLnNoYXBlLGEsbCwxLGMpLHA9bmV3IFVaKGgpO3JldHVybiB0LnJ1bldlYkdMUHJvZ3JhbShwLFtyXSxpLmR0eXBlKX1jb25zdCBLWj17a2VybmVsTmFtZTpzbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6cVp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFhaKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHthOnIsYjpvfT1lLHt0cmFuc3Bvc2VBOmksdHJhbnNwb3NlQjphfT1zO3JldHVybiBYZih7YTpyLGI6byx0cmFuc3Bvc2VBOmksdHJhbnNwb3NlQjphLGJhY2tlbmQ6dH0pfWNvbnN0IFlaPXtrZXJuZWxOYW1lOm9kLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpYWn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgUVp7Y29uc3RydWN0b3IoZSx0LHMscixvLGkpe3RoaXMub3V0cHV0U2hhcGU9W10sdGhpcy52YXJpYWJsZU5hbWVzPVsieCIsIm1lYW4iLCJ2YXJpYW5jZSJdLEhlKGUsdCksSGUoZSxzKTtsZXQgYT0iMC4wIjtyIT1udWxsJiYoSGUoZSxyKSx0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgib2Zmc2V0IiksYT0iZ2V0T2Zmc2V0QXRPdXRDb29yZHMoKSIpO2xldCBsPSIxLjAiO28hPW51bGwmJihIZShlLG8pLHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCJzY2FsZSIpLGw9ImdldFNjYWxlQXRPdXRDb29yZHMoKSIpLHRoaXMub3V0cHV0U2hhcGU9ZSx0aGlzLnVzZXJDb2RlPWAKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGZsb2F0IHggPSBnZXRYQXRPdXRDb29yZHMoKTsKICAgICAgICBmbG9hdCBtZWFuID0gZ2V0TWVhbkF0T3V0Q29vcmRzKCk7CiAgICAgICAgZmxvYXQgdmFyaWFuY2UgPSBnZXRWYXJpYW5jZUF0T3V0Q29vcmRzKCk7CiAgICAgICAgZmxvYXQgb2Zmc2V0ID0gJHthfTsKICAgICAgICBmbG9hdCBzY2FsZSA9ICR7bH07CiAgICAgICAgZmxvYXQgaW52ID0gc2NhbGUgKiBpbnZlcnNlc3FydCh2YXJpYW5jZSArIGZsb2F0KCR7aX0pKTsKICAgICAgICBzZXRPdXRwdXQoZG90KHZlYzMoeCwgLW1lYW4sIG9mZnNldCksIHZlYzMoaW52LCBpbnYsIDEpKSk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIFpae2NvbnN0cnVjdG9yKGUsdCxzLHIsbyxpKXt0aGlzLnBhY2tlZElucHV0cz0hMCx0aGlzLnBhY2tlZE91dHB1dD0hMCx0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4IiwibWVhbiIsInZhcmlhbmNlIl0sSGUoZSx0KSxIZShlLHMpO2xldCBhPSJ2ZWM0KDAuMCkiO3IhPW51bGwmJihIZShlLHIpLHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCJvZmZzZXQiKSxhPSJnZXRPZmZzZXRBdE91dENvb3JkcygpIik7bGV0IGw9InZlYzQoMS4wKSI7byE9bnVsbCYmKEhlKGUsbyksdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goInNjYWxlIiksbD0iZ2V0U2NhbGVBdE91dENvb3JkcygpIiksdGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgdmVjNCBvZmZzZXQgPSAke2F9OwogICAgICAgIHZlYzQgc2NhbGUgPSAke2x9OwoKICAgICAgICB2ZWM0IHggPSBnZXRYQXRPdXRDb29yZHMoKTsKICAgICAgICB2ZWM0IG1lYW4gPSBnZXRNZWFuQXRPdXRDb29yZHMoKTsKICAgICAgICB2ZWM0IHZhcmlhbmNlID0gZ2V0VmFyaWFuY2VBdE91dENvb3JkcygpOwoKICAgICAgICB2ZWM0IGludiA9IHNjYWxlICogaW52ZXJzZXNxcnQodmFyaWFuY2UgKyB2ZWM0KCR7aX0pKTsKCiAgICAgICAgc2V0T3V0cHV0KCh4IC0gbWVhbikgKiBpbnYgKyBvZmZzZXQpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBKWj0oe2lucHV0czpuLGJhY2tlbmQ6ZSxhdHRyczp0fSk9Pntjb25zdHt4OnMsbWVhbjpyLHZhcmlhbmNlOm8sb2Zmc2V0Omksc2NhbGU6YX09bjtBKHIuc2hhcGUubGVuZ3RoPT09by5zaGFwZS5sZW5ndGgsKCk9PiJCYXRjaCBub3JtYWxpemF0aW9uIGdyYWRpZW50IHJlcXVpcmVzIG1lYW4gYW5kIHZhcmlhbmNlIHRvIGhhdmUgZXF1YWwgcmFua3MuIiksQShpPT1udWxsfHxyLnNoYXBlLmxlbmd0aD09PWkuc2hhcGUubGVuZ3RoLCgpPT4iQmF0Y2ggbm9ybWFsaXphdGlvbiBncmFkaWVudCByZXF1aXJlcyBtZWFuIGFuZCBvZmZzZXQgdG8gaGF2ZSBlcXVhbCByYW5rcy4iKSxBKGE9PW51bGx8fHIuc2hhcGUubGVuZ3RoPT09YS5zaGFwZS5sZW5ndGgsKCk9PiJCYXRjaCBub3JtYWxpemF0aW9uIGdyYWRpZW50IHJlcXVpcmVzIG1lYW4gYW5kIHNjYWxlIHRvIGhhdmUgZXF1YWwgcmFua3MuIik7bGV0e3ZhcmlhbmNlRXBzaWxvbjpsfT10O2w9PW51bGwmJihsPS4wMDEpO2NvbnN0IGM9W3MscixvXTtsZXQgaD1udWxsO2khPW51bGwmJihoPWkuc2hhcGUsYy5wdXNoKGkpKTtsZXQgcD1udWxsO2EhPW51bGwmJihwPWEuc2hhcGUsYy5wdXNoKGEpKTtjb25zdCBmPW9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDS19OT1JNQUxJWkFUSU9OIik/bmV3IFpaKHMuc2hhcGUsci5zaGFwZSxvLnNoYXBlLGgscCxsKTpuZXcgUVoocy5zaGFwZSxyLnNoYXBlLG8uc2hhcGUsaCxwLGwpO3JldHVybiBlLnJ1bldlYkdMUHJvZ3JhbShmLGMsY1swXS5kdHlwZSl9LGVKPXtrZXJuZWxOYW1lOnhkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpKWn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgdEp7Y29uc3RydWN0b3IoZSl7dGhpcy52YXJpYWJsZU5hbWVzPVsic291cmNlIl0sdGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMucmFuaz1lLmxlbmd0aDtjb25zdCB0PXh0KHRoaXMucmFuayk7dGhpcy5jdXN0b21Vbmlmb3Jtcz1be25hbWU6InN0YXJ0IixhcnJheUluZGV4OnRoaXMucmFuayx0eXBlOiJpbnQifV07Y29uc3Qgcz1uSih0aGlzLnJhbmspO2xldCByO2NvbnN0IG89ZS5tYXAoKGksYSk9PmBzb3VyY2VMb2MuJHt3MVthXX0gPSBzdGFydFske2F9XSArIGNvb3Jkcy4ke3cxW2FdfTtgKTtyPWAKICAgICAgICAke3R9IHNvdXJjZUxvYzsKICAgICAgICAke3R9IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgICR7by5qb2luKGAKYCl9CiAgICAgIGAsdGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAke3J9CiAgICAgICAgc2V0T3V0cHV0KGdldFNvdXJjZSgke3N9KSk7CiAgICAgIH0KICAgIGB9fWNvbnN0IHcxPVsieCIsInkiLCJ6IiwidyIsInUiLCJ2Il07ZnVuY3Rpb24gbkoobil7aWYobj09PTEpcmV0dXJuInNvdXJjZUxvYyI7aWYobjw9NilyZXR1cm4gdzEuc2xpY2UoMCxuKS5tYXAoZT0+InNvdXJjZUxvYy4iK2UpLmpvaW4oIiwiKTt0aHJvdyBFcnJvcihgU2xpY2luZyBmb3IgcmFuayAke259IGlzIG5vdCB5ZXQgc3VwcG9ydGVkYCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3Mgc0p7Y29uc3RydWN0b3IoZSl7dGhpcy52YXJpYWJsZU5hbWVzPVsic291cmNlIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITAsdGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMucmFuaz1lLmxlbmd0aCx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToic3RhcnQiLGFycmF5SW5kZXg6dGhpcy5yYW5rLHR5cGU6ImludCJ9XTtjb25zdCB0PXh0KHRoaXMucmFuaykscz1HbigiY29vcmRzIix0aGlzLnJhbmspLHI9R24oInNvdXJjZUxvYyIsdGhpcy5yYW5rKSxvPXRoaXMucmFuaz09PTE/InNvdXJjZUxvYyI6YHZlYzIoJHtyLnNsaWNlKC0yKS5qb2luKCl9KWAsaT1gZ2V0Q2hhbm5lbChnZXRTb3VyY2UoJHtyLmpvaW4oKX0pLCAke299KWAsYT1gCiAgICAgIHJlc3VsdC54ID0gJHtpfTsKICAgICAgaWYgKCsrJHtzW3RoaXMucmFuay0xXX0gPCAke2VbdGhpcy5yYW5rLTFdfSkgewogICAgICAgICsrJHtyW3RoaXMucmFuay0xXX07CiAgICAgICAgcmVzdWx0LnkgPSAke2l9OwogICAgICAgIC0tJHtyW3RoaXMucmFuay0xXX07CiAgICAgIH0KICAgIGAsbD10aGlzLnJhbms9PT0xPyIiOmAKICAgICAgLS0ke3NbdGhpcy5yYW5rLTFdfTsKICAgICAgaWYgKCsrJHtzW3RoaXMucmFuay0yXX0gPCAke2VbdGhpcy5yYW5rLTJdfSkgewogICAgICAgICsrJHtyW3RoaXMucmFuay0yXX07CiAgICAgICAgcmVzdWx0LnogPSAke2l9OwogICAgICAgIGlmICgrKyR7c1t0aGlzLnJhbmstMV19IDwgJHtlW3RoaXMucmFuay0xXX0pIHsKICAgICAgICAgICsrJHtyW3RoaXMucmFuay0xXX07CiAgICAgICAgICByZXN1bHQudyA9ICR7aX07CiAgICAgICAgfQogICAgICB9CiAgICBgLGM9dGhpcy5yYW5rPD00P2Bzb3VyY2VMb2MgPSBjb29yZHMgKwogICAgICAgICAgICAke3R9KCR7ZS5tYXAoKGgscCk9PmBzdGFydFske3B9XWApLmpvaW4oKX0pO2A6ZS5tYXAoKGgscCk9PmAke3JbcF19ID0gJHtzW3BdfSArIHN0YXJ0WyR7cH1dO2ApLmpvaW4oYApgKTt0aGlzLnVzZXJDb2RlPWAKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICR7dH0gY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgJHt0fSBzb3VyY2VMb2M7CiAgICAgICAgJHtjfQogICAgICAgIHZlYzQgcmVzdWx0ID0gdmVjNCgwLik7CiAgICAgICAgJHthfQogICAgICAgICR7bH0KICAgICAgICBzZXRPdXRwdXQocmVzdWx0KTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gckoobixlLHQscyl7Y29uc3Qgcj1zLnRleERhdGEuZ2V0KG4uZGF0YUlkKSxvPXMubWFrZVRlbnNvckluZm8odCxuLmR0eXBlKSxpPXMudGV4RGF0YS5nZXQoby5kYXRhSWQpO09iamVjdC5hc3NpZ24oaSxyKSxpLnJlZkNvdW50PTEsaS5zaGFwZT10LGkuZHR5cGU9bi5kdHlwZTtsZXQgYT1hdyhlLHplKG4uc2hhcGUpKTtyLnNsaWNlJiYoYSs9ci5zbGljZS5mbGF0T2Zmc2V0KSxpLnNsaWNlPXtmbGF0T2Zmc2V0OmEsb3JpZ0RhdGFJZDpyLnNsaWNlJiZyLnNsaWNlLm9yaWdEYXRhSWR8fG4uZGF0YUlkfTtjb25zdCBsPXMuZGF0YVJlZkNvdW50LmdldChpLnNsaWNlLm9yaWdEYXRhSWQpfHwxO3JldHVybiBzLmRhdGFSZWZDb3VudC5zZXQoaS5zbGljZS5vcmlnRGF0YUlkLGwrMSksb31mdW5jdGlvbiBQdShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtiZWdpbjpvLHNpemU6aX09cyxbYSxsXT1IZyhyLG8saSk7aWYocncocixhLGwpLGNlKGwpPT09MClyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhsLHIuZHR5cGUsW10pO2lmKHQuc2hvdWxkRXhlY3V0ZU9uQ1BVKFtyXSl8fHIuZHR5cGU9PT0ic3RyaW5nIil7Y29uc3QgcD10LnRleERhdGEuZ2V0KHIuZGF0YUlkKSxmPVlZKHAudmFsdWVzLGEsbCxyLnNoYXBlLHIuZHR5cGUpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGwsci5kdHlwZSxmKX1jb25zdHtpc1BhY2tlZDpjfT10LnRleERhdGEuZ2V0KHIuZGF0YUlkKSxoPWl3KHIuc2hhcGUsYSxsKTtpZihjfHwhaCl7Y29uc3QgcD1vZSgpLmdldEJvb2woIldFQkdMX1BBQ0tfQVJSQVlfT1BFUkFUSU9OUyIpP25ldyBzSihsKTpuZXcgdEoobCksZj1bYV07cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKHAsW3JdLHIuZHR5cGUsZil9cmV0dXJuIHQudXBsb2FkVG9HUFUoci5kYXRhSWQpLHJKKHIsYSxsLHQpfWNvbnN0IG9KPXtrZXJuZWxOYW1lOnFkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpQdX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgaUo9bj0+e2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2Jsb2NrU2hhcGU6byxjcm9wczppfT1zO0Eoci5zaGFwZS5sZW5ndGg8PTQsKCk9PiJiYXRjaFRvU3BhY2VORCBmb3IgcmFuayA+IDQgd2l0aCBhIFdlYkdMIGJhY2tlbmQgbm90IGltcGxlbWVudGVkIHlldCIpO2NvbnN0IGE9by5yZWR1Y2UoKFMsJCk9PlMqJCksbD1TaChyLnNoYXBlLG8sYSksYz1OaChsLmxlbmd0aCxvLmxlbmd0aCksaD1raChyLnNoYXBlLG8sYSkscD1wdyhpLG8ubGVuZ3RoKSxmPWZ3KGgsaSxvLmxlbmd0aCksZz1bXSx5PUNlKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpsfX0pLHc9SG4oe2lucHV0czp7eDp5fSxiYWNrZW5kOnQsYXR0cnM6e3Blcm06Y319KSxiPUNlKHtpbnB1dHM6e3g6d30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpofX0pLHY9UHUoe2lucHV0czp7eDpifSxiYWNrZW5kOnQsYXR0cnM6e2JlZ2luOnAsc2l6ZTpmfX0pO3JldHVybiBnLnB1c2goeSksZy5wdXNoKHcpLGcucHVzaChiKSxnLmZvckVhY2goUz0+dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhTKSksdn0sYUo9e2tlcm5lbE5hbWU6aWQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmlKfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBsSihuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLHdlaWdodHM6b309ZSx7c2l6ZTppfT1zLGE9dC5yZWFkU3luYyhyLmRhdGFJZCksbD10LnJlYWRTeW5jKG8uZGF0YUlkKSxjPVNEKGEsbCxvLmR0eXBlLG8uc2hhcGUsaSk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oW2ldLG8uZHR5cGUsYyl9Y29uc3QgdUo9e2tlcm5lbE5hbWU6b20sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmxKfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBjSj1gCiAgaW50IHIgPSBpbnQoYS5yKSAmIGludChiLnIpOwogIGludCBnID0gaW50KGEuZykgJiBpbnQoYi5nKTsKICBpbnQgcmIgPSBpbnQoYS5iKSAmIGludChiLmIpOwogIGludCByYSA9IGludChhLmEpICYgaW50KGIuYSk7CiAgcmV0dXJuIHZlYzQociwgZywgcmIsIHJhKTsKYCxkSj1gCiAgcmV0dXJuIGZsb2F0KGludChhLnIpICYgaW50KGIucikpOwpgO2Z1bmN0aW9uIGhKKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7YTpzLGI6cn09ZSxvPW9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDS19CSU5BUllfT1BFUkFUSU9OUyIpLGk9b2UoKS5nZXROdW1iZXIoIldFQkdMX1ZFUlNJT04iKTtpZih0LnNob3VsZEV4ZWN1dGVPbkNQVShbcyxyXSl8fGk9PT0xKXtjb25zdCBsPXQudGV4RGF0YS5nZXQocy5kYXRhSWQpLnZhbHVlcyxjPXQudGV4RGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxbaCxwXT13WShzLnNoYXBlLHIuc2hhcGUsbCxjLHMuZHR5cGUpLGY9dC5tYWtlVGVuc29ySW5mbyhwLHMuZHR5cGUpLGc9dC50ZXhEYXRhLmdldChmLmRhdGFJZCk7cmV0dXJuIGcudmFsdWVzPWgsZn1sZXQgYTtyZXR1cm4gbz9hPW5ldyBGdShjSixzLnNoYXBlLHIuc2hhcGUsITEpOmE9bmV3IHhhKGRKLHMuc2hhcGUsci5zaGFwZSksdC5ydW5XZWJHTFByb2dyYW0oYSxbcyxyXSxzLmR0eXBlKX1jb25zdCBwSj17a2VybmVsTmFtZTphZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6aEp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGZKKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7czA6cyxzMTpyfT1lLG89dC5yZWFkU3luYyhzLmRhdGFJZCksaT10LnJlYWRTeW5jKHIuZGF0YUlkKSxhPUhlKEFycmF5LmZyb20obyksQXJyYXkuZnJvbShpKSk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oW2EubGVuZ3RoXSwiaW50MzIiLEludDMyQXJyYXkuZnJvbShhKSl9Y29uc3QgbUo9e2tlcm5lbE5hbWU6aW0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmZKfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBnSj0icmV0dXJuIGZsb2F0KGEgIT0gYik7IixMRD1Jbih7b3BTbmlwcGV0OmdKLGNwdUtlcm5lbEltcGw6VlksZHR5cGU6ImJvb2wifSkseUo9e2tlcm5lbE5hbWU6RmQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOkxEfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBQaChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se2lucHV0OnN9PWUscj10LnRleERhdGEuZ2V0KHMuZGF0YUlkKTtyZXR1cm4gTnMoe2lucHV0czp7eDpyLmNvbXBsZXhUZW5zb3JJbmZvcy5yZWFsfSxiYWNrZW5kOnR9KX1jb25zdCB4Sj17a2VybmVsTmFtZTpCbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6UGh9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGJKPSJyZXR1cm4gZmxvYXQoaW50KHgpKTsiO2Z1bmN0aW9uIHdKKG4sZSl7Y29uc3QgdD1uZXcgTXIobi5zaGFwZSxiSikscz1lLnJ1bldlYkdMUHJvZ3JhbSh0LFtuXSwiaW50MzIiKTtyZXR1cm57ZGF0YUlkOnMuZGF0YUlkLHNoYXBlOnMuc2hhcGUsZHR5cGU6cy5kdHlwZX19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdjEobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7ZHR5cGU6b309cztpZihvPT09ImNvbXBsZXg2NCIpe2lmKHIuZHR5cGU9PT0iY29tcGxleDY0IilyZXR1cm4gTnMoe2lucHV0czp7eDpyfSxiYWNrZW5kOnR9KTtjb25zdCBpPVl0KHIuc2hhcGUpLGE9djEoe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e2R0eXBlOiJmbG9hdDMyIn19KSxsPSRpKHtpbnB1dHM6e3JlYWw6YSxpbWFnOml9LGJhY2tlbmQ6dH0pO3JldHVybiBpLmRpc3Bvc2UoKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGEpLGx9aWYoci5kdHlwZT09PSJjb21wbGV4NjQiKXtjb25zdCBpPVBoKHtpbnB1dHM6e2lucHV0OnJ9LGJhY2tlbmQ6dH0pLGE9djEoe2lucHV0czp7eDppfSxiYWNrZW5kOnQsYXR0cnM6e2R0eXBlOm99fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaSksYX1pZighRTEoci5kdHlwZSxvKSl7Y29uc3QgaT1Ocyh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dH0pO3JldHVybntkYXRhSWQ6aS5kYXRhSWQsc2hhcGU6aS5zaGFwZSxkdHlwZTpvfX1pZih0LnNob3VsZEV4ZWN1dGVPbkNQVShbcl0pKXtjb25zdCBpPXQudGV4RGF0YS5nZXQoci5kYXRhSWQpLnZhbHVlcyxbYSxsLGNdPXZZKGksci5zaGFwZSxyLmR0eXBlLG8pO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGEsbCxjKX1pZihvPT09ImludDMyIilyZXR1cm4gd0oocix0KTtpZihvPT09ImJvb2wiKXtjb25zdCBpPXQubWFrZVRlbnNvckluZm8oW10sImJvb2wiLGhuKCJib29sIiwxKSksbD1MRCh7aW5wdXRzOnthOnIsYjppfSxiYWNrZW5kOnR9KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhpKSxsfXRocm93IG5ldyBFcnJvcihgRXJyb3IgaW4gQ2FzdDogZmFpbGVkIHRvIGNhc3QgJHtyLmR0eXBlfSB0byAke299YCl9Y29uc3Qgdko9e2tlcm5lbE5hbWU6T2wsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnYxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBXQz0icmV0dXJuIGNlaWwoeCk7IixTSj1pdCh7b3BTbmlwcGV0OldDLHBhY2tlZE9wU25pcHBldDpXQyxjcHVLZXJuZWxJbXBsOlNZfSksTko9e2tlcm5lbE5hbWU6RmwsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlNKfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBrSntjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl0sdGhpcy5jdXN0b21Vbmlmb3Jtcz1be25hbWU6Im1pblZhbCIsdHlwZToiZmxvYXQifSx7bmFtZToibWF4VmFsIix0eXBlOiJmbG9hdCJ9XSx0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy51c2VyQ29kZT1gCgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgZmxvYXQgdmFsdWUgPSBnZXRBQXRPdXRDb29yZHMoKTsKICAgICAgICBpZiAoaXNuYW4odmFsdWUpKSB7CiAgICAgICAgICBzZXRPdXRwdXQodmFsdWUpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgc2V0T3V0cHV0KGNsYW1wKHZhbHVlLCBtaW5WYWwsIG1heFZhbCkpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBDSntjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITAsdGhpcy5jdXN0b21Vbmlmb3Jtcz1be25hbWU6Im1pblZhbCIsdHlwZToiZmxvYXQifSx7bmFtZToibWF4VmFsIix0eXBlOiJmbG9hdCJ9XSx0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICB2ZWM0IHZhbHVlID0gZ2V0QUF0T3V0Q29vcmRzKCk7CgogICAgICAgIGlmIChhbnkoaXNuYW4odmFsdWUpKSkgewogICAgICAgICAgc2V0T3V0cHV0KHZhbHVlKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNldE91dHB1dChjbGFtcCh2YWx1ZSwgdmVjNChtaW5WYWwpLCB2ZWM0KG1heFZhbCkpKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gJEoobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7Y2xpcFZhbHVlTWluOm8sY2xpcFZhbHVlTWF4Oml9PXM7bGV0IGE7b2UoKS5nZXRCb29sKCJXRUJHTF9QQUNLX0NMSVAiKT9hPW5ldyBDSihyLnNoYXBlKTphPW5ldyBrSihyLnNoYXBlKTtjb25zdCBsPVtbb10sW2ldXTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oYSxbcl0sci5kdHlwZSxsKX1jb25zdCBJSj17a2VybmVsTmFtZTpMbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6JEp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIFRKe2NvbnN0cnVjdG9yKGUpe3RoaXMudmFyaWFibGVOYW1lcz1bInJlYWwiLCJpbWFnIl0sdGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgZmxvYXQgcmUgPSBhYnMoZ2V0UmVhbEF0T3V0Q29vcmRzKCkpOwogICAgICAgIGZsb2F0IGltID0gYWJzKGdldEltYWdBdE91dENvb3JkcygpKTsKICAgICAgICBmbG9hdCBteCA9IG1heChyZSwgaW0pOwoKICAgICAgICAvLyBzYWRseSB0aGUgbGVuZ3RoIGZ1bmN0aW9uIGluIGdsc2wgaXMgbm90IHVuZGVyZmxvdy1zYWZlCiAgICAgICAgLy8gKGF0IGxlYXN0IG5vdCBvbiBJbnRlbCBHUFVzKS4gU28gdGhlIHNhZmUgc29sdXRpb24gaXMKICAgICAgICAvLyB0byBlbnN1cmUgdW5kZXJmbG93LXNhZmV0eSBpbiBhbGwgY2FzZXMuCiAgICAgICAgc2V0T3V0cHV0KAogICAgICAgICAgbXggPT0gMC4wID8gMC4wIDogbXggKiBsZW5ndGgodmVjMigxLCBtaW4ocmUsIGltKS9teCkpCiAgICAgICAgKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gVUMobixlKXtyZXR1cm57ZGF0YUlkOmUuZGF0YUlkLGR0eXBlOmUuZHR5cGUsc2hhcGU6bi5zaGFwZX19ZnVuY3Rpb24gRUoobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHt4OnN9PWUscj10LnRleERhdGEuZ2V0KHMuZGF0YUlkKSxvPW5ldyBUSihzLnNoYXBlKSxpPVtVQyhzLHIuY29tcGxleFRlbnNvckluZm9zLnJlYWwpLFVDKHMsci5jb21wbGV4VGVuc29ySW5mb3MuaW1hZyldO3JldHVybiB0LnJ1bldlYkdMUHJvZ3JhbShvLGksaVswXS5kdHlwZSl9Y29uc3QgUko9e2tlcm5lbE5hbWU6bGQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOkVKfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBESntjb25zdHJ1Y3RvcihlKXt0aGlzLm91dHB1dFNoYXBlPVtdLHRoaXMub3V0cHV0U2hhcGU9V3IoZSwxKSx0aGlzLnZhcmlhYmxlTmFtZXM9ZS5tYXAoKGksYSk9PmBUJHthfWApO2NvbnN0IHQ9bmV3IEFycmF5KGUubGVuZ3RoLTEpO3RbMF09ZVswXVsxXTtmb3IobGV0IGk9MTtpPHQubGVuZ3RoO2krKyl0W2ldPXRbaS0xXStlW2ldWzFdO2NvbnN0IHM9W2BpZiAoeUMgPCAke3RbMF19KSBzZXRPdXRwdXQoZ2V0VDAoeVIsIHlDKSk7YF07Zm9yKGxldCBpPTE7aTx0Lmxlbmd0aDtpKyspe2NvbnN0IGE9dFtpLTFdO3MucHVzaChgZWxzZSBpZiAoeUMgPCAke3RbaV19KSBzZXRPdXRwdXQoZ2V0VCR7aX0oeVIsIHlDLSR7YX0pKTtgKX1jb25zdCByPXQubGVuZ3RoLG89dFt0Lmxlbmd0aC0xXTtzLnB1c2goYGVsc2Ugc2V0T3V0cHV0KGdldFQke3J9KHlSLCB5Qy0ke299KSk7YCksdGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMiBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgeVIgPSBjb29yZHMueDsKICAgICAgICBpbnQgeUMgPSBjb29yZHMueTsKCiAgICAgICAgJHtzLmpvaW4oYAogICAgICAgIGApfQogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBBSntjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGFja2VkSW5wdXRzPSEwLHRoaXMucGFja2VkT3V0cHV0PSEwLHRoaXMub3V0cHV0U2hhcGU9W10sdGhpcy5vdXRwdXRTaGFwZT1XcihlLHQpO2NvbnN0IHM9dGhpcy5vdXRwdXRTaGFwZSxyPXMubGVuZ3RoLG89eHQociksaT1HbigiY29vcmRzIixyKSxhPVsieCIsInkiLCJ6IiwidyIsInUiLCJ2Il0uc2xpY2UoMCxyKTt0aGlzLnZhcmlhYmxlTmFtZXM9ZS5tYXAoKHcsYik9PmBUJHtifWApO2NvbnN0IGw9bmV3IEFycmF5KGUubGVuZ3RoLTEpO2xbMF09ZVswXVt0XTtmb3IobGV0IHc9MTt3PGwubGVuZ3RoO3crKylsW3ddPWxbdy0xXStlW3ddW3RdO2NvbnN0IGM9YVt0XSxoPWEuc2xpY2UoLTIpLHA9YS5qb2luKCk7bGV0IGY9YGlmICgke2N9IDwgJHtsWzBdfSkgewogICAgICAgIHJldHVybiBnZXRDaGFubmVsKAogICAgICAgICAgICBnZXRUMCgke3B9KSwgdmVjMigke2guam9pbigpfSkpOwogICAgICAgIH1gO2ZvcihsZXQgdz0xO3c8bC5sZW5ndGg7dysrKXtjb25zdCBiPWxbdy0xXTtmKz1gCiAgICAgICAgaWYgKCR7Y30gPCAke2xbd119ICAmJiAke2N9ID49ICR7bFt3LTFdfSkgewogICAgICAgICAgcmV0dXJuIGdldENoYW5uZWwoCiAgICAgICAgICAgIGdldFQke3d9KCR7dWYoYSxjLGIpfSksCiAgICAgICAgICAgIHZlYzIoJHt1ZihoLGMsYil9KSk7CiAgICAgICAgfWB9Y29uc3QgZz1sLmxlbmd0aCx5PWxbbC5sZW5ndGgtMV07Zis9YAogICAgICAgIHJldHVybiBnZXRDaGFubmVsKAogICAgICAgICAgZ2V0VCR7Z30oJHt1ZihhLGMseSl9KSwKICAgICAgICAgIHZlYzIoJHt1ZihoLGMseSl9KSk7YCx0aGlzLnVzZXJDb2RlPWAKICAgICAgZmxvYXQgZ2V0VmFsdWUoJHthLm1hcCh3PT4iaW50ICIrdyl9KSB7CiAgICAgICAgJHtmfQogICAgICB9CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgJHtvfSBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoZ2V0VmFsdWUoJHtpfSksIDAuLCAwLiwgMC4pOwoKICAgICAgICAke2lbci0xXX0gPSAke2lbci0xXX0gKyAxOwogICAgICAgIGlmICgke2lbci0xXX0gPCAke3Nbci0xXX0pIHsKICAgICAgICAgIHJlc3VsdC5nID0gZ2V0VmFsdWUoJHtpfSk7CiAgICAgICAgfQoKICAgICAgICAke2lbci0yXX0gPSAke2lbci0yXX0gKyAxOwogICAgICAgIGlmICgke2lbci0yXX0gPCAke3Nbci0yXX0pIHsKICAgICAgICAgIHJlc3VsdC5hID0gZ2V0VmFsdWUoJHtpfSk7CiAgICAgICAgfQoKICAgICAgICAke2lbci0xXX0gPSAke2lbci0xXX0gLSAxOwogICAgICAgIGlmICgke2lbci0yXX0gPCAke3Nbci0yXX0gJiYKICAgICAgICAgICAgJHtpW3ItMV19IDwgJHtzW3ItMV19KSB7CiAgICAgICAgICByZXN1bHQuYiA9IGdldFZhbHVlKCR7aX0pOwogICAgICAgIH0KICAgICAgICBzZXRPdXRwdXQocmVzdWx0KTsKICAgICAgfQogICAgYH19ZnVuY3Rpb24gdWYobixlLHQpe2NvbnN0IHM9bi5pbmRleE9mKGUpO3JldHVybiBuLm1hcCgobyxpKT0+aT09PXM/YCR7b30gLSAke3R9YDpvKS5qb2luKCl9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gaHkobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtpbnB1dDpzfT1lLHI9dC50ZXhEYXRhLmdldChzLmRhdGFJZCk7cmV0dXJuIE5zKHtpbnB1dHM6e3g6ci5jb21wbGV4VGVuc29ySW5mb3MuaW1hZ30sYmFja2VuZDp0fSl9Y29uc3QgX0o9e2tlcm5lbE5hbWU6JG0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmh5fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBSYyhuLGUsdCl7Y29uc3Qgcz1uWzBdLmR0eXBlO2lmKHM9PT0iY29tcGxleDY0Iil7Y29uc3QgZz1uLm1hcChTPT5QaCh7aW5wdXRzOntpbnB1dDpTfSxiYWNrZW5kOnR9KSkseT1uLm1hcChTPT5oeSh7aW5wdXRzOntpbnB1dDpTfSxiYWNrZW5kOnR9KSksdz1SYyhnLGUsdCksYj1SYyh5LGUsdCksdj0kaSh7aW5wdXRzOntyZWFsOncsaW1hZzpifSxiYWNrZW5kOnR9KTtyZXR1cm4gZy5mb3JFYWNoKFM9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oUykpLHkuZm9yRWFjaChTPT50LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKFMpKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHcpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYiksdn1sZXQgcj10LnNob3VsZEV4ZWN1dGVPbkNQVShuKTtpZihzPT09InN0cmluZyImJihyPSEwKSxyKXtjb25zdCBnPW4ubWFwKGs9Pntjb25zdCBEPVstMSxjZShrLnNoYXBlLnNsaWNlKGUpKV07cmV0dXJuIENlKHtpbnB1dHM6e3g6a30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpEfX0pfSkseT1nLm1hcChrPT4oe3ZhbHM6dC5yZWFkU3luYyhrLmRhdGFJZCksc2hhcGU6ay5zaGFwZX0pKSx3PVdyKGcubWFwKGs9Pmsuc2hhcGUpLDEpLGI9Z1swXS5zaGFwZVswXT09PTEsdj1OWSh5LHcscyxiKSxTPVdyKG4ubWFwKGs9Pmsuc2hhcGUpLGUpLCQ9dC5tYWtlVGVuc29ySW5mbyhTLHMsdik7cmV0dXJuIGcuZm9yRWFjaChrPT50LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGspKSwkfWNvbnN0IG89bi5maWx0ZXIoZz0+Y2UoZy5zaGFwZSk+MCksaT1vZSgpLmdldEJvb2woIldFQkdMX1BBQ0tfQVJSQVlfT1BFUkFUSU9OUyIpJiZvWzBdLnNoYXBlLmxlbmd0aD4xO2lmKG8ubGVuZ3RoPT09MSl7Y29uc3QgZz1pP25ldyBNcihuWzBdLnNoYXBlLFlvKTpuZXcgZWkoblswXS5zaGFwZSxZbyk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGcsbixzKX1jb25zdCBhPW9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9NQVhfVEVYVFVSRVNfSU5fU0hBREVSIik7aWYoby5sZW5ndGg+YSl7Y29uc3QgZz1bXTtmb3IobGV0IHc9MDt3PG8ubGVuZ3RoO3crPWEpe2NvbnN0IGI9by5zbGljZSh3LHcrYSk7Zy5wdXNoKFJjKGIsZSx0KSl9Y29uc3QgeT1SYyhnLGUsdCk7Zm9yKGNvbnN0IHcgb2YgZyl0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHcpO3JldHVybiB5fWlmKGkpe2NvbnN0IGc9bmV3IEFKKG8ubWFwKHk9Pnkuc2hhcGUpLGUpO3JldHVybiB0LnJ1bldlYkdMUHJvZ3JhbShnLG8scyl9Y29uc3R7dGVuc29yczJEOmwsb3V0U2hhcGU6Y309T0oobyxlLHQpLGg9bmV3IERKKGwubWFwKGc9Pmcuc2hhcGUpKSxwPXQucnVuV2ViR0xQcm9ncmFtKGgsbCxzKTtsLmZvckVhY2goZz0+dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhnKSk7Y29uc3QgZj1DZSh7aW5wdXRzOnt4OnB9LGF0dHJzOntzaGFwZTpjfSxiYWNrZW5kOnR9KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhwKSxmfWZ1bmN0aW9uIE9KKG4sZSx0KXtjb25zdCBzPVdyKG4ubWFwKG89Pm8uc2hhcGUpLGUpO3JldHVybnt0ZW5zb3JzMkQ6bi5tYXAobz0+Q2Uoe2lucHV0czp7eDpvfSxhdHRyczp7c2hhcGU6Wy0xLGNlKG8uc2hhcGUuc2xpY2UoZSkpXX0sYmFja2VuZDp0fSkpLG91dFNoYXBlOnN9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFBEKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtheGlzOnJ9PXMsbz1RZShyLGVbMF0uc2hhcGUpWzBdLGk9ZS5tYXAoYz0+Yy5zaGFwZSk7Y3coaSxvKTtjb25zdCBhPVdyKGUubWFwKGM9PmMuc2hhcGUpLG8pO2lmKGNlKGEpPT09MClyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhhLGVbMF0uZHR5cGUsW10pO2NvbnN0IGw9ZS5maWx0ZXIoYz0+Y2UoYy5zaGFwZSk+MCk7cmV0dXJuIGwubGVuZ3RoPT09MT9Ocyh7aW5wdXRzOnt4OmxbMF19LGJhY2tlbmQ6dH0pOlJjKGwsbyx0KX1jb25zdCBGSj17a2VybmVsTmFtZTp1ZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6UER9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIHpEe2NvbnN0cnVjdG9yKGUsdD0hMSxzPW51bGwscj0hMSxvPSExKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4IiwiVyJdLHRoaXMub3V0cHV0U2hhcGU9ZS5vdXRTaGFwZTtjb25zdCBpPWUucGFkSW5mby50b3AsYT1lLnBhZEluZm8ubGVmdCxsPWUuc3RyaWRlSGVpZ2h0LGM9ZS5zdHJpZGVXaWR0aCxoPWUuZGlsYXRpb25IZWlnaHQscD1lLmRpbGF0aW9uV2lkdGgsZj1lLmZpbHRlckhlaWdodCxnPWUuZmlsdGVyV2lkdGgseT1NYXRoLmZsb29yKGUuaW5DaGFubmVscy80KSo0LHc9ZS5pbkNoYW5uZWxzJTQsYj1lLmRhdGFGb3JtYXQ9PT0iY2hhbm5lbHNMYXN0Iix2PWI/MToyLFM9Yj8yOjMsJD1iPzM6MTtsZXQgaz0iIixUPSIiO3MmJihyP2s9YGZsb2F0IGFjdGl2YXRpb24oZmxvYXQgYSkgewogICAgICAgICAgZmxvYXQgYiA9IGdldFByZWx1QWN0aXZhdGlvbldlaWdodHNBdE91dENvb3JkcygpOwogICAgICAgICAgJHtzfQogICAgICAgIH1gOm8/az1gZmxvYXQgYWN0aXZhdGlvbihmbG9hdCBhKSB7CiAgICAgICAgICBmbG9hdCBiID0gZ2V0TGVha3lyZWx1QWxwaGFBdE91dENvb3JkcygpOwogICAgICAgICAgJHtzfQogICAgICAgIH1gOms9YAogICAgICAgICAgZmxvYXQgYWN0aXZhdGlvbihmbG9hdCB4KSB7CiAgICAgICAgICAgICR7c30KICAgICAgICAgIH0KICAgICAgICBgLFQ9InJlc3VsdCA9IGFjdGl2YXRpb24ocmVzdWx0KTsiKTtjb25zdCBEPXQ/InJlc3VsdCArPSBnZXRCaWFzQXRPdXRDb29yZHMoKTsiOiIiO3QmJnRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCJiaWFzIiksciYmdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goInByZWx1QWN0aXZhdGlvbldlaWdodHMiKSxvJiZ0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgibGVha3lyZWx1QWxwaGEiKSx0aGlzLnVzZXJDb2RlPWAKICAgICAgJHtrfQoKICAgICAgY29uc3QgaXZlYzIgc3RyaWRlcyA9IGl2ZWMyKCR7bH0sICR7Y30pOwogICAgICBjb25zdCBpdmVjMiBwYWRzID0gaXZlYzIoJHtpfSwgJHthfSk7CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGJhdGNoID0gY29vcmRzWzBdOwogICAgICAgIGludCBkMiA9IGNvb3Jkc1skeyR9XTsKCiAgICAgICAgaXZlYzIgeFJDQ29ybmVyID0KICAgICAgICAgICAgaXZlYzIoY29vcmRzWyR7dn1dLCBjb29yZHNbJHtTfV0pICogc3RyaWRlcyAtIHBhZHM7CiAgICAgICAgaW50IHhSQ29ybmVyID0geFJDQ29ybmVyLng7CiAgICAgICAgaW50IHhDQ29ybmVyID0geFJDQ29ybmVyLnk7CgogICAgICAgIC8vIENvbnZvbHZlIHgoPywgPywgZDEpIHdpdGggdyg6LCA6LCBkMSwgZDIpIHRvIGdldCB5KHlSLCB5QywgZDIpLgogICAgICAgIC8vID8gPSB0byBiZSBkZXRlcm1pbmVkLiA6ID0gYWNyb3NzIGFsbCB2YWx1ZXMgaW4gdGhhdCBheGlzLgogICAgICAgIGZsb2F0IGRvdFByb2QgPSAwLjA7CiAgICAgICAgZm9yIChpbnQgd1IgPSAwOyB3UiA8ICR7Zn07IHdSKyspIHsKICAgICAgICAgIGludCB4UiA9IHhSQ29ybmVyICsgd1IgKiAke2h9OwoKICAgICAgICAgIGlmICh4UiA8IDAgfHwgeFIgPj0gJHtlLmluSGVpZ2h0fSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKGludCB3QyA9IDA7IHdDIDwgJHtnfTsgd0MrKykgewogICAgICAgICAgICBpbnQgeEMgPSB4Q0Nvcm5lciArIHdDICogJHtwfTsKCiAgICAgICAgICAgIGlmICh4QyA8IDAgfHwgeEMgPj0gJHtlLmluV2lkdGh9KSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAoaW50IGQxID0gMDsgZDEgPCAke3l9OyBkMSArPSA0KSB7CiAgICAgICAgICAgICAgdmVjNCB3VmFsdWVzID0gdmVjNCgKICAgICAgICAgICAgICAgIGdldFcod1IsIHdDLCBkMSwgZDIpLAogICAgICAgICAgICAgICAgZ2V0Vyh3Uiwgd0MsIGQxICsgMSwgZDIpLAogICAgICAgICAgICAgICAgZ2V0Vyh3Uiwgd0MsIGQxICsgMiwgZDIpLAogICAgICAgICAgICAgICAgZ2V0Vyh3Uiwgd0MsIGQxICsgMywgZDIpCiAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgaWYgKCR7Yn0pIHsKICAgICAgICAgICAgICAgIHZlYzQgeFZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhSLCB4QywgZDEpLAogICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCB4UiwgeEMsIGQxICsgMSksCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhSLCB4QywgZDEgKyAyKSwKICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgeFIsIHhDLCBkMSArIDMpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgZG90UHJvZCArPSBkb3QoeFZhbHVlcywgd1ZhbHVlcyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZlYzQgeFZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIGQxLCB4UiwgeEMpLAogICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCBkMSArIDEsIHhSLCB4QyksCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIGQxICsgMiwgeFIsIHhDKSwKICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgZDEgKyAzLCB4UiwgeEMpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgZG90UHJvZCArPSBkb3QoeFZhbHVlcywgd1ZhbHVlcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHt3PT09MX0pIHsKCiAgICAgICAgICAgICAgaWYgKCR7Yn0pIHsKICAgICAgICAgICAgICAgIGRvdFByb2QgKz0KICAgICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCB4UiwgeEMsICR7eX0pICoKICAgICAgICAgICAgICAgICAgICBnZXRXKHdSLCB3QywgJHt5fSwgZDIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkb3RQcm9kICs9CiAgICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgJHt5fSwgeFIsIHhDKSAqCiAgICAgICAgICAgICAgICAgICAgZ2V0Vyh3Uiwgd0MsICR7eX0sIGQyKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9IGVsc2UgaWYgKCR7dz09PTJ9KSB7CiAgICAgICAgICAgICAgdmVjMiB3VmFsdWVzID0gdmVjMigKICAgICAgICAgICAgICAgIGdldFcod1IsIHdDLCAke3l9LCBkMiksCiAgICAgICAgICAgICAgICBnZXRXKHdSLCB3QywgJHt5fSArIDEsIGQyKQogICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgIGlmICgke2J9KSB7CiAgICAgICAgICAgICAgICB2ZWMyIHhWYWx1ZXMgPSB2ZWMyKAogICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCB4UiwgeEMsICR7eX0pLAogICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCB4UiwgeEMsICR7eX0gKyAxKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGRvdFByb2QgKz0gZG90KHhWYWx1ZXMsIHdWYWx1ZXMpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2ZWMyIHhWYWx1ZXMgPSB2ZWMyKAogICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCAke3l9LCB4UiwgeEMpLAogICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCAke3l9ICsgMSwgeFIsIHhDKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGRvdFByb2QgKz0gZG90KHhWYWx1ZXMsIHdWYWx1ZXMpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHt3PT09M30pIHsKICAgICAgICAgICAgICB2ZWMzIHdWYWx1ZXMgPSB2ZWMzKAogICAgICAgICAgICAgICAgZ2V0Vyh3Uiwgd0MsICR7eX0sIGQyKSwKICAgICAgICAgICAgICAgIGdldFcod1IsIHdDLCAke3l9ICsgMSwgZDIpLAogICAgICAgICAgICAgICAgZ2V0Vyh3Uiwgd0MsICR7eX0gKyAyLCBkMikKICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICBpZiAoJHtifSkgewogICAgICAgICAgICAgICAgdmVjMyB4VmFsdWVzID0gdmVjMygKICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgeFIsIHhDLCAke3l9KSwKICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgeFIsIHhDLCAke3l9ICsgMSksCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhSLCB4QywgJHt5fSArIDIpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgZG90UHJvZCArPSBkb3QoeFZhbHVlcywgd1ZhbHVlcyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZlYzMgeFZhbHVlcyA9IHZlYzMoCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsICR7eX0sIHhSLCB4QyksCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsICR7eX0gKyAxLCB4UiwgeEMpLAogICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCAke3l9ICsgMiwgeFIsIHhDKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGRvdFByb2QgKz0gZG90KHhWYWx1ZXMsIHdWYWx1ZXMpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZsb2F0IHJlc3VsdCA9IGRvdFByb2Q7CiAgICAgICAgJHtEfQogICAgICAgICR7VH0KICAgICAgICBzZXRPdXRwdXQocmVzdWx0KTsKICAgICAgfQogICAgYH19Y2xhc3MgTEp7Y29uc3RydWN0b3IoZSl7dGhpcy52YXJpYWJsZU5hbWVzPVsieCIsIlciXSx0aGlzLm91dHB1dFNoYXBlPWUub3V0U2hhcGU7Y29uc3QgdD1lLnBhZEluZm8uZnJvbnQscz1lLnBhZEluZm8udG9wLHI9ZS5wYWRJbmZvLmxlZnQsbz1lLnN0cmlkZURlcHRoLGk9ZS5zdHJpZGVIZWlnaHQsYT1lLnN0cmlkZVdpZHRoLGw9ZS5kaWxhdGlvbkRlcHRoLGM9ZS5kaWxhdGlvbkhlaWdodCxoPWUuZGlsYXRpb25XaWR0aCxwPWUuZmlsdGVyRGVwdGgsZj1lLmZpbHRlckhlaWdodCxnPWUuZmlsdGVyV2lkdGgseT1NYXRoLmZsb29yKGUuaW5DaGFubmVscy80KSo0LHc9ZS5pbkNoYW5uZWxzJTQ7dGhpcy51c2VyQ29kZT1gCiAgICAgIGNvbnN0IGl2ZWMzIHN0cmlkZXMgPSBpdmVjMygke299LCAke2l9LCAke2F9KTsKICAgICAgY29uc3QgaXZlYzMgcGFkcyA9IGl2ZWMzKCR7dH0sICR7c30sICR7cn0pOwoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWM1IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiYXRjaCA9IGNvb3Jkcy54OwogICAgICAgIGludCBkMiA9IGNvb3Jkcy51OwoKICAgICAgICBpdmVjMyB4RlJDQ29ybmVyID0gaXZlYzMoY29vcmRzLnksIGNvb3Jkcy56LCBjb29yZHMudykgKiBzdHJpZGVzIC0gcGFkczsKICAgICAgICBpbnQgeEZDb3JuZXIgPSB4RlJDQ29ybmVyLng7CiAgICAgICAgaW50IHhSQ29ybmVyID0geEZSQ0Nvcm5lci55OwogICAgICAgIGludCB4Q0Nvcm5lciA9IHhGUkNDb3JuZXIuejsKCiAgICAgICAgLy8gQ29udm9sdmUgeCg/LCA/LCA/LCBkMSkgd2l0aCB3KDosIDosIDosIGQxLCBkMikgdG8gZ2V0CiAgICAgICAgLy8geSh5RiwgeVIsIHlDLCBkMikuID8gPSB0byBiZSBkZXRlcm1pbmVkLiA6ID0gYWNyb3NzIGFsbAogICAgICAgIC8vIHZhbHVlcyBpbiB0aGF0IGF4aXMuCiAgICAgICAgZmxvYXQgZG90UHJvZCA9IDAuMDsKICAgICAgICBmb3IgKGludCB3RiA9IDA7IHdGIDwgJHtwfTsgd0YrKykgewogICAgICAgICAgaW50IHhGID0geEZDb3JuZXIgKyB3RiAqICR7bH07CgogICAgICAgICAgaWYgKHhGIDwgMCB8fCB4RiA+PSAke2UuaW5EZXB0aH0pIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yIChpbnQgd1IgPSAwOyB3UiA8ICR7Zn07IHdSKyspIHsKICAgICAgICAgICAgaW50IHhSID0geFJDb3JuZXIgKyB3UiAqICR7Y307CgogICAgICAgICAgICBpZiAoeFIgPCAwIHx8IHhSID49ICR7ZS5pbkhlaWdodH0pIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChpbnQgd0MgPSAwOyB3QyA8ICR7Z307IHdDKyspIHsKICAgICAgICAgICAgICBpbnQgeEMgPSB4Q0Nvcm5lciArIHdDICogJHtofTsKCiAgICAgICAgICAgICAgaWYgKHhDIDwgMCB8fCB4QyA+PSAke2UuaW5XaWR0aH0pIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yIChpbnQgZDEgPSAwOyBkMSA8ICR7eX07IGQxICs9IDQpIHsKICAgICAgICAgICAgICAgIHZlYzQgeFZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhGLCB4UiwgeEMsIGQxKSwKICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgeEYsIHhSLCB4QywgZDEgKyAxKSwKICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgeEYsIHhSLCB4QywgZDEgKyAyKSwKICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgeEYsIHhSLCB4QywgZDEgKyAzKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHZlYzQgd1ZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgICAgICAgIGdldFcod0YsIHdSLCB3QywgZDEsIGQyKSwKICAgICAgICAgICAgICAgICAgZ2V0Vyh3Riwgd1IsIHdDLCBkMSArIDEsIGQyKSwKICAgICAgICAgICAgICAgICAgZ2V0Vyh3Riwgd1IsIHdDLCBkMSArIDIsIGQyKSwKICAgICAgICAgICAgICAgICAgZ2V0Vyh3Riwgd1IsIHdDLCBkMSArIDMsIGQyKQogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICBkb3RQcm9kICs9IGRvdCh4VmFsdWVzLCB3VmFsdWVzKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICgke3c9PT0xfSkgewogICAgICAgICAgICAgICAgZG90UHJvZCArPQogICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCB4RiwgeFIsIHhDLCAke3l9KSAqCiAgICAgICAgICAgICAgICAgIGdldFcod0YsIHdSLCB3QywgJHt5fSwgZDIpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHt3PT09Mn0pIHsKICAgICAgICAgICAgICAgIHZlYzIgeFZhbHVlcyA9IHZlYzIoCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhGLCB4UiwgeEMsICR7eX0pLAogICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCB4RiwgeFIsIHhDLCAke3l9ICsgMSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB2ZWMyIHdWYWx1ZXMgPSB2ZWMyKAogICAgICAgICAgICAgICAgICBnZXRXKHdGLCB3Uiwgd0MsICR7eX0sIGQyKSwKICAgICAgICAgICAgICAgICAgZ2V0Vyh3Riwgd1IsIHdDLCAke3l9ICsgMSwgZDIpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgZG90UHJvZCArPSBkb3QoeFZhbHVlcywgd1ZhbHVlcyk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICgke3c9PT0zfSkgewogICAgICAgICAgICAgICAgdmVjMyB4VmFsdWVzID0gdmVjMygKICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgeEYsIHhSLCB4QywgJHt5fSksCiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhGLCB4UiwgeEMsICR7eX0gKyAxKSwKICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgeEYsIHhSLCB4QywgJHt5fSArIDIpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgdmVjMyB3VmFsdWVzID0gdmVjMygKICAgICAgICAgICAgICAgICAgZ2V0Vyh3Riwgd1IsIHdDLCAke3l9LCBkMiksCiAgICAgICAgICAgICAgICAgIGdldFcod0YsIHdSLCB3QywgJHt5fSArIDEsIGQyKSwKICAgICAgICAgICAgICAgICAgZ2V0Vyh3Riwgd1IsIHdDLCAke3l9ICsgMiwgZDIpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgZG90UHJvZCArPSBkb3QoeFZhbHVlcywgd1ZhbHVlcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNldE91dHB1dChkb3RQcm9kKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgTUR7Y29uc3RydWN0b3IoZSx0PSExLHM9bnVsbCxyPSExLG89ITEpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiLCJXIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITAsdGhpcy5jdXN0b21Vbmlmb3Jtcz1be25hbWU6InBhZHMiLHR5cGU6Iml2ZWMyIn0se25hbWU6InN0cmlkZXMiLHR5cGU6Iml2ZWMyIn0se25hbWU6ImRpbGF0aW9ucyIsdHlwZToiaXZlYzIifSx7bmFtZToiaW5EaW1zIix0eXBlOiJpdmVjMiJ9XSx0aGlzLm91dHB1dFNoYXBlPWUub3V0U2hhcGUsdGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPUxuKHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoKTtjb25zdCBpPWUucGFkSW5mby5sZWZ0LGE9ZS5zdHJpZGVXaWR0aCxsPWUuZGlsYXRpb25XaWR0aCxjPWUuZmlsdGVySGVpZ2h0LGg9ZS5maWx0ZXJXaWR0aCxwPWg7bGV0IGY9YAogICAgICAgaW50IHhSOyBpbnQgeEM7IGludCB4Q09mZnNldDsKICAgICAgIHZlYzQgd1RleGVsOyB2ZWM0IHByZXZpb3VzOyB2ZWM0IGZpbmFsO2A7Zm9yKGxldCBiPTA7YjxoO2IrKylmKz1gCiAgICAgICAgICAgdmVjNCB4VGV4ZWxDJHtiKjJ9OwogICAgICAgICAgIGludCB4VGV4ZWxDJHtiKjJ9UmVhZHk7CiAgICAgICAgICAgdmVjNCB4VGV4ZWxDJHtiKjIrMX07CiAgICAgICAgICAgaW50IHhUZXhlbEMke2IqMisxfVJlYWR5OwogICAgICAgICAgIHZlYzQgeEMke2J9O2A7Zis9YAogICAgIGZvciAoaW50IHIgPSAwOyByIDwgJHtjfTsgcisrKSB7CiAgICAgIGZvciAoaW50IGQxID0gMDsgZDEgPCAke2UuaW5DaGFubmVsc307IGQxICs9IDIpIHsKICAgICAgIGA7Zm9yKGxldCBiPTA7YjxoO2IrKylmKz1gCiAgICAgICAgICAgeFRleGVsQyR7YioyfSA9IHZlYzQoMC4wKTsKICAgICAgICAgICB4VGV4ZWxDJHtiKjJ9UmVhZHkgPSAwOwogICAgICAgICAgIHhUZXhlbEMke2IqMisxfSA9IHZlYzQoMC4wKTsKICAgICAgICAgICB4VGV4ZWxDJHtiKjIrMX1SZWFkeSA9IDA7CiAgICAgICAgICAgeEMke2J9ID0gdmVjNCgwLjApO2A7Zis9YAogICAgICAgICB4UiA9IHhSQ29ybmVyICsgciAqIGRpbGF0aW9uc1swXTsKICAgICAgICAgaWYgKHhSID49MCAmJiB4UiA8IGluRGltc1swXSkgewogICAgICAgYDtmb3IobGV0IGI9MDtiPChwKzEpLzI7YisrKXtjb25zdCB2PWIqMjtpZihmKz1gCiAgICAgICAgICAgeEMgPSB4Q0Nvcm5lciArICR7dipsfTsKICAgICAgICAgICBgLGE9PT0xKXtpZih2PGgmJihpJTI9PT0xPyhmKz1gCiAgICAgICAgICAgICAgICAgeENPZmZzZXQgPSB4QyArIDE7CiAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ID49IDAgJiYgeENPZmZzZXQgPCBpbkRpbXNbMV0gJiYgeFRleGVsQyR7dn1SZWFkeSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICB4VGV4ZWxDJHt2fSA9IGdldFgoYmF0Y2gsIHhSLCB4Q09mZnNldCwgZDEpOwoKICAgICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gbWFudWFsbHkgY2xlYXIgdW51c2VkIGNoYW5uZWxzIGluIGNhc2UKICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIHJlYWRpbmcgZnJvbSByZWN5Y2xlZCB0ZXh0dXJlLgogICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ICsgMSA+PSBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgeFRleGVsQyR7dn0uencgPSB2ZWMyKDAuMCk7CiAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICB4VGV4ZWxDJHt2fVJlYWR5ID0gMTsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGAsbD09PTEmJnY+MD9mKz1gCiAgICAgICAgICAgICAgICAgeEMke3Z9ID0gdmVjNCh4VGV4ZWxDJHt2LTJ9Lnp3LCB4VGV4ZWxDJHt2fS54eSk7CiAgICAgICAgICAgICAgICAgYDpmKz1gCiAgICAgICAgICAgICAgICAgICB4Q09mZnNldCA9IHhDICsgMSAtIDI7CgogICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ID49IDAgJiYgeENPZmZzZXQgPCBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXMgPSBnZXRYKGJhdGNoLCB4UiwgeENPZmZzZXQsIGQxKTsKCiAgICAgICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gbWFudWFsbHkgY2xlYXIgdW51c2VkIGNoYW5uZWxzIGluIGNhc2UKICAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgcmVhZGluZyBmcm9tIHJlY3ljbGVkIHRleHR1cmUuCiAgICAgICAgICAgICAgICAgICAgIGlmICh4Q09mZnNldCArIDEgPj0gaW5EaW1zWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXMuencgPSB2ZWMyKDAuMCk7CiAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgIHhDJHt2fSA9IHZlYzQocHJldmlvdXMuencsIHhUZXhlbEMke3Z9Lnh5KTsKICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgIHhDJHt2fSA9IHZlYzQoMC4wLCAwLjAsIHhUZXhlbEMke3Z9Lnh5KTsKICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgIGApOmYrPWAKICAgICAgICAgICAgICAgICBpZiAoeEMgPj0gMCAmJiB4QyA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHt2fVJlYWR5ID09IDApIHsKICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3Z9ID0gZ2V0WChiYXRjaCwgeFIsIHhDLCBkMSk7CiAgICAgICAgICAgICAgICAgICBpZiAoeEMgKyAxID49IGluRGltc1sxXSkgewogICAgICAgICAgICAgICAgICAgICB4VGV4ZWxDJHt2fS56dyA9IHZlYzIoMC4wKTsKICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3Z9UmVhZHkgPSAxOwogICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgeEMke3Z9ID0geFRleGVsQyR7dn07CiAgICAgICAgICAgICAgICAgYCx2KzE8aCkpe2NvbnN0IFM9aSUyPT09MD9KZihsKTpsO2wlMj09PTAmJmklMj09PTF8fGwlMiE9PTAmJmklMiE9PTE/KGYrPWAKICAgICAgICAgICAgICAgICAgIHhDT2Zmc2V0ID0geEMgKyBpbW9kKHBhZHNbMV0sIDIpICsgJHtTfTsKCiAgICAgICAgICAgICAgICAgICBpZiAoeENPZmZzZXQgPj0gMCAmJiB4Q09mZnNldCA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHt2KzF9UmVhZHkgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICB4VGV4ZWxDJHt2KzF9ID0gZ2V0WChiYXRjaCwgeFIsIHhDT2Zmc2V0LCBkMSk7CgogICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIG1hbnVhbGx5IGNsZWFyIHVudXNlZCBjaGFubmVscyBpbiBjYXNlCiAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIHJlYWRpbmcgZnJvbSByZWN5Y2xlZCB0ZXh0dXJlLgogICAgICAgICAgICAgICAgICAgICBpZiAoeENPZmZzZXQgKyAxID49IGluRGltc1sxXSkgewogICAgICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3YrMX0uencgPSB2ZWMyKDAuMCk7CiAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgeFRleGVsQyR7disxfVJlYWR5ID0gMTsKICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgIGAsbD4xP2YrPWAKICAgICAgICAgICAgICAgICAgICAgeENPZmZzZXQgLT0gMjsKICAgICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ID49IDAgJiYgeENPZmZzZXQgPCBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzID0gZ2V0WChiYXRjaCwgeFIsIHhDT2Zmc2V0LCBkMSk7CiAgICAgICAgICAgICAgICAgICAgICB4QyR7disxfSA9IHZlYzQocHJldmlvdXMuencsIHhUZXhlbEMke3YrMX0ueHkpOwogICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgeEMke3YrMX0gPSB2ZWM0KDAuMCwgMC4wLCB4VGV4ZWxDJHt2KzF9Lnh5KTsKICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICBgOmYrPWAKICAgICAgICAgICAgICAgICAgICAgeEMke3YrMX0gPSB2ZWM0KHhUZXhlbEMke3Z9Lnp3LCB4VGV4ZWxDJHt2KzF9Lnh5KTsKICAgICAgICAgICAgICAgICAgICAgYCk6Uz09PTE/Zis9YAogICAgICAgICAgICAgICAgICAgICB4QyR7disxfSA9IHhUZXhlbEMke3Z9OwogICAgICAgICAgICAgICAgICAgICBgOmYrPWAKICAgICAgICAgICAgICAgICAgICAgeENPZmZzZXQgPSB4QyArICR7U307CgogICAgICAgICAgICAgICAgICAgICBpZiAoeENPZmZzZXQgPj0gMCAmJiB4Q09mZnNldCA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHt2KzF9UmVhZHkgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3YrMX0gPSBnZXRYKGJhdGNoLCB4UiwgeENPZmZzZXQsIGQxKTsKICAgICAgICAgICAgICAgICAgICAgICBpZiAoeENPZmZzZXQgKyAxID49IGluRGltc1sxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgeFRleGVsQyR7disxfS56dyA9IHZlYzIoMC4wKTsKICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgeFRleGVsQyR7disxfVJlYWR5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgeEMke3YrMX0gPSB4VGV4ZWxDJHt2KzF9OwogICAgICAgICAgICAgICAgICAgICBgfX1lbHNlIHY8aCYmKGklMj09PTE/KGYrPWAKICAgICAgICAgICAgICAgICB4Q09mZnNldCA9IHhDICsgMSAtIHN0cmlkZXNbMV07CiAgICAgICAgICAgICAgICAgaWYoeENPZmZzZXQgPj0gMCAmJiB4Q09mZnNldCA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHt2fVJlYWR5ID09IDApIHsKICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3Z9ID0gZ2V0WChiYXRjaCwgeFIsIHhDT2Zmc2V0LCBkMSk7CiAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIG1hbnVhbGx5IGNsZWFyIHVudXNlZCBjaGFubmVscyBpbiBjYXNlCiAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSByZWFkaW5nIGZyb20gcmVjeWNsZWQgdGV4dHVyZS4KICAgICAgICAgICAgICAgICAgIGlmICh4Q09mZnNldCArIDEgPj0gaW5EaW1zWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3Z9Lnp3ID0gdmVjMigwLjApOwogICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgeFRleGVsQyR7dn1SZWFkeSA9IDE7CiAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICBpZih4QyArIDEgPj0gMCAmJiB4QyArIDEgPCBpbkRpbXNbMV0gJiYgeFRleGVsQyR7disxfVJlYWR5ID09IDApIHsKICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3YrMX0gPSBnZXRYKGJhdGNoLCB4UiwgeEMgKyAxLCBkMSk7CiAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIG1hbnVhbGx5IGNsZWFyIHVudXNlZCBjaGFubmVscyBpbiBjYXNlCiAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSByZWFkaW5nIGZyb20gcmVjeWNsZWQgdGV4dHVyZS4KICAgICAgICAgICAgICAgICAgIGlmICh4QyArIDIgPj0gaW5EaW1zWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3YrMX0uencgPSB2ZWMyKDAuMCk7CiAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICB4VGV4ZWxDJHt2KzF9UmVhZHkgPSAxOwogICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgeEMke3Z9ID0gdmVjNCh4VGV4ZWxDJHt2fS56dywgeFRleGVsQyR7disxfS56dyk7CiAgICAgICAgICAgICAgIGAsdisxPGgmJihmKz1gCiAgICAgICAgICAgICAgICAgICBmaW5hbCA9IHZlYzQoMC4wKTsKICAgICAgICAgICAgICAgICAgIHhDT2Zmc2V0ID0geEMgKyAxICsgc3RyaWRlc1sxXTsKICAgICAgICAgICAgICAgICAgIGlmKHhDT2Zmc2V0ID49IDAgJiYgeENPZmZzZXQgPCBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgZmluYWwgPSBnZXRYKGJhdGNoLCB4UiwgeENPZmZzZXQsIGQxKTsKICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgIHhDJHt2KzF9ID0gdmVjNCh4VGV4ZWxDJHt2KzF9Lnh5LCBmaW5hbC54eSk7CiAgICAgICAgICAgICAgICAgYCkpOihmKz1gCiAgICAgICAgICAgICAgICAgaWYoeEMgPj0gMCAmJiB4QyA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHt2fVJlYWR5ID09IDApIHsKICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3Z9ID0gZ2V0WChiYXRjaCwgeFIsIHhDLCBkMSk7CiAgICAgICAgICAgICAgICAgICBpZiAoeEMgKyAxID49IGluRGltc1sxXSkgewogICAgICAgICAgICAgICAgICAgICB4VGV4ZWxDJHt2fS56dyA9IHZlYzIoMC4wKTsKICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke3Z9UmVhZHkgPSAxOwogICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgeENPZmZzZXQgPSB4QyArIHN0cmlkZXNbMV07CiAgICAgICAgICAgICAgICAgaWYoeENPZmZzZXQgPj0gMCAmJiB4Q09mZnNldCA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHt2KzF9UmVhZHkgPT0gMCkgewogICAgICAgICAgICAgICAgICAgeFRleGVsQyR7disxfSA9IGdldFgoYmF0Y2gsIHhSLCB4Q09mZnNldCwgZDEpOwogICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ICsgMSA+PSBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgeFRleGVsQyR7disxfS56dyA9IHZlYzIoMC4pOwogICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgeFRleGVsQyR7disxfVJlYWR5ID0gMTsKICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgIHhDJHt2fSA9IHZlYzQoCiAgICAgICAgICAgICAgICAgICB4VGV4ZWxDJHt2fS54eSwgeFRleGVsQyR7disxfS54eSk7CiAgICAgICAgICAgICAgIGAsdisxPGgmJihmKz1gCiAgICAgICAgICAgICAgICAgICB4QyR7disxfSA9IHZlYzQoeFRleGVsQyR7dn0uencsIHhUZXhlbEMke3YrMX0uencpOwogICAgICAgICAgICAgICAgIGApKSk7djxoJiYoZis9YAogICAgICAgICAgICAgd1RleGVsID0gZ2V0VyhyLCAke3Z9LCBkMSwgZDIpOwogICAgICAgICAgICAgZG90UHJvZCArPSB4QyR7dn0ueHh6eiAqIHZlYzQod1RleGVsLnh5LCB3VGV4ZWwueHkpOwogICAgICAgICAgICAgaWYoZDEgKyAxIDwgJHtlLmluQ2hhbm5lbHN9KSB7CiAgICAgICAgICAgICAgIGRvdFByb2QgKz0geEMke3Z9Lnl5d3cgKiB2ZWM0KHdUZXhlbC56dywgd1RleGVsLnp3KTsKICAgICAgICAgICAgIH0KICAgICAgICAgICBgLHYrMTxoJiYoZis9YAogICAgICAgICAgICAgICB3VGV4ZWwgPSBnZXRXKHIsICR7disxfSwgZDEsIGQyKTsKICAgICAgICAgICAgICAgZG90UHJvZCArPSB4QyR7disxfS54eHp6ICogdmVjNCh3VGV4ZWwueHksIHdUZXhlbC54eSk7CiAgICAgICAgICAgICAgIGlmKGQxICsgMSA8ICR7ZS5pbkNoYW5uZWxzfSkgewogICAgICAgICAgICAgICAgIGRvdFByb2QgKz0geEMke3YrMX0ueXl3dyAqIHZlYzQod1RleGVsLnp3LCB3VGV4ZWwuencpOwogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICBgKSl9Zis9YAogICAgIH0KICAgYCxmKz1gCiAgICAgfQogICBgLGYrPWAKICAgICB9CiAgIGA7bGV0IGc9IiIseT0iIjtzJiYocj9nPWB2ZWM0IGFjdGl2YXRpb24odmVjNCBhKSB7CiAgICAgICAgICAgdmVjNCBiID0gZ2V0UHJlbHVBY3RpdmF0aW9uV2VpZ2h0c0F0T3V0Q29vcmRzKCk7CiAgICAgICAgICAgJHtzfQogICAgICAgICB9YDpvP2c9YHZlYzQgYWN0aXZhdGlvbih2ZWM0IGEpIHsKICAgICAgICAgICB2ZWM0IGIgPSBnZXRMZWFreXJlbHVBbHBoYUF0T3V0Q29vcmRzKCk7CiAgICAgICAgICAgJHtzfQogICAgICAgICB9YDpnPWB2ZWM0IGFjdGl2YXRpb24odmVjNCB4KSB7CiAgICAgICAgICAgJHtzfQogICAgICAgICB9YCx5PSJyZXN1bHQgPSBhY3RpdmF0aW9uKHJlc3VsdCk7Iik7Y29uc3Qgdz10PyJyZXN1bHQgKz0gZ2V0Qmlhc0F0T3V0Q29vcmRzKCk7IjoiIjt0JiZ0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgiYmlhcyIpLHImJnRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCJwcmVsdUFjdGl2YXRpb25XZWlnaHRzIiksbyYmdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goImxlYWt5cmVsdUFscGhhIiksdGhpcy51c2VyQ29kZT1gCiAgICAgICAke2d9CgogICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICAgaW50IGJhdGNoID0gY29vcmRzLng7CiAgICAgICAgIGl2ZWMyIHhSQ0Nvcm5lciA9IGNvb3Jkcy55eiAqIHN0cmlkZXMgLSBwYWRzOwogICAgICAgICBpbnQgZDIgPSBjb29yZHMudzsKICAgICAgICAgaW50IHhSQ29ybmVyID0geFJDQ29ybmVyLng7CiAgICAgICAgIGludCB4Q0Nvcm5lciA9IHhSQ0Nvcm5lci55OwoKICAgICAgICAgLy9pbnRpYWxpemUgZG90UHJvZCB3aXRoIGEgc21hbGwgZXBzaWxvbiBzZWVtcyB0byByZWR1Y2UgR1BVIGFjY3VyYWN5IGxvc3MuCiAgICAgICAgIHZlYzQgZG90UHJvZCA9IHZlYzQoMC4wMDAwMDAwMDAwMDAwMDEpOwoKICAgICAgICAgJHtmfQoKICAgICAgICAgdmVjNCByZXN1bHQgPSBkb3RQcm9kIC0gdmVjNCgwLjAwMDAwMDAwMDAwMDAwMSk7CiAgICAgICAgICR7d30KICAgICAgICAgJHt5fQogICAgICAgICBzZXRPdXRwdXQocmVzdWx0KTsKICAgICAgIH0KICAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBQSntjb25zdHJ1Y3RvcihlLHQpe3RoaXMudmFyaWFibGVOYW1lcz1bIkEiXSx0aGlzLnBhY2tlZElucHV0cz0hMCx0aGlzLnBhY2tlZE91dHB1dD0hMCx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToiaW5wdXRTaGFwZSIsdHlwZToiaXZlYzQifSx7bmFtZToicGFkIix0eXBlOiJpdmVjMiJ9LHtuYW1lOiJzdHJpZGUiLHR5cGU6Iml2ZWMyIn0se25hbWU6ImRpbGF0aW9uIix0eXBlOiJpdmVjMiJ9LHtuYW1lOiJpbkNoYW5uZWxzIix0eXBlOiJpbnQifSx7bmFtZToiaXRlbXNQZXJCbG9ja1JvdyIsdHlwZToiaW50In0se25hbWU6Im91dFdpZHRoIix0eXBlOiJpbnQifV0sdGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMuZW5hYmxlU2hhcGVVbmlmb3Jtcz1Mbih0aGlzLm91dHB1dFNoYXBlLmxlbmd0aCk7Y29uc3R7ZGF0YUZvcm1hdDpzfT10LHI9S24oKSxvPXM9PT0iY2hhbm5lbHNMYXN0IixpPW8/MToyLGE9bz8yOjMsbD10aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM/ImlmKGJsb2NrSW5kZXggPCBvdXRTaGFwZVsyXSAmJiBwb3MgPCBvdXRTaGFwZVsxXSkgeyI6YGlmKGJsb2NrSW5kZXggPCAke2VbMl19ICYmIHBvcyA8ICR7ZVsxXX0pIHtgO2xldCBjPSIiO2ZvcihsZXQgaD0wO2g8PTE7aCsrKWZvcihsZXQgcD0wO3A8PTE7cCsrKWMrPWAKICAgICAgICAgIGJsb2NrSW5kZXggPSByYy56ICsgJHtwfTsKICAgICAgICAgIHBvcyA9IHJjLnkgKyAke2h9OwoKICAgICAgICAgICR7bH0KICAgICAgICAgICAgb2Zmc2V0WSA9IGludChibG9ja0luZGV4IC8gb3V0V2lkdGgpICogc3RyaWRlWzBdIC0gcGFkWzBdOwogICAgICAgICAgICBkMCA9IG9mZnNldFkgKyBkaWxhdGlvblswXSAqIChwb3MgLyBpdGVtc1BlckJsb2NrUm93KTsKCiAgICAgICAgICAgIGlmKGQwIDwgaW5wdXRTaGFwZVske2l9XSAmJiBkMCA+PSAwKSB7CiAgICAgICAgICAgICAgLy8gVXNlIGN1c3RvbSBpbW9kIGluc3RlYWQgbW9kLiBPbiBJbnRlbCBHUFUsIG1vZCBtYXkgZ2VuZXJhdGUKICAgICAgICAgICAgICAvLyB1bmV4cGVjdGVkIHZhbHVlLgogICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90ZW5zb3JmbG93L3RmanMvaXNzdWVzLzU0NDcKICAgICAgICAgICAgICBvZmZzZXRYID0gaW1vZChibG9ja0luZGV4LCBvdXRXaWR0aCkgKiBzdHJpZGVbMV0gLSBwYWRbMV07CiAgICAgICAgICAgICAgZDEgPSBvZmZzZXRYICsgZGlsYXRpb25bMV0gKiAoaW1vZChwb3MsIGl0ZW1zUGVyQmxvY2tSb3cpIC8KICAgICAgICAgICAgICAgICAgaW5DaGFubmVscyk7CgogICAgICAgICAgICAgIGlmKGQxIDwgaW5wdXRTaGFwZVske2F9XSAmJiBkMSA+PSAwKSB7CgogICAgICAgICAgICAgICAgY2ggPSBpbW9kKHBvcywgaW5DaGFubmVscyk7CgogICAgICAgICAgICAgICAgaWYgKCR7b30pIHsKICAgICAgICAgICAgICAgICAgaW5uZXJEaW1zID0gdmVjMihkMSwgY2gpOwogICAgICAgICAgICAgICAgICByZXN1bHRbJHtoKjIrcH1dID0gZ2V0Q2hhbm5lbCgKICAgICAgICAgICAgICAgICAgICBnZXRBKHJjLngsIGQwLCBpbnQoaW5uZXJEaW1zLngpLAogICAgICAgICAgICAgICAgICAgIGludChpbm5lckRpbXMueSkpLCBpbm5lckRpbXMpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgaW5uZXJEaW1zID0gdmVjMihkMCwgZDEpOwogICAgICAgICAgICAgICAgICByZXN1bHRbJHtoKjIrcH1dID0gZ2V0Q2hhbm5lbCgKICAgICAgICAgICAgICAgICAgICBnZXRBKHJjLngsIGNoLCBpbnQoaW5uZXJEaW1zLngpLAogICAgICAgICAgICAgICAgICAgIGludChpbm5lckRpbXMueSkpLCBpbm5lckRpbXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIGA7dGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMyByYyA9IGdldE91dHB1dENvb3JkcygpOwoKICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMCk7CgogICAgICAgIGludCBibG9ja0luZGV4LCBwb3MsIG9mZnNldFksIGQwLCBvZmZzZXRYLCBkMSwgY2g7CiAgICAgICAgdmVjMiBpbm5lckRpbXM7CgogICAgICAgICR7Y30KCiAgICAgICAgJHtyLm91dHB1dH0gPSByZXN1bHQ7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFlmKG4sZSl7Y29uc3QgdD1uLmxlbmd0aDtyZXR1cm4gdD49Mz9lP1suLi5uLnNsaWNlKDAsLTMpLG5bdC0zXSpuW3QtMl0sblt0LTFdXTpbLi4ubi5zbGljZSgwLC0zKSxuW3QtM10sblt0LTJdKm5bdC0xXV06IWUmJnQ9PT0xJiZuWzBdPjE/W25bMF0sMV06bnVsbH1mdW5jdGlvbiBCRCh7eDpuLGZpbHRlcjplLGNvbnZJbmZvOnQsYmFja2VuZDpzLGJpYXM6cj1udWxsLHByZWx1QWN0aXZhdGlvbldlaWdodHM6bz1udWxsLGxlYWt5cmVsdUFscGhhOmk9MCxhY3RpdmF0aW9uOmE9bnVsbH0pe2NvbnN0IGw9bi5zaGFwZSxjPXMudGV4RGF0YS5nZXQobi5kYXRhSWQpLGg9dC5pbkNoYW5uZWxzLHA9bFswXSpsWzFdKmxbMl0sZj10Lm91dENoYW5uZWxzLGc9dC5kYXRhRm9ybWF0PT09ImNoYW5uZWxzTGFzdCIseT0hMSx3PSExO2xldCBiO2NvbnN0IHY9W107aWYobyE9bnVsbCl7Y29uc3Qgaz1ZZihvLnNoYXBlLGcpO2shPW51bGwmJihvPUNlKHtpbnB1dHM6e3g6b30sYmFja2VuZDpzLGF0dHJzOntzaGFwZTprfX0pLHYucHVzaChvKSl9aWYociE9bnVsbCl7Y29uc3Qgaz1ZZihyLnNoYXBlLGcpO2shPW51bGwmJihyPUNlKHtpbnB1dHM6e3g6cn0sYmFja2VuZDpzLGF0dHJzOntzaGFwZTprfX0pLHYucHVzaChyKSl9aWYoISgocD09PTF8fGY9PT0xKSYmaD5BRCkmJmMuaXNQYWNrZWQmJmcmJmMudGV4dHVyZSE9bnVsbCYmbFsyXSUyIT09MCYmSmUoYy5zaGFwZS5zbGljZSgtMyksbC5zbGljZSgtMykpKXtjb25zdCBrPWxbMF0qbFsxXSoobFsyXSsxKSxUPXtkYXRhSWQ6bi5kYXRhSWQsc2hhcGU6WzEsayx0LmluQ2hhbm5lbHNdLGR0eXBlOm4uZHR5cGV9LEQ9Yy5zaGFwZTtjLnNoYXBlPWMuc2hhcGUuc2xpY2UoKSxjLnNoYXBlW2Muc2hhcGUubGVuZ3RoLTJdKyssQShLZihjLnNoYXBlLFQuc2hhcGUpLCgpPT5gcGFja2VkIHJlc2hhcGUgJHtjLnNoYXBlfSB0byAke1Quc2hhcGV9IGlzbid0IGZyZWVgKTtjb25zdCBMPUNlKHtpbnB1dHM6e3g6ZX0sYmFja2VuZDpzLGF0dHJzOntzaGFwZTpbMSx0LmluQ2hhbm5lbHMsdC5vdXRDaGFubmVsc119fSk7di5wdXNoKEwpO2NvbnN0IHo9WGYoe2E6VCxiOkwsYmFja2VuZDpzLHRyYW5zcG9zZUE6eSx0cmFuc3Bvc2VCOncsYmlhczpyLGFjdGl2YXRpb246YSxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOm8sbGVha3lyZWx1QWxwaGE6aX0pLEY9cy50ZXhEYXRhLmdldCh6LmRhdGFJZCk7QShGLmlzUGFja2VkLCgpPT4iYmF0Y2hNYXRNdWwgcmVzdWx0IGlzIGV4cGVjdGVkIHRvIGJlIHBhY2tlZCIpLGMuc2hhcGU9RCxGLnNoYXBlPXQub3V0U2hhcGUsYj1Ocyh7aW5wdXRzOnt4Onp9LGJhY2tlbmQ6c30pLGIuc2hhcGU9dC5vdXRTaGFwZSx2LnB1c2goeil9ZWxzZXtjb25zdCBrPXQub3V0SGVpZ2h0KnQub3V0V2lkdGgsVD1DZSh7aW5wdXRzOnt4Om59LGJhY2tlbmQ6cyxhdHRyczp7c2hhcGU6Zz9bdC5iYXRjaFNpemUsayx0LmluQ2hhbm5lbHNdOlt0LmJhdGNoU2l6ZSx0LmluQ2hhbm5lbHMsa119fSksRD1DZSh7aW5wdXRzOnt4OmV9LGJhY2tlbmQ6cyxhdHRyczp7c2hhcGU6WzEsdC5pbkNoYW5uZWxzLHQub3V0Q2hhbm5lbHNdfX0pLEw9WGYoe2E6Zz9UOkQsYjpnP0Q6VCx0cmFuc3Bvc2VBOiFnLHRyYW5zcG9zZUI6dyxiYWNrZW5kOnMsYmlhczpyLGFjdGl2YXRpb246YSxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOm8sbGVha3lyZWx1QWxwaGE6aX0pO2I9Q2Uoe2lucHV0czp7eDpMfSxiYWNrZW5kOnMsYXR0cnM6e3NoYXBlOnQub3V0U2hhcGV9fSksdi5wdXNoKFQpLHYucHVzaChEKSx2LnB1c2goTCl9Zm9yKGNvbnN0IGsgb2YgdilzLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGspO3JldHVybiBifWZ1bmN0aW9uIFZEKHt4Om4sZmlsdGVyOmUsY29udkluZm86dCxiYWNrZW5kOnMsYmlhczpyPW51bGwscHJlbHVBY3RpdmF0aW9uV2VpZ2h0czpvPW51bGwsbGVha3lyZWx1QWxwaGE6aT0wLGFjdGl2YXRpb246YT1udWxsfSl7Y29uc3R7ZmlsdGVyV2lkdGg6bCxmaWx0ZXJIZWlnaHQ6YyxpbkNoYW5uZWxzOmgsb3V0V2lkdGg6cCxvdXRIZWlnaHQ6ZixkYXRhRm9ybWF0Omd9PXQseT1nPT09ImNoYW5uZWxzTGFzdCIsdz1sKmMqaCxiPWYqcCx2PVt0LmJhdGNoU2l6ZSx3LGJdLFM9ITAsJD0hMSxrPVtdO2lmKG8hPW51bGwpe2NvbnN0IFY9WWYoby5zaGFwZSx5KTtWIT1udWxsJiYobz1DZSh7aW5wdXRzOnt4Om99LGJhY2tlbmQ6cyxhdHRyczp7c2hhcGU6Vn19KSxrLnB1c2gobykpfWlmKHIhPW51bGwpe2NvbnN0IFY9WWYoci5zaGFwZSx5KTtWIT1udWxsJiYocj1DZSh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6cyxhdHRyczp7c2hhcGU6Vn19KSxrLnB1c2gocikpfWNvbnN0IFQ9Q2Uoe2lucHV0czp7eDplfSxiYWNrZW5kOnMsYXR0cnM6e3NoYXBlOlsxLHcsY2UoZS5zaGFwZSkvd119fSk7ay5wdXNoKFQpO2NvbnN0IEQ9bmV3IFBKKHYsdCksTD1bbi5zaGFwZSxbdC5wYWRJbmZvLnRvcCx0LnBhZEluZm8ubGVmdF0sW3Quc3RyaWRlSGVpZ2h0LHQuc3RyaWRlV2lkdGhdLFt0LmRpbGF0aW9uSGVpZ2h0LHQuZGlsYXRpb25XaWR0aF0sW3QuaW5DaGFubmVsc10sW3QuZmlsdGVyV2lkdGgqdC5pbkNoYW5uZWxzXSxbdC5vdXRXaWR0aF1dLHo9cy5ydW5XZWJHTFByb2dyYW0oRCxbbl0sImZsb2F0MzIiLEwpLEY9Q2Uoe2lucHV0czp7eDp6fSxiYWNrZW5kOnMsYXR0cnM6e3NoYXBlOnZ9fSk7ay5wdXNoKHopLGsucHVzaChGKTtjb25zdCBfPXIhPW51bGwsRT1vIT1udWxsLE09YT09PSJsZWFreXJlbHUiLFU9YT9ZYyhhLCEwKTpudWxsLFk9bmV3IEREKHk/Ri5zaGFwZTpULnNoYXBlLHk/VC5zaGFwZTpGLnNoYXBlLHk/W3QuYmF0Y2hTaXplLGIsdC5vdXRDaGFubmVsc106W3QuYmF0Y2hTaXplLHQub3V0Q2hhbm5lbHMsYl0sUywkLF8sVSxFLE0pLFE9eT9bRixUXTpbVCxGXTtpZihyJiZRLnB1c2gociksRSYmUS5wdXNoKG8pLE0pe2NvbnN0IFY9cy5tYWtlVGVuc29ySW5mbyhbXSwiZmxvYXQzMiIsU28oaSwiZmxvYXQzMiIpKTtRLnB1c2goViksay5wdXNoKFYpfWNvbnN0IG5lPXMucnVuV2ViR0xQcm9ncmFtKFksUSwiZmxvYXQzMiIpLHNlPUNlKHtpbnB1dHM6e3g6bmV9LGJhY2tlbmQ6cyxhdHRyczp7c2hhcGU6dC5vdXRTaGFwZX19KTtrLnB1c2gobmUpO2Zvcihjb25zdCBWIG9mIGspcy5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhWKTtyZXR1cm4gc2V9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gekoobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cixmaWx0ZXI6b309ZSx7c3RyaWRlczppLHBhZDphLGRhdGFGb3JtYXQ6bCxkaWxhdGlvbnM6YyxkaW1Sb3VuZGluZ01vZGU6aH09cyxwPWtvKGwpLGY9Zm4oci5zaGFwZSxvLnNoYXBlLGksYyxhLGgsITEscCk7bGV0IGc7aWYoZi5maWx0ZXJIZWlnaHQ9PT0xJiZmLmZpbHRlcldpZHRoPT09MSYmZi5kaWxhdGlvbkhlaWdodD09PTEmJmYuZGlsYXRpb25XaWR0aD09PTEmJmYuc3RyaWRlSGVpZ2h0PT09MSYmZi5zdHJpZGVXaWR0aD09PTEmJihmLnBhZEluZm8udHlwZT09PSJTQU1FInx8Zi5wYWRJbmZvLnR5cGU9PT0iVkFMSUQiKSlnPUJEKHt4OnIsZmlsdGVyOm8sY29udkluZm86ZixiYWNrZW5kOnR9KTtlbHNlIGlmKGYuc3RyaWRlV2lkdGg8PTImJnA9PT0iY2hhbm5lbHNMYXN0IiYmb2UoKS5nZXRCb29sKCJXRUJHTF9FWFBfQ09OViIpKXtjb25zdCB3PW5ldyBNRChmKSxiPVtbZi5wYWRJbmZvLnRvcCxmLnBhZEluZm8ubGVmdF0sW2Yuc3RyaWRlSGVpZ2h0LGYuc3RyaWRlV2lkdGhdLFtmLmRpbGF0aW9uSGVpZ2h0LGYuZGlsYXRpb25XaWR0aF0sW2YuaW5IZWlnaHQsZi5pbldpZHRoXV07Zz10LnJ1bldlYkdMUHJvZ3JhbSh3LFtyLG9dLCJmbG9hdDMyIixiKX1lbHNlIGlmKG9lKCkuZ2V0Qm9vbCgiV0VCR0xfQ09OVl9JTTJDT0wiKSlnPVZEKHt4OnIsZmlsdGVyOm8sY29udkluZm86ZixiYWNrZW5kOnR9KTtlbHNle2NvbnN0IHc9bmV3IHpEKGYpO2c9dC5ydW5XZWJHTFByb2dyYW0odyxbcixvXSwiZmxvYXQzMiIpfWNvbnN0IHk9Q2Uoe2lucHV0czp7eDpnfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmYub3V0U2hhcGV9fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZykseX1jb25zdCBNSj17a2VybmVsTmFtZTpjZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6ekp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIEJKe2NvbnN0cnVjdG9yKGUpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiLCJkeSJdLHRoaXMub3V0cHV0U2hhcGU9ZS5maWx0ZXJTaGFwZTtjb25zdCB0PWUuc3RyaWRlSGVpZ2h0LHM9ZS5zdHJpZGVXaWR0aCxyPWUucGFkSW5mby50b3Asbz1lLnBhZEluZm8ubGVmdCxpPWUuZGF0YUZvcm1hdD09PSJjaGFubmVsc0xhc3QiO3RoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IHdSID0gY29vcmRzLng7CiAgICAgICAgaW50IHdDID0gY29vcmRzLnk7CiAgICAgICAgaW50IGQxID0gY29vcmRzLno7CiAgICAgICAgaW50IGQyID0gY29vcmRzLnc7CgogICAgICAgIC8vIENvbnZvbHZlIHgoPywgPywgZDEpIHdpdGggZHkoOiwgOiwgZDIpIHRvIGdldCBkdyh3Uiwgd0MsIGQxLCBkMikuCiAgICAgICAgLy8gPyA9IHRvIGJlIGRldGVybWluZWQuIDogPSBhY3Jvc3MgYWxsIHZhbHVlcyBpbiB0aGF0IGF4aXMuCiAgICAgICAgZmxvYXQgZG90UHJvZCA9IDAuMDsKCiAgICAgICAgZm9yIChpbnQgYiA9IDA7IGIgPCAke2UuYmF0Y2hTaXplfTsgYisrKSB7CiAgICAgICAgICBmb3IgKGludCB5UiA9IDA7IHlSIDwgJHtlLm91dEhlaWdodH07IHlSKyspIHsKICAgICAgICAgICAgaW50IHhSID0gd1IgKyB5UiAqICR7dH0gLSAke3J9OwoKICAgICAgICAgICAgaWYgKHhSIDwgMCB8fCB4UiA+PSAke2UuaW5IZWlnaHR9KSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAoaW50IHlDID0gMDsgeUMgPCAke2Uub3V0V2lkdGh9OyB5QysrKSB7CiAgICAgICAgICAgICAgaW50IHhDID0gd0MgKyB5QyAqICR7c30gLSAke299OwoKICAgICAgICAgICAgICBpZiAoeEMgPCAwIHx8IHhDID49ICR7ZS5pbldpZHRofSkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAke2k/YGZsb2F0IGR5VmFsdWUgPSBnZXREeShiLCB5UiwgeUMsIGQyKTsKICAgICAgICAgICAgICBmbG9hdCB4VmFsdWUgPSBnZXRYKGIsIHhSLCB4QywgZDEpOwogICAgICAgICAgICAgIGRvdFByb2QgKz0gKHhWYWx1ZSAqIGR5VmFsdWUpO2A6YGZsb2F0IGR5VmFsdWUgPSBnZXREeShiLCBkMiwgeVIsIHlDKTsKICAgICAgICAgICAgICBmbG9hdCB4VmFsdWUgPSBnZXRYKGIsIGQxLCB4UiwgeEMpOwogICAgICAgICAgICAgIGRvdFByb2QgKz0gKHhWYWx1ZSAqIGR5VmFsdWUpO2B9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KGRvdFByb2QpOwogICAgICB9CiAgICBgfX1jbGFzcyBWSntjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJkeSIsIlciXSx0aGlzLm91dHB1dFNoYXBlPWUuaW5TaGFwZTtjb25zdCB0PWUuZmlsdGVySGVpZ2h0LHM9ZS5maWx0ZXJXaWR0aCxyPWUuc3RyaWRlSGVpZ2h0LG89ZS5zdHJpZGVXaWR0aCxpPWUuZGF0YUZvcm1hdD09PSJjaGFubmVsc0xhc3QiLGE9dC0xLWUucGFkSW5mby50b3AsbD1zLTEtZS5wYWRJbmZvLmxlZnQsYz1pPzE6MixoPWk/MjozLHA9aT8zOjE7dGhpcy51c2VyQ29kZT1gCiAgICAgIGNvbnN0IGl2ZWMyIHBhZHMgPSBpdmVjMigke2F9LCAke2x9KTsKCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYmF0Y2ggPSBjb29yZHNbMF07CiAgICAgICAgaW50IGQxID0gY29vcmRzWyR7cH1dOwoKICAgICAgICBpdmVjMiBkeUNvcm5lciA9IGl2ZWMyKGNvb3Jkc1ske2N9XSwgY29vcmRzWyR7aH1dKSAtIHBhZHM7CiAgICAgICAgaW50IGR5UkNvcm5lciA9IGR5Q29ybmVyLng7CiAgICAgICAgaW50IGR5Q0Nvcm5lciA9IGR5Q29ybmVyLnk7CgogICAgICAgIC8vIENvbnZvbHZlIGR5KD8sID8sIGQyKSB3aXRoIHcoOiwgOiwgZDEsIGQyKSB0byBjb21wdXRlIGR4KHhSLCB4QywgZDEpLgogICAgICAgIC8vID8gPSB0byBiZSBkZXRlcm1pbmVkLiA6ID0gYWNyb3NzIGFsbCB2YWx1ZXMgaW4gdGhhdCBheGlzLgogICAgICAgIGZsb2F0IGRvdFByb2QgPSAwLjA7CiAgICAgICAgZm9yIChpbnQgd1IgPSAwOyB3UiA8ICR7dH07IHdSKyspIHsKICAgICAgICAgIGZsb2F0IGR5UiA9IGZsb2F0KGR5UkNvcm5lciArIHdSKSAvICR7cn0uMDsKCiAgICAgICAgICBpZiAoZHlSIDwgMC4wIHx8IGR5UiA+PSAke2Uub3V0SGVpZ2h0fS4wIHx8IGZyYWN0KGR5UikgPiAwLjApIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpbnQgaWR5UiA9IGludChkeVIpOwoKICAgICAgICAgIGludCB3UlBlcm0gPSAke3R9IC0gMSAtIHdSOwoKICAgICAgICAgIGZvciAoaW50IHdDID0gMDsgd0MgPCAke3N9OyB3QysrKSB7CiAgICAgICAgICAgIGZsb2F0IGR5QyA9IGZsb2F0KGR5Q0Nvcm5lciArIHdDKSAvICR7b30uMDsKCiAgICAgICAgICAgIGlmIChkeUMgPCAwLjAgfHwgZHlDID49ICR7ZS5vdXRXaWR0aH0uMCB8fAogICAgICAgICAgICAgICAgZnJhY3QoZHlDKSA+IDAuMCkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGludCBpZHlDID0gaW50KGR5Qyk7CgogICAgICAgICAgICBpbnQgd0NQZXJtID0gJHtzfSAtIDEgLSB3QzsKCiAgICAgICAgICAgIGZvciAoaW50IGQyID0gMDsgZDIgPCAke2Uub3V0Q2hhbm5lbHN9OyBkMisrKSB7CgogICAgICAgICAgICAgIGlmICgke2l9KSB7CiAgICAgICAgICAgICAgICBmbG9hdCB4VmFsdWUgPSBnZXREeShiYXRjaCwgaWR5UiwgaWR5QywgZDIpOwogICAgICAgICAgICAgICAgZmxvYXQgd1ZhbHVlID0gZ2V0Vyh3UlBlcm0sIHdDUGVybSwgZDEsIGQyKTsKICAgICAgICAgICAgICAgIGRvdFByb2QgKz0geFZhbHVlICogd1ZhbHVlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmbG9hdCB4VmFsdWUgPSBnZXREeShiYXRjaCwgZDIsIGlkeVIsIGlkeUMpOwogICAgICAgICAgICAgICAgZmxvYXQgd1ZhbHVlID0gZ2V0Vyh3UlBlcm0sIHdDUGVybSwgZDEsIGQyKTsKICAgICAgICAgICAgICAgIGRvdFByb2QgKz0geFZhbHVlICogd1ZhbHVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KGRvdFByb2QpOwogICAgICB9CiAgICBgfX1jbGFzcyBXSntjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4IiwiZHkiXSx0aGlzLm91dHB1dFNoYXBlPWUuZmlsdGVyU2hhcGU7Y29uc3QgdD1lLnN0cmlkZURlcHRoLHM9ZS5zdHJpZGVIZWlnaHQscj1lLnN0cmlkZVdpZHRoLG89ZS5wYWRJbmZvLmZyb250LGk9ZS5wYWRJbmZvLnRvcCxhPWUucGFkSW5mby5sZWZ0O3RoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzUgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IHdGID0gY29vcmRzLng7CiAgICAgICAgaW50IHdSID0gY29vcmRzLnk7CiAgICAgICAgaW50IHdDID0gY29vcmRzLno7CiAgICAgICAgaW50IGQxID0gY29vcmRzLnc7CiAgICAgICAgaW50IGQyID0gY29vcmRzLnU7CgogICAgICAgIGZsb2F0IGRvdFByb2QgPSAwLjA7CgogICAgICAgIGZvciAoaW50IGIgPSAwOyBiIDwgJHtlLmJhdGNoU2l6ZX07IGIrKykgewogICAgICAgICAgZm9yIChpbnQgeUYgPSAwOyB5RiA8ICR7ZS5vdXREZXB0aH07IHlGKyspIHsKICAgICAgICAgICAgaW50IHhGID0gd0YgKyB5RiAqICR7dH0gLSAke299OwoKICAgICAgICAgICAgaWYgKHhGIDwgMCB8fCB4RiA+PSAke2UuaW5EZXB0aH0pIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChpbnQgeVIgPSAwOyB5UiA8ICR7ZS5vdXRIZWlnaHR9OyB5UisrKSB7CiAgICAgICAgICAgICAgaW50IHhSID0gd1IgKyB5UiAqICR7c30gLSAke2l9OwoKICAgICAgICAgICAgICBpZiAoeFIgPCAwIHx8IHhSID49ICR7ZS5pbkhlaWdodH0pIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yIChpbnQgeUMgPSAwOyB5QyA8ICR7ZS5vdXRXaWR0aH07IHlDKyspIHsKICAgICAgICAgICAgICAgIGludCB4QyA9IHdDICsgeUMgKiAke3J9IC0gJHthfTsKCiAgICAgICAgICAgICAgICBpZiAoeEMgPCAwIHx8IHhDID49ICR7ZS5pbldpZHRofSkgewogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmbG9hdCBkeVZhbHVlID0gZ2V0RHkoYiwgeUYsIHlSLCB5QywgZDIpOwogICAgICAgICAgICAgICAgZmxvYXQgeFZhbHVlID0gZ2V0WChiLCB4RiwgeFIsIHhDLCBkMSk7CiAgICAgICAgICAgICAgICBkb3RQcm9kICs9ICh4VmFsdWUgKiBkeVZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KGRvdFByb2QpOwogICAgICB9CiAgICBgfX1jbGFzcyBVSntjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJkeSIsIlciXSx0aGlzLm91dHB1dFNoYXBlPWUuaW5TaGFwZTtjb25zdCB0PWUuZmlsdGVyRGVwdGgscz1lLmZpbHRlckhlaWdodCxyPWUuZmlsdGVyV2lkdGgsbz1lLnN0cmlkZURlcHRoLGk9ZS5zdHJpZGVIZWlnaHQsYT1lLnN0cmlkZVdpZHRoLGw9dC0xLWUucGFkSW5mby5mcm9udCxjPXMtMS1lLnBhZEluZm8udG9wLGg9ci0xLWUucGFkSW5mby5sZWZ0O3RoaXMudXNlckNvZGU9YAogICAgICBjb25zdCBpdmVjMyBwYWRzID0gaXZlYzMoJHtsfSwgJHtjfSwgJHtofSk7CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzUgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGJhdGNoID0gY29vcmRzLng7CiAgICAgICAgaW50IGQxID0gY29vcmRzLnU7CgoKICAgICAgICBpdmVjMyBkeUNvcm5lciA9IGl2ZWMzKGNvb3Jkcy55LCBjb29yZHMueiwgY29vcmRzLncpIC0gcGFkczsKICAgICAgICBpbnQgZHlGQ29ybmVyID0gZHlDb3JuZXIueDsKICAgICAgICBpbnQgZHlSQ29ybmVyID0gZHlDb3JuZXIueTsKICAgICAgICBpbnQgZHlDQ29ybmVyID0gZHlDb3JuZXIuejsKCiAgICAgICAgZmxvYXQgZG90UHJvZCA9IDAuMDsKICAgICAgICBmb3IgKGludCB3RiA9IDA7IHdGIDwgJHt0fTsgd0YrKykgewogICAgICAgICAgZmxvYXQgZHlGID0gZmxvYXQoZHlGQ29ybmVyICsgd0YpIC8gJHtvfS4wOwoKICAgICAgICAgIGlmIChkeUYgPCAwLjAgfHwgZHlGID49ICR7ZS5vdXREZXB0aH0uMCB8fCBmcmFjdChkeUYpID4gMC4wKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaW50IGlkeUYgPSBpbnQoZHlGKTsKCiAgICAgICAgICBpbnQgd0ZQZXJtID0gJHt0fSAtIDEgLSB3RjsKCiAgICAgICAgICBmb3IgKGludCB3UiA9IDA7IHdSIDwgJHtzfTsgd1IrKykgewogICAgICAgICAgICBmbG9hdCBkeVIgPSBmbG9hdChkeVJDb3JuZXIgKyB3UikgLyAke2l9LjA7CgogICAgICAgICAgICBpZiAoZHlSIDwgMC4wIHx8IGR5UiA+PSAke2Uub3V0SGVpZ2h0fS4wIHx8CiAgICAgICAgICAgICAgZnJhY3QoZHlSKSA+IDAuMCkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGludCBpZHlSID0gaW50KGR5Uik7CgogICAgICAgICAgICBpbnQgd1JQZXJtID0gJHtzfSAtIDEgLSB3UjsKCiAgICAgICAgICAgIGZvciAoaW50IHdDID0gMDsgd0MgPCAke3J9OyB3QysrKSB7CiAgICAgICAgICAgICAgZmxvYXQgZHlDID0gZmxvYXQoZHlDQ29ybmVyICsgd0MpIC8gJHthfS4wOwoKICAgICAgICAgICAgICBpZiAoZHlDIDwgMC4wIHx8IGR5QyA+PSAke2Uub3V0V2lkdGh9LjAgfHwKICAgICAgICAgICAgICAgICAgZnJhY3QoZHlDKSA+IDAuMCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGludCBpZHlDID0gaW50KGR5Qyk7CgogICAgICAgICAgICAgIGludCB3Q1Blcm0gPSAke3J9IC0gMSAtIHdDOwoKICAgICAgICAgICAgICBmb3IgKGludCBkMiA9IDA7IGQyIDwgJHtlLm91dENoYW5uZWxzfTsgZDIrKykgewogICAgICAgICAgICAgICAgZmxvYXQgeFZhbHVlID0gZ2V0RHkoYmF0Y2gsIGlkeUYsIGlkeVIsIGlkeUMsIGQyKTsKICAgICAgICAgICAgICAgIGZsb2F0IHdWYWx1ZSA9IGdldFcod0ZQZXJtLCB3UlBlcm0sIHdDUGVybSwgZDEsIGQyKTsKICAgICAgICAgICAgICAgIGRvdFByb2QgKz0geFZhbHVlICogd1ZhbHVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXRPdXRwdXQoZG90UHJvZCk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGpKKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnIsZHk6b309ZSx7c3RyaWRlczppLHBhZDphLGRhdGFGb3JtYXQ6bCxkaW1Sb3VuZGluZ01vZGU6YyxmaWx0ZXJTaGFwZTpofT1zLHA9a28obCksZj1mbihyLnNoYXBlLGgsaSwxLGEsYywhMSxwKSxnPW5ldyBCSihmKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oZyxbcixvXSwiZmxvYXQzMiIpfWNvbnN0IEdKPXtrZXJuZWxOYW1lOmxtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpqSn07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgSEp7Y29uc3RydWN0b3IoZSl7dGhpcy52YXJpYWJsZU5hbWVzPVsiZHkiLCJXIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITAsdGhpcy5wYWNrZWRPdXRwdXQ9ITAsdGhpcy5jdXN0b21Vbmlmb3Jtcz1be25hbWU6InN0cmlkZXMiLHR5cGU6InZlYzIifV0sdGhpcy5vdXRwdXRTaGFwZT1lLmluU2hhcGUsdGhpcy5lbmFibGVTaGFwZVVuaWZvcm1zPUxuKHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoKTtjb25zdCB0PWUuZmlsdGVySGVpZ2h0LHM9ZS5maWx0ZXJXaWR0aCxyPXQtMS1lLnBhZEluZm8udG9wLG89cy0xLWUucGFkSW5mby5sZWZ0O3RoaXMudXNlckNvZGU9YAogICAgICBjb25zdCBpdmVjMiBwYWRzID0gaXZlYzIoJHtyfSwgJHtvfSk7CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGJhdGNoID0gY29vcmRzWzBdOwogICAgICAgIGludCBkMSA9IGNvb3Jkc1szXTsKCiAgICAgICAgaXZlYzIgZHlDb3JuZXIgPSBpdmVjMihjb29yZHNbMV0sIGNvb3Jkc1syXSkgLSBwYWRzOwogICAgICAgIGludCBkeVJDb3JuZXIgPSBkeUNvcm5lci54OwogICAgICAgIGludCBkeUNDb3JuZXIgPSBkeUNvcm5lci55OwoKICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMC4pOwogICAgICAgIGZvciAoaW50IHdSID0gMDsgd1IgPCAke3R9OyB3UisrKSB7CiAgICAgICAgICBmbG9hdCBkeVIgPSBmbG9hdChkeVJDb3JuZXIgKyB3UikgLyBzdHJpZGVzWzBdOwogICAgICAgICAgaWYgKGR5UiA8IDAuMCB8fCBkeVIgPj0gJHtlLm91dEhlaWdodH0uMCB8fCBmcmFjdChkeVIpID4gMC4wKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaW50IGlkeVIgPSBpbnQoZHlSKTsKICAgICAgICAgIGludCB3UlBlcm0gPSAke3R9IC0gMSAtIHdSOwoKICAgICAgICAgIGZvciAoaW50IHdDID0gMDsgd0MgPCAke3N9OyB3QysrKSB7CiAgICAgICAgICAgIGludCB3Q1Blcm0gPSAke3N9IC0gMSAtIHdDOwoKICAgICAgICAgICAgZmxvYXQgZHlDID0gZmxvYXQoZHlDQ29ybmVyICsgd0MpIC8gc3RyaWRlc1sxXTsKICAgICAgICAgICAgYm9vbCBpZHlDVmFsID0gKGR5QyA+PSAwLjApICYmIChkeUMgPCAke2Uub3V0V2lkdGh9LjApCiAgICAgICAgICAgICAgJiYgKGZyYWN0KGR5QykgPT0gMC4wKTsKICAgICAgICAgICAgaW50IGlkeUMgPSBpbnQoZHlDKTsKCiAgICAgICAgICAgIGZsb2F0IGR5QzIgPSBmbG9hdChkeUNDb3JuZXIgKyB3QyArIDEpIC8gc3RyaWRlc1sxXTsKICAgICAgICAgICAgYm9vbCBpZHlDVmFsMiA9IChkeUMyID49IDAuMCkgJiYgKGR5QzIgPCAke2Uub3V0V2lkdGh9LjApCiAgICAgICAgICAgICAgJiYgKGZyYWN0KGR5QzIpID09IDAuMCk7CiAgICAgICAgICAgIGludCBpZHlDMiA9IGludChkeUMyKTsKCiAgICAgICAgICAgIGlmIChpZHlDVmFsICYmIGlkeUNWYWwyKSB7CiAgICAgICAgICAgICAgZm9yIChpbnQgZDIgPSAwOyBkMiA8ICR7ZS5vdXRDaGFubmVsc307IGQyICs9IDIpIHsKICAgICAgICAgICAgICAgIHZlYzQgd1ZhbHVlID0gZ2V0Vyh3UlBlcm0sIHdDUGVybSwgZDEsIGQyKTsKICAgICAgICAgICAgICAgIHZlYzQgZHlTYW1wbGUgPSBnZXREeShiYXRjaCwgaWR5UiwgaWR5QywgZDIpOwogICAgICAgICAgICAgICAgdmVjNCBkeVNhbXBsZTIgPSAoaWR5QyAvIDIgPT0gaWR5QzIgLyAyKSA/CiAgICAgICAgICAgICAgICAgIGR5U2FtcGxlIDogZ2V0RHkoYmF0Y2gsIGlkeVIsIGlkeUMyLCBkMik7CgogICAgICAgICAgICAgICAgdmVjMiBkeVZhbHVlID0gbW9kKGZsb2F0KGlkeUMpLCAyLikgPT0gMC4gPwogICAgICAgICAgICAgICAgICBkeVNhbXBsZS54eSA6IGR5U2FtcGxlLnp3OwogICAgICAgICAgICAgICAgcmVzdWx0Lnh5ICs9IHZlYzIoZG90KGR5VmFsdWUsIHdWYWx1ZS54eSksCiAgICAgICAgICAgICAgICAgIGRvdChkeVZhbHVlLCB3VmFsdWUuencpKTsKCiAgICAgICAgICAgICAgICBkeVZhbHVlID0gbW9kKGZsb2F0KGlkeUMyKSwgMi4pID09IDAuID8KICAgICAgICAgICAgICAgICAgZHlTYW1wbGUyLnh5IDogZHlTYW1wbGUyLnp3OwogICAgICAgICAgICAgICAgcmVzdWx0Lnp3ICs9IHZlYzIoZG90KGR5VmFsdWUsIHdWYWx1ZS54eSksCiAgICAgICAgICAgICAgICAgIGRvdChkeVZhbHVlLCB3VmFsdWUuencpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaWR5Q1ZhbCkgewogICAgICAgICAgICAgIGZvciAoaW50IGQyID0gMDsgZDIgPCAke2Uub3V0Q2hhbm5lbHN9OyBkMiArPSAyKSB7CiAgICAgICAgICAgICAgICB2ZWM0IHdWYWx1ZSA9IGdldFcod1JQZXJtLCB3Q1Blcm0sIGQxLCBkMik7CiAgICAgICAgICAgICAgICB2ZWM0IGR5U2FtcGxlID0gZ2V0RHkoYmF0Y2gsIGlkeVIsIGlkeUMsIGQyKTsKICAgICAgICAgICAgICAgIHZlYzIgZHlWYWx1ZSA9IG1vZChmbG9hdChpZHlDKSwgMi4pID09IDAuID8KICAgICAgICAgICAgICAgICAgZHlTYW1wbGUueHkgOiBkeVNhbXBsZS56dzsKICAgICAgICAgICAgICAgIHJlc3VsdC54eSArPSB2ZWMyKGRvdChkeVZhbHVlLCB3VmFsdWUueHkpLAogICAgICAgICAgICAgICAgICBkb3QoZHlWYWx1ZSwgd1ZhbHVlLnp3KSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGlkeUNWYWwyKSB7CiAgICAgICAgICAgICAgZm9yIChpbnQgZDIgPSAwOyBkMiA8ICR7ZS5vdXRDaGFubmVsc307IGQyICs9IDIpIHsKICAgICAgICAgICAgICAgIHZlYzQgd1ZhbHVlID0gZ2V0Vyh3UlBlcm0sIHdDUGVybSwgZDEsIGQyKTsKICAgICAgICAgICAgICAgIHZlYzQgZHlTYW1wbGUgPSBnZXREeShiYXRjaCwgaWR5UiwgaWR5QzIsIGQyKTsKICAgICAgICAgICAgICAgIHZlYzIgZHlWYWx1ZSA9IG1vZChmbG9hdChpZHlDMiksIDIuKSA9PSAwLiA/CiAgICAgICAgICAgICAgICAgIGR5U2FtcGxlLnh5IDogZHlTYW1wbGUuenc7CiAgICAgICAgICAgICAgICByZXN1bHQuencgKz0gdmVjMihkb3QoZHlWYWx1ZSwgd1ZhbHVlLnh5KSwKICAgICAgICAgICAgICAgICAgZG90KGR5VmFsdWUsIHdWYWx1ZS56dykpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXRPdXRwdXQocmVzdWx0KTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcUoobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2R5OnIsZmlsdGVyOm99PWUse2lucHV0U2hhcGU6aSxzdHJpZGVzOmEscGFkOmwsZGF0YUZvcm1hdDpjLGRpbVJvdW5kaW5nTW9kZTpofT1zLHA9a28oYyksZj1mbihpLG8uc2hhcGUsYSwxLGwsaCwhMSxwKTtpZihvZSgpLmdldEJvb2woIldFQkdMX1BBQ0tfQ09OVjJEVFJBTlNQT1NFIikmJnA9PT0iY2hhbm5lbHNMYXN0Iil7Y29uc3QgZz1bW2Yuc3RyaWRlSGVpZ2h0LGYuc3RyaWRlV2lkdGhdXSx5PW5ldyBISihmKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oeSxbcixvXSwiZmxvYXQzMiIsZyl9ZWxzZXtjb25zdCBnPW5ldyBWSihmKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oZyxbcixvXSwiZmxvYXQzMiIpfX1jb25zdCBLSj17a2VybmVsTmFtZTpkZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6cUp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFhKKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnIsZmlsdGVyOm99PWUse3N0cmlkZXM6aSxwYWQ6YSxkaWxhdGlvbnM6bH09cyxjPXhpKHIuc2hhcGUsby5zaGFwZSxpLGwsYSksaD1uZXcgTEooYyk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGgsW3Isb10sImZsb2F0MzIiKX1jb25zdCBZSj17a2VybmVsTmFtZTpoZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6WEp9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFFKKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnIsZHk6b309ZSx7c3RyaWRlczppLHBhZDphLGZpbHRlclNoYXBlOmx9PXMsYz14aShyLnNoYXBlLGwsaSwxLGEpLGg9bmV3IFdKKGMpO3JldHVybiB0LnJ1bldlYkdMUHJvZ3JhbShoLFtyLG9dLCJmbG9hdDMyIil9Y29uc3QgWko9e2tlcm5lbE5hbWU6dW0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlFKfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBKSihuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7ZHk6cixmaWx0ZXI6b309ZSx7cGFkOmksc3RyaWRlczphLGlucHV0U2hhcGU6bH09cyxjPXhpKGwsby5zaGFwZSxhLDEsaSksaD1uZXcgVUooYyk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGgsW3Isb10sImZsb2F0MzIiKX1jb25zdCBlZWU9e2tlcm5lbE5hbWU6Y20sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOkpKfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB0ZWU9THUrYAogIHJldHVybiBjb3MoeCk7CmAsbmVlPWAKICB2ZWM0IHJlc3VsdCA9IGNvcyh4KTsKICBidmVjNCBpc05hTiA9IGlzbmFuKHgpOwogICR7RGF9CiAgcmV0dXJuIHJlc3VsdDsKYCxzZWU9aXQoe29wU25pcHBldDp0ZWUscGFja2VkT3BTbmlwcGV0Om5lZX0pLHJlZT17a2VybmVsTmFtZTpQbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6c2VlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBvZWU9YAogIGZsb2F0IGUyeCA9IGV4cCgteCk7CiAgcmV0dXJuIChlMnggKyAxLjAgLyBlMngpIC8gMi4wOwpgLGllZT1pdCh7b3BTbmlwcGV0Om9lZX0pLGFlZT17a2VybmVsTmFtZTp6bCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6aWVlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBsZWV7Y29uc3RydWN0b3IoZSx0LHMscixvKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJJbWFnZSIsIkJveGVzIiwiQm94SW5kIl0sdGhpcy5vdXRwdXRTaGFwZT1bXTtjb25zdFtpLGEsbCxjXT1lLFtoXT10LFtwLGZdPXM7dGhpcy5vdXRwdXRTaGFwZT1baCxwLGYsY107Y29uc3QgZz1yPT09ImJpbGluZWFyIj8xOjAsW3ksd109W2Ake2EtMX0uMGAsYCR7bC0xfS4wYF0sW2IsdixTXT1wPjE/W2AkeyhhLTEpLyhwLTEpfWAsIih5Mi15MSkgKiBoZWlnaHRfcmF0aW8iLGB5MSoke3l9ICsgZmxvYXQoeSkqKGhlaWdodF9zY2FsZSlgXTpbIjAuMCIsIjAuMCIsYDAuNSAqICh5MSt5MikgKiAke3l9YF0sWyQsayxUXT1mPjE/W2AkeyhsLTEpLyhmLTEpfWAsIih4Mi14MSkgKiB3aWR0aF9yYXRpbyIsYHgxKiR7d30gKyBmbG9hdCh4KSood2lkdGhfc2NhbGUpYF06WyIwLjAiLCIwLjAiLGAwLjUgKiAoeDEreDIpICogJHt3fWBdO3RoaXMudXNlckNvZGU9YAogICAgICBjb25zdCBmbG9hdCBoZWlnaHRfcmF0aW8gPSBmbG9hdCgke2J9KTsKICAgICAgY29uc3QgZmxvYXQgd2lkdGhfcmF0aW8gPSBmbG9hdCgkeyR9KTsKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWM0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiID0gY29vcmRzWzBdOwogICAgICAgIGludCB5ID0gY29vcmRzWzFdOwogICAgICAgIGludCB4ID0gY29vcmRzWzJdOwogICAgICAgIGludCBkID0gY29vcmRzWzNdOwoKICAgICAgICAvLyBnZXQgYm94IHZhbHMKICAgICAgICBmbG9hdCB5MSA9IGdldEJveGVzKGIsMCk7CiAgICAgICAgZmxvYXQgeDEgPSBnZXRCb3hlcyhiLDEpOwogICAgICAgIGZsb2F0IHkyID0gZ2V0Qm94ZXMoYiwyKTsKICAgICAgICBmbG9hdCB4MiA9IGdldEJveGVzKGIsMyk7CgogICAgICAgIC8vIGdldCBpbWFnZSBpbiBiYXRjaCBpbmRleAogICAgICAgIGludCBiSW5kID0gcm91bmQoZ2V0Qm94SW5kKGIpKTsKICAgICAgICBpZihiSW5kIDwgMCB8fCBiSW5kID49ICR7aX0pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGZsb2F0IGhlaWdodF9zY2FsZSA9ICR7dn07CiAgICAgICAgZmxvYXQgd2lkdGhfc2NhbGUgPSAke2t9OwoKICAgICAgICBmbG9hdCBpbl95ID0gJHtTfTsKICAgICAgICBpZiggaW5feSA8IDAuMCB8fCBpbl95ID4gJHt5fSApIHsKICAgICAgICAgIHNldE91dHB1dChmbG9hdCgke299KSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGZsb2F0IGluX3ggPSAke1R9OwogICAgICAgIGlmKCBpbl94IDwgMC4wIHx8IGluX3ggPiAke3d9ICkgewogICAgICAgICAgc2V0T3V0cHV0KGZsb2F0KCR7b30pKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZlYzIgc291cmNlRnJhY0luZGV4Q1IgPSB2ZWMyKGluX3gsaW5feSk7CiAgICAgICAgaWYoJHtnfSA9PSAxKSB7CiAgICAgICAgICAvLyBDb21wdXRlIHRoZSBmb3VyIGludGVnZXIgaW5kaWNlcy4KICAgICAgICAgIGl2ZWMyIHNvdXJjZUZsb29yQ1IgPSBpdmVjMihzb3VyY2VGcmFjSW5kZXhDUik7CiAgICAgICAgICBpdmVjMiBzb3VyY2VDZWlsQ1IgPSBpdmVjMihjZWlsKHNvdXJjZUZyYWNJbmRleENSKSk7CgogICAgICAgICAgZmxvYXQgdG9wTGVmdCA9IGdldEltYWdlKGIsIHNvdXJjZUZsb29yQ1IueSwgc291cmNlRmxvb3JDUi54LCBkKTsKICAgICAgICAgIGZsb2F0IGJvdHRvbUxlZnQgPSBnZXRJbWFnZShiLCBzb3VyY2VDZWlsQ1IueSwgc291cmNlRmxvb3JDUi54LCBkKTsKICAgICAgICAgIGZsb2F0IHRvcFJpZ2h0ID0gZ2V0SW1hZ2UoYiwgc291cmNlRmxvb3JDUi55LCBzb3VyY2VDZWlsQ1IueCwgZCk7CiAgICAgICAgICBmbG9hdCBib3R0b21SaWdodCA9IGdldEltYWdlKGIsIHNvdXJjZUNlaWxDUi55LCBzb3VyY2VDZWlsQ1IueCwgZCk7CgogICAgICAgICAgdmVjMiBmcmFjQ1IgPSBzb3VyY2VGcmFjSW5kZXhDUiAtIHZlYzIoc291cmNlRmxvb3JDUik7CgogICAgICAgICAgZmxvYXQgdG9wID0gdG9wTGVmdCArICh0b3BSaWdodCAtIHRvcExlZnQpICogZnJhY0NSLng7CiAgICAgICAgICBmbG9hdCBib3R0b20gPSBib3R0b21MZWZ0ICsgKGJvdHRvbVJpZ2h0IC0gYm90dG9tTGVmdCkgKiBmcmFjQ1IueDsKICAgICAgICAgIGZsb2F0IG5ld1ZhbHVlID0gdG9wICsgKGJvdHRvbSAtIHRvcCkgKiBmcmFjQ1IueTsKICAgICAgICAgIHNldE91dHB1dChuZXdWYWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIENvbXB1dGUgdGhlIGNvb3JkaW5hdG9ycyBvZiBuZWFyZXN0IG5laWdoYm9yIHBvaW50LgogICAgICAgICAgaXZlYzIgc291cmNlTmVhcmVzdENSID0gaXZlYzIoZmxvb3IoCiAgICAgICAgICAgIHNvdXJjZUZyYWNJbmRleENSICsgdmVjMigwLjUsMC41KSkpOwogICAgICAgICAgZmxvYXQgbmV3VmFsdWUgPSBnZXRJbWFnZShiLCBzb3VyY2VOZWFyZXN0Q1IueSwgc291cmNlTmVhcmVzdENSLngsIGQpOwogICAgICAgICAgc2V0T3V0cHV0KG5ld1ZhbHVlKTsKICAgICAgICB9CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHVlZT1uPT57Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2ltYWdlOnIsYm94ZXM6byxib3hJbmQ6aX09ZSx7Y3JvcFNpemU6YSxtZXRob2Q6bCxleHRyYXBvbGF0aW9uVmFsdWU6Y309cyxoPW5ldyBsZWUoci5zaGFwZSxvLnNoYXBlLGEsbCxjKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oaCxbcixvLGldLCJmbG9hdDMyIil9LGNlZT17a2VybmVsTmFtZTpobSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6dWVlfTt2YXIgWmM7KGZ1bmN0aW9uKG4pe24uUHJvZD0iKiIsbi5TdW09IisifSkoWmN8fChaYz17fSkpO2NsYXNzIGpDe2NvbnN0cnVjdG9yKGUsdCxzLHIpe3RoaXMub3A9ZSx0aGlzLm91dHB1dFNoYXBlPXQsdGhpcy52YXJpYWJsZU5hbWVzPVsieCJdLHRoaXMuY3VzdG9tVW5pZm9ybXM9W3tuYW1lOiJpbmRleCIsdHlwZToiZmxvYXQifV07Y29uc3Qgbz10aGlzLm91dHB1dFNoYXBlLmxlbmd0aCxpPXRoaXMub3A9PT1aYy5Qcm9kPyIxLjAiOiIwLjAiLGE9cz9pOmBnZXRYKCR7R0MobywiY29vcmRzIix0aGlzLm9wKX0pYCxsPXRoaXMub3V0cHV0U2hhcGVbdGhpcy5vdXRwdXRTaGFwZS5sZW5ndGgtMV07bGV0IGM9IiIsaD0iIjtzPyhjPXI/YGVuZCAhPSAke2wtMX1gOiJlbmQgIT0gMCIsaD1yPyJlbmQgKyAxIjoiZW5kIC0gMSIpOihjPXI/YGVuZCArIHBvdzIgPCAke2x9YDoiZW5kID49IHBvdzIiLGg9cj8iZW5kICsgcG93MiI6ImVuZCAtIHBvdzIiKSx0aGlzLnVzZXJDb2RlPWAKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICR7eHQobyl9IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBlbmQgPSAke0hDKG8sImNvb3JkcyIsdGhpcy5vcCl9OwogICAgICAgIGZsb2F0IHZhbCA9ICR7YX07CiAgICAgICAgaW50IHBvdzIgPSBpbnQocG93KDIuMCwgaW5kZXgpKTsKICAgICAgICBpZiAoJHtjfSkgewogICAgICAgICAgaW50IGlkeCA9ICR7aH07CiAgICAgICAgICAke0hDKG8sImNvb3JkcyIsdGhpcy5vcCl9ID0gaWR4OwogICAgICAgICAgdmFsICR7dGhpcy5vcH09IGdldFgoJHtHQyhvLCJjb29yZHMiLHRoaXMub3ApfSk7CiAgICAgICAgfQogICAgICAgIHNldE91dHB1dCh2YWwpOwogICAgICB9CiAgICBgfX1mdW5jdGlvbiBHQyhuLGUsdCl7aWYobj09PTEpcmV0dXJuYCR7ZX1gO2lmKG49PT0yKXJldHVybmAke2V9LngsICR7ZX0ueWA7aWYobj09PTMpcmV0dXJuYCR7ZX0ueCwgJHtlfS55LCAke2V9LnpgO2lmKG49PT00KXJldHVybmAke2V9LngsICR7ZX0ueSwgJHtlfS56LCAke2V9LndgO3Rocm93IG5ldyBFcnJvcihgQ3VtdWxhdGl2ZSAke3R9IGZvciByYW5rICR7bn0gaXMgbm90IHlldCBzdXBwb3J0ZWRgKX1mdW5jdGlvbiBIQyhuLGUsdCl7aWYobj09PTEpcmV0dXJuYCR7ZX1gO2lmKG49PT0yKXJldHVybmAke2V9LnlgO2lmKG49PT0zKXJldHVybmAke2V9LnpgO2lmKG49PT00KXJldHVybmAke2V9LndgO3Rocm93IG5ldyBFcnJvcihgQ3VtdWxhdGl2ZSAke3R9IGZvciByYW5rICR7bn0gaXMgbm90IHlldCBzdXBwb3J0ZWRgKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBXRChuLGUsdCxzLHIsbyl7Y29uc3QgaT1lLnNoYXBlLmxlbmd0aCxhPUx0KFtzXSxpKTtsZXQgbD1lO2EhPW51bGwmJihsPUhuKHtpbnB1dHM6e3g6ZX0sYmFja2VuZDp0LGF0dHJzOntwZXJtOmF9fSkpO2NvbnN0IGM9anQoMSxpKVswXTtpZihjIT09aS0xKXRocm93IG5ldyBFcnJvcihgV2ViR0wgY3VtcHJvZCBzaGFkZXIgZXhwZWN0cyBhbiBpbm5lci1tb3N0IGF4aXM9JHtlLnNoYXBlLmxlbmd0aC0xfSBidXQgZ290IGF4aXM9JHtzfWApO2NvbnN0IGg9bC5zaGFwZVtjXTtsZXQgcD1Ocyh7aW5wdXRzOnt4Omx9LGJhY2tlbmQ6dH0pO2ZvcihsZXQgZj0wO2Y8PU1hdGguY2VpbChNYXRoLmxvZzIoaCkpLTE7ZisrKXtjb25zdCBnPW5ldyBqQyhuLGwuc2hhcGUsITEsbykseT1bW2ZdXSx3PXA7cD10LnJ1bldlYkdMUHJvZ3JhbShnLFtwXSxwLmR0eXBlLHkpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odyl9aWYocil7Y29uc3QgZj1uZXcgakMobixsLnNoYXBlLHIsbyksZz1wO3A9dC5ydW5XZWJHTFByb2dyYW0oZixbcF0scC5kdHlwZSksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhnKX1pZihhIT1udWxsKXtjb25zdCBmPWJpKGEpLGc9SG4oe2lucHV0czp7eDpwfSxiYWNrZW5kOnQsYXR0cnM6e3Blcm06Zn19KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhwKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGwpLGd9cmV0dXJuIHB9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZGVlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2F4aXM6byxleGNsdXNpdmU6aSxyZXZlcnNlOmF9PXM7cmV0dXJuIFdEKFpjLlByb2Qscix0LG8saSxhKX1jb25zdCBoZWU9e2tlcm5lbE5hbWU6ZG0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmRlZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcGVlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2F4aXM6byxleGNsdXNpdmU6aSxyZXZlcnNlOmF9PXM7cmV0dXJuIFdEKFpjLlN1bSxyLHQsbyxpLGEpfWNvbnN0IGZlZT17a2VybmVsTmFtZTpwZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6cGVlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBtZWUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cix3ZWlnaHRzOm99PWUse3NpemU6aSxiaW5hcnlPdXRwdXQ6YX09cztpZihyLnNoYXBlLmxlbmd0aD09PTEpe2NvbnN0IGw9dC5yZWFkU3luYyhyLmRhdGFJZCksYz10LnJlYWRTeW5jKG8uZGF0YUlkKSxoPVNEKGwsYyxvLmR0eXBlLG8uc2hhcGUsaSk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oW2ldLG8uZHR5cGUsaCl9ZWxzZSBpZihyLnNoYXBlLmxlbmd0aD09PTIpe2NvbnN0IGw9dC5idWZmZXJTeW5jKHIpLGM9dC5idWZmZXJTeW5jKG8pLGg9YlkobCxjLGksYSk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oaC5zaGFwZSxvLmR0eXBlLGgudmFsdWVzKX10aHJvdyBuZXcgRXJyb3IoYEVycm9yIGluIGRlbnNlQmluY291bnQ6IGlucHV0IG11c3QgYmUgYXQgbW9zdCByYW5rIDIsIGJ1dCBnb3QgcmFuayR7ci5zaGFwZS5sZW5ndGh9LmApfWNvbnN0IGdlZT17a2VybmVsTmFtZTpwbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6bWVlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyB5ZWV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiXSx0aGlzLm91dHB1dFNoYXBlPVtdLHRoaXMub3V0cHV0U2hhcGU9ZSx0aGlzLmJsb2NrU2l6ZT10LHRoaXMuZGF0YUZvcm1hdD1zLHRoaXMudXNlckNvZGU9YAogICAgdm9pZCBtYWluKCkgewogICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgaW50IGIgPSBjb29yZHNbMF07CiAgICAgIGludCBoID0gJHt0aGlzLmdldEhlaWdodENvb3JkU3RyaW5nKCl9OwogICAgICBpbnQgdyA9ICR7dGhpcy5nZXRXaWR0aENvb3JkU3RyaW5nKCl9OwogICAgICBpbnQgZCA9ICR7dGhpcy5nZXREZXB0aENvb3JkU3RyaW5nKCl9OwoKICAgICAgaW50IGluX2ggPSBoIC8gJHt0fTsKICAgICAgaW50IG9mZnNldF9oID0gaW1vZChoLCAke3R9KTsKICAgICAgaW50IGluX3cgPSB3IC8gJHt0fTsKICAgICAgaW50IG9mZnNldF93ID0gaW1vZCh3LCAke3R9KTsKICAgICAgaW50IG9mZnNldF9kID0gKG9mZnNldF9oICogJHt0fSArIG9mZnNldF93KSAqCiAgICAgICAgJHt0aGlzLmdldE91dHB1dERlcHRoU2l6ZSgpfTsKICAgICAgaW50IGluX2QgPSBkICsgb2Zmc2V0X2Q7CgogICAgICBmbG9hdCByZXN1bHQgPSAke3RoaXMuZ2V0SW5wdXRTYW1wbGluZ1N0cmluZygpfTsKICAgICAgc2V0T3V0cHV0KHJlc3VsdCk7CiAgICB9CiAgYH1nZXRIZWlnaHRDb29yZFN0cmluZygpe3JldHVybiB0aGlzLmRhdGFGb3JtYXQ9PT0iTkhXQyI/ImNvb3Jkc1sxXSI6ImNvb3Jkc1syXSJ9Z2V0V2lkdGhDb29yZFN0cmluZygpe3JldHVybiB0aGlzLmRhdGFGb3JtYXQ9PT0iTkhXQyI/ImNvb3Jkc1syXSI6ImNvb3Jkc1szXSJ9Z2V0RGVwdGhDb29yZFN0cmluZygpe3JldHVybiB0aGlzLmRhdGFGb3JtYXQ9PT0iTkhXQyI/ImNvb3Jkc1szXSI6ImNvb3Jkc1sxXSJ9Z2V0T3V0cHV0RGVwdGhTaXplKCl7cmV0dXJuIHRoaXMuZGF0YUZvcm1hdD09PSJOSFdDIj90aGlzLm91dHB1dFNoYXBlWzNdOnRoaXMub3V0cHV0U2hhcGVbMV19Z2V0SW5wdXRTYW1wbGluZ1N0cmluZygpe3JldHVybiB0aGlzLmRhdGFGb3JtYXQ9PT0iTkhXQyI/ImdldFgoYiwgaW5faCwgaW5fdywgaW5fZCkiOiJnZXRYKGIsIGluX2QsIGluX2gsIGluX3cpIn19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24geGVlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse2Jsb2NrU2l6ZTpvLGRhdGFGb3JtYXQ6aX09cyxhPXIuc2hhcGVbMF0sbD1pPT09Ik5IV0MiP3Iuc2hhcGVbMV06ci5zaGFwZVsyXSxjPWk9PT0iTkhXQyI/ci5zaGFwZVsyXTpyLnNoYXBlWzNdLGg9aT09PSJOSFdDIj9yLnNoYXBlWzNdOnIuc2hhcGVbMV0scD1sKm8sZj1jKm8sZz1oLyhvKm8pLHk9aT09PSJOSFdDIj9bYSxwLGYsZ106W2EsZyxwLGZdLHc9bmV3IHllZSh5LG8saSk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKHcsW3JdLHIuZHR5cGUpfWNvbnN0IGJlZT17a2VybmVsTmFtZTpmbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6eGVlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBVRHtjb25zdHJ1Y3RvcihlLHQ9ITEscz1udWxsLHI9ITEsbz0hMSl7dGhpcy52YXJpYWJsZU5hbWVzPVsieCIsIlciXSx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToicGFkcyIsdHlwZToiaXZlYzIifSx7bmFtZToic3RyaWRlcyIsdHlwZToiaXZlYzIifSx7bmFtZToiZGlsYXRpb25zIix0eXBlOiJpdmVjMiJ9LHtuYW1lOiJpbkRpbXMiLHR5cGU6Iml2ZWMyIn1dLHRoaXMub3V0cHV0U2hhcGU9ZS5vdXRTaGFwZSx0aGlzLmVuYWJsZVNoYXBlVW5pZm9ybXM9TG4odGhpcy5vdXRwdXRTaGFwZS5sZW5ndGgpO2NvbnN0IGk9ZS5maWx0ZXJIZWlnaHQsYT1lLmZpbHRlcldpZHRoLGw9ZS5vdXRDaGFubmVscy9lLmluQ2hhbm5lbHM7bGV0IGM9IiIsaD0iIjtzJiYocj9jPWBmbG9hdCBhY3RpdmF0aW9uKGZsb2F0IGEpIHsKICAgICAgICAgIGZsb2F0IGIgPSBnZXRQcmVsdUFjdGl2YXRpb25XZWlnaHRzQXRPdXRDb29yZHMoKTsKICAgICAgICAgICR7c30KICAgICAgICB9YDpvP2M9YGZsb2F0IGFjdGl2YXRpb24oZmxvYXQgYSkgewogICAgICAgICAgZmxvYXQgYiA9IGdldExlYWt5cmVsdUFscGhhQXRPdXRDb29yZHMoKTsKICAgICAgICAgICR7c30KICAgICAgICB9YDpjPWAKICAgICAgICAgIGZsb2F0IGFjdGl2YXRpb24oZmxvYXQgeCkgewogICAgICAgICAgICAke3N9CiAgICAgICAgICB9CiAgICAgICAgYCxoPSJyZXN1bHQgPSBhY3RpdmF0aW9uKHJlc3VsdCk7Iik7Y29uc3QgcD10PyJyZXN1bHQgKz0gZ2V0Qmlhc0F0T3V0Q29vcmRzKCk7IjoiIjt0JiZ0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgiYmlhcyIpLHImJnRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCJwcmVsdUFjdGl2YXRpb25XZWlnaHRzIiksbyYmdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goImxlYWt5cmVsdUFscGhhIiksdGhpcy51c2VyQ29kZT1gCiAgICAgICR7Y30KCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYmF0Y2ggPSBjb29yZHMueDsKICAgICAgICBpdmVjMiB4UkNDb3JuZXIgPSBjb29yZHMueXogKiBzdHJpZGVzIC0gcGFkczsKICAgICAgICBpbnQgZDIgPSBjb29yZHMudzsKICAgICAgICBpbnQgZDEgPSBkMiAvICR7bH07CiAgICAgICAgaW50IHEgPSBkMiAtIGQxICogJHtsfTsKCiAgICAgICAgaW50IHhSQ29ybmVyID0geFJDQ29ybmVyLng7CiAgICAgICAgaW50IHhDQ29ybmVyID0geFJDQ29ybmVyLnk7CgogICAgICAgIC8vIENvbnZvbHZlIHgoPywgPywgZDEpIHdpdGggdyg6LCA6LCBkMSwgcSkgdG8gZ2V0IHkoeVIsIHlDLCBkMikuCiAgICAgICAgLy8gPyA9IHRvIGJlIGRldGVybWluZWQuIDogPSBhY3Jvc3MgYWxsIHZhbHVlcyBpbiB0aGF0IGF4aXMuCiAgICAgICAgZmxvYXQgZG90UHJvZCA9IDAuMDsKICAgICAgICAvLyBUTyBETyhkc21pbGtvdik6IEZsYXR0ZW4gdGhlIHR3byBmb3IgbG9vcHMgYW5kIHZlYzQgdGhlIG9wZXJhdGlvbnMuCiAgICAgICAgZm9yIChpbnQgd1IgPSAwOyB3UiA8ICR7aX07IHdSKyspIHsKICAgICAgICAgIGludCB4UiA9IHhSQ29ybmVyICsgd1IgKiBkaWxhdGlvbnNbMF07CgogICAgICAgICAgaWYgKHhSIDwgMCB8fCB4UiA+PSBpbkRpbXNbMF0pIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yIChpbnQgd0MgPSAwOyB3QyA8ICR7YX07IHdDKyspIHsKICAgICAgICAgICAgaW50IHhDID0geENDb3JuZXIgKyB3QyAqIGRpbGF0aW9uc1sxXTsKCiAgICAgICAgICAgIGlmICh4QyA8IDAgfHwgeEMgPj0gaW5EaW1zWzFdKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZsb2F0IHhWYWwgPSBnZXRYKGJhdGNoLCB4UiwgeEMsIGQxKTsKICAgICAgICAgICAgZmxvYXQgd1ZhbCA9IGdldFcod1IsIHdDLCBkMSwgcSk7CiAgICAgICAgICAgIGRvdFByb2QgKz0geFZhbCAqIHdWYWw7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmbG9hdCByZXN1bHQgPSBkb3RQcm9kOwogICAgICAgICR7cH0KICAgICAgICAke2h9CiAgICAgICAgc2V0T3V0cHV0KHJlc3VsdCk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIGpEe2NvbnN0cnVjdG9yKGUsdD0hMSxzPW51bGwscj0hMSxvPSExKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4IiwiVyJdLHRoaXMucGFja2VkSW5wdXRzPSEwLHRoaXMucGFja2VkT3V0cHV0PSEwLHRoaXMuY3VzdG9tVW5pZm9ybXM9W3tuYW1lOiJwYWRzIix0eXBlOiJpdmVjMiJ9LHtuYW1lOiJzdHJpZGVzIix0eXBlOiJpdmVjMiJ9LHtuYW1lOiJkaWxhdGlvbnMiLHR5cGU6Iml2ZWMyIn0se25hbWU6ImluRGltcyIsdHlwZToiaXZlYzIifV0sdGhpcy5vdXRwdXRTaGFwZT1lLm91dFNoYXBlLHRoaXMuZW5hYmxlU2hhcGVVbmlmb3Jtcz1Mbih0aGlzLm91dHB1dFNoYXBlLmxlbmd0aCk7Y29uc3QgaT1lLm91dENoYW5uZWxzL2UuaW5DaGFubmVscyxhPWUucGFkSW5mby5sZWZ0LGw9ZS5zdHJpZGVXaWR0aCxjPWUuZGlsYXRpb25XaWR0aCxoPWUuZmlsdGVySGVpZ2h0LHA9ZS5maWx0ZXJXaWR0aCxmPXA7bGV0IGc9YAogICAgICBpbnQgeFI7IGludCB4QzsgaW50IHhDT2Zmc2V0OwogICAgICB2ZWM0IHdUZXhlbDsgdmVjNCBwcmV2aW91czsgdmVjNCBmaW5hbDtgO2ZvcihsZXQgdj0wO3Y8cDt2KyspZys9YAogICAgICAgICAgdmVjNCB4VGV4ZWxDJHt2KjJ9OwogICAgICAgICAgaW50IHhUZXhlbEMke3YqMn1SZWFkeTsKICAgICAgICAgIHZlYzQgeFRleGVsQyR7dioyKzF9OwogICAgICAgICAgaW50IHhUZXhlbEMke3YqMisxfVJlYWR5OwogICAgICAgICAgdmVjNCB4QyR7dn07YDtnKz1gCiAgICBmb3IgKGludCByID0gMDsgciA8ICR7aH07IHIrKykgewogICAgICBgO2ZvcihsZXQgdj0wO3Y8cDt2KyspZys9YAogICAgICAgICAgeFRleGVsQyR7dioyfSA9IHZlYzQoMC4wKTsKICAgICAgICAgIHhUZXhlbEMke3YqMn1SZWFkeSA9IDA7CiAgICAgICAgICB4VGV4ZWxDJHt2KjIrMX0gPSB2ZWM0KDAuMCk7CiAgICAgICAgICB4VGV4ZWxDJHt2KjIrMX1SZWFkeSA9IDA7CiAgICAgICAgICB4QyR7dn0gPSB2ZWM0KDAuMCk7YDtnKz1gCiAgICAgICAgeFIgPSB4UkNvcm5lciArIHIgKiBkaWxhdGlvbnNbMF07CiAgICAgICAgaWYgKHhSID49MCAmJiB4UiA8IGluRGltc1swXSkgewogICAgICBgO2ZvcihsZXQgdj0wO3Y8KGYrMSkvMjt2Kyspe2NvbnN0IFM9dioyO2lmKGcrPWAKICAgICAgICAgIHhDID0geENDb3JuZXIgKyAke1MqY307CiAgICAgICAgICBgLGw9PT0xKXtpZihTPHAmJihhJTI9PT0xPyhnKz1gCiAgICAgICAgICAgICAgICB4Q09mZnNldCA9IHhDICsgMTsKICAgICAgICAgICAgICAgIGlmICh4Q09mZnNldCA+PSAwICYmIHhDT2Zmc2V0IDwgaW5EaW1zWzFdICYmIHhUZXhlbEMke1N9UmVhZHkgPT0gMCkgewogICAgICAgICAgICAgICAgICB4VGV4ZWxDJHtTfSA9IGdldFgoYmF0Y2gsIHhSLCB4Q09mZnNldCwgZDEpOwoKICAgICAgICAgICAgICAgICAgLy8gTmVlZCB0byBtYW51YWxseSBjbGVhciB1bnVzZWQgY2hhbm5lbHMgaW4gY2FzZQogICAgICAgICAgICAgICAgICAvLyB3ZSdyZSByZWFkaW5nIGZyb20gcmVjeWNsZWQgdGV4dHVyZS4KICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ICsgMSA+PSBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICB4VGV4ZWxDJHtTfS56dyA9IHZlYzIoMC4wKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB4VGV4ZWxDJHtTfVJlYWR5ID0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBgLGM9PT0xJiZTPjA/Zys9YAogICAgICAgICAgICAgICAgeEMke1N9ID0gdmVjNCh4VGV4ZWxDJHtTLTJ9Lnp3LCB4VGV4ZWxDJHtTfS54eSk7CiAgICAgICAgICAgICAgICBgOmcrPWAKICAgICAgICAgICAgICAgICAgeENPZmZzZXQgPSB4QyArIDEgLSAyOwoKICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ID49IDAgJiYgeENPZmZzZXQgPCBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICBwcmV2aW91cyA9IGdldFgoYmF0Y2gsIHhSLCB4Q09mZnNldCwgZDEpOwoKICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIG1hbnVhbGx5IGNsZWFyIHVudXNlZCBjaGFubmVscyBpbiBjYXNlCiAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgcmVhZGluZyBmcm9tIHJlY3ljbGVkIHRleHR1cmUuCiAgICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ICsgMSA+PSBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzLnp3ID0gdmVjMigwLjApOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgeEMke1N9ID0gdmVjNChwcmV2aW91cy56dywgeFRleGVsQyR7U30ueHkpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHhDJHtTfSA9IHZlYzQoMC4wLCAwLjAsIHhUZXhlbEMke1N9Lnh5KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBgKTpnKz1gCiAgICAgICAgICAgICAgICBpZiAoeEMgPj0gMCAmJiB4QyA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHtTfVJlYWR5ID09IDApIHsKICAgICAgICAgICAgICAgICAgeFRleGVsQyR7U30gPSBnZXRYKGJhdGNoLCB4UiwgeEMsIGQxKTsKICAgICAgICAgICAgICAgICAgaWYgKHhDICsgMSA+PSBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICB4VGV4ZWxDJHtTfS56dyA9IHZlYzIoMC4wKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB4VGV4ZWxDJHtTfVJlYWR5ID0gMTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB4QyR7U30gPSB4VGV4ZWxDJHtTfTsKICAgICAgICAgICAgICAgIGAsUysxPHApKXtjb25zdCAkPWElMj09PTA/SmYoYyk6YztjJTI9PT0wJiZhJTI9PT0xfHxjJTIhPT0wJiZhJTIhPT0xPyhnKz1gCiAgICAgICAgICAgICAgICAgIHhDT2Zmc2V0ID0geEMgKyBpbW9kKHBhZHNbMV0sIDIpICsgJHskfTsKCiAgICAgICAgICAgICAgICAgIGlmICh4Q09mZnNldCA+PSAwICYmIHhDT2Zmc2V0IDwgaW5EaW1zWzFdICYmIHhUZXhlbEMke1MrMX1SZWFkeSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgeFRleGVsQyR7UysxfSA9IGdldFgoYmF0Y2gsIHhSLCB4Q09mZnNldCwgZDEpOwoKICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIG1hbnVhbGx5IGNsZWFyIHVudXNlZCBjaGFubmVscyBpbiBjYXNlCiAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgcmVhZGluZyBmcm9tIHJlY3ljbGVkIHRleHR1cmUuCiAgICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ICsgMSA+PSBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke1MrMX0uencgPSB2ZWMyKDAuMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke1MrMX1SZWFkeSA9IDE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgYCxjPjE/Zys9YAogICAgICAgICAgICAgICAgICAgIHhDT2Zmc2V0IC09IDI7CiAgICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ID49IDAgJiYgeENPZmZzZXQgPCBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXMgPSBnZXRYKGJhdGNoLCB4UiwgeENPZmZzZXQsIGQxKTsKICAgICAgICAgICAgICAgICAgICAgeEMke1MrMX0gPSB2ZWM0KHByZXZpb3VzLnp3LCB4VGV4ZWxDJHtTKzF9Lnh5KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICB4QyR7UysxfSA9IHZlYzQoMC4wLCAwLjAsIHhUZXhlbEMke1MrMX0ueHkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBgOmcrPWAKICAgICAgICAgICAgICAgICAgICB4QyR7UysxfSA9IHZlYzQoeFRleGVsQyR7U30uencsIHhUZXhlbEMke1MrMX0ueHkpOwogICAgICAgICAgICAgICAgICAgIGApOiQ9PT0xP2crPWAKICAgICAgICAgICAgICAgICAgICB4QyR7UysxfSA9IHhUZXhlbEMke1N9OwogICAgICAgICAgICAgICAgICAgIGA6Zys9YAogICAgICAgICAgICAgICAgICAgIHhDT2Zmc2V0ID0geEMgKyAkeyR9OwoKICAgICAgICAgICAgICAgICAgICBpZiAoeENPZmZzZXQgPj0gMCAmJiB4Q09mZnNldCA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHtTKzF9UmVhZHkgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgeFRleGVsQyR7UysxfSA9IGdldFgoYmF0Y2gsIHhSLCB4Q09mZnNldCwgZDEpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHhDT2Zmc2V0ICsgMSA+PSBpbkRpbXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgeFRleGVsQyR7UysxfS56dyA9IHZlYzIoMC4wKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke1MrMX1SZWFkeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB4QyR7UysxfSA9IHhUZXhlbEMke1MrMX07CiAgICAgICAgICAgICAgICAgICAgYH19ZWxzZSBTPHAmJihhJTI9PT0xPyhnKz1gCiAgICAgICAgICAgICAgICB4Q09mZnNldCA9IHhDICsgMSAtIHN0cmlkZXNbMV07CiAgICAgICAgICAgICAgICBpZih4Q09mZnNldCA+PSAwICYmIHhDT2Zmc2V0IDwgaW5EaW1zWzFdICYmIHhUZXhlbEMke1N9UmVhZHkgPT0gMCkgewogICAgICAgICAgICAgICAgICB4VGV4ZWxDJHtTfSA9IGdldFgoYmF0Y2gsIHhSLCB4Q09mZnNldCwgZDEpOwogICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIG1hbnVhbGx5IGNsZWFyIHVudXNlZCBjaGFubmVscyBpbiBjYXNlCiAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIHJlYWRpbmcgZnJvbSByZWN5Y2xlZCB0ZXh0dXJlLgogICAgICAgICAgICAgICAgICBpZiAoeENPZmZzZXQgKyAxID49IGluRGltc1sxXSkgewogICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke1N9Lnp3ID0gdmVjMigwLjApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHhUZXhlbEMke1N9UmVhZHkgPSAxOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKHhDICsgMSA+PSAwICYmIHhDICsgMSA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHtTKzF9UmVhZHkgPT0gMCkgewogICAgICAgICAgICAgICAgICB4VGV4ZWxDJHtTKzF9ID0gZ2V0WChiYXRjaCwgeFIsIHhDICsgMSwgZDEpOwogICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIG1hbnVhbGx5IGNsZWFyIHVudXNlZCBjaGFubmVscyBpbiBjYXNlCiAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIHJlYWRpbmcgZnJvbSByZWN5Y2xlZCB0ZXh0dXJlLgogICAgICAgICAgICAgICAgICBpZiAoeEMgKyAyID49IGluRGltc1sxXSkgewogICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke1MrMX0uencgPSB2ZWMyKDAuMCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgeFRleGVsQyR7UysxfVJlYWR5ID0gMTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB4QyR7U30gPSB2ZWM0KHhUZXhlbEMke1N9Lnp3LCB4VGV4ZWxDJHtTKzF9Lnp3KTsKICAgICAgICAgICAgICBgLFMrMTxwJiYoZys9YAogICAgICAgICAgICAgICAgICBmaW5hbCA9IHZlYzQoMC4wKTsKICAgICAgICAgICAgICAgICAgeENPZmZzZXQgPSB4QyArIDEgKyBzdHJpZGVzWzFdOwogICAgICAgICAgICAgICAgICBpZih4Q09mZnNldCA+PSAwICYmIHhDT2Zmc2V0IDwgaW5EaW1zWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgZmluYWwgPSBnZXRYKGJhdGNoLCB4UiwgeENPZmZzZXQsIGQxKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB4QyR7UysxfSA9IHZlYzQoeFRleGVsQyR7UysxfS54eSwgZmluYWwueHkpOwogICAgICAgICAgICAgICAgYCkpOihnKz1gCiAgICAgICAgICAgICAgICBpZih4QyA+PSAwICYmIHhDIDwgaW5EaW1zWzFdICYmIHhUZXhlbEMke1N9UmVhZHkgPT0gMCkgewogICAgICAgICAgICAgICAgICB4VGV4ZWxDJHtTfSA9IGdldFgoYmF0Y2gsIHhSLCB4QywgZDEpOwogICAgICAgICAgICAgICAgICBpZiAoeEMgKyAxID49IGluRGltc1sxXSkgewogICAgICAgICAgICAgICAgICAgIHhUZXhlbEMke1N9Lnp3ID0gdmVjMigwLjApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHhUZXhlbEMke1N9UmVhZHkgPSAxOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHhDT2Zmc2V0ID0geEMgKyBzdHJpZGVzWzFdOwogICAgICAgICAgICAgICAgaWYoeENPZmZzZXQgPj0gMCAmJiB4Q09mZnNldCA8IGluRGltc1sxXSAmJiB4VGV4ZWxDJHtTKzF9UmVhZHkgPT0gMCkgewogICAgICAgICAgICAgICAgICB4VGV4ZWxDJHtTKzF9ID0gZ2V0WChiYXRjaCwgeFIsIHhDT2Zmc2V0LCBkMSk7CiAgICAgICAgICAgICAgICAgIGlmICh4Q09mZnNldCArIDEgPj0gaW5EaW1zWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgeFRleGVsQyR7UysxfS56dyA9IHZlYzIoMC4pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHhUZXhlbEMke1MrMX1SZWFkeSA9IDE7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgeEMke1N9ID0gdmVjNCgKICAgICAgICAgICAgICAgICAgeFRleGVsQyR7U30ueHksIHhUZXhlbEMke1MrMX0ueHkpOwogICAgICAgICAgICAgIGAsUysxPHAmJihnKz1gCiAgICAgICAgICAgICAgICAgIHhDJHtTKzF9ID0gdmVjNCh4VGV4ZWxDJHtTfS56dywgeFRleGVsQyR7UysxfS56dyk7CiAgICAgICAgICAgICAgICBgKSkpO1M8cCYmKGcrPWAKICAgICAgICAgICAgd1RleGVsID0gZ2V0VyhyLCAke1N9LCBkMSwgcSk7CiAgICAgICAgICAgIGRvdFByb2QgKz0geEMke1N9ICogdmVjNCh3VGV4ZWwueHosIHdUZXhlbC54eik7CiAgICAgICAgICBgLFMrMTxwJiYoZys9YAogICAgICAgICAgICAgIHdUZXhlbCA9IGdldFcociwgJHtTKzF9LCBkMSwgcSk7CiAgICAgICAgICAgICAgZG90UHJvZCArPSB4QyR7UysxfSAqIHZlYzQod1RleGVsLnh6LCB3VGV4ZWwueHopOwogICAgICAgICAgICBgKSl9Zys9YAogICAgfQogIGAsZys9YAogICAgICB9CiAgICBgO2xldCB5PSIiLHc9IiI7cyYmKHI/eT1gdmVjNCBhY3RpdmF0aW9uKHZlYzQgYSkgewogICAgICAgICAgdmVjNCBiID0gZ2V0UHJlbHVBY3RpdmF0aW9uV2VpZ2h0c0F0T3V0Q29vcmRzKCk7CiAgICAgICAgICAke3N9CiAgICAgICAgfWA6bz95PWB2ZWM0IGFjdGl2YXRpb24odmVjNCBhKSB7CiAgICAgICAgICB2ZWM0IGIgPSBnZXRMZWFreXJlbHVBbHBoYUF0T3V0Q29vcmRzKCk7CiAgICAgICAgICAke3N9CiAgICAgICAgfWA6eT1gdmVjNCBhY3RpdmF0aW9uKHZlYzQgeCkgewogICAgICAgICAgJHtzfQogICAgICAgIH1gLHc9InJlc3VsdCA9IGFjdGl2YXRpb24ocmVzdWx0KTsiKTtjb25zdCBiPXQ/InJlc3VsdCArPSBnZXRCaWFzQXRPdXRDb29yZHMoKTsiOiIiO3QmJnRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCJiaWFzIiksciYmdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goInByZWx1QWN0aXZhdGlvbldlaWdodHMiKSxvJiZ0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgibGVha3lyZWx1QWxwaGEiKSx0aGlzLnVzZXJDb2RlPWAKICAgICAgJHt5fQoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWM0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiYXRjaCA9IGNvb3Jkcy54OwogICAgICAgIGl2ZWMyIHhSQ0Nvcm5lciA9IGNvb3Jkcy55eiAqIHN0cmlkZXMgLSBwYWRzOwogICAgICAgIGludCBkMiA9IGNvb3Jkcy53OwogICAgICAgIGludCBkMSA9IGQyIC8gJHtpfTsKICAgICAgICBpbnQgcSA9IGQyIC0gZDEgKiAke2l9OwogICAgICAgIGludCB4UkNvcm5lciA9IHhSQ0Nvcm5lci54OwogICAgICAgIGludCB4Q0Nvcm5lciA9IHhSQ0Nvcm5lci55OwoKICAgICAgICAvL2ludGlhbGl6ZSBkb3RQcm9kIHdpdGggYSBzbWFsbCBlcHNpbG9uIHNlZW1zIHRvIHJlZHVjZSBHUFUgYWNjdXJhY3kgbG9zcy4KICAgICAgICB2ZWM0IGRvdFByb2QgPSB2ZWM0KDAuMDAwMDAwMDAwMDAwMDAxKTsKCiAgICAgICAgJHtnfQoKICAgICAgICB2ZWM0IHJlc3VsdCA9IGRvdFByb2QgLSB2ZWM0KDAuMDAwMDAwMDAwMDAwMDAxKTsKICAgICAgICAke2J9CiAgICAgICAgJHt3fQogICAgICAgIHNldE91dHB1dChyZXN1bHQpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB3ZWUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cixmaWx0ZXI6b309ZSx7c3RyaWRlczppLHBhZDphLGRpbGF0aW9uczpsLGRpbVJvdW5kaW5nTW9kZTpjfT1zO2xldCBoPWw7aD09bnVsbCYmKGg9WzEsMV0pLEEoa24oaSxoKSwoKT0+YEVycm9yIGluIGRlcHRod2lzZUNvbnYyZDogRWl0aGVyIHN0cmlkZXMgb3IgZGlsYXRpb25zIG11c3QgYmUgMS4gR290IHN0cmlkZXMgJHtpfSBhbmQgZGlsYXRpb25zICcke2h9J2ApO2NvbnN0IHA9Zm4oci5zaGFwZSxvLnNoYXBlLGksaCxhLGMsITApO2xldCBmO29lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDS19ERVBUSFdJU0VDT05WIikmJnAuc3RyaWRlV2lkdGg8PTImJnAub3V0Q2hhbm5lbHMvcC5pbkNoYW5uZWxzPT09MT9mPW5ldyBqRChwKTpmPW5ldyBVRChwKTtjb25zdCBnPVtbcC5wYWRJbmZvLnRvcCxwLnBhZEluZm8ubGVmdF0sW3Auc3RyaWRlSGVpZ2h0LHAuc3RyaWRlV2lkdGhdLFtwLmRpbGF0aW9uSGVpZ2h0LHAuZGlsYXRpb25XaWR0aF0sW3AuaW5IZWlnaHQscC5pbldpZHRoXV07cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGYsW3Isb10sImZsb2F0MzIiLGcpfWNvbnN0IHZlZT17a2VybmVsTmFtZTpmZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6d2VlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBTZWV7Y29uc3RydWN0b3IoZSl7dGhpcy52YXJpYWJsZU5hbWVzPVsieCIsImR5Il0sdGhpcy5vdXRwdXRTaGFwZT1lLmZpbHRlclNoYXBlO2NvbnN0IHQ9ZS5zdHJpZGVIZWlnaHQscz1lLnN0cmlkZVdpZHRoLHI9ZS5wYWRJbmZvLnRvcCxvPWUucGFkSW5mby5sZWZ0LGk9ZS5vdXRDaGFubmVscy9lLmluQ2hhbm5lbHM7dGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgd1IgPSBjb29yZHMueDsKICAgICAgICBpbnQgd0MgPSBjb29yZHMueTsKICAgICAgICBpbnQgZDEgPSBjb29yZHMuejsKICAgICAgICBpbnQgZG0gPSBjb29yZHMudzsKICAgICAgICBpbnQgZDIgPSBkMSAqICR7aX0gKyBkbTsKCiAgICAgICAgZmxvYXQgZG90UHJvZCA9IDAuMDsKCiAgICAgICAgLy8gVE8gRE86IFZlYzQgb3ZlciB0aGUgYmF0Y2ggc2l6ZQogICAgICAgIGZvciAoaW50IGIgPSAwOyBiIDwgJHtlLmJhdGNoU2l6ZX07IGIrKykgewogICAgICAgICAgZm9yIChpbnQgeVIgPSAwOyB5UiA8ICR7ZS5vdXRIZWlnaHR9OyB5UisrKSB7CiAgICAgICAgICAgIGludCB4UiA9IHdSICsgeVIgKiAke3R9IC0gJHtyfTsKCiAgICAgICAgICAgIGlmICh4UiA8IDAgfHwgeFIgPj0gJHtlLmluSGVpZ2h0fSkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKGludCB5QyA9IDA7IHlDIDwgJHtlLm91dFdpZHRofTsgeUMrKykgewogICAgICAgICAgICAgIGludCB4QyA9IHdDICsgeUMgKiAke3N9IC0gJHtvfTsKCiAgICAgICAgICAgICAgaWYgKHhDIDwgMCB8fCB4QyA+PSAke2UuaW5XaWR0aH0pIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZmxvYXQgZHlWYWx1ZSA9IGdldER5KGIsIHlSLCB5QywgZDIpOwogICAgICAgICAgICAgIGZsb2F0IHhWYWx1ZSA9IGdldFgoYiwgeFIsIHhDLCBkMSk7CiAgICAgICAgICAgICAgZG90UHJvZCArPSAoeFZhbHVlICogZHlWYWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KGRvdFByb2QpOwogICAgICB9CiAgICBgfX1jbGFzcyBOZWV7Y29uc3RydWN0b3IoZSl7dGhpcy52YXJpYWJsZU5hbWVzPVsiZHkiLCJXIl0sdGhpcy5vdXRwdXRTaGFwZT1lLmluU2hhcGU7Y29uc3QgdD1lLmZpbHRlckhlaWdodCxzPWUuZmlsdGVyV2lkdGgscj1lLnN0cmlkZUhlaWdodCxvPWUuc3RyaWRlV2lkdGgsaT10LTEtZS5wYWRJbmZvLnRvcCxhPXMtMS1lLnBhZEluZm8ubGVmdCxsPWUub3V0Q2hhbm5lbHMvZS5pbkNoYW5uZWxzO3RoaXMudXNlckNvZGU9YAogICAgICBjb25zdCBpdmVjMiBwYWRzID0gaXZlYzIoJHtpfSwgJHthfSk7CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGJhdGNoID0gY29vcmRzWzBdOwogICAgICAgIGludCBkMSA9IGNvb3Jkc1szXTsKICAgICAgICBpdmVjMiBkeUNvcm5lciA9IGNvb3Jkcy55eiAtIHBhZHM7CiAgICAgICAgaW50IGR5UkNvcm5lciA9IGR5Q29ybmVyLng7CiAgICAgICAgaW50IGR5Q0Nvcm5lciA9IGR5Q29ybmVyLnk7CgogICAgICAgIGZsb2F0IGRvdFByb2QgPSAwLjA7CgogICAgICAgIGZvciAoaW50IHdSID0gMDsgd1IgPCAke3R9OyB3UisrKSB7CiAgICAgICAgICBmbG9hdCBkeVIgPSBmbG9hdChkeVJDb3JuZXIgKyB3UikgLyAke3J9LjA7CgogICAgICAgICAgaWYgKGR5UiA8IDAuMCB8fCBkeVIgPj0gJHtlLm91dEhlaWdodH0uMCB8fCBmcmFjdChkeVIpID4gMC4wKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaW50IGlkeVIgPSBpbnQoZHlSKTsKCiAgICAgICAgICBpbnQgd1JQZXJtID0gJHt0fSAtIDEgLSB3UjsKCiAgICAgICAgICBmb3IgKGludCB3QyA9IDA7IHdDIDwgJHtzfTsgd0MrKykgewogICAgICAgICAgICBmbG9hdCBkeUMgPSBmbG9hdChkeUNDb3JuZXIgKyB3QykgLyAke299LjA7CgogICAgICAgICAgICBpZiAoZHlDIDwgMC4wIHx8IGR5QyA+PSAke2Uub3V0V2lkdGh9LjAgfHwKICAgICAgICAgICAgICAgIGZyYWN0KGR5QykgPiAwLjApIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbnQgaWR5QyA9IGludChkeUMpOwoKICAgICAgICAgICAgaW50IHdDUGVybSA9ICR7c30gLSAxIC0gd0M7CgogICAgICAgICAgICAvLyBUTyBETzogVmVjNCBvdmVyIHRoZSBjaGFubmVsTXVsCiAgICAgICAgICAgIGZvciAoaW50IGRtID0gMDsgZG0gPCAke2x9OyBkbSsrKSB7CiAgICAgICAgICAgICAgaW50IGQyID0gZDEgKiAke2x9ICsgZG07CiAgICAgICAgICAgICAgZmxvYXQgeFZhbHVlID0gZ2V0RHkoYmF0Y2gsIGlkeVIsIGlkeUMsIGQyKTsKICAgICAgICAgICAgICBmbG9hdCB3VmFsdWUgPSBnZXRXKHdSUGVybSwgd0NQZXJtLCBkMSwgZG0pOwogICAgICAgICAgICAgIGRvdFByb2QgKz0geFZhbHVlICogd1ZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNldE91dHB1dChkb3RQcm9kKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24ga2VlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnIsZHk6b309ZSx7c3RyaWRlczppLGRpbGF0aW9uczphLHBhZDpsLGRpbVJvdW5kaW5nTW9kZTpjLGZpbHRlclNoYXBlOmh9PXMscD1mbihyLnNoYXBlLGgsaSxhLGwsYywhMCksZj1uZXcgU2VlKHApO3JldHVybiB0LnJ1bldlYkdMUHJvZ3JhbShmLFtyLG9dLCJmbG9hdDMyIil9Y29uc3QgQ2VlPXtrZXJuZWxOYW1lOm1tLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzprZWV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uICRlZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7ZHk6cixmaWx0ZXI6b309ZSx7c3RyaWRlczppLGRpbGF0aW9uczphLHBhZDpsLGRpbVJvdW5kaW5nTW9kZTpjLGlucHV0U2hhcGU6aH09cyxwPWZuKGgsby5zaGFwZSxpLGEsbCxjLCEwKSxmPW5ldyBOZWUocCk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGYsW3Isb10sImZsb2F0MzIiKX1jb25zdCBJZWU9e2tlcm5lbE5hbWU6Z20sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOiRlZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgVGVle2NvbnN0cnVjdG9yKGUpe3RoaXMudmFyaWFibGVOYW1lcz1bIlgiXSx0aGlzLm91dHB1dFNoYXBlPVtlLGVdLHRoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgICBpdmVjMiBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICAgIGZsb2F0IHZhbCA9IGNvb3Jkc1swXSA9PSBjb29yZHNbMV0gPyBnZXRYKGNvb3Jkc1swXSkgOiAwLjA7CiAgICAgICAgICBzZXRPdXRwdXQodmFsKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gRWVlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7eDpzfT1lLHI9Wy4uLnMuc2hhcGUsLi4ucy5zaGFwZV0sbz1jZShzLnNoYXBlKSxpPUNlKHtpbnB1dHM6e3g6c30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpbb119fSksYT1uZXcgVGVlKG8pLGw9dC5ydW5XZWJHTFByb2dyYW0oYSxbaV0saS5kdHlwZSksYz1DZSh7aW5wdXRzOnt4Omx9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6cn19KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhpKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGwpLGN9Y29uc3QgUmVlPXtrZXJuZWxOYW1lOnltLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpFZWV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIERlZXtjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4IiwiVyJdLHRoaXMub3V0cHV0U2hhcGU9ZS5vdXRTaGFwZTtjb25zdHtpbkhlaWdodDp0LGluV2lkdGg6cyxwYWRJbmZvOnIsc3RyaWRlSGVpZ2h0Om8sc3RyaWRlV2lkdGg6aSxmaWx0ZXJIZWlnaHQ6YSxmaWx0ZXJXaWR0aDpsLGRpbGF0aW9uSGVpZ2h0OmMsZGlsYXRpb25XaWR0aDpofT1lLHt0b3A6cCxsZWZ0OmZ9PXI7dGhpcy51c2VyQ29kZT1gCiAgICAgIGNvbnN0IGl2ZWMyIHN0cmlkZXMgPSBpdmVjMigke299LCAke2l9KTsKICAgICAgY29uc3QgaXZlYzIgcGFkcyA9IGl2ZWMyKCR7cH0sICR7Zn0pOwogICAgICBjb25zdCBmbG9hdCBuZWdfaW5maW5pdHkgPSAtMy40ZTM4OwoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWM0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiYXRjaCA9IGNvb3Jkcy54OwogICAgICAgIGludCBkMSA9IGNvb3Jkcy53OwogICAgICAgIGl2ZWMyIG91dFRvcExlZnRDb3JuZXIgPQogICAgICAgICAgICBjb29yZHMueXogKiBzdHJpZGVzIC0gcGFkczsKICAgICAgICBpbnQgaEJlZyA9IG91dFRvcExlZnRDb3JuZXIueDsKICAgICAgICBpbnQgd0JlZyA9IG91dFRvcExlZnRDb3JuZXIueTsKCiAgICAgICAgZmxvYXQgY3VyVmFsID0gbmVnX2luZmluaXR5OwogICAgICAgIGZvciAoaW50IGggPSAwOyBoIDwgJHthfTsgaCsrKSB7CiAgICAgICAgICBpbnQgaEluID0gaEJlZyArIGggKiAke2N9OwoKICAgICAgICAgIGlmIChoSW4gPj0gMCAmJiBoSW4gPCAke3R9KSB7CiAgICAgICAgICAgIGZvciAoaW50IHcgPSAwOyB3IDwgJHtsfTsgdysrKSB7CiAgICAgICAgICAgICAgaW50IHdJbiA9IHdCZWcgKyB3ICogJHtofTsKCiAgICAgICAgICAgICAgaWYgKHdJbiA+PSAwICYmIHdJbiA8ICR7c30pIHsKICAgICAgICAgICAgICAgIGZsb2F0IHhWYWwgPSBnZXRYKGJhdGNoLCBoSW4sIHdJbiwgZDEpOwogICAgICAgICAgICAgICAgZmxvYXQgd1ZhbCA9IGdldFcoaCwgdywgZDEpOwoKICAgICAgICAgICAgICAgIGZsb2F0IHZhbCA9IHhWYWwgKyB3VmFsOwogICAgICAgICAgICAgICAgaWYgKHZhbCA+IGN1clZhbCkgewogICAgICAgICAgICAgICAgICBjdXJWYWwgPSB2YWw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmbG9hdCByZXN1bHQgPSBjdXJWYWw7CiAgICAgICAgc2V0T3V0cHV0KHJlc3VsdCk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEFlZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLGZpbHRlcjpvfT1lLHtzdHJpZGVzOmkscGFkOmEsZGlsYXRpb25zOmx9PXMsYz1yaChyLnNoYXBlLG8uc2hhcGUsaSxhLCJOSFdDIixsKTtsZXQgaDtjb25zdCBwPW5ldyBEZWUoYyk7aD10LnJ1bldlYkdMUHJvZ3JhbShwLFtyLG9dLCJmbG9hdDMyIik7Y29uc3QgZj1DZSh7aW5wdXRzOnt4Omh9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6Yy5vdXRTaGFwZX19KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhoKSxmfWNvbnN0IF9lZT17a2VybmVsTmFtZTptZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6QWVlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBPZWUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2VxdWF0aW9uOnJ9PXMsbz1lLHthbGxEaW1zOmksc3VtbWVkRGltczphLGlkRGltczpsfT1TdyhyLG8ubGVuZ3RoKTtrdyhpLmxlbmd0aCxsLG8pO2NvbnN0e3BhdGg6YyxzdGVwczpofT1DdyhhLGwpLHA9aC5sZW5ndGg7bGV0IGY9bnVsbCxnPWkubGVuZ3RoO2NvbnN0IHk9W107Zm9yKGxldCB3PTA7dzxwOysrdyl7Zm9yKGNvbnN0IGIgb2YgaFt3XSl7Y29uc3R7cGVybXV0YXRpb25JbmRpY2VzOnYsZXhwYW5kRGltczpTfT1OdyhnLGxbYl0pO2xldCAkOyR3KHYpPyQ9b1tiXTooJD1Ibih7aW5wdXRzOnt4Om9bYl19LGJhY2tlbmQ6dCxhdHRyczp7cGVybTp2fX0pLHkucHVzaCgkKSk7Y29uc3Qgaz0kLnNoYXBlLnNsaWNlKCk7Zm9yKGxldCBUPTA7VDxTLmxlbmd0aDsrK1Qpay5zcGxpY2UoU1tUXSwwLDEpO0plKCQuc2hhcGUsayl8fCgkPUNlKHtpbnB1dHM6e3g6JH0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTprfX0pLHkucHVzaCgkKSksZj09PW51bGw/Zj0kOihmPW12KHtpbnB1dHM6e2E6JCxiOmZ9LGJhY2tlbmQ6dH0pLHkucHVzaChmKSl9dzxwLTEmJihjW3ddPj0wJiYoZj1keSh7aW5wdXRzOnt4OmZ9LGJhY2tlbmQ6dCxhdHRyczp7YXhpczpjW3ddLShpLmxlbmd0aC1nKSxrZWVwRGltczohMX19KSx5LnB1c2goZikpLGctLSl9Zm9yKGNvbnN0IHcgb2YgeSl3IT09ZiYmdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh3KTtyZXR1cm4gZn1jb25zdCBGZWU9e2tlcm5lbE5hbWU6Ym0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOk9lZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgTGVlPSJyZXR1cm4gKHggPj0gMC4wKSA/IHggOiAoZXhwKHgpIC0gMS4wKTsiLFBlZT1gCiAgdmVjNCByZXN1bHQ7CgogIHJlc3VsdC5yID0gKHguciA+PSAwLjApID8geC5yIDogKGV4cCh4LnIpIC0gMS4wKTsKICByZXN1bHQuZyA9ICh4LmcgPj0gMC4wKSA/IHguZyA6IChleHAoeC5nKSAtIDEuMCk7CiAgcmVzdWx0LmIgPSAoeC5iID49IDAuMCkgPyB4LmIgOiAoZXhwKHguYikgLSAxLjApOwogIHJlc3VsdC5hID0gKHguYSA+PSAwLjApID8geC5hIDogKGV4cCh4LmEpIC0gMS4wKTsKCiAgcmV0dXJuIHJlc3VsdDsKYCx6ZWU9aXQoe29wU25pcHBldDpMZWUscGFja2VkT3BTbmlwcGV0OlBlZX0pLE1lZT17a2VybmVsTmFtZTpCbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6emVlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBCZWU9InJldHVybiAoYiA+PSAwLjApID8gYSA6IGEgKiAoYiArIDEuMCk7IixWZWU9YAogIHZlYzQgYkdURVplcm8gPSB2ZWM0KGdyZWF0ZXJUaGFuRXF1YWwoYiwgdmVjNCgwLikpKTsKICByZXR1cm4gKGJHVEVaZXJvICogYSkgKyAoKHZlYzQoMS4wKSAtIGJHVEVaZXJvKSAqIChhICogKGIgKyB2ZWM0KDEuMCkpKSk7CmAsV2VlPW49Pntjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se2R5OnMseTpyfT1lLG89b2UoKS5nZXRCb29sKCJXRUJHTF9QQUNLX0JJTkFSWV9PUEVSQVRJT05TIik/bmV3IEZ1KFZlZSxzLnNoYXBlLHIuc2hhcGUpOm5ldyB4YShCZWUscy5zaGFwZSxyLnNoYXBlKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0obyxbcyxyXSxzLmR0eXBlKX0sVWVlPXtrZXJuZWxOYW1lOndtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpXZWV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGplZT1gCiAgcmV0dXJuIHZlYzQoZXF1YWwoYSwgYikpOwpgLEdlZT0icmV0dXJuIGZsb2F0KGEgPT0gYik7IixIZWU9SW4oe29wU25pcHBldDpHZWUscGFja2VkT3BTbmlwcGV0OmplZSxkdHlwZToiYm9vbCIsY3B1S2VybmVsSW1wbDprWX0pLHFlZT17a2VybmVsTmFtZTpnZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6SGVlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBLZWU9YAogIC8vIEVycm9yIGZ1bmN0aW9uIGlzIGNhbGN1bGF0ZWQgYXBwcm94aW1hdGVseSB3aXRoIGVsZW1lbnRhcnkgZnVuY3Rpb24uCiAgLy8gU2VlICJIYW5kYm9vayBvZiBNYXRoZW1hdGljYWwgRnVuY3Rpb25zIHdpdGggRm9ybXVsYXMsCiAgLy8gR3JhcGhzLCBhbmQgTWF0aGVtYXRpY2FsIFRhYmxlcyIsIEFicmFtb3dpdHogYW5kIFN0ZWd1bi4KICBmbG9hdCBwID0gJHttd307CiAgZmxvYXQgYTEgPSAke2d3fTsKICBmbG9hdCBhMiA9ICR7eXd9OwogIGZsb2F0IGEzID0gJHt4d307CiAgZmxvYXQgYTQgPSAke2J3fTsKICBmbG9hdCBhNSA9ICR7d3d9OwoKICBmbG9hdCBzaWduID0gc2lnbih4KTsKICB4ID0gYWJzKHgpOwogIGZsb2F0IHQgPSAxLjAgLyAoMS4wICsgcCAqIHgpOwogIHJldHVybiBzaWduICogKDEuMCAtICgoKCgoYTUqdCArIGE0KSp0KSArIGEzKSp0ICsgYTIpKnQgKyBhMSkqdCpleHAoLXgqeCkpOwpgLFhlZT1pdCh7b3BTbmlwcGV0OktlZX0pLFllZT17a2VybmVsTmFtZTpWbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6WGVlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBRZWU9THUrYAogIHJldHVybiBleHAoeCk7CmAsWmVlPWAKICB2ZWM0IHJlc3VsdCA9IGV4cCh4KTsKICBidmVjNCBpc05hTiA9IGlzbmFuKHgpOwogIHJlc3VsdC5yID0gaXNOYU4uciA/IHguciA6IHJlc3VsdC5yOwogIHJlc3VsdC5nID0gaXNOYU4uZyA/IHguZyA6IHJlc3VsdC5nOwogIHJlc3VsdC5iID0gaXNOYU4uYiA/IHguYiA6IHJlc3VsdC5iOwogIHJlc3VsdC5hID0gaXNOYU4uYSA/IHguYSA6IHJlc3VsdC5hOwoKICByZXR1cm4gcmVzdWx0OwpgLEdEPWl0KHtvcFNuaXBwZXQ6UWVlLHBhY2tlZE9wU25pcHBldDpaZWUsY3B1S2VybmVsSW1wbDpDWSxkdHlwZToiZmxvYXQzMiJ9KSxKZWU9e2tlcm5lbE5hbWU6V2wsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOkdEfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFMxKG4pe2NvbnN0e2lucHV0czplLGF0dHJzOnQsYmFja2VuZDpzfT1uLHtkaW06cn09dCx7aW5wdXQ6b309ZSxpPW8uc2hhcGUubGVuZ3RoLGE9by5zaGFwZS5zbGljZSgpO2xldCBsPXI7cmV0dXJuIHI8MCYmKEEoLShpKzEpPD1yLCgpPT5gQXhpcyBtdXN0IGJlIGluIHRoZSBpbnRlcnZhbCBbJHstKGkrMSl9LCAke2l9XWApLGw9aStyKzEpLGEuc3BsaWNlKGwsMCwxKSxDZSh7aW5wdXRzOnt4Om99LGJhY2tlbmQ6cyxhdHRyczp7c2hhcGU6YX19KX1jb25zdCBldGU9e2tlcm5lbE5hbWU6eWQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlMxfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBxQz0icmV0dXJuIGV4cCh4KSAtIDEuMDsiLHR0ZT1pdCh7b3BTbmlwcGV0OnFDLHBhY2tlZE9wU25pcHBldDpxQyxjcHVLZXJuZWxJbXBsOiRZfSksbnRlPXtrZXJuZWxOYW1lOlVsLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzp0dGV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIEtDe2NvbnN0cnVjdG9yKGUsdCxzKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJyZWFsIiwiaW1hZyJdO2NvbnN0IHI9dFsxXTt0aGlzLm91dHB1dFNoYXBlPXQ7Y29uc3Qgbz1zP2AyLjAgKiAke01hdGguUEl9YDpgLTIuMCAqICR7TWF0aC5QSX1gLGk9cz9gJHtyfS4wYDoiMS4wIjtsZXQgYTtpZihlPT09InJlYWwiKWE9InJldHVybiByZWFsICogZXhwUiAtIGltYWcgKiBleHBJOyI7ZWxzZSBpZihlPT09ImltYWciKWE9InJldHVybiByZWFsICogZXhwSSArIGltYWcgKiBleHBSOyI7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEZGVCBjb21wb25lbnQgbXVzdCBiZSBlaXRoZXIgInJlYWwiIG9yICJpbWFnIiwgZ290ICR7ZX0uYCk7dGhpcy51c2VyQ29kZT1gCiAgICAgIGNvbnN0IGZsb2F0IGV4cG9uZW50TXVsdGlwbGllciA9ICR7b307CgogICAgICBmbG9hdCB1bmFyeU9wQ29tcGxleChmbG9hdCByZWFsLCBmbG9hdCBleHBSLCBmbG9hdCBpbWFnLCBmbG9hdCBleHBJKSB7CiAgICAgICAgJHthfQogICAgICB9CgogICAgICBmbG9hdCBtdWxNYXRERlQoaW50IGJhdGNoLCBpbnQgaW5kZXgpIHsKICAgICAgICBmbG9hdCBpbmRleFJhdGlvID0gZmxvYXQoaW5kZXgpIC8gZmxvYXQoJHtyfSk7CiAgICAgICAgZmxvYXQgZXhwb25lbnRNdWx0aXBsaWVyVGltZXNJbmRleFJhdGlvID0KICAgICAgICAgICAgZXhwb25lbnRNdWx0aXBsaWVyICogaW5kZXhSYXRpbzsKCiAgICAgICAgZmxvYXQgcmVzdWx0ID0gMC4wOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8ICR7cn07IGkrKykgewogICAgICAgICAgLy8geCA9ICgtMnwyICogUEkgLyBOKSAqIGluZGV4ICogaTsKICAgICAgICAgIGZsb2F0IHggPSBleHBvbmVudE11bHRpcGxpZXJUaW1lc0luZGV4UmF0aW8gKiBmbG9hdChpKTsKICAgICAgICAgIGZsb2F0IGV4cFIgPSBjb3MoeCk7CiAgICAgICAgICBmbG9hdCBleHBJID0gc2luKHgpOwogICAgICAgICAgZmxvYXQgcmVhbCA9IGdldFJlYWwoYmF0Y2gsIGkpOwogICAgICAgICAgZmxvYXQgaW1hZyA9IGdldEltYWcoYmF0Y2gsIGkpOwoKICAgICAgICAgIHJlc3VsdCArPQogICAgICAgICAgICAgIHVuYXJ5T3BDb21wbGV4KHJlYWwsIGV4cFIsIGltYWcsIGV4cEkpIC8gJHtpfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMiBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBzZXRPdXRwdXQobXVsTWF0REZUKGNvb3Jkc1swXSwgY29vcmRzWzFdKSk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEhEKG4sZSx0KXtjb25zdCBzPXQudGV4RGF0YS5nZXQobi5kYXRhSWQpLHI9Y2Uobi5zaGFwZSksbz1uLnNoYXBlW24uc2hhcGUubGVuZ3RoLTFdLGk9ci9vLGE9Q2Uoe2lucHV0czp7eDpufSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOltpLG9dfX0pLGw9YS5zaGFwZSxjPW5ldyBLQygicmVhbCIsbCxlKSxoPW5ldyBLQygiaW1hZyIsbCxlKSxwPVt7ZGF0YUlkOnMuY29tcGxleFRlbnNvckluZm9zLnJlYWwuZGF0YUlkLGR0eXBlOnMuY29tcGxleFRlbnNvckluZm9zLnJlYWwuZHR5cGUsc2hhcGU6bH0se2RhdGFJZDpzLmNvbXBsZXhUZW5zb3JJbmZvcy5pbWFnLmRhdGFJZCxkdHlwZTpzLmNvbXBsZXhUZW5zb3JJbmZvcy5pbWFnLmR0eXBlLHNoYXBlOmx9XSxmPXQucnVuV2ViR0xQcm9ncmFtKGMscCwiZmxvYXQzMiIpLGc9dC5ydW5XZWJHTFByb2dyYW0oaCxwLCJmbG9hdDMyIikseT0kaSh7aW5wdXRzOntyZWFsOmYsaW1hZzpnfSxiYWNrZW5kOnR9KTt0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGYpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZyk7Y29uc3Qgdz1DZSh7aW5wdXRzOnt4Onl9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6bi5zaGFwZX19KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhhKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHkpLHd9LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gc3RlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7aW5wdXQ6c309ZTtyZXR1cm4gSEQocywhMSx0KX1jb25zdCBydGU9e2tlcm5lbE5hbWU6dm0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnN0ZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3Mgb3Rle2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5vdXRwdXRTaGFwZT1bXSx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToidmFsdWUiLHR5cGU6ImZsb2F0In1dLHRoaXMudmFyaWFibGVOYW1lcz1bIngiXSx0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAvLyBJbnB1dCBjYW4gYmUgb2J0YWluZWQgZnJvbSB1bmlmb3JtIHZhbHVlLgogICAgICAgIHNldE91dHB1dCh2YWx1ZSk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHpoKG4pe2NvbnN0e2JhY2tlbmQ6ZSxhdHRyczp0fT1uLHtzaGFwZTpzLHZhbHVlOnJ9PXQ7bGV0e2R0eXBlOm99PXQ7aWYobz1vfHx3YShyKSxvPT09InN0cmluZyIpe2NvbnN0IGk9TXQobyxjZShzKSk7cmV0dXJuIGkuZmlsbChyKSxlLm1ha2VUZW5zb3JJbmZvKHMsbyxpKX1lbHNle2NvbnN0IGk9bmV3IG90ZShzLHIpLGE9W1tyXV07cmV0dXJuIGUucnVuV2ViR0xQcm9ncmFtKGksW10sbyxhKX19Y29uc3QgaXRlPXtrZXJuZWxOYW1lOlNtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzp6aH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgYXRle2NvbnN0cnVjdG9yKGUpe3RoaXMudmFyaWFibGVOYW1lcz1bIkltYWdlIl0sdGhpcy5vdXRwdXRTaGFwZT1bXTtjb25zdCB0PWVbMl07dGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMudXNlckNvZGU9YAogICAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAgIGl2ZWM0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgICAgaW50IHggPSBjb29yZHNbMl07CgogICAgICAgICAgaW50IGNvb3JkWCA9ICR7dH0gLSB4IC0gMTsKICAgICAgICAgIGZsb2F0IG91dHB1dFZhbHVlOwogICAgICAgICAgaWYoY29vcmRYID49IDAgJiYgY29vcmRYIDwgJHt0fSkgewogICAgICAgICAgICBvdXRwdXRWYWx1ZSA9IGdldEltYWdlKGNvb3Jkc1swXSwgY29vcmRzWzFdLCBjb29yZFgsIGNvb3Jkc1szXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvdXRwdXRWYWx1ZSA9IGdldEltYWdlKGNvb3Jkc1swXSwgY29vcmRzWzFdLCBjb29yZHNbMl0sIGNvb3Jkc1szXSk7CiAgICAgICAgICB9CiAgICAgICAgICBzZXRPdXRwdXQob3V0cHV0VmFsdWUpOwogICAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGx0ZT17a2VybmVsTmFtZTpObSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6KHtpbnB1dHM6bixiYWNrZW5kOmV9KT0+e2NvbnN0e2ltYWdlOnR9PW4scz1lLHI9bmV3IGF0ZSh0LnNoYXBlKTtyZXR1cm4gcy5ydW5XZWJHTFByb2dyYW0ocixbdF0sdC5kdHlwZSl9fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBYQz0icmV0dXJuIGZsb29yKHgpOyIsdXRlPWl0KHtvcFNuaXBwZXQ6WEMscGFja2VkT3BTbmlwcGV0OlhDLGNwdUtlcm5lbEltcGw6SVl9KSxjdGU9e2tlcm5lbE5hbWU6amwsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnV0ZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgZHRlPWAKICBmbG9hdCBzID0gc2lnbihhKSAqIHNpZ24oYik7CiAgaW50IGlhID0gcm91bmQoYSk7CiAgaW50IGliID0gcm91bmQoYik7CiAgaWYgKGliICE9IDApIHsKICAgIC8vIFdpbmRvd3MgKEQzRCkgd2FudHMgZ3VhcmFudGVlZCBub24temVybyBpbnQgZGl2aXNpb24gYXQgY29tcGlsZS10aW1lLgogICAgcmV0dXJuIGZsb2F0KGlkaXYoaWEsIGliLCBzKSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBOQU47CiAgfQpgLGh0ZT1gCiAgaXZlYzQgaWEgPSByb3VuZChhKTsKICBpdmVjNCBpYiA9IHJvdW5kKGIpOwogIGJ2ZWM0IGNvbmQgPSBub3RFcXVhbChpYiwgaXZlYzQoMCkpOwogIGl2ZWM0IHJlc3VsdCA9IGl2ZWM0KDApOwogIHZlYzQgcyA9IHNpZ24oYSkgKiBzaWduKGIpOwoKICAvLyBXaW5kb3dzIChEM0QpIHdhbnRzIGd1YXJhbnRlZWQgbm9uLXplcm8gaW50IGRpdmlzaW9uIGF0IGNvbXBpbGUtdGltZS4KICBpZiAoY29uZFswXSkgewogICAgcmVzdWx0WzBdID0gaWRpdihpYVswXSwgaWJbMF0sIHNbMF0pOwogIH0KICBpZiAoY29uZFsxXSkgewogICAgcmVzdWx0WzFdID0gaWRpdihpYVsxXSwgaWJbMV0sIHNbMV0pOwogIH0KICBpZiAoY29uZFsyXSkgewogICAgcmVzdWx0WzJdID0gaWRpdihpYVsyXSwgaWJbMl0sIHNbMl0pOwogIH0KICBpZiAoY29uZFszXSkgewogICAgcmVzdWx0WzNdID0gaWRpdihpYVszXSwgaWJbM10sIHNbM10pOwogIH0KICByZXR1cm4gdmVjNChyZXN1bHQpOwpgLHB0ZT1Jbih7b3BTbmlwcGV0OmR0ZSxwYWNrZWRPcFNuaXBwZXQ6aHRlLGR0eXBlOiJpbnQzMiJ9KSxmdGU9e2tlcm5lbE5hbWU6R2wsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnB0ZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgbXRle2NvbnN0cnVjdG9yKGUpe3RoaXMudmFyaWFibGVOYW1lcz1bIkEiXTtjb25zdCB0PUtuKCksW3Mscl09ZTt0aGlzLm91dHB1dFNoYXBlPWUsdGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMyBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgdGV4UiA9IGNvb3Jkc1swXTsKICAgICAgICBpbnQgdGV4QyA9IGNvb3Jkc1sxXTsKICAgICAgICBpbnQgZGVwdGggPSBjb29yZHNbMl07CiAgICAgICAgdmVjMiB1diA9ICh2ZWMyKHRleEMsIHRleFIpICsgaGFsZkNSKSAvIHZlYzIoJHtyfS4wLCAke3N9LjApOwoKICAgICAgICB2ZWM0IHZhbHVlcyA9ICR7dC50ZXh0dXJlMkR9KEEsIHV2KTsKICAgICAgICBmbG9hdCB2YWx1ZTsKICAgICAgICBpZiAoZGVwdGggPT0gMCkgewogICAgICAgICAgdmFsdWUgPSB2YWx1ZXMucjsKICAgICAgICB9IGVsc2UgaWYgKGRlcHRoID09IDEpIHsKICAgICAgICAgIHZhbHVlID0gdmFsdWVzLmc7CiAgICAgICAgfSBlbHNlIGlmIChkZXB0aCA9PSAyKSB7CiAgICAgICAgICB2YWx1ZSA9IHZhbHVlcy5iOwogICAgICAgIH0gZWxzZSBpZiAoZGVwdGggPT0gMykgewogICAgICAgICAgdmFsdWUgPSB2YWx1ZXMuYTsKICAgICAgICB9CgogICAgICAgIHNldE91dHB1dChmbG9vcih2YWx1ZSAqIDI1NS4wICsgMC41KSk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIGd0ZXtjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl0sdGhpcy5wYWNrZWRJbnB1dHM9ITEsdGhpcy5wYWNrZWRPdXRwdXQ9ITA7Y29uc3QgdD1LbigpLFtzLHJdPWU7dGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzMgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IHRleFIgPSBjb29yZHNbMF07CiAgICAgICAgaW50IHRleEMgPSBjb29yZHNbMV07CiAgICAgICAgaW50IGRlcHRoID0gY29vcmRzWzJdOwoKICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMC4pOwoKICAgICAgICBmb3IoaW50IHJvdz0wOyByb3c8PTE7IHJvdysrKSB7CiAgICAgICAgICBmb3IoaW50IGNvbD0wOyBjb2w8PTE7IGNvbCsrKSB7CiAgICAgICAgICAgIHRleEMgPSBjb29yZHNbMV0gKyByb3c7CiAgICAgICAgICAgIGRlcHRoID0gY29vcmRzWzJdICsgY29sOwoKICAgICAgICAgICAgdmVjMiB1diA9ICh2ZWMyKHRleEMsIHRleFIpICsgaGFsZkNSKSAvCiAgICAgICAgICAgICAgICAgICAgICAgdmVjMigke3J9LjAsICR7c30uMCk7CiAgICAgICAgICAgIHZlYzQgdmFsdWVzID0gJHt0LnRleHR1cmUyRH0oQSwgdXYpOwogICAgICAgICAgICBmbG9hdCB2YWx1ZTsKICAgICAgICAgICAgaWYgKGRlcHRoID09IDApIHsKICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlcy5yOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRlcHRoID09IDEpIHsKICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlcy5nOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRlcHRoID09IDIpIHsKICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlcy5iOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRlcHRoID09IDMpIHsKICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlcy5hOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXN1bHRbcm93ICogMiArIGNvbF0gPSBmbG9vcih2YWx1ZSAqIDI1NS4wICsgMC41KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICR7dC5vdXRwdXR9ID0gcmVzdWx0OwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB5dGU9e2tlcm5lbE5hbWU6SWYsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnh0ZX07bGV0IHJsLFQwPW9lKCkuZ2V0Qm9vbCgiQ0FOVkFTMkRfV0lMTF9SRUFEX0ZSRVFVRU5UTFlfRk9SX0dQVSIpO2Z1bmN0aW9uIHh0ZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bjtsZXR7cGl4ZWxzOnJ9PWU7Y29uc3R7bnVtQ2hhbm5lbHM6b309cyxpPXR5cGVvZiBIVE1MVmlkZW9FbGVtZW50PCJ1IiYmciBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQsYT10eXBlb2YgSFRNTEltYWdlRWxlbWVudDwidSImJnIgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50LFtsLGNdPWk/W3IudmlkZW9XaWR0aCxyLnZpZGVvSGVpZ2h0XTpbci53aWR0aCxyLmhlaWdodF0saD1bYyxsXSxwPVtjLGwsb107aWYoYXx8aSl7Y29uc3Qgdz1vZSgpLmdldEJvb2woIkNBTlZBUzJEX1dJTExfUkVBRF9GUkVRVUVOVExZX0ZPUl9HUFUiKTsocmw9PW51bGx8fHchPT1UMCkmJihUMD13LHJsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLmdldENvbnRleHQoIjJkIix7d2lsbFJlYWRGcmVxdWVudGx5OlQwfSkpLHJsLmNhbnZhcy53aWR0aD1sLHJsLmNhbnZhcy5oZWlnaHQ9YyxybC5kcmF3SW1hZ2UociwwLDAsbCxjKSxyPXJsLmNhbnZhc31jb25zdCBmPXQubWFrZVRlbnNvckluZm8oaCwiaW50MzIiKTt0LnRleERhdGEuZ2V0KGYuZGF0YUlkKS51c2FnZT1Pcy5QSVhFTFMsdC5ncGdwdS51cGxvYWRQaXhlbERhdGFUb1RleHR1cmUodC5nZXRUZXh0dXJlKGYuZGF0YUlkKSxyKTtjb25zdCBnPW9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDSyIpP25ldyBndGUocCk6bmV3IG10ZShwKSx5PXQucnVuV2ViR0xQcm9ncmFtKGcsW2ZdLCJpbnQzMiIpO3JldHVybiB0LmRpc3Bvc2VEYXRhKGYuZGF0YUlkKSx5fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGJ0ZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLGZpbHRlcjpvLGJpYXM6aSxwcmVsdUFjdGl2YXRpb25XZWlnaHRzOmF9PWUse3N0cmlkZXM6bCxwYWQ6YyxkYXRhRm9ybWF0OmgsZGlsYXRpb25zOnAsZGltUm91bmRpbmdNb2RlOmYsYWN0aXZhdGlvbjpnLGxlYWt5cmVsdUFscGhhOnl9PXMsdz1rbyhoKSxiPWZuKHIuc2hhcGUsby5zaGFwZSxsLHAsYyxmLCExLHcpO2xldCB2O2NvbnN0IFM9W10sJD1pIT1udWxsLGs9YSE9bnVsbCxUPWc9PT0ibGVha3lyZWx1IixEPSgpPT57Y29uc3Qgej1bcixvXSxGPShfLEUpPT57aWYoRT09PSJOQ0hXIiYmXy5zaGFwZS5sZW5ndGg9PT0xJiZfLnNoYXBlWzBdIT09MSl7Y29uc3QgTT1DZSh7aW5wdXRzOnt4Ol99LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6W18uc2hhcGVbMF0sMSwxXX19KTtyZXR1cm4gUy5wdXNoKE0pLE19cmV0dXJuIF99O2lmKCQmJnoucHVzaChGKGksaCkpLGsmJnoucHVzaChGKGEsaCkpLFQpe2NvbnN0IF89dC5tYWtlVGVuc29ySW5mbyhbXSwiZmxvYXQzMiIsU28oeSwiZmxvYXQzMiIpKTt6LnB1c2goXyksUy5wdXNoKF8pfXJldHVybiB6fTtpZihiLmZpbHRlckhlaWdodD09PTEmJmIuZmlsdGVyV2lkdGg9PT0xJiZiLmRpbGF0aW9uSGVpZ2h0PT09MSYmYi5kaWxhdGlvbldpZHRoPT09MSYmYi5zdHJpZGVIZWlnaHQ9PT0xJiZiLnN0cmlkZVdpZHRoPT09MSYmKGIucGFkSW5mby50eXBlPT09IlNBTUUifHxiLnBhZEluZm8udHlwZT09PSJWQUxJRCIpKXY9QkQoe3g6cixmaWx0ZXI6byxjb252SW5mbzpiLGJhY2tlbmQ6dCxiaWFzOmksYWN0aXZhdGlvbjpnLHByZWx1QWN0aXZhdGlvbldlaWdodHM6YSxsZWFreXJlbHVBbHBoYTp5fSk7ZWxzZSBpZihiLnN0cmlkZVdpZHRoPD0yJiZ3PT09ImNoYW5uZWxzTGFzdCImJm9lKCkuZ2V0Qm9vbCgiV0VCR0xfRVhQX0NPTlYiKSl7Y29uc3Qgej1nP1ljKGcsITApOm51bGwsRj1uZXcgTUQoYiwkLHosayxUKSxfPVtbYi5wYWRJbmZvLnRvcCxiLnBhZEluZm8ubGVmdF0sW2Iuc3RyaWRlSGVpZ2h0LGIuc3RyaWRlV2lkdGhdLFtiLmRpbGF0aW9uSGVpZ2h0LGIuZGlsYXRpb25XaWR0aF0sW2IuaW5IZWlnaHQsYi5pbldpZHRoXV0sRT1EKCk7dj10LnJ1bldlYkdMUHJvZ3JhbShGLEUsImZsb2F0MzIiLF8pfWVsc2UgaWYob2UoKS5nZXRCb29sKCJXRUJHTF9DT05WX0lNMkNPTCIpKXY9VkQoe3g6cixmaWx0ZXI6byxjb252SW5mbzpiLGJhY2tlbmQ6dCxiaWFzOmksYWN0aXZhdGlvbjpnLHByZWx1QWN0aXZhdGlvbldlaWdodHM6YSxsZWFreXJlbHVBbHBoYTp5fSk7ZWxzZXtjb25zdCB6PWc/WWMoZywhMSk6bnVsbCxGPW5ldyB6RChiLCQseixrLFQpLF89RCgpO3Y9dC5ydW5XZWJHTFByb2dyYW0oRixfLCJmbG9hdDMyIil9Y29uc3QgTD1DZSh7aW5wdXRzOnt4OnZ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6Yi5vdXRTaGFwZX19KTtyZXR1cm4gUy5wdXNoKHYpLFMuZm9yRWFjaCh6PT50LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHopKSxMfWNvbnN0IHd0ZT17a2VybmVsTmFtZTpGYyxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6YnRlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiB2dGUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cixmaWx0ZXI6byxiaWFzOmkscHJlbHVBY3RpdmF0aW9uV2VpZ2h0czphfT1lLHtzdHJpZGVzOmwscGFkOmMsZGlsYXRpb25zOmgsZGltUm91bmRpbmdNb2RlOnAsYWN0aXZhdGlvbjpmLGxlYWt5cmVsdUFscGhhOmd9PXMseT1bXTtsZXQgdz1oO3c9PW51bGwmJih3PVsxLDFdKSxBKGtuKGwsdyksKCk9PmBFcnJvciBpbiBkZXB0aHdpc2VDb252MmQ6IEVpdGhlciBzdHJpZGVzIG9yIGRpbGF0aW9ucyBtdXN0IGJlIDEuIEdvdCBzdHJpZGVzICR7bH0gYW5kIGRpbGF0aW9ucyAnJHt3fSdgKTtjb25zdCBiPWZuKHIuc2hhcGUsby5zaGFwZSxsLHcsYyxwLCEwKSx2PW9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDS19ERVBUSFdJU0VDT05WIikmJmIuc3RyaWRlV2lkdGg8PTImJmIub3V0Q2hhbm5lbHMvYi5pbkNoYW5uZWxzPT09MSxTPWY/WWMoZix2KTpudWxsLCQ9W3Isb10saz1pIT1udWxsLFQ9YSE9bnVsbCxEPWY9PT0ibGVha3lyZWx1IjtpZihrJiYkLnB1c2goaSksVCYmJC5wdXNoKGEpLEQpe2NvbnN0IF89dC5tYWtlVGVuc29ySW5mbyhbXSwiZmxvYXQzMiIsU28oZywiZmxvYXQzMiIpKTskLnB1c2goXykseS5wdXNoKF8pfWxldCBMO3Y/TD1uZXcgakQoYixrLFMsVCxEKTpMPW5ldyBVRChiLGssUyxULEQpO2NvbnN0IHo9W1tiLnBhZEluZm8udG9wLGIucGFkSW5mby5sZWZ0XSxbYi5zdHJpZGVIZWlnaHQsYi5zdHJpZGVXaWR0aF0sW2IuZGlsYXRpb25IZWlnaHQsYi5kaWxhdGlvbldpZHRoXSxbYi5pbkhlaWdodCxiLmluV2lkdGhdXSxGPXQucnVuV2ViR0xQcm9ncmFtKEwsJCwiZmxvYXQzMiIseik7cmV0dXJuIHkuZm9yRWFjaChfPT50LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKF8pKSxGfWNvbnN0IFN0ZT17a2VybmVsTmFtZTpMYyxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6dnRlfTtjbGFzcyBOdGV7Y29uc3RydWN0b3IoZSx0LHMscil7dGhpcy5zbGljZURpbT1lLHRoaXMuc3RyaWRlcz10LHRoaXMucGFyYW1zU2hhcGU9cix0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4IiwiaW5kaWNlcyJdLHRoaXMub3V0cHV0U2hhcGU9cztjb25zdCBvPXh0KHMubGVuZ3RoKTtsZXQgaT1gCiAgICBpbnQgaW5kZXg7YDtmb3IobGV0IGE9MDthPHRoaXMuc2xpY2VEaW07YSsrKWkrPWAKICAgICAgICAgIGluZGV4ID0gcm91bmQoZ2V0SW5kaWNlcyhjb29yZHNbMF0sICR7YX0pKTsKICAgICAgICAgIG91dF9vZl9ib3VuZHMgPSBvdXRfb2ZfYm91bmRzIHx8IGluZGV4IDwgMDsKICAgICAgICAgIG91dF9vZl9ib3VuZHMgPSBvdXRfb2ZfYm91bmRzIHx8IGluZGV4ID49ICR7dGhpcy5wYXJhbXNTaGFwZVthXX07CiAgICAgICAgICBmbGF0dGVuSW5kZXggKz0gaW5kZXggKiAke3RoaXMuc3RyaWRlc1thXX07YDt0aGlzLnVzZXJDb2RlPWAKICAgICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICAgJHtvfSBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICAgIGludCBmbGF0dGVuSW5kZXggPSAwOwogICAgICAgICAgYm9vbCBvdXRfb2ZfYm91bmRzID0gZmFsc2U7CgogICAgICAgICAgJHtpfQoKICAgICAgICAgIHNldE91dHB1dChvdXRfb2ZfYm91bmRzID8gMC4wIDogZ2V0WChmbGF0dGVuSW5kZXgsIGNvb3Jkc1sxXSkpOwogICAgICAgIH0KICAgICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24ga3RlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7cGFyYW1zOnMsaW5kaWNlczpyfT1lLG89ci5zaGFwZSxpPW9bby5sZW5ndGgtMV0sYT1jZShzLnNoYXBlKSxbbCxjLGgscF09R2cocyxyKSxmPUNlKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpbYyxpXX19KSxnPUNlKHtpbnB1dHM6e3g6c30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpbY2Uocy5zaGFwZSkvaCxoXX19KTtpZih0LnNob3VsZEV4ZWN1dGVPbkNQVShbcyxyXSl8fHMuZHR5cGU9PT0ic3RyaW5nIil7Y29uc3Qgdj10LnJlYWRTeW5jKHIuZGF0YUlkKSxTPXQuYnVmZmVyU3luYyhzKSwkPVRZKHYsUyxzLmR0eXBlLGMsaSxoLHAscy5zaGFwZSxhKTtyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhsLHMuZHR5cGUsJC52YWx1ZXMpfWNvbnN0IHk9bmV3IE50ZShpLHAsW2MsaF0scy5zaGFwZSksdz10LnJ1bldlYkdMUHJvZ3JhbSh5LFtnLGZdLGcuZHR5cGUpLGI9Q2Uoe2lucHV0czp7eDp3fSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmx9fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZiksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhnKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHcpLGJ9Y29uc3QgQ3RlPXtrZXJuZWxOYW1lOmttLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzprdGV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzICR0ZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudmFyaWFibGVOYW1lcz1bIkEiLCJpbmRpY2VzIl0sdGhpcy5vdXRwdXRTaGFwZT10LHRoaXMucmFuaz10Lmxlbmd0aDtjb25zdCBzPXh0KHRoaXMucmFuaykscj1JdGUoZSk7dGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAke3N9IHJlc1JDID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGluZGV4ID0gaW50KGdldEluZGljZXMocmVzUkMueCwgcmVzUkMueikpOwogICAgICAgIGZsb2F0IGluQm91bmRzID0gKGluZGV4ID49IDApICYmIChpbmRleCA8ICR7ZVsyXX0pID8gMS4wIDogMC4wOwogICAgICAgIHNldE91dHB1dChpbkJvdW5kcyAqIGdldEEoJHtyfSkpOwogICAgICB9CiAgICBgfX1mdW5jdGlvbiBJdGUobixlKXtjb25zdCB0PVsicmVzUkMueCIsInJlc1JDLnkiLCJyZXNSQy56IiwicmVzUkMudyJdLHM9W107Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspcj09PTI/cy5wdXNoKCJpbmRleCIpOnMucHVzaChgJHt0W3JdfWApO3JldHVybiBzLmpvaW4oKX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBxRChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyLGluZGljZXM6b309ZSx7YXhpczppLGJhdGNoRGltczphfT1zLGw9UWUoaSxyLnNoYXBlKVswXTtpZihvZSgpLmdldCgiREVCVUciKSl7Y29uc3QgUz10LnJlYWRTeW5jKG8uZGF0YUlkKSwkPXIuc2hhcGVbbF07Zm9yKGxldCBrPTA7azxTLmxlbmd0aDsrK2spe2NvbnN0IFQ9U1trXTtBKFQ8PSQtMSYmVD49MCwoKT0+YEdhdGhlclYyOiB0aGUgaW5kZXggdmFsdWUgJHtUfSBpcyBub3QgaW4gWzAsICR7JC0xfV1gKX19Y29uc3QgYz1UdyhyLG8sbCxhKSxoPWNlKG8uc2hhcGUpLHA9W10sZj1DZSh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6W2MuYmF0Y2hTaXplLGMub3V0ZXJTaXplLGMuZGltU2l6ZSxjLnNsaWNlU2l6ZV19fSksZz1DZSh7aW5wdXRzOnt4Om99LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6W2MuYmF0Y2hTaXplLGgvYy5iYXRjaFNpemVdfX0pO3AucHVzaChmKSxwLnB1c2goZyk7Y29uc3QgeT1bYy5iYXRjaFNpemUsYy5vdXRlclNpemUsaC9jLmJhdGNoU2l6ZSxjLnNsaWNlU2l6ZV07aWYodC5zaG91bGRFeGVjdXRlT25DUFUoW3Isb10pfHxyLmR0eXBlPT09InN0cmluZyIpe2NvbnN0IFM9dC5idWZmZXJTeW5jKGcpLCQ9dC5idWZmZXJTeW5jKGYpLGs9RVkoJCxTLHkpO3JldHVybiBwLmZvckVhY2goVD0+dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhUKSksdC5tYWtlVGVuc29ySW5mbyhjLm91dHB1dFNoYXBlLGsuZHR5cGUsay52YWx1ZXMpfWNvbnN0IHc9bmV3ICR0ZShmLnNoYXBlLHkpLGI9dC5ydW5XZWJHTFByb2dyYW0odyxbZixnXSxmLmR0eXBlKTtwLnB1c2goYik7Y29uc3Qgdj1DZSh7aW5wdXRzOnt4OmJ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6Yy5vdXRwdXRTaGFwZX19KTtyZXR1cm4gcC5mb3JFYWNoKFM9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oUykpLHZ9Y29uc3QgVHRlPXtrZXJuZWxOYW1lOmJkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpxRH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRXRlPSJyZXR1cm4gZmxvYXQoYSA+IGIpOyIsUnRlPWAKICByZXR1cm4gdmVjNChncmVhdGVyVGhhbihhLCBiKSk7CmAsRHRlPUluKHtvcFNuaXBwZXQ6RXRlLHBhY2tlZE9wU25pcHBldDpSdGUsY3B1S2VybmVsSW1wbDpSWSxkdHlwZToiYm9vbCJ9KSxBdGU9e2tlcm5lbE5hbWU6d2QsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOkR0ZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgX3RlPSJyZXR1cm4gZmxvYXQoYSA+PSBiKTsiLE90ZT1gCiAgcmV0dXJuIHZlYzQoZ3JlYXRlclRoYW5FcXVhbChhLCBiKSk7CmAsRnRlPUluKHtvcFNuaXBwZXQ6X3RlLHBhY2tlZE9wU25pcHBldDpPdGUsZHR5cGU6ImJvb2wiLGNwdUtlcm5lbEltcGw6RFl9KSxMdGU9e2tlcm5lbE5hbWU6SGwsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOkZ0ZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUHRlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7aW5wdXQ6c309ZTtyZXR1cm4gSEQocywhMCx0KX1jb25zdCB6dGU9e2tlcm5lbE5hbWU6Q20sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlB0ZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgTXRlPSJyZXR1cm4gZmxvYXQoIWlzbmFuKHgpICYmICFpc2luZih4KSk7IixCdGU9aXQoe29wU25pcHBldDpNdGUsZHR5cGU6ImJvb2wifSksVnRlPXtrZXJuZWxOYW1lOktsLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpCdGV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFd0ZT0icmV0dXJuIGZsb2F0KGlzaW5mKHgpKTsiLFV0ZT1pdCh7b3BTbmlwcGV0Old0ZSxkdHlwZToiYm9vbCJ9KSxqdGU9e2tlcm5lbE5hbWU6WGwsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlV0ZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgR3RlPSJyZXR1cm4gZmxvYXQoaXNuYW4oeCkpOyIsSHRlPWl0KHtvcFNuaXBwZXQ6R3RlLGR0eXBlOiJib29sIn0pLHF0ZT17a2VybmVsTmFtZTpZbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6SHRlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBLdGU9InJldHVybiBmbG9hdChhIDwgYik7IixYdGU9YAogIHJldHVybiB2ZWM0KGxlc3NUaGFuKGEsIGIpKTsKYCxZdGU9SW4oe29wU25pcHBldDpLdGUscGFja2VkT3BTbmlwcGV0Olh0ZSxjcHVLZXJuZWxJbXBsOkFZLGR0eXBlOiJib29sIn0pLFF0ZT17a2VybmVsTmFtZTpTZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6WXRlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBadGU9InJldHVybiBmbG9hdChhIDw9IGIpOyIsSnRlPWAKICByZXR1cm4gdmVjNChsZXNzVGhhbkVxdWFsKGEsIGIpKTsKYCxlbmU9SW4oe29wU25pcHBldDpadGUscGFja2VkT3BTbmlwcGV0Okp0ZSxjcHVLZXJuZWxJbXBsOl9ZLGR0eXBlOiJib29sIn0pLHRuZT17a2VybmVsTmFtZTpOZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6ZW5lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBubmUobil7Y29uc3R7YmFja2VuZDplLGF0dHJzOnR9PW4se3N0YXJ0OnMsc3RvcDpyLG51bTpvfT10LGk9T1kocyxyLG8pO3JldHVybiBlLm1ha2VUZW5zb3JJbmZvKFtpLmxlbmd0aF0sImZsb2F0MzIiLGkpfWNvbnN0IHNuZT17a2VybmVsTmFtZTpJbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6bm5lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBybmU9THUrYAogIHJldHVybiB4IDwgMC4wID8gMC4vMC4gOiBsb2coeCk7CmAsb25lPWAKICB2ZWM0IHJlc3VsdCA9IGxvZyh4KTsKICBidmVjNCBpc05hTiA9IGlzbmFuKHgpOwogIHJlc3VsdC5yID0gaXNOYU4uciA/IHguciA6ICh4LnIgPCAwLjAgPyAwLi8wLiA6IHJlc3VsdC5yKTsKICByZXN1bHQuZyA9IGlzTmFOLmcgPyB4LmcgOiAoeC5nIDwgMC4wID8gMC4vMC4gOiByZXN1bHQuZyk7CiAgcmVzdWx0LmIgPSBpc05hTi5iID8geC5iIDogKHguYiA8IDAuMCA/IDAuLzAuIDogcmVzdWx0LmIpOwogIHJlc3VsdC5hID0gaXNOYU4uYSA/IHguYSA6ICh4LmEgPCAwLjAgPyAwLi8wLiA6IHJlc3VsdC5hKTsKICByZXR1cm4gcmVzdWx0OwpgLGluZT1pdCh7b3BTbmlwcGV0OnJuZSxwYWNrZWRPcFNuaXBwZXQ6b25lLGNwdUtlcm5lbEltcGw6Rll9KSxhbmU9e2tlcm5lbE5hbWU6UWwsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmluZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgbG5lPUx1K2AKICByZXR1cm4gbG9nKDEuMCArIHgpOwpgLHVuZT1pdCh7b3BTbmlwcGV0OmxuZX0pLGNuZT17a2VybmVsTmFtZTpabCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6dW5lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBkbmU9InJldHVybiBmbG9hdChhID49IDEuMCAmJiBiID49IDEuMCk7IixobmU9YAogIHJldHVybiB2ZWM0KAogICAgdmVjNChncmVhdGVyVGhhbkVxdWFsKGEsIHZlYzQoMS4wKSkpICoKICAgIHZlYzQoZ3JlYXRlclRoYW5FcXVhbChiLCB2ZWM0KDEuMCkpKSk7CmAscG5lPUluKHtvcFNuaXBwZXQ6ZG5lLHBhY2tlZE9wU25pcHBldDpobmUsZHR5cGU6ImJvb2wifSksZm5lPXtrZXJuZWxOYW1lOmtkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpwbmV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IG1uZT0icmV0dXJuIGZsb2F0KCEoeCA+PSAxLjApKTsiLGduZT1pdCh7b3BTbmlwcGV0Om1uZX0pLHluZT17a2VybmVsTmFtZTpDZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6Z25lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB4bmU9InJldHVybiBmbG9hdChhID49IDEuMCB8fCBiID49IDEuMCk7IixibmU9YAogIHJldHVybiBtaW4oCiAgICB2ZWM0KGdyZWF0ZXJUaGFuRXF1YWwoYSwgdmVjNCgxLjApKSkgKwogICAgdmVjNChncmVhdGVyVGhhbkVxdWFsKGIsIHZlYzQoMS4wKSkpLAogICAgdmVjNCgxLjApKTsKYCx3bmU9SW4oe29wU25pcHBldDp4bmUscGFja2VkT3BTbmlwcGV0OmJuZSxkdHlwZToiYm9vbCJ9KSx2bmU9e2tlcm5lbE5hbWU6JGQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnduZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgU25le2NvbnN0cnVjdG9yKGUsdCxzLHIsbyl7dGhpcy52YXJpYWJsZU5hbWVzPVsieCJdLHRoaXMub3V0cHV0U2hhcGU9W107Y29uc3QgaT10LGE9ZVszXS0xO3RoaXMub3V0cHV0U2hhcGU9ZTtsZXQgbDtjb25zdCBjPWBmbG9hdCgke3N9KSArIGZsb2F0KCR7cn0pICogc3VtYDtvPT09LjU/bD1gaW52ZXJzZXNxcnQoJHtjfSlgOm89PT0xP2w9YDEuMC8oJHtjfSlgOmw9YGV4cChsb2coJHtjfSkgKiBmbG9hdCgtJHtvfSkpO2AsdGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYiA9IGNvb3Jkc1swXTsKICAgICAgICBpbnQgciA9IGNvb3Jkc1sxXTsKICAgICAgICBpbnQgYyA9IGNvb3Jkc1syXTsKICAgICAgICBpbnQgZCA9IGNvb3Jkc1szXTsKICAgICAgICBmbG9hdCB4ID0gZ2V0WChiLCByLCBjLCBkKTsKICAgICAgICBmbG9hdCBzdW0gPSAwLjA7CiAgICAgICAgZm9yIChpbnQgaiA9IC0ke2l9OyBqIDw9ICR7aX07IGorKykgewogICAgICAgICAgaW50IGlkeCA9IGQgKyBqOwogICAgICAgICAgaWYgKGlkeCA+PSAwICYmIGlkeCA8PSAgJHthfSkgewogICAgICAgICAgICBmbG9hdCB6ID0gZ2V0WChiLCByLCBjLCBpZHgpOwogICAgICAgICAgICBzdW0gKz0geiAqIHo7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZsb2F0IHZhbCA9IHggKiAke2x9OwogICAgICAgIHNldE91dHB1dCh2YWwpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBObmV7Y29uc3RydWN0b3IoZSx0LHMscixvKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4Il0sdGhpcy5vdXRwdXRTaGFwZT1bXSx0aGlzLnBhY2tlZElucHV0cz0hMCx0aGlzLnBhY2tlZE91dHB1dD0hMDtjb25zdCBpPXQsYT1lWzNdLTE7dGhpcy5vdXRwdXRTaGFwZT1lO2xldCBsO2NvbnN0IGM9YGZsb2F0KCR7c30pICsgZmxvYXQoJHtyfSkgKiBzdW1gO289PT0uNT9sPWBpbnZlcnNlc3FydCgke2N9KWA6bz09PTE/bD1gMS4wLygke2N9KWA6bD1gZXhwKGxvZygke2N9KSAqIGZsb2F0KC0ke299KSk7YCx0aGlzLnVzZXJDb2RlPWAKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWM0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiID0gY29vcmRzLng7CiAgICAgICAgaW50IHIgPSBjb29yZHMueTsKICAgICAgICBpbnQgYyA9IGNvb3Jkcy56OwogICAgICAgIGludCBkID0gY29vcmRzLnc7CgogICAgICAgIGJvb2wgaGFzTmV4dENvbCA9IGQgPCAke3RoaXMub3V0cHV0U2hhcGVbM119OwogICAgICAgIGJvb2wgaGFzTmV4dFJvdyA9IGMgPCAke3RoaXMub3V0cHV0U2hhcGVbMl19OwoKICAgICAgICB2ZWM0IHN1bSA9IHZlYzQoMC4pOwogICAgICAgIHZlYzQgeEZyYWdBdE91dHB1dENvb3JkcyA9IGdldFgoYiwgciwgYywgZCk7CgogICAgICAgIHZlYzQgeEF0T3V0cHV0Q29vcmRzID0gdmVjNCgKICAgICAgICAgIGdldENoYW5uZWwoeEZyYWdBdE91dHB1dENvb3JkcywgdmVjMihjLCBkKSksCiAgICAgICAgICBoYXNOZXh0Q29sID8KICAgICAgICAgICAgZ2V0Q2hhbm5lbCh4RnJhZ0F0T3V0cHV0Q29vcmRzLCB2ZWMyKGMsIGQgKyAxKSkgOiAwLjAsCiAgICAgICAgICBoYXNOZXh0Um93ID8KICAgICAgICAgICAgZ2V0Q2hhbm5lbCh4RnJhZ0F0T3V0cHV0Q29vcmRzICwgdmVjMihjICsgMSwgZCkpIDogMC4wLAogICAgICAgICAgKGhhc05leHRSb3cgJiYgaGFzTmV4dENvbCkgPwogICAgICAgICAgICBnZXRDaGFubmVsKHhGcmFnQXRPdXRwdXRDb29yZHMsIHZlYzIoYyArIDEsIGQgKyAxKSkgOiAwLjAKICAgICAgICApOwoKICAgICAgICBpbnQgZmlyc3RDaGFubmVsID0gZCAtICR7aX07CiAgICAgICAgdmVjMiBjYWNoZSA9IHZlYzIoMC4pOwogICAgICAgIGlmKGZpcnN0Q2hhbm5lbCA+PSAwKXsKICAgICAgICAgIHZlYzQgZmlyc3RDaGFubmVsRnJhZyA9IGdldFgoYiwgciwgYywgZmlyc3RDaGFubmVsKTsKICAgICAgICAgIGNhY2hlLnggPSBnZXRDaGFubmVsKGZpcnN0Q2hhbm5lbEZyYWcsIHZlYzIoYywgZmlyc3RDaGFubmVsKSk7CiAgICAgICAgICAgIGlmKGhhc05leHRSb3cpewogICAgICAgICAgICAgIGNhY2hlLnkgPSBnZXRDaGFubmVsKGZpcnN0Q2hhbm5lbEZyYWcsIHZlYzIoYyArIDEsIGZpcnN0Q2hhbm5lbCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpdmVjMiBkZXB0aCA9IGl2ZWMyKGQsIGQgKyAxKTsKICAgICAgICBmb3IgKGludCBqID0gLSAke2l9OyBqIDw9ICR7aX07IGorKykgewogICAgICAgICAgaXZlYzIgaWR4ID0gZGVwdGggKyBqOwogICAgICAgICAgYnZlYzIgYWJvdmVMb3dlckJvdW5kID0gZ3JlYXRlclRoYW5FcXVhbChpZHgsIGl2ZWMyKDApKTsKICAgICAgICAgIGJ2ZWMyIGJlbG93VXBwZXJCb3VuZCA9IGxlc3NUaGFuRXF1YWwoaWR4LCBpdmVjMigke2F9KSk7CgogICAgICAgICAgYm9vbCBkZXB0aEluUmFuZ2UgPSBhYm92ZUxvd2VyQm91bmQueCAmJiBiZWxvd1VwcGVyQm91bmQueDsKICAgICAgICAgIGJvb2wgZGVwdGhQbHVzT25lSW5SYW5nZSA9IGFib3ZlTG93ZXJCb3VuZC55ICYmIGJlbG93VXBwZXJCb3VuZC55OwoKICAgICAgICAgIGlmKGRlcHRoSW5SYW5nZSB8fCBkZXB0aFBsdXNPbmVJblJhbmdlKXsKICAgICAgICAgICAgdmVjNCB6ID0gdmVjNCgwLik7CiAgICAgICAgICAgIHZlYzQgeEZyYWdBdEN1cnJlbnREZXB0aDsKICAgICAgICAgICAgei54eiA9IGNhY2hlLnh5OwogICAgICAgICAgICBpZihkZXB0aFBsdXNPbmVJblJhbmdlICYmIGhhc05leHRDb2wpewogICAgICAgICAgICAgIHhGcmFnQXRDdXJyZW50RGVwdGggPSBpZHgueSAhPSBkID8KICAgICAgICAgICAgICAgIGdldFgoYiwgciwgYywgaWR4LnkpIDogeEZyYWdBdE91dHB1dENvb3JkczsKICAgICAgICAgICAgICB6LnkgPSBnZXRDaGFubmVsKHhGcmFnQXRDdXJyZW50RGVwdGgsIHZlYzIoYywgaWR4LnkpKTsKICAgICAgICAgICAgICBpZihoYXNOZXh0Um93KXsKICAgICAgICAgICAgICAgIHoudyA9IGdldENoYW5uZWwoeEZyYWdBdEN1cnJlbnREZXB0aCwgdmVjMihjICsgMSwgaWR4LnkpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FjaGUueHkgPSB6Lnl3OwogICAgICAgICAgICBzdW0gKz0geiAqIHo7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZlYzQgcmVzdWx0ID0geEF0T3V0cHV0Q29vcmRzICogJHtsfTsKICAgICAgICBzZXRPdXRwdXQocmVzdWx0KTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qga25lPW49Pntjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtkZXB0aFJhZGl1czpvLGJpYXM6aSxhbHBoYTphLGJldGE6bH09cyxjPW9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDS19OT1JNQUxJWkFUSU9OIik/bmV3IE5uZShyLnNoYXBlLG8saSxhLGwpOm5ldyBTbmUoci5zaGFwZSxvLGksYSxsKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oYyxbcl0sci5kdHlwZSl9LENuZT17a2VybmVsTmFtZTpJZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6a25lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyAkbmV7Y29uc3RydWN0b3IoZSx0LHMscixvKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJpbnB1dEltYWdlIiwib3V0cHV0SW1hZ2UiLCJkeSJdLHRoaXMub3V0cHV0U2hhcGU9W10sdGhpcy5vdXRwdXRTaGFwZT1lLHRoaXMuZGVwdGg9ZVszXSx0aGlzLmRlcHRoUmFkaXVzPXQsdGhpcy5iaWFzPXMsdGhpcy5hbHBoYT1yLHRoaXMuYmV0YT1vLHRoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGIgPSBjb29yZHNbMF07CiAgICAgICAgaW50IHIgPSBjb29yZHNbMV07CiAgICAgICAgaW50IGMgPSBjb29yZHNbMl07CgogICAgICAgIGZsb2F0IHJlc3VsdCA9IDAuMDsKICAgICAgICBmb3IgKGludCBkID0gMDsgZCA8ICR7dGhpcy5kZXB0aH07ICsrZCkgewogICAgICAgICAgaW50IGRlcHRoQmVnaW4gPSBpbnQobWF4KDAuMCwgZmxvYXQoZCAtICR7dH0pKSk7CiAgICAgICAgICBpbnQgZGVwdGhFbmQgPSBpbnQobWluKGZsb2F0KCR7dGhpcy5kZXB0aH0pLAogICAgICAgICAgICAgIGZsb2F0KGQgKyAke3R9ICsgMSkpKTsKCiAgICAgICAgICBjb25zdCBpbnQgTUlOX0RFUFRIX0JFR0lOID0gMDsKICAgICAgICAgIGNvbnN0IGludCBNQVhfREVQVEhfRU5EID0gJHt0aGlzLmRlcHRofTsKCiAgICAgICAgICBmbG9hdCBub3JtID0gMC4wOwogICAgICAgICAgZm9yIChpbnQgayA9IE1JTl9ERVBUSF9CRUdJTjsgayA8IE1BWF9ERVBUSF9FTkQ7ICsraykgewogICAgICAgICAgICBpZiAoayA8IGRlcHRoQmVnaW4pewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGsgPj0gZGVwdGhCZWdpbiAmJiBrIDwgZGVwdGhFbmQpIHsKICAgICAgICAgICAgICBub3JtICs9IGdldElucHV0SW1hZ2UoYiwgciwgYywgaykgKiBnZXRJbnB1dEltYWdlKGIsIHIsIGMsIGspOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgbm9ybSA9IGZsb2F0KCR7cn0pICogbm9ybSArIGZsb2F0KCR7c30pOwoKICAgICAgICAgIGZvcihpbnQgayA9IE1JTl9ERVBUSF9CRUdJTjsgayA8IE1BWF9ERVBUSF9FTkQ7ICsrayl7CiAgICAgICAgICAgIGlmIChrIDwgZGVwdGhCZWdpbil7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoayA+PSBkZXB0aEJlZ2luICYmIGsgPCBkZXB0aEVuZCl7CiAgICAgICAgICAgICAgZmxvYXQgZHlpID0gLTIuMCAqIGZsb2F0KCR7cn0pCiAgICAgICAgICAgICAgICAqIGZsb2F0KCR7b30pCiAgICAgICAgICAgICAgICAqIGdldElucHV0SW1hZ2UoYiwgciwgYywgaykgKiBnZXRPdXRwdXRJbWFnZShiLCByLCBjLCBkKQogICAgICAgICAgICAgICAgLyBub3JtOwogICAgICAgICAgICAgIGlmIChrID09IGQpIHsKICAgICAgICAgICAgICAgIGR5aSArPSBwb3cobm9ybSwgLTEuMCAqICR7b30pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoayA9PSBjb29yZHNbM10pIHsKICAgICAgICAgICAgICAgIGR5aSAqPSBnZXREeShiLCByLCBjLCBkKTsKICAgICAgICAgICAgICAgIHJlc3VsdCArPSBkeWk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgc2V0T3V0cHV0KHJlc3VsdCk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEluZT1uPT57Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cix5Om8sZHk6aX09ZSx7ZGVwdGhSYWRpdXM6YSxiaWFzOmwsYWxwaGE6YyxiZXRhOmh9PXMscD1uZXcgJG5lKHIuc2hhcGUsYSxsLGMsaCk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKHAsW3IsbyxpXSxyLmR0eXBlKX0sVG5lPXtrZXJuZWxOYW1lOlRtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpJbmV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEVuZShuLGUsdCxzKXtjb25zdCByPWNlKGUpLGk9Y2Uobi5zaGFwZSkvcixhPUNlKHtpbnB1dHM6e3g6bn0sYXR0cnM6e3NoYXBlOltpLHJdfSxiYWNrZW5kOnN9KSxsPUFhKGEsbi5kdHlwZSwibWF4IixzKSxjPUNlKHtpbnB1dHM6e3g6bH0sYXR0cnM6e3NoYXBlOnR9LGJhY2tlbmQ6c30pO3JldHVybiBzLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGEpLHMuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8obCksY30vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBLRChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtyZWR1Y3Rpb25JbmRpY2VzOm8sa2VlcERpbXM6aX09cyxhPXIuc2hhcGUubGVuZ3RoLGw9UWUobyxyLnNoYXBlKTtsZXQgYz1sO2NvbnN0IGg9THQoYyxhKSxwPWghPW51bGwsZj10LnNob3VsZEV4ZWN1dGVPbkNQVShbcl0pO2xldCBnPXI7aWYocCl7aWYoZil7Y29uc3QgJD10LnRleERhdGEuZ2V0KGcuZGF0YUlkKS52YWx1ZXMsaz1uZXcgQXJyYXkoYSk7Zm9yKGxldCBMPTA7TDxrLmxlbmd0aDtMKyspa1tMXT1yLnNoYXBlW2hbTF1dO2NvbnN0IFQ9cHYoJCxyLnNoYXBlLHIuZHR5cGUsaCxrKTtnPXQubWFrZVRlbnNvckluZm8oayxyLmR0eXBlKTtjb25zdCBEPXQudGV4RGF0YS5nZXQoZy5kYXRhSWQpO0QudmFsdWVzPVR9ZWxzZSBnPWN5KHIsaCx0KTtjPWp0KGMubGVuZ3RoLGEpfUNuKCJtYXgiLGMsYSk7Y29uc3RbeSx3XT1tbihnLnNoYXBlLGMpO2xldCBiPXk7aSYmKGI9VXQoeSxsKSk7bGV0IHY7aWYoZil7Y29uc3QgJD10LnRleERhdGEuZ2V0KGcuZGF0YUlkKS52YWx1ZXMsaz1MWSgkLGNlKHcpLGIsci5kdHlwZSk7dj10Lm1ha2VUZW5zb3JJbmZvKGIsci5kdHlwZSk7Y29uc3QgVD10LnRleERhdGEuZ2V0KHYuZGF0YUlkKTtULnZhbHVlcz1rfWVsc2Ugdj1FbmUoZyx3LGIsdCk7cmV0dXJuIHAmJnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZyksdn1jb25zdCBSbmU9e2tlcm5lbE5hbWU6VGQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOktEfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBEbmU9ZnYrYAogIHJldHVybiBtYXgoYSwgYik7CmAsQW5lPWAKICB2ZWM0IHJlc3VsdCA9IHZlYzQobWF4KGEsIGIpKTsKICBidmVjNCBpc05hTkEgPSBpc25hbihhKTsKICBidmVjNCBpc05hTkIgPSBpc25hbihiKTsKICBidmVjNCBpc05hTiA9IGJ2ZWM0KGlzTmFOQS54IHx8IGlzTmFOQi54LCBpc05hTkEueSB8fCBpc05hTkIueSwgaXNOYU5BLnogfHwgaXNOYU5CLnosIGlzTmFOQS53IHx8IGlzTmFOQi53KTsKICBgK0RhK2AKICByZXR1cm4gcmVzdWx0OwpgLF9uZT1Jbih7b3BTbmlwcGV0OkRuZSxwYWNrZWRPcFNuaXBwZXQ6QW5lLGNwdUtlcm5lbEltcGw6UFl9KSxPbmU9e2tlcm5lbE5hbWU6SmwsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOl9uZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gRm5lKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWU7RmgociwibWF4UG9vbCIpO2NvbnN0e2ZpbHRlclNpemU6byxzdHJpZGVzOmkscGFkOmEsZGltUm91bmRpbmdNb2RlOmx9PXMsYz0xO0Eoa24oaSxjKSwoKT0+YEVycm9yIGluIG1heFBvb2w6IEVpdGhlciBzdHJpZGVzIG9yIGRpbGF0aW9ucyBtdXN0IGJlIDEuIEdvdCBzdHJpZGVzICR7aX0gYW5kIGRpbGF0aW9ucyAnJHtjfSdgKTtjb25zdCBoPW5yKHIuc2hhcGUsbyxpLGMsYSxsKTtpZihoLmZpbHRlcldpZHRoPT09MSYmaC5maWx0ZXJIZWlnaHQ9PT0xJiZKZShoLmluU2hhcGUsaC5vdXRTaGFwZSkpcmV0dXJuIE5zKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0fSk7Y29uc3QgcD1uZXcgUWMoaCwibWF4IiwhMSk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKHAsW3JdLHIuZHR5cGUpfWNvbnN0IExuZT17a2VybmVsTmFtZTpFZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6Rm5lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBQbmUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7ZmlsdGVyU2l6ZTpvLHN0cmlkZXM6aSxwYWQ6YSxkYXRhRm9ybWF0OmwsZGltUm91bmRpbmdNb2RlOmN9PXMsaD1bMSwxLDFdLHA9Tm8oci5zaGFwZSxvLGksaCxhLGMsbCksZj1uZXcgZ3YocCwibWF4IiwhMSk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGYsW3JdLHIuZHR5cGUpfWNvbnN0IHpuZT17a2VybmVsTmFtZTpSZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6UG5lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBNbmV7Y29uc3RydWN0b3IoZSl7dGhpcy52YXJpYWJsZU5hbWVzPVsiZHkiLCJtYXhQb3MiXSx0aGlzLm91dHB1dFNoYXBlPWUuaW5TaGFwZTtjb25zdCB0PWUuc3RyaWRlSGVpZ2h0LHM9ZS5zdHJpZGVXaWR0aCxyPWUuZGlsYXRpb25IZWlnaHQsbz1lLmVmZmVjdGl2ZUZpbHRlckhlaWdodCxpPWUuZWZmZWN0aXZlRmlsdGVyV2lkdGgsYT1vLTEtZS5wYWRJbmZvLnRvcCxsPWktMS1lLnBhZEluZm8ubGVmdCxjPW8qaS0xO3RoaXMudXNlckNvZGU9YAogICAgICBjb25zdCBpdmVjMiBwYWRzID0gaXZlYzIoJHthfSwgJHtsfSk7CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGIgPSBjb29yZHNbMF07CiAgICAgICAgaW50IGQgPSBjb29yZHNbM107CgogICAgICAgIGl2ZWMyIGR5UkNDb3JuZXIgPSBjb29yZHMueXogLSBwYWRzOwogICAgICAgIGludCBkeVJDb3JuZXIgPSBkeVJDQ29ybmVyLng7CiAgICAgICAgaW50IGR5Q0Nvcm5lciA9IGR5UkNDb3JuZXIueTsKCiAgICAgICAgLy8gQ29udm9sdmUgZHkoPywgPywgZCkgd2l0aCBwb3MgbWFzayg6LCA6LCBkKSB0byBnZXQgZHgoeFIsIHhDLCBkKS4KICAgICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZC4gOiA9IGFjcm9zcyBhbGwgdmFsdWVzIGluIHRoYXQgYXhpcy4KICAgICAgICBmbG9hdCBkb3RQcm9kID0gMC4wOwogICAgICAgIGZvciAoaW50IHdSID0gMDsgd1IgPCAke299OwogICAgICAgICAgd1IgKz0gJHtyfSkgewogICAgICAgICAgZmxvYXQgZHlSID0gZmxvYXQoZHlSQ29ybmVyICsgd1IpIC8gJHt0fS4wOwoKICAgICAgICAgIGlmIChkeVIgPCAwLjAgfHwgZHlSID49ICR7ZS5vdXRIZWlnaHR9LjAgfHwgZnJhY3QoZHlSKSA+IDAuMCkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIGludCBpZHlSID0gaW50KGR5Uik7CgogICAgICAgICAgZm9yIChpbnQgd0MgPSAwOyB3QyA8ICR7aX07IHdDKyspIHsKICAgICAgICAgICAgZmxvYXQgZHlDID0gZmxvYXQoZHlDQ29ybmVyICsgd0MpIC8gJHtzfS4wOwoKICAgICAgICAgICAgaWYgKGR5QyA8IDAuMCB8fCBkeUMgPj0gJHtlLm91dFdpZHRofS4wIHx8CiAgICAgICAgICAgICAgICBmcmFjdChkeUMpID4gMC4wKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW50IGlkeUMgPSBpbnQoZHlDKTsKCiAgICAgICAgICAgIGZsb2F0IGR5VmFsdWUgPSBnZXREeShiLCBpZHlSLCBpZHlDLCBkKTsKICAgICAgICAgICAgaW50IG1heFBvc1ZhbHVlID0gJHtjfSAtIGludChnZXRNYXhQb3MoYiwgaWR5UiwgaWR5QywgZCkpOwoKICAgICAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IHZhbHVlLCBjaGVjayBpdCBhZ2FpbnN0IHRoZSB2YWx1ZSBmcm9tIHRoZQogICAgICAgICAgICAvLyBwb3NpdGlvbiBtYXRyaXguCiAgICAgICAgICAgIGludCBjdXJQb3NWYWx1ZSA9IHdSICogJHtpfSArIHdDOwogICAgICAgICAgICBmbG9hdCBtYXNrID0gZmxvYXQobWF4UG9zVmFsdWUgPT0gY3VyUG9zVmFsdWUgPyAxLjAgOiAwLjApOwoKICAgICAgICAgICAgZG90UHJvZCArPSBkeVZhbHVlICogbWFzazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KGRvdFByb2QpOwogICAgICB9CiAgICBgfX1jbGFzcyBCbmV7Y29uc3RydWN0b3IoZSl7dGhpcy52YXJpYWJsZU5hbWVzPVsiZHkiLCJtYXhQb3MiXSx0aGlzLm91dHB1dFNoYXBlPWUuaW5TaGFwZTtjb25zdCB0PWUuc3RyaWRlRGVwdGgscz1lLnN0cmlkZUhlaWdodCxyPWUuc3RyaWRlV2lkdGgsbz1lLmRpbGF0aW9uRGVwdGgsaT1lLmRpbGF0aW9uSGVpZ2h0LGE9ZS5kaWxhdGlvbldpZHRoLGw9ZS5lZmZlY3RpdmVGaWx0ZXJEZXB0aCxjPWUuZWZmZWN0aXZlRmlsdGVySGVpZ2h0LGg9ZS5lZmZlY3RpdmVGaWx0ZXJXaWR0aCxwPWwtMS1lLnBhZEluZm8uZnJvbnQsZj1jLTEtZS5wYWRJbmZvLnRvcCxnPWgtMS1lLnBhZEluZm8ubGVmdCx5PWwqYypoLTE7dGhpcy51c2VyQ29kZT1gCiAgICAgIGNvbnN0IGl2ZWMzIHBhZHMgPSBpdmVjMygke3B9LCAke2Z9LCAke2d9KTsKCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjNSBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYmF0Y2ggPSBjb29yZHMueDsKICAgICAgICBpbnQgY2ggPSBjb29yZHMudTsKCiAgICAgICAgaXZlYzMgZHlDb3JuZXIgPSBpdmVjMyhjb29yZHMueSwgY29vcmRzLnosIGNvb3Jkcy53KSAtIHBhZHM7CiAgICAgICAgaW50IGR5RENvcm5lciA9IGR5Q29ybmVyLng7CiAgICAgICAgaW50IGR5UkNvcm5lciA9IGR5Q29ybmVyLnk7CiAgICAgICAgaW50IGR5Q0Nvcm5lciA9IGR5Q29ybmVyLno7CgogICAgICAgIC8vIENvbnZvbHZlIGR5KD8sID8sID8sIGNoKSB3aXRoIHBvcyBtYXNrKDosIDosIDosIGQpIHRvIGdldAogICAgICAgIC8vIGR4KHhELCB4UiwgeEMsIGNoKS4KICAgICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZC4gOiA9IGFjcm9zcyBhbGwgdmFsdWVzIGluIHRoYXQgYXhpcy4KICAgICAgICBmbG9hdCBkb3RQcm9kID0gMC4wOwoKICAgICAgICBmb3IgKGludCB3RCA9IDA7IHdEIDwgJHtsfTsKICAgICAgICAgICB3RCArPSAke299KSB7CiAgICAgICAgICBmbG9hdCBkeUQgPSBmbG9hdChkeURDb3JuZXIgKyB3RCkgLyAke3R9LjA7CgogICAgICAgICAgaWYgKGR5RCA8IDAuMCB8fCBkeUQgPj0gJHtlLm91dERlcHRofS4wIHx8IGZyYWN0KGR5RCkgPiAwLjApIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpbnQgaWR5RCA9IGludChkeUQpOwoKICAgICAgICAgIGZvciAoaW50IHdSID0gMDsgd1IgPCAke2N9OwogICAgICAgICAgICAgIHdSICs9ICR7aX0pIHsKICAgICAgICAgICAgZmxvYXQgZHlSID0gZmxvYXQoZHlSQ29ybmVyICsgd1IpIC8gJHtzfS4wOwoKICAgICAgICAgICAgaWYgKGR5UiA8IDAuMCB8fCBkeVIgPj0gJHtlLm91dEhlaWdodH0uMCB8fAogICAgICAgICAgICAgICAgZnJhY3QoZHlSKSA+IDAuMCkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGludCBpZHlSID0gaW50KGR5Uik7CgogICAgICAgICAgICBmb3IgKGludCB3QyA9IDA7IHdDIDwgJHtofTsKICAgICAgICAgICAgICAgIHdDICs9ICR7YX0pIHsKICAgICAgICAgICAgICBmbG9hdCBkeUMgPSBmbG9hdChkeUNDb3JuZXIgKyB3QykgLyAke3J9LjA7CgogICAgICAgICAgICAgIGlmIChkeUMgPCAwLjAgfHwgZHlDID49ICR7ZS5vdXRXaWR0aH0uMCB8fAogICAgICAgICAgICAgICAgICBmcmFjdChkeUMpID4gMC4wKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaW50IGlkeUMgPSBpbnQoZHlDKTsKCiAgICAgICAgICAgICAgZmxvYXQgZHlWYWx1ZSA9IGdldER5KGJhdGNoLCBpZHlELCBpZHlSLCBpZHlDLCBjaCk7CiAgICAgICAgICAgICAgaW50IG1heFBvc1ZhbHVlID0gJHt5fSAtCiAgICAgICAgICAgICAgICAgIGludChnZXRNYXhQb3MoYmF0Y2gsIGlkeUQsIGlkeVIsIGlkeUMsIGNoKSk7CgogICAgICAgICAgICAgIC8vIEdldCB0aGUgY3VycmVudCB2YWx1ZSwgY2hlY2sgaXQgYWdhaW5zdCB0aGUgdmFsdWUgZnJvbSB0aGUKICAgICAgICAgICAgICAvLyBwb3NpdGlvbiBtYXRyaXguCiAgICAgICAgICAgICAgaW50IGN1clBvc1ZhbHVlID0KICAgICAgICAgICAgICAgICAgd0QgKiAke2N9ICogJHtofSArCiAgICAgICAgICAgICAgICAgIHdSICogJHtofSArIHdDOwogICAgICAgICAgICAgIGZsb2F0IG1hc2sgPSBmbG9hdChtYXhQb3NWYWx1ZSA9PSBjdXJQb3NWYWx1ZSA/IDEuMCA6IDAuMCk7CgogICAgICAgICAgICAgIGRvdFByb2QgKz0gZHlWYWx1ZSAqIG1hc2s7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0T3V0cHV0KGRvdFByb2QpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBWbmUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2R5OnIsaW5wdXQ6b309ZSxpPW8se2ZpbHRlclNpemU6YSxzdHJpZGVzOmwscGFkOmMsZGltUm91bmRpbmdNb2RlOmh9PXMscD1bMSwxLDFdLGY9Tm8oaS5zaGFwZSxhLGwscCxjLGgpLGc9bmV3IGd2KGYsIm1heCIsITApLHk9dC5ydW5XZWJHTFByb2dyYW0oZyxbaV0saS5kdHlwZSksdz1uZXcgQm5lKGYpLGI9dC5ydW5XZWJHTFByb2dyYW0odyxbcix5XSxpLmR0eXBlKTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh5KSxifWNvbnN0IFduZT17a2VybmVsTmFtZTpSbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6Vm5lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBVbmUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2R5OnIsaW5wdXQ6byxvdXRwdXQ6aX09ZSxhPW87RmgoW28saV0sIm1heFBvb2xHcmFkIik7Y29uc3R7ZmlsdGVyU2l6ZTpsLHN0cmlkZXM6YyxwYWQ6aCxkaW1Sb3VuZGluZ01vZGU6cH09cyxmPW5yKGEuc2hhcGUsbCxjLDEsaCxwKSxnPSEwLHk9bmV3IFFjKGYsIm1heCIsZyksdz10LnJ1bldlYkdMUHJvZ3JhbSh5LFthXSxhLmR0eXBlKSxiPW5ldyBNbmUoZiksdj10LnJ1bldlYkdMUHJvZ3JhbShiLFtyLHddLGEuZHR5cGUpO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHcpLHZ9Y29uc3Qgam5lPXtrZXJuZWxOYW1lOkVtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpVbmV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEduZShuLGUsdCxzKXtsZXQgcj1uZXcgUWModCwibWF4IiwhMSk7Y29uc3Qgbz1zLnJ1bldlYkdMUHJvZ3JhbShyLFtuXSwiZmxvYXQzMiIpO3I9bmV3IFFjKHQsIm1heCIsITAsITAsZSk7Y29uc3QgaT1zLnJ1bldlYkdMUHJvZ3JhbShyLFtuXSwiZmxvYXQzMiIpO3JldHVybltvLGldfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEhuZT17a2VybmVsTmFtZTpEbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6KHtpbnB1dHM6bixhdHRyczplLGJhY2tlbmQ6dH0pPT57Y29uc3R7eDpzfT1uLHtmaWx0ZXJTaXplOnIsc3RyaWRlczpvLHBhZDppLGluY2x1ZGVCYXRjaEluSW5kZXg6YX09ZSxsPXQ7QShzLnNoYXBlLmxlbmd0aD09PTQsKCk9PmBFcnJvciBpbiBtYXhQb29sOiBpbnB1dCBtdXN0IGJlIHJhbmsgNCBidXQgZ290IHJhbmsgJHtzLnNoYXBlLmxlbmd0aH0uYCk7Y29uc3QgYz1bMSwxXTtBKGtuKG8sYyksKCk9PmBFcnJvciBpbiBtYXhQb29sOiBFaXRoZXIgc3RyaWRlcyBvciBkaWxhdGlvbnMgbXVzdCBiZSAxLiBHb3Qgc3RyaWRlcyAke299IGFuZCBkaWxhdGlvbnMgJyR7Y30nYCk7Y29uc3QgaD1ucihzLnNoYXBlLHIsbyxjLGkpLFtwLGZdPUduZShzLGEsaCxsKTtyZXR1cm5bcCxmXX19Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHFuZShuLGUsdCxzKXtjb25zdCByPWNlKGUpLGk9Y2Uobi5zaGFwZSkvcixhPUNlKHtpbnB1dHM6e3g6bn0sYXR0cnM6e3NoYXBlOltpLHJdfSxiYWNrZW5kOnN9KSxsPUFhKGEsImZsb2F0MzIiLCJtZWFuIixzKSxjPUNlKHtpbnB1dHM6e3g6bH0sYXR0cnM6e3NoYXBlOnR9LGJhY2tlbmQ6c30pO3JldHVybiBzLmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGEpLHMuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8obCksY30vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBLbmU9e2tlcm5lbE5hbWU6RGQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOih7aW5wdXRzOm4sYXR0cnM6ZSxiYWNrZW5kOnR9KT0+e2NvbnN0e3g6c309bix7a2VlcERpbXM6cixheGlzOm99PWUsaT10LGE9cy5zaGFwZS5sZW5ndGgsbD1RZShvLHMuc2hhcGUpO2xldCBjPWw7Y29uc3QgaD1MdChjLGEpLHA9aCE9bnVsbCxmPWkuc2hvdWxkRXhlY3V0ZU9uQ1BVKFtzXSksZz1bXTtsZXQgeT1zO2lmKHApe2lmKGYpe2NvbnN0IGs9aS50ZXhEYXRhLmdldCh5LmRhdGFJZCkudmFsdWVzLFQ9bmV3IEFycmF5KGEpO2ZvcihsZXQgej0wO3o8VC5sZW5ndGg7eisrKVRbel09cy5zaGFwZVtoW3pdXTtjb25zdCBEPXB2KGsscy5zaGFwZSxzLmR0eXBlLGgsVCk7eT1pLm1ha2VUZW5zb3JJbmZvKFQscy5kdHlwZSk7Y29uc3QgTD1pLnRleERhdGEuZ2V0KHkuZGF0YUlkKTtMLnZhbHVlcz1EfWVsc2UgeT1jeShzLGgsaSk7Zy5wdXNoKHkpLGM9anQoYy5sZW5ndGgsYSl9Q24oInN1bSIsYyxhKTtjb25zdFt3LGJdPW1uKHkuc2hhcGUsYyk7bGV0IHY9dztyJiYodj1VdCh3LGwpKTtjb25zdCBTPXFuZSh5LGIsdixpKTtmb3IoY29uc3QgJCBvZiBnKWkuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oJCk7cmV0dXJuIFN9fTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBYbmUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7YXhpczpvLGtlZXBEaW1zOml9PXMsYT1yLnNoYXBlLmxlbmd0aCxsPVFlKG8sci5zaGFwZSk7bGV0IGM9bDtjb25zdCBoPUx0KGMsYSk7bGV0IHA9cjtoIT1udWxsJiYocD1Ibih7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTpofX0pLGM9anQoYy5sZW5ndGgsci5zaGFwZS5sZW5ndGgpKSxDbigibWluIixjLGEpO2NvbnN0W2YsZ109bW4ocC5zaGFwZSxjKSx5PWNlKGcpLHc9Q2Uoe2lucHV0czp7eDpwfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOlstMSx5XX19KSxiPUFhKHcsdy5kdHlwZSwibWluIix0KTtsZXQgdjtpZihpKXtjb25zdCBTPVV0KGYsbCk7dj1DZSh7aW5wdXRzOnt4OmJ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6U319KX1lbHNlIHY9Q2Uoe2lucHV0czp7eDpifSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmZ9fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odyksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhiKSxoIT1udWxsJiZ0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHApLHZ9Y29uc3QgWW5lPXtrZXJuZWxOYW1lOkFkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpYbmV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFFuZT1mditgCiAgcmV0dXJuIG1pbihhLCBiKTsKYCxabmU9YAogIHZlYzQgcmVzdWx0ID0gdmVjNChtaW4oYSwgYikpOwogIGJ2ZWM0IGlzTmFOQSA9IGlzbmFuKGEpOwogIGJ2ZWM0IGlzTmFOQiA9IGlzbmFuKGIpOwogIGJ2ZWM0IGlzTmFOID0gYnZlYzQoaXNOYU5BLnggfHwgaXNOYU5CLngsIGlzTmFOQS55IHx8IGlzTmFOQi55LCBpc05hTkEueiB8fCBpc05hTkIueiwgaXNOYU5BLncgfHwgaXNOYU5CLncpOwogIGArRGErYAogIHJldHVybiByZXN1bHQ7CmAsSm5lPUluKHtvcFNuaXBwZXQ6UW5lLHBhY2tlZE9wU25pcHBldDpabmUsY3B1S2VybmVsSW1wbDp6WX0pLGVzZT17a2VybmVsTmFtZTpldSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6Sm5lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyB0c2V7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiXSx0aGlzLm91dHB1dFNoYXBlPXQubWFwKChoLHApPT5oWzBdK2VbcF0raFsxXSk7Y29uc3Qgcj1lLmxlbmd0aCxvPXh0KHIpLGk9dC5tYXAoaD0+aFswXSkuam9pbigiLCIpLGE9dC5tYXAoKGgscCk9PmhbMF0rZVtwXSkuam9pbigiLCIpLGw9WyJjb29yZHNbMF0iLCJjb29yZHNbMV0iLCJjb29yZHNbMl0iLCJjb29yZHNbM10iXS5zbGljZSgwLHIpLGM9cz09PSJyZWZsZWN0Ij8wOjE7aWYocj09PTEpe3RoaXMudXNlckNvZGU9YAogICAgICAgIGludCBzdGFydCA9ICR7aX07CiAgICAgICAgaW50IGVuZCA9ICR7YX07CgogICAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAgIGludCBvdXRDID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgICBpZiAob3V0QyA8IHN0YXJ0KSB7CiAgICAgICAgICAgIG91dEMgPSBzdGFydCAqIDIgLSBvdXRDIC0gJHtjfTsKICAgICAgICAgIH0gZWxzZSBpZihvdXRDID49IGVuZCkgewogICAgICAgICAgICBvdXRDID0gKGVuZCAtIDEpICogMiAtIG91dEMgKyAke2N9OwogICAgICAgICAgfQogICAgICAgICAgc2V0T3V0cHV0KGdldFgob3V0QyAtIHN0YXJ0KSk7CiAgICAgICAgfQogICAgICBgO3JldHVybn10aGlzLnVzZXJDb2RlPWAKICAgICAgJHtvfSBzdGFydCA9ICR7b30oJHtpfSk7CiAgICAgICR7b30gZW5kID0gJHtvfSgke2F9KTsKCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAke299IG91dEMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8ICR7cn07IGkrKykgewogICAgICAgICAgaWYgKG91dENbaV0gPCBzdGFydFtpXSkgewogICAgICAgICAgICBvdXRDW2ldID0gc3RhcnRbaV0gKiAyIC0gb3V0Q1tpXSAtICR7Y307CiAgICAgICAgICB9IGVsc2UgaWYob3V0Q1tpXSA+PSBlbmRbaV0pIHsKICAgICAgICAgICAgb3V0Q1tpXSA9IChlbmRbaV0gLSAxKSAqIDIgLSBvdXRDW2ldICsgJHtjfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJHtvfSBjb29yZHMgPSBvdXRDIC0gc3RhcnQ7CiAgICAgICAgc2V0T3V0cHV0KGdldFgoJHtsfSkpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBuc2V7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiXSx0aGlzLnBhY2tlZElucHV0cz0hMCx0aGlzLnBhY2tlZE91dHB1dD0hMCx0aGlzLm91dHB1dFNoYXBlPXQubWFwKCh5LHcpPT55WzBdK2Vbd10reVsxXSk7Y29uc3Qgcj1lLmxlbmd0aCxvPXh0KHIpLGk9dC5tYXAoeT0+eVswXSkuam9pbigiLCIpLGE9dC5tYXAoKHksdyk9PnlbMF0rZVt3XSkuam9pbigiLCIpLGw9R24oInJjIixyKSxjPUduKCJzb3VyY2UiLHIpLGg9YCR7bFtyLTFdfSA8ICR7dGhpcy5vdXRwdXRTaGFwZVtyLTFdfWAscD1yPT09MT8ic291cmNlIjpgdmVjMigke2Muc2xpY2UoLTIpLmpvaW4oKX0pYCxmPXM9PT0icmVmbGVjdCI/MDoxO2xldCBnPSIiO2lmKHI9PT0xKXtjb25zdCB5PWAKICAgICAgICAke299IHNvdXJjZSA9IHJjOwogICAgICAgIGlmIChzb3VyY2UgPCBzdGFydCkgewogICAgICAgICAgc291cmNlID0gc3RhcnQgKiAyIC0gc291cmNlIC0gJHtmfTsKICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZSA+PSBlbmQpIHsKICAgICAgICAgIHNvdXJjZSA9IChlbmQgLSAxKSAqIDIgLSBzb3VyY2UgKyAke2Z9OwogICAgICAgIH0KICAgICAgICBzb3VyY2UgLT0gc3RhcnQ7CiAgICAgIGA7Zz1gCiAgICAgICAgJHtvfSByYyA9IG91dHB1dExvYzsKICAgICAgICAke3l9CiAgICAgICAgcmVzdWx0WzBdID0gZ2V0Q2hhbm5lbChnZXRYKCR7Yy5qb2luKCl9KSwgJHtwfSk7CiAgICAgICAgJHtsW3ItMV19ICs9IDE7CiAgICAgICAgaWYoJHtofSkgewogICAgICAgICAgJHt5fQogICAgICAgICAgcmVzdWx0WzFdID0gZ2V0Q2hhbm5lbChnZXRYKCR7Yy5qb2luKCl9KSwgJHtwfSk7CiAgICAgICAgfQogICAgICBgfWVsc2V7Y29uc3QgeT1gCiAgICAgICAgJHtvfSBzb3VyY2UgPSByYzsKICAgICAgICAke299IGx0ID0gJHtvfShsZXNzVGhhbihzb3VyY2UsIHN0YXJ0KSk7CiAgICAgICAgJHtvfSBndGUgPSAke299KGdyZWF0ZXJUaGFuRXF1YWwoc291cmNlLCBlbmQpKTsKICAgICAgICAke299IG9yaWcgPSAxIC0gKGx0ICsgZ3RlKTsKICAgICAgICBzb3VyY2UgPSBvcmlnICogc291cmNlICsKICAgICAgICAgICAgICAgIGx0ICogKHN0YXJ0ICogMiAtIHNvdXJjZSAtICR7Zn0pICsKICAgICAgICAgICAgICAgIGd0ZSAqICgoZW5kIC0gMSkgKiAyIC0gc291cmNlICsgJHtmfSk7CiAgICAgICAgc291cmNlIC09IHN0YXJ0OwogICAgICBgO2c9YAogICAgICAgICR7b30gcmMgPSBvdXRwdXRMb2M7CiAgICAgICAgJHt5fQogICAgICAgIHJlc3VsdFswXSA9IGdldENoYW5uZWwoZ2V0WCgke2Muam9pbigpfSksICR7cH0pOwogICAgICAgICR7bFtyLTFdfSArPSAxOwogICAgICAgIGlmKCR7aH0pIHsKICAgICAgICAgICR7eX0KICAgICAgICAgIHJlc3VsdFsxXSA9IGdldENoYW5uZWwoZ2V0WCgke2Muam9pbigpfSksICR7cH0pOwogICAgICAgIH0KICAgICAgICByYyA9IG91dHB1dExvYzsKICAgICAgICAke2xbci0yXX0gKz0gMTsKICAgICAgICBpZigke2xbci0yXX0gPCAke3RoaXMub3V0cHV0U2hhcGVbci0yXX0pIHsKICAgICAgICAgICR7eX0KICAgICAgICAgIHJlc3VsdFsyXSA9IGdldENoYW5uZWwoZ2V0WCgke2Muam9pbigpfSksICR7cH0pOwogICAgICAgICAgJHtsW3ItMV19ICs9IDE7CiAgICAgICAgICBpZigke2h9KSB7CiAgICAgICAgICAgICR7eX0KICAgICAgICAgICAgcmVzdWx0WzNdID0gZ2V0Q2hhbm5lbChnZXRYKCR7Yy5qb2luKCl9KSwgJHtwfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBgfXRoaXMudXNlckNvZGU9YAogICAgICBjb25zdCAke299IHN0YXJ0ID0gJHtvfSgke2l9KTsKICAgICAgY29uc3QgJHtvfSBlbmQgPSAke299KCR7YX0pOwoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICR7b30gb3V0cHV0TG9jID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgdmVjNCByZXN1bHQgPSB2ZWM0KDAuKTsKICAgICAgICAke2d9CiAgICAgICAgc2V0T3V0cHV0KHJlc3VsdCk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHNzZT0oe2lucHV0czpuLGJhY2tlbmQ6ZSxhdHRyczp0fSk9Pntjb25zdHt4OnN9PW4se3BhZGRpbmdzOnIsbW9kZTpvfT10LGk9b2UoKS5nZXRCb29sKCJXRUJHTF9QQUNLX0FSUkFZX09QRVJBVElPTlMiKT9uZXcgbnNlKHMuc2hhcGUscixvKTpuZXcgdHNlKHMuc2hhcGUscixvKTtyZXR1cm4gZS5ydW5XZWJHTFByb2dyYW0oaSxbc10scy5kdHlwZSl9LHJzZT17a2VybmVsTmFtZTpfZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6c3NlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBvc2U9YGlmIChiID09IDAuMCkgcmV0dXJuIE5BTjsKICByZXR1cm4gbW9kKGEsIGIpO2AsaXNlPWAKICB2ZWM0IHJlc3VsdCA9IG1vZChhLCBiKTsKICBidmVjNCBpc05hTiA9IGVxdWFsKGIsIHZlYzQoMC4wKSk7CiAgYCtEYStgCiAgcmV0dXJuIHJlc3VsdDsKYCxhc2U9SW4oe29wU25pcHBldDpvc2UscGFja2VkT3BTbmlwcGV0OmlzZX0pLGxzZT17a2VybmVsTmFtZTp0dSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6YXNlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyB1c2V7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudmFyaWFibGVOYW1lcz1bInByb2JzIl0sdGhpcy5jdXN0b21Vbmlmb3Jtcz1be25hbWU6InNlZWQiLHR5cGU6ImZsb2F0In1dLHRoaXMub3V0cHV0U2hhcGU9W2Usc10sdGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMiBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYmF0Y2ggPSBjb29yZHNbMF07CgogICAgICAgIGZsb2F0IHIgPSByYW5kb20oc2VlZCk7CiAgICAgICAgZmxvYXQgY2RmID0gMC4wOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8ICR7dC0xfTsgaSsrKSB7CiAgICAgICAgICBjZGYgKz0gZ2V0UHJvYnMoYmF0Y2gsIGkpOwoKICAgICAgICAgIGlmIChyIDwgY2RmKSB7CiAgICAgICAgICAgIHNldE91dHB1dChmbG9hdChpKSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIElmIG5vIG90aGVyIGV2ZW50IGhhcHBlbmVkLCBsYXN0IGV2ZW50IGhhcHBlbmVkLgogICAgICAgIHNldE91dHB1dChmbG9hdCgke3QtMX0pKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgY3NlPWAKaWYgKGEgPT0gYikgewogIHJldHVybiAxLjA7Cn07CnJldHVybiBhIC8gYjtgLGRzZT1gCiAgLy8gdmVjNCBvbmUgPSB2ZWM0KGVxdWFsKGEsIGIpKTsKICAvLyByZXR1cm4gb25lICsgKHZlYzQoMS4wKSAtIG9uZSkgKiBhIC8gYjsKICB2ZWM0IHJlc3VsdCA9IGEgLyBiOwogIGlmKGEueCA9PSBiLngpIHsKICAgIHJlc3VsdC54ID0gMS47CiAgfQogIGlmKGEueSA9PSBiLnkpIHsKICAgIHJlc3VsdC55ID0gMS47CiAgfQogIGlmKGEueiA9PSBiLnopIHsKICAgIHJlc3VsdC56ID0gMS47CiAgfQogIGlmKGEudyA9PSBiLncpIHsKICAgIHJlc3VsdC53ID0gMS47CiAgfQoKICByZXR1cm4gcmVzdWx0OwpgLFhEPUluKHtvcFNuaXBwZXQ6Y3NlLHBhY2tlZE9wU25pcHBldDpkc2UsY2hlY2tPdXRPZkJvdW5kczohMH0pLGhzZT17a2VybmVsTmFtZTpNbCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6WER9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFlDPSJyZXR1cm4gYSAtIGI7IixZRD1Jbih7b3BTbmlwcGV0OllDLHBhY2tlZE9wU25pcHBldDpZQyxzdXBwb3J0c0NvbXBsZXg6ITAsY3B1S2VybmVsSW1wbDpvUX0pLHBzZT17a2VybmVsTmFtZTp5dSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6WUR9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFFEKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtsb2dpdHM6cn09ZSx7ZGltOm99PXMsaT1RZShbb10sci5zaGFwZSksYT1LRCh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7cmVkdWN0aW9uSW5kaWNlczppLGtlZXBEaW1zOiExfX0pLGw9VXQoYS5zaGFwZSxpKSxjPUNlKHtpbnB1dHM6e3g6YX0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpsfX0pLGg9WUQoe2lucHV0czp7YTpyLGI6Y30sYmFja2VuZDp0fSkscD1HRCh7aW5wdXRzOnt4Omh9LGJhY2tlbmQ6dH0pLGY9ZHkoe2lucHV0czp7eDpwfSxiYWNrZW5kOnQsYXR0cnM6e2F4aXM6aSxrZWVwRGltczohMX19KSxnPUNlKHtpbnB1dHM6e3g6Zn0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpsfX0pLHk9WEQoe2lucHV0czp7YTpwLGI6Z30sYmFja2VuZDp0fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oYSksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhjKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGgpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8ocCksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhmKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGcpLHl9Y29uc3QgZnNlPXtrZXJuZWxOYW1lOlFkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpRRH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gbXNlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtsb2dpdHM6cn09ZSx7bnVtU2FtcGxlczpvLHNlZWQ6aSxub3JtYWxpemVkOmF9PXMsbD1hP3I6UUQoe2lucHV0czp7bG9naXRzOnJ9LGJhY2tlbmQ6dCxhdHRyczp7ZGltOnIuc2hhcGUubGVuZ3RoLTF9fSksYz1sLnNoYXBlWzBdLGg9bC5zaGFwZVsxXSxwPW5ldyB1c2UoYyxoLG8pLGY9W1tpXV0sZz10LnJ1bldlYkdMUHJvZ3JhbShwLFtsXSwiaW50MzIiLGYpO3JldHVybiBhfHx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGwpLGd9Y29uc3QgZ3NlPXtrZXJuZWxOYW1lOkFtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzptc2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IHlzZT1ycitgCiAgcmV0dXJuIC14OwpgLHhzZT1gCiAgdmVjNCByZXN1bHQgPSAteDsKICBidmVjNCBpc05hTiA9IGlzbmFuKHgpOwoKICByZXN1bHQuciA9IGlzTmFOLnIgPyB4LnIgOiByZXN1bHQucjsKICByZXN1bHQuZyA9IGlzTmFOLmcgPyB4LmcgOiByZXN1bHQuZzsKICByZXN1bHQuYiA9IGlzTmFOLmIgPyB4LmIgOiByZXN1bHQuYjsKICByZXN1bHQuYSA9IGlzTmFOLmEgPyB4LmEgOiByZXN1bHQuYTsKCiAgcmV0dXJuIHJlc3VsdDsKYDtmdW5jdGlvbiBic2Uobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHt4OnN9PWU7aWYodC5zaG91bGRFeGVjdXRlT25DUFUoW3NdKSl7Y29uc3Qgbz10LnRleERhdGEuZ2V0KHMuZGF0YUlkKSxbaSxhXT1CWShvLnZhbHVlcyxzLnNoYXBlLHMuZHR5cGUpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGEscy5kdHlwZSxpKX1sZXQgcjtyZXR1cm4gb2UoKS5nZXRCb29sKCJXRUJHTF9QQUNLX1VOQVJZX09QRVJBVElPTlMiKT9yPW5ldyBlaShzLnNoYXBlLHhzZSk6cj1uZXcgTXIocy5zaGFwZSx5c2UpLHQucnVuV2ViR0xQcm9ncmFtKHIsW3NdLHMuZHR5cGUpfWNvbnN0IHdzZT17a2VybmVsTmFtZTpPZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6YnNlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB2c2U9Vmc7ZnVuY3Rpb24gU3NlKG4pe0RzKCJ0Zi5ub25NYXhTdXBwcmVzc2lvbigpIGluIHdlYmdsIGxvY2tzIHRoZSBVSSB0aHJlYWQuIENhbGwgdGYubm9uTWF4U3VwcHJlc3Npb25Bc3luYygpIGluc3RlYWQiKTtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7Ym94ZXM6cixzY29yZXM6b309ZSx7bWF4T3V0cHV0U2l6ZTppLGlvdVRocmVzaG9sZDphLHNjb3JlVGhyZXNob2xkOmx9PXMsYz10LnJlYWRTeW5jKHIuZGF0YUlkKSxoPXQucmVhZFN5bmMoby5kYXRhSWQpLHtzZWxlY3RlZEluZGljZXM6cH09dnNlKGMsaCxpLGEsbCk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oW3AubGVuZ3RoXSwiaW50MzIiLG5ldyBJbnQzMkFycmF5KHApKX1jb25zdCBOc2U9e2tlcm5lbE5hbWU6X20sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlNzZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3Qga3NlPVdnO2Z1bmN0aW9uIENzZShuKXtEcygidGYubm9uTWF4U3VwcHJlc3Npb24oKSBpbiB3ZWJnbCBsb2NrcyB0aGUgVUkgdGhyZWFkLiBDYWxsIHRmLm5vbk1heFN1cHByZXNzaW9uQXN5bmMoKSBpbnN0ZWFkIik7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2JveGVzOnIsc2NvcmVzOm99PWUse21heE91dHB1dFNpemU6aSxpb3VUaHJlc2hvbGQ6YSxzY29yZVRocmVzaG9sZDpsLHBhZFRvTWF4T3V0cHV0U2l6ZTpjfT1zLGg9dC5yZWFkU3luYyhyLmRhdGFJZCkscD10LnJlYWRTeW5jKG8uZGF0YUlkKSx7c2VsZWN0ZWRJbmRpY2VzOmYsdmFsaWRPdXRwdXRzOmd9PWtzZShoLHAsaSxhLGwsYyk7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oW2YubGVuZ3RoXSwiaW50MzIiLG5ldyBJbnQzMkFycmF5KGYpKSx0Lm1ha2VUZW5zb3JJbmZvKFtdLCJpbnQzMiIsbmV3IEludDMyQXJyYXkoW2ddKSldfWNvbnN0ICRzZT17a2VybmVsTmFtZTpPbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6Q3NlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBJc2U9VWc7ZnVuY3Rpb24gVHNlKG4pe0RzKCJ0Zi5ub25NYXhTdXBwcmVzc2lvbigpIGluIHdlYmdsIGxvY2tzIHRoZSBVSSB0aHJlYWQuIENhbGwgdGYubm9uTWF4U3VwcHJlc3Npb25Bc3luYygpIGluc3RlYWQiKTtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7Ym94ZXM6cixzY29yZXM6b309ZSx7bWF4T3V0cHV0U2l6ZTppLGlvdVRocmVzaG9sZDphLHNjb3JlVGhyZXNob2xkOmwsc29mdE5tc1NpZ21hOmN9PXMsaD10LnJlYWRTeW5jKHIuZGF0YUlkKSxwPXQucmVhZFN5bmMoby5kYXRhSWQpLGY9aSxnPWEseT1sLHc9Yyx7c2VsZWN0ZWRJbmRpY2VzOmIsc2VsZWN0ZWRTY29yZXM6dn09SXNlKGgscCxmLGcseSx3KTtyZXR1cm5bdC5tYWtlVGVuc29ySW5mbyhbYi5sZW5ndGhdLCJpbnQzMiIsbmV3IEludDMyQXJyYXkoYikpLHQubWFrZVRlbnNvckluZm8oW3YubGVuZ3RoXSwiZmxvYXQzMiIsbmV3IEZsb2F0MzJBcnJheSh2KSldfWNvbnN0IEVzZT17a2VybmVsTmFtZTpGbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6VHNlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBSc2V7Y29uc3RydWN0b3IoZSx0LHMscil7dGhpcy52YXJpYWJsZU5hbWVzPVsiaW5kaWNlcyJdLHRoaXMub3V0cHV0U2hhcGU9W2UsdF0sdGhpcy51c2VyQ29kZT1gCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjMiBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgaW5kZXggPSByb3VuZChnZXRJbmRpY2VzKGNvb3Jkcy54KSk7CiAgICAgICAgc2V0T3V0cHV0KG1peChmbG9hdCgke3J9KSwgZmxvYXQoJHtzfSksCiAgICAgICAgICAgICAgICAgICAgICBmbG9hdChpbmRleCA9PSBjb29yZHMueSkpKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgRHNlPW49Pntjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7aW5kaWNlczpyfT1lLHtkdHlwZTpvLGRlcHRoOmksb25WYWx1ZTphLG9mZlZhbHVlOmx9PXMsYz1jZShyLnNoYXBlKSxoPW5ldyBSc2UoYyxpLGEsbCkscD1DZSh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6W2NdfX0pLGY9dC5ydW5XZWJHTFByb2dyYW0oaCxbcF0sbyk7dC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhwKTtjb25zdCBnPVsuLi5yLnNoYXBlLGldLHk9Q2Uoe2lucHV0czp7eDpmfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmd9fSk7cmV0dXJuIHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oZikseX0sQXNlPXtrZXJuZWxOYW1lOlBkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpEc2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFFmKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7eDpzfT1lO2lmKHMuZHR5cGU9PT0iY29tcGxleDY0Iil7Y29uc3Qgcj1QaCh7aW5wdXRzOntpbnB1dDpzfSxiYWNrZW5kOnR9KSxvPVFmKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0fSksaT1oeSh7aW5wdXRzOntpbnB1dDpzfSxiYWNrZW5kOnR9KSxhPVFmKHtpbnB1dHM6e3g6aX0sYmFja2VuZDp0fSksbD0kaSh7aW5wdXRzOntyZWFsOm8saW1hZzphfSxiYWNrZW5kOnR9KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhyKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKG8pLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaSksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhhKSxsfWVsc2UgcmV0dXJuIHpoKHthdHRyczp7c2hhcGU6cy5zaGFwZSxkdHlwZTpzLmR0eXBlLHZhbHVlOnMuZHR5cGU9PT0ic3RyaW5nIj8iIjowfSxiYWNrZW5kOnR9KX1jb25zdCBfc2U9e2tlcm5lbE5hbWU6dGgsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlFmfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBaRChuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se3g6c309ZTtpZihzLmR0eXBlPT09InN0cmluZyIpdGhyb3cgbmV3IEVycm9yKCJvbmVzTGlrZSBpcyBub3Qgc3VwcG9ydGVkIHVuZGVyIHN0cmluZyBkdHlwZSIpO2lmKHMuZHR5cGU9PT0iY29tcGxleDY0Iil7Y29uc3Qgcj1QaCh7aW5wdXRzOntpbnB1dDpzfSxiYWNrZW5kOnR9KSxvPVpEKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0fSksaT1oeSh7aW5wdXRzOntpbnB1dDpzfSxiYWNrZW5kOnR9KSxhPVFmKHtpbnB1dHM6e3g6aX0sYmFja2VuZDp0fSksbD0kaSh7aW5wdXRzOntyZWFsOm8saW1hZzphfSxiYWNrZW5kOnR9KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhyKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKG8pLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaSksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhhKSxsfWVsc2UgcmV0dXJuIHpoKHthdHRyczp7c2hhcGU6cy5zaGFwZSxkdHlwZTpzLmR0eXBlLHZhbHVlOjF9LGJhY2tlbmQ6dH0pfWNvbnN0IE9zZT17a2VybmVsTmFtZTpMZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6WkR9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEZzZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7YXhpczpyfT1zO2lmKGUubGVuZ3RoPT09MSlyZXR1cm4gUzEoe2lucHV0czp7aW5wdXQ6ZVswXX0sYmFja2VuZDp0LGF0dHJzOntkaW06cn19KTtjb25zdCBvPWVbMF0uc2hhcGUsaT1lWzBdLmR0eXBlO2UuZm9yRWFjaChoPT57Tm4obyxoLnNoYXBlLCJBbGwgdGVuc29ycyBwYXNzZWQgdG8gc3RhY2sgbXVzdCBoYXZlIG1hdGNoaW5nIHNoYXBlcyIpLEEoaT09PWguZHR5cGUsKCk9PiJBbGwgdGVuc29ycyBwYXNzZWQgdG8gc3RhY2sgbXVzdCBoYXZlIG1hdGNoaW5nIGR0eXBlcyIpfSk7Y29uc3QgYT1bXSxsPWUubWFwKGg9Pntjb25zdCBwPVMxKHtpbnB1dHM6e2lucHV0Omh9LGJhY2tlbmQ6dCxhdHRyczp7ZGltOnJ9fSk7cmV0dXJuIGEucHVzaChwKSxwfSksYz1QRCh7aW5wdXRzOmwsYmFja2VuZDp0LGF0dHJzOntheGlzOnJ9fSk7cmV0dXJuIGEuZm9yRWFjaChoPT50LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKGgpKSxjfWNvbnN0IExzZT17a2VybmVsTmFtZTp6ZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6RnNlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBQc2V7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiXSx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToidmFsdWUiLHR5cGU6ImZsb2F0In1dLHRoaXMub3V0cHV0U2hhcGU9dC5tYXAoKGMsaCk9PmNbMF0rZVtoXStjWzFdKTtjb25zdCByPWUubGVuZ3RoLG89eHQociksaT10Lm1hcChjPT5jWzBdKS5qb2luKCIsIiksYT10Lm1hcCgoYyxoKT0+Y1swXStlW2hdKS5qb2luKCIsIiksbD1bImNvb3Jkc1swXSIsImNvb3Jkc1sxXSIsImNvb3Jkc1syXSIsImNvb3Jkc1szXSJdLnNsaWNlKDAscik7aWYocj09PTEpe3RoaXMudXNlckNvZGU9YAogICAgICAgIGludCBzdGFydCA9ICR7aX07CiAgICAgICAgaW50IGVuZCA9ICR7YX07CgogICAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAgIGludCBvdXRDID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgICBpZiAob3V0QyA8IHN0YXJ0IHx8IG91dEMgPj0gZW5kKSB7CiAgICAgICAgICAgIHNldE91dHB1dCh2YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZXRPdXRwdXQoZ2V0WChvdXRDIC0gc3RhcnQpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIGA7cmV0dXJufXRoaXMudXNlckNvZGU9YAogICAgICAke299IHN0YXJ0ID0gJHtvfSgke2l9KTsKICAgICAgJHtvfSBlbmQgPSAke299KCR7YX0pOwoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICR7b30gb3V0QyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGlmIChhbnkobGVzc1RoYW4ob3V0Qywgc3RhcnQpKSB8fCBhbnkoZ3JlYXRlclRoYW5FcXVhbChvdXRDLCBlbmQpKSkgewogICAgICAgICAgc2V0T3V0cHV0KHZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJHtvfSBjb29yZHMgPSBvdXRDIC0gc3RhcnQ7CiAgICAgICAgICBzZXRPdXRwdXQoZ2V0WCgke2x9KSk7CiAgICAgICAgfQogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyB6c2V7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiXSx0aGlzLnBhY2tlZElucHV0cz0hMCx0aGlzLnBhY2tlZE91dHB1dD0hMCx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToidmFsdWUiLHR5cGU6ImZsb2F0In1dLHRoaXMub3V0cHV0U2hhcGU9dC5tYXAoKHcsYik9PndbMF0rZVtiXSt3WzFdKTtjb25zdCByPWUubGVuZ3RoLG89eHQociksaT10Lm1hcCh3PT53WzBdKS5qb2luKCIsIiksYT10Lm1hcCgodyxiKT0+d1swXStlW2JdKS5qb2luKCIsIiksbD1HbigicmMiLHIpLGM9R24oInNvdXJjZSIsciksaD1gJHtsW3ItMV19IDwgJHt0aGlzLm91dHB1dFNoYXBlW3ItMV19YCxwPXI9PT0xPyJzb3VyY2UiOmB2ZWMyKCR7Yy5zbGljZSgtMikuam9pbigpfSlgLGY9W2Ake299IHJjID0gb3V0cHV0TG9jO2AsYCR7bFtyLTFdfSArPSAxOwogICAgICAgaWYoJHtofSkgewogICAgICBgLHI9PT0xPyIiOmB9CiAgICAgICByYyA9IG91dHB1dExvYzsKICAgICAgICR7bFtyLTJdfSArPSAxOwogICAgICAgaWYoJHtsW3ItMl19IDwgJHt0aGlzLm91dHB1dFNoYXBlW3ItMl19KSB7YCxyPT09MT8iIjpgICAke2xbci0xXX0gKz0gMTsKICAgICAgICAgaWYoJHtofSkge2BdLGc9cj09PTE/InJjIDwgc3RhcnQgfHwgcmMgPj0gZW5kIjoiYW55KGxlc3NUaGFuKHJjLCBzdGFydCkpIHx8IGFueShncmVhdGVyVGhhbkVxdWFsKHJjLCBlbmQpKSI7bGV0IHk9IiI7Zm9yKGxldCB3PTAsYj1yPT09MT8yOjQ7dzxiO3crKyl5Kz1gCiAgICAgICAgJHtmW3ddfQogICAgICAgIGlmICgke2d9KSB7CiAgICAgICAgICByZXN1bHRbJHt3fV0gPSBmbG9hdCh2YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICR7b30gc291cmNlID0gcmMgLSBzdGFydDsKICAgICAgICAgIHJlc3VsdFske3d9XSA9IGdldENoYW5uZWwoZ2V0WCgke2Muam9pbigpfSksICR7cH0pOwogICAgICAgIH0KICAgICAgYDt5Kz1yPT09MT8ifSAiOiJ9fSIsdGhpcy51c2VyQ29kZT1gCiAgICAgIGNvbnN0ICR7b30gc3RhcnQgPSAke299KCR7aX0pOwogICAgICBjb25zdCAke299IGVuZCA9ICR7b30oJHthfSk7CgogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgJHtvfSBvdXRwdXRMb2MgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMC4pOwogICAgICAgICR7eX0KICAgICAgICBzZXRPdXRwdXQocmVzdWx0KTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgSkQ9bj0+e2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse3BhZGRpbmdzOm8sY29uc3RhbnRWYWx1ZTppfT1zO2lmKGNlKHIuc2hhcGUpPT09MCl7Y29uc3QgYz1vLm1hcCgoaCxwKT0+aFswXStyLnNoYXBlW3BdK2hbMV0pO3JldHVybiB6aCh7YmFja2VuZDp0LGF0dHJzOntzaGFwZTpjLHZhbHVlOmksZHR5cGU6ci5kdHlwZX19KX1jb25zdCBhPW9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDS19BUlJBWV9PUEVSQVRJT05TIik/bmV3IHpzZShyLnNoYXBlLG8saSk6bmV3IFBzZShyLnNoYXBlLG8saSksbD1bW2ldXTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oYSxbcl0sci5kdHlwZSxsKX0sTXNlPXtrZXJuZWxOYW1lOk1kLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpKRH07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgQnNlPWAKICBpZihhIDwgMC4wICYmIGZsb29yKGIpIDwgYil7CiAgICByZXR1cm4gTkFOOwogIH0KICBpZiAoYiA9PSAwLjApIHsKICAgIHJldHVybiAxLjA7CiAgfQogIHJldHVybiAocm91bmQobW9kKGIsIDIuMCkpICE9IDEpID8KICAgICAgcG93KGFicyhhKSwgYikgOiBzaWduKGEpICogcG93KGFicyhhKSwgYik7CmAsVnNlPWAKICAvLyBpc01vZFJvdW5kMSBoYXMgMSBmb3IgY29tcG9uZW50cyB3aXRoIHJvdW5kKG1vZChiLCAyLjApKSA9PSAxLCAwIG90aGVyd2lzZS4KICB2ZWM0IGlzTW9kUm91bmQxID0gdmVjNChlcXVhbChyb3VuZChtb2QoYiwgMi4wKSksIGl2ZWM0KDEpKSk7CiAgdmVjNCBtdWx0aXBsaWVyID0gc2lnbihhKSAqIGlzTW9kUm91bmQxICsgKHZlYzQoMS4wKSAtIGlzTW9kUm91bmQxKTsKICB2ZWM0IHJlc3VsdCA9IG11bHRpcGxpZXIgKiBwb3coYWJzKGEpLCBiKTsKCiAgLy8gRW5zdXJlIHRoYXQgYV4wID0gMSwgaW5jbHVkaW5nIDBeMCA9IDEgYXMgdGhpcyBjb3JyZXNwb25kIHRvIFRGIGFuZCBKUwogIGJ2ZWM0IGlzRXhwWmVybyA9IGVxdWFsKGIsIHZlYzQoMC4wKSk7CiAgcmVzdWx0LnIgPSBpc0V4cFplcm8uciA/IDEuMCA6IHJlc3VsdC5yOwogIHJlc3VsdC5nID0gaXNFeHBaZXJvLmcgPyAxLjAgOiByZXN1bHQuZzsKICByZXN1bHQuYiA9IGlzRXhwWmVyby5iID8gMS4wIDogcmVzdWx0LmI7CiAgcmVzdWx0LmEgPSBpc0V4cFplcm8uYSA/IDEuMCA6IHJlc3VsdC5hOwoKICBidmVjNCBpc05hTjEgPSBsZXNzVGhhbihhLCB2ZWM0KDAuMCkpOwogIGJ2ZWM0IGlzTmFOMiA9IGxlc3NUaGFuKGZsb29yKGIpLCBiKTsKICBidmVjNCBpc05hTiA9IGJ2ZWM0KGlzTmFOMS54ICYmIGlzTmFOMi54LCBpc05hTjEueSAmJiBpc05hTjIueSwgaXNOYU4xLnogJiYgaXNOYU4yLnosIGlzTmFOMS53ICYmIGlzTmFOMi53KTsKICBgK0RhK2AKICByZXR1cm4gcmVzdWx0OwpgLFdzZT1Jbih7b3BTbmlwcGV0OkJzZSxwYWNrZWRPcFNuaXBwZXQ6VnNlfSksVXNlPXtrZXJuZWxOYW1lOnN1LGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpXc2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGpzZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtheGlzOm8sa2VlcERpbXM6aX09cyxhPXIuc2hhcGUubGVuZ3RoLGw9W10sYz1RZShvLHIuc2hhcGUpO2xldCBoPWM7Y29uc3QgcD1MdChoLGEpO2xldCBmPXI7cCE9bnVsbCYmKGY9SG4oe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e3Blcm06cH19KSxoPWp0KGgubGVuZ3RoLGEpLGwucHVzaChmKSksQ24oInByb2QiLGgsYSk7bGV0IGc7aWYodC5zaG91bGRFeGVjdXRlT25DUFUoW2ZdKSl7Y29uc3QgeT10LnRleERhdGEuZ2V0KGYuZGF0YUlkKS52YWx1ZXMse291dFZhbHM6dyxvdXRTaGFwZTpiLG91dER0eXBlOnZ9PVdZKGYuc2hhcGUsZi5kdHlwZSx5LGgpO2c9dC5tYWtlVGVuc29ySW5mbyhiLHYsdyl9ZWxzZXtjb25zdFt5LHddPW1uKGYuc2hhcGUsaCksYj1jZSh3KSx2PUNlKHtpbnB1dHM6e3g6Zn0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTpbLTEsYl19fSksUz1hZyhyLmR0eXBlKSwkPUFhKHYsUywicHJvZCIsdCk7Zz1DZSh7aW5wdXRzOnt4OiR9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6eX19KSxsLnB1c2godiksbC5wdXNoKCQpfWlmKGkpe2wucHVzaChnKTtjb25zdCB5PVV0KGcuc2hhcGUsYyk7Zz1DZSh7aW5wdXRzOnt4Omd9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6eX19KX1yZXR1cm4gbC5mb3JFYWNoKHk9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oeSkpLGd9Y29uc3QgR3NlPXtrZXJuZWxOYW1lOlZkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpqc2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIEhzZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7cGFyYW1zTmVzdGVkU3BsaXRzOnIscGFyYW1zRGVuc2VWYWx1ZXM6byxpbmRpY2VzOml9PWUse291dHB1dFJhZ2dlZFJhbms6YX09cyxsPXIubWFwKHY9PnQucmVhZFN5bmModi5kYXRhSWQpKSxjPXIubWFwKHY9PnYuc2hhcGUpLGg9dC5yZWFkU3luYyhvLmRhdGFJZCkscD10LnJlYWRTeW5jKGkuZGF0YUlkKSxbZixnLHldPVVZKGwsYyxoLG8uc2hhcGUsby5kdHlwZSxwLGkuc2hhcGUsYSksdz1mLm1hcCh2PT50Lm1ha2VUZW5zb3JJbmZvKFt2Lmxlbmd0aF0sImludDMyIix2KSksYj10Lm1ha2VUZW5zb3JJbmZvKHksby5kdHlwZSxnKTtyZXR1cm4gdy5jb25jYXQoW2JdKX1jb25zdCBxc2U9e2tlcm5lbE5hbWU6TG0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOkhzZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gS3NlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7c3RhcnRzOnMsbGltaXRzOnIsZGVsdGFzOm99PWUsaT10LnJlYWRTeW5jKHMuZGF0YUlkKSxhPXQucmVhZFN5bmMoci5kYXRhSWQpLGw9dC5yZWFkU3luYyhvLmRhdGFJZCksW2MsaF09alkoaSxzLnNoYXBlLHMuZHR5cGUsYSxyLnNoYXBlLGwsby5zaGFwZSkscD10Lm1ha2VUZW5zb3JJbmZvKFtjLmxlbmd0aF0sImludDMyIixjKSxmPXQubWFrZVRlbnNvckluZm8oW2gubGVuZ3RoXSxzLmR0eXBlLGgpO3JldHVybltwLGZdfWNvbnN0IFhzZT17a2VybmVsTmFtZTpQbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6S3NlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBZc2Uobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3NoYXBlOnIsdmFsdWVzOm8sZGVmYXVsdFZhbHVlOmkscm93UGFydGl0aW9uVGVuc29yczphfT1lLHtyb3dQYXJ0aXRpb25UeXBlczpsfT1zLGM9dC5yZWFkU3luYyhyLmRhdGFJZCksaD10LnJlYWRTeW5jKG8uZGF0YUlkKSxwPXQucmVhZFN5bmMoaS5kYXRhSWQpLGY9YS5tYXAoYj0+dC5yZWFkU3luYyhiLmRhdGFJZCkpLGc9YS5tYXAoYj0+Yi5zaGFwZSksW3ksd109R1koYyxyLnNoYXBlLGgsby5zaGFwZSxvLmR0eXBlLHAsaS5zaGFwZSxmLGcsbCk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oeSxvLmR0eXBlLHcpfWNvbnN0IFFzZT17a2VybmVsTmFtZTp6bSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6WXNlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBlQT1uPT57Y29uc3R7YmFja2VuZDplLGF0dHJzOnR9PW4se3N0YXJ0OnMsc3RvcDpyLHN0ZXA6byxkdHlwZTppfT10LGE9SFkocyxyLG8saSk7cmV0dXJuIGUubWFrZVRlbnNvckluZm8oW2EubGVuZ3RoXSxpLGEpfSxac2U9e2tlcm5lbE5hbWU6TW0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmVBfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBKc2U9InJldHVybiAxLjAgLyB4OyIsZXJlPWl0KHtvcFNuaXBwZXQ6SnNlfSksdHJlPXtrZXJuZWxOYW1lOnJ1LGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzplcmV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IG5yZT1ycitgCiAgcmV0dXJuICh4IDwgMC4wKSA/IDAuMCA6IHg7CmAsc3JlPWAKICB2ZWM0IHJlc3VsdCA9IHggKiB2ZWM0KGdyZWF0ZXJUaGFuRXF1YWwoeCwgdmVjNCgwLjApKSk7CiAgYnZlYzQgaXNOYU4gPSBpc25hbih4KTsKCiAgcmVzdWx0LnIgPSBpc05hTi5yID8geC5yIDogcmVzdWx0LnI7CiAgcmVzdWx0LmcgPSBpc05hTi5nID8geC5nIDogcmVzdWx0Lmc7CiAgcmVzdWx0LmIgPSBpc05hTi5iID8geC5iIDogcmVzdWx0LmI7CiAgcmVzdWx0LmEgPSBpc05hTi5hID8geC5hIDogcmVzdWx0LmE7CgogIHJldHVybiByZXN1bHQ7CmAscnJlPWl0KHtvcFNuaXBwZXQ6bnJlLHBhY2tlZE9wU25pcHBldDpzcmV9KSxvcmU9e2tlcm5lbE5hbWU6b3UsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnJyZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgaXJlPXJyK2AKICByZXR1cm4gKHggPCAwLjApID8gMC4wIDogbWluKDYuMCwgeCk7CmAsYXJlPWAKICB2ZWM0IHJlc3VsdCA9IG1pbih4LCB2ZWM0KDYuKSkgKiB2ZWM0KGdyZWF0ZXJUaGFuRXF1YWwoeCwgdmVjNCgwLjApKSk7CiAgYnZlYzQgaXNOYU4gPSBpc25hbih4KTsKCiAgcmVzdWx0LnIgPSBpc05hTi5yID8geC5yIDogcmVzdWx0LnI7CiAgcmVzdWx0LmcgPSBpc05hTi5nID8geC5nIDogcmVzdWx0Lmc7CiAgcmVzdWx0LmIgPSBpc05hTi5iID8geC5iIDogcmVzdWx0LmI7CiAgcmVzdWx0LmEgPSBpc05hTi5hID8geC5hIDogcmVzdWx0LmE7CgogIHJldHVybiByZXN1bHQ7CmAsbHJlPWl0KHtvcFNuaXBwZXQ6aXJlLHBhY2tlZE9wU25pcHBldDphcmV9KSx1cmU9e2tlcm5lbE5hbWU6aXUsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmxyZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgY3Jle2NvbnN0cnVjdG9yKGUsdCxzLHIsbyl7dGhpcy52YXJpYWJsZU5hbWVzPVsiQSJdLHRoaXMub3V0cHV0U2hhcGU9W107Y29uc3RbaSxhLGwsY109ZTt0aGlzLm91dHB1dFNoYXBlPVtpLHQscyxjXTtjb25zdCBoPVtyJiZ0PjE/YS0xOmEsciYmcz4xP2wtMTpsXSxwPVtyJiZ0PjE/dC0xOnQsciYmcz4xP3MtMTpzXTtsZXQgZjtvP2Y9Iih2ZWMyKHlSQykgKyB2ZWMyKDAuNSkpICogZWZmZWN0aXZlSW5wdXRPdmVyT3V0cHV0UmF0aW9SQyAtIHZlYzIoMC41KSI6Zj0idmVjMih5UkMpICogZWZmZWN0aXZlSW5wdXRPdmVyT3V0cHV0UmF0aW9SQyIsdGhpcy51c2VyQ29kZT1gCiAgICAgIGNvbnN0IHZlYzIgZWZmZWN0aXZlSW5wdXRPdmVyT3V0cHV0UmF0aW9SQyA9IHZlYzIoCiAgICAgICAgICAke2hbMF0vcFswXX0sCiAgICAgICAgICAke2hbMV0vcFsxXX0pOwogICAgICBjb25zdCB2ZWMyIGlucHV0U2hhcGVSQyA9IHZlYzIoJHthfS4wLCAke2x9LjApOwoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWM0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiID0gY29vcmRzWzBdOwogICAgICAgIGludCBkID0gY29vcmRzWzNdOwogICAgICAgIGl2ZWMyIHlSQyA9IGNvb3Jkcy55ejsKCiAgICAgICAgLy8gRnJhY3Rpb25hbCBzb3VyY2UgaW5kZXguCiAgICAgICAgdmVjMiBzb3VyY2VGcmFjSW5kZXhSQyA9ICR7Zn07CgogICAgICAgIC8vIENvbXB1dGUgdGhlIGZvdXIgaW50ZWdlciBpbmRpY2VzLgogICAgICAgIGl2ZWMyIHNvdXJjZUZsb29yUkMgPSBpdmVjMihtYXgoc291cmNlRnJhY0luZGV4UkMsIHZlYzIoMC4wKSkpOwogICAgICAgIGl2ZWMyIHNvdXJjZUNlaWxSQyA9IGl2ZWMyKAogICAgICAgICAgbWluKGlucHV0U2hhcGVSQyAtIDEuMCwgY2VpbChzb3VyY2VGcmFjSW5kZXhSQykpKTsKCiAgICAgICAgZmxvYXQgdG9wTGVmdCA9IGdldEEoYiwgc291cmNlRmxvb3JSQy54LCBzb3VyY2VGbG9vclJDLnksIGQpOwogICAgICAgIGZsb2F0IGJvdHRvbUxlZnQgPSBnZXRBKGIsIHNvdXJjZUNlaWxSQy54LCBzb3VyY2VGbG9vclJDLnksIGQpOwogICAgICAgIGZsb2F0IHRvcFJpZ2h0ID0gZ2V0QShiLCBzb3VyY2VGbG9vclJDLngsIHNvdXJjZUNlaWxSQy55LCBkKTsKICAgICAgICBmbG9hdCBib3R0b21SaWdodCA9IGdldEEoYiwgc291cmNlQ2VpbFJDLngsIHNvdXJjZUNlaWxSQy55LCBkKTsKCiAgICAgICAgdmVjMiBmcmFjUkMgPSBzb3VyY2VGcmFjSW5kZXhSQyAtIHZlYzIoc291cmNlRmxvb3JSQyk7CgogICAgICAgIGZsb2F0IHRvcCA9IHRvcExlZnQgKyAodG9wUmlnaHQgLSB0b3BMZWZ0KSAqIGZyYWNSQy55OwogICAgICAgIGZsb2F0IGJvdHRvbSA9IGJvdHRvbUxlZnQgKyAoYm90dG9tUmlnaHQgLSBib3R0b21MZWZ0KSAqIGZyYWNSQy55OwogICAgICAgIGZsb2F0IG5ld1ZhbHVlID0gdG9wICsgKGJvdHRvbSAtIHRvcCkgKiBmcmFjUkMueDsKCiAgICAgICAgc2V0T3V0cHV0KG5ld1ZhbHVlKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgZHJle2NvbnN0cnVjdG9yKGUsdCxzLHIsbyl7dGhpcy52YXJpYWJsZU5hbWVzPVsiQSJdLHRoaXMucGFja2VkSW5wdXRzPSEwLHRoaXMucGFja2VkT3V0cHV0PSEwLHRoaXMub3V0cHV0U2hhcGU9W107Y29uc3RbaSxhLGwsY109ZTt0aGlzLm91dHB1dFNoYXBlPVtpLHQscyxjXTtjb25zdCBoPVtyJiZ0PjE/YS0xOmEsciYmcz4xP2wtMTpsXSxwPVtyJiZ0PjE/dC0xOnQsciYmcz4xP3MtMTpzXTtsZXQgZjtvP2Y9Iih2ZWMzKHlSQykgKyB2ZWMzKDAuNSkpICogZWZmZWN0aXZlSW5wdXRPdmVyT3V0cHV0UmF0aW9SQyAtIHZlYzMoMC41KSI6Zj0idmVjMyh5UkMpICogZWZmZWN0aXZlSW5wdXRPdmVyT3V0cHV0UmF0aW9SQyIsdGhpcy51c2VyQ29kZT1gCiAgICAgIGNvbnN0IHZlYzMgZWZmZWN0aXZlSW5wdXRPdmVyT3V0cHV0UmF0aW9SQyA9IHZlYzMoCiAgICAgICAgICAke2hbMF0vcFswXX0sCiAgICAgICAgICAke2hbMV0vcFsxXX0sCiAgICAgICAgICAke2hbMV0vcFsxXX0pOwogICAgICBjb25zdCB2ZWMzIGlucHV0U2hhcGVSQyA9IHZlYzMoJHthfS4wLCAke2x9LjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2x9LjApOwoKICAgICAgZmxvYXQgZ2V0QVZhbHVlKGludCBiLCBpbnQgciwgaW50IGMsIGludCBkKSB7CiAgICAgICAgcmV0dXJuIGdldENoYW5uZWwoZ2V0QShiLCByLCBjLCBkKSwgdmVjMihjLCBkKSk7CiAgICAgIH0KCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYiA9IGNvb3Jkc1swXTsKICAgICAgICBpbnQgZCA9IGNvb3Jkc1szXTsKICAgICAgICAvLyBDYWxjdWxhdGUgdmFsdWVzIGZvciBuZXh0IGNvbHVtbiBpbiB5UkMuei4KICAgICAgICBpdmVjMyB5UkMgPSBjb29yZHMueXp6ICsgaXZlYzMoMCwgMCwgMSk7CgogICAgICAgIC8vIEZyYWN0aW9uYWwgc291cmNlIGluZGV4LgogICAgICAgIHZlYzMgc291cmNlRnJhY0luZGV4UkMgPSAke2Z9OwoKICAgICAgICAvLyBDb21wdXRlIHRoZSBmb3VyIGludGVnZXIgaW5kaWNlcy4KICAgICAgICBpdmVjMyBzb3VyY2VGbG9vclJDID0gaXZlYzMobWF4KHNvdXJjZUZyYWNJbmRleFJDLCB2ZWMzKDAuMCkpKTsKICAgICAgICBpdmVjMyBzb3VyY2VDZWlsUkMgPSBpdmVjMygKICAgICAgICAgIG1pbihpbnB1dFNoYXBlUkMgLSAxLjAsIGNlaWwoc291cmNlRnJhY0luZGV4UkMpKSk7CgogICAgICAgIC8vIFNob3VsZCB3ZSBjYWxjdWxhdGUgbmV4dCBjb2x1bW4gYW5kIHJvdyBlbGVtZW50cyBpbiAyeDIgcGFja2VkIGNlbGwuCiAgICAgICAgYm9vbCBoYXNOZXh0Q29sID0gZCA8ICR7Yy0xfTsKICAgICAgICBib29sIGhhc05leHRSb3cgPSBjb29yZHMueiA8ICR7cy0xfTsKCiAgICAgICAgLy8gSW4gcGFyYWxsZWwsIGNvbnN0cnVjdCBmb3VyIGNvcm5lcnMgZm9yIGFsbCBmb3VyIGNvbXBvbmVudHMgaW4KICAgICAgICAvLyBwYWNrZWQgMngyIGNlbGwuCiAgICAgICAgdmVjNCB0b3BMZWZ0ID0gdmVjNCgKICAgICAgICAgIGdldEFWYWx1ZShiLCBzb3VyY2VGbG9vclJDLngsIHNvdXJjZUZsb29yUkMueSwgZCksCiAgICAgICAgICBoYXNOZXh0Q29sID8gZ2V0QVZhbHVlKGIsIHNvdXJjZUZsb29yUkMueCwgc291cmNlRmxvb3JSQy55LCBkICsgMSkKICAgICAgICAgICAgICAgICAgICAgOiAwLjAsCiAgICAgICAgICBoYXNOZXh0Um93ID8gZ2V0QVZhbHVlKGIsIHNvdXJjZUZsb29yUkMueCwgc291cmNlRmxvb3JSQy56LCBkKQogICAgICAgICAgICAgICAgICAgICA6IDAuMCwKICAgICAgICAgIChoYXNOZXh0Um93ICYmIGhhc05leHRDb2wpID8KICAgICAgICAgICAgZ2V0QVZhbHVlKGIsIHNvdXJjZUZsb29yUkMueCwgc291cmNlRmxvb3JSQy56LCBkICsgMSkgOiAwLjApOwoKICAgICAgICB2ZWM0IGJvdHRvbUxlZnQgPSB2ZWM0KAogICAgICAgICAgZ2V0QVZhbHVlKGIsIHNvdXJjZUNlaWxSQy54LCBzb3VyY2VGbG9vclJDLnksIGQpLAogICAgICAgICAgaGFzTmV4dENvbCA/IGdldEFWYWx1ZShiLCBzb3VyY2VDZWlsUkMueCwgc291cmNlRmxvb3JSQy55LCBkICsgMSkKICAgICAgICAgICAgICAgICAgICAgOiAwLjAsCiAgICAgICAgICBoYXNOZXh0Um93ID8gZ2V0QVZhbHVlKGIsIHNvdXJjZUNlaWxSQy54LCBzb3VyY2VGbG9vclJDLnosIGQpCiAgICAgICAgICAgICAgICAgICAgIDogMC4wLAogICAgICAgICAgKGhhc05leHRSb3cgJiYgaGFzTmV4dENvbCkgPwogICAgICAgICAgICBnZXRBVmFsdWUoYiwgc291cmNlQ2VpbFJDLngsIHNvdXJjZUZsb29yUkMueiwgZCArIDEpIDogMC4wKTsKCiAgICAgICAgdmVjNCB0b3BSaWdodCA9IHZlYzQoCiAgICAgICAgICBnZXRBVmFsdWUoYiwgc291cmNlRmxvb3JSQy54LCBzb3VyY2VDZWlsUkMueSwgZCksCiAgICAgICAgICBoYXNOZXh0Q29sID8gZ2V0QVZhbHVlKGIsIHNvdXJjZUZsb29yUkMueCwgc291cmNlQ2VpbFJDLnksIGQgKyAxKQogICAgICAgICAgICAgICAgICAgICA6IDAuMCwKICAgICAgICAgIGhhc05leHRSb3cgPyBnZXRBVmFsdWUoYiwgc291cmNlRmxvb3JSQy54LCBzb3VyY2VDZWlsUkMueiwgZCkKICAgICAgICAgICAgICAgICAgICAgOiAwLjAsCiAgICAgICAgICAoaGFzTmV4dFJvdyAmJiBoYXNOZXh0Q29sKSA/CiAgICAgICAgICAgIGdldEFWYWx1ZShiLCBzb3VyY2VGbG9vclJDLngsIHNvdXJjZUNlaWxSQy56LCBkICsgMSkgOiAwLjApOwoKICAgICAgICB2ZWM0IGJvdHRvbVJpZ2h0ID0gdmVjNCgKICAgICAgICAgIGdldEFWYWx1ZShiLCBzb3VyY2VDZWlsUkMueCwgc291cmNlQ2VpbFJDLnksIGQpLAogICAgICAgICAgaGFzTmV4dENvbCA/IGdldEFWYWx1ZShiLCBzb3VyY2VDZWlsUkMueCwgc291cmNlQ2VpbFJDLnksIGQgKyAxKQogICAgICAgICAgICAgICAgICAgICA6IDAuMCwKICAgICAgICAgIGhhc05leHRSb3cgPyBnZXRBVmFsdWUoYiwgc291cmNlQ2VpbFJDLngsIHNvdXJjZUNlaWxSQy56LCBkKQogICAgICAgICAgICAgICAgICAgICA6IDAuMCwKICAgICAgICAgIChoYXNOZXh0Um93ICYmIGhhc05leHRDb2wpID8KICAgICAgICAgICAgZ2V0QVZhbHVlKGIsIHNvdXJjZUNlaWxSQy54LCBzb3VyY2VDZWlsUkMueiwgZCArIDEpIDogMC4wKTsKCiAgICAgICAgdmVjMyBmcmFjUkMgPSBzb3VyY2VGcmFjSW5kZXhSQyAtIHZlYzMoc291cmNlRmxvb3JSQyk7CgogICAgICAgIHZlYzQgdG9wID0gbWl4KHRvcExlZnQsIHRvcFJpZ2h0LCBmcmFjUkMueXl6eik7CiAgICAgICAgdmVjNCBib3R0b20gPSBtaXgoYm90dG9tTGVmdCwgYm90dG9tUmlnaHQsIGZyYWNSQy55eXp6KTsKICAgICAgICB2ZWM0IG5ld1ZhbHVlID0gbWl4KHRvcCwgYm90dG9tLCBmcmFjUkMueCk7CgogICAgICAgIHNldE91dHB1dChuZXdWYWx1ZSk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGhyZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7aW1hZ2VzOnJ9PWUse2FsaWduQ29ybmVyczpvLGhhbGZQaXhlbENlbnRlcnM6aSxzaXplOmF9PXMsW2wsY109YSxoPW9lKCkuZ2V0Qm9vbCgiV0VCR0xfUEFDS19JTUFHRV9PUEVSQVRJT05TIik/bmV3IGRyZShyLnNoYXBlLGwsYyxvLGkpOm5ldyBjcmUoci5zaGFwZSxsLGMsbyxpKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oaCxbcl0sImZsb2F0MzIiKX1jb25zdCBwcmU9e2tlcm5lbE5hbWU6amQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmhyZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgZnJle2NvbnN0cnVjdG9yKGUsdCxzKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJkeSJdLHRoaXMub3V0cHV0U2hhcGU9W10sdGhpcy5vdXRwdXRTaGFwZT10O2NvbnN0WyxyLG9dPXQsWyxpLGFdPWUsbD1bcyYmaT4xP3ItMTpyLHMmJmE+MT9vLTE6b10sYz1bcyYmaT4xP2ktMTppLHMmJmE+MT9hLTE6YV0saD1sWzBdL2NbMF0scD1sWzFdL2NbMV0sZj0xL2gsZz0xL3AseT1NYXRoLmNlaWwoZikqMisyLHc9TWF0aC5jZWlsKGcpKjIrMjt0aGlzLnVzZXJDb2RlPWAKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWM0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiID0gY29vcmRzWzBdOwogICAgICAgIGludCBkID0gY29vcmRzWzNdOwogICAgICAgIGludCByID0gY29vcmRzWzFdOwogICAgICAgIGludCBjID0gY29vcmRzWzJdOwoKICAgICAgICBmbG9hdCBhY2N1bXVsYXRvciA9IDAuMDsKCiAgICAgICAgY29uc3QgZmxvYXQgaGVpZ2h0U2NhbGUgPSBmbG9hdCgke2h9KTsKICAgICAgICBjb25zdCBmbG9hdCB3aWR0aFNjYWxlID0gZmxvYXQoJHtwfSk7CgogICAgICAgIGNvbnN0IGZsb2F0IGludkhlaWdodFNjYWxlID0gZmxvYXQoJHtmfSk7CiAgICAgICAgY29uc3QgZmxvYXQgaW52V2lkdGhTY2FsZSA9IGZsb2F0KCR7Z30pOwoKICAgICAgICBjb25zdCBpbnQgd2luSGVpZ2h0ID0gaW50KCR7eX0pOwogICAgICAgIGNvbnN0IGludCB3aW5XaWR0aCA9IGludCgke3d9KTsKCiAgICAgICAgLy8gQ29tcHV0ZSBib3VuZHMgZm9yIHdoZXJlIGluIGR5IHdlIHdpbGwgbG9vawogICAgICAgIGZsb2F0IHN0YXJ0UkxlcnAgPSBmbG9vcihmbG9hdChyKSAqIGludkhlaWdodFNjYWxlKTsKICAgICAgICBpbnQgc3RhcnREeVIgPSBpbnQoc3RhcnRSTGVycCAtIGZsb2F0KHdpbkhlaWdodCAvIDIpKTsKCiAgICAgICAgZmxvYXQgc3RhcnRDTGVycCA9IGZsb29yKGZsb2F0KGMpICogaW52V2lkdGhTY2FsZSk7CiAgICAgICAgaW50IHN0YXJ0RHlDID0gaW50KHN0YXJ0Q0xlcnAgLSBmbG9hdCh3aW5XaWR0aCAvIDIpKTsKCiAgICAgICAgLy8gTG9vcCBvdmVyIGR5CiAgICAgICAgZm9yIChpbnQgZHlST2Zmc2V0ID0gMDsgZHlST2Zmc2V0IDwgd2luSGVpZ2h0OyBkeVJPZmZzZXQrKykgewogICAgICAgICAgaW50IGR5UiA9IGR5Uk9mZnNldCArIHN0YXJ0RHlSOwoKICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgdGhlIHdpbmRvdyBleGNlZWRpbmcgdGhlIGJvdW5kcyBvZiBkeQogICAgICAgICAgaWYgKGR5UiA8IDAgfHwgZHlSID49ICR7aX0pIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yIChpbnQgZHlDT2Zmc2V0ID0gMDsgZHlDT2Zmc2V0IDwgd2luV2lkdGg7IGR5Q09mZnNldCsrKSB7CiAgICAgICAgICAgIGludCBkeUMgPSBkeUNPZmZzZXQgKyBzdGFydER5QzsKCiAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgdGhlIHdpbmRvdyBleGNlZWRpbmcgdGhlIGJvdW5kcyBvZiBkeQogICAgICAgICAgICBpZiAoZHlDIDwgMCB8fCBkeUMgPj0gJHthfSkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmbG9hdCBkeFIgPSBmbG9hdChkeVIpICogaGVpZ2h0U2NhbGU7CiAgICAgICAgICAgIGludCB0b3BEeFJJbmRleCA9IGludChmbG9vcihkeFIpKTsKICAgICAgICAgICAgaW50IGJvdHRvbUR4UkluZGV4ID0gaW50KG1pbihjZWlsKGR4UiksICR7ci0xfS4wKSk7CiAgICAgICAgICAgIGZsb2F0IGR4UkxlcnAgPSBkeFIgLSBmbG9hdCh0b3BEeFJJbmRleCk7CiAgICAgICAgICAgIGZsb2F0IGludmVyc2VEeFJMZXJwID0gMS4wIC0gZHhSTGVycDsKCiAgICAgICAgICAgIGZsb2F0IGR4QyA9IGZsb2F0KGR5QykgKiB3aWR0aFNjYWxlOwogICAgICAgICAgICBpbnQgbGVmdER4Q0luZGV4ID0gaW50KGZsb29yKGR4QykpOwogICAgICAgICAgICBpbnQgcmlnaHREeENJbmRleCA9IGludChtaW4oY2VpbChkeEMpLCAke28tMX0uMCkpOwogICAgICAgICAgICBmbG9hdCBkeENMZXJwID0gZHhDIC0gZmxvYXQobGVmdER4Q0luZGV4KTsKICAgICAgICAgICAgZmxvYXQgaW52ZXJzZUR4Q0xlcnAgPSAxLjAgLSBkeENMZXJwOwoKICAgICAgICAgICAgaWYgKHIgPT0gdG9wRHhSSW5kZXggJiYgYyA9PSBsZWZ0RHhDSW5kZXgpIHsKICAgICAgICAgICAgICAvLyB0b3BMZWZ0CiAgICAgICAgICAgICAgYWNjdW11bGF0b3IgKz0KICAgICAgICAgICAgICAgIGdldER5KGIsIGR5UiwgZHlDLCBkKSAqIGludmVyc2VEeFJMZXJwICogaW52ZXJzZUR4Q0xlcnA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyID09IHRvcER4UkluZGV4ICYmIGMgPT0gcmlnaHREeENJbmRleCkgewogICAgICAgICAgICAgIC8vIHRvcFJpZ2h0CiAgICAgICAgICAgICAgYWNjdW11bGF0b3IgKz0gZ2V0RHkoYiwgZHlSLCBkeUMsIGQpICogaW52ZXJzZUR4UkxlcnAgKiBkeENMZXJwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAociA9PSBib3R0b21EeFJJbmRleCAmJiBjID09IGxlZnREeENJbmRleCkgewogICAgICAgICAgICAgIC8vIGJvdHRvbUxlZnQKICAgICAgICAgICAgICBhY2N1bXVsYXRvciArPSBnZXREeShiLCBkeVIsIGR5QywgZCkgKiBkeFJMZXJwICogaW52ZXJzZUR4Q0xlcnA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyID09IGJvdHRvbUR4UkluZGV4ICYmIGMgPT0gcmlnaHREeENJbmRleCkgewogICAgICAgICAgICAgIC8vIGJvdHRvbVJpZ2h0CiAgICAgICAgICAgICAgYWNjdW11bGF0b3IgKz0gZ2V0RHkoYiwgZHlSLCBkeUMsIGQpICogZHhSTGVycCAqIGR4Q0xlcnA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gRW5kIGxvb3Agb3ZlciBkeQoKICAgICAgICBzZXRPdXRwdXQoYWNjdW11bGF0b3IpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBtcmUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2ltYWdlczpyLGR5Om99PWUse2FsaWduQ29ybmVyczppfT1zLGE9bmV3IGZyZShvLnNoYXBlLHIuc2hhcGUsaSk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGEsW29dLG8uZHR5cGUpfWNvbnN0IGdyZT17a2VybmVsTmFtZTpXbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6bXJlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyB5cmV7Y29uc3RydWN0b3IoZSx0LHMscixvKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl0sdGhpcy5vdXRwdXRTaGFwZT1bXTtjb25zdFtpLGEsbCxjXT1lO3RoaXMub3V0cHV0U2hhcGU9W2ksdCxzLGNdO2NvbnN0IGg9W3ImJnQ+MT9hLTE6YSxyJiZzPjE/bC0xOmxdLHA9W3ImJnQ+MT90LTE6dCxyJiZzPjE/cy0xOnNdLGY9cj8iMC41IjoiMC4wIjtsZXQgZztvP2c9Im1heCgodmVjMih5UkMpICsgdmVjMigwLjUpKSAqIGVmZmVjdGl2ZUlucHV0T3Zlck91dHB1dFJhdGlvUkMsIHZlYzIoMC4wKSkiOmc9InZlYzIoeVJDKSAqIGVmZmVjdGl2ZUlucHV0T3Zlck91dHB1dFJhdGlvUkMiLHRoaXMudXNlckNvZGU9YAogICAgICBjb25zdCB2ZWMyIGVmZmVjdGl2ZUlucHV0T3Zlck91dHB1dFJhdGlvUkMgPSB2ZWMyKAogICAgICAgICAgJHtoWzBdL3BbMF19LAogICAgICAgICAgJHtoWzFdL3BbMV19KTsKICAgICAgY29uc3QgdmVjMiBpbnB1dFNoYXBlUkMgPSB2ZWMyKCR7YX0uMCwgJHtsfS4wKTsKCiAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBpbnQgYiA9IGNvb3Jkc1swXTsKICAgICAgICBpbnQgZCA9IGNvb3Jkc1szXTsKICAgICAgICBpdmVjMiB5UkMgPSBjb29yZHMueXo7CgogICAgICAgIC8vIEZyYWN0aW9uYWwgc291cmNlIGluZGV4LgogICAgICAgIHZlYzIgc291cmNlRnJhY0luZGV4UkMgPSAke2d9OwoKICAgICAgICAvLyBDb21wdXRlIHRoZSBjb29yZGluYXRvcnMgb2YgbmVhcmVzdCBuZWlnaGJvciBwb2ludC4KICAgICAgICBpdmVjMiBzb3VyY2VOZWFyZXN0UkMgPSBpdmVjMigKICAgICAgICAgIG1pbihpbnB1dFNoYXBlUkMgLSAxLjAsIGZsb29yKHNvdXJjZUZyYWNJbmRleFJDICsgJHtmfSkpKTsKICAgICAgICBmbG9hdCBuZXdWYWx1ZSA9IGdldEEoYiwgc291cmNlTmVhcmVzdFJDLngsIHNvdXJjZU5lYXJlc3RSQy55LCBkKTsKCiAgICAgICAgc2V0T3V0cHV0KG5ld1ZhbHVlKTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgeHJle2NvbnN0cnVjdG9yKGUsdCxzLHIsbyl7dGhpcy52YXJpYWJsZU5hbWVzPVsiQSJdLHRoaXMucGFja2VkSW5wdXRzPSEwLHRoaXMucGFja2VkT3V0cHV0PSEwLHRoaXMub3V0cHV0U2hhcGU9W107Y29uc3RbaSxhLGwsY109ZTt0aGlzLm91dHB1dFNoYXBlPVtpLHQscyxjXTtjb25zdCBoPVtyJiZ0PjE/YS0xOmEsciYmcz4xP2wtMTpsXSxwPVtyJiZ0PjE/dC0xOnQsciYmcz4xP3MtMTpzXSxmPXI/IjAuNSI6IjAuMCI7bGV0IGc7bz9nPSJtYXgoKHZlYzMoeVJDKSArIHZlYzMoMC41KSkgKiBlZmZlY3RpdmVJbnB1dE92ZXJPdXRwdXRSYXRpb1JDLCB2ZWMzKDAuMCkpIjpnPSJ2ZWMzKHlSQykgKiBlZmZlY3RpdmVJbnB1dE92ZXJPdXRwdXRSYXRpb1JDIix0aGlzLnVzZXJDb2RlPWAKICAgICAgY29uc3QgdmVjMyBlZmZlY3RpdmVJbnB1dE92ZXJPdXRwdXRSYXRpb1JDID0gdmVjMygKICAgICAgICAgICR7aFswXS9wWzBdfSwKICAgICAgICAgICR7aFsxXS9wWzFdfSwKICAgICAgICAgICR7aFsxXS9wWzFdfSk7CiAgICAgIGNvbnN0IHZlYzMgaW5wdXRTaGFwZVJDID0gdmVjMygke2F9LjAsICR7bH0uMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7bH0uMCk7CgogICAgICBmbG9hdCBnZXRBVmFsdWUoaW50IGIsIGludCByLCBpbnQgYywgaW50IGQpIHsKICAgICAgICByZXR1cm4gZ2V0Q2hhbm5lbChnZXRBKGIsIHIsIGMsIGQpLCB2ZWMyKGMsIGQpKTsKICAgICAgfQoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWM0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiID0gY29vcmRzWzBdOwogICAgICAgIGludCBkID0gY29vcmRzWzNdOwogICAgICAgIC8vIENhbGN1bGF0ZSB2YWx1ZXMgZm9yIG5leHQgY29sdW1uIGluIHlSQy56LgogICAgICAgIGl2ZWMzIHlSQyA9IGNvb3Jkcy55enogKyBpdmVjMygwLCAwLCAxKTsKCiAgICAgICAgLy8gRnJhY3Rpb25hbCBzb3VyY2UgaW5kZXguCiAgICAgICAgdmVjMyBzb3VyY2VGcmFjSW5kZXhSQyA9ICR7Z307CgogICAgICAgIC8vIENvbXB1dGUgdGhlIGNvb3JkaW5hdG9ycyBvZiBuZWFyZXN0IG5laWdoYm9yIHBvaW50LgogICAgICAgIGl2ZWMzIHNvdXJjZU5lYXJlc3RSQyA9IGl2ZWMzKAogICAgICAgICAgbWluKGlucHV0U2hhcGVSQyAtIDEuMCwgZmxvb3Ioc291cmNlRnJhY0luZGV4UkMgKyAke2Z9KSkpOwoKICAgICAgICAvLyBTaG91bGQgd2UgY2FsY3VsYXRlIG5leHQgY29sdW1uIGFuZCByb3cgZWxlbWVudHMgaW4gMngyIHBhY2tlZCBjZWxsLgogICAgICAgIGJvb2wgaGFzTmV4dENvbCA9IGQgPCAke2MtMX07CiAgICAgICAgYm9vbCBoYXNOZXh0Um93ID0gY29vcmRzLnogPCAke3MtMX07CgogICAgICAgIHZlYzQgbmV3VmFsdWUgPSB2ZWM0KAogICAgICAgICAgZ2V0QVZhbHVlKGIsIHNvdXJjZU5lYXJlc3RSQy54LCBzb3VyY2VOZWFyZXN0UkMueSwgZCksCiAgICAgICAgICBoYXNOZXh0Q29sID8gZ2V0QVZhbHVlKGIsIHNvdXJjZU5lYXJlc3RSQy54LCBzb3VyY2VOZWFyZXN0UkMueSwgZCArIDEpCiAgICAgICAgICAgICAgICAgICAgIDogMC4wLAogICAgICAgICAgaGFzTmV4dFJvdyA/IGdldEFWYWx1ZShiLCBzb3VyY2VOZWFyZXN0UkMueCwgc291cmNlTmVhcmVzdFJDLnosIGQpCiAgICAgICAgICAgICAgICAgICAgIDogMC4wLAogICAgICAgICAgKGhhc05leHRSb3cgJiYgaGFzTmV4dENvbCkgPwogICAgICAgICAgICBnZXRBVmFsdWUoYiwgc291cmNlTmVhcmVzdFJDLngsIHNvdXJjZU5lYXJlc3RSQy56LCBkICsgMSkgOiAwLjApOwoKICAgICAgICBzZXRPdXRwdXQobmV3VmFsdWUpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBicmUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se2ltYWdlczpyfT1lLHthbGlnbkNvcm5lcnM6byxoYWxmUGl4ZWxDZW50ZXJzOmksc2l6ZTphfT1zLFtsLGNdPWEsaD1vZSgpLmdldEJvb2woIldFQkdMX1BBQ0tfSU1BR0VfT1BFUkFUSU9OUyIpP25ldyB4cmUoci5zaGFwZSxsLGMsbyxpKTpuZXcgeXJlKHIuc2hhcGUsbCxjLG8saSk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGgsW3JdLHIuZHR5cGUpfWNvbnN0IHdyZT17a2VybmVsTmFtZTpVZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6YnJlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyB2cmV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudmFyaWFibGVOYW1lcz1bImR5Il0sdGhpcy5vdXRwdXRTaGFwZT1bXSx0aGlzLm91dHB1dFNoYXBlPXQ7Y29uc3RbLHIsb109dCxbLGksYV09ZSxsPVtzJiZpPjE/ci0xOnIscyYmYT4xP28tMTpvXSxjPVtzJiZpPjE/aS0xOmkscyYmYT4xP2EtMTphXSxoPWxbMF0vY1swXSxwPWxbMV0vY1sxXSxmPTEvaCxnPTEvcCx5PU1hdGguY2VpbChmKSoyKzIsdz1NYXRoLmNlaWwoZykqMisyO3RoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgaXZlYzQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgaW50IGIgPSBjb29yZHNbMF07CiAgICAgICAgaW50IGQgPSBjb29yZHNbM107CiAgICAgICAgaW50IHIgPSBjb29yZHNbMV07CiAgICAgICAgaW50IGMgPSBjb29yZHNbMl07CgogICAgICAgIGZsb2F0IGFjY3VtdWxhdG9yID0gMC4wOwoKICAgICAgICBjb25zdCBmbG9hdCBoZWlnaHRTY2FsZSA9IGZsb2F0KCR7aH0pOwogICAgICAgIGNvbnN0IGZsb2F0IHdpZHRoU2NhbGUgPSBmbG9hdCgke3B9KTsKCiAgICAgICAgY29uc3QgZmxvYXQgaW52SGVpZ2h0U2NhbGUgPSBmbG9hdCgke2Z9KTsKICAgICAgICBjb25zdCBmbG9hdCBpbnZXaWR0aFNjYWxlID0gZmxvYXQoJHtnfSk7CgogICAgICAgIGNvbnN0IGludCB3aW5IZWlnaHQgPSBpbnQoJHt5fSk7CiAgICAgICAgY29uc3QgaW50IHdpbldpZHRoID0gaW50KCR7d30pOwoKICAgICAgICAvLyBDb21wdXRlIGJvdW5kcyBmb3Igd2hlcmUgaW4gZHkgd2Ugd2lsbCBsb29rCiAgICAgICAgZmxvYXQgc3RhcnRSTGVycCA9IGZsb29yKGZsb2F0KHIpICogaW52SGVpZ2h0U2NhbGUpOwogICAgICAgIGludCBzdGFydER5UiA9IGludChmbG9vcihzdGFydFJMZXJwIC0gZmxvYXQod2luSGVpZ2h0IC8gMikpKTsKCiAgICAgICAgZmxvYXQgc3RhcnRDTGVycCA9IGZsb29yKGZsb2F0KGMpICogaW52V2lkdGhTY2FsZSk7CiAgICAgICAgaW50IHN0YXJ0RHlDID0gaW50KGZsb29yKHN0YXJ0Q0xlcnAgLSBmbG9hdCh3aW5XaWR0aCAvIDIpKSk7CgogICAgICAgIC8vIExvb3Agb3ZlciBkeQogICAgICAgIGZvciAoaW50IGR5Uk9mZnNldCA9IDA7IGR5Uk9mZnNldCA8IHdpbkhlaWdodDsgZHlST2Zmc2V0KyspIHsKICAgICAgICAgIGludCBkeVIgPSBkeVJPZmZzZXQgKyBzdGFydER5UjsKCiAgICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IHRoZSB3aW5kb3cgZXhjZWVkaW5nIHRoZSBib3VuZHMgb2YgZHkKICAgICAgICAgIGlmIChkeVIgPCAwIHx8IGR5UiA+PSAke2l9KSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAoaW50IGR5Q09mZnNldCA9IDA7IGR5Q09mZnNldCA8IHdpbldpZHRoOyBkeUNPZmZzZXQrKykgewogICAgICAgICAgICBpbnQgZHlDID0gZHlDT2Zmc2V0ICsgc3RhcnREeUM7CgogICAgICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IHRoZSB3aW5kb3cgZXhjZWVkaW5nIHRoZSBib3VuZHMgb2YgZHkKICAgICAgICAgICAgaWYgKGR5QyA8IDAgfHwgZHlDID49ICR7YX0pIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZmxvYXQgc291cmNlRnJhY1JvdyA9CiAgICAgICAgICAgICAgZmxvYXQoJHtsWzBdfSkgKgogICAgICAgICAgICAgICAgKGZsb2F0KGR5UikgLyBmbG9hdCgke2NbMF19KSk7CgogICAgICAgICAgICBmbG9hdCBzb3VyY2VGcmFjQ29sID0KICAgICAgICAgICAgICAgIGZsb2F0KCR7bFsxXX0pICoKICAgICAgICAgICAgICAgICAgKGZsb2F0KGR5QykgLyBmbG9hdCgke2NbMV19KSk7CgogICAgICAgICAgICBpbnQgc291cmNlTmVhcmVzdFJvdyA9IGludChtaW4oCiAgICAgICAgICAgICAgICBmbG9hdChpbnQoJHtyfSkgLSAxKSwKICAgICAgICAgICAgICAgICR7c30gPyBmbG9hdChyb3VuZChzb3VyY2VGcmFjUm93KSkgOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQoZmxvb3Ioc291cmNlRnJhY1JvdykpKSk7CgogICAgICAgICAgICBpbnQgc291cmNlTmVhcmVzdENvbCA9IGludChtaW4oCiAgICAgICAgICAgICAgICBmbG9hdChpbnQoJHtvfSkgLSAxKSwKICAgICAgICAgICAgICAgICR7c30gPyBmbG9hdChyb3VuZChzb3VyY2VGcmFjQ29sKSkgOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQoZmxvb3Ioc291cmNlRnJhY0NvbCkpKSk7CgogICAgICAgICAgICBpZiAociA9PSBzb3VyY2VOZWFyZXN0Um93ICYmIGMgPT0gc291cmNlTmVhcmVzdENvbCkgewogICAgICAgICAgICAgIGFjY3VtdWxhdG9yICs9IGdldER5KGIsIGR5UiwgZHlDLCBkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBFbmQgbG9vcCBvdmVyIGR5CgogICAgICAgIHNldE91dHB1dChhY2N1bXVsYXRvcik7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFNyZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7aW1hZ2VzOnIsZHk6b309ZSx7YWxpZ25Db3JuZXJzOml9PXMsYT1uZXcgdnJlKG8uc2hhcGUsci5zaGFwZSxpKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oYSxbb10sby5kdHlwZSl9Y29uc3QgTnJlPXtrZXJuZWxOYW1lOlZtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpTcmV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIGtyZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiXTtjb25zdCBzPWUubGVuZ3RoO2lmKHM+NCl0aHJvdyBuZXcgRXJyb3IoYFdlYkdMIGJhY2tlbmQ6IFJldmVyc2Ugb2YgcmFuay0ke3N9IHRlbnNvciBpcyBub3QgeWV0IHN1cHBvcnRlZGApO2lmKHRoaXMub3V0cHV0U2hhcGU9ZSxzPT09MSl7dGhpcy51c2VyQ29kZT1gCiAgICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICAgaW50IGNvb3JkID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgICBzZXRPdXRwdXQoZ2V0WCgke2VbMF19IC0gY29vcmQgLSAxKSk7CiAgICAgICAgfQogICAgICBgO3JldHVybn1jb25zdCByPWE9PnQuaW5kZXhPZihhKSE9PS0xJiZlW2FdIT09MT9gJHtlW2FdfSAtIGNvb3Jkc1ske2F9XSAtIDFgOmBjb29yZHNbJHthfV1gLG89ZS5tYXAoKGEsbCk9PnIobCkpLmpvaW4oIiwiKSxpPXh0KHMpO3RoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgJHtpfSBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICBzZXRPdXRwdXQoZ2V0WCgke299KSk7CiAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIENyZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiXSx0aGlzLnBhY2tlZElucHV0cz0hMCx0aGlzLnBhY2tlZE91dHB1dD0hMDtjb25zdCBzPWUubGVuZ3RoO2lmKHM+NCl0aHJvdyBuZXcgRXJyb3IoYFdlYkdMIGJhY2tlbmQ6IFJldmVyc2Ugb2YgcmFuay0ke3N9IHRlbnNvciBpcyBub3QgeWV0IHN1cHBvcnRlZGApO3RoaXMub3V0cHV0U2hhcGU9ZTtjb25zdCByPUduKCJyYyIscyksbz1gJHtyW3MtMV19ICsgMSA8ICR7dGhpcy5vdXRwdXRTaGFwZVtzLTFdfWAsaT1gJHtyW3MtMl19ICsgMSA8ICR7dGhpcy5vdXRwdXRTaGFwZVtzLTJdfWAsYT14dChzKTtzPT09MT90aGlzLnVzZXJDb2RlPWAKICAgICAgICB2b2lkIG1haW4oKXsKICAgICAgICAgIGludCByYyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgICAgdmVjNCByZXN1bHQgPSB2ZWM0KDAuKTsKICAgICAgICAgIHJlc3VsdC5yID0gZ2V0Q2hhbm5lbChnZXRYKCR7ZVswXX0gLSByYyAtIDEpLAogICAgICAgICAgICAke2VbMF19IC0gcmMgLSAxKTsKICAgICAgICAgIGlmKCR7b30pewogICAgICAgICAgICAgIHJlc3VsdC5nID0gZ2V0Q2hhbm5lbChnZXRYKCR7ZVswXX0gLSAocmMgICsgMSkgLSAxKSwKICAgICAgICAgICAgICAgICR7ZVswXX0gLSAocmMgICsgMSkgLSAxKTsKICAgICAgICAgIH0KICAgICAgICAgIHNldE91dHB1dChyZXN1bHQpOwogICAgICAgIH0KICAgICAgYDp0aGlzLnVzZXJDb2RlPWAKICAgICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgICAke2F9IHJjID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMC4pOwogICAgICAgICAgcmVzdWx0LnIgPSAke2woci5zbGljZSgpKX07CiAgICAgICAgICBpZigke299KXsKICAgICAgICAgICAgcmVzdWx0LmcgPSAke2Moci5zbGljZSgpKX07CiAgICAgICAgICB9CiAgICAgICAgICBpZigke2l9KSB7CiAgICAgICAgICAgIHJlc3VsdC5iID0gJHtoKHIuc2xpY2UoKSl9OwogICAgICAgICAgICBpZigke299KSB7CiAgICAgICAgICAgICAgcmVzdWx0LmEgPSAke3Aoci5zbGljZSgpKX07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHNldE91dHB1dChyZXN1bHQpOwogICAgICAgIH0KICAgIGA7ZnVuY3Rpb24gbCh5KXtyZXR1cm4gZih5KX1mdW5jdGlvbiBjKHkpe3JldHVybiB5W3MtMV09IigiK3lbcy0xXSsiICsgMSkiLGYoeSl9ZnVuY3Rpb24gaCh5KXtyZXR1cm4geVtzLTJdPSIoIit5W3MtMl0rIiArIDEpIixmKHkpfWZ1bmN0aW9uIHAoeSl7cmV0dXJuIHlbcy0xXT0iKCIreVtzLTFdKyIgKyAxKSIseVtzLTJdPSIoIit5W3MtMl0rIiArIDEpIixmKHkpfWZ1bmN0aW9uIGYoeSl7Y29uc3Qgdz1lLm1hcCgoUywkKT0+ZygkLHkpKSxiPXcuam9pbigiLCIpLHY9dy5zbGljZSgtMikuam9pbigiLCIpO3JldHVybmBnZXRDaGFubmVsKGdldFgoJHtifSksIHZlYzIoJHt2fSkpYH1mdW5jdGlvbiBnKHksdyl7cmV0dXJuIHQuaW5kZXhPZih5KSE9PS0xJiZlW3ldIT09MT9gJHtlW3ldfSAtICR7d1t5XX0gLSAxYDpgJHt3W3ldfWB9fX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiAkcmUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7ZGltczpvfT1zLGk9ci5zaGFwZS5sZW5ndGgsYT1RZShvLHIuc2hhcGUpO2lmKGk9PT0wKXJldHVybiBOcyh7aW5wdXRzOnt4OnJ9LGJhY2tlbmQ6dH0pO2NvbnN0IGw9b2UoKS5nZXRCb29sKCJXRUJHTF9QQUNLX0FSUkFZX09QRVJBVElPTlMiKT9uZXcgQ3JlKHIuc2hhcGUsYSk6bmV3IGtyZShyLnNoYXBlLGEpO3JldHVybiB0LnJ1bldlYkdMUHJvZ3JhbShsLFtyXSxyLmR0eXBlKX1jb25zdCBJcmU9e2tlcm5lbE5hbWU6R2QsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOiRyZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgVHJle2NvbnN0cnVjdG9yKGUsdCl7dGhpcy52YXJpYWJsZU5hbWVzPVsiSW1hZ2UiXSx0aGlzLm91dHB1dFNoYXBlPVtdLHRoaXMuY3VzdG9tVW5pZm9ybXM9W3tuYW1lOiJwYXJhbXMiLHR5cGU6InZlYzQifV07Y29uc3Qgcz1lWzFdLHI9ZVsyXTt0aGlzLm91dHB1dFNoYXBlPWU7bGV0IG89IiI7dHlwZW9mIHQ9PSJudW1iZXIiP289YGZsb2F0IG91dHB1dFZhbHVlID0gJHt0LnRvRml4ZWQoMil9O2A6bz1gCiAgICAgICAgdmVjMyBmaWxsID0gdmVjMygke3Quam9pbigiLCIpfSk7CiAgICAgICAgZmxvYXQgb3V0cHV0VmFsdWUgPSBmaWxsW2Nvb3Jkc1szXV07YCx0aGlzLnVzZXJDb2RlPWAKICAgICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICAgIGludCB4ID0gY29vcmRzWzJdOwogICAgICAgICAgaW50IHkgPSBjb29yZHNbMV07CiAgICAgICAgICBmbG9hdCBjb29yZFhGbG9hdCA9IChmbG9hdCh4KSAtIHBhcmFtc1swXSkgKiBwYXJhbXNbM10gLQogICAgICAgICAgICAoZmxvYXQoeSkgLSBwYXJhbXNbMV0pICogcGFyYW1zWzJdOwogICAgICAgICAgZmxvYXQgY29vcmRZRmxvYXQgPSAoZmxvYXQoeCkgLSBwYXJhbXNbMF0pICogcGFyYW1zWzJdICsKICAgICAgICAgICAgKGZsb2F0KHkpIC0gcGFyYW1zWzFdKSAqIHBhcmFtc1szXTsKICAgICAgICAgIGludCBjb29yZFggPSBpbnQocm91bmQoY29vcmRYRmxvYXQgKyBwYXJhbXNbMF0pKTsKICAgICAgICAgIGludCBjb29yZFkgPSBpbnQocm91bmQoY29vcmRZRmxvYXQgKyBwYXJhbXNbMV0pKTsKICAgICAgICAgICR7b30KICAgICAgICAgIGlmKGNvb3JkWCA+PSAwICYmIGNvb3JkWCA8ICR7cn0gJiYgY29vcmRZID49IDAgJiYgY29vcmRZIDwgJHtzfSkgewogICAgICAgICAgICBvdXRwdXRWYWx1ZSA9IGdldEltYWdlKGNvb3Jkc1swXSwgY29vcmRZLCBjb29yZFgsIGNvb3Jkc1szXSk7CiAgICAgICAgICB9CiAgICAgICAgICBzZXRPdXRwdXQob3V0cHV0VmFsdWUpOwogICAgICAgIH0KICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEVyZT17a2VybmVsTmFtZTpvZyxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6KHtpbnB1dHM6bixhdHRyczplLGJhY2tlbmQ6dH0pPT57Y29uc3R7aW1hZ2U6c309bix7cmFkaWFuczpyLGZpbGxWYWx1ZTpvLGNlbnRlcjppfT1lLGE9dCxsPW5ldyBUcmUocy5zaGFwZSxvKSxbYyxoXT1odyhpLHMuc2hhcGVbMV0scy5zaGFwZVsyXSkscD1bW2MsaCxNYXRoLnNpbihyKSxNYXRoLmNvcyhyKV1dO3JldHVybiBhLnJ1bldlYkdMUHJvZ3JhbShsLFtzXSxzLmR0eXBlLHApfX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgUnJlPWAKICAvLyBPcGVuR0wgRVMgZG9lcyBub3Qgc3VwcG9ydCByb3VuZCBmdW5jdGlvbi4KICAvLyBUaGUgYWxnb3JpdGhtIGlzIGJhc2VkIG9uIGJhbmtlcidzIHJvdW5kaW5nLgogIGZsb2F0IGJhc2UgPSBmbG9vcih4KTsKICBpZiAoKHggLSBiYXNlKSA8IDAuNSkgewogICAgcmV0dXJuIGZsb29yKHgpOwogIH0gZWxzZSBpZiAoKHggLSBiYXNlKSA+IDAuNSkgewogICAgcmV0dXJuIGNlaWwoeCk7CiAgfSBlbHNlIHsKICAgIGlmIChtb2QoYmFzZSwgMi4wKSA9PSAwLjApIHsKICAgICAgcmV0dXJuIGJhc2U7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gYmFzZSArIDEuMDsKICAgIH0KICB9CmAsRHJlPWl0KHtvcFNuaXBwZXQ6UnJlfSksQXJlPXtrZXJuZWxOYW1lOmF1LGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpEcmV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IF9yZT0icmV0dXJuIGludmVyc2VzcXJ0KHgpOyIsT3JlPWl0KHtvcFNuaXBwZXQ6X3JlLGNwdUtlcm5lbEltcGw6cVl9KSxGcmU9e2tlcm5lbE5hbWU6bHUsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOk9yZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgeXZ7Y29uc3RydWN0b3IoZSx0LHMscixvLGksYT0hMCxsPSExKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ1cGRhdGVzIiwiaW5kaWNlcyIsImRlZmF1bHRWYWx1ZSJdLHRoaXMub3V0cHV0U2hhcGU9aTtjb25zdCBjPXh0KG8ubGVuZ3RoKSxoPXh0KGkubGVuZ3RoKTtsZXQgcD0iIjtzPT09MT9wPSJpIjpzPT09MiYmKHA9ImksIGoiKTtjb25zdCBmPWBnZXRJbmRpY2VzKCR7cH0pYDtsZXQgZz0iIjtyPT09MT9nPSJpIjpyPT09MiYmKGc9ImksIGNvb3Jkc1sxXSIpO2NvbnN0IHk9YGdldFVwZGF0ZXMoJHtnfSlgO2xldCB3PSIiO2wmJih3PSJjb29yZHNbMF0sIGNvb3Jkc1sxXSIpO2NvbnN0IGI9YGdldERlZmF1bHRWYWx1ZSgke3d9KWAsdj10PjE/InN0cmlkZXNbal0iOiJzdHJpZGVzIjt0aGlzLnVzZXJDb2RlPWAKICAgICAgICAke2N9IHN0cmlkZXMgPSAke2N9KCR7b30pOwoKICAgICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgICAke2h9IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgICAgZmxvYXQgc3VtID0gMC4wOwogICAgICAgICAgYm9vbCBmb3VuZCA9IGZhbHNlOwogICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAke2V9OyBpKyspIHsKICAgICAgICAgICAgaW50IGZsYXR0ZW5lZEluZGV4ID0gMDsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCAke3R9OyBqKyspIHsKICAgICAgICAgICAgICBpbnQgaW5kZXggPSByb3VuZCgke2Z9KTsKICAgICAgICAgICAgICBmbGF0dGVuZWRJbmRleCArPSBpbmRleCAqICR7dn07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGZsYXR0ZW5lZEluZGV4ID09IGNvb3Jkc1swXSkgewogICAgICAgICAgICAgIHN1bSArPSAke3l9OwogICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2V0T3V0cHV0KG1peCgke2J9LCBzdW0sIGZsb2F0KGZvdW5kKSkpOwogICAgICAgIH0KICAgICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY2xhc3MgTHJle2NvbnN0cnVjdG9yKGUsdCxzLHIsbyxpLGE9ITAsbD0hMSl7dGhpcy52YXJpYWJsZU5hbWVzPVsidXBkYXRlcyIsImluZGljZXMiLCJkZWZhdWx0VmFsdWUiXSx0aGlzLnBhY2tlZElucHV0cz0hMCx0aGlzLnBhY2tlZE91dHB1dD0hMCx0aGlzLm91dHB1dFNoYXBlPWk7Y29uc3QgYz14dChvLmxlbmd0aCksaD14dChpLmxlbmd0aCk7bGV0IHA9IiI7cz09PTE/cD0iaSI6cz09PTImJihwPSJpLCBqIik7Y29uc3QgZj1gZ2V0SW5kaWNlcygke3B9KWA7bGV0IGc9IiI7cj09PTE/Zz0iaSI6cj09PTImJihnPSJpLCBjb29yZHNbMV0iKTtjb25zdCB5PWBnZXRVcGRhdGVzKCR7Z30pYDtsZXQgdz0iIjtsJiYodz0iY29vcmRzWzBdLCBjb29yZHNbMV0iKTtjb25zdCBiPWBnZXREZWZhdWx0VmFsdWUoJHt3fSlgLHY9dD4xPyJzdHJpZGVzW2pdIjoic3RyaWRlcyIsUz10PjE/InN0cmlkZXNbaiArIDFdIjoic3RyaWRlcyI7dGhpcy51c2VyQ29kZT1gCiAgICAgICAgJHtjfSBzdHJpZGVzID0gJHtjfSgke299KTsKCiAgICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICAgJHtofSBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICAgIHZlYzQgc3VtID0gdmVjNCgwLik7CiAgICAgICAgICB2ZWM0IGZvdW5kID0gdmVjNCgwLik7CiAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8ICR7ZX07IGkrPTIpIHsKICAgICAgICAgICAgaXZlYzIgZmxhdHRlbmVkSW5kZXggPSBpdmVjMigwKTsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCAke3R9OyBqKz0yKSB7CiAgICAgICAgICAgICAgaXZlYzQgaW5kZXggPSByb3VuZCgke2Z9KTsKICAgICAgICAgICAgICBmbGF0dGVuZWRJbmRleCArPSBpbmRleC54eiAqICR7dn07CiAgICAgICAgICAgICAgaWYgKGogKyAxIDwgJHt0fSkgewogICAgICAgICAgICAgICAgZmxhdHRlbmVkSW5kZXggKz0gaW5kZXgueXcgKiAke1N9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZmxhdHRlbmVkSW5kZXhbMF0gPT0gY29vcmRzWzBdIHx8IGZsYXR0ZW5lZEluZGV4WzFdID09IGNvb3Jkc1swXSB8fAogICAgICAgICAgICAgICAgZmxhdHRlbmVkSW5kZXhbMF0gPT0gY29vcmRzWzBdICsgMSB8fCBmbGF0dGVuZWRJbmRleFsxXSA9PSBjb29yZHNbMF0gKyAxKSB7CiAgICAgICAgICAgICAgdmVjNCB1cGRWYWxzID0gJHt5fTsKICAgICAgICAgICAgICBpZiAoZmxhdHRlbmVkSW5kZXhbMF0gPT0gY29vcmRzWzBdKSB7CiAgICAgICAgICAgICAgICBzdW0ueHkgKz0gdXBkVmFscy54eTsKICAgICAgICAgICAgICAgIGZvdW5kLnh5ID0gdmVjMigxLik7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChmbGF0dGVuZWRJbmRleFswXSA9PSBjb29yZHNbMF0gKyAxKSB7CiAgICAgICAgICAgICAgICBzdW0uencgKz0gdXBkVmFscy54eTsKICAgICAgICAgICAgICAgIGZvdW5kLnp3ID0gdmVjMigxLik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChmbGF0dGVuZWRJbmRleFsxXSA9PSBjb29yZHNbMF0pIHsKICAgICAgICAgICAgICAgIHN1bS54eSArPSB1cGRWYWxzLnp3OwogICAgICAgICAgICAgICAgZm91bmQueHkgPSB2ZWMyKDEuKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZsYXR0ZW5lZEluZGV4WzFdID09IGNvb3Jkc1swXSArIDEpIHsKICAgICAgICAgICAgICAgIHN1bS56dyArPSB1cGRWYWxzLnp3OwogICAgICAgICAgICAgICAgZm91bmQuencgPSB2ZWMyKDEuKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHNldE91dHB1dChtaXgoJHtifSwgc3VtLCBmb3VuZCkpOwogICAgICAgIH0KICAgICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUHJlKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtpbmRpY2VzOnIsdXBkYXRlczpvfT1lLHtzaGFwZTppfT1zLHtzbGljZVJhbms6YSxudW1VcGRhdGVzOmwsc2xpY2VTaXplOmMsc3RyaWRlczpoLG91dHB1dFNpemU6cH09TmkobyxyLGkpLGY9W3AvYyxjXTtpZihwPT09MClyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhpLHIuZHR5cGUpO2NvbnN0IGc9Q2Uoe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOltsLGFdfX0pLHk9Q2Uoe2lucHV0czp7eDpvfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOltsLGNdfX0pLHc9dC5tYWtlVGVuc29ySW5mbyhbXSwiZmxvYXQzMiIsbmV3IEZsb2F0MzJBcnJheShbMF0pKTtsZXQgYjtvZSgpLmdldEJvb2woIldFQkdMX1BBQ0siKT9iPW5ldyBMcmUobCxhLGcuc2hhcGUubGVuZ3RoLHkuc2hhcGUubGVuZ3RoLGgsZik6Yj1uZXcgeXYobCxhLGcuc2hhcGUubGVuZ3RoLHkuc2hhcGUubGVuZ3RoLGgsZik7Y29uc3Qgdj10LnJ1bldlYkdMUHJvZ3JhbShiLFt5LGcsd10seS5kdHlwZSksUz1DZSh7aW5wdXRzOnt4OnZ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6aX19KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhnKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHkpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odiksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh3KSxTfWNvbnN0IHpyZT17a2VybmVsTmFtZTpVbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6UHJlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBNcmV7Y29uc3RydWN0b3IoZSx0LHMscil7dGhpcy52YXJpYWJsZU5hbWVzPVsic29ydGVkU2VxdWVuY2UiLCJ2YWx1ZXMiXSx0aGlzLmN1c3RvbVVuaWZvcm1zPVt7bmFtZToibnVtSW5wdXRzIix0eXBlOiJpbnQifV0sdGhpcy5vdXRwdXRTaGFwZT1bZSxzXTtjb25zdCBvPSJ3aGlsZSAobGVmdCA8IHJpZ2h0KSB7IixpPWBmb3IgKGludCBpID0gMDsgaSA8ICR7TWF0aC5jZWlsKE1hdGgubG9nMih0KzEpKX07ICsraSkgeyBpZiAobGVmdCA+PSByaWdodCkgYnJlYWs7YCxhPW9lKCkuZ2V0TnVtYmVyKCJXRUJHTF9WRVJTSU9OIik9PT0yP286aSxsPXI9PT0ibGVmdCI/IjwiOiI8PSI7dGhpcy51c2VyQ29kZT1gCiAgICAgICBpbnQgZmluZEJvdW5kKGludCBiYXRjaCwgZmxvYXQgdmFsdWUpIHsKICAgICAgICAgaW50IGxlZnQgPSAwOwogICAgICAgICBpbnQgcmlnaHQgPSBudW1JbnB1dHM7CiAgICAgICAgIGludCBtaWQ7CiAgICAgICAgICR7YX0KICAgICAgICAgICBtaWQgPSAobGVmdCArIHJpZ2h0KSAvIDI7CiAgICAgICAgICAgaWYgKGdldFNvcnRlZFNlcXVlbmNlKGJhdGNoLCBtaWQpICR7bH0gdmFsdWUpIHsKICAgICAgICAgICAgIGxlZnQgPSBtaWQgKyAxOwogICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICByaWdodCA9IG1pZDsKICAgICAgICAgICB9CiAgICAgICAgIH0KICAgICAgICAgcmV0dXJuIHJpZ2h0OwogICAgICAgfQoKICAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAgaXZlYzIgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgIGludCBiYXRjaCA9IGNvb3Jkc1swXTsKICAgICAgICAgaW50IHZhbHVlSW5kZXggPSBjb29yZHNbMV07CgogICAgICAgICBmbG9hdCB2YWx1ZSA9IGdldFZhbHVlcyhiYXRjaCwgdmFsdWVJbmRleCk7CgogICAgICAgICBzZXRPdXRwdXQoZmxvYXQoZmluZEJvdW5kKGJhdGNoLCB2YWx1ZSkpKTsKICAgICAgIH0KICAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBCcmUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3NvcnRlZFNlcXVlbmNlOnIsdmFsdWVzOm99PWUse3NpZGU6aX09cyxhPW5ldyBNcmUoci5zaGFwZVswXSxyLnNoYXBlWzFdLG8uc2hhcGVbMV0saSksbD1bW3Iuc2hhcGVbMV1dXTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oYSxbcixvXSwiaW50MzIiLGwpfWNvbnN0IFZyZT17a2VybmVsTmFtZTpHbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6QnJlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBXcmV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudmFyaWFibGVOYW1lcz1bImMiLCJhIiwiYiJdLHRoaXMub3V0cHV0U2hhcGU9dDtsZXQgcixvO2lmKHM+NCl0aHJvdyBFcnJvcihgV2hlcmUgZm9yIHJhbmsgJHtzfSBpcyBub3QgeWV0IHN1cHBvcnRlZGApO2lmKHM9PT0xKW89InJlc1JDIixyPSJyZXNSQyI7ZWxzZXtjb25zdCBhPVsicmVzUkMueCIsInJlc1JDLnkiLCJyZXNSQy56IiwicmVzUkMudyJdLGw9W10sYz1bXTtmb3IobGV0IGg9MDtoPHQubGVuZ3RoO2grKyljLnB1c2goYCR7YVtoXX1gKSxoPGUmJmwucHVzaChgJHthW2hdfWApO3I9bC5qb2luKCksbz1jLmpvaW4oKX1jb25zdCBpPXh0KHMpO3RoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgJHtpfSByZXNSQyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGZsb2F0IGNWYWwgPSBnZXRDKCR7cn0pOwogICAgICAgIGlmIChjVmFsID49IDEuMCkgewogICAgICAgICAgc2V0T3V0cHV0KGdldEEoJHtvfSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZXRPdXRwdXQoZ2V0Qigke299KSk7CiAgICAgICAgfQogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBVcmUobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtjb25kaXRpb246cyx0OnIsZTpvfT1lLGk9bmV3IFdyZShzLnNoYXBlLmxlbmd0aCxyLnNoYXBlLHIuc2hhcGUubGVuZ3RoKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0oaSxbcyxyLG9dLHRzKHIuZHR5cGUsby5kdHlwZSkpfWNvbnN0IGpyZT17a2VybmVsTmFtZTpIZCxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6VXJlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBHcmU9YAogIC8vIFN0YWJsZSBhbmQgQXR0cmFjdGluZyBGaXhlZCBQb2ludCAoMCwgMSkgZm9yIE5vcm1hbGl6ZWQgV2VpZ2h0cy4KICAvLyBzZWU6IGh0dHBzOi8vYXJ4aXYub3JnL2Ficy8xNzA2LjAyNTE1CiAgZmxvYXQgc2NhbGVBbHBoYSA9ICR7S2d9OwogIGZsb2F0IHNjYWxlID0gJHtYZ307CiAgcmV0dXJuICh4ID49IDAuMCkgPyBzY2FsZSAqIHggOiBzY2FsZUFscGhhICogKGV4cCh4KSAtIDEuMCk7CmAsSHJlPWl0KHtvcFNuaXBwZXQ6R3JlfSkscXJlPXtrZXJuZWxOYW1lOnV1LGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpIcmV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEtyZT1MdStgCiAgcmV0dXJuIDEuMCAvICgxLjAgKyBleHAoLTEuMCAqIHgpKTsKYCxYcmU9YAogIHZlYzQgcmVzdWx0ID0gMS4wIC8gKDEuMCArIGV4cCgtMS4wICogeCkpOwogIGJ2ZWM0IGlzTmFOID0gaXNuYW4oeCk7CgogIHJlc3VsdC5yID0gaXNOYU4uciA/IHguciA6IHJlc3VsdC5yOwogIHJlc3VsdC5nID0gaXNOYU4uZyA/IHguZyA6IHJlc3VsdC5nOwogIHJlc3VsdC5iID0gaXNOYU4uYiA/IHguYiA6IHJlc3VsdC5iOwogIHJlc3VsdC5hID0gaXNOYU4uYSA/IHguYSA6IHJlc3VsdC5hOwoKICByZXR1cm4gcmVzdWx0OwpgLFlyZT1pdCh7b3BTbmlwcGV0OktyZSxwYWNrZWRPcFNuaXBwZXQ6WHJlLGNwdUtlcm5lbEltcGw6WFl9KSxRcmU9e2tlcm5lbE5hbWU6cHUsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOllyZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgWnJlPWAKICBpZiAoaXNuYW4oeCkpIHsgcmV0dXJuIDAuMDsgfQogIHJldHVybiBzaWduKHgpOwpgLEpyZT1pdCh7b3BTbmlwcGV0OlpyZX0pLGVvZT17a2VybmVsTmFtZTpodSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6SnJlfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCB0b2U9THUrYAogIHJldHVybiBzaW4oeCk7CmAsbm9lPWAKICB2ZWM0IHJlc3VsdCA9IHNpbih4KTsKICBidmVjNCBpc05hTiA9IGlzbmFuKHgpOwogICR7RGF9CiAgcmV0dXJuIHJlc3VsdDsKYCxzb2U9aXQoe29wU25pcHBldDp0b2UscGFja2VkT3BTbmlwcGV0Om5vZX0pLHJvZT17a2VybmVsTmFtZTpjdSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6c29lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jb25zdCBvb2U9YAogIGZsb2F0IGUyeCA9IGV4cCh4KTsKICByZXR1cm4gKGUyeCAtIDEuMCAvIGUyeCkgLyAyLjA7CmAsaW9lPWl0KHtvcFNuaXBwZXQ6b29lfSksYW9lPXtrZXJuZWxOYW1lOmR1LGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzppb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGxvZT1gCiAgZmxvYXQgZXBzaWxvbiA9IDEuMTkyMDkyODk1NTA3ODEyNWUtNzsKICBmbG9hdCB0aHJlc2hvbGQgPSBsb2coZXBzaWxvbikgKyAyLjA7CgogIGJvb2wgdG9vX2xhcmdlID0geCA+IC10aHJlc2hvbGQ7CiAgYm9vbCB0b29fc21hbGwgPSB4IDwgdGhyZXNob2xkOwoKICBmbG9hdCByZXN1bHQ7CiAgZmxvYXQgZXhwX3ggPSBleHAoeCk7CgogIGlmICh0b29fbGFyZ2UpewogICAgcmVzdWx0ID0geDsKICB9CiAgZWxzZSBpZiAodG9vX3NtYWxsKXsKICAgIHJlc3VsdCA9IGV4cF94OwogIH0KICBlbHNlewogICAgcmVzdWx0ID0gbG9nKGV4cF94ICsgMS4wKTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKYCx1b2U9aXQoe29wU25pcHBldDpsb2V9KSxjb2U9e2tlcm5lbE5hbWU6ZnUsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnVvZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgZG9lPW49Pntjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtibG9ja1NoYXBlOm8scGFkZGluZ3M6aX09cztBKHIuc2hhcGUubGVuZ3RoPD00LCgpPT4ic3BhY2VUb0JhdGNoTkQgZm9yIHJhbmsgPiA0IHdpdGggYSBXZWJHTCBiYWNrZW5kIG5vdCBpbXBsZW1lbnRlZCB5ZXQiKTtjb25zdCBhPW8ucmVkdWNlKCh2LFMpPT52KlMpLGw9W1swLDBdXTtsLnB1c2goLi4uaSk7Zm9yKGxldCB2PTErby5sZW5ndGg7djxyLnNoYXBlLmxlbmd0aDsrK3YpbC5wdXNoKFswLDBdKTtjb25zdCBjPVtdLGg9SkQoe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e3BhZGRpbmdzOmwsY29uc3RhbnRWYWx1ZTowfX0pLHA9U2goaC5zaGFwZSxvLGEsITEpLGY9TmgocC5sZW5ndGgsby5sZW5ndGgsITEpLGc9a2goaC5zaGFwZSxvLGEsITEpLHk9Q2Uoe2lucHV0czp7eDpofSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOnB9fSksdz1Ibih7aW5wdXRzOnt4Onl9LGJhY2tlbmQ6dCxhdHRyczp7cGVybTpmfX0pLGI9Q2Uoe2lucHV0czp7eDp3fSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmd9fSk7cmV0dXJuIGMucHVzaChoKSxjLnB1c2goeSksYy5wdXNoKHcpLGMuZm9yRWFjaCh2PT50LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHYpKSxifSxob2U9e2tlcm5lbE5hbWU6WGQsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmRvZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gcG9lKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7aW5kaWNlczpzLHZhbHVlczpyLGRlbnNlU2hhcGU6byxkZWZhdWx0VmFsdWU6aX09ZTtpZihvLnNoYXBlLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKGBEZW5zZSBzaGFwZSBtdXN0IGJlIGEgdmVjdG9yLCBzYXc6CiAgICAgICAgICR7by5zaGFwZX1gKTtpZihzLnNoYXBlLmxlbmd0aCE9PTIpdGhyb3cgbmV3IEVycm9yKGBJbmRpY2VzIG11c3QgYmUgYSBtYXRyaXgsIHNhdzoKICAgICAgICAgJHtzLnNoYXBlfWApO2lmKHIuc2hhcGUubGVuZ3RoIT09MSl0aHJvdyBuZXcgRXJyb3IoYFZhbHVlcyBtdXN0IGJlIGEgdmVjdG9yLCBzYXc6CiAgICAgICAgICR7ci5zaGFwZX1gKTtpZihpLnNoYXBlLmxlbmd0aCE9PTApdGhyb3cgbmV3IEVycm9yKGBEZWZhdWx0IHZhbHVlIG11c3QgYmUgYSBzY2FsYXIsIHNhdzoKICAgICAgICAke2kuc2hhcGV9YCk7Y29uc3QgYT10LnJlYWRTeW5jKHMuZGF0YUlkKSxsPXQucmVhZFN5bmMoci5kYXRhSWQpLGM9dC5yZWFkU3luYyhvLmRhdGFJZCksaD10LnJlYWRTeW5jKGkuZGF0YUlkKVswXSxbcCxmLGcseSx3XT1RWShhLHMuc2hhcGUscy5kdHlwZSxsLHIuZHR5cGUsYyxoKTtyZXR1cm5bdC5tYWtlVGVuc29ySW5mbyhmLHMuZHR5cGUscCksdC5tYWtlVGVuc29ySW5mbyhbZlswXV0sci5kdHlwZSxnKSx0Lm1ha2VUZW5zb3JJbmZvKFt5Lmxlbmd0aF0sImJvb2wiLG5ldyBVaW50OEFycmF5KHkubWFwKGI9Pk51bWJlcihiKSkpKSx0Lm1ha2VUZW5zb3JJbmZvKFt3Lmxlbmd0aF0scy5kdHlwZSxuZXcgSW50MzJBcnJheSh3KSldfWNvbnN0IGZvZT17a2VybmVsTmFtZTpIbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6cG9lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBtb2Uobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0fT1uLHtpbnB1dEluZGljZXM6cyxpbnB1dFNoYXBlOnIsbmV3U2hhcGU6b309ZTtpZihzLnNoYXBlLmxlbmd0aCE9PTIpdGhyb3cgbmV3IEVycm9yKGBJbnB1dCBpbmRpY2VzIHNob3VsZCBiZSBhIG1hdHJpeCBidXQgcmVjZWl2ZWQgc2hhcGUgJHtzLnNoYXBlfWApO2lmKHIuc2hhcGUubGVuZ3RoIT09MSl0aHJvdyBuZXcgRXJyb3IoYElucHV0IHNoYXBlIHNob3VsZCBiZSBhIHZlY3RvciBidXQgcmVjZWl2ZWQgc2hhcGUgJHtyLnNoYXBlfWApO2lmKG8uc2hhcGUubGVuZ3RoIT09MSl0aHJvdyBuZXcgRXJyb3IoYFRhcmdldCBzaGFwZSBzaG91bGQgYmUgYSB2ZWN0b3IgYnV0IHJlY2VpdmVkIHNoYXBlICR7by5zaGFwZX1gKTtjb25zdCBpPUFycmF5LmZyb20odC5yZWFkU3luYyhyLmRhdGFJZCkpLGE9dC5yZWFkU3luYyhzLmRhdGFJZCksbD1BcnJheS5mcm9tKHQucmVhZFN5bmMoby5kYXRhSWQpKSxbYyxoLHBdPVpZKGEscy5zaGFwZSxzLmR0eXBlLGksbCk7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oaCxzLmR0eXBlLGMpLHQubWFrZVRlbnNvckluZm8oW3AubGVuZ3RoXSxvLmR0eXBlLG5ldyBJbnQzMkFycmF5KHApKV19Y29uc3QgZ29lPXtrZXJuZWxOYW1lOnFtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzptb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHlvZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnR9PW4se2RhdGE6cyxpbmRpY2VzOnIsc2VnbWVudElkczpvfT1lO2lmKHMuc2hhcGUubGVuZ3RoPDEpdGhyb3cgbmV3IEVycm9yKCJEYXRhIHNob3VsZCBiZSBhdCBsZWFzdCAxIGRpbWVuc2lvbmFsIGJ1dCByZWNlaXZlZCBzY2FsYXIiKTtpZihyLnNoYXBlLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKGBJbmRpY2VzIHNob3VsZCBiZSBhIHZlY3RvciBidXQgcmVjZWl2ZWQgc2hhcGUKICAgICAgICAgICAgICAke3Iuc2hhcGV9YCk7aWYoby5zaGFwZS5sZW5ndGghPT0xKXRocm93IG5ldyBFcnJvcihgU2VnbWVudCBpZHMgc2hvdWxkIGJlIGEgdmVjdG9yIGJ1dCByZWNlaXZlZCBzaGFwZQogICAgICAgICAgICAgICR7by5zaGFwZX1gKTtjb25zdCBpPXQucmVhZFN5bmMocy5kYXRhSWQpLGE9dC5yZWFkU3luYyhyLmRhdGFJZCksbD10LnJlYWRTeW5jKG8uZGF0YUlkKSxbYyxoXT1rRChpLHMuc2hhcGUscy5kdHlwZSxhLGwsITApO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGgscy5kdHlwZSxjKX1jb25zdCB4b2U9e2tlcm5lbE5hbWU6S20sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOnlvZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gYm9lKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dH09bix7ZGF0YTpzLGluZGljZXM6cixzZWdtZW50SWRzOm99PWU7aWYocy5zaGFwZS5sZW5ndGg8MSl0aHJvdyBuZXcgRXJyb3IoIkRhdGEgc2hvdWxkIGJlIGF0IGxlYXN0IDEgZGltZW5zaW9uYWwgYnV0IHJlY2VpdmVkIHNjYWxhciIpO2lmKHIuc2hhcGUubGVuZ3RoIT09MSl0aHJvdyBuZXcgRXJyb3IoYEluZGljZXMgc2hvdWxkIGJlIGEgdmVjdG9yIGJ1dCByZWNlaXZlZCBzaGFwZQogICAgICAgICAgICAgJHtyLnNoYXBlfWApO2lmKG8uc2hhcGUubGVuZ3RoIT09MSl0aHJvdyBuZXcgRXJyb3IoYFNlZ21lbnQgaWRzIHNob3VsZCBiZSBhIHZlY3RvciBidXQgcmVjZWl2ZWQgc2hhcGUKICAgICAgICAgICAgICR7by5zaGFwZX1gKTtjb25zdCBpPXQucmVhZFN5bmMocy5kYXRhSWQpLGE9dC5yZWFkU3luYyhyLmRhdGFJZCksbD10LnJlYWRTeW5jKG8uZGF0YUlkKSxbYyxoXT1rRChpLHMuc2hhcGUscy5kdHlwZSxhLGwpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKGgscy5kdHlwZSxjKX1jb25zdCB3b2U9e2tlcm5lbE5hbWU6WG0sYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOmJvZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gdm9lKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHtzcGFyc2VJbmRpY2VzOnIsc3BhcnNlVmFsdWVzOm8sZGVmYXVsdFZhbHVlOml9PWUse291dHB1dFNoYXBlOmF9PXMse3NsaWNlUmFuazpsLG51bVVwZGF0ZXM6YyxzbGljZVNpemU6aCxzdHJpZGVzOnAsb3V0cHV0U2l6ZTpmfT1OaShvLHIsYSksZz0hMTtpZihvLmR0eXBlPT09InN0cmluZyIpe2NvbnN0IHY9dC5idWZmZXJTeW5jKHIpLFM9dC5idWZmZXJTeW5jKG8pLCQ9Z28odC5yZWFkU3luYyhpLmRhdGFJZClbMF0pLGs9S1kodixTLGEsZixoLGMsbCxwLCQsZyk7cmV0dXJuIHQubWFrZVRlbnNvckluZm8oYSxrLmR0eXBlLGsudmFsdWVzKX1jb25zdCB5PW5ldyB5dihjLGwsci5zaGFwZS5sZW5ndGgsby5zaGFwZS5sZW5ndGgscCxbZiwxXSxnKSx3PXQucnVuV2ViR0xQcm9ncmFtKHksW28scixpXSxvLmR0eXBlKSxiPUNlKHtpbnB1dHM6e3g6d30sYmFja2VuZDp0LGF0dHJzOntzaGFwZTphfX0pO3JldHVybiB0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHcpLGJ9Y29uc3QgU29lPXtrZXJuZWxOYW1lOlltLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzp2b2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE5vZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtudW1PclNpemVTcGxpdHM6byxheGlzOml9PXMsYT1RZShpLHIuc2hhcGUpWzBdLGw9SXcocixvLGEpLGM9ci5zaGFwZS5sZW5ndGgsaD1uZXcgQXJyYXkoYykuZmlsbCgwKSxwPXIuc2hhcGUuc2xpY2UoKTtyZXR1cm4gbC5tYXAoZj0+e2NvbnN0IGc9Wy4uLnBdO2dbYV09Zjtjb25zdCB5PVB1KHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntiZWdpbjpoLHNpemU6Z319KTtyZXR1cm4gaFthXSs9Zix5fSl9Y29uc3Qga29lPXtrZXJuZWxOYW1lOllkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpOb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFFDPSJyZXR1cm4gc3FydCh4KTsiLENvZT1pdCh7b3BTbmlwcGV0OlFDLHBhY2tlZE9wU25pcHBldDpRQyxjcHVLZXJuZWxJbXBsOkpZfSksJG9lPXtrZXJuZWxOYW1lOm11LGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpDb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IElvZT0icmV0dXJuIHggKiB4OyIsVG9lPWl0KHtvcFNuaXBwZXQ6SW9lfSksRW9lPXtrZXJuZWxOYW1lOlFtLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpUb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IFpDPSJyZXR1cm4gKGEgLSBiKSAqIChhIC0gYik7IixSb2U9SW4oe29wU25pcHBldDpaQyxwYWNrZWRPcFNuaXBwZXQ6WkN9KSxEb2U9e2tlcm5lbE5hbWU6Z3UsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlJvZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gQW9lKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWU7aWYoci5kdHlwZSE9PSJzdHJpbmciKXRocm93IG5ldyBFcnJvcigiSW5wdXQgbXVzdCBiZSBvZiBkYXRhdHlwZSBzdHJpbmciKTtjb25zdCBvPXQucmVhZFN5bmMoci5kYXRhSWQpLGk9d28obyksYT1lUShpLCJzdHJpbmciLHMpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKHIuc2hhcGUsInN0cmluZyIsYSl9Y29uc3QgX29lPXtrZXJuZWxOYW1lOlpkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpBb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIE9vZSh7aW5wdXRzOm4sYXR0cnM6ZSxiYWNrZW5kOnR9KXtjb25zdHt4OnN9PW4scj1ycitgCiAgICByZXR1cm4geCA+IDAuMCA/IDEuMCA6IGZsb2F0KCR7ZS5hbHBoYX0pOwogIGAsbz1uZXcgTXIocy5zaGFwZSxyKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0obyxbc10scy5kdHlwZSl9Y29uc3QgRm9lPXtrZXJuZWxOYW1lOnZ1LGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpPb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIExvZXtjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy52YXJpYWJsZU5hbWVzPVsieCJdLHRoaXMub3V0cHV0U2hhcGU9cztjb25zdCByPXMubGVuZ3RoLG89eHQocy5sZW5ndGgpLGk9eHQocy5sZW5ndGgpO2xldCBhPSIiO2lmKHI9PT0xKWE9ImNvb3JkcyAqIHN0cmlkZXMgKyBiZWdpbiI7ZWxzZXtsZXQgbD0wO2E9cy5tYXAoKGMsaCk9PihsKysscy5sZW5ndGg9PT0xP2Bjb29yZHMgKiBzdHJpZGVzWyR7aH1dICsgYmVnaW5bJHtofV1gOmBjb29yZHNbJHtsLTF9XSAqIHN0cmlkZXNbJHtofV0gKyBiZWdpblske2h9XWApKS5qb2luKCIsIil9dGhpcy51c2VyQ29kZT1gCiAgICAgICR7b30gYmVnaW4gPSAke299KCR7ZX0pOwogICAgICAke299IHN0cmlkZXMgPSAke299KCR7dH0pOwoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICR7aX0gY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgc2V0T3V0cHV0KGdldFgoJHthfSkpOwogICAgICB9CiAgICBgfX0vKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBQb2Uobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3g6cn09ZSx7YmVnaW46byxlbmQ6aSxzdHJpZGVzOmEsYmVnaW5NYXNrOmwsZW5kTWFzazpjLGVsbGlwc2lzTWFzazpoLG5ld0F4aXNNYXNrOnAsc2hyaW5rQXhpc01hc2s6Zn09cyx7ZmluYWxTaGFwZVNwYXJzZTpnLGZpbmFsU2hhcGU6eSxpc0lkZW50aXR5Oncsc2xpY2VEaW0wOmIsaXNTaW1wbGVTbGljZTp2LGJlZ2luOlMsZW5kOiQsc3RyaWRlczprfT1sdyhyLnNoYXBlLG8saSxhLGwsYyxoLHAsZik7bGV0IFQ7aWYodylUPUNlKHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTp5fX0pO2Vsc2UgaWYoYnx8dil7QShyLnNoYXBlLmxlbmd0aD49MSwoKT0+YElucHV0IG11c3QgaGF2ZSByYW5rIGF0IGxlYXN0IDEsIGdvdDogJHtyLnNoYXBlLmxlbmd0aH1gKTtjb25zdCBMPW93KFMsJCxrKSx6PVB1KHtpbnB1dHM6e3g6cn0sYmFja2VuZDp0LGF0dHJzOntiZWdpbjpTLHNpemU6TH19KTtUPUNlKHtpbnB1dHM6e3g6en0sYmFja2VuZDp0LGF0dHJzOntzaGFwZTp5fX0pLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oeil9ZWxzZSBpZih0LnNob3VsZEV4ZWN1dGVPbkNQVShbcl0pKXtjb25zdCB6PXQucmVhZFN5bmMoci5kYXRhSWQpLEY9cWUoci5zaGFwZSxyLmR0eXBlLHopLF89dFEoZyxGLGssUyk7VD10Lm1ha2VUZW5zb3JJbmZvKHksci5kdHlwZSxfLnZhbHVlcyl9ZWxzZXtjb25zdCB6PW5ldyBMb2UoUyxrLGcpO1Q9dC5ydW5XZWJHTFByb2dyYW0oeixbcl0sci5kdHlwZSl9Y29uc3QgRD1DZSh7aW5wdXRzOnt4OlR9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6eX19KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhUKSxEfWNvbnN0IHpvZT17a2VybmVsTmFtZTpabSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6UG9lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9mdW5jdGlvbiBNb2Uobil7Y29uc3R7aW5wdXRzOmUsYmFja2VuZDp0LGF0dHJzOnN9PW4se3NlcGFyYXRvcjpyLG5HcmFtV2lkdGhzOm8sbGVmdFBhZDppLHJpZ2h0UGFkOmEscGFkV2lkdGg6bCxwcmVzZXJ2ZVNob3J0U2VxdWVuY2VzOmN9PXMse2RhdGE6aCxkYXRhU3BsaXRzOnB9PWUsZj10LnJlYWRTeW5jKGguZGF0YUlkKSxnPXQucmVhZFN5bmMocC5kYXRhSWQpLFt5LHddPW5RKGYsZyxyLG8saSxhLGwsYyk7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oW3kubGVuZ3RoXSwic3RyaW5nIix5KSx0Lm1ha2VUZW5zb3JJbmZvKHAuc2hhcGUsImludDMyIix3KV19Y29uc3QgQm9lPXtrZXJuZWxOYW1lOkptLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpNb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFZvZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7c2tpcEVtcHR5OnJ9PXMse2lucHV0Om8sZGVsaW1pdGVyOml9PWU7aWYoby5kdHlwZSE9PSJzdHJpbmciKXRocm93IG5ldyBFcnJvcigiSW5wdXQgbXVzdCBiZSBvZiBkYXRhdHlwZSBzdHJpbmciKTtpZihvLnNoYXBlLmxlbmd0aCE9PTEpdGhyb3cgbmV3IEVycm9yKGBJbnB1dCBtdXN0IGJlIGEgdmVjdG9yLCBnb3Qgc2hhcGU6ICR7by5zaGFwZX1gKTtpZihpLnNoYXBlLmxlbmd0aCE9PTApdGhyb3cgbmV3IEVycm9yKGBEZWxpbWl0ZXIgbXVzdCBiZSBhIHNjYWxhciwgZ290IHNoYXBlOiAke2kuc2hhcGV9YCk7Y29uc3QgYT10LnJlYWRTeW5jKG8uZGF0YUlkKSxsPXQucmVhZFN5bmMoaS5kYXRhSWQpWzBdLFtjLGgscF09c1EoYSxsLHIpLGY9aC5sZW5ndGg7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oW2YsMl0sImludDMyIixjKSx0Lm1ha2VUZW5zb3JJbmZvKFtmXSwic3RyaW5nIixoKSx0Lm1ha2VUZW5zb3JJbmZvKFsyXSwiaW50MzIiLG5ldyBJbnQzMkFycmF5KHApKV19Y29uc3QgV29lPXtrZXJuZWxOYW1lOmVnLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpWb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIFVvZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7bnVtQnVja2V0czpyfT1zLHtpbnB1dDpvfT1lO2lmKG8uZHR5cGUhPT0ic3RyaW5nIil0aHJvdyBuZXcgRXJyb3IoIklucHV0IG11c3QgYmUgb2YgZGF0YXR5cGUgc3RyaW5nIik7aWYocjw9MCl0aHJvdyBuZXcgRXJyb3IoIk51bWJlciBvZiBidWNrZXRzIG11c3QgYmUgYXQgbGVhc3QgMSIpO2NvbnN0IGk9dC5yZWFkU3luYyhvLmRhdGFJZCksYT1yUShpLHIpO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKG8uc2hhcGUsImludDMyIixhKX1jb25zdCBqb2U9e2tlcm5lbE5hbWU6dGcsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlVvZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovY29uc3QgR29lPSJyZXR1cm4gdGFuKHgpOyIsSG9lPWl0KHtvcFNuaXBwZXQ6R29lfSkscW9lPXtrZXJuZWxOYW1lOnh1LGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpIb2V9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IEtvZT1gCiAgZmxvYXQgZTJ4ID0gZXhwKC0yLjAgKiBhYnMoeCkpOwogIHJldHVybiBzaWduKHgpICogKDEuMCAtIGUyeCkgLyAoMS4wICsgZTJ4KTsKYCxYb2U9aXQoe29wU25pcHBldDpLb2V9KSxZb2U9e2tlcm5lbE5hbWU6YnUsYmFja2VuZE5hbWU6IndlYmdsIixrZXJuZWxGdW5jOlhvZX07LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gUW9lKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt0ZW5zb3I6cixpbmRpY2VzOm8sdXBkYXRlczppfT1lLHtzbGljZVJhbms6YSxudW1VcGRhdGVzOmwsc2xpY2VTaXplOmMsc3RyaWRlczpoLG91dHB1dFNpemU6cH09TmkoaSxvLHIuc2hhcGUpLGY9W3AvYyxjXTtpZihwPT09MClyZXR1cm4gdC5tYWtlVGVuc29ySW5mbyhyLnNoYXBlLG8uZHR5cGUpO2NvbnN0IGc9Q2Uoe2lucHV0czp7eDpvfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOltsLGFdfX0pLHk9Q2Uoe2lucHV0czp7eDppfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOltsLGNdfX0pLHc9Q2Uoe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmZ9fSksYj1uZXcgeXYobCxhLGcuc2hhcGUubGVuZ3RoLHkuc2hhcGUubGVuZ3RoLGgsZiwhMSwhMCksdj10LnJ1bldlYkdMUHJvZ3JhbShiLFt5LGcsd10sdy5kdHlwZSksUz1DZSh7aW5wdXRzOnt4OnZ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6ci5zaGFwZX19KTtyZXR1cm4gdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhnKSx0LmRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvKHkpLHQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odyksdC5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyh2KSxTfWNvbnN0IFpvZT17a2VybmVsTmFtZTpqbSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6UW9lfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi9jbGFzcyBKb2V7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJBIl07Y29uc3Qgcz1uZXcgQXJyYXkoZS5sZW5ndGgpO2ZvcihsZXQgaT0wO2k8cy5sZW5ndGg7aSsrKXNbaV09ZVtpXSp0W2ldO3RoaXMub3V0cHV0U2hhcGU9cyx0aGlzLnJhbms9cy5sZW5ndGg7Y29uc3Qgcj14dCh0aGlzLnJhbmspLG89ZWllKGUpO3RoaXMudXNlckNvZGU9YAogICAgICB2b2lkIG1haW4oKSB7CiAgICAgICAgJHtyfSByZXNSQyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIHNldE91dHB1dChnZXRBKCR7b30pKTsKICAgICAgfQogICAgYH19ZnVuY3Rpb24gZWllKG4pe2NvbnN0IGU9bi5sZW5ndGg7aWYoZT41KXRocm93IEVycm9yKGBUaWxlIGZvciByYW5rICR7ZX0gaXMgbm90IHlldCBzdXBwb3J0ZWRgKTtpZihlPT09MSlyZXR1cm5gaW1vZChyZXNSQywgJHtuWzBdfSlgO2NvbnN0IHQ9WyJyZXNSQy54IiwicmVzUkMueSIsInJlc1JDLnoiLCJyZXNSQy53IiwicmVzUkMudSJdLHM9W107Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspcy5wdXNoKGBpbW9kKCR7dFtyXX0sICR7bltyXX0pYCk7cmV0dXJuIHMuam9pbigpfS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHRBKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnJ9PWUse3JlcHM6b309cztpZihyLmR0eXBlPT09InN0cmluZyJ8fHIuc2hhcGUubGVuZ3RoPjUpe2NvbnN0IGw9dC5yZWFkU3luYyhyLmRhdGFJZCksYz1yLmR0eXBlPT09InN0cmluZyI/bC5tYXAoZj0+Z28oZikpOmwsaD1xZShyLnNoYXBlLHIuZHR5cGUsYykscD1pUShoLG8pO3JldHVybiB0Lm1ha2VUZW5zb3JJbmZvKHAuc2hhcGUscC5kdHlwZSxwLnZhbHVlcyl9Y29uc3QgaT1uZXcgSm9lKHIuc2hhcGUsbyk7cmV0dXJuIHQucnVuV2ViR0xQcm9ncmFtKGksW3JdLHIuZHR5cGUpfWNvbnN0IHRpZT17a2VybmVsTmFtZTp3dSxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6dEF9O2NsYXNzIG5pZXtjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4IiwiaW5kaWNlcyJdLHRoaXMuY3VzdG9tVW5pZm9ybXM9W3tuYW1lOiJuIix0eXBlOiJpbnQifSx7bmFtZToiZmlyc3RQYXNzIix0eXBlOiJpbnQifSx7bmFtZToibmVnYXRpdmVJbmYiLHR5cGU6ImZsb2F0In0se25hbWU6ImRpciIsdHlwZToiaW50In0se25hbWU6ImluYyIsdHlwZToiaW50In1dLHRoaXMub3V0cHV0U2hhcGU9ZSx0aGlzLnVzZXJDb2RlPWAKICAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAgaXZlYzIgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7CiAgICAgICAgIGludCBiYXRjaCA9IGNvb3Jkc1swXTsKICAgICAgICAgaW50IGVsZW1JZHggPSBjb29yZHNbMV07CgogICAgICAgICAvLyBXZSBjb21wYXJlIGVsZW1lbnRzIHBhaXItd2lzZSB3aXRoaW4gYSBncm91cCBvZiBzaXplIDIgKiBpbmMuCiAgICAgICAgIC8vIFRoZSBjb21wYXJpbmcgcnVsZSBmb3IgZWFjaCBncm91cCBhbHRlcm5hdGVzIGJldHdlZW4gYXNjZW5kaW5nCiAgICAgICAgIC8vIGFuZCBkZXNjZW5kaW5nLiBXaXRoaW4gZWFjaCBncm91cCwgd2UgY29tcGFyZSBlYWNoIHBhaXIgYXQKICAgICAgICAgLy8gcG9zaXRpb25zIGkgYW5kIGkraW5jLiBUbyBkZWNpZGUgd2hldGhlciBhbiBlbGVtZW50IGF0IHBvc2l0aW9uIGkKICAgICAgICAgLy8gaXMgeDAgb3IgeDEsIHdlIG1vZCBpdCBieSAyICogaW5jLCBpZiB0aGUgcmVzdWx0IGlzIHNtYWxsZXIgdGhhbgogICAgICAgICAvLyBpbmMsIGl0IGlzIGluIHRoZSBmaXJzdCBoYWxmIG9mIHRoZSBncm91cCwgd2UgZGVub3RlIGl0IGFzIHgwLAogICAgICAgICAvLyBvdGhlcndpc2Ugd2UgZGVub3RlIGl0IGFzIHgxLgogICAgICAgICAvLyBGb3IgZXhhbXBsZSwgYXMgc2hvd24gaW4gdGhlIEJpdG9uaWMgdG9wIEsgcGFwZXIgcmVmZXJlbmNlZCBhYm92ZSwKICAgICAgICAgLy8gRmlndXJlNShhKSBzaG93cyB0aGF0IGVsZW1lbnRbMV0gaXMgaW4gdGhlCiAgICAgICAgIC8vIHNlY29uZCBoYWxmIG9mIHRoZSBncm91cCB3aGVuIGdyb3VwIHNpemUgaXMgMiwgYnV0IGl0IGlzIGluIHRoZQogICAgICAgICAvLyBmaXJzdCBoYWxmIG9mIHRoZSBncm91cCB3aGVuIGdyb3VwIHNpemUgaXMgNC4KCiAgICAgICAgIGJvb2wgaXNGaXJzdEluUGFpciA9IGltb2QoZWxlbUlkeCwgMiAqIGluYykgPCBpbmM7CiAgICAgICAgIGludCBpID0gaXNGaXJzdEluUGFpciA/IGVsZW1JZHggOiBlbGVtSWR4IC0gaW5jOwoKICAgICAgICAgaW50IGkwID0gZmlyc3RQYXNzID09IDEgPyBpIDogaW50KGdldEluZGljZXMoYmF0Y2gsIGkpKTsKICAgICAgICAgaW50IGkxID0gZmlyc3RQYXNzID09IDEgPyBpICsgaW5jIDogaW50KGdldEluZGljZXMoYmF0Y2gsIGkgKyBpbmMpKTsKICAgICAgICAgZmxvYXQgeDAgPSBpMCA8IG4gPyBnZXRYKGJhdGNoLCBpMCkgOiBuZWdhdGl2ZUluZjsKICAgICAgICAgZmxvYXQgeDEgPSBpMSA8IG4gPyBnZXRYKGJhdGNoLCBpMSkgOiBuZWdhdGl2ZUluZjsKCiAgICAgICAgIC8vIERlbm90ZXMgd2hpY2ggZGlyZWN0aW9uIGluZGljZXMgYXJlIGluIChhc2NlbmRpbmcgb3IgZGVzY2VuZGluZykuCiAgICAgICAgIGJvb2wgcmV2ZXJzZSA9IGltb2QoZWxlbUlkeCwgMiAqIGRpcikgPj0gZGlyOwogICAgICAgICBib29sIGlzR3JlYXRlciA9IHgwID4geDEgfHwgKHgwID09IHgxICYmIGkxID4gaTApOwogICAgICAgICBpZiAocmV2ZXJzZSA9PSBpc0dyZWF0ZXIpIHsgLy8gRWxlbWVudHMgaW4gb3Bwb3NpdGUgb3JkZXIgb2YgZGlyZWN0aW9uCiAgICAgICAgICAgaW50IGlUZW1wID0gaTA7CiAgICAgICAgICAgaTAgPSBpMTsKICAgICAgICAgICBpMSA9IGlUZW1wOwogICAgICAgICB9CiAgICAgICAgIGlmIChpc0ZpcnN0SW5QYWlyKSB7CiAgICAgICAgICAgIHNldE91dHB1dChmbG9hdChpMCkpOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZXRPdXRwdXQoZmxvYXQoaTEpKTsKICAgICAgICAgfQogICAgICAgfQogICAgIGB9fWNsYXNzIHNpZXtjb25zdHJ1Y3RvcihlKXt0aGlzLnZhcmlhYmxlTmFtZXM9WyJ4IiwiaW5kaWNlcyJdLHRoaXMuY3VzdG9tVW5pZm9ybXM9W3tuYW1lOiJuIix0eXBlOiJpbnQifSx7bmFtZToiZmlyc3RQYXNzIix0eXBlOiJpbnQifSx7bmFtZToiayIsdHlwZToiaW50In1dLHRoaXMub3V0cHV0U2hhcGU9ZSx0aGlzLnVzZXJDb2RlPWAKICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAgLy8gVGFrZXMgbWF4IG9mIGluZGljZXMgKDAsIGspLCAoMSwgayArIDEpLCAoMiwgayArIDIpIC4uLgogICAgICAgICBpdmVjMiBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICAgaW50IGJhdGNoID0gY29vcmRzWzBdOwogICAgICAgICBpbnQgZWxlbUlkeCA9IGNvb3Jkc1sxXTsKCiAgICAgICAgIC8vIFRoZSBvdXRwdXQgc2l6ZSBpcyBoYWxmIG9mIHRoZSBwcmV2aW91cyBzaXplLgogICAgICAgICAvLyBJZiB0aGUgcHJldmlvdXMgc2VxdWVuY2UgaXMgfCB8IHwgfCBfIF8gXyBfICB8IHwgfCB8ICBfIF8gXyBfIChrPTQpLAogICAgICAgICAvLyB3ZSBvbmx5IG5lZWQgdG8gb3V0cHV0IHRoZSBpbmRpY2VzIGF0IHBvc2l0aW9ucyB8LCB0aGUgaW5kaWNlcyBhdAogICAgICAgICAvLyBwb3NpdGlvbnMgXyBjYW4gYmUgdGhyb3duIGF3YXksIHNlZSBGaWd1cmU1KGIpIEFmdGVyIFBoYXNlIDIKICAgICAgICAgLy8gKE1lcmdlIHBoYXNlKSBpbiB0aGUgQml0b25pYyBUb3AgSyBwYXBlciByZWZlcmVuY2VkIGFib3ZlLgogICAgICAgICAvLyBGb3IgZXhhbXBsZSwgdGhlIHBhcGVyIHNob3dzIHdlIG9ubHkgbmVlZCB0byBvdXRwdXQgdGhlIG9yYW5nZSBiYXJzLgogICAgICAgICAvLyBUaGUgb3V0cHV0IHNlcXVlbmNlIHNob3VsZCBsb29rIGxpa2UgdGhpcyB8IHwgfCB8IHwgfCB8IHwuCiAgICAgICAgIC8vIEJlY2F1c2UgdGhlIHNlcXVlbmNlIGlzIGhhbHZlZCwgdG8gbWFwIHRoZSBvdXRwdXQgaW5kZXggYmFjawogICAgICAgICAvLyB0byB0aGUgcHJldmlvdXMgc2VxdWVuY2UgdG8gZmluZCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSwKICAgICAgICAgLy8gd2UgbmVlZCB0byBkb3VibGUgdGhlIGluZGV4LiBXaGVuIHdlIGRvdWJsZSB0aGUgaW5kZXgsCiAgICAgICAgIC8vIHdlIGJhc2ljYWxseSBpbnRlcnBvbGF0ZSBhIHBvc2l0aW9uLCBzbyAyaSBsb29rcyBsaWtlCiAgICAgICAgIC8vIHwgXyB8IF8gfCBfIHwgXyB8IF8gfCBfIHwgXy4gV2UgbW92ZSB0aGUgfCB0byB0aGUgZmlyc3QgayBwb3NpdGlvbgogICAgICAgICAvLyBvZiBlYWNoIDJrIHBvc2l0aW9ucyBieSAtIGVsZW1JZHggJSBrLiBFLmcuIGZvciBvdXRwdXQgYXQKICAgICAgICAgLy8gaW5kZXggNCw1LDYsNywgd2Ugd2FudCB0byBnZXQgdGhlIGNvcnJlc3BvbmRpbmcgZWxlbWVudCBhdAogICAgICAgICAvLyBvcmlnaW5hbCBpbmRleCA4LDksMTAsMTEsIGZvciBvdXRwdXQgYXQgaW5kZXggOCw5LDEwLDExLAogICAgICAgICAvLyB3ZSB3YW50IHRvIGdldCB0aGUgY29ycmVzcG9uZGluZyBlbGVtZW50IGF0IG9yaWdpbmFsIGluZGV4CiAgICAgICAgIC8vIDE2LDE3LDE4LDE5LCBzbyBvbiBhbmQgc28gZm9ydGguCgogICAgICAgICBpbnQgaSA9IGVsZW1JZHggPCBrID8gZWxlbUlkeCA6IChlbGVtSWR4ICogMiAtIGltb2QoZWxlbUlkeCwgaykpOwogICAgICAgICBpbnQgaTAgPSBmaXJzdFBhc3MgPT0gMSA/IGkgOiBpbnQoZ2V0SW5kaWNlcyhiYXRjaCwgaSkpOwogICAgICAgICBpbnQgaTEgPSBmaXJzdFBhc3MgPT0gMSA/IGkgKyBrIDogaW50KGdldEluZGljZXMoYmF0Y2gsIGkgKyBrKSk7CgogICAgICAgICBmbG9hdCB4MCA9IGdldFgoYmF0Y2gsIGkwKTsKICAgICAgICAgZmxvYXQgeDEgPSBpMSA8IG4gPyBnZXRYKGJhdGNoLCBpMSkgOiB4MDsKCiAgICAgICAgIHNldE91dHB1dCh4MCA+PSB4MSA/IGZsb2F0KGkwKSA6IGZsb2F0KGkxKSk7CiAgICAgICB9CiAgICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gVWkobixlKXtlIT09bnVsbCYmbi5kaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mbyhlKX1mdW5jdGlvbiBKQyhuKXtsZXQgZT0xO2Zvcig7ZTxuOyllKj0yO3JldHVybiBlfWZ1bmN0aW9uIHJpZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7eDpyfT1lLHtrOm8sc29ydGVkOml9PXMsYT1vZSgpLmdldE51bWJlcigiVE9QS19MQVNUX0RJTV9DUFVfSEFORE9GRl9TSVpFX1RIUkVTSE9MRCIpLGw9b2UoKS5nZXROdW1iZXIoIlRPUEtfS19DUFVfSEFORE9GRl9USFJFU0hPTEQiKSxjPXIuc2hhcGUsaD1jW2MubGVuZ3RoLTFdO2lmKHQuc2hvdWxkRXhlY3V0ZU9uQ1BVKFtyXSl8fGg8YXx8bz5sKXtjb25zdCBfPXQucmVhZFN5bmMoci5kYXRhSWQpLFtFLE1dPWFRKF8sYyxyLmR0eXBlLG8saSk7cmV0dXJuW3QubWFrZVRlbnNvckluZm8oRS5zaGFwZSxFLmR0eXBlLEUudmFsdWVzKSx0Lm1ha2VUZW5zb3JJbmZvKE0uc2hhcGUsTS5kdHlwZSxNLnZhbHVlcyldfWlmKG89PT0wKXJldHVybiBjW2MubGVuZ3RoLTFdPTAsW3QubWFrZVRlbnNvckluZm8oYyxyLmR0eXBlLFtdKSx0Lm1ha2VUZW5zb3JJbmZvKGMsImludDMyIixbXSldO2lmKGg9PT0xKXJldHVybltyLHpoKHthdHRyczp7c2hhcGU6YyxkdHlwZToiaW50MzIiLHZhbHVlOjB9LGJhY2tlbmQ6dH0pXTtjb25zdCBwPXQudGV4RGF0YS5nZXQoci5kYXRhSWQpLGY9cCE9PW51bGwmJnAuaXNQYWNrZWQsZz1mP3QudW5wYWNrVGVuc29yKHIpOnIsdz1jZShjKS9oLGI9Q2Uoe2lucHV0czp7eDpnfSxhdHRyczp7c2hhcGU6W3csaF19LGJhY2tlbmQ6dH0pO2YmJlVpKHQsZyk7Y29uc3Qgdj1KQyhvKSxTPUpDKGgpO2xldCAkPW51bGw7Y29uc3Qgaz0oKT0+JD09PW51bGw/W2IsYl06W2IsJF0sVD0oXyxFLE0pPT57Y29uc3QgVT1rKCksWT1uZXcgbmllKE0pLG5lPVtbaF0sWyQ9PT1udWxsPzE6MF0sW051bWJlci5ORUdBVElWRV9JTkZJTklUWV0sW19dLFtFXV0sc2U9JDskPXQucnVuV2ViR0xQcm9ncmFtKFksVSwiaW50MzIiLG5lKSxVaSh0LHNlKX07Zm9yKGxldCBfPTE7Xzx2O18qPTIpe2NvbnN0IEU9XyoyO2ZvcihsZXQgTT1fO00+PTE7TS89MilUKEUsTSxbdyxTXSl9Zm9yKGxldCBfPVM7Xz52O18vPTIpe2NvbnN0IEU9aygpLE09bmV3IHNpZShbdyxfLzJdKSxZPVtbaF0sWyQ9PT1udWxsPzE6MF0sW3ZdXSxRPSQ7JD10LnJ1bldlYkdMUHJvZ3JhbShNLEUsImludDMyIixZKSxVaSh0LFEpO2NvbnN0IG5lPXYvMixzZT1uZSoyO2ZvcihsZXQgVj1uZTtWPj0xO1YvPTIpVChzZSxWLCQuc2hhcGUpfWxldCBEPSQ7JD1QdSh7aW5wdXRzOnt4OiR9LGJhY2tlbmQ6dCxhdHRyczp7YmVnaW46MCxzaXplOlt3LG9dfX0pLFVpKHQsRCk7bGV0IEw9cUQoe2lucHV0czp7eDpiLGluZGljZXM6JH0sYmFja2VuZDp0LGF0dHJzOntheGlzOjEsYmF0Y2hEaW1zOjF9fSk7VWkodCxiKTtjb25zdCB6PWMuc2xpY2UoMCwtMSk7ei5wdXNoKG8pLEQ9JCwkPUNlKHtpbnB1dHM6e3g6JH0sYXR0cnM6e3NoYXBlOnp9LGJhY2tlbmQ6dH0pLFVpKHQsRCk7Y29uc3QgRj1MO3JldHVybiBMPUNlKHtpbnB1dHM6e3g6TH0sYXR0cnM6e3NoYXBlOnp9LGJhY2tlbmQ6dH0pLFVpKHQsRiksW0wsJF19Y29uc3Qgb2llPXtrZXJuZWxOYW1lOm5nLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpyaWV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIGlpZXtjb25zdHJ1Y3RvcihlLHQscyxyLG8saSl7dGhpcy52YXJpYWJsZU5hbWVzPVsiSW1hZ2UiLCJUcmFuc2Zvcm1zIl0sdGhpcy5vdXRwdXRTaGFwZT1pO2NvbnN0IGE9cz09PSJuZWFyZXN0Ij8xOjI7bGV0IGw7c3dpdGNoKHIpe2Nhc2UiY29uc3RhbnQiOmw9MTticmVhaztjYXNlInJlZmxlY3QiOmw9MjticmVhaztjYXNlIndyYXAiOmw9MzticmVhaztjYXNlIm5lYXJlc3QiOmw9NDticmVhaztkZWZhdWx0Omw9MTticmVha310aGlzLnVzZXJDb2RlPWAKICAgICAgICAgICAgZmxvYXQgbWFwQ29vcmQoZmxvYXQgb3V0Q29vcmQsIGZsb2F0IGxlbikgewogICAgICAgICAgICAgIGZsb2F0IGluQ29vcmQgPSBvdXRDb29yZDsKICAgICAgICAgICAgICBpZigke2x9ID09IDIpIHsKICAgICAgICAgICAgICAgIGlmIChpbkNvb3JkIDwgMC4wKSB7CiAgICAgICAgICAgICAgICAgIGlmIChsZW4gPD0gMS4wKSB7CiAgICAgICAgICAgICAgICAgICAgaW5Db29yZCA9IDAuMDsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBmbG9hdCBzejIgPSAyLjAgKiBsZW47CiAgICAgICAgICAgICAgICAgICAgaWYgKGluQ29vcmQgPCBzejIpIHsKICAgICAgICAgICAgICAgICAgICAgIGluQ29vcmQgPSBzejIgKiBmbG9hdChpbnQoZmxvYXQoLWluQ29vcmQgLyBzejIpKSkgKwogICAgICAgICAgICAgICAgICAgICAgaW5Db29yZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaW5Db29yZCA9IGluQ29vcmQgPCAtbGVuID8gaW5Db29yZCArIHN6MiA6IC1pbkNvb3JkIC0gMS4wOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluQ29vcmQgPiBsZW4gLSAxLjApIHsKICAgICAgICAgICAgICAgICAgaWYgKGxlbiA8PSAxLjApIHsKICAgICAgICAgICAgICAgICAgICBpbkNvb3JkID0gMC4wOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZsb2F0IHN6MiA9IDIuMCAqIGxlbjsKICAgICAgICAgICAgICAgICAgICBpbkNvb3JkIC09IHN6MiAqIGZsb2F0KGludChmbG9hdChpbkNvb3JkIC8gc3oyKSkpOwogICAgICAgICAgICAgICAgICAgIGlmIChpbkNvb3JkID49IGxlbikgewogICAgICAgICAgICAgICAgICAgICAgaW5Db29yZCA9IHN6MiAtIGluQ29vcmQgLSAxLjA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAoaW5Db29yZCwgMC4wLCBsZW4gLSAxLjApOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHtsfSA9PSAzKSB7CiAgICAgICAgICAgICAgICBpZiAoaW5Db29yZCA8IDAuMCkgewogICAgICAgICAgICAgICAgICBpZiAobGVuIDw9IDEuMCkgewogICAgICAgICAgICAgICAgICAgIGluQ29vcmQgPSAwLjA7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZmxvYXQgc3ogPSBsZW4gLSAxLjA7CiAgICAgICAgICAgICAgICAgICAgaW5Db29yZCArPSBsZW4gKiAoZmxvYXQoaW50KGZsb2F0KC1pbkNvb3JkIC8gc3opKSkgKyAxLjApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluQ29vcmQgPiBsZW4gLSAxLjApIHsKICAgICAgICAgICAgICAgICAgaWYgKGxlbiA8PSAxLjApIHsKICAgICAgICAgICAgICAgICAgICBpbkNvb3JkID0gMC4wOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZsb2F0IHN6ID0gbGVuIC0gMS4wOwogICAgICAgICAgICAgICAgICAgIGluQ29vcmQgLT0gbGVuICogZmxvYXQoaW50KGZsb2F0KGluQ29vcmQgLyBzeikpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKGluQ29vcmQsIDAuMCwgbGVuIC0gMS4wKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR7bH0gPT0gNCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKG91dENvb3JkLCAwLjAsIGxlbiAtIDEuMCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBvdXRDb29yZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZsb2F0IHJlYWRXaXRoRmlsbFZhbHVlKGludCBiYXRjaCwgaW50IGNvb3JkWSwgaW50IGNvb3JkWCwKICAgICAgICAgICAgICBpbnQgY2hhbm5lbCkgewogICAgICAgICAgICAgIGZsb2F0IG91dHB1dFZhbHVlOwogICAgICAgICAgICAgIGlmICgwIDw9IGNvb3JkWSAmJiBjb29yZFkgPCAke2V9ICYmIDAgPD0gY29vcmRYICYmIGNvb3JkWCA8ICR7dH0pIHsKICAgICAgICAgICAgICAgICAgb3V0cHV0VmFsdWUgPSBnZXRJbWFnZShiYXRjaCwgY29vcmRZLCBjb29yZFgsIGNoYW5uZWwpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBvdXRwdXRWYWx1ZSA9IGZsb2F0KCR7b30pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0VmFsdWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZvaWQgbWFpbigpIHsKICAgICAgICAgICAgICBpdmVjNCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTsKICAgICAgICAgICAgICBmbG9hdCBvdXRwdXRWYWx1ZTsKICAgICAgICAgICAgICBpbnQgYmF0Y2ggPSBjb29yZHNbMF07CiAgICAgICAgICAgICAgaW50IHggPSBjb29yZHNbMl07CiAgICAgICAgICAgICAgaW50IHkgPSBjb29yZHNbMV07CiAgICAgICAgICAgICAgaW50IGNoYW5uZWwgPSBjb29yZHNbM107CiAgICAgICAgICAgICAgZmxvYXQgeGYgPSBmbG9hdCh4KTsKICAgICAgICAgICAgICBmbG9hdCB5ZiA9IGZsb2F0KHkpOwogICAgICAgICAgICAgIGZsb2F0IGExID0gZ2V0VHJhbnNmb3JtcyhiYXRjaCwgMCk7CiAgICAgICAgICAgICAgZmxvYXQgYTIgPSBnZXRUcmFuc2Zvcm1zKGJhdGNoLCAxKTsKICAgICAgICAgICAgICBmbG9hdCBhMyA9IGdldFRyYW5zZm9ybXMoYmF0Y2gsIDIpOwogICAgICAgICAgICAgIGZsb2F0IGIxID0gZ2V0VHJhbnNmb3JtcyhiYXRjaCwgMyk7CiAgICAgICAgICAgICAgZmxvYXQgYjIgPSBnZXRUcmFuc2Zvcm1zKGJhdGNoLCA0KTsKICAgICAgICAgICAgICBmbG9hdCBiMyA9IGdldFRyYW5zZm9ybXMoYmF0Y2gsIDUpOwogICAgICAgICAgICAgIGZsb2F0IGMxID0gZ2V0VHJhbnNmb3JtcyhiYXRjaCwgNik7CiAgICAgICAgICAgICAgZmxvYXQgYzIgPSBnZXRUcmFuc2Zvcm1zKGJhdGNoLCA3KTsKICAgICAgICAgICAgICBmbG9hdCBwcm9qZWN0aW9uID0gYzEgKiB4ZiArIGMyICogeWYgKyAxLjA7CiAgICAgICAgICAgICAgaWYgKHByb2plY3Rpb24gPT0gMC4wKSB7CiAgICAgICAgICAgICAgICBvdXRwdXRWYWx1ZSA9IGZsb2F0KCR7b30pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmbG9hdCBpblggPSAoYTEgKiB4ZiArIGEyICogeWYgKyBhMykgLyBwcm9qZWN0aW9uOwogICAgICAgICAgICAgICAgZmxvYXQgaW5ZID0gKGIxICogeGYgKyBiMiAqIHlmICsgYjMpIC8gcHJvamVjdGlvbjsKICAgICAgICAgICAgICAgIGZsb2F0IG1hcFggPSBtYXBDb29yZChpblgsIGZsb2F0KCR7dH0pKTsKICAgICAgICAgICAgICAgIGZsb2F0IG1hcFkgPSBtYXBDb29yZChpblksIGZsb2F0KCR7ZX0pKTsKCiAgICAgICAgICAgICAgICBpZiAoJHthfSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgIGludCBjb29yZFkgPSBpbnQocm91bmQobWFwWSkpOwogICAgICAgICAgICAgICAgICBpbnQgY29vcmRYID0gaW50KHJvdW5kKG1hcFgpKTsKICAgICAgICAgICAgICAgICAgb3V0cHV0VmFsdWUgPSByZWFkV2l0aEZpbGxWYWx1ZShiYXRjaCwgY29vcmRZLCBjb29yZFgsCiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBmbG9hdCB5Rmxvb3IgPSBmbG9vcihtYXBZKTsKICAgICAgICAgICAgICAgICAgZmxvYXQgeEZsb29yID0gZmxvb3IobWFwWCk7CiAgICAgICAgICAgICAgICAgIGZsb2F0IHlDZWlsID0geUZsb29yICsgMS4wOwogICAgICAgICAgICAgICAgICBmbG9hdCB4Q2VpbCA9IHhGbG9vciArIDEuMDsKICAgICAgICAgICAgICAgICAgZmxvYXQgdmFsdWVZRmxvb3IgPSAoeENlaWwgLSBtYXBYKSAqCiAgICAgICAgICAgICAgICAgIHJlYWRXaXRoRmlsbFZhbHVlKGJhdGNoLCBpbnQoeUZsb29yKSwgaW50KHhGbG9vciksIGNoYW5uZWwpICsKICAgICAgICAgICAgICAgICAgKG1hcFggLSB4Rmxvb3IpICoKICAgICAgICAgICAgICAgICAgcmVhZFdpdGhGaWxsVmFsdWUoYmF0Y2gsIGludCh5Rmxvb3IpLCBpbnQoeENlaWwpLCBjaGFubmVsKTsKICAgICAgICAgICAgICAgICAgZmxvYXQgdmFsdWVZQ2VpbCA9ICh4Q2VpbCAtIG1hcFgpICoKICAgICAgICAgICAgICAgICAgcmVhZFdpdGhGaWxsVmFsdWUoYmF0Y2gsIGludCh5Q2VpbCksIGludCh4Rmxvb3IpLCBjaGFubmVsKSArCiAgICAgICAgICAgICAgICAgIChtYXBYIC0geEZsb29yKSAqCiAgICAgICAgICAgICAgICAgIHJlYWRXaXRoRmlsbFZhbHVlKGJhdGNoLCBpbnQoeUNlaWwpLCBpbnQoeENlaWwpLCBjaGFubmVsKTsKICAgICAgICAgICAgICAgICAgb3V0cHV0VmFsdWUgPSAoeUNlaWwgLSBtYXBZKSAqIHZhbHVlWUZsb29yICsKICAgICAgICAgICAgICAgICAgKG1hcFkgLSB5Rmxvb3IpICogdmFsdWVZQ2VpbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0T3V0cHV0KG91dHB1dFZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgIGB9fS8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGFpZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7aW1hZ2U6cix0cmFuc2Zvcm1zOm99PWUse2ludGVycG9sYXRpb246aSxmaWxsTW9kZTphLGZpbGxWYWx1ZTpsLG91dHB1dFNoYXBlOmN9PXMsW2gscCxmLGddPXIuc2hhcGUsW3ksd109Yz8/W3AsZl0sYj1baCx5LHcsZ10sdj1uZXcgaWllKHAsZixpLGEsbCxiKTtyZXR1cm4gdC5ydW5XZWJHTFByb2dyYW0odixbcixvXSwiZmxvYXQzMiIpfWNvbnN0IGxpZT17a2VybmVsTmFtZTpzZyxiYWNrZW5kTmFtZToid2ViZ2wiLGtlcm5lbEZ1bmM6YWllfTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIExpY2Vuc2UpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBBUyBJUyBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIHVpZShuKXtjb25zdHtpbnB1dHM6ZSxhdHRyczp0LGJhY2tlbmQ6c309bix7YXhpczpyfT10LHt4Om99PWU7RmgobywidW5pcXVlIiksY29uc29sZS53YXJuKCJXQVJOSU5HOiAiLCJVSSBtaWdodCBiZSBsb2NrZWQgdGVtcG9yYXJpbHkgYXMgZGF0YSBpcyBiZWluZyBkb3dubG9hZGVkIik7Y29uc3QgaT1zLnJlYWRTeW5jKG8uZGF0YUlkKSx7b3V0cHV0VmFsdWVzOmEsb3V0cHV0U2hhcGU6bCxpbmRpY2VzOmN9PWxRKGkscixvLnNoYXBlLG8uZHR5cGUpO3JldHVybltzLm1ha2VUZW5zb3JJbmZvKGwsby5kdHlwZSxhKSxzLm1ha2VUZW5zb3JJbmZvKFtjLmxlbmd0aF0sImludDMyIixjKV19Y29uc3QgY2llPXtrZXJuZWxOYW1lOnJnLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzp1aWV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2Z1bmN0aW9uIGRpZShuKXtjb25zdHtpbnB1dHM6ZSxiYWNrZW5kOnQsYXR0cnM6c309bix7dmFsdWU6cn09ZTtsZXR7YXhpczpvfT1zO288MCYmKG8rPXIuc2hhcGUubGVuZ3RoKTtjb25zdCBpPXIsYT1pLnNoYXBlLmxlbmd0aCxsPXIuc2hhcGVbb10sYz1uZXcgQXJyYXkoYS0xKTtsZXQgaD0wO2ZvcihsZXQgdz0wO3c8YTt3KyspdyE9PW8mJihjW2grK109aS5zaGFwZVt3XSk7Y29uc3QgcD1bXSxmPW5ldyBBcnJheShhKS5maWxsKDApLGc9aS5zaGFwZS5zbGljZSgpO2dbb109MTtjb25zdCB5PW5ldyBBcnJheShsKTtmb3IobGV0IHc9MDt3PHkubGVuZ3RoO3crKyl7ZltvXT13O2NvbnN0IGI9UHUoe2lucHV0czp7eDppfSxiYWNrZW5kOnQsYXR0cnM6e2JlZ2luOmYsc2l6ZTpnfX0pLHY9Q2Uoe2lucHV0czp7eDpifSxiYWNrZW5kOnQsYXR0cnM6e3NoYXBlOmN9fSk7eVt3XT12LHAucHVzaChiKX1yZXR1cm4gcC5mb3JFYWNoKHc9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8odykpLHl9Y29uc3QgaGllPXtrZXJuZWxOYW1lOkpkLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpkaWV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NsYXNzIHBpZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudmFyaWFibGVOYW1lcz1bIngiLCJzZWdtZW50SWRzIl07Y29uc3Qgcz1lLndpbmRvd1NpemUscj1lLmJhdGNoU2l6ZSxvPWUuaW5TaXplLGk9ZS5udW1TZWdtZW50cyxhPWkqTWF0aC5jZWlsKG8vcyk7dGhpcy5vdXRwdXRTaGFwZT1bcixhXTtjb25zdCBsPSIwLjAiLGM9InN1bVZhbHVlIixoPU1hdGguZmxvb3Iocy80KSo0LHA9cyU0LGY9YAogICAgICAgIHN1bVZhbHVlICs9IGRvdCh2YWx1ZXMsIHNlZ0ZpbHRlcik7CiAgICBgO2xldCBnPSIiO28lcz4wJiYoZz1gCiAgICAgICAgaWYgKGluSWR4IDwgMCB8fCBpbklkeCA+PSAke299KSB7CiAgICAgICAgICByZXR1cm4gaW5pdGlhbGl6YXRpb25WYWx1ZTsKICAgICAgICB9CiAgICAgIGApO2xldCB5PSIiO28lcz4wJiYoeT1gCiAgICAgICAgaWYgKGluSWR4IDwgMCB8fCBpbklkeCA+PSAke299KSB7CiAgICAgICAgICByZXR1cm4gLTEuMDsKICAgICAgICB9CiAgICAgIGApLHRoaXMudXNlckNvZGU9YAogICAgICBjb25zdCBmbG9hdCBpbml0aWFsaXphdGlvblZhbHVlID0gJHtsfTsKCiAgICAgIGZsb2F0IGdldFZhbHVlKGludCBiYXRjaCwgaW50IGluSWR4KSB7CiAgICAgICAgJHtnfQogICAgICAgIHJldHVybiBnZXRYKGJhdGNoLCBpbklkeCk7CiAgICAgIH0KCiAgICAgIGZsb2F0IGdldFNlZ21lbnRJZEF0SW5kZXgoaW50IGluSWR4KSB7CiAgICAgICAgJHt5fQogICAgICAgIHJldHVybiBnZXRTZWdtZW50SWRzKGluSWR4KTsKICAgICAgfQoKICAgICAgdm9pZCBtYWluKCkgewogICAgICAgIGl2ZWMyIGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpOwogICAgICAgIGludCBiYXRjaCA9IGNvb3Jkc1swXTsKICAgICAgICBpbnQgb3V0SWR4ID0gY29vcmRzWzFdOwogICAgICAgIGludCBpbk9mZnNldCA9IGludChmbG9vcihmbG9hdChvdXRJZHgpIC8gZmxvYXQoCiAgICAgICAgICAke2l9KSkgKiBmbG9hdCgke3N9KSk7CiAgICAgICAgaW50IGN1cnJlbnRTZWcgPSBpbnQobW9kKGZsb2F0KG91dElkeCksIGZsb2F0KCR7aX0pKSk7CgogICAgICAgIGZsb2F0IHN1bVZhbHVlID0gMC4wOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8ICR7aH07IGkgKz0gNCkgewogICAgICAgICAgaW50IGluSWR4ID0gaW5PZmZzZXQgKyBpOwogICAgICAgICAgdmVjNCB2YWx1ZXMgPSB2ZWM0KAogICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgaW5JZHgpLAogICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgaW5JZHggKyAxKSwKICAgICAgICAgICAgZ2V0VmFsdWUoYmF0Y2gsIGluSWR4ICsgMiksCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCArIDMpCiAgICAgICAgICApOwoKICAgICAgICAgIHZlYzQgc2VnRmlsdGVyID0gdmVjNCgKICAgICAgICAgICAgaW50KGdldFNlZ21lbnRJZEF0SW5kZXgoaW5JZHgpKSA9PSBjdXJyZW50U2VnID8gMSA6IDAsCiAgICAgICAgICAgIGludChnZXRTZWdtZW50SWRBdEluZGV4KGluSWR4ICsgMSkpID09IGN1cnJlbnRTZWcgPyAxIDogMCwKICAgICAgICAgICAgaW50KGdldFNlZ21lbnRJZEF0SW5kZXgoaW5JZHggKyAyKSkgPT0gY3VycmVudFNlZyA/IDEgOiAwLAogICAgICAgICAgICBpbnQoZ2V0U2VnbWVudElkQXRJbmRleChpbklkeCArIDMpKSA9PSBjdXJyZW50U2VnID8gMSA6IDAKICAgICAgICAgICk7CgogICAgICAgICAgJHtmfQogICAgICAgIH0KCiAgICAgICAgaW50IGluSWR4ID0gaW5PZmZzZXQgKyAke2h9OwogICAgICAgIGlmICgke3A9PT0xfSkgewogICAgICAgICAgdmVjNCB2YWx1ZXMgPSB2ZWM0KAogICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgaW5JZHgpLAogICAgICAgICAgICBpbml0aWFsaXphdGlvblZhbHVlLAogICAgICAgICAgICBpbml0aWFsaXphdGlvblZhbHVlLAogICAgICAgICAgICBpbml0aWFsaXphdGlvblZhbHVlCiAgICAgICAgICApOwoKICAgICAgICAgIGludCBpbklkeFNlZyA9IGludChnZXRTZWdtZW50SWRBdEluZGV4KGluSWR4KSk7CgogICAgICAgICAgdmVjNCBzZWdGaWx0ZXIgPSB2ZWM0KAogICAgICAgICAgICBpbnQoZ2V0U2VnbWVudElkQXRJbmRleChpbklkeCkpID09IGN1cnJlbnRTZWcgPyAxIDogMCwKICAgICAgICAgICAgMCwKICAgICAgICAgICAgMCwKICAgICAgICAgICAgMAogICAgICAgICAgKTsKCiAgICAgICAgICAke2Z9CiAgICAgICAgfSBlbHNlIGlmICgke3A9PT0yfSkgewogICAgICAgICAgdmVjNCB2YWx1ZXMgPSB2ZWM0KAogICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgaW5JZHgpLAogICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgaW5JZHggKyAxKSwKICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25WYWx1ZSwKICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25WYWx1ZQogICAgICAgICAgKTsKCiAgICAgICAgICB2ZWM0IHNlZ0ZpbHRlciA9IHZlYzQoCiAgICAgICAgICAgIGludChnZXRTZWdtZW50SWRBdEluZGV4KGluSWR4KSkgPT0gY3VycmVudFNlZyA/IDEgOiAwLAogICAgICAgICAgICBpbnQoZ2V0U2VnbWVudElkQXRJbmRleChpbklkeCArIDEpKSA9PSBjdXJyZW50U2VnID8gMSA6IDAsCiAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAwCiAgICAgICAgICApOwoKICAgICAgICAgICR7Zn0KICAgICAgICB9IGVsc2UgaWYgKCR7cD09PTN9KSB7CiAgICAgICAgICB2ZWM0IHZhbHVlcyA9IHZlYzQoCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCksCiAgICAgICAgICAgIGdldFZhbHVlKGJhdGNoLCBpbklkeCArIDEpLAogICAgICAgICAgICBnZXRWYWx1ZShiYXRjaCwgaW5JZHggKyAyKSwKICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25WYWx1ZQogICAgICAgICAgKTsKCiAgICAgICAgICB2ZWM0IHNlZ0ZpbHRlciA9IHZlYzQoCiAgICAgICAgICAgIGludChnZXRTZWdtZW50SWRBdEluZGV4KGluSWR4KSkgPT0gY3VycmVudFNlZyA/IDEgOiAwLAogICAgICAgICAgICBpbnQoZ2V0U2VnbWVudElkQXRJbmRleChpbklkeCArIDEpKSA9PSBjdXJyZW50U2VnID8gMSA6IDAsCiAgICAgICAgICAgIGludChnZXRTZWdtZW50SWRBdEluZGV4KGluSWR4ICsgMikpID09IGN1cnJlbnRTZWcgPyAxIDogMCwKICAgICAgICAgICAgMAogICAgICAgICAgKTsKCiAgICAgICAgICAke2Z9CiAgICAgICAgfQogICAgICAgIHNldE91dHB1dCgke2N9KTsKICAgICAgfQogICAgYH19LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICovZnVuY3Rpb24gZmllKG4pe2NvbnN0e2lucHV0czplLGJhY2tlbmQ6dCxhdHRyczpzfT1uLHt4OnIsc2VnbWVudElkczpvfT1lLHtudW1TZWdtZW50czppfT1zLGE9ci5zaGFwZS5sZW5ndGgsbD1bXTtsZXQgYz0wO2NvbnN0IGg9THQoW2NdLGEpO2xldCBwPXI7aCE9bnVsbCYmKHA9SG4oe2lucHV0czp7eDpyfSxiYWNrZW5kOnQsYXR0cnM6e3Blcm06aH19KSxsLnB1c2gocCksYz1qdCgxLGEpWzBdKTtjb25zdCBmPUEyKHAuc2hhcGUsYyxpKSxnPWNlKFtwLnNoYXBlW2NdXSkseT1DZSh7aW5wdXRzOnt4OnB9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6Wy0xLGddfX0pO2wucHVzaCh5KTtjb25zdCB3PWFnKHIuZHR5cGUpLGI9KGssVCxELEwseik9Pntjb25zdCBGPWsuc2hhcGVbMF0sXz1rLnNoYXBlWzFdLEU9RDIoXyx6KSxNPXt3aW5kb3dTaXplOkUsaW5TaXplOl8sYmF0Y2hTaXplOkYsbnVtU2VnbWVudHM6en0sVT1uZXcgcGllKE0sVCksWT10LmNvbXBpbGVBbmRSdW4oVSxbayxEXSxMKTtpZihsLnB1c2goWSksWS5zaGFwZVsxXT09PXopcmV0dXJuIFk7Y29uc3QgUT1lQSh7YmFja2VuZDp0LGF0dHJzOntzdGFydDowLHN0b3A6eixzdGVwOjEsZHR5cGU6ImZsb2F0MzIifX0pLG5lPXRBKHtpbnB1dHM6e3g6UX0sYmFja2VuZDp0LGF0dHJzOntyZXBzOltfL0VdfX0pO3JldHVybiBsLnB1c2goUSksbC5wdXNoKG5lKSxiKFksVCxuZSxMLHopfSx2PWIoeSwidW5zb3J0ZWRTZWdtZW50U3VtIixvLHcsaSksUz1DZSh7aW5wdXRzOnt4OnZ9LGJhY2tlbmQ6dCxhdHRyczp7c2hhcGU6Zn19KTtsZXQgJD1TO2lmKGghPW51bGwpe2wucHVzaChTKTtjb25zdCBrPWJpKGgpOyQ9SG4oe2lucHV0czp7eDokfSxiYWNrZW5kOnQsYXR0cnM6e3Blcm06a319KX1yZXR1cm4gbC5mb3JFYWNoKGs9PnQuZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm8oaykpLCR9Y29uc3QgbWllPXtrZXJuZWxOYW1lOmVoLGJhY2tlbmROYW1lOiJ3ZWJnbCIsa2VybmVsRnVuYzpmaWV9Oy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqL2NvbnN0IGdpZT1bSlEsdFosclosYVosdVosaFosZlosZ1osd1osU1osQ1osVFosRFosRloselosQlosV1osSFosS1osWVosZUosYUosdUoscEosbUosdkosTkosSUosTFEsUkosRkosTUosR0osS0osWUosWkosZWVlLHJlZSxhZWUsY2VlLGhlZSxmZWUsZ2VlLGJlZSx2ZWUsQ2VlLEllZSxSZWUsX2VlLEZlZSxNZWUsVWVlLHFlZSxZZWUsSmVlLGV0ZSxudGUscnRlLGl0ZSxsdGUsY3RlLGZ0ZSx5dGUsd3RlLFN0ZSxDdGUsVHRlLEF0ZSxMdGUsRlEsenRlLF9KLFZ0ZSxqdGUscXRlLHpRLFF0ZSx0bmUsc25lLGFuZSxjbmUsZm5lLHluZSx2bmUsQ25lLFRuZSxSbmUsT25lLExuZSx6bmUsV25lLGpuZSxIbmUsS25lLFluZSxlc2UscnNlLGxzZSxnc2UsVlEsd3NlLE5zZSwkc2UsRXNlLHlKLEFzZSxPc2UsTHNlLE1zZSxVc2UsQlEsR3NlLHFzZSxYc2UsUXNlLFpzZSx4Sixoc2UsdHJlLG9yZSx1cmUsVVEscHJlLGdyZSx3cmUsTnJlLElyZSxFcmUsQXJlLEZyZSx6cmUsVnJlLGpyZSxxcmUsUXJlLGVvZSxyb2UsYW9lLG9KLGZzZSxjb2UsaG9lLGZvZSxnb2UseG9lLHdvZSxTb2Usa29lLCRvZSxFb2UsRG9lLF9vZSxGb2Usem9lLEJvZSxXb2Usam9lLHBzZSxZUSxxb2UsWW9lLFpvZSx0aWUsb2llLGxpZSxRUSxjaWUsaGllLG1pZSxfc2VdO2Zvcihjb25zdCBuIG9mIGdpZSlpZyhuKTt2YXIgRGM9e2V4cG9ydHM6e319O2NvbnN0IHlpZT1rMShaNikseGllPWsxKFNWKTsvKioKICogQGxpY2Vuc2UKICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi92YXIgYmllPURjLmV4cG9ydHMsZSQ7ZnVuY3Rpb24gd2llKCl7cmV0dXJuIGUkfHwoZSQ9MSwoZnVuY3Rpb24obixlKXsoZnVuY3Rpb24odCxzKXtzKGUseWllLHhpZSl9KShiaWUsKGZ1bmN0aW9uKHQscyxyKXtjb25zdCBvPXsxOntuYW1lOiIvbS8wMWczMTciLGlkOjEsZGlzcGxheU5hbWU6InBlcnNvbiJ9LDI6e25hbWU6Ii9tLzAxOTlnIixpZDoyLGRpc3BsYXlOYW1lOiJiaWN5Y2xlIn0sMzp7bmFtZToiL20vMGs0aiIsaWQ6MyxkaXNwbGF5TmFtZToiY2FyIn0sNDp7bmFtZToiL20vMDRfc3YiLGlkOjQsZGlzcGxheU5hbWU6Im1vdG9yY3ljbGUifSw1OntuYW1lOiIvbS8wNWN6ejZsIixpZDo1LGRpc3BsYXlOYW1lOiJhaXJwbGFuZSJ9LDY6e25hbWU6Ii9tLzAxYmp2IixpZDo2LGRpc3BsYXlOYW1lOiJidXMifSw3OntuYW1lOiIvbS8wN2pkciIsaWQ6NyxkaXNwbGF5TmFtZToidHJhaW4ifSw4OntuYW1lOiIvbS8wN3IwNCIsaWQ6OCxkaXNwbGF5TmFtZToidHJ1Y2sifSw5OntuYW1lOiIvbS8wMTlqZCIsaWQ6OSxkaXNwbGF5TmFtZToiYm9hdCJ9LDEwOntuYW1lOiIvbS8wMTVxZmYiLGlkOjEwLGRpc3BsYXlOYW1lOiJ0cmFmZmljIGxpZ2h0In0sMTE6e25hbWU6Ii9tLzAxcG5zMCIsaWQ6MTEsZGlzcGxheU5hbWU6ImZpcmUgaHlkcmFudCJ9LDEzOntuYW1lOiIvbS8wMnB2MTkiLGlkOjEzLGRpc3BsYXlOYW1lOiJzdG9wIHNpZ24ifSwxNDp7bmFtZToiL20vMDE1cWJwIixpZDoxNCxkaXNwbGF5TmFtZToicGFya2luZyBtZXRlciJ9LDE1OntuYW1lOiIvbS8wY3ZucWgiLGlkOjE1LGRpc3BsYXlOYW1lOiJiZW5jaCJ9LDE2OntuYW1lOiIvbS8wMTVwNiIsaWQ6MTYsZGlzcGxheU5hbWU6ImJpcmQifSwxNzp7bmFtZToiL20vMDF5cngiLGlkOjE3LGRpc3BsYXlOYW1lOiJjYXQifSwxODp7bmFtZToiL20vMGJ0OWxyIixpZDoxOCxkaXNwbGF5TmFtZToiZG9nIn0sMTk6e25hbWU6Ii9tLzAzazNyIixpZDoxOSxkaXNwbGF5TmFtZToiaG9yc2UifSwyMDp7bmFtZToiL20vMDdiZ3AiLGlkOjIwLGRpc3BsYXlOYW1lOiJzaGVlcCJ9LDIxOntuYW1lOiIvbS8wMXhxMGsxIixpZDoyMSxkaXNwbGF5TmFtZToiY293In0sMjI6e25hbWU6Ii9tLzBid2RfMGoiLGlkOjIyLGRpc3BsYXlOYW1lOiJlbGVwaGFudCJ9LDIzOntuYW1lOiIvbS8wMWR3cyIsaWQ6MjMsZGlzcGxheU5hbWU6ImJlYXIifSwyNDp7bmFtZToiL20vMDg5OGIiLGlkOjI0LGRpc3BsYXlOYW1lOiJ6ZWJyYSJ9LDI1OntuYW1lOiIvbS8wM2JrMSIsaWQ6MjUsZGlzcGxheU5hbWU6ImdpcmFmZmUifSwyNzp7bmFtZToiL20vMDE5NDBqIixpZDoyNyxkaXNwbGF5TmFtZToiYmFja3BhY2sifSwyODp7bmFtZToiL20vMGhubmIiLGlkOjI4LGRpc3BsYXlOYW1lOiJ1bWJyZWxsYSJ9LDMxOntuYW1lOiIvbS8wODBoa2puIixpZDozMSxkaXNwbGF5TmFtZToiaGFuZGJhZyJ9LDMyOntuYW1lOiIvbS8wMXJrYnIiLGlkOjMyLGRpc3BsYXlOYW1lOiJ0aWUifSwzMzp7bmFtZToiL20vMDFzNTVuIixpZDozMyxkaXNwbGF5TmFtZToic3VpdGNhc2UifSwzNDp7bmFtZToiL20vMDJ3bWYiLGlkOjM0LGRpc3BsYXlOYW1lOiJmcmlzYmVlIn0sMzU6e25hbWU6Ii9tLzA3MXA5IixpZDozNSxkaXNwbGF5TmFtZToic2tpcyJ9LDM2OntuYW1lOiIvbS8wNl9fdiIsaWQ6MzYsZGlzcGxheU5hbWU6InNub3dib2FyZCJ9LDM3OntuYW1lOiIvbS8wMTh4bSIsaWQ6MzcsZGlzcGxheU5hbWU6InNwb3J0cyBiYWxsIn0sMzg6e25hbWU6Ii9tLzAyenQzIixpZDozOCxkaXNwbGF5TmFtZToia2l0ZSJ9LDM5OntuYW1lOiIvbS8wM2c4bXIiLGlkOjM5LGRpc3BsYXlOYW1lOiJiYXNlYmFsbCBiYXQifSw0MDp7bmFtZToiL20vMDNncnpsIixpZDo0MCxkaXNwbGF5TmFtZToiYmFzZWJhbGwgZ2xvdmUifSw0MTp7bmFtZToiL20vMDZfZnciLGlkOjQxLGRpc3BsYXlOYW1lOiJza2F0ZWJvYXJkIn0sNDI6e25hbWU6Ii9tLzAxOXc0MCIsaWQ6NDIsZGlzcGxheU5hbWU6InN1cmZib2FyZCJ9LDQzOntuYW1lOiIvbS8wZHY5YyIsaWQ6NDMsZGlzcGxheU5hbWU6InRlbm5pcyByYWNrZXQifSw0NDp7bmFtZToiL20vMDRkcjc2dyIsaWQ6NDQsZGlzcGxheU5hbWU6ImJvdHRsZSJ9LDQ2OntuYW1lOiIvbS8wOXR2Y2QiLGlkOjQ2LGRpc3BsYXlOYW1lOiJ3aW5lIGdsYXNzIn0sNDc6e25hbWU6Ii9tLzA4Z3FwbSIsaWQ6NDcsZGlzcGxheU5hbWU6ImN1cCJ9LDQ4OntuYW1lOiIvbS8wZHQzdCIsaWQ6NDgsZGlzcGxheU5hbWU6ImZvcmsifSw0OTp7bmFtZToiL20vMDRjdHgiLGlkOjQ5LGRpc3BsYXlOYW1lOiJrbmlmZSJ9LDUwOntuYW1lOiIvbS8wY214OCIsaWQ6NTAsZGlzcGxheU5hbWU6InNwb29uIn0sNTE6e25hbWU6Ii9tLzA0a2tnbSIsaWQ6NTEsZGlzcGxheU5hbWU6ImJvd2wifSw1Mjp7bmFtZToiL20vMDlxY2siLGlkOjUyLGRpc3BsYXlOYW1lOiJiYW5hbmEifSw1Mzp7bmFtZToiL20vMDE0ajFtIixpZDo1MyxkaXNwbGF5TmFtZToiYXBwbGUifSw1NDp7bmFtZToiL20vMGw1MTUiLGlkOjU0LGRpc3BsYXlOYW1lOiJzYW5kd2ljaCJ9LDU1OntuYW1lOiIvbS8wY3loal8iLGlkOjU1LGRpc3BsYXlOYW1lOiJvcmFuZ2UifSw1Njp7bmFtZToiL20vMGhreHEiLGlkOjU2LGRpc3BsYXlOYW1lOiJicm9jY29saSJ9LDU3OntuYW1lOiIvbS8wZmo1MnMiLGlkOjU3LGRpc3BsYXlOYW1lOiJjYXJyb3QifSw1ODp7bmFtZToiL20vMDFiOXhrIixpZDo1OCxkaXNwbGF5TmFtZToiaG90IGRvZyJ9LDU5OntuYW1lOiIvbS8wNjYzdiIsaWQ6NTksZGlzcGxheU5hbWU6InBpenphIn0sNjA6e25hbWU6Ii9tLzBqeTRrIixpZDo2MCxkaXNwbGF5TmFtZToiZG9udXQifSw2MTp7bmFtZToiL20vMGZzenQiLGlkOjYxLGRpc3BsYXlOYW1lOiJjYWtlIn0sNjI6e25hbWU6Ii9tLzAxbXpwdiIsaWQ6NjIsZGlzcGxheU5hbWU6ImNoYWlyIn0sNjM6e25hbWU6Ii9tLzAyY3JxMSIsaWQ6NjMsZGlzcGxheU5hbWU6ImNvdWNoIn0sNjQ6e25hbWU6Ii9tLzAzZnA0MSIsaWQ6NjQsZGlzcGxheU5hbWU6InBvdHRlZCBwbGFudCJ9LDY1OntuYW1lOiIvbS8wM3NzajUiLGlkOjY1LGRpc3BsYXlOYW1lOiJiZWQifSw2Nzp7bmFtZToiL20vMDRiY3IzIixpZDo2NyxkaXNwbGF5TmFtZToiZGluaW5nIHRhYmxlIn0sNzA6e25hbWU6Ii9tLzA5ZzF3IixpZDo3MCxkaXNwbGF5TmFtZToidG9pbGV0In0sNzI6e25hbWU6Ii9tLzA3YzUyIixpZDo3MixkaXNwbGF5TmFtZToidHYifSw3Mzp7bmFtZToiL20vMDFjNjQ4IixpZDo3MyxkaXNwbGF5TmFtZToibGFwdG9wIn0sNzQ6e25hbWU6Ii9tLzAyMGxmIixpZDo3NCxkaXNwbGF5TmFtZToibW91c2UifSw3NTp7bmFtZToiL20vMHFqamMiLGlkOjc1LGRpc3BsYXlOYW1lOiJyZW1vdGUifSw3Njp7bmFtZToiL20vMDFtMnYiLGlkOjc2LGRpc3BsYXlOYW1lOiJrZXlib2FyZCJ9LDc3OntuYW1lOiIvbS8wNTBrOCIsaWQ6NzcsZGlzcGxheU5hbWU6ImNlbGwgcGhvbmUifSw3ODp7bmFtZToiL20vMGZ4OWwiLGlkOjc4LGRpc3BsYXlOYW1lOiJtaWNyb3dhdmUifSw3OTp7bmFtZToiL20vMDI5Ynh6IixpZDo3OSxkaXNwbGF5TmFtZToib3ZlbiJ9LDgwOntuYW1lOiIvbS8wMWs2czMiLGlkOjgwLGRpc3BsYXlOYW1lOiJ0b2FzdGVyIn0sODE6e25hbWU6Ii9tLzAxMzBqeCIsaWQ6ODEsZGlzcGxheU5hbWU6InNpbmsifSw4Mjp7bmFtZToiL20vMDQwYl90IixpZDo4MixkaXNwbGF5TmFtZToicmVmcmlnZXJhdG9yIn0sODQ6e25hbWU6Ii9tLzBidF9jMyIsaWQ6ODQsZGlzcGxheU5hbWU6ImJvb2sifSw4NTp7bmFtZToiL20vMDF4M3oiLGlkOjg1LGRpc3BsYXlOYW1lOiJjbG9jayJ9LDg2OntuYW1lOiIvbS8wMnMxOTUiLGlkOjg2LGRpc3BsYXlOYW1lOiJ2YXNlIn0sODc6e25hbWU6Ii9tLzAxbHNtbSIsaWQ6ODcsZGlzcGxheU5hbWU6InNjaXNzb3JzIn0sODg6e25hbWU6Ii9tLzBrbWc0IixpZDo4OCxkaXNwbGF5TmFtZToidGVkZHkgYmVhciJ9LDg5OntuYW1lOiIvbS8wM3d2c2siLGlkOjg5LGRpc3BsYXlOYW1lOiJoYWlyIGRyaWVyIn0sOTA6e25hbWU6Ii9tLzAxMnhmZiIsaWQ6OTAsZGlzcGxheU5hbWU6InRvb3RoYnJ1c2gifX07Y2xhc3MgaXtjb25zdHJ1Y3RvcihsLGMpe3RoaXMubW9kZWxQYXRoPWN8fGBodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdGZqcy1tb2RlbHMvc2F2ZWRtb2RlbC8ke3RoaXMuZ2V0UHJlZml4KGwpfS9tb2RlbC5qc29uYH1nZXRQcmVmaXgobCl7cmV0dXJuIGw9PT0ibGl0ZV9tb2JpbGVuZXRfdjIiP2Bzc2Qke2x9YDpgc3NkXyR7bH1gfWFzeW5jIGxvYWQoKXt0aGlzLm1vZGVsPWF3YWl0IHMubG9hZEdyYXBoTW9kZWwodGhpcy5tb2RlbFBhdGgpO2NvbnN0IGw9ci56ZXJvcyhbMSwzMDAsMzAwLDNdLCJpbnQzMiIpLGM9YXdhaXQgdGhpcy5tb2RlbC5leGVjdXRlQXN5bmMobCk7YXdhaXQgUHJvbWlzZS5hbGwoYy5tYXAoKGg9PmguZGF0YSgpKSkpLGMubWFwKChoPT5oLmRpc3Bvc2UoKSkpLGwuZGlzcG9zZSgpfWFzeW5jIGluZmVyKGwsYyxoKXtjb25zdCBwPXIudGlkeSgoKCk9PihsIGluc3RhbmNlb2Ygci5UZW5zb3J8fChsPXIuYnJvd3Nlci5mcm9tUGl4ZWxzKGwpKSxyLmV4cGFuZERpbXMobCkpKSksZj1wLnNoYXBlWzFdLGc9cC5zaGFwZVsyXSx5PWF3YWl0IHRoaXMubW9kZWwuZXhlY3V0ZUFzeW5jKHApLHc9eVswXS5kYXRhU3luYygpLGI9eVsxXS5kYXRhU3luYygpO3AuZGlzcG9zZSgpLHIuZGlzcG9zZSh5KTtjb25zdFt2LFNdPXRoaXMuY2FsY3VsYXRlTWF4U2NvcmVzKHcseVswXS5zaGFwZVsxXSx5WzBdLnNoYXBlWzJdKSwkPXIuZ2V0QmFja2VuZCgpO3IuZ2V0QmFja2VuZCgpPT09IndlYmdsIiYmci5zZXRCYWNrZW5kKCJjcHUiKTtjb25zdCBrPXIudGlkeSgoKCk9Pntjb25zdCBEPXIudGVuc29yMmQoYixbeVsxXS5zaGFwZVsxXSx5WzFdLnNoYXBlWzNdXSk7cmV0dXJuIHIuaW1hZ2Uubm9uTWF4U3VwcHJlc3Npb24oRCx2LGMsaCxoKX0pKSxUPWsuZGF0YVN5bmMoKTtyZXR1cm4gay5kaXNwb3NlKCksJCE9PXIuZ2V0QmFja2VuZCgpJiZyLnNldEJhY2tlbmQoJCksdGhpcy5idWlsZERldGVjdGVkT2JqZWN0cyhnLGYsYix2LFQsUyl9YnVpbGREZXRlY3RlZE9iamVjdHMobCxjLGgscCxmLGcpe2NvbnN0IHk9Zi5sZW5ndGgsdz1bXTtmb3IobGV0IGI9MDtiPHk7YisrKXtjb25zdCB2PVtdO2ZvcihsZXQgRD0wO0Q8NDtEKyspdltEXT1oWzQqZltiXStEXTtjb25zdCBTPXZbMF0qYywkPXZbMV0qbCxrPXZbMl0qYyxUPXZbM10qbDt2WzBdPSQsdlsxXT1TLHZbMl09VC0kLHZbM109ay1TLHcucHVzaCh7YmJveDp2LGNsYXNzOm9bZ1tmW2JdXSsxXS5kaXNwbGF5TmFtZSxzY29yZTpwW2ZbYl1dfSl9cmV0dXJuIHd9Y2FsY3VsYXRlTWF4U2NvcmVzKGwsYyxoKXtjb25zdCBwPVtdLGY9W107Zm9yKGxldCBnPTA7ZzxjO2crKyl7bGV0IHk9TnVtYmVyLk1JTl9WQUxVRSx3PS0xO2ZvcihsZXQgYj0wO2I8aDtiKyspbFtnKmgrYl0+eSYmKHk9bFtnKmgrYl0sdz1iKTtwW2ddPXksZltnXT13fXJldHVybltwLGZdfWFzeW5jIGRldGVjdChsLGM9MjAsaD0uNSl7cmV0dXJuIHRoaXMuaW5mZXIobCxjLGgpfWRpc3Bvc2UoKXt0aGlzLm1vZGVsIT1udWxsJiZ0aGlzLm1vZGVsLmRpc3Bvc2UoKX19dC5PYmplY3REZXRlY3Rpb249aSx0LmxvYWQ9YXN5bmMgZnVuY3Rpb24oYT17fSl7aWYocj09bnVsbCl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIFRlbnNvckZsb3cuanMuIElmIHlvdSBhcmUgdXNpbmcgYSA8c2NyaXB0PiB0YWcsIHBsZWFzZSBhbHNvIGluY2x1ZGUgQHRlbnNvcmZsb3cvdGZqcyBvbiB0aGUgcGFnZSBiZWZvcmUgdXNpbmcgdGhpcyBtb2RlbC4iKTtjb25zdCBsPWEuYmFzZXx8ImxpdGVfbW9iaWxlbmV0X3YyIixjPWEubW9kZWxVcmw7aWYoWyJtb2JpbGVuZXRfdjEiLCJtb2JpbGVuZXRfdjIiLCJsaXRlX21vYmlsZW5ldF92MiJdLmluZGV4T2YobCk9PT0tMSl0aHJvdyBuZXcgRXJyb3IoYE9iamVjdERldGVjdGlvbiBjb25zdHJ1Y3RlZCB3aXRoIGludmFsaWQgYmFzZSBtb2RlbCAke2x9LiBWYWxpZCBuYW1lcyBhcmUgJ21vYmlsZW5ldF92MScsICdtb2JpbGVuZXRfdjInIGFuZCAnbGl0ZV9tb2JpbGVuZXRfdjInLmApO2NvbnN0IGg9bmV3IGkobCxjKTtyZXR1cm4gYXdhaXQgaC5sb2FkKCksaH0sdC52ZXJzaW9uPSIyLjIuMyIsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSkpfSkoRGMsRGMuZXhwb3J0cykpLERjLmV4cG9ydHN9dmFyIHZpZT13aWUoKTtjbGFzcyBTaWV7Y29uc3RydWN0b3IoKXtEbih0aGlzLCJtb2RlbCIsbnVsbCl9YXN5bmMgbG9hZE1vZGVsKCl7dHJ5e3JldHVybiBjb25zb2xlLmxvZygiTG9hZGluZyBDT0NPLVNTRCBtb2RlbC4uLiIpLHRoaXMubW9kZWw9YXdhaXQgdmllLmxvYWQoe2Jhc2U6Im1vYmlsZW5ldF92MiJ9KSxjb25zb2xlLmxvZygiQ09DTy1TU0QgbW9kZWwgbG9hZGVkIHN1Y2Nlc3NmdWxseSIpLCEwfWNhdGNoKGUpe3JldHVybiBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gbG9hZCBDT0NPLVNTRCBtb2RlbDoiLGUpLCExfX1hc3luYyBkZXRlY3QoZSl7aWYoIXRoaXMubW9kZWwpcmV0dXJuIGNvbnNvbGUubG9nKCLimqDvuI8gTW9kZWwgbm90IGxvYWRlZCwgdXNpbmcgbW9jayBkZXRlY3Rpb24gZm9yIHRlc3RpbmciKSx0aGlzLm1vY2tEZXRlY3Rpb24oKTt0cnl7cmV0dXJuKGF3YWl0IHRoaXMubW9kZWwuZGV0ZWN0KGUpKS5tYXAoKHIsbyk9Pih7YmJveDpbci5iYm94WzBdL2Uud2lkdGgsci5iYm94WzFdL2UuaGVpZ2h0LHIuYmJveFsyXS9lLndpZHRoLHIuYmJveFszXS9lLmhlaWdodF0sc2NvcmU6ci5zY29yZSxjbGFzc0lkOm8sY2xhc3NOYW1lOnIuY2xhc3N9KSl9Y2F0Y2godCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoIkRldGVjdGlvbiBlcnJvcjoiLHQpLHRoaXMubW9ja0RldGVjdGlvbigpfX1tb2NrRGV0ZWN0aW9uKCl7cmV0dXJuIERhdGUubm93KCklMWU0PDEwMD8oY29uc29sZS5sb2coIvCfjq0gTW9jayBkZXRlY3Rpb246IHBlcnNvbiBkZXRlY3RlZCAoZm9yIHRlc3RpbmcgbWVkaWEgY2FwdHVyZSkiKSxbe2Jib3g6Wy4zLC4zLC40LC40XSxzY29yZTouODUsY2xhc3NJZDowLGNsYXNzTmFtZToicGVyc29uIn1dKTpbXX1kaXNwb3NlKCl7dGhpcy5tb2RlbCYmKHRoaXMubW9kZWw9bnVsbCl9fWNsYXNzIE5pZXtjb25zdHJ1Y3Rvcigpe0RuKHRoaXMsImRiIixudWxsKTtEbih0aGlzLCJEQl9OQU1FIiwiU2VjdXJpdHlBcHBEQiIpO0RuKHRoaXMsIkRCX1ZFUlNJT04iLDEpO0RuKHRoaXMsIkVWRU5UU19TVE9SRSIsImV2ZW50cyIpO0RuKHRoaXMsIlNFVFRJTkdTX1NUT1JFIiwic2V0dGluZ3MiKTtEbih0aGlzLCJTWU5DX1FVRVVFX1NUT1JFIiwic3luY1F1ZXVlIik7RG4odGhpcywiQkxPQlNfU1RPUkUiLCJibG9icyIpfWFzeW5jIGluaXRpYWxpemUoKXtyZXR1cm4gbmV3IFByb21pc2UoKGUsdCk9Pntjb25zdCBzPWluZGV4ZWREQi5vcGVuKHRoaXMuREJfTkFNRSx0aGlzLkRCX1ZFUlNJT04pO3Mub25lcnJvcj0oKT0+dChzLmVycm9yKSxzLm9uc3VjY2Vzcz0oKT0+e3RoaXMuZGI9cy5yZXN1bHQsY29uc29sZS5sb2coIuKchSBMb2NhbCBzdG9yYWdlIGluaXRpYWxpemVkIiksZSgpfSxzLm9udXBncmFkZW5lZWRlZD1yPT57Y29uc3Qgbz1yLnRhcmdldC5yZXN1bHQ7aWYoIW8ub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyh0aGlzLkVWRU5UU19TVE9SRSkpe2NvbnN0IGk9by5jcmVhdGVPYmplY3RTdG9yZSh0aGlzLkVWRU5UU19TVE9SRSx7a2V5UGF0aDoiaWQifSk7aS5jcmVhdGVJbmRleCgidGltZXN0YW1wIiwidGltZXN0YW1wIix7dW5pcXVlOiExfSksaS5jcmVhdGVJbmRleCgidHlwZSIsInR5cGUiLHt1bmlxdWU6ITF9KSxpLmNyZWF0ZUluZGV4KCJzeW5jZWQiLCJzeW5jZWQiLHt1bmlxdWU6ITF9KX1pZihvLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnModGhpcy5TRVRUSU5HU19TVE9SRSl8fG8uY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5TRVRUSU5HU19TVE9SRSx7a2V5UGF0aDoiaWQifSksIW8ub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyh0aGlzLlNZTkNfUVVFVUVfU1RPUkUpKXtjb25zdCBpPW8uY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5TWU5DX1FVRVVFX1NUT1JFLHtrZXlQYXRoOiJpZCJ9KTtpLmNyZWF0ZUluZGV4KCJwcmlvcml0eSIsInByaW9yaXR5Iix7dW5pcXVlOiExfSksaS5jcmVhdGVJbmRleCgiYXR0ZW1wdHMiLCJhdHRlbXB0cyIse3VuaXF1ZTohMX0pfWlmKCFvLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnModGhpcy5CTE9CU19TVE9SRSkpe2NvbnN0IGk9by5jcmVhdGVPYmplY3RTdG9yZSh0aGlzLkJMT0JTX1NUT1JFLHtrZXlQYXRoOiJpZCJ9KTtpLmNyZWF0ZUluZGV4KCJldmVudElkIiwiZXZlbnRJZCIse3VuaXF1ZTohMX0pLGkuY3JlYXRlSW5kZXgoInR5cGUiLCJ0eXBlIix7dW5pcXVlOiExfSl9fX0pfWFzeW5jIHNhdmVFdmVudChlKXtpZighdGhpcy5kYil0aHJvdyBuZXcgRXJyb3IoIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZCIpO2NvbnN0IHQ9ey4uLmUsaWQ6YGV2dF8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsOSl9YCxzeW5jZWQ6ITEsc3luY0F0dGVtcHRzOjB9LHI9dGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5FVkVOVFNfU1RPUkVdLCJyZWFkd3JpdGUiKS5vYmplY3RTdG9yZSh0aGlzLkVWRU5UU19TVE9SRSk7cmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChpLGEpPT57Y29uc3QgbD1yLmFkZCh0KTtsLm9uc3VjY2Vzcz0oKT0+aSgpLGwub25lcnJvcj0oKT0+YShsLmVycm9yKX0pLChhd2FpdCB0aGlzLmdldFNldHRpbmdzKCkpPy5jbG91ZFN5bmMmJmF3YWl0IHRoaXMuYWRkVG9TeW5jUXVldWUoe2lkOmBzeW5jXyR7dC5pZH1gLGV2ZW50SWQ6dC5pZCx0eXBlOiJldmVudCIsZGF0YTp0LHByaW9yaXR5OnRoaXMuZ2V0RXZlbnRQcmlvcml0eSh0KSxhdHRlbXB0czowfSksY29uc29sZS5sb2coIvCfk4EgRXZlbnQgc2F2ZWQgbG9jYWxseToiLHQuaWQpLHR9YXN5bmMgZ2V0RXZlbnRzKGUpe2lmKCF0aGlzLmRiKXRocm93IG5ldyBFcnJvcigiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkIik7Y29uc3Qgcj10aGlzLmRiLnRyYW5zYWN0aW9uKFt0aGlzLkVWRU5UU19TVE9SRV0sInJlYWRvbmx5Iikub2JqZWN0U3RvcmUodGhpcy5FVkVOVFNfU1RPUkUpLmluZGV4KCJ0aW1lc3RhbXAiKTtyZXR1cm4gbmV3IFByb21pc2UoKG8saSk9Pntjb25zdCBhPVtdLGw9ci5vcGVuQ3Vyc29yKG51bGwsInByZXYiKTtsLm9uc3VjY2Vzcz1jPT57Y29uc3QgaD1jLnRhcmdldC5yZXN1bHQ7aWYoaCYmKCFlPy5saW1pdHx8YS5sZW5ndGg8ZS5saW1pdCkpe2NvbnN0IHA9aC52YWx1ZTtpZihlPy5zaW5jZSYmcC50aW1lc3RhbXA8ZS5zaW5jZSl7aC5jb250aW51ZSgpO3JldHVybn1pZihlPy50eXBlJiZwLnR5cGUhPT1lLnR5cGUpe2guY29udGludWUoKTtyZXR1cm59aWYoZT8ub25seVVuc3luY2VkJiZwLnN5bmNlZCl7aC5jb250aW51ZSgpO3JldHVybn1hLnB1c2gocCksaC5jb250aW51ZSgpfWVsc2UgbyhhKX0sbC5vbmVycm9yPSgpPT5pKGwuZXJyb3IpfSl9YXN5bmMgbWFya0V2ZW50U3luY2VkKGUpe2lmKCF0aGlzLmRiKXRocm93IG5ldyBFcnJvcigiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkIik7Y29uc3Qgcz10aGlzLmRiLnRyYW5zYWN0aW9uKFt0aGlzLkVWRU5UU19TVE9SRV0sInJlYWR3cml0ZSIpLm9iamVjdFN0b3JlKHRoaXMuRVZFTlRTX1NUT1JFKSxyPXMuZ2V0KGUpO3JldHVybiBuZXcgUHJvbWlzZSgobyxpKT0+e3Iub25zdWNjZXNzPSgpPT57Y29uc3QgYT1yLnJlc3VsdDtpZihhKXthLnN5bmNlZD0hMCxhLmxhc3RTeW5jQXR0ZW1wdD1uZXcgRGF0ZTtjb25zdCBsPXMucHV0KGEpO2wub25zdWNjZXNzPSgpPT5vKCksbC5vbmVycm9yPSgpPT5pKGwuZXJyb3IpfWVsc2UgaShuZXcgRXJyb3IoIkV2ZW50IG5vdCBmb3VuZCIpKX0sci5vbmVycm9yPSgpPT5pKHIuZXJyb3IpfSl9YXN5bmMgc2F2ZVNldHRpbmdzKGUpe2lmKCF0aGlzLmRiKXRocm93IG5ldyBFcnJvcigiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkIik7Y29uc3QgdD17Li4uZSxpZDoiYXBwX3NldHRpbmdzIixsYXN0TW9kaWZpZWQ6bmV3IERhdGUsc3luY2VkOiExfSxyPXRoaXMuZGIudHJhbnNhY3Rpb24oW3RoaXMuU0VUVElOR1NfU1RPUkVdLCJyZWFkd3JpdGUiKS5vYmplY3RTdG9yZSh0aGlzLlNFVFRJTkdTX1NUT1JFKTtyZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKG8saSk9Pntjb25zdCBhPXIucHV0KHQpO2Eub25zdWNjZXNzPSgpPT5vKCksYS5vbmVycm9yPSgpPT5pKGEuZXJyb3IpfSksdC5jbG91ZFN5bmMmJmF3YWl0IHRoaXMuYWRkVG9TeW5jUXVldWUoe2lkOiJzeW5jX3NldHRpbmdzIixldmVudElkOiJhcHBfc2V0dGluZ3MiLHR5cGU6InNldHRpbmdzIixkYXRhOnQscHJpb3JpdHk6MSxhdHRlbXB0czowfSksY29uc29sZS5sb2coIuKame+4jyBTZXR0aW5ncyBzYXZlZCBsb2NhbGx5IiksdH1hc3luYyBnZXRTZXR0aW5ncygpe2lmKCF0aGlzLmRiKXRocm93IG5ldyBFcnJvcigiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkIik7Y29uc3QgdD10aGlzLmRiLnRyYW5zYWN0aW9uKFt0aGlzLlNFVFRJTkdTX1NUT1JFXSwicmVhZG9ubHkiKS5vYmplY3RTdG9yZSh0aGlzLlNFVFRJTkdTX1NUT1JFKTtyZXR1cm4gbmV3IFByb21pc2UoKHMscik9Pntjb25zdCBvPXQuZ2V0KCJhcHBfc2V0dGluZ3MiKTtvLm9uc3VjY2Vzcz0oKT0+cyhvLnJlc3VsdHx8bnVsbCksby5vbmVycm9yPSgpPT5yKG8uZXJyb3IpfSl9YXN5bmMgYWRkVG9TeW5jUXVldWUoZSl7aWYoIXRoaXMuZGIpdGhyb3cgbmV3IEVycm9yKCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWQiKTtjb25zdCBzPXRoaXMuZGIudHJhbnNhY3Rpb24oW3RoaXMuU1lOQ19RVUVVRV9TVE9SRV0sInJlYWR3cml0ZSIpLm9iamVjdFN0b3JlKHRoaXMuU1lOQ19RVUVVRV9TVE9SRSk7cmV0dXJuIG5ldyBQcm9taXNlKChyLG8pPT57Y29uc3QgaT1zLnB1dChlKTtpLm9uc3VjY2Vzcz0oKT0+cigpLGkub25lcnJvcj0oKT0+byhpLmVycm9yKX0pfWFzeW5jIGdldFN5bmNRdWV1ZShlPTEwKXtpZighdGhpcy5kYil0aHJvdyBuZXcgRXJyb3IoIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZCIpO2NvbnN0IHI9dGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5TWU5DX1FVRVVFX1NUT1JFXSwicmVhZG9ubHkiKS5vYmplY3RTdG9yZSh0aGlzLlNZTkNfUVVFVUVfU1RPUkUpLmluZGV4KCJwcmlvcml0eSIpO3JldHVybiBuZXcgUHJvbWlzZSgobyxpKT0+e2NvbnN0IGE9W10sbD1yLm9wZW5DdXJzb3IobnVsbCwicHJldiIpO2wub25zdWNjZXNzPWM9Pntjb25zdCBoPWMudGFyZ2V0LnJlc3VsdDtoJiZhLmxlbmd0aDxlPyhhLnB1c2goaC52YWx1ZSksaC5jb250aW51ZSgpKTpvKGEpfSxsLm9uZXJyb3I9KCk9PmkobC5lcnJvcil9KX1hc3luYyByZW1vdmVTeW5jUXVldWVJdGVtKGUpe2lmKCF0aGlzLmRiKXRocm93IG5ldyBFcnJvcigiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkIik7Y29uc3Qgcz10aGlzLmRiLnRyYW5zYWN0aW9uKFt0aGlzLlNZTkNfUVVFVUVfU1RPUkVdLCJyZWFkd3JpdGUiKS5vYmplY3RTdG9yZSh0aGlzLlNZTkNfUVVFVUVfU1RPUkUpO3JldHVybiBuZXcgUHJvbWlzZSgocixvKT0+e2NvbnN0IGk9cy5kZWxldGUoZSk7aS5vbnN1Y2Nlc3M9KCk9PnIoKSxpLm9uZXJyb3I9KCk9Pm8oaS5lcnJvcil9KX1hc3luYyBnZXRTdG9yYWdlU3RhdHMoKXtpZighdGhpcy5kYil0aHJvdyBuZXcgRXJyb3IoIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZCIpO2NvbnN0W2UsdCxzXT1hd2FpdCBQcm9taXNlLmFsbChbdGhpcy5jb3VudFN0b3JlKHRoaXMuRVZFTlRTX1NUT1JFKSx0aGlzLmNvdW50SW5kZXgodGhpcy5FVkVOVFNfU1RPUkUsInN5bmNlZCIsITEpLHRoaXMuY291bnRTdG9yZSh0aGlzLlNZTkNfUVVFVUVfU1RPUkUpXSkscj1hd2FpdCB0aGlzLmVzdGltYXRlU3RvcmFnZVNpemUoKTtyZXR1cm57dG90YWxFdmVudHM6ZSx1bnN5bmNlZEV2ZW50czp0LHN0b3JhZ2VVc2VkOnIscXVldWVMZW5ndGg6c319YXN5bmMgY2xlYW51cE9sZEV2ZW50cyhlKXtpZighdGhpcy5kYil0aHJvdyBuZXcgRXJyb3IoIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZCIpO2NvbnN0IHQ9bmV3IERhdGU7dC5zZXREYXRlKHQuZ2V0RGF0ZSgpLWUpO2NvbnN0IG89dGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5FVkVOVFNfU1RPUkVdLCJyZWFkd3JpdGUiKS5vYmplY3RTdG9yZSh0aGlzLkVWRU5UU19TVE9SRSkuaW5kZXgoInRpbWVzdGFtcCIpO2xldCBpPTA7cmV0dXJuIG5ldyBQcm9taXNlKChhLGwpPT57Y29uc3QgYz1vLm9wZW5DdXJzb3IoSURCS2V5UmFuZ2UudXBwZXJCb3VuZCh0KSk7Yy5vbnN1Y2Nlc3M9aD0+e2NvbnN0IHA9aC50YXJnZXQucmVzdWx0O3A/KHAudmFsdWUuc3luY2VkJiYocC5kZWxldGUoKSxpKyspLHAuY29udGludWUoKSk6KGNvbnNvbGUubG9nKGDwn6e5IENsZWFuZWQgdXAgJHtpfSBvbGQgZXZlbnRzYCksYShpKSl9LGMub25lcnJvcj0oKT0+bChjLmVycm9yKX0pfWdldEV2ZW50UHJpb3JpdHkoZSl7c3dpdGNoKGUudHlwZSl7Y2FzZSJhbGVydCI6cmV0dXJuIDU7Y2FzZSJkZXRlY3Rpb24iOnJldHVybiBlLmRldGVjdGlvbnMuc29tZSh0PT50LmNsYXNzTmFtZT09PSJwZXJzb24iKT80OjM7Y2FzZSJtb3Rpb24iOnJldHVybiAyO2Nhc2UibWFudWFsIjpyZXR1cm4gMTtkZWZhdWx0OnJldHVybiAxfX1hc3luYyBjb3VudFN0b3JlKGUpe2lmKCF0aGlzLmRiKXJldHVybiAwO2NvbnN0IHM9dGhpcy5kYi50cmFuc2FjdGlvbihbZV0sInJlYWRvbmx5Iikub2JqZWN0U3RvcmUoZSk7cmV0dXJuIG5ldyBQcm9taXNlKChyLG8pPT57Y29uc3QgaT1zLmNvdW50KCk7aS5vbnN1Y2Nlc3M9KCk9PnIoaS5yZXN1bHQpLGkub25lcnJvcj0oKT0+byhpLmVycm9yKX0pfWFzeW5jIGNvdW50SW5kZXgoZSx0LHMpe2lmKCF0aGlzLmRiKXJldHVybiAwO2NvbnN0IGk9dGhpcy5kYi50cmFuc2FjdGlvbihbZV0sInJlYWRvbmx5Iikub2JqZWN0U3RvcmUoZSkuaW5kZXgodCk7cmV0dXJuIG5ldyBQcm9taXNlKChhLGwpPT57Y29uc3QgYz1pLmNvdW50KHMpO2Mub25zdWNjZXNzPSgpPT5hKGMucmVzdWx0KSxjLm9uZXJyb3I9KCk9PmwoYy5lcnJvcil9KX1hc3luYyBlc3RpbWF0ZVN0b3JhZ2VTaXplKCl7aWYoIW5hdmlnYXRvci5zdG9yYWdlPy5lc3RpbWF0ZSlyZXR1cm4gMDt0cnl7cmV0dXJuKGF3YWl0IG5hdmlnYXRvci5zdG9yYWdlLmVzdGltYXRlKCkpLnVzYWdlfHwwfWNhdGNoe3JldHVybiAwfX19Y29uc3QgVnQ9bmV3IE5pZTtWdC5pbml0aWFsaXplKCkuY2F0Y2goY29uc29sZS5lcnJvcik7Y2xhc3Mga2lle2NvbnN0cnVjdG9yKCl7RG4odGhpcywiY29uZmlnIixudWxsKTtEbih0aGlzLCJiYXNlVXJsIiwiIil9Y29uZmlndXJlKGUpe2lmKGUuYXV0aE1ldGhvZD09PSJzYXMiJiZlLnNhc1Rva2VuKXtsZXQgdD1lLnNhc1Rva2VuO3Quc3RhcnRzV2l0aCgiPyIpJiYodD10LnN1YnN0cmluZygxKSksY29uc29sZS5sb2coIvCflKcgVXNpbmcgU0FTIHRva2VuIGFzLWlzIChubyBlbmNvZGluZy9kZWNvZGluZykiKSx0aGlzLmNvbmZpZz17Li4uZSxzYXNUb2tlbjp0fX1lbHNlIGlmKGUuYXV0aE1ldGhvZD09PSJhY2Nlc3NLZXkiJiZlLmFjY2Vzc0tleSl0aGlzLmNvbmZpZz1lLGNvbnNvbGUubG9nKCLwn5SRIFVzaW5nIGFjY2VzcyBrZXkgYXV0aGVudGljYXRpb24iKTtlbHNlIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBjb25maWd1cmF0aW9uOiBtdXN0IHByb3ZpZGUgZWl0aGVyIHNhc1Rva2VuIG9yIGFjY2Vzc0tleSIpO3RoaXMuYmFzZVVybD1gaHR0cHM6Ly8ke2UuYWNjb3VudE5hbWV9LmJsb2IuY29yZS53aW5kb3dzLm5ldC8ke2UuY29udGFpbmVyTmFtZX1gLGNvbnNvbGUubG9nKCLimIHvuI8gQXp1cmUgQmxvYiBTdG9yYWdlIGNvbmZpZ3VyZWQiKX1pc0NvbmZpZ3VyZWQoKXtyZXR1cm4gdGhpcy5jb25maWc/dGhpcy5jb25maWcuYXV0aE1ldGhvZD09PSJzYXMiPyEhKHRoaXMuY29uZmlnLnNhc1Rva2VuJiZ0aGlzLmNvbmZpZy5zYXNUb2tlbi5sZW5ndGg+MCk6dGhpcy5jb25maWcuYXV0aE1ldGhvZD09PSJhY2Nlc3NLZXkiPyEhKHRoaXMuY29uZmlnLmFjY2Vzc0tleSYmdGhpcy5jb25maWcuYWNjZXNzS2V5Lmxlbmd0aD4wKTohMTohMX1hc3luYyB1cGxvYWRFdmVudChlKXtpZighdGhpcy5pc0NvbmZpZ3VyZWQoKSlyZXR1cm57c3VjY2VzczohMSxlcnJvcjoiQmxvYiBzdG9yYWdlIG5vdCBjb25maWd1cmVkIn07dHJ5e2NvbnN0IHQ9ey4uLmUsaW1hZ2VCbG9iOnZvaWQgMCx2aWRlb0Jsb2I6dm9pZCAwfSxzPWBldmVudHMvJHtlLmlkfS5qc29uYCxyPWF3YWl0IHRoaXMudXBsb2FkSnNvbihzLHQpO3JldHVybiByLnN1Y2Nlc3MmJmUuaW1hZ2VCbG9iJiZhd2FpdCB0aGlzLnVwbG9hZEJsb2IoYGltYWdlcy8ke2UuaWR9LmpwZ2AsZS5pbWFnZUJsb2IpLHIuc3VjY2VzcyYmZS52aWRlb0Jsb2ImJmF3YWl0IHRoaXMudXBsb2FkQmxvYihgdmlkZW9zLyR7ZS5pZH0ubXA0YCxlLnZpZGVvQmxvYikscn1jYXRjaCh0KXtyZXR1cm4gY29uc29sZS5lcnJvcigiVXBsb2FkIGV2ZW50IGZhaWxlZDoiLHQpLHtzdWNjZXNzOiExLGVycm9yOnQgaW5zdGFuY2VvZiBFcnJvcj90Lm1lc3NhZ2U6IlVwbG9hZCBmYWlsZWQifX19YXN5bmMgdXBsb2FkU2V0dGluZ3MoZSl7aWYoIXRoaXMuaXNDb25maWd1cmVkKCkpcmV0dXJue3N1Y2Nlc3M6ITEsZXJyb3I6IkJsb2Igc3RvcmFnZSBub3QgY29uZmlndXJlZCJ9O3RyeXtyZXR1cm4gYXdhaXQgdGhpcy51cGxvYWRKc29uKCJzZXR0aW5ncy9hcHBfc2V0dGluZ3MuanNvbiIsZSl9Y2F0Y2godCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoIlVwbG9hZCBzZXR0aW5ncyBmYWlsZWQ6Iix0KSx7c3VjY2VzczohMSxlcnJvcjp0IGluc3RhbmNlb2YgRXJyb3I/dC5tZXNzYWdlOiJVcGxvYWQgZmFpbGVkIn19fWFzeW5jIGRvd25sb2FkRXZlbnRzKGUpe2lmKCF0aGlzLmlzQ29uZmlndXJlZCgpKXRocm93IG5ldyBFcnJvcigiQmxvYiBzdG9yYWdlIG5vdCBjb25maWd1cmVkIik7dHJ5e2NvbnN0IHQ9YXdhaXQgdGhpcy5saXN0QmxvYnMoImV2ZW50cy8iKSxzPVtdO2Zvcihjb25zdCByIG9mIHQpdHJ5e2NvbnN0IG89YXdhaXQgdGhpcy5kb3dubG9hZEpzb24oci5uYW1lKTtpZihlJiZuZXcgRGF0ZShvLnRpbWVzdGFtcCk8ZSljb250aW51ZTtpZihyLm5hbWUuaW5jbHVkZXMoIi5qc29uIikpe2NvbnN0IGk9ci5uYW1lLnJlcGxhY2UoImV2ZW50cy8iLCIiKS5yZXBsYWNlKCIuanNvbiIsIiIpO3RyeXtvLmltYWdlQmxvYj1hd2FpdCB0aGlzLmRvd25sb2FkQmxvYihgaW1hZ2VzLyR7aX0uanBnYCl9Y2F0Y2h7fXRyeXtvLnZpZGVvQmxvYj1hd2FpdCB0aGlzLmRvd25sb2FkQmxvYihgdmlkZW9zLyR7aX0ubXA0YCl9Y2F0Y2h7fX1zLnB1c2gobyl9Y2F0Y2gobyl7Y29uc29sZS53YXJuKGBGYWlsZWQgdG8gZG93bmxvYWQgZXZlbnQgJHtyLm5hbWV9OmAsbyl9cmV0dXJuIGNvbnNvbGUubG9nKGDimIHvuI8gRG93bmxvYWRlZCAke3MubGVuZ3RofSBldmVudHMgZnJvbSBjbG91ZGApLHN9Y2F0Y2godCl7dGhyb3cgY29uc29sZS5lcnJvcigiRG93bmxvYWQgZXZlbnRzIGZhaWxlZDoiLHQpLHR9fWFzeW5jIGRvd25sb2FkU2V0dGluZ3MoKXtpZighdGhpcy5pc0NvbmZpZ3VyZWQoKSl0aHJvdyBuZXcgRXJyb3IoIkJsb2Igc3RvcmFnZSBub3QgY29uZmlndXJlZCIpO3RyeXtjb25zdCBlPWF3YWl0IHRoaXMuZG93bmxvYWRKc29uKCJzZXR0aW5ncy9hcHBfc2V0dGluZ3MuanNvbiIpO3JldHVybiBjb25zb2xlLmxvZygi4piB77iPIFNldHRpbmdzIGRvd25sb2FkZWQgZnJvbSBjbG91ZCIpLGV9Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUud2FybigiTm8gc2V0dGluZ3MgZm91bmQgaW4gY2xvdWQgb3IgZG93bmxvYWQgZmFpbGVkOiIsZSksbnVsbH19YXN5bmMgY2xlYW51cENsb3VkRXZlbnRzKGUpe2lmKCF0aGlzLmlzQ29uZmlndXJlZCgpKXRocm93IG5ldyBFcnJvcigiQmxvYiBzdG9yYWdlIG5vdCBjb25maWd1cmVkIik7Y29uc3QgdD1uZXcgRGF0ZTt0LnNldERhdGUodC5nZXREYXRlKCktZSk7dHJ5e2NvbnN0IHM9YXdhaXQgdGhpcy5saXN0QmxvYnMoImV2ZW50cy8iKTtsZXQgcj0wO2Zvcihjb25zdCBvIG9mIHMpaWYoby5sYXN0TW9kaWZpZWQmJm8ubGFzdE1vZGlmaWVkPHQpdHJ5e2F3YWl0IHRoaXMuZGVsZXRlQmxvYihvLm5hbWUpO2NvbnN0IGk9by5uYW1lLnJlcGxhY2UoImV2ZW50cy8iLCIiKS5yZXBsYWNlKCIuanNvbiIsIiIpO3RyeXthd2FpdCB0aGlzLmRlbGV0ZUJsb2IoYGltYWdlcy8ke2l9LmpwZ2ApfWNhdGNoe310cnl7YXdhaXQgdGhpcy5kZWxldGVCbG9iKGB2aWRlb3MvJHtpfS5tcDRgKX1jYXRjaHt9cisrfWNhdGNoKGkpe2NvbnNvbGUud2FybihgRmFpbGVkIHRvIGRlbGV0ZSAke28ubmFtZX06YCxpKX1yZXR1cm4gY29uc29sZS5sb2coYOKYge+4jyBDbGVhbmVkIHVwICR7cn0gb2xkIGV2ZW50cyBmcm9tIGNsb3VkYCkscn1jYXRjaChzKXt0aHJvdyBjb25zb2xlLmVycm9yKCJDbG91ZCBjbGVhbnVwIGZhaWxlZDoiLHMpLHN9fWFzeW5jIHRlc3RDb25uZWN0aW9uKCl7aWYoIXRoaXMuaXNDb25maWd1cmVkKCkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoIuKdjCBDbG91ZCBzeW5jIG5vdCBjb25maWd1cmVkIiksITE7Y29uc29sZS5sb2coIvCflI0gVGVzdGluZyBjbG91ZCBjb25uZWN0aW9uLi4uIiksY29uc29sZS5sb2coIkFjY291bnQ6Iix0aGlzLmNvbmZpZz8uYWNjb3VudE5hbWUpLGNvbnNvbGUubG9nKCJDb250YWluZXI6Iix0aGlzLmNvbmZpZz8uY29udGFpbmVyTmFtZSksY29uc29sZS5sb2coIkF1dGggbWV0aG9kOiIsdGhpcy5jb25maWc/LmF1dGhNZXRob2QpLGNvbnNvbGUubG9nKCJCYXNlIFVSTDoiLHRoaXMuYmFzZVVybCksdGhpcy5jb25maWc/LmF1dGhNZXRob2Q9PT0ic2FzIiYmdGhpcy5jb25maWcuc2FzVG9rZW4mJmNvbnNvbGUubG9nKCJTQVMgdG9rZW4gKGZpcnN0IDUwIGNoYXJzKToiLHRoaXMuY29uZmlnLnNhc1Rva2VuLnN1YnN0cmluZygwLDUwKSsiLi4uIik7dHJ5e2NvbnNvbGUubG9nKCLwn5OLIFRlc3RpbmcgY29udGFpbmVyIGFjY2Vzcy4uLiIpO2NvbnN0IGU9YCR7dGhpcy5iYXNlVXJsfT9jb21wPWxpc3QmcmVzdHlwZT1jb250YWluZXImJHt0aGlzLmNvbmZpZz8uc2FzVG9rZW59YDtjb25zb2xlLmxvZygiTGlzdCBVUkw6IixlKTtjb25zdCB0PWF3YWl0IGZldGNoKGUpO2lmKGNvbnNvbGUubG9nKCJMaXN0IHJlc3BvbnNlIHN0YXR1czoiLHQuc3RhdHVzKSx0Lm9rKXtjb25zb2xlLmxvZygi4pyFIENvbnRhaW5lciBhY2Nlc3Mgc3VjY2Vzc2Z1bCIpO2NvbnN0IHM9e3Rlc3Q6ITAsdGltZXN0YW1wOm5ldyBEYXRlLG1lc3NhZ2U6IkNvbm5lY3Rpb24gdGVzdCBmcm9tIHNlY3VyaXR5IGFwcCJ9O2NvbnNvbGUubG9nKCLwn5OkIEF0dGVtcHRpbmcgdG8gdXBsb2FkIHRlc3QgZmlsZS4uLiIpO2NvbnN0IHI9YXdhaXQgdGhpcy51cGxvYWRKc29uKCJ0ZXN0L2Nvbm5lY3Rpb25fdGVzdC5qc29uIixzKTtpZihjb25zb2xlLmxvZygi8J+TiyBVcGxvYWQgcmVzdWx0OiIsciksci5zdWNjZXNzKXtjb25zb2xlLmxvZygi4pyFIFVwbG9hZCBzdWNjZXNzZnVsLCBjbGVhbmluZyB1cCB0ZXN0IGZpbGUuLi4iKTt0cnl7YXdhaXQgdGhpcy5kZWxldGVCbG9iKCJ0ZXN0L2Nvbm5lY3Rpb25fdGVzdC5qc29uIiksY29uc29sZS5sb2coIvCfl5HvuI8gVGVzdCBmaWxlIGNsZWFuZWQgdXAiKX1jYXRjaChvKXtjb25zb2xlLndhcm4oIuKaoO+4jyBDb3VsZCBub3QgY2xlYW4gdXAgdGVzdCBmaWxlOiIsbyl9cmV0dXJuIGNvbnNvbGUubG9nKCLimIHvuI8gQ2xvdWQgY29ubmVjdGlvbiB0ZXN0IHN1Y2Nlc3NmdWwiKSwhMH1lbHNlIHJldHVybiBjb25zb2xlLmVycm9yKCLinYwgVXBsb2FkIGZhaWxlZDoiLHIuZXJyb3IpLCExfWVsc2V7Y29uc3Qgcz1hd2FpdCB0LnRleHQoKTtyZXR1cm4gY29uc29sZS5lcnJvcigi4p2MIENvbnRhaW5lciBhY2Nlc3MgZmFpbGVkOiIsdC5zdGF0dXMscyksdC5zdGF0dXM9PT0wfHxzLmluY2x1ZGVzKCJDT1JTIik/KGNvbnNvbGUuZXJyb3IoIvCfmqsgQ09SUyBFcnJvcjogQ29uZmlndXJlIENPUlMgaW4gQXp1cmUgU3RvcmFnZSBBY2NvdW50IiksY29uc29sZS5lcnJvcigi8J+UpyBTb2x1dGlvbjogR28gdG8gQXp1cmUgUG9ydGFsIOKGkiBTdG9yYWdlIEFjY291bnQg4oaSIFNldHRpbmdzIOKGkiBSZXNvdXJjZSBzaGFyaW5nIChDT1JTKSIpLGNvbnNvbGUuZXJyb3IoIvCflKcgQWRkIHJ1bGU6IE9yaWdpbnM6ICosIE1ldGhvZHM6IEdFVCxQVVQsUE9TVCxERUxFVEUsSEVBRCxPUFRJT05TLCBIZWFkZXJzOiAqIikpOnQuc3RhdHVzPT09NDA0Pyhjb25zb2xlLmVycm9yKCLwn5qrIENvbnRhaW5lciBub3QgZm91bmQ6IHNlY3VyaXR5LWV2ZW50cyIpLGNvbnNvbGUuZXJyb3IoIvCflKcgU29sdXRpb246IENyZWF0ZSB0aGUgY29udGFpbmVyIGluIEF6dXJlIFBvcnRhbCIpKTp0LnN0YXR1cz09PTQwMyYmKGNvbnNvbGUuZXJyb3IoIvCfmqsgQWNjZXNzIGRlbmllZDogQ2hlY2sgU0FTIHRva2VuIHBlcm1pc3Npb25zIiksY29uc29sZS5lcnJvcigi8J+UpyBTb2x1dGlvbjogRW5zdXJlIFNBUyB0b2tlbiBoYXMgUmVhZCwgV3JpdGUsIERlbGV0ZSwgTGlzdCBwZXJtaXNzaW9ucyIpKSwhMX19Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoIuKdjCBDbG91ZCBjb25uZWN0aW9uIHRlc3QgZmFpbGVkOiIsZSksZSBpbnN0YW5jZW9mIFR5cGVFcnJvciYmZS5tZXNzYWdlLmluY2x1ZGVzKCJGYWlsZWQgdG8gZmV0Y2giKSYmKGNvbnNvbGUuZXJyb3IoIvCfmqsgTmV0d29yayBFcnJvcjogVGhpcyBpcyBsaWtlbHkgYSBDT1JTIGlzc3VlIiksY29uc29sZS5lcnJvcigi8J+UpyBTb2x1dGlvbjogQ29uZmlndXJlIENPUlMgaW4gQXp1cmUgU3RvcmFnZSBBY2NvdW50IikpLCExfX1hc3luYyBnZXRTdG9yYWdlSW5mbygpe2lmKCF0aGlzLmlzQ29uZmlndXJlZCgpKXRocm93IG5ldyBFcnJvcigiQmxvYiBzdG9yYWdlIG5vdCBjb25maWd1cmVkIik7dHJ5e2NvbnN0W2UsdCxzXT1hd2FpdCBQcm9taXNlLmFsbChbdGhpcy5saXN0QmxvYnMoImV2ZW50cy8iKSx0aGlzLmxpc3RCbG9icygiaW1hZ2VzLyIpLHRoaXMubGlzdEJsb2JzKCJ2aWRlb3MvIildKSxyPWUubGVuZ3RoK3QubGVuZ3RoK3MubGVuZ3RoLG89Wy4uLmUsLi4udCwuLi5zXS5yZWR1Y2UoKGksYSk9PmkrKGEuc2l6ZXx8MCksMCk7cmV0dXJue3RvdGFsQmxvYnM6cixlc3RpbWF0ZWRTaXplOm8sZXZlbnRzOmUubGVuZ3RoLGltYWdlczp0Lmxlbmd0aCx2aWRlb3M6cy5sZW5ndGh9fWNhdGNoKGUpe3Rocm93IGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBnZXQgc3RvcmFnZSBpbmZvOiIsZSksZX19YXN5bmMgdXBsb2FkSnNvbihlLHQpe2NvbnN0IHM9bmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHQsbnVsbCwyKV0se3R5cGU6ImFwcGxpY2F0aW9uL2pzb24ifSk7cmV0dXJuIHRoaXMudXBsb2FkQmxvYihlLHMpfWFzeW5jIHVwbG9hZEJsb2IoZSx0KXtpZighdGhpcy5jb25maWcpcmV0dXJue3N1Y2Nlc3M6ITEsZXJyb3I6Ik5vdCBjb25maWd1cmVkIn07aWYodGhpcy5jb25maWcuYXV0aE1ldGhvZCE9PSJzYXMifHwhdGhpcy5jb25maWcuc2FzVG9rZW4pcmV0dXJue3N1Y2Nlc3M6ITEsZXJyb3I6IlNBUyB0b2tlbiBhdXRoZW50aWNhdGlvbiByZXF1aXJlZCJ9O2NvbnN0IHM9YCR7dGhpcy5iYXNlVXJsfS8ke2V9PyR7dGhpcy5jb25maWcuc2FzVG9rZW59YDtjb25zb2xlLmxvZyhg8J+UhCBVcGxvYWRpbmcgJHtlfSB0byBBenVyZSBCbG9iIFN0b3JhZ2UuLi5gKTt0cnl7Y29uc3Qgcj1hd2FpdCBmZXRjaChzLHttZXRob2Q6IlBVVCIsYm9keTp0LGhlYWRlcnM6eyJ4LW1zLWJsb2ItdHlwZSI6IkJsb2NrQmxvYiIsIkNvbnRlbnQtVHlwZSI6dC50eXBlfHwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIn19KTtpZihyLm9rKXtjb25zdCBvPWAke3RoaXMuYmFzZVVybH0vJHtlfWA7cmV0dXJuIGNvbnNvbGUubG9nKGDinIUgU3VjY2Vzc2Z1bGx5IHVwbG9hZGVkICR7ZX1gKSx7c3VjY2VzczohMCxibG9iVXJsOm99fWVsc2V7Y29uc3Qgbz1hd2FpdCByLnRleHQoKTtjb25zb2xlLmVycm9yKGDinYwgVXBsb2FkIGZhaWxlZCBmb3IgJHtlfTpgLHIuc3RhdHVzLG8pO2xldCBpPWBIVFRQICR7ci5zdGF0dXN9OiAke299YDtyZXR1cm4gci5zdGF0dXM9PT00MDM/aT0iQWNjZXNzIGRlbmllZC4gQ2hlY2sgeW91ciBTQVMgdG9rZW4gcGVybWlzc2lvbnMgYW5kIGV4cGlyYXRpb24uIjpyLnN0YXR1cz09PTQwNCYmKGk9IkNvbnRhaW5lciBub3QgZm91bmQuIENoZWNrIHlvdXIgYWNjb3VudCBuYW1lIGFuZCBjb250YWluZXIgbmFtZS4iKSx7c3VjY2VzczohMSxlcnJvcjppfX19Y2F0Y2gocil7cmV0dXJuIGNvbnNvbGUuZXJyb3IoYOKdjCBOZXR3b3JrIGVycm9yIHVwbG9hZGluZyAke2V9OmAscikse3N1Y2Nlc3M6ITEsZXJyb3I6ciBpbnN0YW5jZW9mIEVycm9yP3IubWVzc2FnZToiTmV0d29yayBlcnJvciJ9fX1hc3luYyBkb3dubG9hZEpzb24oZSl7aWYoIXRoaXMuY29uZmlnfHx0aGlzLmNvbmZpZy5hdXRoTWV0aG9kIT09InNhcyJ8fCF0aGlzLmNvbmZpZy5zYXNUb2tlbil0aHJvdyBuZXcgRXJyb3IoIlNBUyB0b2tlbiBhdXRoZW50aWNhdGlvbiByZXF1aXJlZCIpO2NvbnN0IHQ9YCR7dGhpcy5iYXNlVXJsfS8ke2V9PyR7dGhpcy5jb25maWcuc2FzVG9rZW59YCxzPWF3YWl0IGZldGNoKHQpO2lmKCFzLm9rKXRocm93IG5ldyBFcnJvcihgSFRUUCAke3Muc3RhdHVzfTogJHtzLnN0YXR1c1RleHR9YCk7cmV0dXJuIHMuanNvbigpfWFzeW5jIGRvd25sb2FkQmxvYihlKXtpZighdGhpcy5jb25maWd8fHRoaXMuY29uZmlnLmF1dGhNZXRob2QhPT0ic2FzInx8IXRoaXMuY29uZmlnLnNhc1Rva2VuKXRocm93IG5ldyBFcnJvcigiU0FTIHRva2VuIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIik7Y29uc3QgdD1gJHt0aGlzLmJhc2VVcmx9LyR7ZX0/JHt0aGlzLmNvbmZpZy5zYXNUb2tlbn1gLHM9YXdhaXQgZmV0Y2godCk7aWYoIXMub2spdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cy5zdGF0dXN9OiAke3Muc3RhdHVzVGV4dH1gKTtyZXR1cm4gcy5ibG9iKCl9YXN5bmMgbGlzdEJsb2JzKGU9IiIpe2lmKCF0aGlzLmNvbmZpZ3x8dGhpcy5jb25maWcuYXV0aE1ldGhvZCE9PSJzYXMifHwhdGhpcy5jb25maWcuc2FzVG9rZW4pdGhyb3cgbmV3IEVycm9yKCJTQVMgdG9rZW4gYXV0aGVudGljYXRpb24gcmVxdWlyZWQiKTtjb25zdCB0PWAke3RoaXMuYmFzZVVybH0/Y29tcD1saXN0JnJlc3R5cGU9Y29udGFpbmVyJnByZWZpeD0ke2V9JiR7dGhpcy5jb25maWcuc2FzVG9rZW59YCxzPWF3YWl0IGZldGNoKHQpO2lmKCFzLm9rKXRocm93IG5ldyBFcnJvcihgSFRUUCAke3Muc3RhdHVzfTogJHtzLnN0YXR1c1RleHR9YCk7Y29uc3Qgcj1hd2FpdCBzLnRleHQoKSxvPVtdLGk9ci5tYXRjaCgvPEJsb2I+W1xzXFNdKj88XC9CbG9iPi9nKTtpZihpKWZvcihjb25zdCBhIG9mIGkpe2NvbnN0IGw9YS5tYXRjaCgvPE5hbWU+KC4qPyk8XC9OYW1lPi8pLGM9YS5tYXRjaCgvPENvbnRlbnQtTGVuZ3RoPihcZCspPFwvQ29udGVudC1MZW5ndGg+LyksaD1hLm1hdGNoKC88TGFzdC1Nb2RpZmllZD4oLio/KTxcL0xhc3QtTW9kaWZpZWQ+Lyk7bCYmby5wdXNoKHtuYW1lOmxbMV0sc2l6ZTpjP3BhcnNlSW50KGNbMV0pOnZvaWQgMCxsYXN0TW9kaWZpZWQ6aD9uZXcgRGF0ZShoWzFdKTp2b2lkIDB9KX1yZXR1cm4gb31hc3luYyBkZWxldGVCbG9iKGUpe2lmKCF0aGlzLmNvbmZpZ3x8dGhpcy5jb25maWcuYXV0aE1ldGhvZCE9PSJzYXMifHwhdGhpcy5jb25maWcuc2FzVG9rZW4pdGhyb3cgbmV3IEVycm9yKCJTQVMgdG9rZW4gYXV0aGVudGljYXRpb24gcmVxdWlyZWQiKTtjb25zdCB0PWAke3RoaXMuYmFzZVVybH0vJHtlfT8ke3RoaXMuY29uZmlnLnNhc1Rva2VufWAscz1hd2FpdCBmZXRjaCh0LHttZXRob2Q6IkRFTEVURSJ9KTtpZighcy5vayYmcy5zdGF0dXMhPT00MDQpdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cy5zdGF0dXN9OiAke3Muc3RhdHVzVGV4dH1gKX19Y29uc3QgZ3M9bmV3IGtpZTtjbGFzcyBDaWV7Y29uc3RydWN0b3IoKXtEbih0aGlzLCJpc1Byb2Nlc3NpbmciLCExKTtEbih0aGlzLCJzeW5jSW50ZXJ2YWwiLG51bGwpO0RuKHRoaXMsIlNZTkNfSU5URVJWQUxfTVMiLDNlNCk7RG4odGhpcywiTUFYX1JFVFJJRVMiLDMpO0RuKHRoaXMsIm9uU3luY1N0YXR1c0NoYW5nZSIpO0RuKHRoaXMsIm9uU3luY1Byb2dyZXNzIik7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9ubGluZSIsKCk9PnRoaXMuaGFuZGxlT25saW5lU3RhdGVDaGFuZ2UoITApKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigib2ZmbGluZSIsKCk9PnRoaXMuaGFuZGxlT25saW5lU3RhdGVDaGFuZ2UoITEpKX1hc3luYyBpbml0aWFsaXplKCl7dHJ5e2NvbnNvbGUubG9nKCLwn5SEIFN5bmMgcXVldWUgc2VydmljZSBpbml0aWFsaXplZCIpLG5hdmlnYXRvci5vbkxpbmUmJnRoaXMuc3RhcnRCYWNrZ3JvdW5kU3luYygpO2NvbnN0IGU9YXdhaXQgVnQuZ2V0U2V0dGluZ3MoKTtlPy5jbG91ZFN5bmMmJmUuYXp1cmVDb25maWcmJihncy5jb25maWd1cmUoe2FjY291bnROYW1lOmUuYXp1cmVDb25maWcuYWNjb3VudE5hbWUsY29udGFpbmVyTmFtZTplLmF6dXJlQ29uZmlnLmNvbnRhaW5lck5hbWUsc2FzVG9rZW46ZS5henVyZUNvbmZpZy5zYXNUb2tlbnx8IiIsYXV0aE1ldGhvZDoic2FzIn0pLHRoaXMucHJvY2Vzc1N5bmNRdWV1ZSgpKX1jYXRjaChlKXtjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBzeW5jIHNlcnZpY2U6IixlKX19YXN5bmMgY29uZmlndXJlQ2xvdWRTeW5jKGUpe3RyeXtpZihncy5jb25maWd1cmUoe2FjY291bnROYW1lOmUuYWNjb3VudE5hbWUsY29udGFpbmVyTmFtZTplLmNvbnRhaW5lck5hbWUsc2FzVG9rZW46ZS5zYXNUb2tlbixhdXRoTWV0aG9kOiJzYXMifSksYXdhaXQgZ3MudGVzdENvbm5lY3Rpb24oKSl7Y29uc29sZS5sb2coIuKYge+4jyBDbG91ZCBzeW5jIGNvbmZpZ3VyZWQgc3VjY2Vzc2Z1bGx5Iik7Y29uc3Qgcz1hd2FpdCBWdC5nZXRTZXR0aW5ncygpO3JldHVybiBhd2FpdCBWdC5zYXZlU2V0dGluZ3Moey4uLnMsY2xvdWRTeW5jOiEwLGF6dXJlQ29uZmlnOmV9KSx0aGlzLnN0YXJ0QmFja2dyb3VuZFN5bmMoKSwhMH1lbHNlIHRocm93IG5ldyBFcnJvcigiQ29ubmVjdGlvbiB0ZXN0IGZhaWxlZCIpfWNhdGNoKHQpe3JldHVybiBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gY29uZmlndXJlIGNsb3VkIHN5bmM6Iix0KSwhMX19YXN5bmMgc3luY05vdygpe3JldHVybiBjb25zb2xlLmxvZygi8J+UhCBNYW51YWwgc3luYyB0cmlnZ2VyZWQiKSx0aGlzLnByb2Nlc3NTeW5jUXVldWUoKX1hc3luYyBwcm9jZXNzU3luY1F1ZXVlKCl7aWYodGhpcy5pc1Byb2Nlc3NpbmcpcmV0dXJuIGNvbnNvbGUubG9nKCJTeW5jIGFscmVhZHkgaW4gcHJvZ3Jlc3MiKSx0aGlzLmdldFN5bmNTdGF0dXMoKTtpZighbmF2aWdhdG9yLm9uTGluZSlyZXR1cm4gY29uc29sZS5sb2coIk9mZmxpbmUgLSBza2lwcGluZyBzeW5jIiksdGhpcy5nZXRTeW5jU3RhdHVzKCk7aWYoIWdzLmlzQ29uZmlndXJlZCgpKXJldHVybiBjb25zb2xlLmxvZygiQ2xvdWQgbm90IGNvbmZpZ3VyZWQgLSBza2lwcGluZyBzeW5jIiksdGhpcy5nZXRTeW5jU3RhdHVzKCk7dGhpcy5pc1Byb2Nlc3Npbmc9ITA7Y29uc3QgZT1EYXRlLm5vdygpO2xldCB0PTA7Y29uc3Qgcz1bXTt0cnl7Y29uc3Qgbz1hd2FpdCBWdC5nZXRTeW5jUXVldWUoNTApO2lmKG8ubGVuZ3RoPT09MClyZXR1cm4gY29uc29sZS5sb2coIuKchSBObyBpdGVtcyB0byBzeW5jIiksdGhpcy5nZXRTeW5jU3RhdHVzKCk7Y29uc29sZS5sb2coYPCflIQgUHJvY2Vzc2luZyAke28ubGVuZ3RofSBzeW5jIGl0ZW1zYCksdGhpcy5vblN5bmNQcm9ncmVzcz8uKHt0b3RhbDpvLmxlbmd0aCxjb21wbGV0ZWQ6MCxwZXJjZW50YWdlOjB9KTtmb3IobGV0IGE9MDthPG8ubGVuZ3RoO2ErKyl7Y29uc3QgbD1vW2FdO3RyeXt0aGlzLm9uU3luY1Byb2dyZXNzPy4oe3RvdGFsOm8ubGVuZ3RoLGNvbXBsZXRlZDphLGN1cnJlbnQ6YFN5bmNpbmcgJHtsLnR5cGV9OiAke2wuZXZlbnRJZH1gLHBlcmNlbnRhZ2U6TWF0aC5yb3VuZChhL28ubGVuZ3RoKjEwMCl9KSxhd2FpdCB0aGlzLnByb2Nlc3NTeW5jSXRlbShsKT8oYXdhaXQgVnQucmVtb3ZlU3luY1F1ZXVlSXRlbShsLmlkKSxsLnR5cGU9PT0iZXZlbnQiJiZhd2FpdCBWdC5tYXJrRXZlbnRTeW5jZWQobC5ldmVudElkKSx0KyssY29uc29sZS5sb2coYOKchSBTeW5jZWQgJHtsLnR5cGV9OiAke2wuZXZlbnRJZH1gKSk6KGwuYXR0ZW1wdHMrKyxsLmxhc3RBdHRlbXB0PW5ldyBEYXRlLGwuYXR0ZW1wdHM+PXRoaXMuTUFYX1JFVFJJRVM/KGF3YWl0IFZ0LnJlbW92ZVN5bmNRdWV1ZUl0ZW0obC5pZCkscy5wdXNoKGBGYWlsZWQgdG8gc3luYyAke2wudHlwZX06ICR7bC5ldmVudElkfSBhZnRlciAke3RoaXMuTUFYX1JFVFJJRVN9IGF0dGVtcHRzYCksY29uc29sZS5lcnJvcihg4p2MIEdpdmluZyB1cCBvbiAke2wudHlwZX06ICR7bC5ldmVudElkfWApKTooYXdhaXQgVnQuYWRkVG9TeW5jUXVldWUobCksY29uc29sZS53YXJuKGDimqDvuI8gUmV0cnkgJHtsLmF0dGVtcHRzfS8ke3RoaXMuTUFYX1JFVFJJRVN9IGZvciAke2wudHlwZX06ICR7bC5ldmVudElkfWApKSksYTxvLmxlbmd0aC0xJiZhd2FpdCB0aGlzLmRlbGF5KDEwMCl9Y2F0Y2goYyl7Y29uc3QgaD1gU3luYyBlcnJvciBmb3IgJHtsLnR5cGV9OiAke2wuZXZlbnRJZH0gLSAke2N9YDtzLnB1c2goaCksY29uc29sZS5lcnJvcihoKX19dGhpcy5vblN5bmNQcm9ncmVzcz8uKHt0b3RhbDpvLmxlbmd0aCxjb21wbGV0ZWQ6by5sZW5ndGgscGVyY2VudGFnZToxMDB9KTtjb25zdCBpPURhdGUubm93KCktZTtjb25zb2xlLmxvZyhg8J+UhCBTeW5jIGNvbXBsZXRlZDogJHt0fS8ke28ubGVuZ3RofSBpdGVtcyBpbiAke2l9bXNgKX1jYXRjaChvKXtjb25zdCBpPWBTeW5jIHByb2Nlc3MgZmFpbGVkOiAke299YDtzLnB1c2goaSksY29uc29sZS5lcnJvcihpKX1maW5hbGx5e3RoaXMuaXNQcm9jZXNzaW5nPSExfWNvbnN0IHI9dGhpcy5nZXRTeW5jU3RhdHVzKCk7cmV0dXJuIHRoaXMub25TeW5jU3RhdHVzQ2hhbmdlPy4ocikscn1hc3luYyBwcm9jZXNzU3luY0l0ZW0oZSl7dHJ5e3N3aXRjaChlLnR5cGUpe2Nhc2UiZXZlbnQiOnJldHVybihhd2FpdCBncy51cGxvYWRFdmVudChlLmRhdGEpKS5zdWNjZXNzO2Nhc2Uic2V0dGluZ3MiOnJldHVybihhd2FpdCBncy51cGxvYWRTZXR0aW5ncyhlLmRhdGEpKS5zdWNjZXNzO2RlZmF1bHQ6cmV0dXJuIGNvbnNvbGUud2FybihgVW5rbm93biBzeW5jIGl0ZW0gdHlwZTogJHtlLnR5cGV9YCksITF9fWNhdGNoKHQpe3JldHVybiBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyBzeW5jIGl0ZW0gJHtlLmlkfTpgLHQpLCExfX1hc3luYyBkb3dubG9hZEZyb21DbG91ZCgpe2lmKCFncy5pc0NvbmZpZ3VyZWQoKSl0aHJvdyBuZXcgRXJyb3IoIkNsb3VkIHN5bmMgbm90IGNvbmZpZ3VyZWQiKTtjb25zb2xlLmxvZygi4piB77iPIERvd25sb2FkaW5nIGRhdGEgZnJvbSBjbG91ZC4uLiIpO2xldCBlPTAsdD0hMSxzPTA7dHJ5e2NvbnN0IHI9YXdhaXQgZ3MuZG93bmxvYWRTZXR0aW5ncygpO2lmKHIpe2NvbnN0IGw9YXdhaXQgVnQuZ2V0U2V0dGluZ3MoKTsoIWx8fHIubGFzdE1vZGlmaWVkPmwubGFzdE1vZGlmaWVkKSYmKGF3YWl0IFZ0LnNhdmVTZXR0aW5ncyhyKSx0PSEwLGNvbnNvbGUubG9nKCLinIUgU2V0dGluZ3MgdXBkYXRlZCBmcm9tIGNsb3VkIikpfWNvbnN0IGk9KGF3YWl0IFZ0LmdldEV2ZW50cyh7bGltaXQ6MX0pKVswXT8udGltZXN0YW1wLGE9YXdhaXQgZ3MuZG93bmxvYWRFdmVudHMoaSk7Zm9yKGNvbnN0IGwgb2YgYSl0cnl7aWYoKGF3YWl0IFZ0LmdldEV2ZW50cyh7bGltaXQ6MSxzaW5jZTpuZXcgRGF0ZShsLnRpbWVzdGFtcC5nZXRUaW1lKCktMWUzKX0pKS5zb21lKHA9Pk1hdGguYWJzKHAudGltZXN0YW1wLmdldFRpbWUoKS1sLnRpbWVzdGFtcC5nZXRUaW1lKCkpPDFlMyYmcC5kZXRlY3Rpb25zLmxlbmd0aD09PWwuZGV0ZWN0aW9ucy5sZW5ndGgpKXMrKztlbHNle2NvbnN0IHA9YXdhaXQgVnQuc2F2ZUV2ZW50KHsuLi5sfSk7YXdhaXQgVnQubWFya0V2ZW50U3luY2VkKHAuaWQpLGUrK319Y2F0Y2goYyl7Y29uc29sZS53YXJuKCJGYWlsZWQgdG8gc2F2ZSBjbG91ZCBldmVudDoiLGMpfXJldHVybiBjb25zb2xlLmxvZyhg4piB77iPIERvd25sb2FkZWQgJHtlfSBuZXcgZXZlbnRzLCAke3N9IGNvbmZsaWN0cyByZXNvbHZlZGApLHtldmVudHM6ZSxzZXR0aW5nc1VwZGF0ZWQ6dCxjb25mbGljdHM6c319Y2F0Y2gocil7dGhyb3cgY29uc29sZS5lcnJvcigiRmFpbGVkIHRvIGRvd25sb2FkIGZyb20gY2xvdWQ6IixyKSxyfX1zdGFydEJhY2tncm91bmRTeW5jKCl7dGhpcy5zeW5jSW50ZXJ2YWx8fChjb25zb2xlLmxvZygi8J+UhCBTdGFydGluZyBiYWNrZ3JvdW5kIHN5bmMiKSx0aGlzLnN5bmNJbnRlcnZhbD13aW5kb3cuc2V0SW50ZXJ2YWwoKCk9PntuYXZpZ2F0b3Iub25MaW5lJiZncy5pc0NvbmZpZ3VyZWQoKSYmdGhpcy5wcm9jZXNzU3luY1F1ZXVlKCl9LHRoaXMuU1lOQ19JTlRFUlZBTF9NUykpfXN0b3BCYWNrZ3JvdW5kU3luYygpe3RoaXMuc3luY0ludGVydmFsJiYoY2xlYXJJbnRlcnZhbCh0aGlzLnN5bmNJbnRlcnZhbCksdGhpcy5zeW5jSW50ZXJ2YWw9bnVsbCxjb25zb2xlLmxvZygi4o+577iPIEJhY2tncm91bmQgc3luYyBzdG9wcGVkIikpfWdldFN5bmNTdGF0dXMoKXtyZXR1cm57aXNPbmxpbmU6bmF2aWdhdG9yLm9uTGluZSxpc1N5bmNpbmc6dGhpcy5pc1Byb2Nlc3NpbmcsbGFzdFN5bmNUaW1lOm5ldyBEYXRlLHBlbmRpbmdJdGVtczowLHRvdGFsU3luY2VkOjAsZXJyb3JzOltdfX1vblN0YXR1c0NoYW5nZShlKXt0aGlzLm9uU3luY1N0YXR1c0NoYW5nZT1lfW9uUHJvZ3Jlc3MoZSl7dGhpcy5vblN5bmNQcm9ncmVzcz1lfWhhbmRsZU9ubGluZVN0YXRlQ2hhbmdlKGUpe2NvbnNvbGUubG9nKGDwn5O2IE5ldHdvcmsgc3RhdHVzOiAke2U/Im9ubGluZSI6Im9mZmxpbmUifWApLGU/KHRoaXMuc3RhcnRCYWNrZ3JvdW5kU3luYygpLHNldFRpbWVvdXQoKCk9PnRoaXMucHJvY2Vzc1N5bmNRdWV1ZSgpLDFlMykpOnRoaXMuc3RvcEJhY2tncm91bmRTeW5jKCksdGhpcy5vblN5bmNTdGF0dXNDaGFuZ2U/Lih0aGlzLmdldFN5bmNTdGF0dXMoKSl9ZGVsYXkoZSl7cmV0dXJuIG5ldyBQcm9taXNlKHQ9PnNldFRpbWVvdXQodCxlKSl9YXN5bmMgY2xlYW51cChlKXtjb25zb2xlLmxvZyhg8J+nuSBTdGFydGluZyBjbGVhbnVwIChvbGRlciB0aGFuICR7ZX0gZGF5cylgKTtjb25zdFt0LHNdPWF3YWl0IFByb21pc2UuYWxsKFtWdC5jbGVhbnVwT2xkRXZlbnRzKGUpLGdzLmlzQ29uZmlndXJlZCgpP2dzLmNsZWFudXBDbG91ZEV2ZW50cyhlKTpQcm9taXNlLnJlc29sdmUoMCldKTtyZXR1cm4gY29uc29sZS5sb2coYPCfp7kgQ2xlYW51cCBjb21wbGV0ZWQ6ICR7dH0gbG9jYWwsICR7c30gY2xvdWRgKSx7bG9jYWxEZWxldGVkOnQsY2xvdWREZWxldGVkOnN9fWFzeW5jIGdldFN0b3JhZ2VTdGF0cygpe2NvbnN0IGU9YXdhaXQgVnQuZ2V0U3RvcmFnZVN0YXRzKCk7bGV0IHQ7aWYoZ3MuaXNDb25maWd1cmVkKCkpdHJ5e3Q9YXdhaXQgZ3MuZ2V0U3RvcmFnZUluZm8oKX1jYXRjaChzKXtjb25zb2xlLndhcm4oIkZhaWxlZCB0byBnZXQgY2xvdWQgc3RvcmFnZSBzdGF0czoiLHMpfXJldHVybntsb2NhbDplLGNsb3VkOnR9fX1jb25zdCBRbz1uZXcgQ2llLCRpZT0oe29uRGV0ZWN0aW9uOm4saXNBY3RpdmU6ZX0pPT57Y29uc3QgdD1VZS51c2VSZWYobnVsbCkscz1VZS51c2VSZWYobnVsbCkscj1VZS51c2VSZWYobnVsbCksbz1VZS51c2VSZWYobnVsbCksaT1VZS51c2VSZWYoKSxhPVVlLnVzZVJlZihudWxsKSxsPVVlLnVzZVJlZihbXSksW2MsaF09VWUudXNlU3RhdGUoITEpLFtwLGZdPVVlLnVzZVN0YXRlKG51bGwpLFtnLHldPVVlLnVzZVN0YXRlKCIiKSxbdyxiXT1VZS51c2VTdGF0ZShbXSksW3YsU109VWUudXNlU3RhdGUoMCksWyQsa109VWUudXNlU3RhdGUoMCk7VWUudXNlRWZmZWN0KCgpPT4oKGFzeW5jKCk9Pnt0cnl7aWYoaCghMCksYXdhaXQgRSQoKSxjb25zb2xlLmxvZygiVGVuc29yRmxvdy5qcyBiYWNrZW5kOiIsejEoKSksby5jdXJyZW50PW5ldyBTaWUsY29uc29sZS5sb2coIkxvYWRpbmcgQ09DTy1TU0QgbW9kZWwuLi4iKSwhYXdhaXQgby5jdXJyZW50LmxvYWRNb2RlbCgpKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGxvYWQgQ09DTy1TU0QgbW9kZWwiKTtjb25zb2xlLmxvZygi4pyFIENPQ08tU1NEIG1vZGVsIGxvYWRlZCBzdWNjZXNzZnVsbHkiKSxoKCExKX1jYXRjaChFKXtjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBZT0xPOiIsRSkseSgiRmFpbGVkIHRvIGxvYWQgQUkgbW9kZWwuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuIiksaCghMSl9fSkoKSwoKT0+e28uY3VycmVudCYmby5jdXJyZW50LmRpc3Bvc2UoKSxpLmN1cnJlbnQmJmNhbmNlbEFuaW1hdGlvbkZyYW1lKGkuY3VycmVudCl9KSxbXSksVWUudXNlRWZmZWN0KCgpPT5lPygoYXN5bmMoKT0+e3RyeXtjb25zdCBFPXt2aWRlbzp7d2lkdGg6e2lkZWFsOjEyODAsbWF4OjE5MjB9LGhlaWdodDp7aWRlYWw6NzIwLG1heDoxMDgwfSxmYWNpbmdNb2RlOntpZGVhbDoiZW52aXJvbm1lbnQifSxmcmFtZVJhdGU6e2lkZWFsOjMwLG1heDo2MH19LGF1ZGlvOiExfSxNPWF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKEUpO2YoTSksdC5jdXJyZW50JiYodC5jdXJyZW50LnNyY09iamVjdD1NLHQuY3VycmVudC5vbmxvYWRlZG1ldGFkYXRhPSgpPT57VCgpfSkseSgiIil9Y2F0Y2goRSl7Y29uc29sZS5lcnJvcigiQ2FtZXJhIGFjY2VzcyBkZW5pZWQ6IixFKSx5KCJDYW1lcmEgYWNjZXNzIGRlbmllZC4gUGxlYXNlIGFsbG93IGNhbWVyYSBwZXJtaXNzaW9ucyBhbmQgZW5zdXJlIHlvdSdyZSB1c2luZyBIVFRQUy4iKX19KSgpLCgpPT57cCYmKHAuZ2V0VHJhY2tzKCkuZm9yRWFjaChFPT5FLnN0b3AoKSksZihudWxsKSksaS5jdXJyZW50JiZjYW5jZWxBbmltYXRpb25GcmFtZShpLmN1cnJlbnQpfSk6dm9pZCAwLFtlXSk7Y29uc3QgVD0oKT0+e2lmKCFvLmN1cnJlbnR8fCF0LmN1cnJlbnQpcmV0dXJuO2NvbnN0IF89YXN5bmMoKT0+e3RyeXtjb25zdCBVPXQuY3VycmVudCxZPXIuY3VycmVudDtpZighVXx8IVl8fFUucmVhZHlTdGF0ZSE9PTQpe2kuY3VycmVudD1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoXyk7cmV0dXJufShZLndpZHRoIT09VS52aWRlb1dpZHRofHxZLmhlaWdodCE9PVUudmlkZW9IZWlnaHQpJiYoWS53aWR0aD1VLnZpZGVvV2lkdGgsWS5oZWlnaHQ9VS52aWRlb0hlaWdodCk7Y29uc3QgUT1hd2FpdCBvLmN1cnJlbnQuZGV0ZWN0KFUpO2IoUSksY29uc29sZS5sb2coYPCflI0gRGV0ZWN0aW9uIHJlc3VsdHM6ICR7US5sZW5ndGh9IG9iamVjdHMgZm91bmRgKSxRLmxlbmd0aD4wJiZRLmZvckVhY2goKFYsSyk9Pntjb25zb2xlLmxvZyhgICAke0srMX0uICR7Vi5jbGFzc05hbWV9ICgkeyhWLnNjb3JlKjEwMCkudG9GaXhlZCgxKX0lKSBhdCBbJHtWLmJib3gubWFwKHE9PnEudG9GaXhlZCgzKSkuam9pbigiLCAiKX1dYCl9KTtjb25zdCBuZT1bInBlcnNvbiIsImNhciIsInRydWNrIiwibW90b3JjeWNsZSIsImJpY3ljbGUiLCJidXMiLCJib2F0IiwiYmFja3BhY2siLCJoYW5kYmFnIiwic3VpdGNhc2UiLCJib3R0bGUiLCJrbmlmZSIsInNjaXNzb3JzIl0sc2U9US5maWx0ZXIoVj0+bmUuaW5jbHVkZXMoVi5jbGFzc05hbWUpJiZWLnNjb3JlPi40KS5tYXAoVj0+KHtjbGFzczpWLmNsYXNzTmFtZSxjb25maWRlbmNlOlYuc2NvcmUsYmJveDpbVi5iYm94WzBdKlUudmlkZW9XaWR0aCxWLmJib3hbMV0qVS52aWRlb0hlaWdodCxWLmJib3hbMl0qVS52aWRlb1dpZHRoLFYuYmJveFszXSpVLnZpZGVvSGVpZ2h0XSx0aW1lc3RhbXA6bmV3IERhdGV9KSk7bihzZSksRihRLFkpLGF3YWl0IG5ldyBQcm9taXNlKFY9PnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+Vih2b2lkIDApKSksYXdhaXQgRChRLFUpfWNhdGNoKFUpe2NvbnNvbGUuZXJyb3IoIkRldGVjdGlvbiBlcnJvcjoiLFUpfWNvbnN0IE09L2lQaG9uZXxpUGFkfGlQb2R8QW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/MTUwOjEwMDtzZXRUaW1lb3V0KCgpPT57aS5jdXJyZW50PXJlcXVlc3RBbmltYXRpb25GcmFtZShfKX0sTSl9O18oKX0sRD1hc3luYyhfLEUpPT57Y29uc3QgTT1fLmZpbHRlcihZPT5ZLnNjb3JlPi41fHxbInBlcnNvbiIsImNhciIsInRydWNrIiwibW90b3JjeWNsZSIsImJ1cyIsImJpY3ljbGUiLCJkb2ciLCJjYXQiXS5pbmNsdWRlcyhZLmNsYXNzTmFtZSkpO2lmKE0ubGVuZ3RoPT09MClyZXR1cm47Y29uc3QgVT1EYXRlLm5vdygpO2lmKCEoVS12PDNlMykpdHJ5e2NvbnNvbGUubG9nKCLwn46sIFN0YXJ0aW5nIG1lZGlhIGNhcHR1cmUgZm9yIGRldGVjdGlvbiBldmVudC4uLiIpO2xldCBZO3RyeXtZPWF3YWl0IEwoM2UzKX1jYXRjaChzZSl7Y29uc29sZS53YXJuKCLimqDvuI8gVmlkZW8gcmVjb3JkaW5nIGZhaWxlZCwgc2F2aW5nIGV2ZW50IHdpdGggaW1hZ2Ugb25seToiLHNlKSxZPW5ldyBCbG9ifWNvbnN0IFE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7US53aWR0aD1FLnZpZGVvV2lkdGgsUS5oZWlnaHQ9RS52aWRlb0hlaWdodDtjb25zdCBuZT1RLmdldENvbnRleHQoIjJkIik7aWYobmUpe25lLmRyYXdJbWFnZShFLDAsMCkseihNLFEsbmUpO2NvbnN0IHNlPWF3YWl0IG5ldyBQcm9taXNlKEg9PntRLnRvQmxvYihpZT0+e2NvbnNvbGUubG9nKCLwn5a877iPIEltYWdlIGJsb2IgY3JlYXRlZDoiLGllPy5zaXplfHwwLCJieXRlcyIpLEgoaWV8fG5ldyBCbG9iKX0sImltYWdlL2pwZWciLC44KX0pO2NvbnNvbGUubG9nKCLwn5O3IEltYWdlIGNhcHR1cmVkIHdpdGggb3ZlcmxheSwgc2l6ZToiLHNlLnNpemUsImJ5dGVzIik7Y29uc3QgVj1NLnNvbWUoSD0+SC5jbGFzc05hbWU9PT0icGVyc29uIik/ImFsZXJ0IjoiZGV0ZWN0aW9uIixLPU1hdGgubWF4KC4uLk0ubWFwKEg9Pkguc2NvcmUpKSxxPXt0aW1lc3RhbXA6bmV3IERhdGUsdHlwZTpWLGRldGVjdGlvbnM6TSxjb25maWRlbmNlOkssaW1hZ2VCbG9iOnNlLHZpZGVvQmxvYjpZLG1ldGFkYXRhOntkZXZpY2VJZDpuYXZpZ2F0b3IudXNlckFnZW50LGNhbWVyYUlkOiJtYWluX2NhbWVyYSIsbG9jYXRpb246ImZyb250X2VudHJhbmNlIixkdXJhdGlvbjozfX0sQj1hd2FpdCBWdC5zYXZlRXZlbnQocSk7Y29uc29sZS5sb2coIvCflI0gREVCVUc6IEV2ZW50IGJlaW5nIHNhdmVkOiIse2lkOkIuaWQsaGFzSW1hZ2VCbG9iOiEhcS5pbWFnZUJsb2IsaGFzVmlkZW9CbG9iOiEhcS52aWRlb0Jsb2IsaW1hZ2VCbG9iU2l6ZTpxLmltYWdlQmxvYj8uc2l6ZXx8MCx2aWRlb0Jsb2JTaXplOnEudmlkZW9CbG9iPy5zaXplfHwwfSksUyhVKSxrKEg9PkgrMSksY29uc29sZS5sb2coYPCfk7jwn46lIFNlY3VyaXR5IGV2ZW50IHNhdmVkIHdpdGggbWVkaWE6ICR7Qi5pZH0gKCR7Vn0pYCksY29uc29sZS5sb2coYPCfk4ogSW1hZ2Ugc2l6ZTogJHtNYXRoLnJvdW5kKHNlLnNpemUvMTAyNCl9S0IsIFZpZGVvIHNpemU6ICR7TWF0aC5yb3VuZChZLnNpemUvMTAyNCl9S0JgKSxuYXZpZ2F0b3Iub25MaW5lJiZRby5wcm9jZXNzU3luY1F1ZXVlKCl9fWNhdGNoKFkpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBzYXZlIGRldGVjdGlvbiBldmVudDoiLFkpfX0sTD1hc3luYyBfPT5uZXcgUHJvbWlzZSgoRSxNKT0+e2NvbnN0IFU9dC5jdXJyZW50Py5zcmNPYmplY3QsWT1yLmN1cnJlbnQsUT10LmN1cnJlbnQ7aWYoIVV8fFUuZ2V0VHJhY2tzKCkubGVuZ3RoPT09MHx8IVl8fCFRKXtNKG5ldyBFcnJvcigiTm8gdmlkZW8gc3RyZWFtIG9yIG92ZXJsYXkgY2FudmFzIGF2YWlsYWJsZSIpKTtyZXR1cm59Y29uc3QgbmU9VS5nZXRWaWRlb1RyYWNrcygpWzBdO2lmKCFuZXx8bmUucmVhZHlTdGF0ZSE9PSJsaXZlIil7TShuZXcgRXJyb3IoIlZpZGVvIHRyYWNrIG5vdCByZWFkeSIpKTtyZXR1cm59dHJ5e2wuY3VycmVudD1bXTtjb25zdCBzZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtzZS53aWR0aD1RLnZpZGVvV2lkdGgsc2UuaGVpZ2h0PVEudmlkZW9IZWlnaHQ7Y29uc3QgVj1zZS5nZXRDb250ZXh0KCIyZCIpO2lmKCFWKXtNKG5ldyBFcnJvcigiQ291bGQgbm90IGNyZWF0ZSByZWNvcmRpbmcgY2FudmFzIGNvbnRleHQiKSk7cmV0dXJufWNvbnN0IEs9c2UuY2FwdHVyZVN0cmVhbSgzMCk7bGV0IHE7Y29uc3QgQj0oKT0+e1YuZHJhd0ltYWdlKFEsMCwwLHNlLndpZHRoLHNlLmhlaWdodCk7Y29uc3QgZGU9WS5nZXRDb250ZXh0KCIyZCIpPy5nZXRJbWFnZURhdGEoMCwwLFkud2lkdGgsWS5oZWlnaHQpO2RlJiZkZS5kYXRhLnNvbWUoKHdlLHZlKT0+dmUlND09PTMmJndlPjApJiZjb25zb2xlLmxvZygi8J+TuSBSZWNvcmRpbmcgZnJhbWUgd2l0aCBvdmVybGF5IGNvbnRlbnQiKSxWLmRyYXdJbWFnZShZLDAsMCxzZS53aWR0aCxzZS5oZWlnaHQpLHE9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKEIpfTtCKCk7bGV0IEg7Y29uc3QgaWU9W3ttaW1lVHlwZToidmlkZW8vd2VibTtjb2RlY3M9dnA5In0se21pbWVUeXBlOiJ2aWRlby93ZWJtO2NvZGVjcz12cDgifSx7bWltZVR5cGU6InZpZGVvL3dlYm0ifSx7bWltZVR5cGU6InZpZGVvL21wNCJ9XTtsZXQgcGU9ITE7Zm9yKGNvbnN0IGRlIG9mIGllKXRyeXtpZihNZWRpYVJlY29yZGVyLmlzVHlwZVN1cHBvcnRlZChkZS5taW1lVHlwZSkpe0g9bmV3IE1lZGlhUmVjb3JkZXIoSyxkZSksY29uc29sZS5sb2coYPCfk7kgVXNpbmcgY29kZWMgZm9yIG92ZXJsYXkgcmVjb3JkaW5nOiAke2RlLm1pbWVUeXBlfWApLHBlPSEwO2JyZWFrfX1jYXRjaHtjb25zb2xlLndhcm4oYOKaoO+4jyBDb2RlYyAke2RlLm1pbWVUeXBlfSBub3Qgc3VwcG9ydGVkYCl9cGV8fChIPW5ldyBNZWRpYVJlY29yZGVyKEspLGNvbnNvbGUubG9nKCLwn5O5IFVzaW5nIGRlZmF1bHQgTWVkaWFSZWNvcmRlciBzZXR0aW5ncyBmb3Igb3ZlcmxheSByZWNvcmRpbmciKSksYS5jdXJyZW50PUgsSC5vbmRhdGFhdmFpbGFibGU9ZGU9Pntjb25zb2xlLmxvZyhg8J+TiiBSZWNvcmRpbmcgY2h1bmsgd2l0aCBvdmVybGF5OiAke2RlLmRhdGEuc2l6ZX0gYnl0ZXNgKSxkZS5kYXRhLnNpemU+MCYmbC5jdXJyZW50LnB1c2goZGUuZGF0YSl9LEgub25zdG9wPSgpPT57Y29uc3QgZGU9bmV3IEJsb2IobC5jdXJyZW50LHt0eXBlOkgubWltZVR5cGV8fCJ2aWRlby93ZWJtIn0pO2NvbnNvbGUubG9nKGDwn46lIE92ZXJsYXkgcmVjb3JkaW5nIGNvbXBsZXRlZDogJHtkZS5zaXplfSBieXRlc2ApLGNhbmNlbEFuaW1hdGlvbkZyYW1lKHEpLEUoZGUpfSxILm9uZXJyb3I9ZGU9Pntjb25zb2xlLmVycm9yKCJNZWRpYVJlY29yZGVyIGVycm9yOiIsZGUpLGNhbmNlbEFuaW1hdGlvbkZyYW1lKHEpLE0obmV3IEVycm9yKCJSZWNvcmRpbmcgZmFpbGVkIikpfSxILnN0YXJ0KDI1MCksY29uc29sZS5sb2coYPCfjqUgU3RhcnRlZCAke199bXMgb3ZlcmxheSB2aWRlbyByZWNvcmRpbmcuLi5gKSxzZXRUaW1lb3V0KCgpPT57SC5zdGF0ZT09PSJyZWNvcmRpbmciJiYoY29uc29sZS5sb2coIvCfjqUgVmlkZW8gcmVjb3JkaW5nIGNvbXBsZXRlZCIpLEguc3RvcCgpKX0sXyl9Y2F0Y2goc2Upe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBzdGFydCB2aWRlbyByZWNvcmRpbmc6IixzZSksTShzZSl9fSksej0oXyxFLE0pPT57Xy5mb3JFYWNoKChVLFkpPT57Y29uc3RbUSxuZSxzZSxWXT1VLmJib3gsSz1RKkUud2lkdGgscT1uZSpFLmhlaWdodCxCPXNlKkUud2lkdGgsSD1WKkUuaGVpZ2h0O2xldCBpZT0iIzAwZmYwMCIscGU9ImxvdyI7WyJwZXJzb24iXS5pbmNsdWRlcyhVLmNsYXNzTmFtZSk/KGllPSIjZmY0NDQ0IixwZT0iaGlnaCIpOlsiY2FyIiwidHJ1Y2siLCJtb3RvcmN5Y2xlIiwiYmljeWNsZSJdLmluY2x1ZGVzKFUuY2xhc3NOYW1lKT8oaWU9IiNmZjg4MDAiLHBlPSJtZWRpdW0iKTpbImtuaWZlIiwic2Npc3NvcnMiLCJib3R0bGUiXS5pbmNsdWRlcyhVLmNsYXNzTmFtZSkmJihpZT0iI2ZmMDAwMCIscGU9ImNyaXRpY2FsIik7Y29uc3QgZGU9TWF0aC5yb3VuZChVLnNjb3JlKjEwMCk7TS5zdHJva2VTdHlsZT1pZSxNLmxpbmVXaWR0aD1wZT09PSJjcml0aWNhbCI/NjpwZT09PSJoaWdoIj80OjMsTS5zdHJva2VSZWN0KEsscSxCLEgpO2NvbnN0IGZlPTIwO00uZmlsbFN0eWxlPWllLE0uZmlsbFJlY3QoSy0zLHEtMyxmZSw2KSxNLmZpbGxSZWN0KEstMyxxLTMsNixmZSksTS5maWxsUmVjdChLK0ItZmUrMyxxLTMsZmUsNiksTS5maWxsUmVjdChLK0ItMyxxLTMsNixmZSk7Y29uc3Qgd2U9YCR7TWF0aC5yb3VuZChLKX0sJHtNYXRoLnJvdW5kKHEpfWAsdmU9YCR7VS5jbGFzc05hbWUudG9VcHBlckNhc2UoKX0gJHtkZX0lYCxrZT1gQCgke3dlfSlgLExlPW5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7TS5mb250PSJib2xkIDIwcHggQXJpYWwiO2NvbnN0IFdlPU0ubWVhc3VyZVRleHQodmUpO00uZm9udD0iMTRweCBBcmlhbCI7Y29uc3QgbnQ9TS5tZWFzdXJlVGV4dChrZSksb3Q9TS5tZWFzdXJlVGV4dChMZSksaHQ9TWF0aC5tYXgoV2Uud2lkdGgsbnQud2lkdGgsb3Qud2lkdGgpO00uZmlsbFN0eWxlPSJyZ2JhKDAsIDAsIDAsIDAuOCkiLE0uZmlsbFJlY3QoSy01LHEtNTUsaHQrMjAsNTApLE0uc3Ryb2tlU3R5bGU9aWUsTS5saW5lV2lkdGg9MixNLnN0cm9rZVJlY3QoSy01LHEtNTUsaHQrMjAsNTApLE0uZmlsbFN0eWxlPWllLE0uZm9udD0iYm9sZCAyMHB4IEFyaWFsIixNLmZpbGxUZXh0KHZlLEsrNSxxLTMwKSxNLmZvbnQ9IjE0cHggQXJpYWwiLE0uZmlsbFN0eWxlPSIjZmZmZmZmIixNLmZpbGxUZXh0KGtlLEsrNSxxLTE1KSxNLmZpbGxUZXh0KExlLEsrNSxxLTUpLE0uZm9udD0iYm9sZCAxNnB4IEFyaWFsIixNLmZpbGxTdHlsZT1pZSxNLmZpbGxUZXh0KGAjJHtZKzF9YCxLK0ItMzAscSsyMCl9KX0sRj0oXyxFKT0+e2NvbnNvbGUubG9nKGDwn46oIGRyYXdEZXRlY3Rpb25zIGNhbGxlZCB3aXRoICR7Xy5sZW5ndGh9IGRldGVjdGlvbnMsIGNhbnZhcyBzaXplOiAke0Uud2lkdGh9eCR7RS5oZWlnaHR9YCk7Y29uc3QgTT1FLmdldENvbnRleHQoIjJkIik7aWYoIU18fCF0LmN1cnJlbnQpe2NvbnNvbGUubG9nKCLinYwgTm8gY2FudmFzIGNvbnRleHQgb3IgdmlkZW8gcmVmIik7cmV0dXJufWlmKE0uY2xlYXJSZWN0KDAsMCxFLndpZHRoLEUuaGVpZ2h0KSxfLmxlbmd0aD09PTApe2NvbnNvbGUubG9nKCLihLnvuI8gTm8gZGV0ZWN0aW9ucyB0byBkcmF3Iik7cmV0dXJufV8uZm9yRWFjaCgoVSxZKT0+e2NvbnN0W1EsbmUsc2UsVl09VS5iYm94LEs9USpFLndpZHRoLHE9bmUqRS5oZWlnaHQsQj1zZSpFLndpZHRoLEg9VipFLmhlaWdodDtsZXQgaWU9IiMwMGZmMDAiLHBlPSJsb3ciO1sicGVyc29uIl0uaW5jbHVkZXMoVS5jbGFzc05hbWUpPyhpZT0iI2ZmNDQ0NCIscGU9ImhpZ2giKTpbImNhciIsInRydWNrIiwibW90b3JjeWNsZSIsImJpY3ljbGUiXS5pbmNsdWRlcyhVLmNsYXNzTmFtZSk/KGllPSIjZmY4ODAwIixwZT0ibWVkaXVtIik6WyJrbmlmZSIsInNjaXNzb3JzIiwiYm90dGxlIl0uaW5jbHVkZXMoVS5jbGFzc05hbWUpJiYoaWU9IiNmZjAwMDAiLHBlPSJjcml0aWNhbCIpO2NvbnN0IGRlPU1hdGgucm91bmQoVS5zY29yZSoxMDApO2NvbnNvbGUubG9nKGDwn46oIERyYXdpbmcgJHtVLmNsYXNzTmFtZX0gYm94IGF0ICgke0sudG9GaXhlZCgxKX0sICR7cS50b0ZpeGVkKDEpfSkgc2l6ZSAke0IudG9GaXhlZCgxKX14JHtILnRvRml4ZWQoMSl9IGNvbG9yICR7aWV9YCksTS5zdHJva2VTdHlsZT1pZSxNLmxpbmVXaWR0aD1wZT09PSJjcml0aWNhbCI/NDpwZT09PSJoaWdoIj8zOjIsTS5zdHJva2VSZWN0KEsscSxCLEgpO2NvbnN0IGZlPTE1O00uZmlsbFN0eWxlPWllLE0uZmlsbFJlY3QoSy0yLHEtMixmZSw0KSxNLmZpbGxSZWN0KEstMixxLTIsNCxmZSksTS5maWxsUmVjdChLK0ItZmUrMixxLTIsZmUsNCksTS5maWxsUmVjdChLK0ItMixxLTIsNCxmZSksTS5maWxsUmVjdChLLTIscStILTIsZmUsNCksTS5maWxsUmVjdChLLTIscStILWZlKzIsNCxmZSksTS5maWxsUmVjdChLK0ItZmUrMixxK0gtMixmZSw0KSxNLmZpbGxSZWN0KEsrQi0yLHErSC1mZSsyLDQsZmUpO2NvbnN0IHdlPWAke01hdGgucm91bmQoSyl9LCR7TWF0aC5yb3VuZChxKX1gLHZlPWAke1UuY2xhc3NOYW1lLnRvVXBwZXJDYXNlKCl9ICR7ZGV9JWAsa2U9YEAoJHt3ZX0pYDtNLmZvbnQ9ImJvbGQgMTZweCBBcmlhbCI7Y29uc3QgTGU9TS5tZWFzdXJlVGV4dCh2ZSksV2U9MjI7TS5mb250PSIxMnB4IEFyaWFsIjtjb25zdCBudD1NLm1lYXN1cmVUZXh0KGtlKSxvdD1NYXRoLm1heChMZS53aWR0aCxudC53aWR0aCk7TS5maWxsU3R5bGU9aWUrIkREIixNLmZpbGxSZWN0KEstMixxLVdlLTE4LG90KzEyLFdlKzE2KSxNLmZpbGxTdHlsZT0iI2ZmZmZmZiIsTS5mb250PSJib2xkIDE2cHggQXJpYWwiLE0uZmlsbFRleHQodmUsSyszLHEtOCksTS5mb250PSIxMnB4IEFyaWFsIixNLmZpbGxTdHlsZT0iI2ZmZmZmZiIsTS5maWxsVGV4dChrZSxLKzMscS0yMCksTS5mb250PSIxMHB4IEFyaWFsIixNLmZpbGxTdHlsZT0iI2ZmZmZmZiIsTS5maWxsVGV4dChgIyR7WSsxfWAsSytCLTIwLHErMTUpfSl9O3JldHVybiBQLmpzeHMoImRpdiIse2NsYXNzTmFtZToicmVsYXRpdmUgdy1mdWxsIGgtZnVsbCIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJyZWxhdGl2ZSB3LWZ1bGwgaC1mdWxsIixjaGlsZHJlbjpbUC5qc3goInZpZGVvIix7cmVmOnQsYXV0b1BsYXk6ITAscGxheXNJbmxpbmU6ITAsbXV0ZWQ6ITAsY2xhc3NOYW1lOiJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlciJ9KSxQLmpzeCgiY2FudmFzIix7cmVmOnIsY2xhc3NOYW1lOiJhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgdy1mdWxsIGgtZnVsbCBwb2ludGVyLWV2ZW50cy1ub25lIixzdHlsZTp7ekluZGV4OjEwLGJhY2tncm91bmRDb2xvcjoicmdiYSgyNTUsIDAsIDAsIDAuMSkifX0pLFAuanN4KCJjYW52YXMiLHtyZWY6cyxjbGFzc05hbWU6ImhpZGRlbiJ9KV19KSxjJiZQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNzAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei0yMCIsY2hpbGRyZW46UC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6InRleHQtd2hpdGUgdGV4dC1jZW50ZXIgcC02IGJnLWdyYXktODAwIHJvdW5kZWQtbGciLGNoaWxkcmVuOltQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItYi0yIGJvcmRlci1ibHVlLTUwMCBteC1hdXRvIG1iLTQifSksUC5qc3goInAiLHtjbGFzc05hbWU6InRleHQtbGcgZm9udC1zZW1pYm9sZCIsY2hpbGRyZW46IkxvYWRpbmcgWU9MTyBBSSBNb2RlbC4uLiJ9KSxQLmpzeCgicCIse2NsYXNzTmFtZToidGV4dC1zbSBvcGFjaXR5LTc1IG10LTIiLGNoaWxkcmVuOiJUaGlzIG1heSB0YWtlIGEgbW9tZW50IG9uIGZpcnN0IGxvYWQifSldfSl9KSxnJiZQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJhYnNvbHV0ZSBpbnNldC0wIGJnLXJlZC01MDAgYmctb3BhY2l0eS05MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB6LTIwIixjaGlsZHJlbjpQLmpzeHMoImRpdiIse2NsYXNzTmFtZToidGV4dC13aGl0ZSB0ZXh0LWNlbnRlciBwLTYgbWF4LXctbWQiLGNoaWxkcmVuOltQLmpzeCgicCIse2NsYXNzTmFtZToidGV4dC1sZyBmb250LXNlbWlib2xkIG1iLTIiLGNoaWxkcmVuOiLimqDvuI8gRXJyb3IifSksUC5qc3goInAiLHtjbGFzc05hbWU6Im1iLTQiLGNoaWxkcmVuOmd9KSxQLmpzeCgiYnV0dG9uIix7b25DbGljazooKT0+d2luZG93LmxvY2F0aW9uLnJlbG9hZCgpLGNsYXNzTmFtZToiYmctd2hpdGUgdGV4dC1yZWQtNTAwIHB4LTQgcHktMiByb3VuZGVkIGZvbnQtc2VtaWJvbGQgaG92ZXI6YmctZ3JheS0xMDAiLGNoaWxkcmVuOiJSZXRyeSJ9KV19KX0pLHcubGVuZ3RoPjAmJlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJhYnNvbHV0ZSB0b3AtNCByaWdodC00IGJnLWJsYWNrIGJnLW9wYWNpdHktODAgYmFja2Ryb3AtYmx1ci1zbSByb3VuZGVkLWxnIHAtNCBtYXgtdy14cyB6LTMwIixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC13aGl0ZSBtYi0yIGZsZXggaXRlbXMtY2VudGVyIixjaGlsZHJlbjpbIvCfjq8gTGl2ZSBEZXRlY3Rpb25zICgiLHcubGVuZ3RoLCIpIl19KSxQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJzcGFjZS15LTIgbWF4LWgtNDAgb3ZlcmZsb3cteS1hdXRvIixjaGlsZHJlbjp3Lm1hcCgoXyxFKT0+e2NvbnN0IE09TWF0aC5yb3VuZChfLnNjb3JlKjEwMCksW1UsWSxRLG5lXT1fLmJib3gsc2U9TWF0aC5yb3VuZChVKih0LmN1cnJlbnQ/LnZpZGVvV2lkdGh8fDY0MCkpLFY9TWF0aC5yb3VuZChZKih0LmN1cnJlbnQ/LnZpZGVvSGVpZ2h0fHw0ODApKTtsZXQgSz0idGV4dC1ncmVlbi00MDAiLHE9IvCfn6IiO3JldHVyblsicGVyc29uIl0uaW5jbHVkZXMoXy5jbGFzc05hbWUpPyhLPSJ0ZXh0LXJlZC00MDAiLHE9IvCflLQiKTpbImNhciIsInRydWNrIiwibW90b3JjeWNsZSIsImJpY3ljbGUiXS5pbmNsdWRlcyhfLmNsYXNzTmFtZSk/KEs9InRleHQtb3JhbmdlLTQwMCIscT0i8J+foCIpOlsia25pZmUiLCJzY2lzc29ycyIsImJvdHRsZSJdLmluY2x1ZGVzKF8uY2xhc3NOYW1lKSYmKEs9InRleHQtcmVkLTUwMCIscT0i4pqg77iPIiksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6InRleHQteHMgYm9yZGVyLWwtMiBib3JkZXItZ3JheS02MDAgcGwtMiIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTEgbWItMSIsY2hpbGRyZW46W1AuanN4KCJzcGFuIix7Y2hpbGRyZW46cX0pLFAuanN4KCJzcGFuIix7Y2xhc3NOYW1lOmBmb250LW1lZGl1bSAke0t9YCxjaGlsZHJlbjpfLmNsYXNzTmFtZS50b1VwcGVyQ2FzZSgpfSksUC5qc3hzKCJzcGFuIix7Y2xhc3NOYW1lOiJ0ZXh0LWdyZWVuLTMwMCIsY2hpbGRyZW46W00sIiUiXX0pXX0pLFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJ0ZXh0LWdyYXktNDAwIHRleHQteHMiLGNoaWxkcmVuOlsi8J+TjSBQb3NpdGlvbjogKCIsc2UsIiwgIixWLCIpIl19KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToidGV4dC1ncmF5LTQwMCB0ZXh0LXhzIixjaGlsZHJlbjpbIvCfk48gU2l6ZTogIixNYXRoLnJvdW5kKFEqKHQuY3VycmVudD8udmlkZW9XaWR0aHx8NjQwKSksIsOXIixNYXRoLnJvdW5kKG5lKih0LmN1cnJlbnQ/LnZpZGVvSGVpZ2h0fHw0ODApKSwicHgiXX0pXX0sRSl9KX0pXX0pLFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJhYnNvbHV0ZSB0b3AtNCBsZWZ0LTQgZmxleCBmbGV4LWNvbCBzcGFjZS15LTIgei0zMCIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOmBweC0zIHB5LTEgcm91bmRlZC1mdWxsIHRleHQteHMgZm9udC1tZWRpdW0gJHtwPyJiZy1ncmVlbi01MDAgdGV4dC13aGl0ZSI6ImJnLXJlZC01MDAgdGV4dC13aGl0ZSJ9YCxjaGlsZHJlbjpbIvCfk7kgIixwPyJDYW1lcmEgQWN0aXZlIjoiQ2FtZXJhIEluYWN0aXZlIl19KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZTpgcHgtMyBweS0xIHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZvbnQtbWVkaXVtICR7by5jdXJyZW50JiYhYz8iYmctYmx1ZS01MDAgdGV4dC13aGl0ZSI6ImJnLXllbGxvdy01MDAgdGV4dC1ibGFjayJ9YCxjaGlsZHJlbjpbIvCfpJYgIixvLmN1cnJlbnQmJiFjPyJBSSBSZWFkeSI6IkFJIExvYWRpbmciXX0pLHcubGVuZ3RoPjAmJlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJiZy1wdXJwbGUtNTAwIHRleHQtd2hpdGUgcHgtMyBweS0xIHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZvbnQtbWVkaXVtIixjaGlsZHJlbjpbIvCfjq8gIix3Lmxlbmd0aCwiIG9iamVjdCIsdy5sZW5ndGghPT0xPyJzIjoiIl19KSwkPjAmJlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSBweC0zIHB5LTEgcm91bmRlZC1mdWxsIHRleHQteHMgZm9udC1tZWRpdW0iLGNoaWxkcmVuOlsi8J+SviAiLCQsIiBzYXZlZCJdfSldfSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImFic29sdXRlIHRvcC00IHJpZ2h0LTQgei0zMCBmbGV4IGZsZXgtY29sIHNwYWNlLXktMSIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHRleHQtd2hpdGUgcHgtMyBweS0xIHJvdW5kZWQgdGV4dC14cyIsY2hpbGRyZW46WyJEZXRlY3Rpb246ICIsdy5sZW5ndGg+MD8iQWN0aXZlIjoiTW9uaXRvcmluZyJdfSksUC5qc3goImRpdiIse2NsYXNzTmFtZToiYmctYmxhY2sgYmctb3BhY2l0eS01MCB0ZXh0LXdoaXRlIHB4LTMgcHktMSByb3VuZGVkIHRleHQteHMiLGNoaWxkcmVuOiJTdG9yYWdlOiBMb2NhbCArIENsb3VkIFN5bmMifSldfSldfSl9LElpZT0oe29iamVjdHM6bn0pPT5QLmpzeHMoImRpdiIse2NsYXNzTmFtZToiYWJzb2x1dGUgaW5zZXQtMCBwb2ludGVyLWV2ZW50cy1ub25lIixjaGlsZHJlbjpbbi5tYXAoKGUsdCk9Pntjb25zdFtzLHIsbyxpXT1lLmJib3gsYT1zLzY0MCoxMDAsbD1yLzY0MCoxMDAsYz1vLzY0MCoxMDAsaD1pLzY0MCoxMDAsZj0oZz0+e3N3aXRjaChnLnRvTG93ZXJDYXNlKCkpe2Nhc2UicGVyc29uIjpyZXR1cm4iYm9yZGVyLXJlZC01MDAgYmctcmVkLTUwMCI7Y2FzZSJjYXIiOmNhc2UidHJ1Y2siOmNhc2UiYnVzIjpyZXR1cm4iYm9yZGVyLWJsdWUtNTAwIGJnLWJsdWUtNTAwIjtjYXNlImJpY3ljbGUiOmNhc2UibW90b3JjeWNsZSI6cmV0dXJuImJvcmRlci1ncmVlbi01MDAgYmctZ3JlZW4tNTAwIjtjYXNlImNhdCI6Y2FzZSJkb2ciOnJldHVybiJib3JkZXIteWVsbG93LTUwMCBiZy15ZWxsb3ctNTAwIjtkZWZhdWx0OnJldHVybiJib3JkZXItb3JhbmdlLTUwMCBiZy1vcmFuZ2UtNTAwIn19KShlLmNsYXNzKTtyZXR1cm4gUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6YGFic29sdXRlIGJvcmRlci0yICR7Zn0gYmctb3BhY2l0eS0xMCBkZXRlY3Rpb24tYm94YCxzdHlsZTp7bGVmdDpgJHthfSVgLHRvcDpgJHtsfSVgLHdpZHRoOmAke2N9JWAsaGVpZ2h0OmAke2h9JWB9LGNoaWxkcmVuOltQLmpzeHMoImRpdiIse2NsYXNzTmFtZTpgYWJzb2x1dGUgLXRvcC02IGxlZnQtMCBweC0yIHB5LTEgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LXdoaXRlIHJvdW5kZWQgJHtmLnNwbGl0KCIgIilbMV19IGJnLW9wYWNpdHktOTBgLGNoaWxkcmVuOltlLmNsYXNzLCIgIiwoZS5jb25maWRlbmNlKjEwMCkudG9GaXhlZCgwKSwiJSJdfSksUC5qc3goImRpdiIse2NsYXNzTmFtZToiYWJzb2x1dGUgYm90dG9tLTAgbGVmdC0wIHctZnVsbCBoLTEgYmctYmxhY2sgYmctb3BhY2l0eS01MCIsY2hpbGRyZW46UC5qc3goImRpdiIse2NsYXNzTmFtZTpgaC1mdWxsICR7Zi5zcGxpdCgiICIpWzFdfWAsc3R5bGU6e3dpZHRoOmAke2UuY29uZmlkZW5jZSoxMDB9JWB9fSl9KSxQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOmBhYnNvbHV0ZSB0b3AtMS8yIGxlZnQtMS8yIHctMiBoLTIgcm91bmRlZC1mdWxsICR7Zi5zcGxpdCgiICIpWzFdfSB0cmFuc2Zvcm0gLXRyYW5zbGF0ZS14LTEvMiAtdHJhbnNsYXRlLXktMS8yYH0pXX0sYCR7ZS5jbGFzc30tJHt0fS0ke2UudGltZXN0YW1wLmdldFRpbWUoKX1gKX0pLG4ubGVuZ3RoPjAmJlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJhYnNvbHV0ZSB0b3AtNCByaWdodC00IGJnLWJsYWNrIGJnLW9wYWNpdHktNzAgdGV4dC13aGl0ZSBweC0zIHB5LTIgcm91bmRlZCB0ZXh0LXNtIixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiIsY2hpbGRyZW46W1AuanN4KCJkaXYiLHtjbGFzc05hbWU6InctMiBoLTIgYmctcmVkLTUwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1wdWxzZSJ9KSxQLmpzeHMoInNwYW4iLHtjaGlsZHJlbjpbbi5sZW5ndGgsIiBvYmplY3QiLG4ubGVuZ3RoIT09MT8icyI6IiIsIiBkZXRlY3RlZCJdfSldfSksUC5qc3goImRpdiIse2NsYXNzTmFtZToibXQtMSB0ZXh0LXhzIixjaGlsZHJlbjpPYmplY3QuZW50cmllcyhuLnJlZHVjZSgoZSx0KT0+KGVbdC5jbGFzc109KGVbdC5jbGFzc118fDApKzEsZSkse30pKS5tYXAoKFtlLHRdKT0+UC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6InRleHQtZ3JheS0zMDAiLGNoaWxkcmVuOltlLCI6ICIsdF19LGUpKX0pXX0pXX0pLFRpZT0oe2V2ZW50czpufSk9Pntjb25zdFtlLHRdPVVlLnVzZVN0YXRlKG51bGwpLFtzLHJdPVVlLnVzZVN0YXRlKG5ldyBTZXQpLG89aD0+e3N3aXRjaChoKXtjYXNlImNyaXRpY2FsIjpyZXR1cm4iYmctcmVkLTUwMCI7Y2FzZSJoaWdoIjpyZXR1cm4iYmctb3JhbmdlLTUwMCI7Y2FzZSJtZWRpdW0iOnJldHVybiJiZy15ZWxsb3ctNTAwIjtjYXNlImxvdyI6cmV0dXJuImJnLWdyZWVuLTUwMCI7ZGVmYXVsdDpyZXR1cm4iYmctZ3JheS01MDAifX0saT1oPT57c3dpdGNoKGgpe2Nhc2UiZGV0ZWN0aW9uIjpyZXR1cm4gY2Y7Y2FzZSJhbm9tYWx5IjpyZXR1cm4gYWw7Y2FzZSJhbGVydCI6cmV0dXJuIGFsO2Nhc2UibW90aW9uIjpyZXR1cm4gY2Y7Y2FzZSJtYW51YWwiOnJldHVybiBjZjtkZWZhdWx0OnJldHVybiBhbH19LGE9KGgscCxmKT0+e3RyeXtjb25zdCBnPW5ldyBCbG9iKFtoXSx7dHlwZTpwPT09InZpZGVvIj8idmlkZW8vd2VibSI6ImltYWdlL2pwZWcifSkseT1VUkwuY3JlYXRlT2JqZWN0VVJMKGcpO3Qoe3VybDp5LHR5cGU6cCxldmVudElkOmYsYmxvYjpnfSl9Y2F0Y2goZyl7Y29uc29sZS5lcnJvcigiRXJyb3IgY3JlYXRpbmcgbWVkaWEgVVJMOiIsZyk7Y29uc3QgeT1VUkwuY3JlYXRlT2JqZWN0VVJMKGgpO3Qoe3VybDp5LHR5cGU6cCxldmVudElkOmYsYmxvYjpofSl9fSxsPSgpPT57ZSYmKFVSTC5yZXZva2VPYmplY3RVUkwoZS51cmwpLHQobnVsbCkpfSxjPWg9Pntjb25zdCBwPW5ldyBTZXQocyk7cC5oYXMoaCk/cC5kZWxldGUoaCk6cC5hZGQoaCkscihwKX07cmV0dXJuIG4ubGVuZ3RoPT09MD9QLmpzeHMoImRpdiIse2NsYXNzTmFtZToiYmctZ3JheS04MDAgcm91bmRlZC1sZyBwLTggdGV4dC1jZW50ZXIiLGNoaWxkcmVuOltQLmpzeChhbCx7Y2xhc3NOYW1lOiJoLTEyIHctMTIgdGV4dC1ncmF5LTQwMCBteC1hdXRvIG1iLTQifSksUC5qc3goImgzIix7Y2xhc3NOYW1lOiJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS0zMDAgbWItMiIsY2hpbGRyZW46Ik5vIEV2ZW50cyBZZXQifSksUC5qc3goInAiLHtjbGFzc05hbWU6InRleHQtZ3JheS00MDAiLGNoaWxkcmVuOiJTdGFydCBtb25pdG9yaW5nIHRvIHNlZSBzZWN1cml0eSBldmVudHMgaGVyZS4ifSldfSk6UC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6InNwYWNlLXktNiIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iLGNoaWxkcmVuOltQLmpzeCgiaDIiLHtjbGFzc05hbWU6InRleHQtMnhsIGZvbnQtYm9sZCIsY2hpbGRyZW46IlNlY3VyaXR5IEV2ZW50cyJ9KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToidGV4dC1zbSB0ZXh0LWdyYXktNDAwIixjaGlsZHJlbjpbbi5sZW5ndGgsIiB0b3RhbCBldmVudHMiXX0pXX0pLFAuanN4KCJkaXYiLHtjbGFzc05hbWU6InNwYWNlLXktMyIsY2hpbGRyZW46bi5tYXAoaD0+e2NvbnN0IHA9aShoLnR5cGUpLGY9cy5oYXMoaC5pZCk7cmV0dXJuIFAuanN4KCJkaXYiLHtjbGFzc05hbWU6ImJnLWdyYXktODAwIHJvdW5kZWQtbGcgcC00IGhvdmVyOmJnLWdyYXktNzUwIHRyYW5zaXRpb24tY29sb3JzIixjaGlsZHJlbjpQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1zdGFydCBzcGFjZS14LTQiLGNoaWxkcmVuOltQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOmBwLTIgcm91bmRlZC1mdWxsICR7byhoLnNldmVyaXR5KX1gLGNoaWxkcmVuOlAuanN4KHAse2NsYXNzTmFtZToiaC00IHctNCB0ZXh0LXdoaXRlIn0pfSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXgtMSBtaW4tdy0wIixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuIixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXgtMSIsY2hpbGRyZW46W1AuanN4KCJwIix7Y2xhc3NOYW1lOiJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtd2hpdGUiLGNoaWxkcmVuOmgubWVzc2FnZX0pLFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTQgbXQtMSIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTEgdGV4dC14cyB0ZXh0LWdyYXktNDAwIixjaGlsZHJlbjpbUC5qc3goQ08se2NsYXNzTmFtZToiaC0zIHctMyJ9KSxQLmpzeCgic3BhbiIse2NoaWxkcmVuOmgudGltZXN0YW1wLnRvTG9jYWxlU3RyaW5nKCl9KV19KSxQLmpzeCgic3BhbiIse2NsYXNzTmFtZTpgcHgtMiBweS0xIHJvdW5kZWQgdGV4dC14cyBmb250LW1lZGl1bSAke28oaC5zZXZlcml0eSl9IHRleHQtd2hpdGVgLGNoaWxkcmVuOmguc2V2ZXJpdHkudG9VcHBlckNhc2UoKX0pXX0pXX0pLFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIiLGNoaWxkcmVuOltQLmpzeCgiYnV0dG9uIix7b25DbGljazooKT0+YyhoLmlkKSxjbGFzc05hbWU6InRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC13aGl0ZSB0cmFuc2l0aW9uLWNvbG9ycyBwLTEiLHRpdGxlOmY/IlNob3cgbGVzcyI6IlNob3cgbW9yZSBkZXRhaWxzIixjaGlsZHJlbjpmP1AuanN4KE5PLHtjbGFzc05hbWU6ImgtNCB3LTQifSk6UC5qc3godk8se2NsYXNzTmFtZToiaC00IHctNCJ9KX0pLFAuanN4KCJidXR0b24iLHtjbGFzc05hbWU6InRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1yZWQtNDAwIHRyYW5zaXRpb24tY29sb3JzIHAtMSIsY2hpbGRyZW46UC5qc3goVk8se2NsYXNzTmFtZToiaC00IHctNCJ9KX0pXX0pXX0pLGgub2JqZWN0cyYmaC5vYmplY3RzLmxlbmd0aD4wJiZQLmpzeHMoImRpdiIse2NsYXNzTmFtZToibXQtMiB0ZXh0LXhzIHRleHQtZ3JheS00MDAiLGNoaWxkcmVuOlsiT2JqZWN0czogIixoLm9iamVjdHMubWFwKGc9PmcuY2xhc3MpLmpvaW4oIiwgIildfSksZiYmUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6Im10LTMgc3BhY2UteS0yIGJvcmRlci10IGJvcmRlci1ncmF5LTcwMCBwdC0zIixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImJnLWdyYXktNzAwIHJvdW5kZWQgcC0yIHRleHQteHMiLGNoaWxkcmVuOltQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJ0ZXh0LXllbGxvdy00MDAgZm9udC1tZWRpdW0gbWItMSIsY2hpbGRyZW46IkRlYnVnIEluZm86In0pLFAuanN4cygiZGl2Iix7Y2hpbGRyZW46WyJFdmVudCBJRDogIixoLmlkXX0pLFAuanN4cygiZGl2Iix7Y2hpbGRyZW46WyJUeXBlOiAiLGgudHlwZV19KSxQLmpzeHMoImRpdiIse2NoaWxkcmVuOlsiSGFzIEltYWdlOiAiLGguaW1hZ2VCbG9iPyJZZXMiOiJObyJdfSksUC5qc3hzKCJkaXYiLHtjaGlsZHJlbjpbIkhhcyBWaWRlbzogIixoLnZpZGVvQmxvYj8iWWVzIjoiTm8iXX0pLGguY29uZmlkZW5jZSYmUC5qc3hzKCJkaXYiLHtjaGlsZHJlbjpbIkNvbmZpZGVuY2U6ICIsKGguY29uZmlkZW5jZSoxMDApLnRvRml4ZWQoMSksIiUiXX0pXX0pLGguZGV0ZWN0aW9ucyYmaC5kZXRlY3Rpb25zLmxlbmd0aD4wJiZQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiYmctZ3JheS04MDAgcm91bmRlZCBwLTMgbXQtMiIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS00MDAgbWItMiIsY2hpbGRyZW46WyLwn46vIERldGVjdGVkIE9iamVjdHMgKCIsaC5kZXRlY3Rpb25zLmxlbmd0aCwiKSJdfSksUC5qc3goImRpdiIse2NsYXNzTmFtZToic3BhY2UteS0yIixjaGlsZHJlbjpoLmRldGVjdGlvbnMubWFwKChnLHkpPT57Y29uc3Qgdz1NYXRoLnJvdW5kKChnLnNjb3JlfHxnLmNvbmZpZGVuY2V8fDApKjEwMCksYj1nLmNsYXNzTmFtZXx8Zy5jbGFzc3x8IlVua25vd24iLHY9Zy5iYm94fHxbMCwwLDAsMF0sW1MsJCxrLFRdPXY7bGV0IEQ9InRleHQtZ3JlZW4tNDAwIixMPSLwn5+iIjtyZXR1cm5bInBlcnNvbiJdLmluY2x1ZGVzKGIudG9Mb3dlckNhc2UoKSk/KEQ9InRleHQtcmVkLTQwMCIsTD0i8J+UtCIpOlsiY2FyIiwidHJ1Y2siLCJtb3RvcmN5Y2xlIiwiYmljeWNsZSJdLmluY2x1ZGVzKGIudG9Mb3dlckNhc2UoKSk/KEQ9InRleHQtb3JhbmdlLTQwMCIsTD0i8J+foCIpOlsia25pZmUiLCJzY2lzc29ycyIsImJvdHRsZSJdLmluY2x1ZGVzKGIudG9Mb3dlckNhc2UoKSkmJihEPSJ0ZXh0LXJlZC01MDAiLEw9IuKaoO+4jyIpLFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gdGV4dC14cyBib3JkZXItbC0yIGJvcmRlci1ncmF5LTYwMCBwbC0yIixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiIsY2hpbGRyZW46W1AuanN4KCJzcGFuIix7Y2hpbGRyZW46TH0pLFAuanN4KCJzcGFuIix7Y2xhc3NOYW1lOmBmb250LW1lZGl1bSAke0R9YCxjaGlsZHJlbjpiLnRvVXBwZXJDYXNlKCl9KSxQLmpzeHMoInNwYW4iLHtjbGFzc05hbWU6InRleHQtZ3JheS00MDAiLGNoaWxkcmVuOlt3LCIlIGNvbmZpZGVuY2UiXX0pXX0pLFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJ0ZXh0LWdyYXktNTAwIHRleHQteHMiLGNoaWxkcmVuOlsi8J+TjSAoIixNYXRoLnJvdW5kKFMpLCIsICIsTWF0aC5yb3VuZCgkKSwiKSDwn5OPICIsTWF0aC5yb3VuZChrKSwiw5ciLE1hdGgucm91bmQoVCksInB4Il19KV19LHkpfSl9KV19KSxoLm1ldGFkYXRhJiZQLmpzeHMoImRpdiIse2NsYXNzTmFtZToidGV4dC14cyB0ZXh0LWdyYXktNDAwIixjaGlsZHJlbjpbUC5qc3goInN0cm9uZyIse2NoaWxkcmVuOiJDYW1lcmE6In0pLCIgIixoLm1ldGFkYXRhLmNhbWVyYUlkLGgubWV0YWRhdGEuZHVyYXRpb24mJlAuanN4cygic3BhbiIse2NsYXNzTmFtZToibWwtMiIsY2hpbGRyZW46W1AuanN4KCJzdHJvbmciLHtjaGlsZHJlbjoiRHVyYXRpb246In0pLCIgIixoLm1ldGFkYXRhLmR1cmF0aW9uLCJzIl19KSxoLm1ldGFkYXRhLmRldmljZUlkJiZQLmpzeHMoInNwYW4iLHtjbGFzc05hbWU6Im1sLTIiLGNoaWxkcmVuOltQLmpzeCgic3Ryb25nIix7Y2hpbGRyZW46IkRldmljZToifSksIiAiLGgubWV0YWRhdGEuZGV2aWNlSWRdfSldfSldfSksKGguaW1hZ2VCbG9ifHxoLnZpZGVvQmxvYikmJlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgbXQtMyIsY2hpbGRyZW46W2guaW1hZ2VCbG9iJiZQLmpzeHMoImJ1dHRvbiIse29uQ2xpY2s6KCk9PmEoaC5pbWFnZUJsb2IsImltYWdlIixoLmlkKSxjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMSBweC0zIHB5LTEgYmctYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS03MDAgcm91bmRlZCB0ZXh0LXhzIHRleHQtd2hpdGUgdHJhbnNpdGlvbi1jb2xvcnMiLGNoaWxkcmVuOltQLmpzeChUTyx7Y2xhc3NOYW1lOiJoLTMgdy0zIn0pLFAuanN4KCJzcGFuIix7Y2hpbGRyZW46IlZpZXcgSW1hZ2UifSldfSksaC52aWRlb0Jsb2ImJlAuanN4cygiYnV0dG9uIix7b25DbGljazooKT0+YShoLnZpZGVvQmxvYiwidmlkZW8iLGguaWQpLGNsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0xIHB4LTMgcHktMSBiZy1ncmVlbi02MDAgaG92ZXI6YmctZ3JlZW4tNzAwIHJvdW5kZWQgdGV4dC14cyB0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzIixjaGlsZHJlbjpbUC5qc3goQU8se2NsYXNzTmFtZToiaC0zIHctMyJ9KSxQLmpzeCgic3BhbiIse2NoaWxkcmVuOiJQbGF5IFZpZGVvIn0pXX0pXX0pLCFoLmltYWdlQmxvYiYmIWgudmlkZW9CbG9iJiZmJiZQLmpzeHMoImRpdiIse2NsYXNzTmFtZToibXQtMyBwLTIgYmctZ3JheS03MDAgcm91bmRlZCB0ZXh0LXhzIHRleHQtZ3JheS00MDAiLGNoaWxkcmVuOltQLmpzeChSTyx7Y2xhc3NOYW1lOiJoLTMgdy0zIGlubGluZSBtci0xIn0pLCJObyBtZWRpYSByZWNvcmRlZCBmb3IgdGhpcyBldmVudCJdfSldfSldfSl9LGguaWQpfSl9KSxlJiZQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNzUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MCBwLTQiLGNoaWxkcmVuOlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJyZWxhdGl2ZSBtYXgtdy00eGwgbWF4LWgtZnVsbCBiZy1ncmF5LTkwMCByb3VuZGVkLWxnIG92ZXJmbG93LWhpZGRlbiIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC00IGJvcmRlci1iIGJvcmRlci1ncmF5LTcwMCIsY2hpbGRyZW46W1AuanN4KCJoMyIse2NsYXNzTmFtZToidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LXdoaXRlIixjaGlsZHJlbjplLnR5cGU9PT0idmlkZW8iPyJFdmVudCBWaWRlbyI6IkV2ZW50IEltYWdlIn0pLFAuanN4KCJidXR0b24iLHtvbkNsaWNrOmwsY2xhc3NOYW1lOiJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtd2hpdGUgdHJhbnNpdGlvbi1jb2xvcnMiLGNoaWxkcmVuOlAuanN4KGpPLHtjbGFzc05hbWU6ImgtNiB3LTYifSl9KV19KSxQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJwLTQiLGNoaWxkcmVuOmUudHlwZT09PSJ2aWRlbyI/UC5qc3goInZpZGVvIix7c3JjOmUudXJsLGNvbnRyb2xzOiEwLGF1dG9QbGF5OiEwLG11dGVkOiEwLHBsYXlzSW5saW5lOiEwLHN0eWxlOnttYXhXaWR0aDoiMTAwJSIsbWF4SGVpZ2h0OiI3MHZoIn0sY2xhc3NOYW1lOiJyb3VuZGVkIixvbkVycm9yOmg9Pntjb25zb2xlLmVycm9yKCJWaWRlbyBwbGF5YmFjayBlcnJvcjoiLGgpLGNvbnNvbGUubG9nKCJWaWRlbyBVUkw6IixlLnVybCksY29uc29sZS5sb2coIlZpZGVvIGJsb2IgdHlwZToiLGUuYmxvYj8udHlwZSl9LGNoaWxkcmVuOiJZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB2aWRlbyBwbGF5YmFjay4ifSk6UC5qc3goImltZyIse3NyYzplLnVybCxhbHQ6IkV2ZW50IGNhcHR1cmUiLGNsYXNzTmFtZToibWF4LXctZnVsbCBtYXgtaC1bNzB2aF0gcm91bmRlZCBvYmplY3QtY29udGFpbiIsb25FcnJvcjpoPT57Y29uc29sZS5lcnJvcigiSW1hZ2UgbG9hZCBlcnJvcjoiLGgpLGNvbnNvbGUubG9nKCJJbWFnZSBVUkw6IixlLnVybCl9fSl9KV19KX0pXX0pfSxFaWU9KHtzZXR0aW5nczpuLG9uU2V0dGluZ3NDaGFuZ2U6ZX0pPT57Y29uc3RbdCxzXT1VZS51c2VTdGF0ZShudWxsKSxbcixvXT1VZS51c2VTdGF0ZShudWxsKSxbaSxhXT1VZS51c2VTdGF0ZSghMSksW2wsY109VWUudXNlU3RhdGUoe2FjY291bnROYW1lOm4uYXp1cmVDb25maWc/LmFjY291bnROYW1lfHwiIixjb250YWluZXJOYW1lOm4uYXp1cmVDb25maWc/LmNvbnRhaW5lck5hbWV8fCIiLHNhc1Rva2VuOm4uYXp1cmVDb25maWc/LnNhc1Rva2VufHwiIn0pO1VlLnVzZUVmZmVjdCgoKT0+e2NvbnN0IGY9YXN5bmMoKT0+e3RyeXtjb25zdCB5PWF3YWl0IFFvLmdldFN0b3JhZ2VTdGF0cygpO28oeSk7Y29uc3Qgdz1Rby5nZXRTeW5jU3RhdHVzKCk7cyh3KX1jYXRjaCh5KXtjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gbG9hZCBzdGF0czoiLHkpfX07ZigpLFFvLm9uU3RhdHVzQ2hhbmdlKHMpO2NvbnN0IGc9c2V0SW50ZXJ2YWwoZiwxZTQpO3JldHVybigpPT57Y2xlYXJJbnRlcnZhbChnKX19LFtdKSxVZS51c2VFZmZlY3QoKCk9PntuLmF6dXJlQ29uZmlnJiZjKHthY2NvdW50TmFtZTpuLmF6dXJlQ29uZmlnLmFjY291bnROYW1lfHwiIixjb250YWluZXJOYW1lOm4uYXp1cmVDb25maWcuY29udGFpbmVyTmFtZXx8IiIsc2FzVG9rZW46bi5henVyZUNvbmZpZy5zYXNUb2tlbnx8IiJ9KX0sW24uYXp1cmVDb25maWddKTtjb25zdCBoPShmLGcpPT57ZSh7Li4ubixbZl06Z30pfSxwPSgpPT57ZSh7Y29uZmlkZW5jZVRocmVzaG9sZDouNSxodW1hbkRldGVjdGlvbjohMCxtb3Rpb25EZXRlY3Rpb246ITAsbm90aWZpY2F0aW9uczohMCxjbG91ZFN5bmM6ITF9KX07cmV0dXJuIFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJzcGFjZS15LTYiLGNoaWxkcmVuOltQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIixjaGlsZHJlbjpbUC5qc3goImgyIix7Y2xhc3NOYW1lOiJ0ZXh0LTJ4bCBmb250LWJvbGQiLGNoaWxkcmVuOiJTZXR0aW5ncyJ9KSxQLmpzeHMoImJ1dHRvbiIse29uQ2xpY2s6cCxjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBweC00IHB5LTIgYmctZ3JheS03MDAgaG92ZXI6YmctZ3JheS02MDAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyIsY2hpbGRyZW46W1AuanN4KE9PLHtjbGFzc05hbWU6ImgtNCB3LTQifSksUC5qc3goInNwYW4iLHtjaGlsZHJlbjoiUmVzZXQgdG8gRGVmYXVsdHMifSldfSldfSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImJnLWdyYXktODAwIHJvdW5kZWQtbGcgcC02IixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBtYi00IixjaGlsZHJlbjpbUC5qc3goY2Yse2NsYXNzTmFtZToiaC01IHctNSB0ZXh0LWJsdWUtNDAwIn0pLFAuanN4KCJoMyIse2NsYXNzTmFtZToidGV4dC1sZyBmb250LW1lZGl1bSIsY2hpbGRyZW46IkRldGVjdGlvbiBTZXR0aW5ncyJ9KV19KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToic3BhY2UteS00IixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjaGlsZHJlbjpbUC5qc3hzKCJsYWJlbCIse2NsYXNzTmFtZToiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSBtYi0yIixjaGlsZHJlbjpbIkNvbmZpZGVuY2UgVGhyZXNob2xkOiAiLChuLmNvbmZpZGVuY2VUaHJlc2hvbGQqMTAwKS50b0ZpeGVkKDApLCIlIl19KSxQLmpzeCgiaW5wdXQiLHt0eXBlOiJyYW5nZSIsbWluOiIwLjEiLG1heDoiMSIsc3RlcDoiMC4wNSIsdmFsdWU6bi5jb25maWRlbmNlVGhyZXNob2xkLG9uQ2hhbmdlOmY9PmgoImNvbmZpZGVuY2VUaHJlc2hvbGQiLHBhcnNlRmxvYXQoZi50YXJnZXQudmFsdWUpKSxjbGFzc05hbWU6InctZnVsbCBoLTIgYmctZ3JheS03MDAgcm91bmRlZC1sZyBhcHBlYXJhbmNlLW5vbmUgY3Vyc29yLXBvaW50ZXIgc2xpZGVyIn0pLFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIHRleHQtZ3JheS00MDAgbXQtMSIsY2hpbGRyZW46W1AuanN4KCJzcGFuIix7Y2hpbGRyZW46IjEwJSAoTW9yZSBkZXRlY3Rpb25zKSJ9KSxQLmpzeCgic3BhbiIse2NoaWxkcmVuOiIxMDAlIChPbmx5IGhpZ2ggY29uZmlkZW5jZSkifSldfSldfSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTQiLGNoaWxkcmVuOltQLmpzeHMoImxhYmVsIix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTMgcC0zIGJnLWdyYXktNzAwIHJvdW5kZWQtbGcgY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctZ3JheS02NTAgdHJhbnNpdGlvbi1jb2xvcnMiLGNoaWxkcmVuOltQLmpzeCgiaW5wdXQiLHt0eXBlOiJjaGVja2JveCIsY2hlY2tlZDpuLmh1bWFuRGV0ZWN0aW9uLG9uQ2hhbmdlOmY9PmgoImh1bWFuRGV0ZWN0aW9uIixmLnRhcmdldC5jaGVja2VkKSxjbGFzc05hbWU6InctNCBoLTQgdGV4dC1yZWQtNTAwIGJnLWdyYXktNjAwIGJvcmRlci1ncmF5LTUwMCByb3VuZGVkIGZvY3VzOnJpbmctcmVkLTUwMCJ9KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIixjaGlsZHJlbjpbUC5qc3gobiQse2NsYXNzTmFtZToiaC00IHctNCB0ZXh0LXJlZC00MDAifSksUC5qc3goInNwYW4iLHtjbGFzc05hbWU6ImZvbnQtbWVkaXVtIixjaGlsZHJlbjoiSHVtYW4gRGV0ZWN0aW9uIn0pXX0pXX0pLFAuanN4cygibGFiZWwiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBwLTMgYmctZ3JheS03MDAgcm91bmRlZC1sZyBjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTY1MCB0cmFuc2l0aW9uLWNvbG9ycyIsY2hpbGRyZW46W1AuanN4KCJpbnB1dCIse3R5cGU6ImNoZWNrYm94IixjaGVja2VkOm4ubW90aW9uRGV0ZWN0aW9uLG9uQ2hhbmdlOmY9PmgoIm1vdGlvbkRldGVjdGlvbiIsZi50YXJnZXQuY2hlY2tlZCksY2xhc3NOYW1lOiJ3LTQgaC00IHRleHQtYmx1ZS01MDAgYmctZ3JheS02MDAgYm9yZGVyLWdyYXktNTAwIHJvdW5kZWQgZm9jdXM6cmluZy1ibHVlLTUwMCJ9KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIixjaGlsZHJlbjpbUC5qc3goSE8se2NsYXNzTmFtZToiaC00IHctNCB0ZXh0LWJsdWUtNDAwIn0pLFAuanN4KCJzcGFuIix7Y2xhc3NOYW1lOiJmb250LW1lZGl1bSIsY2hpbGRyZW46Ik1vdGlvbiBEZXRlY3Rpb24ifSldfSldfSldfSldfSldfSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImJnLWdyYXktODAwIHJvdW5kZWQtbGcgcC02IixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBtYi00IixjaGlsZHJlbjpbUC5qc3goeU8se2NsYXNzTmFtZToiaC01IHctNSB0ZXh0LXllbGxvdy00MDAifSksUC5qc3goImgzIix7Y2xhc3NOYW1lOiJ0ZXh0LWxnIGZvbnQtbWVkaXVtIixjaGlsZHJlbjoiTm90aWZpY2F0aW9ucyJ9KV19KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToic3BhY2UteS00IixjaGlsZHJlbjpbUC5qc3hzKCJsYWJlbCIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zIHAtMyBiZy1ncmF5LTcwMCByb3VuZGVkLWxnIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLWdyYXktNjUwIHRyYW5zaXRpb24tY29sb3JzIixjaGlsZHJlbjpbUC5qc3goImlucHV0Iix7dHlwZToiY2hlY2tib3giLGNoZWNrZWQ6bi5ub3RpZmljYXRpb25zLG9uQ2hhbmdlOmY9PmgoIm5vdGlmaWNhdGlvbnMiLGYudGFyZ2V0LmNoZWNrZWQpLGNsYXNzTmFtZToidy00IGgtNCB0ZXh0LXllbGxvdy01MDAgYmctZ3JheS02MDAgYm9yZGVyLWdyYXktNTAwIHJvdW5kZWQgZm9jdXM6cmluZy15ZWxsb3ctNTAwIn0pLFAuanN4cygiZGl2Iix7Y2hpbGRyZW46W1AuanN4KCJzcGFuIix7Y2xhc3NOYW1lOiJmb250LW1lZGl1bSIsY2hpbGRyZW46IlB1c2ggTm90aWZpY2F0aW9ucyJ9KSxQLmpzeCgicCIse2NsYXNzTmFtZToidGV4dC1zbSB0ZXh0LWdyYXktNDAwIixjaGlsZHJlbjoiR2V0IGFsZXJ0ZWQgd2hlbiBzZWN1cml0eSBldmVudHMgb2NjdXIifSldfSldfSksbi5ub3RpZmljYXRpb25zJiZQLmpzeHMoImRpdiIse2NsYXNzTmFtZToibWwtNyBwbC00IGJvcmRlci1sLTIgYm9yZGVyLXllbGxvdy00MDAgc3BhY2UteS0yIixjaGlsZHJlbjpbUC5qc3goInAiLHtjbGFzc05hbWU6InRleHQtc20gdGV4dC1ncmF5LTQwMCIsY2hpbGRyZW46Ik5vdGlmaWNhdGlvbiBsZXZlbHM6In0pLFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJzcGFjZS15LTEgdGV4dC1zbSIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIiLGNoaWxkcmVuOltQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJ3LTMgaC0zIGJnLXJlZC01MDAgcm91bmRlZC1mdWxsIn0pLFAuanN4KCJzcGFuIix7Y2hpbGRyZW46IkNyaXRpY2FsICYgSGlnaCBzZXZlcml0eSBldmVudHMifSldfSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiIsY2hpbGRyZW46W1AuanN4KCJkaXYiLHtjbGFzc05hbWU6InctMyBoLTMgYmctZ3JheS01MDAgcm91bmRlZC1mdWxsIn0pLFAuanN4KCJzcGFuIix7Y2hpbGRyZW46Ik1lZGl1bSAmIExvdyBzZXZlcml0eSBldmVudHMgKGRpc2FibGVkKSJ9KV19KV19KV19KV19KV19KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiYmctZ3JheS04MDAgcm91bmRlZC1sZyBwLTYiLGNoaWxkcmVuOltQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTQiLGNoaWxkcmVuOltQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zIixjaGlsZHJlbjpbUC5qc3goImRpdiIse2NsYXNzTmFtZToiaC01IHctNSB0ZXh0LXB1cnBsZS00MDAiLGNoaWxkcmVuOiLimIHvuI8ifSksUC5qc3goImgzIix7Y2xhc3NOYW1lOiJ0ZXh0LWxnIGZvbnQtbWVkaXVtIixjaGlsZHJlbjoiQ2xvdWQgU3luYyJ9KV19KSx0JiZQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOmBweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzIGZvbnQtbWVkaXVtICR7dC5pc09ubGluZT8iYmctZ3JlZW4tNTAwIHRleHQtd2hpdGUiOiJiZy1yZWQtNTAwIHRleHQtd2hpdGUifWAsY2hpbGRyZW46dC5pc09ubGluZT8i8J+foiBPbmxpbmUiOiLwn5S0IE9mZmxpbmUifSldfSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6InNwYWNlLXktNCIsY2hpbGRyZW46W1AuanN4cygibGFiZWwiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBwLTMgYmctZ3JheS03MDAgcm91bmRlZC1sZyBjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTY1MCB0cmFuc2l0aW9uLWNvbG9ycyIsY2hpbGRyZW46W1AuanN4KCJpbnB1dCIse3R5cGU6ImNoZWNrYm94IixjaGVja2VkOm4uY2xvdWRTeW5jLG9uQ2hhbmdlOmY9PmgoImNsb3VkU3luYyIsZi50YXJnZXQuY2hlY2tlZCksY2xhc3NOYW1lOiJ3LTQgaC00IHRleHQtcHVycGxlLTUwMCBiZy1ncmF5LTYwMCBib3JkZXItZ3JheS01MDAgcm91bmRlZCBmb2N1czpyaW5nLXB1cnBsZS01MDAifSksUC5qc3hzKCJkaXYiLHtjaGlsZHJlbjpbUC5qc3goInNwYW4iLHtjbGFzc05hbWU6ImZvbnQtbWVkaXVtIixjaGlsZHJlbjoiQXV0by1zeW5jIHRvIENsb3VkIn0pLFAuanN4KCJwIix7Y2xhc3NOYW1lOiJ0ZXh0LXNtIHRleHQtZ3JheS00MDAiLGNoaWxkcmVuOiJBdXRvbWF0aWNhbGx5IGJhY2t1cCBldmVudHMgYW5kIGltYWdlcyJ9KV19KV19KSxyJiZQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiYmctZ3JheS03MDAgcm91bmRlZC1sZyBwLTQiLGNoaWxkcmVuOltQLmpzeCgiaDQiLHtjbGFzc05hbWU6ImZvbnQtbWVkaXVtIG1iLTMiLGNoaWxkcmVuOiJTdG9yYWdlIFN0YXRpc3RpY3MifSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTQgdGV4dC1zbSIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2hpbGRyZW46W1AuanN4KCJwIix7Y2xhc3NOYW1lOiJ0ZXh0LWdyYXktNDAwIixjaGlsZHJlbjoiTG9jYWwgRXZlbnRzIn0pLFAuanN4KCJwIix7Y2xhc3NOYW1lOiJmb250LW1lZGl1bSIsY2hpbGRyZW46ci5sb2NhbD8udG90YWxFdmVudHN8fDB9KV19KSxQLmpzeHMoImRpdiIse2NoaWxkcmVuOltQLmpzeCgicCIse2NsYXNzTmFtZToidGV4dC1ncmF5LTQwMCIsY2hpbGRyZW46IlVuc3luY2VkIn0pLFAuanN4KCJwIix7Y2xhc3NOYW1lOiJmb250LW1lZGl1bSB0ZXh0LXllbGxvdy00MDAiLGNoaWxkcmVuOnIubG9jYWw/LnVuc3luY2VkRXZlbnRzfHwwfSldfSksUC5qc3hzKCJkaXYiLHtjaGlsZHJlbjpbUC5qc3goInAiLHtjbGFzc05hbWU6InRleHQtZ3JheS00MDAiLGNoaWxkcmVuOiJRdWV1ZSBMZW5ndGgifSksUC5qc3goInAiLHtjbGFzc05hbWU6ImZvbnQtbWVkaXVtIixjaGlsZHJlbjpyLmxvY2FsPy5xdWV1ZUxlbmd0aHx8MH0pXX0pLFAuanN4cygiZGl2Iix7Y2hpbGRyZW46W1AuanN4KCJwIix7Y2xhc3NOYW1lOiJ0ZXh0LWdyYXktNDAwIixjaGlsZHJlbjoiU3RvcmFnZSBVc2VkIn0pLFAuanN4KCJwIix7Y2xhc3NOYW1lOiJmb250LW1lZGl1bSIsY2hpbGRyZW46ci5sb2NhbD8uc3RvcmFnZVVzZWQ/YCR7KHIubG9jYWwuc3RvcmFnZVVzZWQvMTAyNC8xMDI0KS50b0ZpeGVkKDEpfSBNQmA6IjAgTUIifSldfSldfSldfSksbi5jbG91ZFN5bmMmJlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IHNwYWNlLXgtMiIsY2hpbGRyZW46W1AuanN4KCJidXR0b24iLHtvbkNsaWNrOigpPT5Rby5zeW5jTm93KCksZGlzYWJsZWQ6dD8uaXNTeW5jaW5nLGNsYXNzTmFtZToiZmxleC0xIGJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBweS0yIHB4LTQgcm91bmRlZCBob3ZlcjpiZy1wdXJwbGUtNzAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIHRyYW5zaXRpb24tY29sb3JzIixjaGlsZHJlbjp0Py5pc1N5bmNpbmc/IvCflIQgU3luY2luZy4uLiI6IvCflIQgU3luYyBOb3cifSksUC5qc3goImJ1dHRvbiIse29uQ2xpY2s6KCk9PlFvLmRvd25sb2FkRnJvbUNsb3VkKCksY2xhc3NOYW1lOiJmbGV4LTEgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBweS0yIHB4LTQgcm91bmRlZCBob3ZlcjpiZy1ibHVlLTcwMCB0cmFuc2l0aW9uLWNvbG9ycyIsY2hpbGRyZW46IuKsh++4jyBEb3dubG9hZCBmcm9tIENsb3VkIn0pXX0pLG4uY2xvdWRTeW5jJiZQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiYmctZ3JheS03MDAgcm91bmRlZC1sZyBwLTQiLGNoaWxkcmVuOltQLmpzeCgiaDQiLHtjbGFzc05hbWU6ImZvbnQtbWVkaXVtIG1iLTMiLGNoaWxkcmVuOiJBenVyZSBCbG9iIFN0b3JhZ2UgQ29uZmlndXJhdGlvbiJ9KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToic3BhY2UteS0zIixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjaGlsZHJlbjpbUC5qc3goImxhYmVsIix7Y2xhc3NOYW1lOiJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS0zMDAgbWItMSIsY2hpbGRyZW46IlN0b3JhZ2UgQWNjb3VudCBOYW1lIn0pLFAuanN4KCJpbnB1dCIse3R5cGU6InRleHQiLHZhbHVlOmwuYWNjb3VudE5hbWUsb25DaGFuZ2U6Zj0+YyhnPT4oey4uLmcsYWNjb3VudE5hbWU6Zi50YXJnZXQudmFsdWV9KSkscGxhY2Vob2xkZXI6Im15c3RvcmFnZWFjY291bnQiLGNsYXNzTmFtZToidy1mdWxsIGJnLWdyYXktNjAwIHRleHQtd2hpdGUgcm91bmRlZCBweC0zIHB5LTIgdGV4dC1zbSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1wdXJwbGUtNTAwIGZvY3VzOm91dGxpbmUtbm9uZSJ9KV19KSxQLmpzeHMoImRpdiIse2NoaWxkcmVuOltQLmpzeCgibGFiZWwiLHtjbGFzc05hbWU6ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTMwMCBtYi0xIixjaGlsZHJlbjoiQ29udGFpbmVyIE5hbWUifSksUC5qc3goImlucHV0Iix7dHlwZToidGV4dCIsdmFsdWU6bC5jb250YWluZXJOYW1lLG9uQ2hhbmdlOmY9PmMoZz0+KHsuLi5nLGNvbnRhaW5lck5hbWU6Zi50YXJnZXQudmFsdWV9KSkscGxhY2Vob2xkZXI6InNlY3VyaXR5LWV2ZW50cyIsY2xhc3NOYW1lOiJ3LWZ1bGwgYmctZ3JheS02MDAgdGV4dC13aGl0ZSByb3VuZGVkIHB4LTMgcHktMiB0ZXh0LXNtIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXB1cnBsZS01MDAgZm9jdXM6b3V0bGluZS1ub25lIn0pXX0pLFAuanN4cygiZGl2Iix7Y2hpbGRyZW46W1AuanN4KCJsYWJlbCIse2NsYXNzTmFtZToiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktMzAwIG1iLTEiLGNoaWxkcmVuOiJTQVMgVG9rZW4ifSksUC5qc3goImlucHV0Iix7dHlwZToicGFzc3dvcmQiLHZhbHVlOmwuc2FzVG9rZW4sb25DaGFuZ2U6Zj0+YyhnPT4oey4uLmcsc2FzVG9rZW46Zi50YXJnZXQudmFsdWV9KSkscGxhY2Vob2xkZXI6InN2PTIwMjItMTEtMDImc3M9YiZzcnQ9c2NvJnNwPXJ3ZGxhY3VwJnNlPS4uLiIsY2xhc3NOYW1lOiJ3LWZ1bGwgYmctZ3JheS02MDAgdGV4dC13aGl0ZSByb3VuZGVkIHB4LTMgcHktMiB0ZXh0LXNtIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXB1cnBsZS01MDAgZm9jdXM6b3V0bGluZS1ub25lIn0pXX0pLFAuanN4KCJidXR0b24iLHtvbkNsaWNrOmFzeW5jKCk9PnthKCEwKTt0cnl7aWYoY29uc29sZS5sb2coIvCflKcgU3RhcnRpbmcgY2xvdWQgc3luYyBjb25maWd1cmF0aW9uLi4uIiksY29uc29sZS5sb2coIkNvbmZpZzoiLGwpLGF3YWl0IFFvLmNvbmZpZ3VyZUNsb3VkU3luYyhsKSl7Y29uc3QgZz17Li4ubixhenVyZUNvbmZpZzpsfTtlKGcpLGFsZXJ0KCLinIUgQ2xvdWQgc3luYyBjb25maWd1cmVkIHN1Y2Nlc3NmdWxseSEiKX1lbHNlIGNvbnNvbGUuZXJyb3IoIuKdjCBDbG91ZCBzeW5jIGNvbmZpZ3VyYXRpb24gZmFpbGVkIiksYWxlcnQoYOKdjCBGYWlsZWQgdG8gY29uZmlndXJlIGNsb3VkIHN5bmMuIENoZWNrIHRoZSBicm93c2VyIGNvbnNvbGUgZm9yIGRldGFpbHMuCgpDb21tb24gaXNzdWVzOgoxLiBDT1JTIG5vdCBjb25maWd1cmVkIGluIEF6dXJlCjIuIENvbnRhaW5lciBkb2VzIG5vdCBleGlzdAozLiBTQVMgdG9rZW4gZXhwaXJlZCBvciB3cm9uZyBwZXJtaXNzaW9uc2ApfWNhdGNoKGYpe2NvbnNvbGUuZXJyb3IoIuKdjCBDbG91ZCBzeW5jIGNvbmZpZ3VyYXRpb24gZXJyb3I6IixmKSxhbGVydCgi4p2MIENvbmZpZ3VyYXRpb24gZXJyb3I6ICIrZil9ZmluYWxseXthKCExKX19LGRpc2FibGVkOml8fCFsLmFjY291bnROYW1lfHwhbC5jb250YWluZXJOYW1lfHwhbC5zYXNUb2tlbixjbGFzc05hbWU6InctZnVsbCBiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSBweS0yIHB4LTQgcm91bmRlZCBob3ZlcjpiZy1ncmVlbi03MDAgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgdHJhbnNpdGlvbi1jb2xvcnMiLGNoaWxkcmVuOmk/IuKPsyBUZXN0aW5nLi4uIjoi4pyFIFNhdmUgJiBUZXN0IENvbmZpZ3VyYXRpb24ifSldfSldfSksIW4uY2xvdWRTeW5jJiZQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJtbC03IHBsLTQgYm9yZGVyLWwtMiBib3JkZXItZ3JheS02MDAiLGNoaWxkcmVuOlAuanN4KCJwIix7Y2xhc3NOYW1lOiJ0ZXh0LXNtIHRleHQtZ3JheS00MDAiLGNoaWxkcmVuOiJFbmFibGUgY2xvdWQgc3luYyBhYm92ZSB0byBjb25maWd1cmUgQXp1cmUgQmxvYiBTdG9yYWdlIn0pfSldfSldfSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImJnLWdyYXktODAwIHJvdW5kZWQtbGcgcC02IixjaGlsZHJlbjpbUC5qc3goImgzIix7Y2xhc3NOYW1lOiJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG1iLTQiLGNoaWxkcmVuOiJQZXJmb3JtYW5jZSBJbmZvIn0pLFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGdhcC00IHRleHQtc20iLGNoaWxkcmVuOltQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiYmctZ3JheS03MDAgcC0zIHJvdW5kZWQiLGNoaWxkcmVuOltQLmpzeCgicCIse2NsYXNzTmFtZToidGV4dC1ncmF5LTQwMCIsY2hpbGRyZW46IlByb2Nlc3NpbmcgUmF0ZSJ9KSxQLmpzeCgicCIse2NsYXNzTmFtZToiZm9udC1tZWRpdW0iLGNoaWxkcmVuOiI1IEZQUyJ9KV19KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiYmctZ3JheS03MDAgcC0zIHJvdW5kZWQiLGNoaWxkcmVuOltQLmpzeCgicCIse2NsYXNzTmFtZToidGV4dC1ncmF5LTQwMCIsY2hpbGRyZW46Ik1MIEJhY2tlbmQifSksUC5qc3goInAiLHtjbGFzc05hbWU6ImZvbnQtbWVkaXVtIixjaGlsZHJlbjoiV2ViR0wifSldfSksUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImJnLWdyYXktNzAwIHAtMyByb3VuZGVkIixjaGlsZHJlbjpbUC5qc3goInAiLHtjbGFzc05hbWU6InRleHQtZ3JheS00MDAiLGNoaWxkcmVuOiJDYW1lcmEgUmVzb2x1dGlvbiJ9KSxQLmpzeCgicCIse2NsYXNzTmFtZToiZm9udC1tZWRpdW0iLGNoaWxkcmVuOiIxMjgweDcyMCJ9KV19KV19KV19KSxQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGp1c3RpZnktZW5kIixjaGlsZHJlbjpQLmpzeHMoImJ1dHRvbiIse29uQ2xpY2s6KCk9PnthbGVydCgi4pyFIFNldHRpbmdzIHNhdmVkIHN1Y2Nlc3NmdWxseSEiKX0sY2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgcHgtNiBweS0zIGJnLWJsdWUtNTAwIGhvdmVyOmJnLWJsdWUtNjAwIHJvdW5kZWQtbGcgZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMiLGNoaWxkcmVuOltQLmpzeChMTyx7Y2xhc3NOYW1lOiJoLTQgdy00In0pLFAuanN4KCJzcGFuIix7Y2hpbGRyZW46IlNldHRpbmdzIEF1dG8tU2F2ZWQifSldfSl9KV19KX0sbkE9VWUuY3JlYXRlQ29udGV4dCh2b2lkIDApLHh2PSgpPT57Y29uc3Qgbj1VZS51c2VDb250ZXh0KG5BKTtpZihuPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcigidXNlQXV0aCBtdXN0IGJlIHVzZWQgd2l0aGluIGFuIEF1dGhQcm92aWRlciIpO3JldHVybiBufSxSaWU9KHtjaGlsZHJlbjpufSk9Pntjb25zdFtlLHRdPVVlLnVzZVN0YXRlKG51bGwpLFtzLHJdPVVlLnVzZVN0YXRlKCEwKTtVZS51c2VFZmZlY3QoKCk9PnsoYXN5bmMoKT0+e3RyeXtjb25zdCBwPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkuZ2V0KCJ0b2tlbiIpO2lmKHApdHJ5e2NvbnN0IGc9SlNPTi5wYXJzZShhdG9iKHApKSx5PXtpZDpnLmlkLnRvU3RyaW5nKCksZW1haWw6Zy5lbWFpbCxuYW1lOmcubmFtZXx8Zy5sb2dpbixpbWFnZTpnLmltYWdlLHByb3ZpZGVyOmcucHJvdmlkZXJ8fCJnaXRodWIifTt0KHkpLGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJhdXRoX3Rva2VuIixwKSx3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sZG9jdW1lbnQudGl0bGUsd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKSxyKCExKTtyZXR1cm59Y2F0Y2goZyl7Y29uc29sZS5lcnJvcigiSW52YWxpZCB0b2tlbiBmcm9tIFVSTDoiLGcpfWNvbnN0IGY9bG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhfdG9rZW4iKTtpZihmKXRyeXtjb25zdCBnPUpTT04ucGFyc2UoYXRvYihmKSk7aWYoZy5leHBpcmVzJiZnLmV4cGlyZXM+RGF0ZS5ub3coKSl7Y29uc3QgeT17aWQ6Zy5pZC50b1N0cmluZygpLGVtYWlsOmcuZW1haWwsbmFtZTpnLm5hbWV8fGcubG9naW4saW1hZ2U6Zy5pbWFnZSxwcm92aWRlcjpnLnByb3ZpZGVyfHwiZ2l0aHViIn07dCh5KX1lbHNlIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJhdXRoX3Rva2VuIil9Y2F0Y2goZyl7Y29uc29sZS5lcnJvcigiSW52YWxpZCBzdG9yZWQgdG9rZW46IixnKSxsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiYXV0aF90b2tlbiIpfX1jYXRjaChoKXtjb25zb2xlLmVycm9yKCJBdXRoIGNoZWNrIGZhaWxlZDoiLGgpLGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJhdXRoX3Rva2VuIil9ZmluYWxseXtyKCExKX19KSgpfSxbXSk7Y29uc3QgbD17dXNlcjplLGlzTG9hZGluZzpzLHNpZ25JbjpjPT57Y29uc29sZS5sb2coYPCfmoAgc2lnbkluIGNhbGxlZCB3aXRoIHByb3ZpZGVyOiAke2N9YCk7Y29uc3QgaD1gL2F1dGgvJHtjfWA7Y29uc29sZS5sb2coYPCfjJAgUmVkaXJlY3RpbmcgdG86ICR7aH1gKTt0cnl7d2luZG93LmxvY2F0aW9uLmFzc2lnbihoKX1jYXRjaChwKXtjb25zb2xlLmVycm9yKCJ3aW5kb3cubG9jYXRpb24uYXNzaWduIGZhaWxlZDoiLHApO3RyeXt3aW5kb3cubG9jYXRpb24uaHJlZj1ofWNhdGNoKGYpe2NvbnNvbGUuZXJyb3IoIndpbmRvdy5sb2NhdGlvbi5ocmVmIGZhaWxlZDoiLGYpLHdpbmRvdy5vcGVuKGgsIl9zZWxmIil9fX0sc2lnbk91dDphc3luYygpPT57dHJ5e2F3YWl0IGZldGNoKCIvYXBpL2F1dGgvc2lnbm91dCIse21ldGhvZDoiUE9TVCIsaGVhZGVyczp7QXV0aG9yaXphdGlvbjpgQmVhcmVyICR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhfdG9rZW4iKX1gfX0pfWNhdGNoKGMpe2NvbnNvbGUuZXJyb3IoIlNpZ25vdXQgZXJyb3I6IixjKX1maW5hbGx5e2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJhdXRoX3Rva2VuIiksdChudWxsKX19LGlzQXV0aGVudGljYXRlZDohIWV9O3JldHVybiBQLmpzeChuQS5Qcm92aWRlcix7dmFsdWU6bCxjaGlsZHJlbjpufSl9LERpZT0oe2NoaWxkcmVuOm59KT0+UC5qc3goUmllLHtjaGlsZHJlbjpufSksQWllPSh7Y2xhc3NOYW1lOm49IiJ9KT0+e2NvbnN0e3VzZXI6ZSxpc0xvYWRpbmc6dCxzaWduSW46cyxzaWduT3V0OnIsaXNBdXRoZW50aWNhdGVkOm99PXh2KCksW2ksYV09VWUudXNlU3RhdGUoITEpLGw9YXN5bmMoKT0+e2EoITApO3RyeXthd2FpdCByKCl9Y2F0Y2goYyl7Y29uc29sZS5lcnJvcigiU2lnbiBvdXQgZXJyb3I6IixjKX1maW5hbGx5e2EoITEpfX07cmV0dXJuIHQ/UC5qc3goImRpdiIse2NsYXNzTmFtZTpgYW5pbWF0ZS1wdWxzZSAke259YCxjaGlsZHJlbjpQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJoLTEwIGJnLWdyYXktMjAwIHJvdW5kZWQtbWQgdy0yNCJ9KX0pOm8mJmU/UC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6YGZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtNCAke259YCxjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiIsY2hpbGRyZW46W2UuaW1hZ2UmJlAuanN4KCJpbWciLHtzcmM6ZS5pbWFnZSxhbHQ6ZS5uYW1lfHwiVXNlciIsY2xhc3NOYW1lOiJ3LTggaC04IHJvdW5kZWQtZnVsbCJ9KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiaGlkZGVuIG1kOmJsb2NrIixjaGlsZHJlbjpbUC5qc3goInAiLHtjbGFzc05hbWU6InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCIsY2hpbGRyZW46ZS5uYW1lfSksUC5qc3goInAiLHtjbGFzc05hbWU6InRleHQteHMgdGV4dC1ncmF5LTUwMCIsY2hpbGRyZW46ZS5lbWFpbH0pXX0pXX0pLFAuanN4KCJidXR0b24iLHtvbkNsaWNrOmwsZGlzYWJsZWQ6aSxjbGFzc05hbWU6InB4LTQgcHktMiB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS02MDAgaG92ZXI6dGV4dC1ncmF5LTkwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIixjaGlsZHJlbjppPyJTaWduaW5nIG91dC4uLiI6IlNpZ24gb3V0In0pXX0pOlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOmBzcGFjZS14LTIgJHtufWAsY2hpbGRyZW46W1AuanN4KCJhIix7aHJlZjoiL2F1dGgvZ2l0aHViIixjbGFzc05hbWU6ImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBweC00IHB5LTIgYm9yZGVyIGJvcmRlci1ibHVlLTMwMCByb3VuZGVkLW1kIHNoYWRvdy1zbSB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS03MDAgYmctYmx1ZS01MCBob3ZlcjpiZy1ibHVlLTEwMCIsY2hpbGRyZW46IkRpcmVjdCBHaXRIdWIgTGluayAoVGVzdCkifSksUC5qc3hzKCJidXR0b24iLHtvbkNsaWNrOigpPT5zKCJnb29nbGUiKSxkaXNhYmxlZDp0LGNsYXNzTmFtZToiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHB4LTQgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBiZy13aGl0ZSBob3ZlcjpiZy1ncmF5LTUwIGRpc2FibGVkOm9wYWNpdHktNTAiLGNoaWxkcmVuOltQLmpzeHMoInN2ZyIse2NsYXNzTmFtZToidy00IGgtNCBtci0yIix2aWV3Qm94OiIwIDAgMjQgMjQiLGNoaWxkcmVuOltQLmpzeCgicGF0aCIse2ZpbGw6ImN1cnJlbnRDb2xvciIsZDoiTTIyLjU2IDEyLjI1YzAtLjc4LS4wNy0xLjUzLS4yLTIuMjVIMTJ2NC4yNmg1LjkyYy0uMjYgMS4zNy0xLjA0IDIuNTMtMi4yMSAzLjMxdjIuNzdoMy41N2MyLjA4LTEuOTIgMy4yOC00Ljc0IDMuMjgtOC4wOXoifSksUC5qc3goInBhdGgiLHtmaWxsOiJjdXJyZW50Q29sb3IiLGQ6Ik0xMiAyM2MyLjk3IDAgNS40Ni0uOTggNy4yOC0yLjY2bC0zLjU3LTIuNzdjLS45OC42Ni0yLjIzIDEuMDYtMy43MSAxLjA2LTIuODYgMC01LjI5LTEuOTMtNi4xNi00LjUzSDIuMTh2Mi44NEMzLjk5IDIwLjUzIDcuNyAyMyAxMiAyM3oifSksUC5qc3goInBhdGgiLHtmaWxsOiJjdXJyZW50Q29sb3IiLGQ6Ik01Ljg0IDE0LjA5Yy0uMjItLjY2LS4zNS0xLjM2LS4zNS0yLjA5cy4xMy0xLjQzLjM1LTIuMDlWNy4wN0gyLjE4QzEuNDMgOC41NSAxIDEwLjIyIDEgMTJzLjQzIDMuNDUgMS4xOCA0LjkzbDIuODUtMi4yMi44MS0uNjJ6In0pLFAuanN4KCJwYXRoIix7ZmlsbDoiY3VycmVudENvbG9yIixkOiJNMTIgNS4zOGMxLjYyIDAgMy4wNi41NiA0LjIxIDEuNjRsMy4xNS0zLjE1QzE3LjQ1IDIuMDkgMTQuOTcgMSAxMiAxIDcuNyAxIDMuOTkgMy40NyAyLjE4IDcuMDdsMy42NiAyLjg0Yy44Ny0yLjYgMy4zLTQuNTMgNi4xNi00LjUzeiJ9KV19KSx0PyJMb2FkaW5nLi4uIjoiU2lnbiBpbiB3aXRoIEdvb2dsZSJdfSksUC5qc3hzKCJidXR0b24iLHtvbkNsaWNrOmM9PntjLnByZXZlbnREZWZhdWx0KCksY29uc29sZS5sb2coIvCflJggR2l0SHViIGxvZ2luIGJ1dHRvbiBjbGlja2VkIiksY29uc29sZS5sb2coIvCflJggQnV0dG9uIGVsZW1lbnQ6IixjLnRhcmdldCksY29uc29sZS5sb2coIvCflJggaXNMb2FkaW5nOiIsdCksdD9jb25zb2xlLmxvZygi8J+UmCBCdXR0b24gZGlzYWJsZWQgLSBsb2FkaW5nIGluIHByb2dyZXNzIik6cygiZ2l0aHViIil9LGRpc2FibGVkOnQsY2xhc3NOYW1lOiJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgcHgtNCBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBzaGFkb3ctc20gdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIGJnLXdoaXRlIGhvdmVyOmJnLWdyYXktNTAgZGlzYWJsZWQ6b3BhY2l0eS01MCIsY2hpbGRyZW46W1AuanN4KCJzdmciLHtjbGFzc05hbWU6InctNCBoLTQgbXItMiIsZmlsbDoiY3VycmVudENvbG9yIix2aWV3Qm94OiIwIDAgMjQgMjQiLGNoaWxkcmVuOlAuanN4KCJwYXRoIix7ZDoiTTEyIDBjLTYuNjI2IDAtMTIgNS4zNzMtMTIgMTIgMCA1LjMwMiAzLjQzOCA5LjggOC4yMDcgMTEuMzg3LjU5OS4xMTEuNzkzLS4yNjEuNzkzLS41Nzd2LTIuMjM0Yy0zLjMzOC43MjYtNC4wMzMtMS40MTYtNC4wMzMtMS40MTYtLjU0Ni0xLjM4Ny0xLjMzMy0xLjc1Ni0xLjMzMy0xLjc1Ni0xLjA4OS0uNzQ1LjA4My0uNzI5LjA4My0uNzI5IDEuMjA1LjA4NCAxLjgzOSAxLjIzNyAxLjgzOSAxLjIzNyAxLjA3IDEuODM0IDIuODA3IDEuMzA0IDMuNDkyLjk5Ny4xMDctLjc3NS40MTgtMS4zMDUuNzYyLTEuNjA0LTIuNjY1LS4zMDUtNS40NjctMS4zMzQtNS40NjctNS45MzEgMC0xLjMxMS40NjktMi4zODEgMS4yMzYtMy4yMjEtLjEyNC0uMzAzLS41MzUtMS41MjQuMTE3LTMuMTc2IDAgMCAxLjAwOC0uMzIyIDMuMzAxIDEuMjMuOTU3LS4yNjYgMS45ODMtLjM5OSAzLjAwMy0uNDA0IDEuMDIuMDA1IDIuMDQ3LjEzOCAzLjAwNi40MDQgMi4yOTEtMS41NTIgMy4yOTctMS4yMyAzLjI5Ny0xLjIzLjY1MyAxLjY1My4yNDIgMi44NzQuMTE4IDMuMTc2Ljc3Ljg0IDEuMjM1IDEuOTExIDEuMjM1IDMuMjIxIDAgNC42MDktMi44MDcgNS42MjQtNS40NzkgNS45MjEuNDMuMzcyLjgyMyAxLjEwMi44MjMgMi4yMjJ2My4yOTNjMCAuMzE5LjE5Mi42OTQuODAxLjU3NiA0Ljc2NS0xLjU4OSA4LjE5OS02LjA4NiA4LjE5OS0xMS4zODYgMC02LjYyNy01LjM3My0xMi0xMi0xMnoifSl9KSx0PyJMb2FkaW5nLi4uIjoiU2lnbiBpbiB3aXRoIEdpdEh1YiJdfSldfSl9LF9pZT0oKT0+e2NvbnN0e3VzZXI6bixzaWduT3V0OmV9PXh2KCksW3Qsc109VWUudXNlU3RhdGUoITEpO2lmKCFuKXJldHVybiBudWxsO2NvbnN0IHI9YXN5bmMoKT0+e3MoITEpLGF3YWl0IGUoKX07cmV0dXJuIFAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJyZWxhdGl2ZSIsY2hpbGRyZW46W1AuanN4KCJidXR0b24iLHtvbkNsaWNrOigpPT5zKCF0KSxjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiB0ZXh0LXNtIHJvdW5kZWQtZnVsbCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctb2Zmc2V0LTIgZm9jdXM6cmluZy1ibHVlLTUwMCIsY2hpbGRyZW46bi5pbWFnZT9QLmpzeCgiaW1nIix7c3JjOm4uaW1hZ2UsYWx0Om4ubmFtZXx8IlVzZXIiLGNsYXNzTmFtZToidy04IGgtOCByb3VuZGVkLWZ1bGwifSk6UC5qc3goImRpdiIse2NsYXNzTmFtZToidy04IGgtOCByb3VuZGVkLWZ1bGwgYmctZ3JheS00MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIiLGNoaWxkcmVuOlAuanN4KCJzcGFuIix7Y2xhc3NOYW1lOiJ0ZXh0LXdoaXRlIHRleHQtc20gZm9udC1tZWRpdW0iLGNoaWxkcmVuOm4ubmFtZT8uWzBdfHxuLmVtYWlsWzBdLnRvVXBwZXJDYXNlKCl9KX0pfSksdCYmUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImFic29sdXRlIHJpZ2h0LTAgbXQtMiB3LTQ4IGJnLXdoaXRlIHJvdW5kZWQtbWQgc2hhZG93LWxnIHB5LTEgei01MCIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJweC00IHB5LTIgYm9yZGVyLWIiLGNoaWxkcmVuOltQLmpzeCgicCIse2NsYXNzTmFtZToidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIixjaGlsZHJlbjpuLm5hbWV9KSxQLmpzeCgicCIse2NsYXNzTmFtZToidGV4dC14cyB0ZXh0LWdyYXktNTAwIixjaGlsZHJlbjpuLmVtYWlsfSksUC5qc3hzKCJwIix7Y2xhc3NOYW1lOiJ0ZXh0LXhzIHRleHQtYmx1ZS01MDAgY2FwaXRhbGl6ZSIsY2hpbGRyZW46WyJ2aWEgIixuLnByb3ZpZGVyXX0pXX0pLFAuanN4KCJhIix7aHJlZjoiL3Byb2ZpbGUiLGNsYXNzTmFtZToiYmxvY2sgcHgtNCBweS0yIHRleHQtc20gdGV4dC1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTEwMCIsY2hpbGRyZW46IlByb2ZpbGUgU2V0dGluZ3MifSksUC5qc3goImEiLHtocmVmOiIvc3Vic2NyaXB0aW9uIixjbGFzc05hbWU6ImJsb2NrIHB4LTQgcHktMiB0ZXh0LXNtIHRleHQtZ3JheS03MDAgaG92ZXI6YmctZ3JheS0xMDAiLGNoaWxkcmVuOiJTdWJzY3JpcHRpb24ifSksUC5qc3goImJ1dHRvbiIse29uQ2xpY2s6cixjbGFzc05hbWU6ImJsb2NrIHctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0yIHRleHQtc20gdGV4dC1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTEwMCIsY2hpbGRyZW46IlNpZ24gb3V0In0pXX0pXX0pfSxPaWU9KHtjaGlsZHJlbjpuLGZhbGxiYWNrOmV9KT0+e2NvbnN0e2lzTG9hZGluZzp0LGlzQXV0aGVudGljYXRlZDpzfT14digpO3JldHVybiB0P1AuanN4KCJkaXYiLHtjbGFzc05hbWU6Im1pbi1oLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciIsY2hpbGRyZW46UC5qc3goImRpdiIse2NsYXNzTmFtZToiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLWItMiBib3JkZXItYmx1ZS02MDAifSl9KTpzP1AuanN4KFAuRnJhZ21lbnQse2NoaWxkcmVuOm59KTplfHxQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS01MCIsY2hpbGRyZW46UC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6Im1heC13LW1kIHctZnVsbCBzcGFjZS15LTgiLGNoaWxkcmVuOltQLmpzeHMoImRpdiIse2NsYXNzTmFtZToidGV4dC1jZW50ZXIiLGNoaWxkcmVuOltQLmpzeCgiaDIiLHtjbGFzc05hbWU6Im10LTYgdGV4dC0zeGwgZm9udC1leHRyYWJvbGQgdGV4dC1ncmF5LTkwMCIsY2hpbGRyZW46IlNpZ24gaW4gdG8gY29udGludWUifSksUC5qc3goInAiLHtjbGFzc05hbWU6Im10LTIgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIixjaGlsZHJlbjoiQWNjZXNzIHlvdXIgc2VjdXJpdHkgbW9uaXRvcmluZyBkYXNoYm9hcmQifSldfSksUC5qc3goImRpdiIse2NsYXNzTmFtZToiZmxleCBqdXN0aWZ5LWNlbnRlciIsY2hpbGRyZW46UC5qc3goQWllLHt9KX0pXX0pfSl9O2Z1bmN0aW9uIEZpZSgpe2NvbnN0W24sZV09VWUudXNlU3RhdGUoITEpLFt0LHNdPVVlLnVzZVN0YXRlKFtdKSxbcixvXT1VZS51c2VTdGF0ZShbXSksW2ksYV09VWUudXNlU3RhdGUoImxpdmUiKSxbbCxjXT1VZS51c2VTdGF0ZSh7Y29uZmlkZW5jZVRocmVzaG9sZDouNSxodW1hbkRldGVjdGlvbjohMCxtb3Rpb25EZXRlY3Rpb246ITAsbm90aWZpY2F0aW9uczohMCxjbG91ZFN5bmM6ITEsYXp1cmVDb25maWc6dm9pZCAwfSksW2gscF09VWUudXNlU3RhdGUoITEpLFtmLGddPVVlLnVzZVN0YXRlKCExKTtVZS51c2VFZmZlY3QoKCk9PnsoYXN5bmMoKT0+e3RyeXthd2FpdCBWdC5pbml0aWFsaXplKCksY29uc29sZS5sb2coIuKchSBEYXRhYmFzZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHkiKSxhd2FpdCBRby5pbml0aWFsaXplKCksY29uc29sZS5sb2coIuKchSBTeW5jIHNlcnZpY2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5IiksZyghMCl9Y2F0Y2goUyl7Y29uc29sZS5lcnJvcigi4p2MIEZhaWxlZCB0byBpbml0aWFsaXplIGRhdGFiYXNlIG9yIHN5bmMgc2VydmljZToiLFMpfX0pKCl9LFtdKTtjb25zdCB5PXY9PntsZXQgUz0ibWVkaXVtIjt2LmRldGVjdGlvbnMuc29tZShUPT5ULmNsYXNzTmFtZT09PSJwZXJzb24iKXx8di5jb25maWRlbmNlPi44P1M9ImhpZ2giOnYuY29uZmlkZW5jZT4uNj9TPSJtZWRpdW0iOlM9ImxvdyI7Y29uc3QgJD12LmRldGVjdGlvbnMubWFwKFQ9PlQuY2xhc3NOYW1lKS5qb2luKCIsICIpLGs9JD9gJHskfSBkZXRlY3RlZCB3aXRoICR7KHYuY29uZmlkZW5jZSoxMDApLnRvRml4ZWQoMSl9JSBjb25maWRlbmNlYDpgJHt2LnR5cGV9IGV2ZW50YDtyZXR1cm57aWQ6di5pZCx0eXBlOnYudHlwZSxtZXNzYWdlOmssdGltZXN0YW1wOnYudGltZXN0YW1wLG9iamVjdHM6di5kZXRlY3Rpb25zLm1hcChUPT4oe2NsYXNzOlQuY2xhc3NOYW1lLGNvbmZpZGVuY2U6VC5zY29yZSxiYm94OlQuYmJveCx0aW1lc3RhbXA6di50aW1lc3RhbXB9KSksc2V2ZXJpdHk6UyxkZXRlY3Rpb25zOnYuZGV0ZWN0aW9ucyxjb25maWRlbmNlOnYuY29uZmlkZW5jZSxpbWFnZUJsb2I6di5pbWFnZUJsb2IsdmlkZW9CbG9iOnYudmlkZW9CbG9iLG1ldGFkYXRhOnYubWV0YWRhdGF9fTtVZS51c2VFZmZlY3QoKCk9PntpZighZilyZXR1cm47KGFzeW5jKCk9Pnt0cnl7Y29uc3QgUz1hd2FpdCBWdC5nZXRTZXR0aW5ncygpO1MmJihjb25zb2xlLmxvZygi8J+TiyBMb2FkZWQgc2V0dGluZ3MgZnJvbSBzdG9yYWdlOiIsUyksYyh7Y29uZmlkZW5jZVRocmVzaG9sZDpTLmFsZXJ0VGhyZXNob2xkLGh1bWFuRGV0ZWN0aW9uOiEwLG1vdGlvbkRldGVjdGlvbjohMCxub3RpZmljYXRpb25zOiEwLGNsb3VkU3luYzpTLmNsb3VkU3luYyxhenVyZUNvbmZpZzpTLmF6dXJlQ29uZmlnfSkpfWNhdGNoKFMpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBsb2FkIHNldHRpbmdzOiIsUyl9ZmluYWxseXtwKCEwKX19KSgpfSxbZl0pLFVlLnVzZUVmZmVjdCgoKT0+e2lmKCFoKXJldHVybjsoYXN5bmMoKT0+e3RyeXthd2FpdCBWdC5zYXZlU2V0dGluZ3Moe2FsZXJ0VGhyZXNob2xkOmwuY29uZmlkZW5jZVRocmVzaG9sZCxyZWNvcmRpbmdFbmFibGVkOiEwLGNsb3VkU3luYzpsLmNsb3VkU3luYyxzeW5jT25seU9uV2lmaTohMSxtYXhMb2NhbFN0b3JhZ2VNQjoxMDAscmV0ZW50aW9uRGF5czozMCxhenVyZUNvbmZpZzpsLmF6dXJlQ29uZmlnfSksY29uc29sZS5sb2coIvCfkr4gU2V0dGluZ3Mgc2F2ZWQgdG8gc3RvcmFnZSIpfWNhdGNoKFMpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBzYXZlIHNldHRpbmdzOiIsUyl9fSkoKX0sW2wsaF0pLFVlLnVzZUVmZmVjdCgoKT0+e2lmKCFmKXJldHVybjtjb25zdCB2PWFzeW5jKCk9Pnt0cnl7Y29uc3QgJD1hd2FpdCBWdC5nZXRFdmVudHMoe2xpbWl0OjEwMH0pO2lmKCQubGVuZ3RoPjApe2NvbnNvbGUubG9nKCLwn5OaIExvYWRlZCBldmVudHMgZnJvbSBzdG9yYWdlOiIsJC5sZW5ndGgpLCQuZm9yRWFjaChUPT57Y29uc29sZS5sb2coYPCflI0gRXZlbnQgJHtULmlkfTogaW1hZ2VCbG9iPSR7ISFULmltYWdlQmxvYn0sIHZpZGVvQmxvYj0keyEhVC52aWRlb0Jsb2J9LCBpbWFnZVNpemU9JHtULmltYWdlQmxvYj8uc2l6ZX0sIHZpZGVvU2l6ZT0ke1QudmlkZW9CbG9iPy5zaXplfWApfSk7Y29uc3Qgaz0kLm1hcCh5KTtvKGspfX1jYXRjaCgkKXtjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gbG9hZCBldmVudHM6IiwkKX19O3YoKTtjb25zdCBTPXNldEludGVydmFsKHYsNWUzKTtyZXR1cm4oKT0+Y2xlYXJJbnRlcnZhbChTKX0sW2ZdKTtjb25zdCB3PVVlLnVzZUNhbGxiYWNrKHY9PntzKHYpLHYuZm9yRWFjaChTPT57aWYoUy5jb25maWRlbmNlPmwuY29uZmlkZW5jZVRocmVzaG9sZCl7Y29uc3QgJD17aWQ6RGF0ZS5ub3coKS50b1N0cmluZygpK01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLHR5cGU6ImRldGVjdGlvbiIsbWVzc2FnZTpgJHtTLmNsYXNzfSBkZXRlY3RlZCB3aXRoICR7KFMuY29uZmlkZW5jZSoxMDApLnRvRml4ZWQoMSl9JSBjb25maWRlbmNlYCx0aW1lc3RhbXA6bmV3IERhdGUsb2JqZWN0czpbU10sc2V2ZXJpdHk6Uy5jbGFzcz09PSJwZXJzb24iPyJoaWdoIjoibWVkaXVtIn07byhrPT5bJCwuLi5rLnNsaWNlKDAsOTkpXSl9fSl9LFtsLmNvbmZpZGVuY2VUaHJlc2hvbGRdKSxiPSgpPT57aWYoZSghbiksbil7Y29uc3Qgdj17aWQ6RGF0ZS5ub3coKS50b1N0cmluZygpLHR5cGU6ImFsZXJ0IixtZXNzYWdlOiJTZWN1cml0eSBtb25pdG9yaW5nIHN0b3BwZWQiLHRpbWVzdGFtcDpuZXcgRGF0ZSxzZXZlcml0eToibG93In07byhTPT5bdiwuLi5TXSl9ZWxzZXtjb25zdCB2PXtpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCksdHlwZToiYWxlcnQiLG1lc3NhZ2U6IlNlY3VyaXR5IG1vbml0b3Jpbmcgc3RhcnRlZCIsdGltZXN0YW1wOm5ldyBEYXRlLHNldmVyaXR5OiJsb3cifTtvKFM9Plt2LC4uLlNdKX19O3JldHVybiBVZS51c2VFZmZlY3QoKCk9PnsiTm90aWZpY2F0aW9uImluIHdpbmRvdyYmTm90aWZpY2F0aW9uLnBlcm1pc3Npb249PT0iZGVmYXVsdCImJk5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpfSxbXSksVWUudXNlRWZmZWN0KCgpPT57aWYobC5ub3RpZmljYXRpb25zJiZyLmxlbmd0aD4wKXtjb25zdCB2PXJbMF07KHYuc2V2ZXJpdHk9PT0iaGlnaCJ8fHYuc2V2ZXJpdHk9PT0iY3JpdGljYWwiKSYmIk5vdGlmaWNhdGlvbiJpbiB3aW5kb3cmJk5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uPT09ImdyYW50ZWQiJiZuZXcgTm90aWZpY2F0aW9uKCJTZWN1cml0eSBBbGVydCIse2JvZHk6di5tZXNzYWdlLGljb246Ii9wd2EtMTkyeDE5Mi5wbmcifSl9fSxbcixsLm5vdGlmaWNhdGlvbnNdKSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUiLGNoaWxkcmVuOltQLmpzeCgiaGVhZGVyIix7Y2xhc3NOYW1lOiJiZy1ncmF5LTgwMCBib3JkZXItYiBib3JkZXItZ3JheS03MDAgcC00IixjaGlsZHJlbjpQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1heC13LTZ4bCBteC1hdXRvIixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyIsY2hpbGRyZW46W1AuanN4KG4kLHtjbGFzc05hbWU6ImgtOCB3LTggdGV4dC1ibHVlLTQwMCJ9KSxQLmpzeCgiaDEiLHtjbGFzc05hbWU6InRleHQteGwgZm9udC1ib2xkIixjaGlsZHJlbjoiSG9tZSBTZWN1cml0eSJ9KV19KSxQLmpzeHMoImRpdiIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC00IixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6YGZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBweC0zIHB5LTEgcm91bmRlZC1mdWxsIHRleHQtc20gJHtuPyJiZy1ncmVlbi01MDAiOiJiZy1ncmF5LTYwMCJ9YCxjaGlsZHJlbjpbUC5qc3goImRpdiIse2NsYXNzTmFtZTpgdy0yIGgtMiByb3VuZGVkLWZ1bGwgJHtuPyJiZy13aGl0ZSBhbmltYXRlLXB1bHNlIjoiYmctZ3JheS00MDAifWB9KSxQLmpzeCgic3BhbiIse2NoaWxkcmVuOm4/Ik1vbml0b3JpbmciOiJPZmZsaW5lIn0pXX0pLHIubGVuZ3RoPjAmJlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTEgdGV4dC1zbSB0ZXh0LXllbGxvdy00MDAiLGNoaWxkcmVuOltQLmpzeChhbCx7Y2xhc3NOYW1lOiJoLTQgdy00In0pLFAuanN4KCJzcGFuIix7Y2hpbGRyZW46ci5sZW5ndGh9KV19KSxQLmpzeChfaWUse30pXX0pXX0pfSksUC5qc3goIm5hdiIse2NsYXNzTmFtZToiYmctZ3JheS04MDAgYm9yZGVyLWIgYm9yZGVyLWdyYXktNzAwIixjaGlsZHJlbjpQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJtYXgtdy02eGwgbXgtYXV0byBweC00IixjaGlsZHJlbjpQLmpzeCgiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IHNwYWNlLXgtOCIsY2hpbGRyZW46W3tpZDoibGl2ZSIsbGFiZWw6IkxpdmUgVmlldyIsaWNvbjpiT30se2lkOiJldmVudHMiLGxhYmVsOiJFdmVudHMiLGljb246YWx9LHtpZDoic2V0dGluZ3MiLGxhYmVsOiJTZXR0aW5ncyIsaWNvbjp6T31dLm1hcCh2PT57Y29uc3QgUz12Lmljb247cmV0dXJuIFAuanN4cygiYnV0dG9uIix7b25DbGljazooKT0+YSh2LmlkKSxjbGFzc05hbWU6YGZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBweS00IGJvcmRlci1iLTIgdHJhbnNpdGlvbi1jb2xvcnMgJHtpPT09di5pZD8iYm9yZGVyLWJsdWUtNDAwIHRleHQtYmx1ZS00MDAiOiJib3JkZXItdHJhbnNwYXJlbnQgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXdoaXRlIn1gLGNoaWxkcmVuOltQLmpzeChTLHtjbGFzc05hbWU6ImgtNSB3LTUifSksUC5qc3goInNwYW4iLHtjaGlsZHJlbjp2LmxhYmVsfSldfSx2LmlkKX0pfSl9KX0pLFAuanN4cygibWFpbiIse2NsYXNzTmFtZToibWF4LXctNnhsIG14LWF1dG8gcC00IixjaGlsZHJlbjpbaT09PSJsaXZlIiYmUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6InNwYWNlLXktNiIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJiZy1ncmF5LTgwMCByb3VuZGVkLWxnIG92ZXJmbG93LWhpZGRlbiIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJhc3BlY3QtdmlkZW8gcmVsYXRpdmUiLGNoaWxkcmVuOltQLmpzeCgkaWUse29uRGV0ZWN0aW9uOncsaXNBY3RpdmU6bn0pLG4mJnQubGVuZ3RoPjAmJlAuanN4KElpZSx7b2JqZWN0czp0fSldfSksUC5qc3goImRpdiIse2NsYXNzTmFtZToicC00IGJvcmRlci10IGJvcmRlci1ncmF5LTcwMCIsY2hpbGRyZW46UC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiIsY2hpbGRyZW46W1AuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTQiLGNoaWxkcmVuOltQLmpzeCgiYnV0dG9uIix7b25DbGljazpiLGNsYXNzTmFtZTpgcHgtNiBweS0yIHJvdW5kZWQtbGcgZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMgJHtuPyJiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAgdGV4dC13aGl0ZSI6ImJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSJ9YCxjaGlsZHJlbjpuPyJTdG9wIE1vbml0b3JpbmciOiJTdGFydCBNb25pdG9yaW5nIn0pLHQubGVuZ3RoPjAmJlAuanN4cygiZGl2Iix7Y2xhc3NOYW1lOiJ0ZXh0LXNtIHRleHQtZ3JheS00MDAiLGNoaWxkcmVuOlt0Lmxlbmd0aCwiIG9iamVjdHMgZGV0ZWN0ZWQiXX0pXX0pLFAuanN4KCJkaXYiLHtjbGFzc05hbWU6ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiB0ZXh0LXNtIixjaGlsZHJlbjpQLmpzeHMoImxhYmVsIix7Y2xhc3NOYW1lOiJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIiLGNoaWxkcmVuOltQLmpzeCgiaW5wdXQiLHt0eXBlOiJjaGVja2JveCIsY2hlY2tlZDpsLmh1bWFuRGV0ZWN0aW9uLG9uQ2hhbmdlOnY9PmMoUz0+KHsuLi5TLGh1bWFuRGV0ZWN0aW9uOnYudGFyZ2V0LmNoZWNrZWR9KSksY2xhc3NOYW1lOiJyb3VuZGVkIn0pLFAuanN4KCJzcGFuIix7Y2hpbGRyZW46Ikh1bWFuIERldGVjdGlvbiJ9KV19KX0pXX0pfSldfSksci5sZW5ndGg+MCYmUC5qc3hzKCJkaXYiLHtjbGFzc05hbWU6ImJnLWdyYXktODAwIHJvdW5kZWQtbGcgcC00IixjaGlsZHJlbjpbUC5qc3goImgzIix7Y2xhc3NOYW1lOiJ0ZXh0LWxnIGZvbnQtbWVkaXVtIG1iLTQiLGNoaWxkcmVuOiJSZWNlbnQgRXZlbnRzIn0pLFAuanN4KCJkaXYiLHtjbGFzc05hbWU6InNwYWNlLXktMiIsY2hpbGRyZW46ci5zbGljZSgwLDMpLm1hcCh2PT5QLmpzeHMoImRpdiIse2NsYXNzTmFtZToiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMiBiZy1ncmF5LTcwMCByb3VuZGVkIixjaGlsZHJlbjpbUC5qc3hzKCJkaXYiLHtjaGlsZHJlbjpbUC5qc3goInAiLHtjbGFzc05hbWU6InRleHQtc20gZm9udC1tZWRpdW0iLGNoaWxkcmVuOnYubWVzc2FnZX0pLFAuanN4KCJwIix7Y2xhc3NOYW1lOiJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiLGNoaWxkcmVuOnYudGltZXN0YW1wLnRvTG9jYWxlVGltZVN0cmluZygpfSldfSksUC5qc3goInNwYW4iLHtjbGFzc05hbWU6YHB4LTIgcHktMSByb3VuZGVkIHRleHQteHMgJHt2LnNldmVyaXR5PT09ImNyaXRpY2FsIj8iYmctcmVkLTUwMCI6di5zZXZlcml0eT09PSJoaWdoIj8iYmctb3JhbmdlLTUwMCI6di5zZXZlcml0eT09PSJtZWRpdW0iPyJiZy15ZWxsb3ctNTAwIjoiYmctZ3JlZW4tNTAwIn1gLGNoaWxkcmVuOnYuc2V2ZXJpdHl9KV19LHYuaWQpKX0pXX0pXX0pLGk9PT0iZXZlbnRzIiYmUC5qc3goVGllLHtldmVudHM6cn0pLGk9PT0ic2V0dGluZ3MiJiZQLmpzeChFaWUse3NldHRpbmdzOmwsb25TZXR0aW5nc0NoYW5nZTpjfSldfSldfSl9ZnVuY3Rpb24gTGllKCl7cmV0dXJuIFAuanN4KERpZSx7Y2hpbGRyZW46UC5qc3goT2llLHtjaGlsZHJlbjpQLmpzeChGaWUse30pfSl9KX1jTy5jcmVhdGVSb290KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyb290IikpLnJlbmRlcihQLmpzeChzTy5TdHJpY3RNb2RlLHtjaGlsZHJlbjpQLmpzeChMaWUse30pfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC02QlBkZlFnLS5qcy5tYXAK",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 0,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_responseCacheStorageCacheName": "workbox-precache-v2-https://privaseeai.net/",
          "_serviceWorkerResponseSource": "cache-storage"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-10-16T22:13:30.138Z",
        "time": 1.896000001579523,
        "timings": {
          "blocked": 0.4719999921033159,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0,
          "wait": 0.8199999941755086,
          "receive": 0.6040000153006986,
          "_blocked_queueing": 0.4709999921033159,
          "_workerStart": 0,
          "_workerReady": 0.095,
          "_workerFetchStart": 0.095,
          "_workerRespondWithSettled": 0.747
        }
      },
      {
        "_fromCache": "disk",
        "_initiator": {
          "type": "parser",
          "url": "https://privaseeai.net/?error=auth_failed",
          "lineNumber": 27
        },
        "_priority": "VeryHigh",
        "_resourceType": "stylesheet",
        "cache": {},
        "pageref": "page_2",
        "request": {
          "method": "GET",
          "url": "https://privaseeai.net/assets/index-DanV3IS7.css",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Origin",
              "value": "https://privaseeai.net"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"macOS\""
            },
            {
              "name": "Referer",
              "value": "https://privaseeai.net/?error=auth_failed"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "public, max-age=0"
            },
            {
              "name": "ETag",
              "value": "W/\"6917-199eebe1250\""
            },
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            },
            {
              "name": "Content-Length",
              "value": "26903"
            },
            {
              "name": "Date",
              "value": "Thu, 16 Oct 2025 20:47:43 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/css; charset=UTF-8"
            },
            {
              "name": "Last-Modified",
              "value": "Thu, 16 Oct 2025 20:37:38 GMT"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 26903,
            "mimeType": "text/css",
            "text": "*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: \"\"}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",Segoe UI Symbol,\"Noto Color Emoji\";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.-top-3{top:-.75rem}.-top-6{top:-1.5rem}.bottom-0{bottom:0}.left-0{left:0}.left-1\\/2{left:50%}.left-4{left:1rem}.right-0{right:0}.right-4{right:1rem}.top-0{top:0}.top-1\\/2{top:50%}.top-4{top:1rem}.z-20{z-index:20}.z-30{z-index:30}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:.25rem}.mb-16{margin-bottom:4rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-2{margin-left:.5rem}.ml-7{margin-left:1.75rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.mt-0\\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-16{margin-top:4rem}.mt-2{margin-top:.5rem}.mt-20{margin-top:5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.block{display:block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.aspect-video{aspect-ratio:16 / 9}.h-1{height:.25rem}.h-10{height:2.5rem}.h-12{height:3rem}.h-2{height:.5rem}.h-3{height:.75rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-full{height:100%}.max-h-40{max-height:10rem}.max-h-\\[70vh\\]{max-height:70vh}.max-h-full{max-height:100%}.min-h-screen{min-height:100vh}.w-1\\/2{width:50%}.w-12{width:3rem}.w-2{width:.5rem}.w-24{width:6rem}.w-3{width:.75rem}.w-3\\/4{width:75%}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-8{width:2rem}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-full{min-width:100%}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-6xl{max-width:72rem}.max-w-7xl{max-width:80rem}.max-w-full{max-width:100%}.max-w-md{max-width:28rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.grow{flex-grow:1}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(2rem * var(--tw-space-x-reverse));margin-left:calc(2rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(229 231 235 / var(--tw-divide-opacity, 1))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.border-blue-300{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-400{--tw-border-opacity: 1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-blue-600{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-500{--tw-border-opacity: 1;border-color:rgb(107 114 128 / var(--tw-border-opacity, 1))}.border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.border-gray-700{--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-orange-500{--tw-border-opacity: 1;border-color:rgb(249 115 22 / var(--tw-border-opacity, 1))}.border-red-500{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-yellow-400{--tw-border-opacity: 1;border-color:rgb(250 204 21 / var(--tw-border-opacity, 1))}.border-yellow-500{--tw-border-opacity: 1;border-color:rgb(234 179 8 / var(--tw-border-opacity, 1))}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-500{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-orange-500{--tw-bg-opacity: 1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.bg-purple-500{--tw-bg-opacity: 1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity: 1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-opacity-10{--tw-bg-opacity: .1}.bg-opacity-50{--tw-bg-opacity: .5}.bg-opacity-70{--tw-bg-opacity: .7}.bg-opacity-75{--tw-bg-opacity: .75}.bg-opacity-80{--tw-bg-opacity: .8}.bg-opacity-90{--tw-bg-opacity: .9}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-purple-500{--tw-gradient-from: #a855f7 var(--tw-gradient-from-position);--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-pink-500{--tw-gradient-to: #ec4899 var(--tw-gradient-to-position)}.object-contain{-o-object-fit:contain;object-fit:contain}.object-cover{-o-object-fit:cover;object-fit:cover}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-0\\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-16{padding-top:4rem;padding-bottom:4rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pl-2{padding-left:.5rem}.pl-4{padding-left:1rem}.pt-3{padding-top:.75rem}.pt-6{padding-top:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.tracking-wide{letter-spacing:.025em}.tracking-wider{letter-spacing:.05em}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-300{--tw-text-opacity: 1;color:rgb(134 239 172 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-indigo-600{--tw-text-opacity: 1;color:rgb(79 70 229 / var(--tw-text-opacity, 1))}.text-orange-400{--tw-text-opacity: 1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.text-purple-400{--tw-text-opacity: 1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.text-purple-500{--tw-text-opacity: 1;color:rgb(168 85 247 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity: 1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-75{opacity:.75}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-purple-500{--tw-ring-opacity: 1;--tw-ring-color: rgb(168 85 247 / var(--tw-ring-opacity, 1))}.ring-opacity-50{--tw-ring-opacity: .5}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#111827;color:#fff}@keyframes pulse-detection{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.02)}}.detection-box{animation:pulse-detection 2s infinite;border:2px solid #ef4444;background-color:#ef44441a}.detection-box.person{border-color:#ef4444;background-color:#ef44441a}.detection-box.vehicle{border-color:#3b82f6;background-color:#3b82f61a}.detection-box.animal{border-color:#10b981;background-color:#10b9811a}.camera-container{position:relative;overflow:hidden;border-radius:.5rem}.camera-stream{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.status-indicator{display:flex;align-items:center;gap:.5rem;padding:.25rem .75rem;border-radius:9999px;font-size:.875rem;font-weight:500}.status-indicator.active{background-color:#10b981;color:#fff}.status-indicator.inactive{background-color:#6b7280;color:#fff}.severity-critical{background-color:#dc2626;color:#fff}.severity-high{background-color:#ea580c;color:#fff}.severity-medium{background-color:#ca8a04;color:#000}.severity-low{background-color:#16a34a;color:#fff}.loading-spinner{border:3px solid #374151;border-top:3px solid #3b82f6;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.camera-container{aspect-ratio:16/9}.detection-overlay{font-size:.75rem}}.bg-dark{background-color:#0f172a}.bg-dark-secondary{background-color:#1e293b}.text-dark-primary{color:#f1f5f9}.text-dark-secondary{color:#94a3b8}.hover\\:border-gray-300:hover{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hover\\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-600:hover{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\\:bg-purple-700:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.hover\\:bg-red-600:hover{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\\:from-purple-600:hover{--tw-gradient-from: #9333ea var(--tw-gradient-from-position);--tw-gradient-to: rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\\:to-pink-600:hover{--tw-gradient-to: #db2777 var(--tw-gradient-to-position)}.hover\\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\\:text-gray-900:hover{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.hover\\:text-indigo-900:hover{--tw-text-opacity: 1;color:rgb(49 46 129 / var(--tw-text-opacity, 1))}.hover\\:text-red-400:hover{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.hover\\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\\:ring-purple-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(168 85 247 / var(--tw-ring-opacity, 1))}.focus\\:ring-red-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.focus\\:ring-yellow-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(234 179 8 / var(--tw-ring-opacity, 1))}.focus\\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}@media (min-width: 640px){.sm\\:px-6{padding-left:1.5rem;padding-right:1.5rem}}@media (min-width: 768px){.md\\:block{display:block}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\\:text-5xl{font-size:3rem;line-height:1}}@media (min-width: 1024px){.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:px-8{padding-left:2rem;padding-right:2rem}}\n"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 0,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_responseCacheStorageCacheName": "workbox-precache-v2-https://privaseeai.net/",
          "_serviceWorkerResponseSource": "cache-storage"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-10-16T22:13:30.138Z",
        "time": 1.759999999194406,
        "timings": {
          "blocked": 0.3869999997075647,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0,
          "wait": 1.1219999945499004,
          "receive": 0.25100000493694097,
          "_blocked_queueing": 0.3859999997075647,
          "_workerStart": 0.001,
          "_workerReady": 0.357,
          "_workerFetchStart": 0.357,
          "_workerRespondWithSettled": 1.063
        }
      },
      {
        "_fromCache": "disk",
        "_initiator": {
          "type": "parser",
          "url": "https://privaseeai.net/?error=auth_failed",
          "lineNumber": 28
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "pageref": "page_2",
        "request": {
          "method": "GET",
          "url": "https://privaseeai.net/registerSW.js",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "sec-ch-ua-platform",
              "value": "\"macOS\""
            },
            {
              "name": "Referer",
              "value": "https://privaseeai.net/?error=auth_failed"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "public, max-age=0"
            },
            {
              "name": "ETag",
              "value": "W/\"86-199ee944330\""
            },
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            },
            {
              "name": "Content-Length",
              "value": "134"
            },
            {
              "name": "Date",
              "value": "Thu, 16 Oct 2025 20:13:04 GMT"
            },
            {
              "name": "Content-Type",
              "value": "application/javascript; charset=UTF-8"
            },
            {
              "name": "Last-Modified",
              "value": "Thu, 16 Oct 2025 19:51:58 GMT"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 134,
            "mimeType": "application/javascript",
            "text": "if('serviceWorker' in navigator) {window.addEventListener('load', () => {navigator.serviceWorker.register('/sw.js', { scope: '/' })})}"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 0,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_responseCacheStorageCacheName": "workbox-precache-v2-https://privaseeai.net/",
          "_serviceWorkerResponseSource": "cache-storage"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-10-16T22:13:30.138Z",
        "time": 2.099999997881241,
        "timings": {
          "blocked": 0.377000003259629,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0,
          "wait": 1.4450000023720786,
          "receive": 0.27799999224953353,
          "_blocked_queueing": 0.375000003259629,
          "_workerStart": 0.002,
          "_workerReady": 0.487,
          "_workerFetchStart": 0.487,
          "_workerRespondWithSettled": 1.4
        }
      },
      {
        "_connectionId": "330275",
        "_initiator": {
          "type": "other"
        },
        "_priority": "High",
        "_resourceType": "other",
        "cache": {},
        "connection": "443",
        "pageref": "page_2",
        "request": {
          "method": "GET",
          "url": "https://privaseeai.net/vite.svg",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "privaseeai.net"
            },
            {
              "name": "If-Modified-Since",
              "value": "Thu, 16 Oct 2025 22:00:23 GMT"
            },
            {
              "name": "If-None-Match",
              "value": "W/\"5d0-199ef09d4d8\""
            },
            {
              "name": "Referer",
              "value": "https://privaseeai.net/?error=auth_failed"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "image"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "no-cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"macOS\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 865,
          "bodySize": 0
        },
        "response": {
          "status": 304,
          "statusText": "Not Modified",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept-Ranges",
              "value": "bytes"
            },
            {
              "name": "Cache-Control",
              "value": "public, max-age=0"
            },
            {
              "name": "Content-Security-Policy",
              "value": "frame-ancestors 'none'"
            },
            {
              "name": "Date",
              "value": "Thu, 16 Oct 2025 22:13:30 GMT"
            },
            {
              "name": "ETag",
              "value": "W/\"5d0-199ef09d4d8\""
            },
            {
              "name": "Last-Modified",
              "value": "Thu, 16 Oct 2025 22:00:23 GMT"
            },
            {
              "name": "X-Powered-By",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 1488,
            "mimeType": "text/html",
            "text": "<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/vite.svg\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <meta name=\"theme-color\" content=\"#000000\" />\n    <meta name=\"description\" content=\"AI-powered home security monitoring with TensorFlow.js\" />\n    \n    <!-- PWA Meta Tags -->\n    <link rel=\"apple-touch-icon\" href=\"/apple-touch-icon.png\" />\n    <link rel=\"manifest\" href=\"/manifest.json\" />\n    \n    <!-- Security and Privacy -->\n    <meta http-equiv=\"Content-Security-Policy\" content=\"\n      default-src 'self' https://github.com https://api.github.com;\n      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net;\n      style-src 'self' 'unsafe-inline';\n      img-src 'self' data: blob:;\n      media-src 'self' blob:;\n      connect-src 'self' https://*.blob.core.windows.net https://tfhub.dev https://storage.googleapis.com https://cdn.jsdelivr.net https://github.com https://api.github.com;\n      worker-src 'self' blob:;\n      form-action 'self' https://github.com;\n    \">\n    \n    <title>Home Security App</title>\n    <script type=\"module\" crossorigin src=\"/assets/index-6BPdfQg-.js\"></script>\n    <link rel=\"stylesheet\" crossorigin href=\"/assets/index-DanV3IS7.css\">\n  <link rel=\"manifest\" href=\"/manifest.webmanifest\"><script id=\"vite-plugin-pwa:register-sw\" src=\"/registerSW.js\"></script></head>\n  <body>\n    <div id=\"root\"></div>\n  </body>\n</html>"
          },
          "redirectURL": "",
          "headersSize": 267,
          "bodySize": 0,
          "_transferSize": 267,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "20.119.128.21",
        "startedDateTime": "2025-10-16T22:13:30.205Z",
        "time": 112.02400000183843,
        "timings": {
          "blocked": 0.6420000091968104,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.05400000000000002,
          "wait": 111.14899999752734,
          "receive": 0.17899999511428177,
          "_blocked_queueing": 0.5000000091968104,
          "_workerStart": -0.365,
          "_workerReady": -0.298,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      }
    ]
  }
}